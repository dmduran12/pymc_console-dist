import{c as e,j as s,U as t,V as a,b as l,W as r,Y as c,Z as n,P as i,$ as o,a0 as m}from"./index-DJZzIT5o.js";import{c as d,b as x}from"./recharts-bmHCCfxU.js";import{u as p}from"./usePolling-DMtQdE_y.js";import{P as u,a as h,C as b,b as g}from"./PageLayout-v625f7fI.js";import{C as j}from"./circle-kquAvdKJ.js";import{R as f}from"./refresh-cw-J4C9PxWk.js";import{I as y}from"./info-CPIlh1n-.js";import{L as N}from"./loader-circle-KHtnwzaq.js";import"./maplibre-gl-CFO9X1Ek.js";const v=e("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function w({className:e,style:t}){return s.jsx("div",{className:d("animate-pulse bg-white/[0.06] rounded",e),style:t})}function k(){return s.jsx("div",{className:"p-3 rounded-lg border border-border-subtle bg-bg-subtle",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(w,{className:"w-14 h-6 rounded shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[s.jsx(w,{className:"h-4 w-full"}),s.jsx(w,{className:"h-4 w-3/4"}),s.jsx(w,{className:"h-3 w-32 mt-1"})]})]})})}function M({count:e=8}){return s.jsx("div",{className:"space-y-2",children:Array.from({length:e}).map((e,t)=>s.jsx(k,{},t))})}const F=x.memo(function({log:e}){const t=m(e.level);return s.jsx("div",{className:d("p-3 rounded-lg border bg-bg-subtle",t),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:d("type-badge w-16 text-center px-2 py-1 rounded border shrink-0",t),children:e.level}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"type-data-sm text-text-primary break-words whitespace-pre-wrap",children:e.message}),s.jsx("p",{className:"type-data-xs text-text-muted mt-1",children:new Date(e.timestamp).toLocaleString()})]})]})})});function E(){const e=t(),[a,l]=x.useState("INFO"),[r,c]=x.useState(!1),[n,i]=x.useState(null);x.useEffect(()=>{if(e.length>0){const s=e.some(e=>"DEBUG"===e.level);l(s?"DEBUG":"INFO")}},[e]);const m=x.useCallback(async e=>{if(e!==a&&!r){c(!0),i(null);try{const s=await o(e);s.success&&s.data?(l(e),i(s.data.message),setTimeout(()=>i(null),5e3)):(i(s.error||"Failed to change log level"),setTimeout(()=>i(null),3e3))}catch{i("Failed to change log level"),setTimeout(()=>i(null),3e3)}finally{c(!1)}}},[a,r]);return s.jsxs("div",{className:"flex items-center gap-2",children:[n&&s.jsx("span",{className:"text-xs text-text-muted animate-pulse",children:n}),s.jsxs("div",{className:"flex rounded-lg border border-border-subtle overflow-hidden",children:[s.jsxs("button",{onClick:()=>m("INFO"),disabled:r,className:d("px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium flex items-center gap-2 transition-colors","INFO"===a?"bg-accent-primary/20 text-accent-primary border-accent-primary/30":"bg-bg-subtle text-text-muted hover:bg-bg-elevated",r&&"opacity-50 cursor-not-allowed"),children:[s.jsx(y,{className:"w-4 h-4"}),"INFO"]}),s.jsxs("button",{onClick:()=>m("DEBUG"),disabled:r,className:d("px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium flex items-center gap-2 transition-colors border-l border-border-subtle","DEBUG"===a?"bg-amber-500/20 text-amber-400 border-amber-500/30":"bg-bg-subtle text-text-muted hover:bg-bg-elevated",r&&"opacity-50 cursor-not-allowed"),children:[r?s.jsx(N,{className:"w-4 h-4 animate-spin"}):s.jsx(v,{className:"w-4 h-4"}),"DEBUG"]})]})]})}function L(){const e=t(),o=a(),m=l(),x=r(),y=c();return p(x,i.logs,m),s.jsxs(u,{children:[s.jsx(h,{title:"System Logs",icon:s.jsx(n,{}),controls:s.jsxs(s.Fragment,{children:[s.jsx(E,{}),m&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(j,{className:"w-2 h-2 fill-accent-success text-accent-success animate-pulse"}),s.jsx("span",{className:"text-text-muted",children:"Live"})]}),s.jsxs("button",{onClick:()=>y(!m),className:d("px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-sm font-medium transition-colors","flex items-center gap-2 border",m?"bg-accent-success/20 text-accent-success border-accent-success/30":"bg-bg-subtle text-text-muted border-border-subtle hover:bg-bg-elevated"),children:[s.jsx(f,{className:d("w-4 h-4",m&&"animate-spin")}),s.jsx("span",{className:"hidden xs:inline",children:m?"Live":"Paused"})]})]})}),s.jsxs(b,{noPadding:!0,children:[s.jsx(g,{listHeader:!0,icon:s.jsx(n,{className:"icon-sm"}),title:"Log Entries"}),s.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] sm:max-h-[calc(100vh-250px)] overflow-y-auto p-4",children:o&&0===e.length?s.jsx(M,{count:10}):0===e.length?s.jsx("div",{className:"text-center py-12 text-text-muted",children:"No logs available"}):e.map((e,t)=>s.jsx(F,{log:e},`${e.timestamp}-${t}`))})]})]})}export{L as default};
