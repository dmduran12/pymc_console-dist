import{r as e,j as t,c as n}from"./vendor-react-j_fHog8x.js";const s=["#22c55e","#3b82f6","#f59e0b","#ec4899","#8b5cf6","#06b6d4","#f97316","#84cc16"];function l(e){let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return s[Math.abs(t)%s.length]}const r=new RegExp("(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu");function a(e){const t=e.match(r);return t&&t.length>0?{emoji:t[0],cleanName:e.replace(r,"").trim()||e}:{emoji:null,cleanName:e}}function i(e){const{cleanName:t}=a(e),n=t.split(/[\s-_]+/).filter(Boolean);return n.length>=2?((Array.from(n[0])[0]||"")+(Array.from(n[1])[0]||"")).toUpperCase():Array.from(t).slice(0,2).join("").toUpperCase()}function c(e){return new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}function o(t){const n=/@\[([^\]]+)\]/g,s=[];let l,r=0;for(;null!==(l=n.exec(t));)l.index>r&&s.push(t.slice(r,l.index)),s.push(e.createElement("span",{key:l.index,className:"font-extrabold text-white"},l[1])),r=l.index+l[0].length;return r<t.length&&s.push(t.slice(r)),s.length>0?s:t}const m=e.memo(function({senderName:e,text:s,timestamp:r,nameAccessory:m,bubbleAccessory:d,className:x}){const{emoji:u,cleanName:f}=a(e),h=l(f),p=i(e);return t.jsxs("div",{className:n("group flex items-start gap-3 w-full",x),children:[t.jsxs("div",{className:"flex-shrink-0 w-9 flex flex-col items-center gap-1",children:[t.jsx("div",{className:n("w-9 h-9 rounded-full flex items-center justify-center","shadow-md ring-1 ring-border-subtle",u?"text-lg":"text-white text-[13px] font-bold tracking-tight"),style:{backgroundColor:h},children:u||p}),t.jsx("span",{className:"text-[10px] text-text-muted tabular-nums h-4 leading-4",children:c(r)})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 h-5 mb-1",children:[t.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:h,lineHeight:"20px"},children:f}),m]}),t.jsxs("div",{className:"flex items-end gap-1.5",children:[t.jsx("div",{className:n("inline-block px-3.5 py-2.5 max-w-full","rounded-2xl rounded-tl-md","bg-[#007AFF]"),children:t.jsx("p",{className:"text-sm text-white leading-relaxed tracking-wide whitespace-pre-wrap break-words",children:o(s)})}),d]})]})]})});function d({text:e}){return t.jsx("div",{className:"flex justify-center my-1",children:t.jsx("span",{className:n("px-3 py-1 rounded-full","bg-subtle-fill text-[11px] text-text-muted/80 font-medium","ring-1 ring-border-subtle"),children:e})})}export{m as C,d as S,i as a,a as e,o as f,l as g};
