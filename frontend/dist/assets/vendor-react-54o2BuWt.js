const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webgl-device-QoBMYpnS-BX-IJcIB.js"])))=>i.map(i=>d[i]);
var e,t,n,i,r,o=Object.defineProperty,s=(e,t,n)=>((e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);import{g as a,_ as l}from"./deckgl-DTsmDcfs.js";function c(e,t){for(var n=0;n<t.length;n++){const i=t[n];if("string"!=typeof i&&!Array.isArray(i))for(const t in i)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(i,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>i[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var u,d,h,f,p={exports:{}},m={},g={exports:{}},_={};function y(){if(u)return _;u=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,p(b,g.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(t,n,i){var r,o={},s=null,a=null;if(null!=n)for(r in void 0!==n.ref&&(a=n.ref),void 0!==n.key&&(s=""+n.key),n)w.call(n,r)&&!E.hasOwnProperty(r)&&(o[r]=n[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:e,type:t,key:s,ref:a,props:o,_owner:S.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var k=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(n,i,r,o,s){var a=typeof n;"undefined"!==a&&"boolean"!==a||(n=null);var l=!1;if(null===n)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return s=s(l=n),n=""===o?"."+A(l,0):o,x(s)?(r="",null!=n&&(r=n.replace(k,"$&/")+"/"),I(s,i,r,"",function(e){return e})):null!=s&&(T(s)&&(s=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+n)),i.push(s)),1;if(l=0,o=""===o?".":o+":",x(n))for(var c=0;c<n.length;c++){var u=o+A(a=n[c],c);l+=I(a,i,r,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(a=n.next()).done;)l+=I(a=a.value,i,r,u=o+A(a,c++),s);else if("object"===a)throw i=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===i?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",function(e){return t.call(n,e,r++)}),i}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}return _.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},_.Component=g,_.Fragment=n,_.Profiler=r,_.PureComponent=v,_.StrictMode=i,_.Suspense=l,_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,_.act=D,_.cloneElement=function(t,n,i){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=p({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=n){if(void 0!==n.ref&&(s=n.ref,a=S.current),void 0!==n.key&&(o=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)w.call(n,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:e,type:t.type,key:o,ref:s,props:r,_owner:a}},_.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},_.createElement=C,_.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},_.createRef=function(){return{current:null}},_.forwardRef=function(e){return{$$typeof:a,render:e}},_.isValidElement=T,_.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},_.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},_.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},_.unstable_act=D,_.useCallback=function(e,t){return R.current.useCallback(e,t)},_.useContext=function(e){return R.current.useContext(e)},_.useDebugValue=function(){},_.useDeferredValue=function(e){return R.current.useDeferredValue(e)},_.useEffect=function(e,t){return R.current.useEffect(e,t)},_.useId=function(){return R.current.useId()},_.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},_.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},_.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},_.useMemo=function(e,t){return R.current.useMemo(e,t)},_.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},_.useRef=function(e){return R.current.useRef(e)},_.useState=function(e){return R.current.useState(e)},_.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},_.useTransition=function(){return R.current.useTransition()},_.version="18.3.1",_}function v(){return d||(d=1,g.exports=y()),g.exports}var b=(f||(f=1,p.exports=function(){if(h)return m;h=1;var e=v(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,n,s){var a,l={},c=null,u=null;for(a in void 0!==s&&(c=""+s),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)i.call(n,a)&&!o.hasOwnProperty(a)&&(l[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===l[a]&&(l[a]=n[a]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:r.current}}return m.Fragment=n,m.jsx=s,m.jsxs=s,m}()),p.exports),x=v();const w=a(x),S=c({__proto__:null,default:w},[x]);var E,C,T,k,A,I={},P={exports:{}},L={},R={exports:{}},O={};function M(){if(T)return L;T=1;var e=v(),t=(C||(C=1,R.exports=(E||(E=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(!(0<r(o,t)))break e;e[i]=t,e[n]=o,n=i}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,s=o>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>r(l,n))c<o&&0>r(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<o&&0>r(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var r=n(c);null!==r;){if(null===r.callback)i(c);else{if(!(r.startTime<=e))break;i(c),r.sortIndex=r.expirationTime,t(l,r)}r=n(c)}}function b(e){if(m=!1,v(e),!p)if(null!==n(l))p=!0,R(x);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function x(t,r){p=!1,m&&(m=!1,_(C),C=-1),f=!0;var o=h;try{for(v(r),d=n(l);null!==d&&(!(d.expirationTime>r)||t&&!A());){var s=d.callback;if("function"==typeof s){d.callback=null,h=d.priorityLevel;var a=s(d.expirationTime<=r);r=e.unstable_now(),"function"==typeof a?d.callback=a:d===n(l)&&i(l),v(r)}else i(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&O(b,g.startTime-r),u=!1}return u}finally{d=null,h=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,E=null,C=-1,T=5,k=-1;function A(){return!(e.unstable_now()-k<T)}function I(){if(null!==E){var t=e.unstable_now();k=t;var n=!0;try{n=E(!0,t)}finally{n?w():(S=!1,E=null)}}else S=!1}if("function"==typeof y)w=function(){y(I)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=I,w=function(){L.postMessage(null)}}else w=function(){g(I,0)};function R(e){E=e,S||(S=!0,w())}function O(t,n){C=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,R(x))},e.unstable_forceFrameRate=function(e){0>e||125<e||(T=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(i,r,o){var s=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,i){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return i={id:u++,callback:r,priorityLevel:i,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(i.sortIndex=o,t(c,i),null===n(l)&&i===n(c)&&(m?(_(C),C=-1):m=!0,O(b,o-s))):(i.sortIndex=a,t(l,i),p||f||(p=!0,R(x))),i},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(O)),O)),R.exports);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(r[e]=t,e=0;e<t.length;e++)i.add(t[e])}var a=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function g(e,t,n,i){var r=f.hasOwnProperty(t)?f[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(p,m);f[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(p,m);f[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(p,m);f[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),B=Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}var U,j=Object.assign;function V(e){if(void 0===U)try{throw Error()}catch(ote){var t=ote.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Xo){var i=Xo}Reflect.construct(e,[],t)}else{try{t.call()}catch(Xo){i=Xo}e.call(t.prototype)}else{try{throw Error()}catch(Xo){i=Xo}e()}}catch(Xo){if(Xo&&i&&"string"==typeof Xo.stack){for(var r=Xo.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function $(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return W(e.type,!1);case 11:return W(e.type.render,!1);case 1:return W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case S:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case M:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return G(e(t))}catch(ote){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=X(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&g(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,n):t.hasOwnProperty("defaultValue")&&re(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function re(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oe=Array.isArray;function se(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(n(92));if(oe(i)){if(1<i.length)throw Error(n(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:Y(i)}}function ce(e,t){var n=Y(t.value),i=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,pe,me=(pe=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return pe(e,t)})}:pe);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ve(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(_e).forEach(function(e){ye.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]})});var xe=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,ke=null,Ae=null;function Ie(e){if(e=kr(e)){if("function"!=typeof Te)throw Error(n(280));var t=e.stateNode;t&&(t=Ir(t),Te(e.stateNode,e.type,t))}}function Pe(e){ke?Ae?Ae.push(e):Ae=[e]:ke=e}function Le(){if(ke){var e=ke,t=Ae;if(Ae=ke=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Re(e,t){return e(t)}function Oe(){}var Me=!1;function De(e,t,n){if(Me)return e(t,n);Me=!0;try{return Re(e,t,n)}finally{Me=!1,(null!==ke||null!==Ae)&&(Oe(),Le())}}function Ne(e,t){var i=e.stateNode;if(null===i)return null;var r=Ir(i);if(null===r)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(n(231,t,typeof i));return i}var Fe=!1;if(a)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(pe){Fe=!1}function ze(e,t,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ue=!1,je=null,Ve=!1,He=null,We={onError:function(e){Ue=!0,je=e}};function $e(e,t,n,i,r,o,s,a,l){Ue=!1,je=null,ze.apply(We,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Xe(e){if(Ge(e)!==e)throw Error(n(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(n(188));return t!==e?null:e}for(var i=e,r=t;;){var o=i.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){i=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===i)return Xe(o),e;if(s===r)return Xe(o),t;s=s.sibling}throw Error(n(188))}if(i.return!==r.return)i=o,r=s;else{for(var a=!1,l=o.child;l;){if(l===i){a=!0,i=o,r=s;break}if(l===r){a=!0,r=o,i=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===i){a=!0,i=s,r=o;break}if(l===r){a=!0,r=s,i=o;break}l=l.sibling}if(!a)throw Error(n(189))}}if(i.alternate!==r)throw Error(n(190))}if(3!==i.tag)throw Error(n(188));return i.stateNode.current===i?e:t}(e))?Ze(e):null}function Ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ze(e);if(null!==t)return t;e=e.sibling}return null}var Qe=t.unstable_scheduleCallback,Je=t.unstable_cancelCallback,et=t.unstable_shouldYield,tt=t.unstable_requestPaint,nt=t.unstable_now,it=t.unstable_getCurrentPriorityLevel,rt=t.unstable_ImmediatePriority,ot=t.unstable_UserBlockingPriority,st=t.unstable_NormalPriority,at=t.unstable_LowPriority,lt=t.unstable_IdlePriority,ct=null,ut=null,dt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ht(e)/ft|0)|0},ht=Math.log,ft=Math.LN2,pt=64,mt=4194304;function gt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _t(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=gt(a):0!==(o&=s)&&(i=gt(o))}else 0!==(s=n&~r)?i=gt(s):0!==o&&(i=gt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&4194240&o))return t;if(4&i&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-dt(t)),i|=e[n],t&=~r;return i}function yt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function bt(){var e=pt;return!(4194240&(pt<<=1))&&(pt=64),e}function xt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-dt(t)]=n}function St(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-dt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Et=0;function Ct(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Tt,kt,At,It,Pt,Lt=!1,Rt=[],Ot=null,Mt=null,Nt=null,Ft=new Map,Bt=new Map,zt=[],Ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function Vt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&null!==(t=kr(t))&&kt(t),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ht(e){var t=Tr(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void Pt(e.priority,function(){At(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Wt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=kr(n))&&kt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Ee=i,n.target.dispatchEvent(i),Ee=null,t.shift()}return!0}function $t(e,t,n){Wt(e)&&n.delete(t)}function Gt(){Lt=!1,null!==Ot&&Wt(Ot)&&(Ot=null),null!==Mt&&Wt(Mt)&&(Mt=null),null!==Nt&&Wt(Nt)&&(Nt=null),Ft.forEach($t),Bt.forEach($t)}function qt(e,n){e.blockedOn===n&&(e.blockedOn=null,Lt||(Lt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gt)))}function Yt(e){function t(t){return qt(t,e)}if(0<Rt.length){qt(Rt[0],e);for(var n=1;n<Rt.length;n++){var i=Rt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ot&&qt(Ot,e),null!==Mt&&qt(Mt,e),null!==Nt&&qt(Nt,e),Ft.forEach(t),Bt.forEach(t),n=0;n<zt.length;n++)(i=zt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<zt.length&&null===(n=zt[0]).blockedOn;)Ht(n),null===n.blockedOn&&zt.shift()}var Xt=_.ReactCurrentBatchConfig,Kt=!0;function Zt(e,t,n,i){var r=Et,o=Xt.transition;Xt.transition=null;try{Et=1,Jt(e,t,n,i)}finally{Et=r,Xt.transition=o}}function Qt(e,t,n,i){var r=Et,o=Xt.transition;Xt.transition=null;try{Et=4,Jt(e,t,n,i)}finally{Et=r,Xt.transition=o}}function Jt(e,t,n,i){if(Kt){var r=tn(e,t,n,i);if(null===r)Qi(e,t,i,en,n),jt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ot=Vt(Ot,e,t,n,i,r),!0;case"dragenter":return Mt=Vt(Mt,e,t,n,i,r),!0;case"mouseover":return Nt=Vt(Nt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ft.set(o,Vt(Ft.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Bt.set(o,Vt(Bt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(jt(e,i),4&t&&-1<Ut.indexOf(e)){for(;null!==r;){var o=kr(r);if(null!==o&&Tt(o),null===(o=tn(e,t,n,i))&&Qi(e,t,i,en,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Qi(e,t,i,null,n)}}var en=null;function tn(e,t,n,i){if(en=null,null!==(e=Tr(e=Ce(i))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ye(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return en=e,null}function nn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(it()){case rt:return 1;case ot:return 4;case st:case at:return 16;case lt:return 536870912;default:return 16}default:return 16}}var rn=null,on=null,sn=null;function an(){if(sn)return sn;var e,t,n=on,i=n.length,r="value"in rn?rn.value:rn.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return sn=r.slice(e,1<t?1-t:void 0)}function ln(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function cn(){return!0}function dn(){return!1}function hn(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?cn:dn,this.isPropagationStopped=dn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=cn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=cn)},persist:function(){},isPersistent:cn}),t}var fn,pn,mn,gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_n=hn(gn),yn=j({},gn,{view:0,detail:0}),vn=hn(yn),bn=j({},yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mn&&(mn&&"mousemove"===e.type?(fn=e.screenX-mn.screenX,pn=e.screenY-mn.screenY):pn=fn=0,mn=e),fn)},movementY:function(e){return"movementY"in e?e.movementY:pn}}),xn=hn(bn),wn=hn(j({},bn,{dataTransfer:0})),Sn=hn(j({},yn,{relatedTarget:0})),En=hn(j({},gn,{animationName:0,elapsedTime:0,pseudoElement:0})),Tn=j({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=hn(Tn),An=hn(j({},gn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ln={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ln[e])&&!!t[e]}function On(){return Rn}var Mn=j({},yn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ln(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?ln(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ln(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=hn(Mn),Nn=hn(j({},bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fn=hn(j({},yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Bn=hn(j({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0})),zn=j({},bn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Un=hn(zn),jn=[9,13,27,32],Vn=a&&"CompositionEvent"in window,Hn=null;a&&"documentMode"in document&&(Hn=document.documentMode);var Wn=a&&"TextEvent"in window&&!Hn,$n=a&&(!Vn||Hn&&8<Hn&&11>=Hn),Gn=String.fromCharCode(32),qn=!1;function Yn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1,Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zn[e.type]:"textarea"===t}function Jn(e,t,n,i){Pe(i),0<(t=er(t,"onChange")).length&&(n=new _n("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ei=null,ti=null;function ni(e){Gi(e,0)}function ii(e){if(Z(Ar(e)))return e}function ri(e,t){if("change"===e)return t}var oi=!1;if(a){var si;if(a){var ai="oninput"in document;if(!ai){var li=document.createElement("div");li.setAttribute("oninput","return;"),ai="function"==typeof li.oninput}si=ai}else si=!1;oi=si&&(!document.documentMode||9<document.documentMode)}function ci(){ei&&(ei.detachEvent("onpropertychange",ui),ti=ei=null)}function ui(e){if("value"===e.propertyName&&ii(ti)){var t=[];Jn(t,ti,e,Ce(e)),De(ni,t)}}function di(e,t,n){"focusin"===e?(ci(),ti=n,(ei=t).attachEvent("onpropertychange",ui)):"focusout"===e&&ci()}function hi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ii(ti)}function fi(e,t){if("click"===e)return ii(t)}function pi(e,t){if("input"===e||"change"===e)return ii(t)}var mi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function gi(e,t){if(mi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!l.call(t,r)||!mi(e[r],t[r]))return!1}return!0}function _i(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yi(e,t){var n,i=_i(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=_i(i)}}function vi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function bi(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function wi(e){var t=bi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vi(n.ownerDocument.documentElement,n)){if(null!==i&&xi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=yi(n,o);var s=yi(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Si=a&&"documentMode"in document&&11>=document.documentMode,Ei=null,Ci=null,Ti=null,ki=!1;function Ai(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ki||null==Ei||Ei!==Q(i)||(i="selectionStart"in(i=Ei)&&xi(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},Ti&&gi(Ti,i)||(Ti=i,0<(i=er(Ci,"onSelect")).length&&(t=new _n("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ei)))}function Ii(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pi={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionend:Ii("Transition","TransitionEnd")},Li={},Ri={};function Oi(e){if(Li[e])return Li[e];if(!Pi[e])return e;var t,n=Pi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ri)return Li[e]=n[t];return e}a&&(Ri=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);var Mi=Oi("animationend"),Di=Oi("animationiteration"),Ni=Oi("animationstart"),Fi=Oi("transitionend"),Bi=new Map,zi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(e,t){Bi.set(e,t),o(t,[e])}for(var ji=0;ji<zi.length;ji++){var Vi=zi[ji];Ui(Vi.toLowerCase(),"on"+(Vi[0].toUpperCase()+Vi.slice(1)))}Ui(Mi,"onAnimationEnd"),Ui(Di,"onAnimationIteration"),Ui(Ni,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(Fi,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function $i(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,r,o,s,a,l,c){if($e.apply(this,arguments),Ue){if(!Ue)throw Error(n(198));var u=je;Ue=!1,je=null,Ve||(Ve=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function Gi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;$i(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;$i(r,a,c),o=l}}}if(Ve)throw e=He,Ve=!1,He=null,e}function qi(e,t){var n=t[Sr];void 0===n&&(n=t[Sr]=new Set);var i=e+"__bubble";n.has(i)||(Zi(t,e,2,!1),n.add(i))}function Yi(e,t,n){var i=0;t&&(i|=4),Zi(n,e,i,t)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function Ki(e){if(!e[Xi]){e[Xi]=!0,i.forEach(function(t){"selectionchange"!==t&&(Wi.has(t)||Yi(t,!1,e),Yi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xi]||(t[Xi]=!0,Yi("selectionchange",!1,t))}}function Zi(e,t,n,i){switch(nn(t)){case 1:var r=Zt;break;case 4:r=Qt;break;default:r=Jt}n=r.bind(null,t,n,e),r=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Qi(e,t,n,i,r){var o=i;if(!(1&t||2&t||null===i))e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=Tr(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}De(function(){var i=o,r=Ce(n),s=[];e:{var a=Bi.get(e);if(void 0!==a){var l=_n,c=e;switch(e){case"keypress":if(0===ln(n))break e;case"keydown":case"keyup":l=Dn;break;case"focusin":c="focus",l=Sn;break;case"focusout":c="blur",l=Sn;break;case"beforeblur":case"afterblur":l=Sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Fn;break;case Mi:case Di:case Ni:l=En;break;case Fi:l=Bn;break;case"scroll":l=vn;break;case"wheel":l=Un;break;case"copy":case"cut":case"paste":l=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=Ne(p,h))&&u.push(Ji(p,m,f))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Ee||!(c=n.relatedTarget||n.fromElement)||!Tr(c)&&!c[wr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?Tr(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=xn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Ar(l),f=null==c?a:Ar(c),(a=new u(m,p+"leave",l,n,r)).target=d,a.relatedTarget=f,m=null,Tr(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=tr(f))p++;for(f=0,m=h;m;m=tr(m))f++;for(;0<p-f;)u=tr(u),p--;for(;0<f-p;)h=tr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=tr(u),h=tr(h)}u=null}else u=null;null!==l&&nr(s,a,l,u,!1),null!==c&&null!==d&&nr(s,d,c,u,!0)}if("select"===(l=(a=i?Ar(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=ri;else if(Qn(a))if(oi)g=pi;else{g=hi;var _=di}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=fi);switch(g&&(g=g(e,i))?Jn(s,g,n,r):(_&&_(e,a,i),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&re(a,"number",a.value)),_=i?Ar(i):window,e){case"focusin":(Qn(_)||"true"===_.contentEditable)&&(Ei=_,Ci=i,Ti=null);break;case"focusout":Ti=Ci=Ei=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,Ai(s,n,r);break;case"selectionchange":if(Si)break;case"keydown":case"keyup":Ai(s,n,r)}var y;if(Vn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Kn?Yn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&($n&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Kn&&(y=an()):(on="value"in(rn=r)?rn.value:rn.textContent,Kn=!0)),0<(_=er(i,v)).length&&(v=new An(v,e,null,n,r),s.push({event:v,listeners:_}),(y||null!==(y=Xn(n)))&&(v.data=y))),(y=Wn?function(e,t){switch(e){case"compositionend":return Xn(t);case"keypress":return 32!==t.which?null:(qn=!0,Gn);case"textInput":return(e=t.data)===Gn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Vn&&Yn(e,t)?(e=an(),sn=on=rn=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $n&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(i=er(i,"onBeforeInput")).length&&(r=new An("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y)}Gi(s,t)})}function Ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function er(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Ne(e,n))&&i.unshift(Ji(e,o,r)),null!=(o=Ne(e,t))&&i.push(Ji(e,o,r))),e=e.return}return i}function tr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function nr(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ne(n,o))&&s.unshift(Ji(n,l,a)):r||null!=(l=Ne(n,o))&&s.push(Ji(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var ir=/\r\n?/g,rr=/\u0000|\uFFFD/g;function or(e){return("string"==typeof e?e:""+e).replace(ir,"\n").replace(rr,"")}function sr(e,t,i){if(t=or(t),or(e)!==t&&i)throw Error(n(425))}function ar(){}var lr=null,cr=null;function ur(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var dr="function"==typeof setTimeout?setTimeout:void 0,hr="function"==typeof clearTimeout?clearTimeout:void 0,fr="function"==typeof Promise?Promise:void 0,pr="function"==typeof queueMicrotask?queueMicrotask:void 0!==fr?function(e){return fr.resolve(null).then(e).catch(mr)}:dr;function mr(e){setTimeout(function(){throw e})}function gr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Yt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Yt(t)}function _r(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var vr=Math.random().toString(36).slice(2),br="__reactFiber$"+vr,xr="__reactProps$"+vr,wr="__reactContainer$"+vr,Sr="__reactEvents$"+vr,Er="__reactListeners$"+vr,Cr="__reactHandles$"+vr;function Tr(e){var t=e[br];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wr]||n[br]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yr(e);null!==e;){if(n=e[br])return n;e=yr(e)}return t}n=(e=n).parentNode}return null}function kr(e){return!(e=e[br]||e[wr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ar(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function Ir(e){return e[xr]||null}var Pr=[],Lr=-1;function Rr(e){return{current:e}}function Or(e){0>Lr||(e.current=Pr[Lr],Pr[Lr]=null,Lr--)}function Mr(e,t){Lr++,Pr[Lr]=e.current,e.current=t}var Dr={},Nr=Rr(Dr),Fr=Rr(!1),Br=Dr;function zr(e,t){var n=e.type.contextTypes;if(!n)return Dr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ur(e){return null!=e.childContextTypes}function jr(){Or(Fr),Or(Nr)}function Vr(e,t,i){if(Nr.current!==Dr)throw Error(n(168));Mr(Nr,t),Mr(Fr,i)}function Hr(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return i;for(var o in r=r.getChildContext())if(!(o in t))throw Error(n(108,q(e)||"Unknown",o));return j({},i,r)}function Wr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,Br=Nr.current,Mr(Nr,e),Mr(Fr,Fr.current),!0}function $r(e,t,i){var r=e.stateNode;if(!r)throw Error(n(169));i?(e=Hr(e,t,Br),r.__reactInternalMemoizedMergedChildContext=e,Or(Fr),Or(Nr),Mr(Nr,e)):Or(Fr),Mr(Fr,i)}var Gr=null,qr=!1,Yr=!1;function Xr(e){null===Gr?Gr=[e]:Gr.push(e)}function Kr(){if(!Yr&&null!==Gr){Yr=!0;var e=0,t=Et;try{var n=Gr;for(Et=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Gr=null,qr=!1}catch(qe){throw null!==Gr&&(Gr=Gr.slice(e+1)),Qe(rt,Kr),qe}finally{Et=t,Yr=!1}}return null}var Zr=[],Qr=0,Jr=null,eo=0,to=[],no=0,io=null,ro=1,oo="";function so(e,t){Zr[Qr++]=eo,Zr[Qr++]=Jr,Jr=e,eo=t}function ao(e,t,n){to[no++]=ro,to[no++]=oo,to[no++]=io,io=e;var i=ro;e=oo;var r=32-dt(i)-1;i&=~(1<<r),n+=1;var o=32-dt(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,ro=1<<32-dt(t)+r|n<<r|i,oo=o+e}else ro=1<<o|n<<r|i,oo=e}function lo(e){null!==e.return&&(so(e,1),ao(e,1,0))}function co(e){for(;e===Jr;)Jr=Zr[--Qr],Zr[Qr]=null,eo=Zr[--Qr],Zr[Qr]=null;for(;e===io;)io=to[--no],to[no]=null,oo=to[--no],to[no]=null,ro=to[--no],to[no]=null}var uo=null,ho=null,fo=!1,po=null;function mo(e,t){var n=zc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function go(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,uo=e,ho=_r(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,uo=e,ho=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==io?{id:ro,overflow:oo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=zc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,uo=e,ho=null,!0);default:return!1}}function _o(e){return!(!(1&e.mode)||128&e.flags)}function yo(e){if(fo){var t=ho;if(t){var i=t;if(!go(e,t)){if(_o(e))throw Error(n(418));t=_r(i.nextSibling);var r=uo;t&&go(e,t)?mo(r,i):(e.flags=-4097&e.flags|2,fo=!1,uo=e)}}else{if(_o(e))throw Error(n(418));e.flags=-4097&e.flags|2,fo=!1,uo=e}}}function vo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;uo=e}function bo(e){if(e!==uo)return!1;if(!fo)return vo(e),fo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ur(e.type,e.memoizedProps)),t&&(t=ho)){if(_o(e))throw xo(),Error(n(418));for(;t;)mo(e,t),t=_r(t.nextSibling)}if(vo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){ho=_r(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}ho=null}}else ho=uo?_r(e.stateNode.nextSibling):null;return!0}function xo(){for(var e=ho;e;)e=_r(e.nextSibling)}function wo(){ho=uo=null,fo=!1}function So(e){null===po?po=[e]:po.push(e)}var Eo=_.ReactCurrentBatchConfig;function Co(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(n(309));var r=i.stateNode}if(!r)throw Error(n(147,e));var o=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=o.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function To(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ko(e){return(0,e._init)(e._payload)}function Ao(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function i(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=$c(n,e.mode,i)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===x?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===N&&ko(r)===t.type)?((i=o(t,n.props)).ref=Co(e,t,n),i.return=e,i):((i=Vc(n.type,n.key,n.props,null,e.mode,i)).ref=Co(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gc(n,e.mode,i)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,i,r){return null===t||7!==t.tag?((t=Hc(n,e.mode,i,r)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=$c(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case y:return(n=Vc(t.type,t.key,t.props,null,e.mode,n)).ref=Co(e,null,t),n.return=e,n;case b:return(t=Gc(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(oe(t)||z(t))return(t=Hc(t,e.mode,n,null)).return=e,t;To(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===r?c(e,t,n,i):null;case b:return n.key===r?u(e,t,n,i):null;case N:return f(e,t,(r=n._init)(n._payload),i)}if(oe(n)||z(n))return null!==r?null:d(e,t,n,i,null);To(e,n)}return null}function p(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case y:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case b:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case N:return p(e,t,n,(0,i._init)(i._payload),r)}if(oe(i)||z(i))return d(t,e=e.get(n)||null,i,r,null);To(t,i)}return null}return function l(c,u,d,m){if("object"==typeof d&&null!==d&&d.type===x&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case y:e:{for(var g=d.key,_=u;null!==_;){if(_.key===g){if((g=d.type)===x){if(7===_.tag){i(c,_.sibling),(u=o(_,d.props.children)).return=c,c=u;break e}}else if(_.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===N&&ko(g)===_.type){i(c,_.sibling),(u=o(_,d.props)).ref=Co(c,_,d),u.return=c,c=u;break e}i(c,_);break}t(c,_),_=_.sibling}d.type===x?((u=Hc(d.props.children,c.mode,m,d.key)).return=c,c=u):((m=Vc(d.type,d.key,d.props,null,c.mode,m)).ref=Co(c,u,d),m.return=c,c=m)}return a(c);case b:e:{for(_=d.key;null!==u;){if(u.key===_){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){i(c,u.sibling),(u=o(u,d.children||[])).return=c,c=u;break e}i(c,u);break}t(c,u),u=u.sibling}(u=Gc(d,c.mode,m)).return=c,c=u}return a(c);case N:return l(c,u,(_=d._init)(d._payload),m)}if(oe(d))return function(n,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var _=f(n,d,a[m],l);if(null===_){null===d&&(d=g);break}e&&d&&null===_.alternate&&t(n,d),o=s(_,o,m),null===u?c=_:u.sibling=_,u=_,d=g}if(m===a.length)return i(n,d),fo&&so(n,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(n,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return fo&&so(n,m),c}for(d=r(n,d);m<a.length;m++)null!==(g=p(d,n,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(n,e)}),fo&&so(n,m),c}(c,u,d,m);if(z(d))return function(o,a,l,c){var u=z(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var d=u=null,m=a,g=a=0,_=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var v=f(o,m,y.value,c);if(null===v){null===m&&(m=_);break}e&&m&&null===v.alternate&&t(o,m),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v,m=_}if(y.done)return i(o,m),fo&&so(o,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return fo&&so(o,g),u}for(m=r(o,m);!y.done;g++,y=l.next())null!==(y=p(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),fo&&so(o,g),u}(c,u,d,m);To(c,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==u&&6===u.tag?(i(c,u.sibling),(u=o(u,d)).return=c,c=u):(i(c,u),(u=$c(d,c.mode,m)).return=c,c=u),a(c)):i(c,u)}}var Io=Ao(!0),Po=Ao(!1),Lo=Rr(null),Ro=null,Oo=null,Mo=null;function Do(){Mo=Oo=Ro=null}function No(e){var t=Lo.current;Or(Lo),e._currentValue=t}function Fo(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Bo(e,t){Ro=e,Mo=Oo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ka=!0),e.firstContext=null)}function zo(e){var t=e._currentValue;if(Mo!==e)if(e={context:e,memoizedValue:t,next:null},null===Oo){if(null===Ro)throw Error(n(308));Oo=e,Ro.dependencies={lanes:0,firstContext:e}}else Oo=Oo.next=e;return t}var Uo=null;function jo(e){null===Uo?Uo=[e]:Uo.push(e)}function Vo(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,jo(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ho(e,i)}function Ho(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Wo=!1;function $o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Go(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,2&Nl){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ho(e,n)}return null===(r=i.interleaved)?(t.next=t,jo(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ho(e,n)}function Ko(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,St(e,n)}}function Zo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qo(e,t,n,i){var r=e.updateQueue;Wo=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==o){var d=r.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=j({},d,h);break e;case 2:Wo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Wl|=s,e.lanes=s,e.memoizedState=d}}function Jo(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=i,"function"!=typeof o)throw Error(n(191,o));o.call(r)}}}var es={},ts=Rr(es),ns=Rr(es),is=Rr(es);function rs(e){if(e===es)throw Error(n(174));return e}function os(e,t){switch(Mr(is,t),Mr(ns,e),Mr(ts,es),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Or(ts),Mr(ts,t)}function ss(){Or(ts),Or(ns),Or(is)}function as(e){rs(is.current);var t=rs(ts.current),n=he(t,e.type);t!==n&&(Mr(ns,e),Mr(ts,n))}function ls(e){ns.current===e&&(Or(ts),Or(ns))}var cs=Rr(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ds=[];function hs(){for(var e=0;e<ds.length;e++)ds[e]._workInProgressVersionPrimary=null;ds.length=0}var fs=_.ReactCurrentDispatcher,ps=_.ReactCurrentBatchConfig,ms=0,gs=null,_s=null,ys=null,vs=!1,bs=!1,xs=0,ws=0;function Ss(){throw Error(n(321))}function Es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mi(e[n],t[n]))return!1;return!0}function Cs(e,t,i,r,o,s){if(ms=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=null===e||null===e.memoizedState?la:ca,e=i(r,o),bs){s=0;do{if(bs=!1,xs=0,25<=s)throw Error(n(301));s+=1,ys=_s=null,t.updateQueue=null,fs.current=ua,e=i(r,o)}while(bs)}if(fs.current=aa,t=null!==_s&&null!==_s.next,ms=0,ys=_s=gs=null,vs=!1,t)throw Error(n(300));return e}function Ts(){var e=0!==xs;return xs=0,e}function ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?gs.memoizedState=ys=e:ys=ys.next=e,ys}function As(){if(null===_s){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=_s.next;var t=null===ys?gs.memoizedState:ys.next;if(null!==t)ys=t,_s=e;else{if(null===e)throw Error(n(310));e={memoizedState:(_s=e).memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},null===ys?gs.memoizedState=ys=e:ys=ys.next=e}return ys}function Is(e,t){return"function"==typeof t?t(e):t}function Ps(e){var t=As(),i=t.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=e;var r=_s,o=r.baseQueue,s=i.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,i.pending=null}if(null!==o){s=o.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ms&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,gs.lanes|=d,Wl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,mi(r,t.memoizedState)||(ka=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,i.lastRenderedState=r}if(null!==(e=i.interleaved)){o=e;do{s=o.lane,gs.lanes|=s,Wl|=s,o=o.next}while(o!==e)}else null===o&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Ls(e){var t=As(),i=t.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=e;var r=i.dispatch,o=i.pending,s=t.memoizedState;if(null!==o){i.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);mi(s,t.memoizedState)||(ka=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function Rs(){}function Os(e,t){var i=gs,r=As(),o=t(),s=!mi(r.memoizedState,o);if(s&&(r.memoizedState=o,ka=!0),r=r.queue,$s(Ns.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(i.flags|=2048,Us(9,Ds.bind(null,i,r,o,t),void 0,null),null===Fl)throw Error(n(349));30&ms||Ms(i,t,o)}return o}function Ms(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,i){t.value=n,t.getSnapshot=i,Fs(t)&&Bs(e)}function Ns(e,t,n){return n(function(){Fs(t)&&Bs(e)})}function Fs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mi(e,n)}catch(i){return!0}}function Bs(e){var t=Ho(e,1);null!==t&&uc(t,e,1,-1)}function zs(e){var t=ks();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=ia.bind(null,gs,e),[t.memoizedState,e]}function Us(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function js(){return As().memoizedState}function Vs(e,t,n,i){var r=ks();gs.flags|=e,r.memoizedState=Us(1|t,n,void 0,void 0===i?null:i)}function Hs(e,t,n,i){var r=As();i=void 0===i?null:i;var o=void 0;if(null!==_s){var s=_s.memoizedState;if(o=s.destroy,null!==i&&Es(i,s.deps))return void(r.memoizedState=Us(t,n,o,i))}gs.flags|=e,r.memoizedState=Us(1|t,n,o,i)}function Ws(e,t){return Vs(8390656,8,e,t)}function $s(e,t){return Hs(2048,8,e,t)}function Gs(e,t){return Hs(4,2,e,t)}function qs(e,t){return Hs(4,4,e,t)}function Ys(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xs(e,t,n){return n=null!=n?n.concat([e]):null,Hs(4,4,Ys.bind(null,t,e),n)}function Ks(){}function Zs(e,t){var n=As();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Es(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=As();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Es(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 21&ms?(mi(n,t)||(n=bt(),gs.lanes|=n,Wl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=n)}function ea(e,t){var n=Et;Et=0!==n&&4>n?n:4,e(!0);var i=ps.transition;ps.transition={};try{e(!1),t()}finally{Et=n,ps.transition=i}}function ta(){return As().memoizedState}function na(e,t,n){var i=cc(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?oa(t,n):null!==(n=Vo(e,t,n,i))&&(uc(n,e,i,lc()),sa(n,t,i))}function ia(e,t,n){var i=cc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))oa(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,mi(a,s)){var l=t.interleaved;return null===l?(r.next=r,jo(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(Xo){}null!==(n=Vo(e,t,r,i))&&(uc(n,e,i,r=lc()),sa(n,t,i))}}function ra(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function oa(e,t){bs=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(4194240&n){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,St(e,n)}}var aa={readContext:zo,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},la={readContext:zo,useCallback:function(e,t){return ks().memoizedState=[e,void 0===t?null:t],e},useContext:zo,useEffect:Ws,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Vs(4194308,4,Ys.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vs(4,2,e,t)},useMemo:function(e,t){var n=ks();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ks();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=na.bind(null,gs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ks().memoizedState=e},useState:zs,useDebugValue:Ks,useDeferredValue:function(e){return ks().memoizedState=e},useTransition:function(){var e=zs(!1),t=e[0];return e=ea.bind(null,e[1]),ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=gs,o=ks();if(fo){if(void 0===i)throw Error(n(407));i=i()}else{if(i=t(),null===Fl)throw Error(n(349));30&ms||Ms(r,t,i)}o.memoizedState=i;var s={value:i,getSnapshot:t};return o.queue=s,Ws(Ns.bind(null,r,s,e),[e]),r.flags|=2048,Us(9,Ds.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=ks(),t=Fl.identifierPrefix;if(fo){var n=oo;t=":"+t+"R"+(n=(ro&~(1<<32-dt(ro)-1)).toString(32)+n),0<(n=xs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:zo,useCallback:Zs,useContext:zo,useEffect:$s,useImperativeHandle:Xs,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:Qs,useReducer:Ps,useRef:js,useState:function(){return Ps(Is)},useDebugValue:Ks,useDeferredValue:function(e){return Js(As(),_s.memoizedState,e)},useTransition:function(){return[Ps(Is)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1},ua={readContext:zo,useCallback:Zs,useContext:zo,useEffect:$s,useImperativeHandle:Xs,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:Qs,useReducer:Ls,useRef:js,useState:function(){return Ls(Is)},useDebugValue:Ks,useDeferredValue:function(e){var t=As();return null===_s?t.memoizedState=e:Js(t,_s.memoizedState,e)},useTransition:function(){return[Ls(Is)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1};function da(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ha(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=lc(),r=cc(e),o=qo(i,r);o.payload=t,null!=n&&(o.callback=n),null!==(t=Yo(e,o,r))&&(uc(t,e,r,i),Ko(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=lc(),r=cc(e),o=qo(i,r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Yo(e,o,r))&&(uc(t,e,r,i),Ko(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lc(),i=cc(e),r=qo(n,i);r.tag=2,null!=t&&(r.callback=t),null!==(t=Yo(e,r,i))&&(uc(t,e,i,n),Ko(t,e,i))}};function pa(e,t,n,i,r,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!(t.prototype&&t.prototype.isPureReactComponent&&gi(n,i)&&gi(r,o))}function ma(e,t,n){var i=!1,r=Dr,o=t.contextType;return"object"==typeof o&&null!==o?o=zo(o):(r=Ur(t)?Br:Nr.current,o=(i=null!=(i=t.contextTypes))?zr(e,r):Dr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function ga(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function _a(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},$o(e);var o=t.contextType;"object"==typeof o&&null!==o?r.context=zo(o):(o=Ur(t)?Br:Nr.current,r.context=zr(e,o)),r.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ha(e,t,o,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&fa.enqueueReplaceState(r,r.state,null),Qo(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}function ya(e,t){try{var n="",i=t;do{n+=$(i),i=i.return}while(i);var r=n}catch(un){r="\nError generating stack: "+un.message+"\n"+un.stack}return{value:e,source:t,stack:r,digest:null}}function va(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var ba="function"==typeof WeakMap?WeakMap:Map;function xa(e,t,n){(n=qo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ql||(Ql=!0,Jl=i)},n}function wa(e,t,n){(n=qo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===ec?ec=new Set([this]):ec.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Sa(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ba;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Oc.bind(null,e,t,n),t.then(e,e))}function Ea(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ca(e,t,n,i,r){return 1&e.mode?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=qo(-1,1)).tag=2,Yo(n,t,1))),n.lanes|=1),e)}var Ta=_.ReactCurrentOwner,ka=!1;function Aa(e,t,n,i){t.child=null===e?Po(t,null,n,i):Io(t,e.child,n,i)}function Ia(e,t,n,i,r){n=n.render;var o=t.ref;return Bo(t,r),i=Cs(e,t,n,i,o,r),n=Ts(),null===e||ka?(fo&&n&&lo(t),t.flags|=1,Aa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Qa(e,t,r))}function Pa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!=typeof o||Uc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,La(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:gi)(s,i)&&e.ref===t.ref)return Qa(e,t,r)}return t.flags|=1,(e=jc(o,i)).ref=t.ref,e.return=t,t.child=e}function La(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(gi(o,i)&&e.ref===t.ref){if(ka=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Qa(e,t,r);131072&e.flags&&(ka=!0)}}return Ma(e,t,n,i,r)}function Ra(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mr(jl,Ul),Ul|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Mr(jl,Ul),Ul|=i}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(jl,Ul),Ul|=n;else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Mr(jl,Ul),Ul|=i;return Aa(e,t,r,n),t.child}function Oa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ma(e,t,n,i,r){var o=Ur(n)?Br:Nr.current;return o=zr(t,o),Bo(t,r),n=Cs(e,t,n,i,o,r),i=Ts(),null===e||ka?(fo&&i&&lo(t),t.flags|=1,Aa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Qa(e,t,r))}function Da(e,t,n,i,r){if(Ur(n)){var o=!0;Wr(t)}else o=!1;if(Bo(t,r),null===t.stateNode)Za(e,t),ma(t,n,i),_a(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;c="object"==typeof c&&null!==c?zo(c):zr(t,c=Ur(n)?Br:Nr.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==i||l!==c)&&ga(t,s,i,c),Wo=!1;var h=t.memoizedState;s.state=h,Qo(t,i,s,r),l=t.memoizedState,a!==i||h!==l||Fr.current||Wo?("function"==typeof u&&(ha(t,n,u,i),l=t.memoizedState),(a=Wo||pa(t,n,a,i,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Go(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:da(t.type,a),s.props=c,d=t.pendingProps,h=s.context,l="object"==typeof(l=n.contextType)&&null!==l?zo(l):zr(t,l=Ur(n)?Br:Nr.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==d||h!==l)&&ga(t,s,i,l),Wo=!1,h=t.memoizedState,s.state=h,Qo(t,i,s,r);var p=t.memoizedState;a!==d||h!==p||Fr.current||Wo?("function"==typeof f&&(ha(t,n,f,i),p=t.memoizedState),(c=Wo||pa(t,n,c,i,h,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=l,i=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Na(e,t,n,i,o,r)}function Na(e,t,n,i,r,o){Oa(e,t);var s=!!(128&t.flags);if(!i&&!s)return r&&$r(t,n,!1),Qa(e,t,o);i=t.stateNode,Ta.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,a,o)):Aa(e,t,a,o),t.memoizedState=i.state,r&&$r(t,n,!0),t.child}function Fa(e){var t=e.stateNode;t.pendingContext?Vr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Vr(0,t.context,!1),os(e,t.containerInfo)}function Ba(e,t,n,i,r){return wo(),So(r),t.flags|=256,Aa(e,t,n,i),t.child}var za,Ua,ja,Va,Ha={dehydrated:null,treeContext:null,retryLane:0};function Wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function $a(e,t,i){var r,o=t.pendingProps,s=cs.current,a=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Mr(cs,1&s),null===e)return yo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,a?(o=t.mode,a=t.child,l={mode:"hidden",children:l},1&o||null===a?a=Wc(l,o,0,null):(a.childLanes=0,a.pendingProps=l),e=Hc(e,o,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Wa(i),t.memoizedState=Ha,e):Ga(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,i,r,o,s,a){if(i)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=va(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Wc({mode:"visible",children:r.children},o,0,null),(s=Hc(s,o,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&Io(t,e.child,null,a),t.child.memoizedState=Wa(a),t.memoizedState=Ha,s);if(!(1&t.mode))return qa(e,t,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=va(s=Error(n(419)),r,void 0))}if(l=0!==(a&e.childLanes),ka||l){if(null!==(r=Fl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|a))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Ho(e,o),uc(r,e,o,-1))}return Sc(),qa(e,t,a,r=va(Error(n(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,ho=_r(o.nextSibling),uo=t,fo=!0,po=null,null!==e&&(to[no++]=ro,to[no++]=oo,to[no++]=io,ro=e.id,oo=e.overflow,io=t),(t=Ga(t,r.children)).flags|=4096,t)}(e,t,l,o,r,s,i);if(a){a=o.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 1&l||t.child===s?(o=jc(s,c)).subtreeFlags=14680064&s.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null),null!==r?a=jc(r,a):(a=Hc(a,l,i,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,l=null===(l=e.child.memoizedState)?Wa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~i,t.memoizedState=Ha,o}return e=(a=e.child).sibling,o=jc(a,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=i),o.return=t,o.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function Ga(e,t){return(t=Wc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,i){return null!==i&&So(i),Io(t,e.child,null,n),(e=Ga(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ya(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Fo(e.return,t,n)}function Xa(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Ka(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(Aa(e,t,i.children,n),2&(i=cs.current))i=1&i|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ya(e,n,t);else if(19===e.tag)Ya(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Mr(cs,i),1&t.mode)switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Xa(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===us(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Xa(t,!0,n,null,o);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Za(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Wl|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(i=jc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=jc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Ja(e,t){if(!fo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function el(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function tl(e,t,i){var o=t.pendingProps;switch(co(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return el(t),null;case 1:case 17:return Ur(t.type)&&jr(),el(t),null;case 3:return o=t.stateNode,ss(),Or(Fr),Or(Nr),hs(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(bo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==po&&(pc(po),po=null))),Ua(e,t),el(t),null;case 5:ls(t);var s=rs(is.current);if(i=t.type,null!==e&&null!=t.stateNode)ja(e,t,i,o,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(n(166));return el(t),null}if(e=rs(ts.current),bo(t)){o=t.stateNode,i=t.type;var a=t.memoizedProps;switch(o[br]=t,o[xr]=a,e=!!(1&t.mode),i){case"dialog":qi("cancel",o),qi("close",o);break;case"iframe":case"object":case"embed":qi("load",o);break;case"video":case"audio":for(s=0;s<Hi.length;s++)qi(Hi[s],o);break;case"source":qi("error",o);break;case"img":case"image":case"link":qi("error",o),qi("load",o);break;case"details":qi("toggle",o);break;case"input":ee(o,a),qi("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},qi("invalid",o);break;case"textarea":le(o,a),qi("invalid",o)}for(var l in we(i,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?o.textContent!==c&&(!0!==a.suppressHydrationWarning&&sr(o.textContent,c,e),s=["children",c]):"number"==typeof c&&o.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&sr(o.textContent,c,e),s=["children",""+c]):r.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&qi("scroll",o)}switch(i){case"input":K(o),ie(o,a,!0);break;case"textarea":K(o),ue(o);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(o.onclick=ar)}o=s,t.updateQueue=o,null!==o&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=de(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof o.is?e=l.createElement(i,{is:o.is}):(e=l.createElement(i),"select"===i&&(l=e,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):e=l.createElementNS(e,i),e[br]=t,e[xr]=o,za(e,t,!1,!1),t.stateNode=e;e:{switch(l=Se(i,o),i){case"dialog":qi("cancel",e),qi("close",e),s=o;break;case"iframe":case"object":case"embed":qi("load",e),s=o;break;case"video":case"audio":for(s=0;s<Hi.length;s++)qi(Hi[s],e);s=o;break;case"source":qi("error",e),s=o;break;case"img":case"image":case"link":qi("error",e),qi("load",e),s=o;break;case"details":qi("toggle",e),s=o;break;case"input":ee(e,o),s=J(e,o),qi("invalid",e);break;case"option":default:s=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},s=j({},o,{value:void 0}),qi("invalid",e);break;case"textarea":le(e,o),s=ae(e,o),qi("invalid",e)}for(a in we(i,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?be(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&me(e,u):"children"===a?"string"==typeof u?("textarea"!==i||""!==u)&&ge(e,u):"number"==typeof u&&ge(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(r.hasOwnProperty(a)?null!=u&&"onScroll"===a&&qi("scroll",e):null!=u&&g(e,a,u,l))}switch(i){case"input":K(e),ie(e,o,!1);break;case"textarea":K(e),ue(e);break;case"option":null!=o.value&&e.setAttribute("value",""+Y(o.value));break;case"select":e.multiple=!!o.multiple,null!=(a=o.value)?se(e,!!o.multiple,a,!1):null!=o.defaultValue&&se(e,!!o.multiple,o.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=ar)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return el(t),null;case 6:if(e&&null!=t.stateNode)Va(e,t,e.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw Error(n(166));if(i=rs(is.current),rs(ts.current),bo(t)){if(o=t.stateNode,i=t.memoizedProps,o[br]=t,(a=o.nodeValue!==i)&&null!==(e=uo))switch(e.tag){case 3:sr(o.nodeValue,i,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&sr(o.nodeValue,i,!!(1&e.mode))}a&&(t.flags|=4)}else(o=(9===i.nodeType?i:i.ownerDocument).createTextNode(o))[br]=t,t.stateNode=o}return el(t),null;case 13:if(Or(cs),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(fo&&null!==ho&&1&t.mode&&!(128&t.flags))xo(),wo(),t.flags|=98560,a=!1;else if(a=bo(t),null!==o&&null!==o.dehydrated){if(null===e){if(!a)throw Error(n(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(n(317));a[br]=t}else wo(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;el(t),a=!1}else null!==po&&(pc(po),po=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=i,t):((o=null!==o)!=(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,1&t.mode&&(null===e||1&cs.current?0===Vl&&(Vl=3):Sc())),null!==t.updateQueue&&(t.flags|=4),el(t),null);case 4:return ss(),Ua(e,t),null===e&&Ki(t.stateNode.containerInfo),el(t),null;case 10:return No(t.type._context),el(t),null;case 19:if(Or(cs),null===(a=t.memoizedState))return el(t),null;if(o=!!(128&t.flags),null===(l=a.rendering))if(o)Ja(a,!1);else{if(0!==Vl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=us(e))){for(t.flags|=128,Ja(a,!1),null!==(o=l.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=i,i=t.child;null!==i;)e=o,(a=i).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Mr(cs,1&cs.current|2),t.child}e=e.sibling}null!==a.tail&&nt()>Kl&&(t.flags|=128,o=!0,Ja(a,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=us(l))){if(t.flags|=128,o=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Ja(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!fo)return el(t),null}else 2*nt()-a.renderingStartTime>Kl&&1073741824!==i&&(t.flags|=128,o=!0,Ja(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=a.last)?i.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=nt(),t.sibling=null,i=cs.current,Mr(cs,o?1&i|2:1&i),t):(el(t),null);case 22:case 23:return vc(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&1&t.mode?!!(1073741824&Ul)&&(el(t),6&t.subtreeFlags&&(t.flags|=8192)):el(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function nl(e,t){switch(co(t),t.tag){case 1:return Ur(t.type)&&jr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ss(),Or(Fr),Or(Nr),hs(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ls(t),null;case 13:if(Or(cs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));wo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Or(cs),null;case 4:return ss(),null;case 10:return No(t.type._context),null;case 22:case 23:return vc(),null;default:return null}}za=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ua=function(){},ja=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,rs(ts.current);var s,a=null;switch(n){case"input":o=J(e,o),i=J(e,i),a=[];break;case"select":o=j({},o,{value:void 0}),i=j({},i,{value:void 0}),a=[];break;case"textarea":o=ae(e,o),i=ae(e,i),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(e.onclick=ar)}for(u in we(n,i),n=null,o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(r.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=o?o[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(r.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&qi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Va=function(e,t,n,i){n!==i&&(t.flags|=4)};var il=!1,rl=!1,ol="function"==typeof WeakSet?WeakSet:Set,sl=null;function al(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(i){Rc(e,t,i)}else n.current=null}function ll(e,t,n){try{n()}catch(i){Rc(e,t,i)}}var cl=!1;function ul(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&ll(t,n,o)}r=r.next}while(r!==i)}}function dl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function hl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function fl(e){var t=e.alternate;null!==t&&(e.alternate=null,fl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[br],delete t[xr],delete t[Sr],delete t[Er],delete t[Cr]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pl(e){return 5===e.tag||3===e.tag||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ar));else if(4!==i&&null!==(e=e.child))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function _l(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(_l(e,t,n),e=e.sibling;null!==e;)_l(e,t,n),e=e.sibling}var yl=null,vl=!1;function bl(e,t,n){for(n=n.child;null!==n;)xl(e,t,n),n=n.sibling}function xl(e,t,n){if(ut&&"function"==typeof ut.onCommitFiberUnmount)try{ut.onCommitFiberUnmount(ct,n)}catch(a){}switch(n.tag){case 5:rl||al(n,t);case 6:var i=yl,r=vl;yl=null,bl(e,t,n),vl=r,null!==(yl=i)&&(vl?(e=yl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):yl.removeChild(n.stateNode));break;case 18:null!==yl&&(vl?(e=yl,n=n.stateNode,8===e.nodeType?gr(e.parentNode,n):1===e.nodeType&&gr(e,n),Yt(e)):gr(yl,n.stateNode));break;case 4:i=yl,r=vl,yl=n.stateNode.containerInfo,vl=!0,bl(e,t,n),yl=i,vl=r;break;case 0:case 11:case 14:case 15:if(!rl&&null!==(i=n.updateQueue)&&null!==(i=i.lastEffect)){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(2&o||4&o)&&ll(n,t,s),r=r.next}while(r!==i)}bl(e,t,n);break;case 1:if(!rl&&(al(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Rc(n,t,a)}bl(e,t,n);break;case 21:bl(e,t,n);break;case 22:1&n.mode?(rl=(i=rl)||null!==n.memoizedState,bl(e,t,n),rl=i):bl(e,t,n);break;default:bl(e,t,n)}}function wl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ol),t.forEach(function(t){var i=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function Sl(e,t){var i=t.deletions;if(null!==i)for(var r=0;r<i.length;r++){var o=i[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:yl=l.stateNode,vl=!1;break e;case 3:case 4:yl=l.stateNode.containerInfo,vl=!0;break e}l=l.return}if(null===yl)throw Error(n(160));xl(s,a,o),yl=null,vl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(Xo){Rc(o,t,Xo)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sl(t,e),Cl(e),4&r){try{ul(3,e,e.return),dl(3,e)}catch(Cn){Rc(e,e.return,Cn)}try{ul(5,e,e.return)}catch(Cn){Rc(e,e.return,Cn)}}break;case 1:Sl(t,e),Cl(e),512&r&&null!==i&&al(i,i.return);break;case 5:if(Sl(t,e),Cl(e),512&r&&null!==i&&al(i,i.return),32&e.flags){var o=e.stateNode;try{ge(o,"")}catch(Cn){Rc(e,e.return,Cn)}}if(4&r&&null!=(o=e.stateNode)){var s=e.memoizedProps,a=null!==i?i.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&te(o,s),Se(l,a);var u=Se(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?be(o,h):"dangerouslySetInnerHTML"===d?me(o,h):"children"===d?ge(o,h):g(o,d,h,u)}switch(l){case"input":ne(o,s);break;case"textarea":ce(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?se(o,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?se(o,!!s.multiple,s.defaultValue,!0):se(o,!!s.multiple,s.multiple?[]:"",!1))}o[xr]=s}catch(Cn){Rc(e,e.return,Cn)}}break;case 6:if(Sl(t,e),Cl(e),4&r){if(null===e.stateNode)throw Error(n(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(Cn){Rc(e,e.return,Cn)}}break;case 3:if(Sl(t,e),Cl(e),4&r&&null!==i&&i.memoizedState.isDehydrated)try{Yt(t.containerInfo)}catch(Cn){Rc(e,e.return,Cn)}break;case 4:default:Sl(t,e),Cl(e);break;case 13:Sl(t,e),Cl(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(Xl=nt())),4&r&&wl(e);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&e.mode?(rl=(u=rl)||d,Sl(t,e),rl=u):Sl(t,e),Cl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(sl=e,d=e.child;null!==d;){for(h=sl=d;null!==sl;){switch(p=(f=sl).child,f.tag){case 0:case 11:case 14:case 15:ul(4,f,f.return);break;case 1:al(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,i=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Cn){Rc(r,i,Cn)}}break;case 5:al(f,f.return);break;case 22:if(null!==f.memoizedState){Il(h);continue}}null!==p?(p.return=f,sl=p):Il(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"==typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ve("display",a))}catch(Cn){Rc(e,e.return,Cn)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(Cn){Rc(e,e.return,Cn)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sl(t,e),Cl(e),4&r&&wl(e);case 21:}}function Cl(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(pl(i)){var r=i;break e}i=i.return}throw Error(n(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(ge(o,""),r.flags&=-33),_l(e,ml(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;gl(e,ml(e),s);break;default:throw Error(n(161))}}catch(a){Rc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Tl(e,t,n){sl=e,kl(e)}function kl(e,t,n){for(var i=!!(1&e.mode);null!==sl;){var r=sl,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||il;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||rl;a=il;var c=rl;if(il=s,(rl=l)&&!c)for(sl=r;null!==sl;)l=(s=sl).child,22===s.tag&&null!==s.memoizedState?Pl(r):null!==l?(l.return=s,sl=l):Pl(r);for(;null!==o;)sl=o,kl(o),o=o.sibling;sl=r,il=a,rl=c}Al(e)}else 8772&r.subtreeFlags&&null!==o?(o.return=r,sl=o):Al(e)}}function Al(e){for(;null!==sl;){var t=sl;if(8772&t.flags){var i=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:rl||dl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!rl)if(null===i)r.componentDidMount();else{var o=t.elementType===t.type?i.memoizedProps:da(t.type,i.memoizedProps);r.componentDidUpdate(o,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Jo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Jo(t,a,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Yt(h)}}}break;default:throw Error(n(163))}rl||512&t.flags&&hl(t)}catch(Dt){Rc(t,t.return,Dt)}}if(t===e){sl=null;break}if(null!==(i=t.sibling)){i.return=t.return,sl=i;break}sl=t.return}}function Il(e){for(;null!==sl;){var t=sl;if(t===e){sl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,sl=n;break}sl=t.return}}function Pl(e){for(;null!==sl;){var t=sl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dl(4,t)}catch(l){Rc(t,n,l)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Rc(t,r,l)}}var o=t.return;try{hl(t)}catch(l){Rc(t,o,l)}break;case 5:var s=t.return;try{hl(t)}catch(l){Rc(t,s,l)}}}catch(l){Rc(t,t.return,l)}if(t===e){sl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,sl=a;break}sl=t.return}}var Ll,Rl=Math.ceil,Ol=_.ReactCurrentDispatcher,Ml=_.ReactCurrentOwner,Dl=_.ReactCurrentBatchConfig,Nl=0,Fl=null,Bl=null,zl=0,Ul=0,jl=Rr(0),Vl=0,Hl=null,Wl=0,$l=0,Gl=0,ql=null,Yl=null,Xl=0,Kl=1/0,Zl=null,Ql=!1,Jl=null,ec=null,tc=!1,nc=null,ic=0,rc=0,oc=null,sc=-1,ac=0;function lc(){return 6&Nl?nt():-1!==sc?sc:sc=nt()}function cc(e){return 1&e.mode?2&Nl&&0!==zl?zl&-zl:null!==Eo.transition?(0===ac&&(ac=bt()),ac):0!==(e=Et)?e:e=void 0===(e=window.event)?16:nn(e.type):1}function uc(e,t,i,r){if(50<rc)throw rc=0,oc=null,Error(n(185));wt(e,i,r),2&Nl&&e===Fl||(e===Fl&&(!(2&Nl)&&($l|=i),4===Vl&&mc(e,zl)),dc(e,r),1===i&&0===Nl&&!(1&t.mode)&&(Kl=nt()+500,qr&&Kr()))}function dc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-dt(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=yt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=_t(e,e===Fl?zl:0);if(0===i)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){qr=!0,Xr(e)}(gc.bind(null,e)):Xr(gc.bind(null,e)),pr(function(){!(6&Nl)&&Kr()}),n=null;else{switch(Ct(i)){case 1:n=rt;break;case 4:n=ot;break;case 16:default:n=st;break;case 536870912:n=lt}n=Fc(n,hc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hc(e,t){if(sc=-1,ac=0,6&Nl)throw Error(n(327));var i=e.callbackNode;if(Pc()&&e.callbackNode!==i)return null;var r=_t(e,e===Fl?zl:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=Ec(e,r);else{t=r;var o=Nl;Nl|=2;var s=wc();for(Fl===e&&zl===t||(Zl=null,Kl=nt()+500,bc(e,t));;)try{Tc();break}catch(l){xc(e,l)}Do(),Ol.current=s,Nl=o,null!==Bl?t=0:(Fl=null,zl=0,t=Vl)}if(0!==t){if(2===t&&0!==(o=vt(e))&&(r=o,t=fc(e,o)),1===t)throw i=Hl,bc(e,0),mc(e,r),dc(e,nt()),i;if(6===t)mc(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!mi(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=Ec(e,r),2===t&&(s=vt(e),0!==s&&(r=s,t=fc(e,s))),1!==t)))throw i=Hl,bc(e,0),mc(e,r),dc(e,nt()),i;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(n(345));case 2:case 5:Ic(e,Yl,Zl);break;case 3:if(mc(e,r),(130023424&r)===r&&10<(t=Xl+500-nt())){if(0!==_t(e,0))break;if(((o=e.suspendedLanes)&r)!==r){lc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=dr(Ic.bind(null,e,Yl,Zl),t);break}Ic(e,Yl,Zl);break;case 4:if(mc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-dt(r);s=1<<a,(a=t[a])>o&&(o=a),r&=~s}if(r=o,10<(r=(120>(r=nt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rl(r/1960))-r)){e.timeoutHandle=dr(Ic.bind(null,e,Yl,Zl),r);break}Ic(e,Yl,Zl);break;default:throw Error(n(329))}}}return dc(e,nt()),e.callbackNode===i?hc.bind(null,e):null}function fc(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(bc(e,t).flags|=256),2!==(e=Ec(e,t))&&(t=Yl,Yl=n,null!==t&&pc(t)),e}function pc(e){null===Yl?Yl=e:Yl.push.apply(Yl,e)}function mc(e,t){for(t&=~Gl,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dt(t),i=1<<n;e[n]=-1,t&=~i}}function gc(e){if(6&Nl)throw Error(n(327));Pc();var t=_t(e,0);if(!(1&t))return dc(e,nt()),null;var i=Ec(e,t);if(0!==e.tag&&2===i){var r=vt(e);0!==r&&(t=r,i=fc(e,r))}if(1===i)throw i=Hl,bc(e,0),mc(e,t),dc(e,nt()),i;if(6===i)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,Yl,Zl),dc(e,nt()),null}function _c(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Kl=nt()+500,qr&&Kr())}}function yc(e){null!==nc&&0===nc.tag&&!(6&Nl)&&Pc();var t=Nl;Nl|=1;var n=Dl.transition,i=Et;try{if(Dl.transition=null,Et=1,e)return e()}finally{Et=i,Dl.transition=n,!(6&(Nl=t))&&Kr()}}function vc(){Ul=jl.current,Or(jl)}function bc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,hr(n)),null!==Bl)for(n=Bl.return;null!==n;){var i=n;switch(co(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&jr();break;case 3:ss(),Or(Fr),Or(Nr),hs();break;case 5:ls(i);break;case 4:ss();break;case 13:case 19:Or(cs);break;case 10:No(i.type._context);break;case 22:case 23:vc()}n=n.return}if(Fl=e,Bl=e=jc(e.current,null),zl=Ul=t,Vl=0,Hl=null,Gl=$l=Wl=0,Yl=ql=null,null!==Uo){for(t=0;t<Uo.length;t++)if(null!==(i=(n=Uo[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Uo=null}return e}function xc(e,t){for(;;){var i=Bl;try{if(Do(),fs.current=aa,vs){for(var r=gs.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}vs=!1}if(ms=0,ys=_s=gs=null,bs=!1,xs=0,Ml.current=null,null===i||null===i.return){Vl=1,Hl=t,Bl=null;break}e:{var s=e,a=i.return,l=i,c=t;if(t=zl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ea(a);if(null!==p){p.flags&=-257,Ca(p,a,l,0,t),1&p.mode&&Sa(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){Sa(s,u,t),Sc();break e}c=Error(n(426))}else if(fo&&1&l.mode){var _=Ea(a);if(null!==_){!(65536&_.flags)&&(_.flags|=256),Ca(_,a,l,0,t),So(ya(c,l));break e}}s=c=ya(c,l),4!==Vl&&(Vl=2),null===ql?ql=[s]:ql.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Zo(s,xa(0,c,t));break e;case 1:l=c;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==ec&&ec.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Zo(s,wa(s,l,t));break e}}s=s.return}while(null!==s)}Ac(i)}catch(b){t=b,Bl===i&&null!==i&&(Bl=i=i.return);continue}break}}function wc(){var e=Ol.current;return Ol.current=aa,null===e?aa:e}function Sc(){0!==Vl&&3!==Vl&&2!==Vl||(Vl=4),null===Fl||!(268435455&Wl)&&!(268435455&$l)||mc(Fl,zl)}function Ec(e,t){var i=Nl;Nl|=2;var r=wc();for(Fl===e&&zl===t||(Zl=null,bc(e,t));;)try{Cc();break}catch(qe){xc(e,qe)}if(Do(),Nl=i,Ol.current=r,null!==Bl)throw Error(n(261));return Fl=null,zl=0,Vl}function Cc(){for(;null!==Bl;)kc(Bl)}function Tc(){for(;null!==Bl&&!et();)kc(Bl)}function kc(e){var t=Ll(e.alternate,e,Ul);e.memoizedProps=e.pendingProps,null===t?Ac(e):Bl=t,Ml.current=null}function Ac(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=nl(n,t)))return n.flags&=32767,void(Bl=n);if(null===e)return Vl=6,void(Bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=tl(n,t,Ul)))return void(Bl=n);if(null!==(t=t.sibling))return void(Bl=t);Bl=t=e}while(null!==t);0===Vl&&(Vl=5)}function Ic(e,t,i){var r=Et,o=Dl.transition;try{Dl.transition=null,Et=1,function(e,t,i,r){do{Pc()}while(null!==nc);if(6&Nl)throw Error(n(327));i=e.finishedWork;var o=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-dt(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Fl&&(Bl=Fl=null,zl=0),!(2064&i.subtreeFlags)&&!(2064&i.flags)||tc||(tc=!0,Fc(st,function(){return Pc(),null})),s=!!(15990&i.flags),15990&i.subtreeFlags||s){s=Dl.transition,Dl.transition=null;var a=Et;Et=1;var l=Nl;Nl|=4,Ml.current=null,function(e,t){if(lr=Kt,xi(e=bi())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch(x){i=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==i||0!==o&&3!==h.nodeType||(l=a+o),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===i&&++u===o&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(cr={focusedElem:e,selectionRange:i},Kt=!1,sl=t;null!==sl;)if(e=(t=sl).child,1028&t.subtreeFlags&&null!==e)e.return=t,sl=e;else for(;null!==sl;){t=sl;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,_=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:da(t.type,g),_);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(n(163))}}catch(x){Rc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,sl=e;break}sl=t.return}m=cl,cl=!1}(e,i),El(i,e),wi(cr),Kt=!!lr,cr=lr=null,e.current=i,Tl(i),tt(),Nl=l,Et=a,Dl.transition=s}else e.current=i;if(tc&&(tc=!1,nc=e,ic=o),0===(s=e.pendingLanes)&&(ec=null),function(e){if(ut&&"function"==typeof ut.onCommitFiberRoot)try{ut.onCommitFiberRoot(ct,e,void 0,!(128&~e.current.flags))}catch(t){}}(i.stateNode),dc(e,nt()),null!==t)for(r=e.onRecoverableError,i=0;i<t.length;i++)r((o=t[i]).value,{componentStack:o.stack,digest:o.digest});if(Ql)throw Ql=!1,e=Jl,Jl=null,e;!!(1&ic)&&0!==e.tag&&Pc(),1&(s=e.pendingLanes)?e===oc?rc++:(rc=0,oc=e):rc=0,Kr()}(e,t,i,r)}finally{Dl.transition=o,Et=r}return null}function Pc(){if(null!==nc){var e=Ct(ic),t=Dl.transition,i=Et;try{if(Dl.transition=null,Et=16>e?16:e,null===nc)var r=!1;else{if(e=nc,nc=null,ic=0,6&Nl)throw Error(n(331));var o=Nl;for(Nl|=4,sl=e.current;null!==sl;){var s=sl,a=s.child;if(16&sl.flags){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(sl=u;null!==sl;){var d=sl;switch(d.tag){case 0:case 11:case 15:ul(8,d,s)}var h=d.child;if(null!==h)h.return=d,sl=h;else for(;null!==sl;){var f=(d=sl).sibling,p=d.return;if(fl(d),d===u){sl=null;break}if(null!==f){f.return=p,sl=f;break}sl=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(null!==g)}}sl=s}}if(2064&s.subtreeFlags&&null!==a)a.return=s,sl=a;else e:for(;null!==sl;){if(2048&(s=sl).flags)switch(s.tag){case 0:case 11:case 15:ul(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,sl=y;break e}sl=s.return}}var v=e.current;for(sl=v;null!==sl;){var b=(a=sl).child;if(2064&a.subtreeFlags&&null!==b)b.return=a,sl=b;else e:for(a=v;null!==sl;){if(2048&(l=sl).flags)try{switch(l.tag){case 0:case 11:case 15:dl(9,l)}}catch(w){Rc(l,l.return,w)}if(l===a){sl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,sl=x;break e}sl=l.return}}if(Nl=o,Kr(),ut&&"function"==typeof ut.onPostCommitFiberRoot)try{ut.onPostCommitFiberRoot(ct,e)}catch(w){}r=!0}return r}finally{Et=i,Dl.transition=t}}return!1}function Lc(e,t,n){e=Yo(e,t=xa(0,t=ya(n,t),1),1),t=lc(),null!==e&&(wt(e,1,t),dc(e,t))}function Rc(e,t,n){if(3===e.tag)Lc(e,e,n);else for(;null!==t;){if(3===t.tag){Lc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===ec||!ec.has(i))){t=Yo(t,e=wa(t,e=ya(n,e),1),1),e=lc(),null!==t&&(wt(t,1,e),dc(t,e));break}}t=t.return}}function Oc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=lc(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(zl&n)===n&&(4===Vl||3===Vl&&(130023424&zl)===zl&&500>nt()-Xl?bc(e,0):Gl|=n),dc(e,t)}function Mc(e,t){0===t&&(1&e.mode?(t=mt,!(130023424&(mt<<=1))&&(mt=4194304)):t=1);var n=lc();null!==(e=Ho(e,t))&&(wt(e,t,n),dc(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Nc(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(i=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(n(314))}null!==r&&r.delete(t),Mc(e,i)}function Fc(e,t){return Qe(e,t)}function Bc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zc(e,t,n,i){return new Bc(e,t,n,i)}function Uc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=zc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vc(e,t,i,r,o,s){var a=2;if(r=e,"function"==typeof e)Uc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case x:return Hc(i.children,o,s,t);case w:a=8,o|=8;break;case S:return(e=zc(12,i,t,2|o)).elementType=S,e.lanes=s,e;case P:return(e=zc(13,i,t,o)).elementType=P,e.lanes=s,e;case M:return(e=zc(19,i,t,o)).elementType=M,e.lanes=s,e;case F:return Wc(i,o,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case A:a=9;break e;case I:a=11;break e;case D:a=14;break e;case N:a=16,r=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=zc(a,i,t,o)).elementType=e,t.type=r,t.lanes=s,t}function Hc(e,t,n,i){return(e=zc(7,e,i,t)).lanes=n,e}function Wc(e,t,n,i){return(e=zc(22,e,i,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function $c(e,t,n){return(e=zc(6,e,null,t)).lanes=n,e}function Gc(e,t,n){return(t=zc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Yc(e,t,n,i,r,o,s,a,l){return e=new qc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=zc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$o(o),e}function Xc(e){if(!e)return Dr;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var i=e.type;if(Ur(i))return Hr(e,i,t)}return t}function Kc(e,t,n,i,r,o,s,a,l){return(e=Yc(n,i,!0,e,0,o,0,a,l)).context=Xc(null),n=e.current,(o=qo(i=lc(),r=cc(n))).callback=null!=t?t:null,Yo(n,o,r),e.current.lanes=r,wt(e,r,i),dc(e,i),e}function Zc(e,t,n,i){var r=t.current,o=lc(),s=cc(r);return n=Xc(n),null===t.context?t.context=n:t.pendingContext=n,(t=qo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Yo(r,t,s))&&(uc(e,r,s,o),Ko(e,r,s)),s}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Jc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}Ll=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fr.current)ka=!0;else{if(0===(e.lanes&i)&&!(128&t.flags))return ka=!1,function(e,t,n){switch(t.tag){case 3:Fa(t),wo();break;case 5:as(t);break;case 1:Ur(t.type)&&Wr(t);break;case 4:os(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Mr(Lo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Mr(cs,1&cs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?$a(e,t,n):(Mr(cs,1&cs.current),null!==(e=Qa(e,t,n))?e.sibling:null);Mr(cs,1&cs.current);break;case 19:if(i=0!==(n&t.childLanes),128&e.flags){if(i)return Ka(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Mr(cs,cs.current),i)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n)}return Qa(e,t,n)}(e,t,i);ka=!!(131072&e.flags)}else ka=!1,fo&&1048576&t.flags&&ao(t,eo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Za(e,t),e=t.pendingProps;var o=zr(t,Nr.current);Bo(t,i),o=Cs(null,t,r,e,o,i);var s=Ts();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ur(r)?(s=!0,Wr(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,$o(t),o.updater=fa,t.stateNode=o,o._reactInternals=t,_a(t,r,e,i),t=Na(null,t,r,!0,s,i)):(t.tag=0,fo&&s&&lo(t),Aa(null,t,o,i),t=t.child),t;case 16:r=t.elementType;e:{switch(Za(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Uc(e)?1:0;if(null!=e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=da(r,e),o){case 0:t=Ma(null,t,r,e,i);break e;case 1:t=Da(null,t,r,e,i);break e;case 11:t=Ia(null,t,r,e,i);break e;case 14:t=Pa(null,t,r,da(r.type,e),i);break e}throw Error(n(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ma(e,t,r,o=t.elementType===r?o:da(r,o),i);case 1:return r=t.type,o=t.pendingProps,Da(e,t,r,o=t.elementType===r?o:da(r,o),i);case 3:e:{if(Fa(t),null===e)throw Error(n(387));r=t.pendingProps,o=(s=t.memoizedState).element,Go(e,t),Qo(t,r,null,i);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ba(e,t,r,i,o=ya(Error(n(423)),t));break e}if(r!==o){t=Ba(e,t,r,i,o=ya(Error(n(424)),t));break e}for(ho=_r(t.stateNode.containerInfo.firstChild),uo=t,fo=!0,po=null,i=Po(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(wo(),r===o){t=Qa(e,t,i);break e}Aa(e,t,r,i)}t=t.child}return t;case 5:return as(t),null===e&&yo(t),r=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,a=o.children,ur(r,o)?a=null:null!==s&&ur(r,s)&&(t.flags|=32),Oa(e,t),Aa(e,t,a,i),t.child;case 6:return null===e&&yo(t),null;case 13:return $a(e,t,i);case 4:return os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Io(t,null,r,i):Aa(e,t,r,i),t.child;case 11:return r=t.type,o=t.pendingProps,Ia(e,t,r,o=t.elementType===r?o:da(r,o),i);case 7:return Aa(e,t,t.pendingProps,i),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Mr(Lo,r._currentValue),r._currentValue=a,null!==s)if(mi(s.value,a)){if(s.children===o.children&&!Fr.current){t=Qa(e,t,i);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=qo(-1,i&-i)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=i,null!==(c=s.alternate)&&(c.lanes|=i),Fo(s.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(n(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Fo(a,i,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Aa(e,t,o.children,i),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Bo(t,i),r=r(o=zo(o)),t.flags|=1,Aa(e,t,r,i),t.child;case 14:return o=da(r=t.type,t.pendingProps),Pa(e,t,r,o=da(r.type,o),i);case 15:return La(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:da(r,o),Za(e,t),t.tag=1,Ur(r)?(e=!0,Wr(t)):e=!1,Bo(t,i),ma(t,r,o),_a(t,r,o,i),Na(null,t,r,!0,e,i);case 19:return Ka(e,t,i);case 22:return Ra(e,t,i)}throw Error(n(156,t.tag))};var tu="function"==typeof reportError?reportError:function(e){};function nu(e){this._internalRoot=e}function iu(e){this._internalRoot=e}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ou(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(){}function au(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"==typeof r){var a=r;r=function(){var e=Qc(s);a.call(e)}}Zc(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"==typeof i){var o=i;i=function(){var e=Qc(s);o.call(e)}}var s=Kc(t,i,e,0,null,!1,0,"",su);return e._reactRootContainer=s,e[wr]=s.current,Ki(8===e.nodeType?e.parentNode:e),yc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof i){var a=i;i=function(){var e=Qc(l);a.call(e)}}var l=Yc(e,0,!1,null,0,!1,0,"",su);return e._reactRootContainer=l,e[wr]=l.current,Ki(8===e.nodeType?e.parentNode:e),yc(function(){Zc(t,l,n,i)}),l}(n,t,e,r,i);return Qc(s)}iu.prototype.render=nu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Zc(e,t,null,null)},iu.prototype.unmount=nu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yc(function(){Zc(null,e,null,null)}),t[wr]=null}},iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&0!==t&&t<zt[n].priority;n++);zt.splice(n,0,e),0===n&&Ht(e)}},Tt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gt(t.pendingLanes);0!==n&&(St(t,1|n),dc(t,nt()),!(6&Nl)&&(Kl=nt()+500,Kr()))}break;case 13:yc(function(){var t=Ho(e,1);if(null!==t){var n=lc();uc(t,e,1,n)}}),eu(e,1)}},kt=function(e){if(13===e.tag){var t=Ho(e,134217728);null!==t&&uc(t,e,134217728,lc()),eu(e,134217728)}},At=function(e){if(13===e.tag){var t=cc(e),n=Ho(e,t);null!==n&&uc(n,e,t,lc()),eu(e,t)}},It=function(){return Et},Pt=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}},Te=function(e,t,i){switch(t){case"input":if(ne(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var o=Ir(r);if(!o)throw Error(n(90));Z(r),ne(r,o)}}}break;case"textarea":ce(e,i);break;case"select":null!=(t=i.value)&&se(e,!!i.multiple,t,!1)}},Re=_c,Oe=yc;var lu={usingClientEntryPoint:!1,Events:[kr,Ar,Ir,Pe,Le,_c]},cu={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uu={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{ct=du.inject(uu),ut=du}catch(pe){}}return L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,L.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(n(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,i)},L.createRoot=function(e,t){if(!ru(e))throw Error(n(299));var i=!1,r="",o=tu;return null!=t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Yc(e,1,!1,null,0,i,0,r,o),e[wr]=t.current,Ki(8===e.nodeType?e.parentNode:e),new nu(t)},L.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return null===(e=Ke(t))?null:e.stateNode},L.flushSync=function(e){return yc(e)},L.hydrate=function(e,t,i){if(!ou(t))throw Error(n(200));return au(null,e,t,!0,i)},L.hydrateRoot=function(e,t,i){if(!ru(e))throw Error(n(405));var r=null!=i&&i.hydratedSources||null,o=!1,s="",a=tu;if(null!=i&&(!0===i.unstable_strictMode&&(o=!0),void 0!==i.identifierPrefix&&(s=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=Kc(t,null,e,1,null!=i?i:null,o,0,s,a),e[wr]=t.current,Ki(e),r)for(e=0;e<r.length;e++)o=(o=(i=r[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,o]:t.mutableSourceEagerHydrationData.push(i,o);return new iu(t)},L.render=function(e,t,i){if(!ou(t))throw Error(n(200));return au(null,e,t,!1,i)},L.unmountComponentAtNode=function(e){if(!ou(e))throw Error(n(40));return!!e._reactRootContainer&&(yc(function(){au(null,null,e,!1,function(){e._reactRootContainer=null,e[wr]=null})}),!0)},L.unstable_batchedUpdates=_c,L.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!ou(i))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return au(e,t,i,!1,r)},L.version="18.3.1-next-f1338f8080-20240426",L}function D(){return k||(k=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),P.exports=M()),P.exports}var N=function(){if(A)return I;A=1;var e=D();return I.createRoot=e.createRoot,I.hydrateRoot=e.hydrateRoot,I}(),F=D();const B="undefined"!=typeof document?w.useLayoutEffect:()=>{},z=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},U=e=>e&&"window"in e&&e.window===e?e:z(e).defaultView||window;function j(e,t){return!(!t||!e)&&e.contains(t)}const V=(e=document)=>e.activeElement;function H(e){return e.target}function W(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=W(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function $(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=W(e))&&(i&&(i+=" "),i+=t);return i}let G=null;function q(e){var t;if("undefined"==typeof window||null==window.navigator)return!1;let n=null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands;return Array.isArray(n)&&n.some(t=>e.test(t.brand))||e.test(window.navigator.userAgent)}function Y(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function X(e){let t=null;return()=>(null==t&&(t=e()),t)}const K=X(function(){return Y(/^Mac/i)}),Z=X(function(){return Y(/^iPad/i)||K()&&navigator.maxTouchPoints>1}),Q=X(function(){return q(/AppleWebKit/i)&&!J()}),J=X(function(){return q(/Chrome/i)}),ee=X(function(){return q(/Android/i)}),te=X(function(){return q(/Firefox/i)});function ne(e,t,n=!0){var i,r;let{metaKey:o,ctrlKey:s,altKey:a,shiftKey:l}=t;te()&&(null===(r=window.event)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.startsWith("key"))&&"_blank"===e.target&&(K()?o=!0:s=!0);let c=Q()&&K()&&!Z()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:o,ctrlKey:s,altKey:a,shiftKey:l}):new MouseEvent("click",{metaKey:o,ctrlKey:s,altKey:a,shiftKey:l,detail:1,bubbles:!0,cancelable:!0});ne.isOpening=n,function(e){if(function(){if(null==G){G=!1;try{document.createElement("div").focus({get preventScroll(){return G=!0,!0}})}catch{}}return G}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],i=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==i;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return i instanceof HTMLElement&&n.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:i}of e)t.scrollTop=n,t.scrollLeft=i}(t)}}(e),e.dispatchEvent(c),ne.isOpening=!1}function ie(){let e=x.useRef(new Map),t=x.useCallback((t,n,i,r)=>{let o=(null==r?void 0:r.once)?(...t)=>{e.current.delete(i),i(...t)}:i;e.current.set(i,{type:n,eventTarget:t,fn:o,options:r}),t.addEventListener(n,o,r)},[]),n=x.useCallback((t,n,i,r)=>{var o;let s=(null===(o=e.current.get(i))||void 0===o?void 0:o.fn)||i;t.removeEventListener(n,s,r),e.current.delete(i)},[]),i=x.useCallback(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return x.useEffect(()=>i,[i]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:i}}function re(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function oe(e){let t=x.useRef({isFocused:!1,observer:null});return B(()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]),x.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=n.target,r=n=>{if(t.current.isFocused=!1,i.disabled){let t=re(n);null==e||e(t)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",r,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[e])}ne.isOpening=!1;let se=null,ae=new Set,le=new Map,ce=!1,ue=!1;const de={Tab:!0,Escape:!0};function he(e,t){for(let n of ae)n(e,t)}function fe(e){ce=!0,!ne.isOpening&&function(e){return!(e.metaKey||!K()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(se="keyboard",he("keyboard",e))}function pe(e){se="pointer",!("pointerType"in e)||e.pointerType,"mousedown"!==e.type&&"pointerdown"!==e.type||(ce=!0,he("pointer",e))}function me(e){var t;!ne.isOpening&&(""===(t=e).pointerType&&t.isTrusted||(ee()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(ce=!0,se="virtual")}function ge(e){e.target!==window&&e.target!==document&&e.isTrusted&&(ce||ue||(se="virtual",he("virtual",e)),ce=!1,ue=!1)}function _e(){ce=!1,ue=!0}function ye(e){if("undefined"==typeof window||"undefined"==typeof document||le.get(U(e)))return;const t=U(e),n=z(e);let i=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ce=!0,i.apply(this,arguments)},n.addEventListener("keydown",fe,!0),n.addEventListener("keyup",fe,!0),n.addEventListener("click",me,!0),t.addEventListener("focus",ge,!0),t.addEventListener("blur",_e,!1),"undefined"!=typeof PointerEvent&&(n.addEventListener("pointerdown",pe,!0),n.addEventListener("pointermove",pe,!0),n.addEventListener("pointerup",pe,!0)),t.addEventListener("beforeunload",()=>{ve(e)},{once:!0}),le.set(t,{focus:i})}const ve=(e,t)=>{const n=U(e),i=z(e);t&&i.removeEventListener("DOMContentLoaded",t),le.has(n)&&(n.HTMLElement.prototype.focus=le.get(n).focus,i.removeEventListener("keydown",fe,!0),i.removeEventListener("keyup",fe,!0),i.removeEventListener("click",me,!0),n.removeEventListener("focus",ge,!0),n.removeEventListener("blur",_e,!1),"undefined"!=typeof PointerEvent&&(i.removeEventListener("pointerdown",pe,!0),i.removeEventListener("pointermove",pe,!0),i.removeEventListener("pointerup",pe,!0)),le.delete(n))};function be(){return"pointer"!==se}"undefined"!=typeof document&&function(e){const t=z(e);let n;"loading"!==t.readyState?ye(e):(n=()=>{ye(e)},t.addEventListener("DOMContentLoaded",n))}();const xe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let we=!1,Se=0;function Ee(e){"touch"===e.pointerType&&(we=!0,setTimeout(()=>{we=!1},50))}function Ce(){if("undefined"!=typeof document)return 0===Se&&"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",Ee),Se++,()=>{Se--,Se>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",Ee)}}function Te(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:i,isDisabled:r}=e,[o,s]=x.useState(!1),a=x.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;x.useEffect(Ce,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=ie(),{hoverProps:u,triggerHoverEnd:d}=x.useMemo(()=>{let e=(e,t)=>{let r=a.target;a.pointerType="",a.target=null,"touch"!==t&&a.isHovered&&r&&(a.isHovered=!1,c(),i&&i({type:"hoverend",target:r,pointerType:t}),n&&n(!1),s(!1))},o={};return"undefined"!=typeof PointerEvent&&(o.onPointerEnter=i=>{we&&"mouse"===i.pointerType||((i,o)=>{if(a.pointerType=o,r||"touch"===o||a.isHovered||!i.currentTarget.contains(i.target))return;a.isHovered=!0;let c=i.currentTarget;a.target=c,l(z(i.target),"pointerover",t=>{a.isHovered&&a.target&&!j(a.target,t.target)&&e(0,t.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:c,pointerType:o}),n&&n(!0),s(!0)})(i,i.pointerType)},o.onPointerLeave=t=>{!r&&t.currentTarget.contains(t.target)&&e(0,t.pointerType)}),{hoverProps:o,triggerHoverEnd:e}},[t,n,i,r,a,l,c]);return x.useEffect(()=>{r&&d({currentTarget:a.target},a.pointerType)},[r]),{hoverProps:u,isHovered:o}}function ke(e={}){let{autoFocus:t=!1,isTextInput:n,within:i}=e,r=x.useRef({isFocused:!1,isFocusVisible:t||be()}),[o,s]=x.useState(!1),[a,l]=x.useState(()=>r.current.isFocused&&r.current.isFocusVisible),c=x.useCallback(()=>l(r.current.isFocused&&r.current.isFocusVisible),[]),u=x.useCallback(e=>{r.current.isFocused=e,s(e),c()},[c]);!function(e,t,n){ye(),x.useEffect(()=>{let t=(t,i)=>{(function(e,t,n){let i=z(null==n?void 0:n.target);const r="undefined"!=typeof window?U(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!=typeof window?U(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s="undefined"!=typeof window?U(null==n?void 0:n.target).HTMLElement:HTMLElement,a="undefined"!=typeof window?U(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||i.activeElement instanceof r&&!xe.has(i.activeElement.type)||i.activeElement instanceof o||i.activeElement instanceof s&&i.activeElement.isContentEditable)&&"keyboard"===t&&n instanceof a&&!de[n.key])})(!!(null==n?void 0:n.isTextInput),t,i)&&e(be())};return ae.add(t),()=>{ae.delete(t)}},t)}(e=>{r.current.isFocusVisible=e,c()},[],{isTextInput:n});let{focusProps:d}=function(e){let{isDisabled:t,onFocus:n,onBlur:i,onFocusChange:r}=e;const o=x.useCallback(e=>{if(e.target===e.currentTarget)return i&&i(e),r&&r(!1),!0},[i,r]),s=oe(o),a=x.useCallback(e=>{const t=z(e.target),i=t?V(t):V();e.target===e.currentTarget&&i===H(e.nativeEvent)&&(n&&n(e),r&&r(!0),s(e))},[r,n,s]);return{focusProps:{onFocus:!t&&(n||r||i)?a:void 0,onBlur:t||!i&&!r?void 0:o}}}({isDisabled:i,onFocusChange:u}),{focusWithinProps:h}=function(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:i,onFocusWithinChange:r}=e,o=x.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:a}=ie(),l=x.useCallback(e=>{e.currentTarget.contains(e.target)&&o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,a(),n&&n(e),r&&r(!1))},[n,r,o,a]),c=oe(l),u=x.useCallback(e=>{if(!e.currentTarget.contains(e.target))return;const t=z(e.target),n=V(t);if(!o.current.isFocusWithin&&n===H(e.nativeEvent)){i&&i(e),r&&r(!0),o.current.isFocusWithin=!0,c(e);let n=e.currentTarget;s(t,"focus",e=>{if(o.current.isFocusWithin&&!j(n,e.target)){let i=new t.defaultView.FocusEvent("blur",{relatedTarget:e.target});!function(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}(i,n);let r=re(i);l(r)}},{capture:!0})}},[i,r,c,s,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}({isDisabled:!i,onFocusWithinChange:u});return{isFocused:o,isFocusVisible:a,focusProps:i?h:d}}var Ae=Object.defineProperty,Ie=(e,t,n)=>(((e,t,n)=>{t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let Pe=new class{constructor(){Ie(this,"current",this.detect()),Ie(this,"handoffState","pending"),Ie(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function Le(e){var t;return Pe.isServer?null:null==e?document:null!=(t=null==e?void 0:e.ownerDocument)?t:document}function Re(e){var t,n;return Pe.isServer?null:null==e?document:null!=(n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))?n:document}function Oe(e){var t,n;return null!=(n=null==(t=Re(e))?void 0:t.activeElement)?n:null}function Me(e){return Oe(e)===e}function De(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function Ne(){let e=[],t={addEventListener:(e,n,i,r)=>(e.addEventListener(n,i,r),t.add(()=>e.removeEventListener(n,i,r))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return De(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,t,n){let i=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:i})})},group(e){let t=Ne();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function Fe(){let[e]=x.useState(Ne);return x.useEffect(()=>()=>e.dispose(),[e]),e}let Be=(e,t)=>{Pe.isServer?x.useEffect(e,t):x.useLayoutEffect(e,t)};function ze(e){let t=x.useRef(e);return Be(()=>{t.current=e},[e]),t}let Ue=function(e){let t=ze(e);return w.useCallback((...e)=>t.current(...e),[t])};function je({disabled:e=!1}={}){let t=x.useRef(null),[n,i]=x.useState(!1),r=Fe(),o=Ue(()=>{t.current=null,i(!1),r.dispose()}),s=Ue(e=>{if(r.dispose(),null===t.current){t.current=e.currentTarget,i(!0);{let n=Le(e.currentTarget);r.addEventListener(n,"pointerup",o,!1),r.addEventListener(n,"pointermove",e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);i(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}},!1),r.addEventListener(n,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:s,onPointerUp:o,onClick:o}}}function Ve(e){return x.useMemo(()=>e,Object.values(e))}let He=x.createContext(void 0);function We(){return x.useContext(He)}function $e(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function Ge(e,t,...n){if(e in t){let i=t[e];return"function"==typeof i?i(...n):i}let i=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Ge),i}var qe,Ye,Xe=((Ye=Xe||{})[Ye.None=0]="None",Ye[Ye.RenderStrategy=1]="RenderStrategy",Ye[Ye.Static=2]="Static",Ye),Ke=((qe=Ke||{})[qe.Unmount=0]="Unmount",qe[qe.Hidden=1]="Hidden",qe);function Ze(){let e=function(){let e=x.useRef([]),t=x.useCallback(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]);return(...n)=>{if(!n.every(e=>null==e))return e.current=n,t}}();return x.useCallback(t=>function({ourProps:e,theirProps:t,slot:n,defaultTag:i,features:r,visible:o=!0,name:s,mergeRefs:a}){a=null!=a?a:Je;let l=et(t,e);if(o)return Qe(l,n,i,s,a);let c=null!=r?r:0;if(2&c){let{static:e=!1,...t}=l;if(e)return Qe(t,n,i,s,a)}if(1&c){let{unmount:e=!0,...t}=l;return Ge(e?0:1,{0:()=>null,1:()=>Qe({...t,hidden:!0,style:{display:"none"}},n,i,s,a)})}return Qe(l,n,i,s,a)}({mergeRefs:e,...t}),[e])}function Qe(e,t={},n,i,r){let{as:o=n,children:s,refName:a="ref",...l}=rt(e,["unmount","static"]),c=void 0!==e.ref?{[a]:e.ref}:{},u="function"==typeof s?s(t):s;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(t){let e=!1,n=[];for(let[i,r]of Object.entries(t))"boolean"==typeof r&&(e=!0),!0===r&&n.push(i.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e){d["data-headlessui-state"]=n.join(" ");for(let e of n)d[`data-${e}`]=""}}if(st(o)&&(Object.keys(it(l)).length>0||Object.keys(it(d)).length>0)){if(!(!x.isValidElement(u)||Array.isArray(u)&&u.length>1||function(e){return st(e.type)}(u))){let e=u.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>$e(t(...e),l.className):$e(t,l.className),i=n?{className:n}:{},o=et(u.props,it(rt(l,["ref"])));for(let r in d)r in o&&delete d[r];return x.cloneElement(u,Object.assign({},o,d,c,{ref:r(ot(u),c.ref)},i))}if(Object.keys(it(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(it(l)).concat(Object.keys(it(d))).map(e=>`  - ${e}`).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join("\n")].join("\n"))}return x.createElement(o,Object.assign({},rt(l,["ref"]),!st(o)&&c,!st(o)&&d),u)}function Je(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function et(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let i of e)for(let e in i)e.startsWith("on")&&"function"==typeof i[e]?(null!=n[e]||(n[e]=[]),n[e].push(i[e])):t[e]=i[e];if(t.disabled||t["aria-disabled"])for(let i in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(n[i]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let i in n)Object.assign(t,{[i](e,...t){let r=n[i];for(let n of r){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;n(e,...t)}}});return t}function tt(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let i of e)for(let e in i)e.startsWith("on")&&"function"==typeof i[e]?(null!=n[e]||(n[e]=[]),n[e].push(i[e])):t[e]=i[e];for(let i in n)Object.assign(t,{[i](...e){let t=n[i];for(let n of t)null==n||n(...e)}});return t}function nt(e){var t;return Object.assign(x.forwardRef(e),{displayName:null!=(t=e.displayName)?t:e.name})}function it(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function rt(e,t=[]){let n=Object.assign({},e);for(let i of t)i in n&&delete n[i];return n}function ot(e){return w.version.split(".")[0]>="19"?e.props.ref:e.ref}function st(e){return e===x.Fragment||e===Symbol.for("react.fragment")}let at=nt(function(e,t){var n;let i=We(),{disabled:r=i||!1,autoFocus:o=!1,...s}=e,{isFocusVisible:a,focusProps:l}=ke({autoFocus:o}),{isHovered:c,hoverProps:u}=Te({isDisabled:r}),{pressed:d,pressProps:h}=je({disabled:r}),f=tt({ref:t,type:null!=(n=s.type)?n:"button",disabled:r||void 0,autoFocus:o},l,u,h),p=Ve({disabled:r,hover:c,focus:a,active:d,autofocus:o});return Ze()({ourProps:f,theirProps:s,slot:p,defaultTag:"button",name:"Button"})});function lt(e={},t=null,n=[]){for(let[i,r]of Object.entries(e))ut(n,ct(t,i),r);return n}function ct(e,t){return e?e+"["+t+"]":t}function ut(e,t,n){if(Array.isArray(n))for(let[i,r]of n.entries())ut(e,ct(t,i.toString()),r);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}(n)&&!x.isValidElement(n)&&lt(n,t,e)}var dt=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(dt||{});let ht=nt(function(e,t){var n;let{features:i=1,...r}=e,o={ref:t,"aria-hidden":!(2&~i)||(null!=(n=r["aria-hidden"])?n:void 0),hidden:!(4&~i)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~i)&&!!(2&~i)&&{display:"none"}}};return Ze()({ourProps:o,theirProps:r,slot:{},defaultTag:"span",name:"Hidden"})}),ft=x.createContext(null);function pt({children:e}){let t=x.useContext(ft);if(!t)return w.createElement(w.Fragment,null,e);let{target:n}=t;return n?F.createPortal(w.createElement(w.Fragment,null,e),n):null}function mt({data:e,form:t,disabled:n,onReset:i,overrides:r}){let[o,s]=x.useState(null),a=Fe();return x.useEffect(()=>{if(i&&o)return a.addEventListener(o,"reset",i)},[o,t,i]),w.createElement(pt,null,w.createElement(gt,{setForm:s,formId:t}),lt(e).map(([e,i])=>w.createElement(ht,{features:dt.Hidden,...it({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:n,name:e,value:i,...r})})))}function gt({setForm:e,formId:t}){return x.useEffect(()=>{if(t){let n=document.getElementById(t);n&&e(n)}},[e,t]),t?null:w.createElement(ht,{features:dt.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}let _t=x.createContext(void 0);function yt(){return x.useContext(_t)}function vt(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function bt(e){return vt(e)&&"tagName"in e}function xt(e){return bt(e)&&"accessKey"in e}function wt(e){return bt(e)&&"tabIndex"in e}function St(e){return xt(e)&&"INPUT"===e.nodeName}function Et(e){return xt(e)&&"LABEL"===e.nodeName}function Ct(e){return xt(e)&&"FIELDSET"===e.nodeName}function Tt(e){return xt(e)&&"LEGEND"===e.nodeName}function kt(e){let t=e.parentElement,n=null;for(;t&&!Ct(t);)Tt(t)&&(n=t),t=t.parentElement;let i=""===(null==t?void 0:t.getAttribute("disabled"));return(!i||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(Tt(t))return!1;t=t.previousElementSibling}return!0}(n))&&i}let At=Symbol();function It(e,t=!0){return Object.assign(e,{[At]:t})}function Pt(...e){let t=x.useRef(e);x.useEffect(()=>{t.current=e},[e]);let n=Ue(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[At]))?void 0:n}let Lt=x.createContext(null);function Rt(){let e=x.useContext(Lt);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Rt),e}return e}Lt.displayName="DescriptionContext";let Ot=nt(function(e,t){let n=x.useId(),i=We(),{id:r=`headlessui-description-${n}`,...o}=e,s=Rt(),a=Pt(t);Be(()=>s.register(r),[r,s.register]);let l=Ve({...s.slot,disabled:i||!1}),c={ref:a,...s.props,id:r};return Ze()({ourProps:c,theirProps:o,slot:l,defaultTag:"p",name:s.name||"Description"})}),Mt=Object.assign(Ot,{});var Dt,Nt=((Dt=Nt||{}).Space=" ",Dt.Enter="Enter",Dt.Escape="Escape",Dt.Backspace="Backspace",Dt.Delete="Delete",Dt.ArrowLeft="ArrowLeft",Dt.ArrowUp="ArrowUp",Dt.ArrowRight="ArrowRight",Dt.ArrowDown="ArrowDown",Dt.Home="Home",Dt.End="End",Dt.PageUp="PageUp",Dt.PageDown="PageDown",Dt.Tab="Tab",Dt);let Ft=x.createContext(null);function Bt(){let e=x.useContext(Ft);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Bt),e}return e}function zt(e){var t,n,i;let r=null!=(n=null==(t=x.useContext(Ft))?void 0:t.value)?n:void 0;return(null!=(i=null==e?void 0:e.length)?i:0)>0?[r,...e].filter(Boolean).join(" "):r}Ft.displayName="LabelContext";let Ut=nt(function(e,t){var n;let i=x.useId(),r=Bt(),o=yt(),s=We(),{id:a=`headlessui-label-${i}`,htmlFor:l=(null!=o?o:null==(n=r.props)?void 0:n.htmlFor),passive:c=!1,...u}=e,d=Pt(t);Be(()=>r.register(a),[a,r.register]);let h=Ue(e=>{let t=e.currentTarget;if((e.target===e.currentTarget||!function(e){return!!bt(e)&&e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]')}(e.target))&&(Et(t)&&e.preventDefault(),r.props&&"onClick"in r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),Et(t))){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(St(e)&&("file"===e.type||"radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}}),f=Ve({...r.slot,disabled:s||!1}),p={ref:d,...r.props,id:a,htmlFor:l,onClick:h};return c&&("onClick"in p&&(delete p.htmlFor,delete p.onClick),"onClick"in u&&delete u.onClick),Ze()({ourProps:p,theirProps:u,slot:f,defaultTag:l?"label":"div",name:r.name||"Label"})}),jt=Object.assign(Ut,{}),Vt=x.createContext(()=>{});function Ht({value:e,children:t}){return w.createElement(Vt.Provider,{value:e},t)}let Wt=nt(function(e,t){let n=x.useContext(Vt);return w.createElement(at,{ref:t,...tt({onClick:n},e)})});function $t(e,t,n){let i,r=n.initialDeps??[],o=!0;function s(){var s,a,l;let c;n.key&&(null==(s=n.debug)?void 0:s.call(n))&&(c=Date.now());const u=e();if(u.length===r.length&&!u.some((e,t)=>r[t]!==e))return i;let d;return r=u,n.key&&(null==(a=n.debug)?void 0:a.call(n))&&(d=Date.now()),i=t(...u),n.key&&(null==(l=n.debug)?void 0:l.call(n))&&(Math.round(100*(Date.now()-c)),Math.round(100*(Date.now()-d))),!(null==n?void 0:n.onChange)||o&&n.skipInitialOnChange||n.onChange(i),o=!1,i}return s.updateDeps=e=>{r=e},s}function Gt(e,t){if(void 0===e)throw new Error("Unexpected undefined");return e}const qt=(e,t,n)=>{let i;return function(...r){e.clearTimeout(i),i=e.setTimeout(()=>t.apply(this,r),n)}},Yt=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Xt=e=>e,Kt=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let r=t;r<=n;r++)i.push(r);return i},Zt=(e,t)=>{const n=e.scrollElement;if(!n)return;const i=e.targetWindow;if(!i)return;const r=e=>{const{width:n,height:i}=e;t({width:Math.round(n),height:Math.round(i)})};if(r(Yt(n)),!i.ResizeObserver)return()=>{};const o=new i.ResizeObserver(t=>{const i=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void r({width:t.inlineSize,height:t.blockSize})}r(Yt(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},Qt={passive:!0},Jt="undefined"==typeof window||"onscrollend"in window,en=(e,t)=>{const n=e.scrollElement;if(!n)return;const i=e.targetWindow;if(!i)return;let r=0;const o=e.options.useScrollendEvent&&Jt?()=>{}:qt(i,()=>{t(r,!1)},e.options.isScrollingResetDelay),s=i=>()=>{const{horizontal:s,isRtl:a}=e.options;r=s?n.scrollLeft*(a?-1:1):n.scrollTop,o(),t(r,i)},a=s(!0),l=s(!1);n.addEventListener("scroll",a,Qt);const c=e.options.useScrollendEvent&&Jt;return c&&n.addEventListener("scrollend",l,Qt),()=>{n.removeEventListener("scroll",a),c&&n.removeEventListener("scrollend",l)}},tn=(e,t,n)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},nn=(e,{adjustments:t=0,behavior:n},i)=>{var r,o;const s=e+t;null==(o=null==(r=i.scrollElement)?void 0:r.scrollTo)||o.call(r,{[i.options.horizontal?"left":"top"]:s,behavior:n})};class rn{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var n;null==(n=t())||n.disconnect(),e=null},observe:e=>{var n;return null==(n=t())?void 0:n.observe(e,{box:"border-box"})},unobserve:e=>{var n;return null==(n=t())?void 0:n.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,n])=>{void 0===n&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Xt,rangeExtractor:Kt,onChange:()=>{},measureElement:tn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,n;null==(n=(t=this.options).onChange)||n.call(t,this,e)},this.maybeNotify=$t(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const n=new Map,i=new Map;for(let r=t-1;r>=0;r--){const t=e[r];if(n.has(t.lane))continue;const o=i.get(t.lane);if(null==o||t.end>o.end?i.set(t.lane,t):t.end<o.end&&n.set(t.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=$t(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,t,n,i,r,o)=>(void 0!==this.prevLanes&&this.prevLanes!==o&&(this.lanesChangedFlag=!0),this.prevLanes=o,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:i,enabled:r,lanes:o}),{key:!1}),this.getMeasurements=$t(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:n,getItemKey:i,enabled:r,lanes:o},s)=>{if(!r)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const u of this.laneAssignments.keys())u>=e&&this.laneAssignments.delete(u);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),0!==this.measurementsCache.length||this.lanesSettling||(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));const a=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const l=this.measurementsCache.slice(0,a),c=new Array(o).fill(void 0);for(let u=0;u<a;u++){const e=l[u];e&&(c[e.lane]=u)}for(let u=a;u<e;u++){const e=i(u),r=this.laneAssignments.get(u);let o,a;if(void 0!==r&&this.options.lanes>1){o=r;const e=c[o],i=void 0!==e?l[e]:void 0;a=i?i.end+this.options.gap:t+n}else{const e=1===this.options.lanes?l[u-1]:this.getFurthestMeasurement(l,u);a=e?e.end+this.options.gap:t+n,o=e?e.lane:u%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(u,o)}const d=s.get(e),h="number"==typeof d?d:this.options.estimateSize(u),f=a+h;l[u]={index:u,start:a,size:h,end:f,key:e,lane:o},c[o]=u}return this.measurementsCache=l,l},{key:!1,debug:()=>this.options.debug}),this.calculateRange=$t(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,n,i)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:n,lanes:i}){const r=e.length-1;if(e.length<=i)return{startIndex:0,endIndex:r};let o=on(0,r,t=>e[t].start,n),s=o;if(1===i)for(;s<r&&e[s].end<n+t;)s++;else if(i>1){const a=Array(i).fill(0);for(;s<r&&a.some(e=>e<n+t);){const t=e[s];a[t.lane]=t.end,s++}const l=Array(i).fill(n+t);for(;o>=0&&l.some(e=>e>=n);){const t=e[o];l[t.lane]=t.start,o--}o=Math.max(0,o-o%i),s=Math.min(r,s+(i-1-s%i))}return{startIndex:o,endIndex:s}}({measurements:e,outerSize:t,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=$t(()=>{let e=null,t=null;const n=this.calculateRange();return n&&(e=n.startIndex,t=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,n,i,r)=>null===i||null===r?[]:e({startIndex:i,endIndex:r,overscan:t,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):-1},this._measureElement=(e,t)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const r=i.key,o=this.elementsCache.get(r);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(r,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const n=this.measurementsCache[e];if(!n)return;const i=t-(this.itemSizeCache.get(n.key)??n.size);0!==i&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(n,i,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=$t(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=t[e[i]];n.push(r)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return Gt(t[on(0,t.length-1,e=>Gt(t[e]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,t,n=0)=>{if(!this.scrollElement)return 0;const i=this.getSize(),r=this.getScrollOffset();"auto"===t&&(t=e>=r+i?"end":"start"),"center"===t?e+=(n-i)/2:"end"===t&&(e-=i);const o=this.getMaxScrollOffset();return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),r=this.getScrollOffset();if("auto"===t)if(n.end>=r+i-this.options.scrollPaddingEnd)t="end";else{if(!(n.start<=r+this.options.scrollPaddingStart))return[r,t];t="start"}if("end"===t&&e===this.options.count-1)return[this.getMaxScrollOffset(),t];const o="end"===t?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,t,n.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:n}={})=>{"smooth"===n&&this.isDynamicMode(),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:t="auto",behavior:n}={})=>{"smooth"===n&&this.isDynamicMode(),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let i=0;const r=t=>{if(!this.targetWindow)return;const i=this.getOffsetForIndex(e,t);if(!i)return;const[r,s]=i;this._scrollToOffset(r,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const t=()=>{if(this.currentScrollToIndex!==e)return;const t=this.getScrollOffset(),n=this.getOffsetForIndex(e,s);n&&(((e,t)=>Math.abs(e-t)<1.01)(n[0],t)||o(s))};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(t):t()})},o=t=>{this.targetWindow&&this.currentScrollToIndex===e&&(i++,i<10&&this.targetWindow.requestAnimationFrame(()=>r(t)))};r(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode(),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let n;if(0===t.length)n=this.options.paddingStart;else if(1===this.options.lanes)n=(null==(e=t[t.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let i=t.length-1;for(;i>=0&&e.some(e=>null===e);){const n=t[i];null===e[n.lane]&&(e[n.lane]=n.end),i--}n=Math.max(...e.filter(e=>null!==e))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const on=(e,t,n,i)=>{for(;e<=t;){const r=(e+t)/2|0,o=n(r);if(o<i)e=r+1;else{if(!(o>i))return r;t=r-1}}return e>0?e-1:0},sn="undefined"!=typeof document?x.useLayoutEffect:x.useEffect;function an(e,t){return null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&"id"in e&&"id"in t?e.id===t.id:e===t}function ln(e){if(null===e)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function cn(e,t,n=!1){let[i,r]=x.useState(()=>ln(t));return Be(()=>{if(!t||!e)return;let n=Ne();return n.requestAnimationFrame(function e(){n.requestAnimationFrame(e),r(e=>{let n=ln(t);return n.width===e.width&&n.height===e.height?e:n})}),()=>{n.dispose()}},[t,e]),n?{width:`${i.width}px`,height:`${i.height}px`}:i}var un,dn=((un=dn||{})[un.Left=0]="Left",un[un.Right=2]="Right",un);let hn=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}};var fn,pn,mn,gn=Object.defineProperty,_n=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},yn=(e,t,n)=>(_n(e,t,"read from private field"),n?n.call(e):t.get(e)),vn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bn=(e,t,n,i)=>(_n(e,t,"write to private field"),t.set(e,n),n);let xn=class{constructor(e){vn(this,fn,{}),vn(this,pn,new hn(()=>new Set)),vn(this,mn,new Set),((e,t,n)=>{((e,t,n)=>{t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n)})(this,"disposables",Ne()),bn(this,fn,e),Pe.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return yn(this,fn)}subscribe(e,t){if(Pe.isServer)return()=>{};let n={selector:e,callback:t,current:e(yn(this,fn))};return yn(this,mn).add(n),this.disposables.add(()=>{yn(this,mn).delete(n)})}on(e,t){return Pe.isServer?()=>{}:(yn(this,pn).get(e).add(t),this.disposables.add(()=>{yn(this,pn).get(e).delete(t)}))}send(e){let t=this.reduce(yn(this,fn),e);if(t!==yn(this,fn)){bn(this,fn,t);for(let e of yn(this,mn)){let t=e.selector(yn(this,fn));wn(e.current,t)||(e.current=t,e.callback(t))}for(let t of yn(this,pn).get(e.type))t(yn(this,fn),e)}}};function wn(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&Sn(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&Sn(e.entries(),t.entries()):!(!En(e)||!En(t))&&Sn(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function Sn(e,t){for(;;){let n=e.next(),i=t.next();if(n.done&&i.done)return!0;if(n.done||i.done||!Object.is(n.value,i.value))return!1}}function En(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}fn=new WeakMap,pn=new WeakMap,mn=new WeakMap;var Cn,Tn=Object.defineProperty,kn=(e,t,n)=>(((e,t,n)=>{t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),An=((Cn=An||{})[Cn.Push=0]="Push",Cn[Cn.Pop=1]="Pop",Cn);let In={0(e,t){let n=t.id,i=e.stack,r=e.stack.indexOf(n);if(-1!==r){let t=e.stack.slice();return t.splice(r,1),t.push(n),i=t,{...e,stack:i}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,i=e.stack.indexOf(n);if(-1===i)return e;let r=e.stack.slice();return r.splice(i,1),{...e,stack:r}}},Pn=class e extends xn{constructor(){super(...arguments),kn(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),kn(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new e({stack:[]})}reduce(e,t){return Ge(t.type,In,e,t)}};const Ln=new hn(()=>Pn.new());var Rn,On,Mn={exports:{}},Dn={},Nn=(On||(On=1,Mn.exports=function(){if(Rn)return Dn;Rn=1;var e=v(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,i=e.useRef,r=e.useEffect,o=e.useMemo,s=e.useDebugValue;return Dn.useSyncExternalStoreWithSelector=function(e,a,l,c,u){var d=i(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=o(function(){function e(e){if(!r){if(r=!0,n=e,e=c(e),void 0!==u&&h.hasValue){var o=h.value;if(u(o,e))return i=o}return i=e}if(o=i,t(n,e))return o;var s=c(e);return void 0!==u&&u(o,s)?(n=e,o):(n=e,i=s)}var n,i,r=!1,o=void 0===l?null:l;return[function(){return e(a())},null===o?void 0:function(){return e(o())}]},[a,l,c,u]);var f=n(e,d[0],d[1]);return r(function(){h.hasValue=!0,h.value=f},[f]),s(f),f},Dn}()),Mn.exports);function Fn(e,t,n=wn){return Nn.useSyncExternalStoreWithSelector(Ue(t=>e.subscribe(Bn,t)),Ue(()=>e.state),Ue(()=>e.state),Ue(t),n)}function Bn(e){return e}function zn(e,t){let n=x.useId(),i=Ln.get(t),[r,o]=Fn(i,x.useCallback(e=>[i.selectors.isTop(e,n),i.selectors.inStack(e,n)],[i,n]));return Be(()=>{if(e)return i.actions.push(n),()=>i.actions.pop(n)},[i,e,n]),!!e&&(!o||r)}let Un=new Map,jn=new Map;function Vn(e){var t;let n=null!=(t=jn.get(e))?t:0;return jn.set(e,n+1),0!==n||(Un.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>function(e){var t;let n=null!=(t=jn.get(e))?t:1;if(1===n?jn.delete(e):jn.set(e,n-1),1!==n)return;let i=Un.get(e);i&&(null===i["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",i["aria-hidden"]),e.inert=i.inert,Un.delete(e))}(e)}function Hn(e,{allowed:t,disallowed:n}={}){let i=zn(e,"inert-others");Be(()=>{var e,r;if(!i)return;let o=Ne();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&o.add(Vn(t));let s=null!=(r=null==t?void 0:t())?r:[];for(let t of s){if(!t)continue;let e=Le(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)s.some(t=>e.contains(t))||o.add(Vn(e));n=n.parentElement}}return o.dispose},[i,t,n])}function Wn(e,t,n){let i=ze(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()});x.useEffect(()=>{if(!e)return;let n=null===t?null:xt(t)?t:t.current;if(!n)return;let r=Ne();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>i.current(n));e.observe(n),r.add(()=>e.disconnect())}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(()=>i.current(n));e.observe(n),r.add(()=>e.disconnect())}return()=>r.dispose()},[t,i,e])}let $n=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Gn=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var qn,Yn,Xn=((Yn=Xn||{})[Yn.First=1]="First",Yn[Yn.Previous=2]="Previous",Yn[Yn.Next=4]="Next",Yn[Yn.Last=8]="Last",Yn[Yn.WrapAround=16]="WrapAround",Yn[Yn.NoScroll=32]="NoScroll",Yn[Yn.AutoFocus=64]="AutoFocus",Yn),Kn=((qn=Kn||{})[qn.Error=0]="Error",qn[qn.Overflow=1]="Overflow",qn[qn.Success=2]="Success",qn[qn.Underflow=3]="Underflow",qn),Zn=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Zn||{}),Qn=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Qn||{}),Jn=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Jn||{});function ei(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let ti=["textarea","input"].join(",");function ni(e,t=e=>e){return e.slice().sort((e,n)=>{let i=t(e),r=t(n);if(null===i||null===r)return 0;let o=i.compareDocumentPosition(r);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ii(e,t,{sorted:n=!0,relativeTo:i=null,skipElements:r=[]}={}){let o=Array.isArray(e)?e.length>0?Re(e[0]):document:Re(e),s=Array.isArray(e)?n?ni(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Gn)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll($n)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);r.length>0&&s.length>1&&(s=s.filter(e=>!r.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),i=null!=i?i:null==o?void 0:o.activeElement;let a,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,s.indexOf(i))-1;if(4&t)return Math.max(0,s.indexOf(i))+1;if(8&t)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,h=s.length;do{if(d>=h||d+h<=0)return 0;let e=c+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}a=s[e],null==a||a.focus(u),d+=l}while(a!==Oe(a));return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,ti))&&n}(a)&&a.select(),2}function ri(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function oi(){return ri()||/Android/gi.test(window.navigator.userAgent)}function si(e,t,n,i){let r=ze(n);x.useEffect(()=>{if(e)return document.addEventListener(t,n,i),()=>document.removeEventListener(t,n,i);function n(e){r.current(e)}},[e,t,i])}function ai(e,t,n,i){let r=ze(n);x.useEffect(()=>{if(e)return window.addEventListener(t,n,i),()=>window.removeEventListener(t,n,i);function n(e){r.current(e)}},[e,t,i])}function li(e,t,n){let i=ze(n),r=x.useCallback(function(e,n){if(e.defaultPrevented)return;let r=n(e);if(null===r||!r.getRootNode().contains(r)||!r.isConnected)return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of o)if(null!==t&&(t.contains(r)||e.composed&&e.composedPath().includes(t)))return;return!function(e,t=0){var n;return e!==(null==(n=Le(e))?void 0:n.body)&&Ge(t,{0:()=>e.matches($n),1(){let t=e;for(;null!==t;){if(t.matches($n))return!0;t=t.parentElement}return!1}})}(r,Qn.Loose)&&-1!==r.tabIndex&&e.preventDefault(),i.current(e,r)},[i,t]),o=x.useRef(null);si(e,"pointerdown",e=>{var t,n;oi()||(o.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)},!0),si(e,"pointerup",e=>{if(oi()||!o.current)return;let t=o.current;return o.current=null,r(e,()=>t)},!0);let s=x.useRef({x:0,y:0});si(e,"touchstart",e=>{s.current.x=e.touches[0].clientX,s.current.y=e.touches[0].clientY},!0),si(e,"touchend",e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-s.current.x)>=30||Math.abs(n-s.current.y)>=30))return r(e,()=>wt(e.target)?e.target:null)},!0),ai(e,"blur",e=>r(e,()=>function(e){return xt(e)&&"IFRAME"===e.nodeName}(window.document.activeElement)?window.document.activeElement:null),!0)}function ci(...e){return x.useMemo(()=>Le(...e),[...e])}var ui=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(ui||{});const di={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}};function hi(e,t,n,i){let r=ze(n);x.useEffect(()=>{function n(e){r.current(e)}return(e=null!=e?e:window).addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)},[e,t,i])}function fi(e){let t=x.useRef({value:"",selectionStart:null,selectionEnd:null});return hi(e,"blur",e=>{let n=e.target;St(n)&&(t.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),Ue(()=>{if(!Me(e)&&St(e)&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==t.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:n,selectionEnd:i}=t.current;null!==n&&null!==i&&e.setSelectionRange(n,i)}t.current={value:"",selectionStart:null,selectionEnd:null}}})}function pi(e,t){return x.useMemo(()=>{var n;if(e.type)return e.type;let i=null!=(n=e.as)?n:"button";return"string"==typeof i&&"button"===i.toLowerCase()||"BUTTON"===(null==t?void 0:t.tagName)&&!t.hasAttribute("type")?"button":void 0},[e.type,e.as,t])}function mi(){let e;return{before({doc:t}){var n;let i=t.documentElement,r=null!=(n=t.defaultView)?n:window;e=Math.max(0,r.innerWidth-i.clientWidth)},after({doc:t,d:n}){let i=t.documentElement,r=Math.max(0,i.clientWidth-i.offsetWidth),o=Math.max(0,e-r);n.style(i,"paddingRight",`${o}px`)}}}function gi(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let _i=function(e,t){let n=new Map,i=new Set;return{getSnapshot:()=>n,subscribe:e=>(i.add(e),()=>i.delete(e)),dispatch(e,...r){let o=t[e].call(n,...r);o&&(n=o,i.forEach(e=>e()))}}}(0,{PUSH(e,t){var n;let i=null!=(n=this.get(e))?n:{doc:e,count:0,d:Ne(),meta:new Set,computedMeta:{}};return i.count++,i.meta.add(t),i.computedMeta=gi(i.meta),this.set(e,i),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=gi(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta:()=>e.computedMeta},n=[ri()?{before({doc:e,d:t,meta:n}){function i(e){for(let t of n().containers)for(let n of t())if(n.contains(e))return!0;return!1}t.microTask(()=>{var n;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let n=Ne();n.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>n.dispose()))}let r=null!=(n=window.scrollY)?n:window.pageYOffset,o=null;t.addEventListener(e,"click",t=>{if(wt(t.target))try{let n=t.target.closest("a");if(!n)return;let{hash:r}=new URL(n.href),s=e.querySelector(r);wt(s)&&!i(s)&&(o=s)}catch{}},!0),t.group(n=>{t.addEventListener(e,"touchstart",e=>{if(n.dispose(),wt(e.target)&&function(e){return bt(e)&&"style"in e}(e.target))if(i(e.target)){let t=e.target;for(;t.parentElement&&i(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",e=>{if(wt(e.target)){if(St(e.target))return;if(i(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),t.add(()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;r!==t&&window.scrollTo(0,r),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{},mi(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];n.forEach(({before:e})=>null==e?void 0:e(t)),n.forEach(({after:e})=>null==e?void 0:e(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function yi(e,t,n=()=>[document.body]){!function(e,t,n=()=>({containers:[]})){let i=function(e){return x.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}(_i),r=t?i.get(t):void 0,o=!!r&&r.count>0;Be(()=>{if(t&&e)return _i.dispatch("PUSH",t,n),()=>_i.dispatch("POP",t,n)},[e,t])}(zn(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}})}function vi(e){return[e.screenX,e.screenY]}var bi,xi;_i.subscribe(()=>{let e=_i.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),i=0!==n.count;(i&&!e||!i&&e)&&_i.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&_i.dispatch("TEARDOWN",n)}}),"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(bi=null==process?void 0:{})?void 0:bi.NODE_ENV)&&void 0===(null==(xi=null==Element?void 0:Element.prototype)?void 0:xi.getAnimations)&&(Element.prototype.getAnimations=function(){return[]});var wi,Si=((wi=Si||{})[wi.None=0]="None",wi[wi.Closed=1]="Closed",wi[wi.Enter=2]="Enter",wi[wi.Leave=4]="Leave",wi);function Ei(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}function Ci(e,t,n,i){let[r,o]=x.useState(n),{hasFlag:s,addFlag:a,removeFlag:l}=function(e=0){let[t,n]=x.useState(e),i=x.useCallback(e=>n(e),[]),r=x.useCallback(e=>n(t=>t|e),[]),o=x.useCallback(e=>(t&e)===e,[t]),s=x.useCallback(e=>n(t=>t&~e),[]),a=x.useCallback(e=>n(t=>t^e),[]);return{flags:t,setFlag:i,addFlag:r,hasFlag:o,removeFlag:s,toggleFlag:a}}(e&&r?3:0),c=x.useRef(!1),u=x.useRef(!1),d=Fe();return Be(()=>{var r;if(e)return n&&o(!0),t?(null==(r=null==i?void 0:i.start)||r.call(i,n),function(e,{prepare:t,run:n,done:i,inFlight:r}){let o=Ne();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current)return void n();let i=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=i}(e,{prepare:t,inFlight:r}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(function(e,t){var n,i;let r=Ne();if(!e)return r.dispose;let o=!1;r.add(()=>{o=!0});let s=null!=(i=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?i:[];return 0===s.length?(t(),r.dispose):(Promise.allSettled(s.map(e=>e.finished)).then(()=>{o||t()}),r.dispose)}(e,i))})}),o.dispose}(t,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var e;u.current&&function(e){var t,n;return(null!=(n=null==(t=e.getAnimations)?void 0:t.call(e))?n:[]).some(e=>e instanceof CSSTransition&&"finished"!==e.playState)}(t)||(c.current=!1,l(7),n||o(!1),null==(e=null==i?void 0:i.end)||e.call(i,n))}})):void(n&&a(3))},[e,n,t,d]),e?[r,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Ti(e,t){let n=x.useRef([]),i=Ue(e);x.useEffect(()=>{let e=[...n.current];for(let[r,o]of t.entries())if(n.current[r]!==o){let r=i(t,e);return n.current=t,r}},[i,...t])}function ki(){return"undefined"!=typeof window}function Ai(e){return Li(e)?(e.nodeName||"").toLowerCase():"#document"}function Ii(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Pi(e){var t;return null==(t=(Li(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Li(e){return!!ki()&&(e instanceof Node||e instanceof Ii(e).Node)}function Ri(e){return!!ki()&&(e instanceof Element||e instanceof Ii(e).Element)}function Oi(e){return!!ki()&&(e instanceof HTMLElement||e instanceof Ii(e).HTMLElement)}function Mi(e){return!(!ki()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ii(e).ShadowRoot)}const Di=new Set(["inline","contents"]);function Ni(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=Yi(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!Di.has(r)}const Fi=new Set(["table","td","th"]);function Bi(e){return Fi.has(Ai(e))}const zi=[":popover-open",":modal"];function Ui(e){return zi.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const ji=["transform","translate","scale","rotate","perspective"],Vi=["transform","translate","scale","rotate","perspective","filter"],Hi=["paint","layout","strict","content"];function Wi(e){const t=$i(),n=Ri(e)?Yi(e):e;return ji.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Vi.some(e=>(n.willChange||"").includes(e))||Hi.some(e=>(n.contain||"").includes(e))}function $i(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Gi=new Set(["html","body","#document"]);function qi(e){return Gi.has(Ai(e))}function Yi(e){return Ii(e).getComputedStyle(e)}function Xi(e){return Ri(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ki(e){if("html"===Ai(e))return e;const t=e.assignedSlot||e.parentNode||Mi(e)&&e.host||Pi(e);return Mi(t)?t.host:t}function Zi(e){const t=Ki(e);return qi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Oi(t)&&Ni(t)?t:Zi(t)}function Qi(e,t,n){var i;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=Zi(e),o=r===(null==(i=e.ownerDocument)?void 0:i.body),s=Ii(r);if(o){const e=Ji(s);return t.concat(s,s.visualViewport||[],Ni(r)?r:[],e&&n?Qi(e):[])}return t.concat(r,Qi(r,[],n))}function Ji(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const er=Math.min,tr=Math.max,nr=Math.round,ir=Math.floor,rr=e=>({x:e,y:e}),or={left:"right",right:"left",bottom:"top",top:"bottom"},sr={start:"end",end:"start"};function ar(e,t,n){return tr(e,er(t,n))}function lr(e,t){return"function"==typeof e?e(t):e}function cr(e){return e.split("-")[0]}function ur(e){return e.split("-")[1]}function dr(e){return"x"===e?"y":"x"}function hr(e){return"y"===e?"height":"width"}const fr=new Set(["top","bottom"]);function pr(e){return fr.has(cr(e))?"y":"x"}function mr(e){return dr(pr(e))}function gr(e){return e.replace(/start|end/g,e=>sr[e])}const _r=["left","right"],yr=["right","left"],vr=["top","bottom"],br=["bottom","top"];function xr(e){return e.replace(/left|right|bottom|top/g,e=>or[e])}function wr(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function Sr(e,t,n){let{reference:i,floating:r}=e;const o=pr(t),s=mr(t),a=hr(s),l=cr(t),c="y"===o,u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:u,y:i.y-r.height};break;case"bottom":f={x:u,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-r.width,y:d};break;default:f={x:i.x,y:i.y}}switch(ur(t)){case"start":f[s]-=h*(n&&c?-1:1);break;case"end":f[s]+=h*(n&&c?-1:1)}return f}async function Er(e,t){var n;void 0===t&&(t={});const{x:i,y:r,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=lr(t,e),p=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(f),m=a[h?"floating"===d?"reference":"floating":d],g=wr(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_="floating"===d?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),v=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},b=wr(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:y,strategy:l}):_);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}const Cr=new Set(["left","top"]);function Tr(e){const t=Yi(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=Oi(e),o=r?e.offsetWidth:n,s=r?e.offsetHeight:i,a=nr(n)!==o||nr(i)!==s;return a&&(n=o,i=s),{width:n,height:i,$:a}}function kr(e){return Ri(e)?e:e.contextElement}function Ar(e){const t=kr(e);if(!Oi(t))return rr(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:o}=Tr(t);let s=(o?nr(n.width):n.width)/i,a=(o?nr(n.height):n.height)/r;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const Ir=rr(0);function Pr(e){const t=Ii(e);return $i()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ir}function Lr(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),o=kr(e);let s=rr(1);t&&(i?Ri(i)&&(s=Ar(i)):s=Ar(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Ii(e))&&t}(o,n,i)?Pr(o):rr(0);let l=(r.left+a.x)/s.x,c=(r.top+a.y)/s.y,u=r.width/s.x,d=r.height/s.y;if(o){const e=Ii(o),t=i&&Ri(i)?Ii(i):i;let n=e,r=Ji(n);for(;r&&i&&t!==n;){const e=Ar(r),t=r.getBoundingClientRect(),i=Yi(r),o=t.left+(r.clientLeft+parseFloat(i.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(i.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=s,n=Ii(r),r=Ji(n)}}return wr({width:u,height:d,x:l,y:c})}function Rr(e,t){const n=Xi(e).scrollLeft;return t?t.left+n:Lr(Pi(e)).left+n}function Or(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Rr(e,n),y:n.top+t.scrollTop}}const Mr=new Set(["absolute","fixed"]);function Dr(e,t,n){let i;if("viewport"===t)i=function(e,t){const n=Ii(e),i=Pi(e),r=n.visualViewport;let o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;const e=$i();(!e||e&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}const c=Rr(i);if(c<=0){const e=i.ownerDocument,t=e.body,n=getComputedStyle(t),r="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,s=Math.abs(i.clientWidth-t.clientWidth-r);s<=25&&(o-=s)}else c<=25&&(o+=c);return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)i=function(e){const t=Pi(e),n=Xi(e),i=e.ownerDocument.body,r=tr(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=tr(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+Rr(e);const a=-n.scrollTop;return"rtl"===Yi(i).direction&&(s+=tr(t.clientWidth,i.clientWidth)-r),{width:r,height:o,x:s,y:a}}(Pi(e));else if(Ri(t))i=function(e,t){const n=Lr(e,!0,"fixed"===t),i=n.top+e.clientTop,r=n.left+e.clientLeft,o=Oi(e)?Ar(e):rr(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:r*o.x,y:i*o.y}}(t,n);else{const n=Pr(e);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return wr(i)}function Nr(e,t){const n=Ki(e);return!(n===t||!Ri(n)||qi(n))&&("fixed"===Yi(n).position||Nr(n,t))}function Fr(e,t,n){const i=Oi(t),r=Pi(t),o="fixed"===n,s=Lr(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=rr(0);function c(){l.x=Rr(r)}if(i||!i&&!o)if(("body"!==Ai(t)||Ni(r))&&(a=Xi(t)),i){const e=Lr(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&c();o&&!i&&r&&c();const u=!r||i||o?rr(0):Or(r,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}function Br(e){return"static"===Yi(e).position}function zr(e,t){if(!Oi(e)||"fixed"===Yi(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Pi(e)===n&&(n=n.ownerDocument.body),n}function Ur(e,t){const n=Ii(e);if(Ui(e))return n;if(!Oi(e)){let t=Ki(e);for(;t&&!qi(t);){if(Ri(t)&&!Br(t))return t;t=Ki(t)}return n}let i=zr(e,t);for(;i&&Bi(i)&&Br(i);)i=zr(i,t);return i&&qi(i)&&Br(i)&&!Wi(i)?n:i||function(e){let t=Ki(e);for(;Oi(t)&&!qi(t);){if(Wi(t))return t;if(Ui(t))return null;t=Ki(t)}return null}(e)||n}const jr={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const o="fixed"===r,s=Pi(i),a=!!t&&Ui(t.floating);if(i===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=rr(1);const u=rr(0),d=Oi(i);if((d||!d&&!o)&&(("body"!==Ai(i)||Ni(s))&&(l=Xi(i)),Oi(i))){const e=Lr(i);c=Ar(i),u.x=e.x+i.clientLeft,u.y=e.y+i.clientTop}const h=!s||d||o?rr(0):Or(s,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Pi,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[..."clippingAncestors"===n?Ui(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let i=Qi(e,[],!1).filter(e=>Ri(e)&&"body"!==Ai(e)),r=null;const o="fixed"===Yi(e).position;let s=o?Ki(e):e;for(;Ri(s)&&!qi(s);){const t=Yi(s),n=Wi(s);n||"fixed"!==t.position||(r=null),(o?!n&&!r:!n&&"static"===t.position&&r&&Mr.has(r.position)||Ni(s)&&!n&&Nr(e,s))?i=i.filter(e=>e!==s):r=t,s=Ki(s)}return t.set(e,i),i}(t,this._c):[].concat(n),i],s=o[0],a=o.reduce((e,n)=>{const i=Dr(t,n,r);return e.top=tr(i.top,e.top),e.right=er(i.right,e.right),e.bottom=er(i.bottom,e.bottom),e.left=tr(i.left,e.left),e},Dr(t,s,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Ur,getElementRects:async function(e){const t=this.getOffsetParent||Ur,n=this.getDimensions,i=await n(e.floating);return{reference:Fr(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Tr(e);return{width:t,height:n}},getScale:Ar,isElement:Ri,isRTL:function(e){return"rtl"===Yi(e).direction}};function Vr(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Hr(e,t,n,i){void 0===i&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=i,c=kr(e),u=r||o?[...c?Qi(c):[],...Qi(t)]:[];u.forEach(e=>{r&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const d=c&&a?function(e,t){let n,i=null;const r=Pi(e);function o(){var e;clearTimeout(n),null==(e=i)||e.disconnect(),i=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||t(),!h||!f)return;const p={rootMargin:-ir(d)+"px "+-ir(r.clientWidth-(u+h))+"px "+-ir(r.clientHeight-(d+f))+"px "+-ir(u)+"px",threshold:tr(0,er(1,l))||1};let m=!0;function g(t){const i=t[0].intersectionRatio;if(i!==l){if(!m)return s();i?s(!1,i):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==i||Vr(c,e.getBoundingClientRect())||s(),m=!1}try{i=new IntersectionObserver(g,{...p,root:r.ownerDocument})}catch(_){i=new IntersectionObserver(g,p)}i.observe(e)}(!0),o}(c,n):null;let h,f=-1,p=null;s&&(p=new ResizeObserver(e=>{let[i]=e;i&&i.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let m=l?Lr(e):null;return l&&function t(){const i=Lr(e);m&&!Vr(m,i)&&n(),m=i,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{r&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const Wr=Er,$r=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:i,elements:r}=e,o=await(null==i.isRTL?void 0:i.isRTL(r.floating)),s=cr(n),a=ur(n),l="y"===pr(n),c=Cr.has(s)?-1:1,u=o&&l?-1:1,d=lr(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(i=a.arrow)&&i.alignmentOffset?{}:{x:r+l.x,y:o+l.y,data:{...l,placement:s}}}}},Gr=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=lr(e,t),c={x:n,y:i},u=await Er(t,l),d=pr(cr(r)),h=dr(d);let f=c[h],p=c[d];if(o){const e="y"===h?"bottom":"right";f=ar(f+u["y"===h?"top":"left"],f,f-u[e])}if(s){const e="y"===d?"bottom":"right";p=ar(p+u["y"===d?"top":"left"],p,p-u[e])}const m=a.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[h]:o,[d]:s}}}}}},qr=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=lr(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const _=cr(r),y=pr(a),v=cr(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(v||!m?[xr(a)]:function(e){const t=xr(e);return[gr(e),t,gr(t)]}(a)),w="none"!==p;!h&&w&&x.push(...function(e,t,n,i){const r=ur(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?yr:_r:t?_r:yr;case"left":case"right":return t?vr:br;default:return[]}}(cr(e),"start"===n,i);return r&&(o=o.map(e=>e+"-"+r),t&&(o=o.concat(o.map(gr)))),o}(a,m,p,b));const S=[a,...x],E=await Er(t,g),C=[];let T=(null==(i=o.flip)?void 0:i.overflows)||[];if(u&&C.push(E[_]),d){const e=function(e,t,n){void 0===n&&(n=!1);const i=ur(e),r=mr(e),o=hr(r);let s="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=xr(s)),[s,xr(s)]}(r,s,b);C.push(E[e[0]],E[e[1]])}if(T=[...T,{placement:r,overflows:C}],!C.every(e=>e<=0)){var k,A;const e=((null==(k=o.flip)?void 0:k.index)||0)+1,t=S[e];if(t&&("alignment"!==d||y===pr(t)||T.every(e=>pr(e.placement)!==y||e.overflows[0]>0)))return{data:{index:e,overflows:T},reset:{placement:t}};let n=null==(A=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!n)switch(f){case"bestFit":{var I;const e=null==(I=T.filter(e=>{if(w){const t=pr(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:I[0];e&&(n=e);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}},Yr=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=lr(e,t),u=await Er(t,c),d=cr(r),h=ur(r),f="y"===pr(r),{width:p,height:m}=o.floating;let g,_;"top"===d||"bottom"===d?(g=d,_=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(_=d,g="end"===h?"top":"bottom");const y=m-u.top-u.bottom,v=p-u.left-u.right,b=er(m-u[g],y),x=er(p-u[_],v),w=!t.middlewareData.shift;let S=b,E=x;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=v),null!=(i=t.middlewareData.shift)&&i.enabled.y&&(S=y),w&&!h){const e=tr(u.left,0),t=tr(u.right,0),n=tr(u.top,0),i=tr(u.bottom,0);f?E=p-2*(0!==e||0!==t?e+t:tr(u.left,u.right)):S=m-2*(0!==n||0!==i?n+i:tr(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:S});const C=await s.getDimensions(a.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};var Xr="undefined"!=typeof document?x.useLayoutEffect:function(){};function Kr(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;0!==i--;)if(!Kr(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;0!==i--;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;0!==i--;){const n=r[i];if(!("_owner"===n&&e.$$typeof||Kr(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function Zr(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qr(e,t){const n=Zr(e);return Math.round(t*n)/n}function Jr(e){const t=x.useRef(e);return Xr(()=>{t.current=e}),t}const eo=(e,t)=>({...$r(e),options:[e,t]}),to=(e,t)=>({...qr(e),options:[e,t]}),no=(e,t)=>({...Yr(e),options:[e,t]}),io={...S},ro=io.useInsertionEffect||(e=>e());function oo(e){const t=x.useRef(()=>{});return ro(()=>{t.current=e}),x.useCallback(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return null==t.current?void 0:t.current(...n)},[])}var so="undefined"!=typeof document?x.useLayoutEffect:x.useEffect;let ao=!1,lo=0;const co=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+lo++,uo=io.useId||function(){const[e,t]=x.useState(()=>ao?co():void 0);return so(()=>{null==e&&t(co())},[]),x.useEffect(()=>{ao=!0},[]),e},ho=x.createContext(null),fo=x.createContext(null),po="data-floating-ui-focusable";function mo(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:i}=e,r=uo(),o=x.useRef({}),[s]=x.useState(()=>function(){const e=new Map;return{emit(t,n){var i;null==(i=e.get(t))||i.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var i;e.set(t,(null==(i=e.get(t))?void 0:i.filter(e=>e!==n))||[])}}}()),a=null!=((null==(l=x.useContext(ho))?void 0:l.id)||null);var l;const[c,u]=x.useState(i.reference),d=oo((e,t,i)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:i,nested:a}),null==n||n(e,t,i)}),h=x.useMemo(()=>({setPositionReference:u}),[]),f=x.useMemo(()=>({reference:c||i.reference||null,floating:i.floating||null,domReference:i.reference}),[c,i.reference,i.floating]);return x.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:f,events:s,floatingId:r,refs:h}),[t,d,f,s,r,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||n,r=i.elements,[o,s]=x.useState(null),[a,l]=x.useState(null),c=(null==r?void 0:r.domReference)||o,u=x.useRef(null),d=x.useContext(fo);so(()=>{c&&(u.current=c)},[c]);const h=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=x.useState(i);Kr(h,i)||f(i);const[p,m]=x.useState(null),[g,_]=x.useState(null),y=x.useCallback(e=>{e!==S.current&&(S.current=e,m(e))},[]),v=x.useCallback(e=>{e!==E.current&&(E.current=e,_(e))},[]),b=o||p,w=s||g,S=x.useRef(null),E=x.useRef(null),C=x.useRef(u),T=null!=l,k=Jr(l),A=Jr(r),I=Jr(c),P=x.useCallback(()=>{if(!S.current||!E.current)return;const e={placement:t,strategy:n,middleware:h};A.current&&(e.platform=A.current),((e,t,n)=>{const i=new Map,r={platform:jr,...n},o={...r.platform,_c:i};return(async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=Sr(c,i,l),h=i,f={},p=0;for(let m=0;m<a.length;m++){const{name:n,fn:o}=a[m],{x:g,y:_,data:y,reset:v}=await o({x:u,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=_?_:d,f={...f,[n]:{...f[n],...y}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(h=v.placement),v.rects&&(c=!0===v.rects?await s.getElementRects({reference:e,floating:t,strategy:r}):v.rects),({x:u,y:d}=Sr(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:r,middlewareData:f}})(e,t,{...r,platform:o})})(S.current,E.current,e).then(e=>{const t={...e,isPositioned:!1!==I.current};L.current&&!Kr(C.current,t)&&(C.current=t,F.flushSync(()=>{d(t)}))})},[h,t,n,A,I]);Xr(()=>{!1===c&&C.current.isPositioned&&(C.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);const L=x.useRef(!1);Xr(()=>(L.current=!0,()=>{L.current=!1}),[]),Xr(()=>{if(b&&(S.current=b),w&&(E.current=w),b&&w){if(k.current)return k.current(b,w,P);P()}},[b,w,P,k,T]);const R=x.useMemo(()=>({reference:S,floating:E,setReference:y,setFloating:v}),[y,v]),O=x.useMemo(()=>({reference:b,floating:w}),[b,w]),M=x.useMemo(()=>{const e={position:n,left:0,top:0};if(!O.floating)return e;const t=Qr(O.floating,u.x),i=Qr(O.floating,u.y);return a?{...e,transform:"translate("+t+"px, "+i+"px)",...Zr(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:i}},[n,a,O.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:P,refs:R,elements:O,floatingStyles:M}),[u,P,R,O,M])}({...e,elements:{...r,...a&&{reference:a}}}),f=x.useCallback(e=>{const t=Ri(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),h.refs.setReference(t)},[h.refs]),p=x.useCallback(e=>{(Ri(e)||null===e)&&(u.current=e,s(e)),(Ri(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!Ri(e))&&h.refs.setReference(e)},[h.refs]),m=x.useMemo(()=>({...h.refs,setReference:p,setPositionReference:f,domReference:u}),[h.refs,p,f]),g=x.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),_=x.useMemo(()=>({...h,...i,refs:m,elements:g,nodeId:t}),[h,m,g,t,i]);return so(()=>{i.dataRef.current.floatingContext=_;const e=null==d?void 0:d.nodesRef.current.find(e=>e.id===t);e&&(e.context=_)}),x.useMemo(()=>({...h,context:_,refs:m,elements:g}),[h,m,g,_])}const go="active",_o="selected";function yo(e,t,n){const i=new Map,r="item"===n;let o=e;if(r&&e){const{[go]:t,[_o]:n,...i}=e;o=i}return{..."floating"===n&&{tabIndex:-1,[po]:""},...o,...t.map(t=>{const i=t?t[n]:null;return"function"==typeof i?e?i(e):null:i}).concat(e).reduce((e,t)=>t?(Object.entries(t).forEach(t=>{let[n,o]=t;var s;r&&[go,_o].includes(n)||(0===n.indexOf("on")?(i.has(n)||i.set(n,[]),"function"==typeof o&&(null==(s=i.get(n))||s.push(o),e[n]=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return null==(e=i.get(n))?void 0:e.map(e=>e(...r)).find(e=>void 0!==e)})):e[n]=o)}),e):e,{})}}function vo(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}let bo=x.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});bo.displayName="FloatingContext";let xo=x.createContext(null);function wo({children:e,enabled:t=!0}){let[n,i]=x.useState(null),[r,o]=x.useState(0),s=x.useRef(null),[a,l]=x.useState(null);!function(e){Be(()=>{if(!e)return;let t=new MutationObserver(()=>{let t=window.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let i=parseInt(t);isNaN(i)||n!==i&&(e.style.maxHeight=`${Math.ceil(n)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}(a);let c=t&&null!==n&&null!==a,{to:u="bottom",gap:d=0,offset:h=0,padding:f=0,inner:p}=function(e,t){var n,i,r;let o=So(null!=(n=null==e?void 0:e.gap)?n:"var(--anchor-gap, 0)",t),s=So(null!=(i=null==e?void 0:e.offset)?i:"var(--anchor-offset, 0)",t),a=So(null!=(r=null==e?void 0:e.padding)?r:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:s,padding:a}}(n,a),[m,g="center"]=u.split(" ");Be(()=>{c&&o(0)},[c]);let{refs:_,floatingStyles:y,context:v}=mo({open:c,placement:"selection"===m?"center"===g?"bottom":`bottom-${g}`:"center"===g?`${m}`:`${m}-${g}`,strategy:"absolute",transform:!1,middleware:[eo({mainAxis:"selection"===m?0:d,crossAxis:h}),(E={padding:f},{...Gr(E),options:[E,undefined]}),"selection"!==m&&to({padding:f}),"selection"===m&&p?(S={...p,padding:f,overflowRef:s,offset:r,minItemsVisible:4,referenceOverflowThreshold:f,onFallbackChange(e){var t,n;if(!e)return;let i=v.elements.floating;if(!i)return;let r=parseFloat(getComputedStyle(i).scrollPaddingBottom)||0,s=Math.min(4,i.childElementCount),a=0,l=0;for(let o of null!=(n=null==(t=v.elements.floating)?void 0:t.childNodes)?n:[])if(xt(o)){let e=o.offsetTop,t=e+o.clientHeight+r,n=i.scrollTop,c=n+i.clientHeight;if(!(e>=n&&t<=c)){l=Math.max(0,Math.min(t,c)-Math.max(e,n)),a=o.clientHeight;break}s--}s>=1&&o(e=>{let t=a*s-l+r;return e>=t?e:t})}},{name:"inner",options:S,async fn(e){const{listRef:t,overflowRef:n,onFallbackChange:i,offset:r=0,index:o=0,minItemsVisible:s=4,referenceOverflowThreshold:a=0,scrollRef:l,...c}=lr(S,e),{rects:u,elements:{floating:d}}=e,h=t.current[o],f=(null==l?void 0:l.current)||d,p=d.clientTop||f.clientTop,m=0!==d.clientTop,g=0!==f.clientTop,_=d===f;if(!h)return{};const y={...e,...await eo(-h.offsetTop-d.clientTop-u.reference.height/2-h.offsetHeight/2-r).fn(e)},v=await Wr(vo(y,f.scrollHeight+p+d.clientTop),c),b=await Wr(y,{...c,elementContext:"reference"}),x=tr(0,v.top),w=y.y+x,E=(f.scrollHeight>f.clientHeight?e=>e:nr)(tr(0,f.scrollHeight+(m&&_||g?2*p:0)-x-tr(0,v.bottom)));if(f.style.maxHeight=E+"px",f.scrollTop=x,i){const e=f.offsetHeight<h.offsetHeight*er(s,t.current.length)-1||b.top>=-a||b.bottom>=-a;F.flushSync(()=>i(e))}return n&&(n.current=await Wr(vo({...y,y:w},f.offsetHeight+p+d.clientTop),c)),{y:w}}}):null,no({padding:f,apply({availableWidth:e,availableHeight:t,elements:n}){Object.assign(n.floating.style,{overflow:"auto",maxWidth:`${e}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${t}px)`})}})].filter(Boolean),whileElementsMounted:Hr}),[b=m,w=g]=v.placement.split("-");var S,E;"selection"===m&&(b="selection");let C=x.useMemo(()=>({anchor:[b,w].filter(Boolean).join(" ")}),[b,w]),T=function(e,t){const{open:n,elements:i}=e,{enabled:r=!0,overflowRef:o,scrollRef:s,onChange:a}=t,l=oo(a),c=x.useRef(!1),u=x.useRef(null),d=x.useRef(null);x.useEffect(()=>{if(!r)return;function e(e){if(e.ctrlKey||!t||null==o.current)return;const n=e.deltaY,i=o.current.top>=-.5,r=o.current.bottom>=-.5,s=t.scrollHeight-t.clientHeight,a=n<0?-1:1,c=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!i&&n>0||!r&&n<0?(e.preventDefault(),F.flushSync(()=>{l(e=>e+Math[c](n,s*a))})):/firefox/i.test(function(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}())&&(t.scrollTop+=n))}const t=(null==s?void 0:s.current)||i.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame(()=>{u.current=t.scrollTop,null!=o.current&&(d.current={...o.current})}),()=>{u.current=null,d.current=null,t.removeEventListener("wheel",e)}):void 0},[r,n,i.floating,o,s,l]);const h=x.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const e=(null==s?void 0:s.current)||i.floating;if(o.current&&e&&c.current){if(null!==u.current){const t=e.scrollTop-u.current;(o.current.bottom<-.5&&t<-1||o.current.top<-.5&&t>1)&&F.flushSync(()=>l(e=>e+t))}requestAnimationFrame(()=>{u.current=e.scrollTop})}}}),[i.floating,l,o,s]);return x.useMemo(()=>r?{floating:h}:{},[r,h])}(v,{overflowRef:s,onChange:o}),{getReferenceProps:k,getFloatingProps:A}=function(e){void 0===e&&(e=[]);const t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),i=e.map(e=>null==e?void 0:e.item),r=x.useCallback(t=>yo(t,e,"reference"),t),o=x.useCallback(t=>yo(t,e,"floating"),n),s=x.useCallback(t=>yo(t,e,"item"),i);return x.useMemo(()=>({getReferenceProps:r,getFloatingProps:o,getItemProps:s}),[r,o,s])}([T]),I=Ue(e=>{l(e),_.setFloating(e)});return x.createElement(xo.Provider,{value:i},x.createElement(bo.Provider,{value:{setFloating:I,setReference:_.setReference,styles:y,getReferenceProps:k,getFloatingProps:A,slot:C}},e))}function So(e,t,n=void 0){let i=Fe(),r=Ue((e,t)=>{if(null==e)return[n,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[n,null];let r=Co(e,t);return[r,n=>{let o=Eo(e);{let s=o.map(e=>window.getComputedStyle(t).getPropertyValue(e));i.requestAnimationFrame(function a(){i.nextFrame(a);let l=!1;for(let[e,n]of o.entries()){let i=window.getComputedStyle(t).getPropertyValue(n);if(s[e]!==i){s[e]=i,l=!0;break}}if(!l)return;let c=Co(e,t);r!==c&&(n(c),r=c)})}return i.dispose}]}return[n,null]}),o=x.useMemo(()=>r(e,t)[0],[e,t]),[s=o,a]=x.useState();return Be(()=>{let[n,i]=r(e,t);if(a(n),i)return i(a)},[e,t]),s}function Eo(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let n=t[1].slice(0,e).trim(),i=t[1].slice(e+1).trim();return i?[n,...Eo(i)]:[n]}return[]}function Co(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let i=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),i}xo.displayName="PlacementContext";const To=w.forwardRef(function({children:e,freeze:t},n){let i=ko(t,e);return x.isValidElement(i)?x.cloneElement(i,{ref:n}):w.createElement(w.Fragment,null,i)});function ko(e,t){let[n,i]=x.useState(t);return!e&&n!==t&&i(t),e?n:t}let Ao=x.createContext(null);Ao.displayName="OpenClosedContext";var Io=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Io||{});function Po(){return x.useContext(Ao)}function Lo({value:e,children:t}){return w.createElement(Ao.Provider,{value:e},t)}function Ro({children:e}){return w.createElement(Ao.Provider,{value:null},e)}let Oo=[];!function(){function e(){"loading"!==document.readyState&&((()=>{function e(e){if(!wt(e.target)||e.target===document.body||Oo[0]===e.target)return;let t=e.target;t=t.closest($n),Oo.unshift(null!=t?t:e.target),Oo=Oo.filter(e=>null!=e&&e.isConnected),Oo.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})})(),document.removeEventListener("DOMContentLoaded",e))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",e),e())}();var Mo=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Mo||{});function Do(e,t){let n=t.resolveItems();if(n.length<=0)return null;let i=t.resolveActiveIndex(),r=null!=i?i:-1;switch(e.focus){case 0:for(let e=0;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return i;case 1:-1===r&&(r=n.length);for(let e=r-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return i;case 2:for(let e=r+1;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return i;case 3:for(let e=n.length-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return i;case 4:for(let i=0;i<n.length;++i)if(t.resolveId(n[i],i,n)===e.id)return i;return i;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}function No(e){let t=Ue(e),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,De(()=>{n.current&&t()})}),[t])}let Fo=x.createContext(!1);function Bo(e){return w.createElement(Fo.Provider,{value:e.force},e.children)}let zo=x.Fragment,Uo=nt(function(e,t){let{ownerDocument:n=null,...i}=e,r=x.useRef(null),o=Pt(It(e=>{r.current=e}),t),s=ci(r.current),a=function(e){let t=x.useContext(Fo),n=x.useContext(Vo),[i,r]=x.useState(()=>{var i;if(!t&&null!==n)return null!=(i=n.current)?i:null;if(Pe.isServer)return null;let r=null==e?void 0:e.getElementById("headlessui-portal-root");if(r)return r;if(null===e)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return x.useEffect(()=>{null!==i&&(null!=e&&e.body.contains(i)||null==e||e.body.appendChild(i))},[i,e]),x.useEffect(()=>{t||null!==n&&r(n.current)},[n,r,t]),i}(null!=n?n:s),l=x.useContext(Ho),c=Fe(),u=Ze();return No(()=>{var e;a&&a.childNodes.length<=0&&(null==(e=a.parentElement)||e.removeChild(a))}),a?F.createPortal(w.createElement("div",{"data-headlessui-portal":"",ref:e=>{c.dispose(),l&&e&&c.add(l.register(e))}},u({ourProps:{ref:o},theirProps:i,slot:{},defaultTag:zo,name:"Portal"})),a):null}),jo=x.Fragment,Vo=x.createContext(null),Ho=x.createContext(null),Wo=nt(function(e,t){let n=Pt(t),{enabled:i=!0,ownerDocument:r,...o}=e,s=Ze();return i?w.createElement(Uo,{...o,ownerDocument:r,ref:n}):s({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:zo,name:"Portal"})}),$o=nt(function(e,t){let{target:n,...i}=e,r={ref:Pt(t)},o=Ze();return w.createElement(Vo.Provider,{value:n},o({ourProps:r,theirProps:i,defaultTag:jo,name:"Popover.Group"}))}),Go=Object.assign(Wo,{Group:$o});const qo={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Yo(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}var Xo,Ko=Object.defineProperty,Zo=(e,t,n)=>(((e,t,n)=>{t in e?Ko(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Qo=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qo||{}),Jo=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Jo||{}),es=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(es||{}),ts=((Xo=ts||{})[Xo.OpenCombobox=0]="OpenCombobox",Xo[Xo.CloseCombobox=1]="CloseCombobox",Xo[Xo.GoToOption=2]="GoToOption",Xo[Xo.SetTyping=3]="SetTyping",Xo[Xo.RegisterOption=4]="RegisterOption",Xo[Xo.UnregisterOption=5]="UnregisterOption",Xo[Xo.DefaultToFirstOption=6]="DefaultToFirstOption",Xo[Xo.SetActivationTrigger=7]="SetActivationTrigger",Xo[Xo.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",Xo[Xo.SetInputElement=9]="SetInputElement",Xo[Xo.SetButtonElement=10]="SetButtonElement",Xo[Xo.SetOptionsElement=11]="SetOptionsElement",Xo[Xo.MarkInputAsMoved=12]="MarkInputAsMoved",Xo);function ns(e,t=e=>e){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,i=t(e.options.slice()),r=i.length>0&&null!==i[0].dataRef.current.order?i.sort((e,t)=>e.dataRef.current.order-t.dataRef.current.order):ni(i,e=>e.dataRef.current.domRef.current),o=n?r.indexOf(n):null;return-1===o&&(o=null),{options:r,activeOptionIndex:o}}let is={1(e){var t;if(null!=(t=e.dataRef.current)&&t.disabled||1===e.comboboxState)return e;let n=e.inputElement?qo.Tracked(Yo(e.inputElement)):e.inputPositionState;return{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:n,__demoMode:!1}},0(e){var t,n;if(null!=(t=e.dataRef.current)&&t.disabled||0===e.comboboxState)return e;if(null!=(n=e.dataRef.current)&&n.value){let t=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(-1!==t)return{...e,activeOptionIndex:t,comboboxState:0,__demoMode:!1,inputPositionState:qo.Idle}}return{...e,comboboxState:0,inputPositionState:qo.Idle,__demoMode:!1}},3:(e,t)=>e.isTyping===t.isTyping?e:{...e,isTyping:t.isTyping},2(e,t){var n,i,r,o;if(null!=(n=e.dataRef.current)&&n.disabled||e.optionsElement&&(null==(i=e.dataRef.current)||!i.optionsPropsRef.current.static)&&1===e.comboboxState)return e;if(e.virtual){let{options:n,disabled:i}=e.virtual,o=t.focus===Mo.Specific?t.idx:Do(t,{resolveItems:()=>n,resolveActiveIndex:()=>{var t,r;return null!=(r=null!=(t=e.activeOptionIndex)?t:n.findIndex(e=>!i(e)))?r:null},resolveDisabled:i,resolveId(){throw new Error("Function not implemented.")}}),s=null!=(r=t.trigger)?r:2;return e.activeOptionIndex===o&&e.activationTrigger===s?e:{...e,activeOptionIndex:o,activationTrigger:s,isTyping:!1,__demoMode:!1}}let s=ns(e);if(null===s.activeOptionIndex){let e=s.options.findIndex(e=>!e.dataRef.current.disabled);-1!==e&&(s.activeOptionIndex=e)}let a=t.focus===Mo.Specific?t.idx:Do(t,{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled}),l=null!=(o=t.trigger)?o:2;return e.activeOptionIndex===a&&e.activationTrigger===l?e:{...e,...s,isTyping:!1,activeOptionIndex:a,activationTrigger:l,__demoMode:!1}},4:(e,t)=>{var n,i,r,o;if(null!=(n=e.dataRef.current)&&n.virtual)return{...e,options:[...e.options,t.payload]};let s=t.payload,a=ns(e,e=>(e.push(s),e));null===e.activeOptionIndex&&null!=(r=(i=e.dataRef.current).isSelected)&&r.call(i,t.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(s));let l={...e,...a,activationTrigger:2};return null!=(o=e.dataRef.current)&&o.__demoMode&&void 0===e.dataRef.current.value&&(l.activeOptionIndex=0),l},5:(e,t)=>{var n;if(null!=(n=e.dataRef.current)&&n.virtual)return{...e,options:e.options.filter(e=>e.id!==t.id)};let i=ns(e,e=>{let n=e.findIndex(e=>e.id===t.id);return-1!==n&&e.splice(n,1),e});return{...e,...i,activationTrigger:2}},6:(e,t)=>e.defaultToFirstOption===t.value?e:{...e,defaultToFirstOption:t.value},7:(e,t)=>e.activationTrigger===t.trigger?e:{...e,activationTrigger:t.trigger},8:(e,t)=>{var n,i;if(null===e.virtual)return{...e,virtual:{options:t.options,disabled:null!=(n=t.disabled)?n:()=>!1}};if(e.virtual.options===t.options&&e.virtual.disabled===t.disabled)return e;let r=e.activeOptionIndex;if(null!==e.activeOptionIndex){let n=t.options.indexOf(e.virtual.options[e.activeOptionIndex]);r=-1!==n?n:null}return{...e,activeOptionIndex:r,virtual:{options:t.options,disabled:null!=(i=t.disabled)?i:()=>!1}}},9:(e,t)=>e.inputElement===t.element?e:{...e,inputElement:t.element},10:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},11:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element},12:e=>"Tracked"!==e.inputPositionState.kind?e:{...e,inputPositionState:qo.Moved}},rs=class e extends xn{constructor(e){super(e),Zo(this,"actions",{onChange:e=>{let{onChange:t,compare:n,mode:i,value:r}=this.state.dataRef.current;return Ge(i,{0:()=>null==t?void 0:t(e),1:()=>{let i=r.slice(),o=i.findIndex(t=>n(t,e));return-1===o?i.push(e):i.splice(o,1),null==t?void 0:t(i)}})},registerOption:(e,t)=>(this.send({type:4,payload:{id:e,dataRef:t}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(t.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,t)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:t})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,t;this.send({type:1}),this.send({type:6,value:!1}),null==(t=(e=this.state.dataRef.current).onClose)||t.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(null!==e){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:t}=this.state.options[e];this.actions.onChange(t.current.value)}this.actions.goToOption({focus:Mo.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),Zo(this,"selectors",{activeDescendantId:e=>{var t,n;let i=this.selectors.activeOptionIndex(e);if(null!==i)return e.virtual?null==(n=e.options.find(t=>!t.dataRef.current.disabled&&e.dataRef.current.compare(t.dataRef.current.value,e.virtual.options[i])))?void 0:n.id:null==(t=e.options[i])?void 0:t.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&null===e.activeOptionIndex&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:t,disabled:n}=e.virtual,i=t.findIndex(e=>{var t;return!(null!=(t=null==n?void 0:n(e))&&t)});if(-1!==i)return i}let t=e.options.findIndex(e=>!e.dataRef.current.disabled);if(-1!==t)return t}return e.activeOptionIndex},activeOption:e=>{var t,n;let i=this.selectors.activeOptionIndex(e);return null===i?null:e.virtual?e.virtual.options[null!=i?i:0]:null!=(n=null==(t=e.options[i])?void 0:t.dataRef.current.value)?n:null},isActive:(e,t,n)=>{var i;let r=this.selectors.activeOptionIndex(e);return null!==r&&(e.virtual?r===e.dataRef.current.calculateIndex(t):(null==(i=e.options[r])?void 0:i.id)===n)},shouldScrollIntoView:(e,t,n)=>!(e.virtual||e.__demoMode||0!==e.comboboxState||0===e.activationTrigger||!this.selectors.isActive(e,t,n)),didInputMove:e=>"Moved"===e.inputPositionState.kind});{let e=this.state.id,t=Ln.get(null);this.disposables.add(t.on(An.Push,n=>{!t.selectors.isTop(n,e)&&0===this.state.comboboxState&&this.actions.closeCombobox()})),this.on(0,()=>t.actions.push(e)),this.on(1,()=>t.actions.pop(e))}this.disposables.group(e=>{this.on(1,t=>{t.inputElement&&(e.dispose(),e.add(function(e,t,n){let i=Ne();if("Tracked"===t.kind){let r=function(){o!==Yo(e)&&(i.dispose(),n())},{position:o}=t,s=new ResizeObserver(r);s.observe(e),i.add(()=>s.disconnect()),i.addEventListener(window,"scroll",r,{passive:!0}),i.addEventListener(window,"resize",r)}return()=>i.dispose()}(t.inputElement,t.inputPositionState,()=>{this.send({type:12})})))})})}static new({id:t,virtual:n=null,__demoMode:i=!1}){var r;return new e({id:t,dataRef:{current:{}},comboboxState:i?0:1,isTyping:!1,options:[],virtual:n?{options:n.options,disabled:null!=(r=n.disabled)?r:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:i,inputPositionState:qo.Idle})}reduce(e,t){return Ge(t.type,is,e,t)}};const os=x.createContext(null);function ss(e){let t=x.useContext(os);if(null===t){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,as),t}return t}function as({id:e,virtual:t=null,__demoMode:n=!1}){let i=x.useMemo(()=>rs.new({id:e,virtual:t,__demoMode:n}),[]);return No(()=>i.dispose()),i}let ls=x.createContext(null);function cs(e){let t=x.useContext(ls);if(null===t){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,cs),t}return t}ls.displayName="ComboboxDataContext";let us=x.createContext(null);function ds(e){let t=ss("VirtualProvider"),n=cs("VirtualProvider"),{options:i}=n.virtual,r=Fn(t,e=>e.optionsElement),[o,s]=x.useMemo(()=>{let e=r;if(!e)return[0,0];let t=window.getComputedStyle(e);return[parseFloat(t.paddingBlockStart||t.paddingTop),parseFloat(t.paddingBlockEnd||t.paddingBottom)]},[r]),a=(u={enabled:0!==i.length,scrollPaddingStart:o,scrollPaddingEnd:s,count:i.length,estimateSize:()=>40,getScrollElement:()=>t.state.optionsElement,overscan:12},function({useFlushSync:e=!0,...t}){const n=x.useReducer(()=>({}),{})[1],i={...t,onChange:(i,r)=>{var o;e&&r?F.flushSync(n):n(),null==(o=t.onChange)||o.call(t,i,r)}},[r]=x.useState(()=>new rn(i));return r.setOptions(i),sn(()=>r._didMount(),[]),sn(()=>r._willUpdate()),r}({observeElementRect:Zt,observeElementOffset:en,scrollToFn:nn,...u})),[l,c]=x.useState(0);var u;Be(()=>{c(e=>e+1)},[i]);let d=a.getVirtualItems(),h=Fn(t,e=>e.activationTrigger===es.Pointer),f=Fn(t,t.selectors.activeOptionIndex);return 0===d.length?null:w.createElement(us.Provider,{value:a},w.createElement("div",{style:{position:"relative",width:"100%",height:`${a.getTotalSize()}px`},ref:e=>{e&&(h||null!==f&&i.length>f&&a.scrollToIndex(f))}},d.map(t=>{var n;return w.createElement(x.Fragment,{key:t.key},w.cloneElement(null==(n=e.children)?void 0:n.call(e,{...e.slot,option:i[t.index]}),{key:`${l}-${t.key}`,"data-index":t.index,"aria-setsize":i.length,"aria-posinset":t.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${t.start}px)`,overflowAnchor:"none"}}))})))}let hs=x.Fragment,fs=Xe.RenderStrategy|Xe.Static,ps=nt(function(e,t){let n=x.useId(),i=We(),{value:r,defaultValue:o,onChange:s,form:a,name:l,by:c,invalid:u=!1,disabled:d=i||!1,onClose:h,__demoMode:f=!1,multiple:p=!1,immediate:m=!1,virtual:g=null,nullable:_,...y}=e,v=function(e){let[t]=x.useState(e);return t}(o),[b=(p?[]:void 0),S]=function(e,t,n){let[i,r]=x.useState(n),o=void 0!==e,s=x.useRef(o),a=x.useRef(!1),l=x.useRef(!1);return!o||s.current||a.current?!o&&s.current&&!l.current&&(l.current=!0,s.current=o):(a.current=!0,s.current=o),[o?e:i,Ue(e=>(o||F.flushSync(()=>r(e)),null==t?void 0:t(e)))]}(r,s,v),E=as({id:n,virtual:g,__demoMode:f}),C=x.useRef({static:!1,hold:!1}),T=function(e=an){return x.useCallback((t,n)=>{if("string"==typeof e){let i=e;return(null==t?void 0:t[i])===(null==n?void 0:n[i])}return e(t,n)},[e])}(c),k=Ue(e=>g?null===c?g.options.indexOf(e):g.options.findIndex(t=>T(t,e)):E.state.options.findIndex(t=>T(t.dataRef.current.value,e))),A=x.useCallback(e=>Ge(L.mode,{[Jo.Multi]:()=>b.some(t=>T(t,e)),[Jo.Single]:()=>T(b,e)}),[b]),I=Fn(E,e=>e.virtual),P=Ue(()=>null==h?void 0:h()),L=x.useMemo(()=>({__demoMode:f,immediate:m,optionsPropsRef:C,value:b,defaultValue:v,disabled:d,invalid:u,mode:p?Jo.Multi:Jo.Single,virtual:g?I:null,onChange:S,isSelected:A,calculateIndex:k,compare:T,onClose:P}),[f,m,C,b,v,d,u,p,g,I,S,A,k,T,P]);Be(()=>{var e;g&&E.send({type:ts.UpdateVirtualConfiguration,options:g.options,disabled:null!=(e=g.disabled)?e:null})},[g,null==g?void 0:g.options,null==g?void 0:g.disabled]),Be(()=>{E.state.dataRef.current=L},[L]);let[R,O,M,D]=Fn(E,e=>[e.comboboxState,e.buttonElement,e.inputElement,e.optionsElement]),N=Ln.get(null),B=Fn(N,x.useCallback(e=>N.selectors.isTop(e,n),[N,n]));li(B,[O,M,D],()=>E.actions.closeCombobox());let z=Fn(E,E.selectors.activeOptionIndex),U=Fn(E,E.selectors.activeOption),j=Ve({open:R===Qo.Open,disabled:d,invalid:u,activeIndex:z,activeOption:U,value:b}),[V,H]=function({inherit:e=!1}={}){let t=zt(),[n,i]=x.useState([]),r=e?[t,...n].filter(Boolean):n;return[r.length>0?r.join(" "):void 0,x.useMemo(()=>function(e){let t=Ue(e=>(i(t=>[...t,e]),()=>i(t=>{let n=t.slice(),i=n.indexOf(e);return-1!==i&&n.splice(i,1),n}))),n=x.useMemo(()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value}),[t,e.slot,e.name,e.props,e.value]);return w.createElement(Ft.Provider,{value:n},e.children)},[i])]}(),W=null===t?{}:{ref:t},$=x.useCallback(()=>{if(void 0!==v)return null==S?void 0:S(v)},[S,v]),G=Ze();return w.createElement(H,{value:V,props:{htmlFor:null==M?void 0:M.id},slot:{open:R===Qo.Open,disabled:d}},w.createElement(wo,null,w.createElement(ls.Provider,{value:L},w.createElement(os.Provider,{value:E},w.createElement(Lo,{value:Ge(R,{[Qo.Open]:Io.Open,[Qo.Closed]:Io.Closed})},null!=l&&w.createElement(mt,{disabled:d,data:null!=b?{[l]:b}:{},form:a,onReset:$}),G({ourProps:W,theirProps:y,slot:j,defaultTag:hs,name:"Combobox"}))))))}),ms=nt(function(e,t){let n=ss("Combobox.Button"),i=cs("Combobox.Button"),[r,o]=x.useState(null),s=Pt(t,o,n.actions.setButtonElement),a=x.useId(),{id:l=`headlessui-combobox-button-${a}`,disabled:c=i.disabled||!1,autoFocus:u=!1,...d}=e,[h,f,p]=Fn(n,e=>[e.comboboxState,e.inputElement,e.optionsElement]),m=fi(f);!function(e,{trigger:t,action:n,close:i,select:r}){let o=x.useRef(null),s=x.useRef(null),a=x.useRef(null);si(e&&null!==t,"pointerdown",e=>{vt(null==e?void 0:e.target)&&null!=t&&t.contains(e.target)&&(s.current=e.x,a.current=e.y,o.current=e.timeStamp)}),si(e&&null!==t,"pointerup",e=>{var t,l;let c=o.current;if(null===c||(o.current=null,!wt(e.target))||Math.abs(e.x-(null!=(t=s.current)?t:e.x))<5&&Math.abs(e.y-(null!=(l=a.current)?l:e.y))<5)return;let u=n(e);switch(u.kind){case 0:return;case 1:e.timeStamp-c>200&&(r(u.target),i());break;case 2:i()}},{capture:!0})}(h===Qo.Open,{trigger:r,action:x.useCallback(e=>{if(null!=r&&r.contains(e.target))return di.Ignore;if(null!=f&&f.contains(e.target))return di.Ignore;let t=e.target.closest('[role="option"]:not([data-disabled])');return xt(t)?di.Select(t):null!=p&&p.contains(e.target)?di.Ignore:di.Close},[r,f,p]),close:n.actions.closeCombobox,select:n.actions.selectActiveOption});let g=Ue(e=>{switch(e.key){case Nt.Space:case Nt.Enter:return e.preventDefault(),e.stopPropagation(),n.state.comboboxState===Qo.Closed&&F.flushSync(()=>n.actions.openCombobox()),void m();case Nt.ArrowDown:return e.preventDefault(),e.stopPropagation(),n.state.comboboxState===Qo.Closed&&(F.flushSync(()=>n.actions.openCombobox()),n.state.dataRef.current.value||n.actions.goToOption({focus:Mo.First})),void m();case Nt.ArrowUp:return e.preventDefault(),e.stopPropagation(),n.state.comboboxState===Qo.Closed&&(F.flushSync(()=>n.actions.openCombobox()),n.state.dataRef.current.value||n.actions.goToOption({focus:Mo.Last})),void m();case Nt.Escape:if(n.state.comboboxState!==Qo.Open)return;return e.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&e.stopPropagation(),F.flushSync(()=>n.actions.closeCombobox()),void m();default:return}}),_=function(e){let t=x.useRef(null),n=Ue(n=>{t.current=n.pointerType,!kt(n.currentTarget)&&"mouse"===n.pointerType&&n.button===dn.Left&&(n.preventDefault(),e())}),i=Ue(n=>{"mouse"!==t.current&&(kt(n.currentTarget)||e())});return{onPointerDown:n,onClick:i}}(()=>{n.state.comboboxState===Qo.Open?n.actions.closeCombobox():n.actions.openCombobox(),m()}),y=zt([l]),{isFocusVisible:v,focusProps:b}=ke({autoFocus:u}),{isHovered:w,hoverProps:S}=Te({isDisabled:c}),{pressed:E,pressProps:C}=je({disabled:c}),T=Ve({open:h===Qo.Open,active:E||h===Qo.Open,disabled:c,invalid:i.invalid,value:i.value,hover:w,focus:v}),k=tt({ref:s,id:l,type:pi(e,r),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":null==p?void 0:p.id,"aria-expanded":h===Qo.Open,"aria-labelledby":y,disabled:c||void 0,autoFocus:u,onKeyDown:g},_,b,S,C);return Ze()({ourProps:k,theirProps:d,slot:T,defaultTag:"button",name:"Combobox.Button"})}),gs=nt(function(e,t){var n,i;let r=ss("Combobox.Input"),o=cs("Combobox.Input"),s=x.useId(),a=yt(),{id:l=a||`headlessui-combobox-input-${s}`,onChange:c,displayValue:u,disabled:d=o.disabled||!1,autoFocus:h=!1,type:f="text",...p}=e,m=x.useRef(null),g=Pt(m,t,x.useContext(bo).setReference,r.actions.setInputElement),[_,y]=Fn(r,e=>[e.comboboxState,e.isTyping]),v=Fe(),b=Ue(()=>{r.actions.onChange(null),r.state.optionsElement&&(r.state.optionsElement.scrollTop=0),r.actions.goToOption({focus:Mo.Nothing})}),w=x.useMemo(()=>{var e;return"function"==typeof u&&void 0!==o.value?null!=(e=u(o.value))?e:"":"string"==typeof o.value?o.value:""},[o.value,u]);Ti(([e,t],[n,i])=>{if(r.state.isTyping)return;let o=m.current;o&&((i===Qo.Open&&t===Qo.Closed||e!==n)&&(o.value=e),requestAnimationFrame(()=>{if(r.state.isTyping||!o||Me(o))return;let{selectionStart:e,selectionEnd:t}=o;0===Math.abs((null!=t?t:0)-(null!=e?e:0))&&0===e&&o.setSelectionRange(o.value.length,o.value.length)}))},[w,_,y]),Ti(([e],[t])=>{if(e===Qo.Open&&t===Qo.Closed){if(r.state.isTyping)return;let e=m.current;if(!e)return;let t=e.value,{selectionStart:n,selectionEnd:i,selectionDirection:o}=e;e.value="",e.value=t,null!==o?e.setSelectionRange(n,i,o):e.setSelectionRange(n,i)}},[_]);let S=x.useRef(!1),E=Ue(()=>{S.current=!0}),C=Ue(()=>{v.nextFrame(()=>{S.current=!1})}),T=Ue(e=>{switch(r.actions.setIsTyping(!0),e.key){case Nt.Enter:if(r.state.comboboxState!==Qo.Open||S.current)return;if(e.preventDefault(),e.stopPropagation(),null===r.selectors.activeOptionIndex(r.state))return void r.actions.closeCombobox();r.actions.selectActiveOption(),o.mode===Jo.Single&&r.actions.closeCombobox();break;case Nt.ArrowDown:return e.preventDefault(),e.stopPropagation(),Ge(r.state.comboboxState,{[Qo.Open]:()=>r.actions.goToOption({focus:Mo.Next}),[Qo.Closed]:()=>r.actions.openCombobox()});case Nt.ArrowUp:return e.preventDefault(),e.stopPropagation(),Ge(r.state.comboboxState,{[Qo.Open]:()=>r.actions.goToOption({focus:Mo.Previous}),[Qo.Closed]:()=>{F.flushSync(()=>r.actions.openCombobox()),o.value||r.actions.goToOption({focus:Mo.Last})}});case Nt.Home:if(r.state.comboboxState===Qo.Closed||e.shiftKey)break;return e.preventDefault(),e.stopPropagation(),r.actions.goToOption({focus:Mo.First});case Nt.PageUp:return e.preventDefault(),e.stopPropagation(),r.actions.goToOption({focus:Mo.First});case Nt.End:if(r.state.comboboxState===Qo.Closed||e.shiftKey)break;return e.preventDefault(),e.stopPropagation(),r.actions.goToOption({focus:Mo.Last});case Nt.PageDown:return e.preventDefault(),e.stopPropagation(),r.actions.goToOption({focus:Mo.Last});case Nt.Escape:return r.state.comboboxState!==Qo.Open?void 0:(e.preventDefault(),r.state.optionsElement&&!o.optionsPropsRef.current.static&&e.stopPropagation(),o.mode===Jo.Single&&null===o.value&&b(),r.actions.closeCombobox());case Nt.Tab:if(r.actions.setIsTyping(!1),r.state.comboboxState!==Qo.Open)return;o.mode===Jo.Single&&r.state.activationTrigger!==es.Focus&&r.actions.selectActiveOption(),r.actions.closeCombobox()}}),k=Ue(e=>{null==c||c(e),o.mode===Jo.Single&&""===e.target.value&&b(),r.actions.openCombobox()}),A=Ue(e=>{var t,n,i;let s=null!=(t=e.relatedTarget)?t:Oo.find(t=>t!==e.currentTarget);if(!(null!=(n=r.state.optionsElement)&&n.contains(s)||null!=(i=r.state.buttonElement)&&i.contains(s)||r.state.comboboxState!==Qo.Open))return e.preventDefault(),o.mode===Jo.Single&&null===o.value&&b(),r.actions.closeCombobox()}),I=Ue(e=>{var t,n,i;let s=null!=(t=e.relatedTarget)?t:Oo.find(t=>t!==e.currentTarget);null!=(n=r.state.buttonElement)&&n.contains(s)||null!=(i=r.state.optionsElement)&&i.contains(s)||o.disabled||o.immediate&&r.state.comboboxState!==Qo.Open&&v.microTask(()=>{F.flushSync(()=>r.actions.openCombobox()),r.actions.setActivationTrigger(es.Focus)})}),P=zt(),L=function(){var e,t;return null!=(t=null==(e=x.useContext(Lt))?void 0:e.value)?t:void 0}(),{isFocused:R,focusProps:O}=ke({autoFocus:h}),{isHovered:M,hoverProps:D}=Te({isDisabled:d}),N=Fn(r,e=>e.optionsElement),B=Ve({open:_===Qo.Open,disabled:d,invalid:o.invalid,hover:M,focus:R,autofocus:h}),z=tt({ref:g,id:l,role:"combobox",type:f,"aria-controls":null==N?void 0:N.id,"aria-expanded":_===Qo.Open,"aria-activedescendant":Fn(r,r.selectors.activeDescendantId),"aria-labelledby":P,"aria-describedby":L,"aria-autocomplete":"list",defaultValue:null!=(i=null!=(n=e.defaultValue)?n:void 0!==o.defaultValue?null==u?void 0:u(o.defaultValue):null)?i:o.defaultValue,disabled:d||void 0,autoFocus:h,onCompositionStart:E,onCompositionEnd:C,onKeyDown:T,onChange:k,onFocus:I,onBlur:A},O,D);return Ze()({ourProps:z,theirProps:p,slot:B,defaultTag:"input",name:"Combobox.Input"})}),_s=jt,ys=nt(function(e,t){var n,i,r;let o=x.useId(),{id:s=`headlessui-combobox-options-${o}`,hold:a=!1,anchor:l,portal:c=!1,modal:u=!0,transition:d=!1,...h}=e,f=ss("Combobox.Options"),p=cs("Combobox.Options"),m=function(e){return x.useMemo(()=>e?"string"==typeof e?{to:e}:e:null,[e])}(l);m&&(c=!0);let[g,_]=function(e=null){!1===e&&(e=null),"string"==typeof e&&(e={to:e});let t=x.useContext(xo),n=x.useMemo(()=>e,[JSON.stringify(e,(e,t)=>{var n;return null!=(n=null==t?void 0:t.outerHTML)?n:t})]);Be(()=>{null==t||t(null!=n?n:null)},[t,n]);let i=x.useContext(bo);return x.useMemo(()=>[i.setFloating,e?i.styles:{}],[i.setFloating,e,i.styles])}(m),[y,v]=x.useState(null),b=function(){let{getFloatingProps:e,slot:t}=x.useContext(bo);return x.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}(),S=Pt(t,m?g:null,f.actions.setOptionsElement,v),[E,C,T,k,A]=Fn(f,e=>[e.comboboxState,e.inputElement,e.buttonElement,e.optionsElement,e.activationTrigger]),I=ci(C||T),P=ci(k),L=Po(),[R,O]=Ci(d,y,null!==L?(L&Io.Open)===Io.Open:E===Qo.Open);Wn(R,C,f.actions.closeCombobox),yi(!p.__demoMode&&u&&E===Qo.Open,P),Hn(!p.__demoMode&&u&&E===Qo.Open,{allowed:x.useCallback(()=>[C,T,k],[C,T,k])});let M=!Fn(f,f.selectors.didInputMove)&&R;Be(()=>{var t;p.optionsPropsRef.current.static=null!=(t=e.static)&&t},[p.optionsPropsRef,e.static]),Be(()=>{p.optionsPropsRef.current.hold=a},[p.optionsPropsRef,a]),function(e,{container:t,accept:n,walk:i}){let r=x.useRef(n),o=x.useRef(i);x.useEffect(()=>{r.current=n,o.current=i},[n,i]),Be(()=>{if(!t||!e)return;let n=Le(t);if(!n)return;let i=r.current,s=o.current,a=Object.assign(e=>i(e),{acceptNode:i}),l=n.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,a,!1);for(;l.nextNode();)s(l.currentNode)},[t,e,r,o])}(E===Qo.Open,{container:k,accept:e=>"option"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let D=zt([null==T?void 0:T.id]),N=Ve({open:E===Qo.Open,option:void 0}),F=Ue(()=>{f.actions.setActivationTrigger(es.Pointer)}),B=Ue(e=>{e.preventDefault(),f.actions.setActivationTrigger(es.Pointer)}),z=tt(m?b():{},{"aria-labelledby":D,role:"listbox","aria-multiselectable":p.mode===Jo.Multi||void 0,id:s,ref:S,style:{...h.style,..._,"--input-width":cn(R,C,!0).width,"--button-width":cn(R,T,!0).width},onWheel:A===es.Pointer?void 0:F,onMouseDown:B,...Ei(O)}),U=R&&E===Qo.Closed&&!e.static,j=ko(U,null==(n=p.virtual)?void 0:n.options),V=ko(U,p.value),H=x.useCallback(e=>p.compare(V,e),[p.compare,V]),W=x.useMemo(()=>{if(!p.virtual)return p;if(void 0===j)throw new Error("Missing `options` in virtual mode");return j!==p.virtual.options?{...p,virtual:{...p.virtual,options:j}}:p},[p,j,null==(i=p.virtual)?void 0:i.options]);p.virtual&&Object.assign(h,{children:w.createElement(ls.Provider,{value:W},w.createElement(ds,{slot:N},h.children))});let $=Ze(),G=x.useMemo(()=>p.mode===Jo.Multi?p:{...p,isSelected:H},[p,H]);return w.createElement(Go,{enabled:!!c&&(e.static||R),ownerDocument:I},w.createElement(ls.Provider,{value:G},$({ourProps:z,theirProps:{...h,children:w.createElement(To,{freeze:U},"function"==typeof h.children?null==(r=h.children)?void 0:r.call(h,N):h.children)},slot:N,defaultTag:"div",features:fs,visible:M,name:"Combobox.Options"})))}),vs=nt(function(e,t){var n,i,r;let o=cs("Combobox.Option"),s=ss("Combobox.Option"),a=x.useId(),{id:l=`headlessui-combobox-option-${a}`,value:c,disabled:u=null!=(r=null==(i=null==(n=o.virtual)?void 0:n.disabled)?void 0:i.call(n,c))&&r,order:d=null,...h}=e,[f]=Fn(s,e=>[e.inputElement]),p=fi(f),m=Fn(s,x.useCallback(e=>s.selectors.isActive(e,c,l),[c,l])),g=o.isSelected(c),_=x.useRef(null),y=ze({disabled:u,value:c,domRef:_,order:d}),v=x.useContext(us),b=Pt(t,_,v?v.measureElement:null),w=Ue(()=>{s.actions.setIsTyping(!1),s.actions.onChange(c)});Be(()=>s.actions.registerOption(l,y),[y,l]);let S=Fn(s,x.useCallback(e=>s.selectors.shouldScrollIntoView(e,c,l),[c,l]));Be(()=>{if(S)return Ne().requestAnimationFrame(()=>{var e,t;null==(t=null==(e=_.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})},[S,_]);let E=Ue(e=>{e.preventDefault(),e.button===dn.Left&&(u||(w(),oi()||requestAnimationFrame(()=>p()),o.mode===Jo.Single&&s.actions.closeCombobox()))}),C=Ue(()=>{if(u)return s.actions.goToOption({focus:Mo.Nothing});let e=o.calculateIndex(c);s.actions.goToOption({focus:Mo.Specific,idx:e})}),T=function(){let e=x.useRef([-1,-1]);return{wasMoved(t){let n=vi(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update(t){e.current=vi(t)}}}(),k=Ue(e=>T.update(e)),A=Ue(e=>{if(!T.wasMoved(e)||u||m&&s.state.activationTrigger===es.Pointer)return;let t=o.calculateIndex(c);s.actions.goToOption({focus:Mo.Specific,idx:t},es.Pointer)}),I=Ue(e=>{T.wasMoved(e)&&(u||m&&(o.optionsPropsRef.current.hold||s.state.activationTrigger===es.Pointer&&s.actions.goToOption({focus:Mo.Nothing})))}),P=Ve({active:m,focus:m,selected:g,disabled:u}),L={id:l,ref:b,role:"option",tabIndex:!0===u?void 0:-1,"aria-disabled":!0===u||void 0,"aria-selected":g,disabled:void 0,onMouseDown:E,onFocus:C,onPointerEnter:k,onMouseEnter:k,onPointerMove:A,onMouseMove:A,onPointerLeave:I,onMouseLeave:I};return Ze()({ourProps:L,theirProps:h,slot:P,defaultTag:"div",name:"Combobox.Option"})}),bs=Object.assign(ps,{Input:gs,Button:ms,Label:_s,Options:ys,Option:vs}),xs=x.Fragment,ws=nt(function(e,t){let{...n}=e,i=!1,{isFocusVisible:r,focusProps:o}=ke(),{isHovered:s,hoverProps:a}=Te({isDisabled:i}),{pressed:l,pressProps:c}=je({disabled:i}),u=tt({ref:t},o,a,c),d=Ve({hover:s,focus:r,active:l});return Ze()({ourProps:u,theirProps:n,slot:d,defaultTag:xs,name:"DataInteractive"})}),Ss=x.createContext(null);function Es({children:e,node:t}){let[n,i]=x.useState(null),r=Cs(null!=t?t:n);return w.createElement(Ss.Provider,{value:r},e,null===r&&w.createElement(ht,{features:dt.Hidden,ref:e=>{var t,n;if(e)for(let r of null!=(n=null==(t=Le(e))?void 0:t.querySelectorAll("html > *, body > *"))?n:[])if(r!==document.body&&r!==document.head&&bt(r)&&null!=r&&r.contains(e)){i(r);break}}}))}function Cs(e=null){var t;return null!=(t=x.useContext(Ss))?t:e}function Ts(){let e=function(){let e="undefined"==typeof document;return"useSyncExternalStore"in S&&S.useSyncExternalStore(()=>()=>{},()=>!1,()=>!e)}(),[t,n]=x.useState(Pe.isHandoffComplete);return t&&!1===Pe.isHandoffComplete&&n(!1),x.useEffect(()=>{!0!==t&&n(!0)},[t]),x.useEffect(()=>Pe.handoff(),[]),!e&&t}function ks(){let e=x.useRef(!1);return Be(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var As=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(As||{});function Is(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)bt(n.current)&&t.add(n.current);return t}var Ps=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Ps||{});let Ls=nt(function(e,t){let n=x.useRef(null),i=Pt(n,t),{initialFocus:r,initialFocusFallback:o,containers:s,features:a=15,...l}=e;Ts()||(a=0);let c=ci(n.current);!function(e,{ownerDocument:t}){let n=!!(8&e),i=function(e=!0){let t=x.useRef(Oo.slice());return Ti(([e],[n])=>{!0===n&&!1===e&&De(()=>{t.current.splice(0)}),!1===n&&!0===e&&(t.current=Oo.slice())},[e,Oo,t]),Ue(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(n);Ti(()=>{n||Me(null==t?void 0:t.body)&&ei(i())},[n]),No(()=>{n&&ei(i())})}(a,{ownerDocument:c});let u=function(e,{ownerDocument:t,container:n,initialFocus:i,initialFocusFallback:r}){let o=x.useRef(null),s=zn(!!(1&e),"focus-trap#initial-focus"),a=ks();return Ti(()=>{if(0===e)return;if(!s)return void(null!=r&&r.current&&ei(r.current));let l=n.current;l&&De(()=>{if(!a.current)return;let n=null==t?void 0:t.activeElement;if(null!=i&&i.current){if((null==i?void 0:i.current)===n)return void(o.current=n)}else if(l.contains(n))return void(o.current=n);if(null!=i&&i.current)ei(i.current);else{if(16&e){if(ii(l,Xn.First|Xn.AutoFocus)!==Kn.Error)return}else if(ii(l,Xn.First)!==Kn.Error)return;if(null!=r&&r.current&&(ei(r.current),(null==t?void 0:t.activeElement)===r.current))return}o.current=null==t?void 0:t.activeElement})},[r,s,e]),o}(a,{ownerDocument:c,container:n,initialFocus:r,initialFocusFallback:o});!function(e,{ownerDocument:t,container:n,containers:i,previousActiveElement:r}){let o=ks(),s=!!(4&e);hi(null==t?void 0:t.defaultView,"focus",e=>{if(!s||!o.current)return;let t=Is(i);xt(n.current)&&t.add(n.current);let a=r.current;if(!a)return;let l=e.target;xt(l)?Os(t,l)?(r.current=l,ei(l)):(e.preventDefault(),e.stopPropagation(),ei(a)):ei(r.current)},!0)}(a,{ownerDocument:c,container:n,containers:s,previousActiveElement:u});let d=function(){let e=x.useRef(0);return ai(!0,"keydown",t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)},!0),e}(),h=Ue(e=>{if(!xt(n.current))return;let t=n.current;Ge(d.current,{[As.Forwards]:()=>{ii(t,Xn.First,{skipElements:[e.relatedTarget,o]})},[As.Backwards]:()=>{ii(t,Xn.Last,{skipElements:[e.relatedTarget,o]})}})}),f=zn(!!(2&a),"focus-trap#tab-lock"),p=Fe(),m=x.useRef(!1),g={ref:i,onKeyDown(e){"Tab"==e.key&&(m.current=!0,p.requestAnimationFrame(()=>{m.current=!1}))},onBlur(e){if(!(4&a))return;let t=Is(s);xt(n.current)&&t.add(n.current);let i=e.relatedTarget;wt(i)&&"true"!==i.dataset.headlessuiFocusGuard&&(Os(t,i)||(m.current?ii(n.current,Ge(d.current,{[As.Forwards]:()=>Xn.Next,[As.Backwards]:()=>Xn.Previous})|Xn.WrapAround,{relativeTo:e.target}):wt(e.target)&&ei(e.target)))}},_=Ze();return w.createElement(w.Fragment,null,f&&w.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:dt.Focusable}),_({ourProps:g,theirProps:l,defaultTag:"div",name:"FocusTrap"}),f&&w.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:dt.Focusable}))}),Rs=Object.assign(Ls,{features:Ps});function Os(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Ms(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!st(null!=(t=e.as)?t:Us)||1===w.Children.count(e.children)}let Ds=x.createContext(null);Ds.displayName="TransitionContext";var Ns=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ns||{});let Fs=x.createContext(null);function Bs(e){return"children"in e?Bs(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function zs(e,t){let n=ze(e),i=x.useRef([]),r=ks(),o=Fe(),s=Ue((e,t=Ke.Hidden)=>{let s=i.current.findIndex(({el:t})=>t===e);-1!==s&&(Ge(t,{[Ke.Unmount](){i.current.splice(s,1)},[Ke.Hidden](){i.current[s].state="hidden"}}),o.microTask(()=>{var e;!Bs(i)&&r.current&&(null==(e=n.current)||e.call(n))}))}),a=Ue(e=>{let t=i.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>s(e,Ke.Unmount)}),l=x.useRef([]),c=x.useRef(Promise.resolve()),u=x.useRef({enter:[],leave:[]}),d=Ue((e,n,i)=>{l.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(([t])=>t!==e)),null==t||t.chains.current[n].push([e,new Promise(e=>{l.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(u.current[n].map(([e,t])=>t)).then(()=>e())})]),"enter"===n?c.current=c.current.then(()=>null==t?void 0:t.wait.current).then(()=>i(n)):i(n)}),h=Ue((e,t,n)=>{Promise.all(u.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=l.current.shift())||e()}).then(()=>n(t))});return x.useMemo(()=>({children:i,register:a,unregister:s,onStart:d,onStop:h,wait:c,chains:u}),[a,s,i,d,h,u,c])}Fs.displayName="NestingContext";let Us=x.Fragment,js=Xe.RenderStrategy,Vs=nt(function(e,t){let{show:n,appear:i=!1,unmount:r=!0,...o}=e,s=x.useRef(null),a=Pt(...Ms(e)?[s,t]:null===t?[]:[t]);Ts();let l=Po();if(void 0===n&&null!==l&&(n=(l&Io.Open)===Io.Open),void 0===n)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,u]=x.useState(n?"visible":"hidden"),d=zs(()=>{n||u("hidden")}),[h,f]=x.useState(!0),p=x.useRef([n]);Be(()=>{!1!==h&&p.current[p.current.length-1]!==n&&(p.current.push(n),f(!1))},[p,n]);let m=x.useMemo(()=>({show:n,appear:i,initial:h}),[n,i,h]);Be(()=>{n?u("visible"):!Bs(d)&&null!==s.current&&u("hidden")},[n,d]);let g={unmount:r},_=Ue(()=>{var t;h&&f(!1),null==(t=e.beforeEnter)||t.call(e)}),y=Ue(()=>{var t;h&&f(!1),null==(t=e.beforeLeave)||t.call(e)}),v=Ze();return w.createElement(Fs.Provider,{value:d},w.createElement(Ds.Provider,{value:m},v({ourProps:{...g,as:x.Fragment,children:w.createElement(Hs,{ref:a,...g,...o,beforeEnter:_,beforeLeave:y})},theirProps:{},defaultTag:x.Fragment,features:js,visible:"visible"===c,name:"Transition"})))}),Hs=nt(function(e,t){var n,i;let{transition:r=!0,beforeEnter:o,afterEnter:s,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:p,leaveTo:m,...g}=e,[_,y]=x.useState(null),v=x.useRef(null),b=Ms(e),S=Pt(...b?[v,t,y]:null===t?[]:[t]),E=null==(n=g.unmount)||n?Ke.Unmount:Ke.Hidden,{show:C,appear:T,initial:k}=function(){let e=x.useContext(Ds);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[A,I]=x.useState(C?"visible":"hidden"),P=function(){let e=x.useContext(Fs);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:L,unregister:R}=P;Be(()=>L(v),[L,v]),Be(()=>{if(E===Ke.Hidden&&v.current)return C&&"visible"!==A?void I("visible"):Ge(A,{hidden:()=>R(v),visible:()=>L(v)})},[A,v,L,R,C,E]);let O=Ts();Be(()=>{if(b&&O&&"visible"===A&&null===v.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,A,O,b]);let M=k&&!T,D=T&&C&&k,N=x.useRef(!1),F=zs(()=>{N.current||(I("hidden"),R(v))},P),B=Ue(e=>{N.current=!0;let t=e?"enter":"leave";F.onStart(v,t,e=>{"enter"===e?null==o||o():"leave"===e&&(null==a||a())})}),z=Ue(e=>{let t=e?"enter":"leave";N.current=!1,F.onStop(v,t,e=>{"enter"===e?null==s||s():"leave"===e&&(null==l||l())}),"leave"===t&&!Bs(F)&&(I("hidden"),R(v))});x.useEffect(()=>{b&&r||(B(C),z(C))},[C,b,r]);let U=(()=>!(!r||!b||!O||M))(),[,j]=Ci(U,_,C,{start:B,end:z}),V=it({ref:S,className:(null==(i=$e(g.className,D&&c,D&&u,j.enter&&c,j.enter&&j.closed&&u,j.enter&&!j.closed&&d,j.leave&&f,j.leave&&!j.closed&&p,j.leave&&j.closed&&m,!j.transition&&C&&h))?void 0:i.trim())||void 0,...Ei(j)}),H=0;"visible"===A&&(H|=Io.Open),"hidden"===A&&(H|=Io.Closed),C&&"hidden"===A&&(H|=Io.Opening),!C&&"visible"===A&&(H|=Io.Closing);let W=Ze();return w.createElement(Fs.Provider,{value:F},w.createElement(Lo,{value:H},W({ourProps:V,theirProps:g,defaultTag:Us,features:js,visible:"visible"===A,name:"Transition.Child"})))}),Ws=nt(function(e,t){let n=null!==x.useContext(Ds),i=null!==Po();return w.createElement(w.Fragment,null,!n&&i?w.createElement(Vs,{ref:t,...e}):w.createElement(Hs,{ref:t,...e}))}),$s=Object.assign(Vs,{Child:Ws,Root:Vs});var Gs=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Gs||{}),qs=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(qs||{});let Ys={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},Xs=x.createContext(null);function Ks(e){let t=x.useContext(Xs);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ks),t}return t}function Zs(e,t){return Ge(t.type,Ys,e,t)}Xs.displayName="DialogContext";let Qs=nt(function(e,t){let n=x.useId(),{id:i=`headlessui-dialog-${n}`,open:r,onClose:o,initialFocus:s,role:a="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:u=!1,...d}=e,h=x.useRef(!1);a="dialog"===a||"alertdialog"===a?a:(h.current||(h.current=!0),"dialog");let f=Po();void 0===r&&null!==f&&(r=(f&Io.Open)===Io.Open);let p=x.useRef(null),m=Pt(p,t),g=ci(p.current),_=r?0:1,[y,v]=x.useReducer(Zs,{titleId:null,descriptionId:null,panelRef:x.createRef()}),b=Ue(()=>o(!1)),S=Ue(e=>v({type:0,id:e})),E=!!Ts()&&0===_,[C,T]=function(){let e=x.useContext(Ho),t=x.useRef([]),n=Ue(n=>(t.current.push(n),e&&e.register(n),()=>i(n))),i=Ue(n=>{let i=t.current.indexOf(n);-1!==i&&t.current.splice(i,1),e&&e.unregister(n)}),r=x.useMemo(()=>({register:n,unregister:i,portals:t}),[n,i,t]);return[t,x.useMemo(()=>function({children:e}){return w.createElement(Ho.Provider,{value:r},e)},[r])]}(),k={get current(){var e;return null!=(e=y.panelRef.current)?e:p.current}},A=Cs(),{resolveContainers:I}=function({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let i=Ue(()=>{var i,r;let o=Le(n),s=[];for(let t of e)null!==t&&(bt(t)?s.push(t):"current"in t&&bt(t.current)&&s.push(t.current));if(null!=t&&t.current)for(let e of t.current)s.push(e);for(let e of null!=(i=null==o?void 0:o.querySelectorAll("html > *, body > *"))?i:[])e!==document.body&&e!==document.head&&bt(e)&&"headlessui-portal-root"!==e.id&&(n&&(e.contains(n)||e.contains(null==(r=null==n?void 0:n.getRootNode())?void 0:r.host))||s.some(t=>e.contains(t))||s.push(e));return s});return{resolveContainers:i,contains:Ue(e=>i().some(t=>t.contains(e)))}}({mainTreeNode:A,portals:C,defaultContainers:[k]}),P=null!==f&&(f&Io.Closing)===Io.Closing;Hn(!c&&!P&&E,{allowed:Ue(()=>{var e,t;return[null!=(t=null==(e=p.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:Ue(()=>{var e;return[null!=(e=null==A?void 0:A.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let L=Ln.get(null);Be(()=>{if(E)return L.actions.push(i),()=>L.actions.pop(i)},[L,i,E]);let R=Fn(L,x.useCallback(e=>L.selectors.isTop(e,i),[L,i]));li(R,I,e=>{e.preventDefault(),b()}),function(e,t=("undefined"!=typeof document?document.defaultView:null),n){let i=zn(e,"escape");hi(t,"keydown",e=>{i&&(e.defaultPrevented||e.key===Nt.Escape&&n(e))})}(R,null==g?void 0:g.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),b()}),yi(!c&&!P&&E,g,I),Wn(E,p,b);let[O,M]=function(){let[e,t]=x.useState([]);return[e.length>0?e.join(" "):void 0,x.useMemo(()=>function(e){let n=Ue(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),i=n.indexOf(e);return-1!==i&&n.splice(i,1),n}))),i=x.useMemo(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return w.createElement(Lt.Provider,{value:i},e.children)},[t])]}(),D=x.useMemo(()=>[{dialogState:_,close:b,setTitleId:S,unmount:u},y],[_,b,S,u,y]),N=Ve({open:0===_}),F={ref:m,id:i,role:a,tabIndex:-1,"aria-modal":c?void 0:0===_||void 0,"aria-labelledby":y.titleId,"aria-describedby":O,unmount:u},B=!function(){var e;let[t]=x.useState(()=>"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[n,i]=x.useState(null!=(e=null==t?void 0:t.matches)&&e);return Be(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){i(e.matches)}},[t]),n}(),z=Ps.None;E&&!c&&(z|=Ps.RestoreFocus,z|=Ps.TabLock,l&&(z|=Ps.AutoFocus),B&&(z|=Ps.InitialFocus));let U=Ze();return w.createElement(Ro,null,w.createElement(Bo,{force:!0},w.createElement(Go,null,w.createElement(Xs.Provider,{value:D},w.createElement($o,{target:p},w.createElement(Bo,{force:!1},w.createElement(M,{slot:N},w.createElement(T,null,w.createElement(Rs,{initialFocus:s,initialFocusFallback:p,containers:I,features:z},w.createElement(Ht,{value:b},U({ourProps:F,theirProps:d,slot:N,defaultTag:Js,features:ea,visible:0===_,name:"Dialog"})))))))))))}),Js="div",ea=Xe.RenderStrategy|Xe.Static,ta=nt(function(e,t){let{transition:n=!1,open:i,...r}=e,o=Po(),s=e.hasOwnProperty("open")||null!==o,a=e.hasOwnProperty("onClose");if(!s&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&"boolean"!=typeof e.open)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return void 0===i&&!n||r.static?w.createElement(Es,null,w.createElement(Qs,{ref:t,open:i,...r})):w.createElement(Es,null,w.createElement($s,{show:i,transition:n,unmount:r.unmount},w.createElement(Qs,{ref:t,...r})))}),na=nt(function(e,t){let n=x.useId(),{id:i=`headlessui-dialog-panel-${n}`,transition:r=!1,...o}=e,[{dialogState:s,unmount:a},l]=Ks("Dialog.Panel"),c=Pt(t,l.panelRef),u=Ve({open:0===s}),d={ref:c,id:i,onClick:Ue(e=>{e.stopPropagation()})},h=r?Ws:x.Fragment,f=r?{unmount:a}:{},p=Ze();return w.createElement(h,{...f},p({ourProps:d,theirProps:o,slot:u,defaultTag:"div",name:"Dialog.Panel"}))});nt(function(e,t){let{transition:n=!1,...i}=e,[{dialogState:r,unmount:o}]=Ks("Dialog.Backdrop"),s=Ve({open:0===r}),a={ref:t,"aria-hidden":!0},l=n?Ws:x.Fragment,c=n?{unmount:o}:{},u=Ze();return w.createElement(l,{...c},u({ourProps:a,theirProps:i,slot:s,defaultTag:"div",name:"Dialog.Backdrop"}))});let ia=nt(function(e,t){let n=x.useId(),{id:i=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:o,setTitleId:s}]=Ks("Dialog.Title"),a=Pt(t);x.useEffect(()=>(s(i),()=>s(null)),[i,s]);let l=Ve({open:0===o}),c={ref:a,id:i};return Ze()({ourProps:c,theirProps:r,slot:l,defaultTag:"h2",name:"Dialog.Title"})}),ra=Object.assign(ta,{Panel:na,Title:ia,Description:Mt});var oa;let sa=null!=(oa=w.startTransition)?oa:function(e){e()};var aa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(aa||{}),la=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(la||{});let ca={0:e=>({...e,disclosureState:Ge(e.disclosureState,{0:1,1:0})}),1:e=>1===e.disclosureState?e:{...e,disclosureState:1},2:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},3:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId},4:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},5:(e,t)=>e.panelElement===t.element?e:{...e,panelElement:t.element}},ua=x.createContext(null);function da(e){let t=x.useContext(ua);if(null===t){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,da),t}return t}ua.displayName="DisclosureContext";let ha=x.createContext(null);function fa(e){let t=x.useContext(ha);if(null===t){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,fa),t}return t}ha.displayName="DisclosureAPIContext";let pa=x.createContext(null);function ma(e,t){return Ge(t.type,ca,e,t)}pa.displayName="DisclosurePanelContext";let ga=x.Fragment,_a=Xe.RenderStrategy|Xe.Static,ya=nt(function(e,t){let{defaultOpen:n=!1,...i}=e,r=x.useRef(null),o=Pt(t,It(e=>{r.current=e},void 0===e.as||st(e.as))),s=x.useReducer(ma,{disclosureState:n?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:a,buttonId:l},c]=s,u=Ue(e=>{c({type:1});let t=Le(r.current);if(!t||!l)return;let n=e?wt(e)?e:"current"in e&&wt(e.current)?e.current:t.getElementById(l):t.getElementById(l);null==n||n.focus()}),d=x.useMemo(()=>({close:u}),[u]),h=Ve({open:0===a,close:u}),f={ref:o},p=Ze();return w.createElement(ua.Provider,{value:s},w.createElement(ha.Provider,{value:d},w.createElement(Ht,{value:u},w.createElement(Lo,{value:Ge(a,{0:Io.Open,1:Io.Closed})},p({ourProps:f,theirProps:i,slot:h,defaultTag:ga,name:"Disclosure"})))))}),va=nt(function(e,t){let n=x.useId(),{id:i=`headlessui-disclosure-button-${n}`,disabled:r=!1,autoFocus:o=!1,...s}=e,[a,l]=da("Disclosure.Button"),c=x.useContext(pa),u=null!==c&&c===a.panelId,d=Pt(x.useRef(null),t,Ue(e=>{if(!u)return l({type:4,element:e})}));x.useEffect(()=>{if(!u)return l({type:2,buttonId:i}),()=>{l({type:2,buttonId:null})}},[i,l,u]);let h=Ue(e=>{var t;if(u){if(1===a.disclosureState)return;switch(e.key){case Nt.Space:case Nt.Enter:e.preventDefault(),e.stopPropagation(),l({type:0}),null==(t=a.buttonElement)||t.focus()}}else switch(e.key){case Nt.Space:case Nt.Enter:e.preventDefault(),e.stopPropagation(),l({type:0})}}),f=Ue(e=>{e.key===Nt.Space&&e.preventDefault()}),p=Ue(e=>{var t;kt(e.currentTarget)||r||(u?(l({type:0}),null==(t=a.buttonElement)||t.focus()):l({type:0}))}),{isFocusVisible:m,focusProps:g}=ke({autoFocus:o}),{isHovered:_,hoverProps:y}=Te({isDisabled:r}),{pressed:v,pressProps:b}=je({disabled:r}),w=Ve({open:0===a.disclosureState,hover:_,active:v,disabled:r,focus:m,autofocus:o}),S=pi(e,a.buttonElement),E=tt(u?{ref:d,type:S,disabled:r||void 0,autoFocus:o,onKeyDown:h,onClick:p}:{ref:d,id:i,type:S,"aria-expanded":0===a.disclosureState,"aria-controls":a.panelElement?a.panelId:void 0,disabled:r||void 0,autoFocus:o,onKeyDown:h,onKeyUp:f,onClick:p},g,y,b);return Ze()({ourProps:E,theirProps:s,slot:w,defaultTag:"button",name:"Disclosure.Button"})}),ba=nt(function(e,t){let n=x.useId(),{id:i=`headlessui-disclosure-panel-${n}`,transition:r=!1,...o}=e,[s,a]=da("Disclosure.Panel"),{close:l}=fa("Disclosure.Panel"),[c,u]=x.useState(null),d=Pt(t,Ue(e=>{sa(()=>a({type:5,element:e}))}),u);x.useEffect(()=>(a({type:3,panelId:i}),()=>{a({type:3,panelId:null})}),[i,a]);let h=Po(),[f,p]=Ci(r,c,null!==h?(h&Io.Open)===Io.Open:0===s.disclosureState),m=Ve({open:0===s.disclosureState,close:l}),g={ref:d,id:i,...Ei(p)},_=Ze();return w.createElement(Ro,null,w.createElement(pa.Provider,{value:s.panelId},_({ourProps:g,theirProps:o,slot:m,defaultTag:"div",features:_a,visible:f,name:"Disclosure.Panel"})))}),xa=Object.assign(ya,{Button:va,Panel:ba});var wa=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Sa(e){return"string"==typeof e&&wa.includes(e)}var Ea=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function Ca(e){return"string"==typeof e&&Ea.has(e)}function Ta(e){return"string"==typeof e&&e.startsWith("data-")}function ka(e){if("object"!=typeof e||null===e)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Ca(n)||Ta(n))&&(t[n]=e[n]);return t}function Aa(e){return null==e?null:x.isValidElement(e)&&"object"==typeof e.props&&null!==e.props?ka(e.props):"object"!=typeof e||Array.isArray(e)?null:ka(e)}function Ia(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Ca(n)||Ta(n)||Sa(n))&&(t[n]=e[n]);return t}var Pa=["children","width","height","viewBox","className","style","title","desc"];function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},La.apply(null,arguments)}var Ra=x.forwardRef((e,t)=>{var{children:n,width:i,height:r,viewBox:o,className:s,style:a,title:l,desc:c}=e,u=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Pa),d=o||{width:i,height:r,x:0,y:0},h=$("recharts-surface",s);return x.createElement("svg",La({},Ia(u),{className:h,width:i,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:t}),x.createElement("title",null,l),x.createElement("desc",null,c),n)}),Oa=["children","className"];function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ma.apply(null,arguments)}var Da=x.forwardRef((e,t)=>{var{children:n,className:i}=e,r=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Oa),o=$("recharts-layer",i);return x.createElement("g",Ma({className:o},Ia(r),{ref:t}),n)}),Na=x.createContext(null);function Fa(e){return function(){return e}}const Ba=Math.cos,za=Math.sin,Ua=Math.sqrt,ja=Math.PI,Va=2*ja,Ha=Math.PI,Wa=2*Ha,$a=1e-6,Ga=Wa-$a;function qa(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Ya{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qa:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qa;const n=10**t;return function(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,r,o){this._append`C${+e},${+t},${+n},${+i},${this._x1=+r},${this._y1=+o}`}arcTo(e,t,n,i,r){if(e=+e,t=+t,n=+n,i=+i,(r=+r)<0)throw new Error(`negative radius: ${r}`);let o=this._x1,s=this._y1,a=n-e,l=i-t,c=o-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>$a)if(Math.abs(u*a-l*c)>$a&&r){let h=n-o,f=i-s,p=a*a+l*l,m=h*h+f*f,g=Math.sqrt(p),_=Math.sqrt(d),y=r*Math.tan((Ha-Math.acos((p+d-m)/(2*g*_)))/2),v=y/_,b=y/g;Math.abs(v-1)>$a&&this._append`L${e+v*c},${t+v*u}`,this._append`A${r},${r},0,0,${+(u*h>c*f)},${this._x1=e+b*a},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,n,i,r,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),a=n*Math.sin(i),l=e+s,c=t+a,u=1^o,d=o?i-r:r-i;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>$a||Math.abs(this._y1-c)>$a)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%Wa+Wa),d>Ga?this._append`A${n},${n},0,1,${u},${e-s},${t-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>$a&&this._append`A${n},${n},0,${+(d>=Ha)},${u},${this._x1=e+n*Math.cos(r)},${this._y1=t+n*Math.sin(r)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Xa(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Ya(t)}function Ka(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Za(e){this._context=e}function Qa(e){return new Za(e)}function Ja(e){return e[0]}function el(e){return e[1]}function tl(e,t){var n=Fa(!0),i=null,r=Qa,o=null,s=Xa(a);function a(a){var l,c,u,d=(a=Ka(a)).length,h=!1;for(null==i&&(o=r(u=s())),l=0;l<=d;++l)!(l<d&&n(c=a[l],l,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,l,a),+t(c,l,a));if(u)return o=null,u+""||null}return e="function"==typeof e?e:void 0===e?Ja:Fa(e),t="function"==typeof t?t:void 0===t?el:Fa(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:Fa(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Fa(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:Fa(!!e),a):n},a.curve=function(e){return arguments.length?(r=e,null!=i&&(o=r(i)),a):r},a.context=function(e){return arguments.length?(null==e?i=o=null:o=r(i=e),a):i},a}function nl(e,t,n){var i=null,r=Fa(!0),o=null,s=Qa,a=null,l=Xa(c);function c(c){var u,d,h,f,p,m=(c=Ka(c)).length,g=!1,_=new Array(m),y=new Array(m);for(null==o&&(a=s(p=l())),u=0;u<=m;++u){if(!(u<m&&r(f=c[u],u,c))===g)if(g=!g)d=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=u-1;h>=d;--h)a.point(_[h],y[h]);a.lineEnd(),a.areaEnd()}g&&(_[u]=+e(f,u,c),y[u]=+t(f,u,c),a.point(i?+i(f,u,c):_[u],n?+n(f,u,c):y[u]))}if(p)return a=null,p+""||null}function u(){return tl().defined(r).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?Ja:Fa(+e),t="function"==typeof t?t:Fa(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?el:Fa(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Fa(+t),i=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Fa(+t),c):e},c.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Fa(+e),c):i},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Fa(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Fa(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Fa(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(e){return arguments.length?(r="function"==typeof e?e:Fa(!!e),c):r},c.curve=function(e){return arguments.length?(s=e,null!=o&&(a=s(o)),c):s},c.context=function(e){return arguments.length?(null==e?o=a=null:a=s(o=e),c):o},c}Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class il{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const rl={draw(e,t){const n=Ua(t/ja);e.moveTo(n,0),e.arc(0,0,n,0,Va)}},ol={draw(e,t){const n=Ua(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},sl=Ua(1/3),al=2*sl,ll={draw(e,t){const n=Ua(t/al),i=n*sl;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},cl={draw(e,t){const n=Ua(t),i=-n/2;e.rect(i,i,n,n)}},ul=za(ja/10)/za(7*ja/10),dl=za(Va/10)*ul,hl=-Ba(Va/10)*ul,fl={draw(e,t){const n=Ua(.8908130915292852*t),i=dl*n,r=hl*n;e.moveTo(0,-n),e.lineTo(i,r);for(let o=1;o<5;++o){const t=Va*o/5,s=Ba(t),a=za(t);e.lineTo(a*n,-s*n),e.lineTo(s*i-a*r,a*i+s*r)}e.closePath()}},pl=Ua(3),ml={draw(e,t){const n=-Ua(t/(3*pl));e.moveTo(0,2*n),e.lineTo(-pl*n,-n),e.lineTo(pl*n,-n),e.closePath()}},gl=-.5,_l=Ua(3)/2,yl=1/Ua(12),vl=3*(yl/2+1),bl={draw(e,t){const n=Ua(t/vl),i=n/2,r=n*yl,o=i,s=n*yl+n,a=-o,l=s;e.moveTo(i,r),e.lineTo(o,s),e.lineTo(a,l),e.lineTo(gl*i-_l*r,_l*i+gl*r),e.lineTo(gl*o-_l*s,_l*o+gl*s),e.lineTo(gl*a-_l*l,_l*a+gl*l),e.lineTo(gl*i+_l*r,gl*r-_l*i),e.lineTo(gl*o+_l*s,gl*s-_l*o),e.lineTo(gl*a+_l*l,gl*l-_l*a),e.closePath()}};function xl(){}function wl(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Sl(e){this._context=e}function El(e){this._context=e}function Cl(e){this._context=e}function Tl(e){this._context=e}function kl(e){return e<0?-1:1}function Al(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(kl(o)+kl(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Il(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Pl(e,t,n){var i=e._x0,r=e._y0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,r+a*t,o-a,s-a*n,o,s)}function Ll(e){this._context=e}function Rl(e){this._context=new Ol(e)}function Ol(e){this._context=e}function Ml(e){this._context=e}function Dl(e){var t,n,i=e.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<i-1;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=r[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(r[i-1]=s[i-1]/o[i-1],t=i-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[i-1]=(e[i]+r[i-1])/2,t=0;t<i-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function Nl(e,t){this._context=e,this._t=t}function Fl(e,t){if((r=e.length)>1)for(var n,i,r,o=1,s=e[t[0]],a=s.length;o<r;++o)for(i=s,s=e[t[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Bl(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function zl(e,t){return e[t]}function Ul(e){const t=[];return t.key=e,t}Sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wl(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},El.prototype={areaStart:xl,areaEnd:xl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wl(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:wl(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Tl.prototype={areaStart:xl,areaEnd:xl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pl(this,this._t0,Il(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pl(this,Il(this,n=Al(this,e,t)),n);break;default:Pl(this,this._t0,n=Al(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Rl.prototype=Object.create(Ll.prototype)).point=function(e,t){Ll.prototype.point.call(this,t,e)},Ol.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},Ml.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=Dl(e),r=Dl(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Nl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var jl,Vl={},Hl={};function Wl(){return jl||(jl=1,e=Hl,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isUnsafeProperty=function(e){return"__proto__"===e}),Hl;var e}var $l,Gl={};function ql(){return $l||($l=1,e=Gl,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}),Gl;var e}var Yl,Xl={};function Kl(){return Yl||(Yl=1,e=Xl,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toKey=function(e){var t;return"string"==typeof e||"symbol"==typeof e?e:Object.is(null==(t=null==e?void 0:e.valueOf)?void 0:t.call(e),-0)?"-0":String(e)}),Xl;var e}var Zl,Ql,Jl,ec,tc,nc={},ic={};function rc(){return Zl||(Zl=1,e=ic,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return"0"===n&&Object.is(Number(t),-0)?"-0":n}),ic;var e}function oc(){return Ql||(Ql=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rc(),n=Kl();e.toPath=function(e){if(Array.isArray(e))return e.map(n.toKey);if("symbol"==typeof e)return[e];const i=[],r=(e=t.toString(e)).length;if(0===r)return i;let o=0,s="",a="",l=!1;for(46===e.charCodeAt(0)&&(i.push(""),o++);o<r;){const t=e[o];a?"\\"===t&&o+1<r?(o++,s+=e[o]):t===a?a="":s+=t:l?'"'===t||"'"===t?a=t:"]"===t?(l=!1,i.push(s),s=""):s+=t:"["===t?(l=!0,s&&(i.push(s),s="")):"."===t?s&&(i.push(s),s=""):s+=t,o++}return s&&i.push(s),i}}(nc)),nc}function sc(){return Jl||(Jl=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wl(),n=ql(),i=Kl(),r=oc();e.get=function e(o,s,a){if(null==o)return a;switch(typeof s){case"string":{if(t.isUnsafeProperty(s))return a;const i=o[s];return void 0===i?n.isDeepKey(s)?e(o,r.toPath(s),a):a:i}case"number":case"symbol":{"number"==typeof s&&(s=i.toKey(s));const e=o[s];return void 0===e?a:e}default:{if(Array.isArray(s))return function(e,n,i){if(0===n.length)return i;let r=e;for(let o=0;o<n.length;o++){if(null==r)return i;if(t.isUnsafeProperty(n[o]))return i;r=r[n[o]]}return void 0===r?i:r}(o,s,a);if(s=Object.is(null==s?void 0:s.valueOf(),-0)?"-0":String(s),t.isUnsafeProperty(s))return a;const e=o[s];return void 0===e?a:e}}}}(Vl)),Vl}function ac(){return tc?ec:(tc=1,ec=sc().get)}const lc=a(ac());var cc=e=>0===e?0:e>0?1:-1,uc=e=>"number"==typeof e&&e!=+e,dc=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,hc=e=>("number"==typeof e||e instanceof Number)&&!uc(e),fc=e=>hc(e)||"string"==typeof e,pc=0,mc=e=>{var t=++pc;return"".concat(e||"").concat(t)},gc=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!hc(e)&&"string"!=typeof e)return i;if(dc(e)){if(null==t)return i;var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return uc(n)&&(n=i),r&&null!=t&&n>t&&(n=t),n},_c=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},i=0;i<t;i++){if(n[e[i]])return!0;n[e[i]]=!0}return!1};function yc(e,t,n){return hc(e)&&hc(t)?e+n*(t-e):t}function vc(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):lc(e,t))===n)}var bc=e=>null==e,xc=e=>bc(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function wc(e){return null!=e}function Sc(){}var Ec=["type","size","sizeType"];function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cc.apply(null,arguments)}function Tc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tc(Object(n),!0).forEach(function(t){Ac(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ac(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ic={symbolCircle:rl,symbolCross:ol,symbolDiamond:ll,symbolSquare:cl,symbolStar:fl,symbolTriangle:ml,symbolWye:bl},Pc=Math.PI/180,Lc=e=>{var{type:t="circle",size:n=64,sizeType:i="area"}=e,r=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Ec),o=kc(kc({},r),{},{type:t,size:n,sizeType:i}),s="circle";"string"==typeof t&&(s=t);var{className:a,cx:l,cy:c}=o,u=Ia(o);return hc(l)&&hc(c)&&hc(n)?x.createElement("path",Cc({},u,{className:$("recharts-symbols",a),transform:"translate(".concat(l,", ").concat(c,")"),d:(()=>{var e=(e=>{var t="symbol".concat(xc(e));return Ic[t]||rl})(s),t=function(e,t){let n=null,i=Xa(r);function r(){let r;if(n||(n=r=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:Fa(e||rl),t="function"==typeof t?t:Fa(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:Fa(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:Fa(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(e).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var i=18*Pc;return 1.25*e*e*(Math.tan(i)-Math.tan(2*i)*Math.tan(i)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,i,s)),r=t();if(null!==r)return r})()})):null};Lc.registerSymbol=(e,t)=>{Ic["symbol".concat(xc(e))]=t};var Rc=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Oc=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(x.isValidElement(e)&&(n=e.props),"object"!=typeof n&&"function"!=typeof n)return null;var i={};return Object.keys(n).forEach(e=>{Sa(e)&&(i[e]=t=>n[e](n,t))}),i};function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Dc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nc(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(n),!0).forEach(function(t){Dc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),i=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==i[t]&&(e[t]=i[t]),e),n)}var Fc,Bc={},zc={};function Uc(){return Fc||(Fc=1,e=zc,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.uniqBy=function(e,t){const n=new Map;for(let i=0;i<e.length;i++){const r=e[i],o=t(r);n.has(o)||n.set(o,r)}return Array.from(n.values())}),zc;var e}var jc,Vc={};function Hc(){return jc||(jc=1,e=Vc,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.identity=function(e){return e}),Vc;var e}var Wc,$c,Gc={},qc={},Yc={};function Xc(){return Wc||(Wc=1,e=Yc,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}),Yc;var e}function Kc(){return $c||($c=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xc();e.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&t.isLength(e.length)}}(qc)),qc}var Zc,Qc,Jc={};function eu(){return Zc||(Zc=1,e=Jc,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObjectLike=function(e){return"object"==typeof e&&null!==e}),Jc;var e}function tu(){return Qc||(Qc=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kc(),n=eu();e.isArrayLikeObject=function(e){return n.isObjectLike(e)&&t.isArrayLike(e)}}(Gc)),Gc}var nu,iu={},ru={};function ou(){return nu||(nu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sc();e.property=function(e){return function(n){return t.get(n,e)}}}(ru)),ru}var su,au={},lu={},cu={},uu={};function du(){return su||(su=1,e=uu,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}),uu;var e}var hu,fu={};function pu(){return hu||(hu=1,e=fu,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}),fu;var e}var mu,gu,_u,yu={};function vu(){return mu||(mu=1,e=yu,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}),yu;var e}function bu(){return gu||(gu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=du(),n=pu(),i=vu();function r(e,a,l,c){if(a===e)return!0;switch(typeof a){case"object":return function(e,t,i,r){if(null==t)return!0;if(Array.isArray(t))return o(e,t,i,r);if(t instanceof Map)return function(e,t,n,i){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[r,o]of t.entries())if(!1===n(e.get(r),o,r,e,t,i))return!1;return!0}(e,t,i,r);if(t instanceof Set)return s(e,t,i,r);const a=Object.keys(t);if(null==e)return 0===a.length;if(0===a.length)return!0;if(null==r?void 0:r.has(t))return r.get(t)===e;null==r||r.set(t,e);try{for(let o=0;o<a.length;o++){const s=a[o];if(!n.isPrimitive(e)&&!(s in e))return!1;if(void 0===t[s]&&void 0!==e[s])return!1;if(null===t[s]&&null!==e[s])return!1;if(!i(e[s],t[s],s,e,t,r))return!1}return!0}finally{null==r||r.delete(t)}}(e,a,l,c);case"function":return Object.keys(a).length>0?r(e,{...a},l,c):i.eq(e,a);default:return t.isObject(e)?"string"!=typeof a||""===a:i.eq(e,a)}}function o(e,t,n,i){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const r=new Set;for(let o=0;o<t.length;o++){const s=t[o];let a=!1;for(let l=0;l<e.length;l++){if(r.has(l))continue;let c=!1;if(n(e[l],s,o,e,t,i)&&(c=!0),c){r.add(l),a=!0;break}}if(!a)return!1}return!0}function s(e,t,n,i){return 0===t.size||e instanceof Set&&o([...e],[...t],n,i)}e.isMatchWith=function e(t,n,i){return"function"!=typeof i?e(t,n,()=>{}):r(t,n,function e(t,n,o,s,a,l){const c=i(t,n,o,s,a,l);return void 0!==c?Boolean(c):r(t,n,e,l)},new Map)},e.isSetMatch=s}(cu)),cu}function xu(){return _u||(_u=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bu();e.isMatch=function(e,n){return t.isMatchWith(e,n,()=>{})}}(lu)),lu}var wu,Su={},Eu={},Cu={};function Tu(){return wu||(wu=1,e=Cu,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}),Cu;var e}var ku,Au={};function Iu(){return ku||(ku=1,e=Au,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}),Au;var e}var Pu,Lu={};function Ru(){return Pu||(Pu=1,e=Lu,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.argumentsTag="[object Arguments]",e.arrayBufferTag="[object ArrayBuffer]",e.arrayTag="[object Array]",e.bigInt64ArrayTag="[object BigInt64Array]",e.bigUint64ArrayTag="[object BigUint64Array]",e.booleanTag="[object Boolean]",e.dataViewTag="[object DataView]",e.dateTag="[object Date]",e.errorTag="[object Error]",e.float32ArrayTag="[object Float32Array]",e.float64ArrayTag="[object Float64Array]",e.functionTag="[object Function]",e.int16ArrayTag="[object Int16Array]",e.int32ArrayTag="[object Int32Array]",e.int8ArrayTag="[object Int8Array]",e.mapTag="[object Map]",e.numberTag="[object Number]",e.objectTag="[object Object]",e.regexpTag="[object RegExp]",e.setTag="[object Set]",e.stringTag="[object String]",e.symbolTag="[object Symbol]",e.uint16ArrayTag="[object Uint16Array]",e.uint32ArrayTag="[object Uint32Array]",e.uint8ArrayTag="[object Uint8Array]",e.uint8ClampedArrayTag="[object Uint8ClampedArray]"),Lu;var e}var Ou,Mu,Du,Nu,Fu={};function Bu(){return Ou||(Ou=1,e=Fu,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}),Fu;var e}function zu(){return Mu||(Mu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tu(),n=Iu(),i=Ru(),r=pu(),o=Bu();function s(e,t,l,c=new Map,u=void 0){const d=null==u?void 0:u(e,t,l,c);if(void 0!==d)return d;if(r.isPrimitive(e))return e;if(c.has(e))return c.get(e);if(Array.isArray(e)){const t=new Array(e.length);c.set(e,t);for(let n=0;n<e.length;n++)t[n]=s(e[n],n,l,c,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;c.set(e,t);for(const[n,i]of e)t.set(n,s(i,n,l,c,u));return t}if(e instanceof Set){const t=new Set;c.set(e,t);for(const n of e)t.add(s(n,void 0,l,c,u));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);c.set(e,t);for(let n=0;n<e.length;n++)t[n]=s(e[n],n,l,c,u);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return c.set(e,t),a(t,e,l,c,u),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return c.set(e,t),a(t,e,l,c,u),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return c.set(e,t),a(t,e,l,c,u),t}if(e instanceof Error){const t=new e.constructor;return c.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,a(t,e,l,c,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return c.set(e,t),a(t,e,l,c,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return c.set(e,t),a(t,e,l,c,u),t}if(e instanceof String){const t=new String(e.valueOf());return c.set(e,t),a(t,e,l,c,u),t}if("object"==typeof e&&function(e){switch(n.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return c.set(e,t),a(t,e,l,c,u),t}return e}function a(e,n,i=e,r,o){const a=[...Object.keys(n),...t.getSymbols(n)];for(let t=0;t<a.length;t++){const l=a[t],c=Object.getOwnPropertyDescriptor(e,l);(null==c||c.writable)&&(e[l]=s(n[l],l,i,r,o))}}e.cloneDeepWith=function(e,t){return s(e,void 0,e,new Map,t)},e.cloneDeepWithImpl=s,e.copyProperties=a}(Eu)),Eu}function Uu(){return Du||(Du=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zu();e.cloneDeep=function(e){return t.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}}(Su)),Su}function ju(){return Nu||(Nu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xu(),n=Uu();e.matches=function(e){return e=n.cloneDeep(e),n=>t.isMatch(n,e)}}(au)),au}var Vu,Hu,Wu={},$u={},Gu={};function qu(){return Vu||(Vu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zu(),n=Ru();e.cloneDeepWith=function(e,i){return t.cloneDeepWith(e,(r,o,s,a)=>{const l=null==i?void 0:i(r,o,s,a);if(void 0!==l)return l;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case n.numberTag:case n.stringTag:case n.booleanTag:{const n=new e.constructor(null==e?void 0:e.valueOf());return t.copyProperties(n,e),n}case n.argumentsTag:{const n={};return t.copyProperties(n,e),n.length=e.length,n[Symbol.iterator]=e[Symbol.iterator],n}default:return}})}}(Gu)),Gu}function Yu(){return Hu||(Hu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qu();e.cloneDeep=function(e){return t.cloneDeepWith(e)}}($u)),$u}var Xu,Ku={},Zu={};function Qu(){return Xu||(Xu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;e.isIndex=function(e,n=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<n;case"symbol":return!1;case"string":return t.test(e)}}}(Zu)),Zu}var Ju,ed,td,nd,id,rd,od,sd={};function ad(){return Ju||(Ju=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iu();e.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===t.getTag(e)}}(sd)),sd}function ld(){return ed||(ed=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ql(),n=Qu(),i=ad(),r=oc();e.has=function(e,o){let s;if(s=Array.isArray(o)?o:"string"==typeof o&&t.isDeepKey(o)&&null==(null==e?void 0:e[o])?r.toPath(o):[o],0===s.length)return!1;let a=e;for(let t=0;t<s.length;t++){const e=s[t];if(!(null!=a&&Object.hasOwn(a,e)||(Array.isArray(a)||i.isArguments(a))&&n.isIndex(e)&&e<a.length))return!1;a=a[e]}return!0}}(Ku)),Ku}function cd(){return td||(td=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xu(),n=Kl(),i=Yu(),r=sc(),o=ld();e.matchesProperty=function(e,s){switch(typeof e){case"object":Object.is(null==e?void 0:e.valueOf(),-0)&&(e="-0");break;case"number":e=n.toKey(e)}return s=i.cloneDeep(s),function(n){const i=r.get(n,e);return void 0===i?o.has(n,e):void 0===s?void 0===i:t.isMatch(i,s)}}}(Wu)),Wu}function ud(){return nd||(nd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hc(),n=ou(),i=ju(),r=cd();e.iteratee=function(e){if(null==e)return t.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?r.matchesProperty(e[0],e[1]):i.matches(e);case"string":case"symbol":case"number":return n.property(e)}}}(iu)),iu}function dd(){return od?rd:(od=1,rd=(id||(id=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uc(),n=Hc(),i=tu(),r=ud();e.uniqBy=function(e,o=n.identity){return i.isArrayLikeObject(e)?t.uniqBy(Array.from(e),r.iteratee(o)):[]}}(Bc)),Bc).uniqBy)}const hd=a(dd());var fd,pd,md,gd,_d={exports:{}},yd={},vd={exports:{}},bd={};var xd=(gd||(gd=1,_d.exports=function(){if(md)return yd;md=1;var e=v(),t=(pd||(pd=1,vd.exports=function(){if(fd)return bd;fd=1;var e=v(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,i=e.useEffect,r=e.useLayoutEffect,o=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!t(e,i)}catch(r){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),l=n({inst:{value:a,getSnapshot:t}}),c=l[0].inst,u=l[1];return r(function(){c.value=a,c.getSnapshot=t,s(c)&&u({inst:c})},[e,a,t]),i(function(){return s(c)&&u({inst:c}),e(function(){s(c)&&u({inst:c})})},[e]),o(a),a};return bd.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,bd}()),vd.exports),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=t.useSyncExternalStore,r=e.useRef,o=e.useEffect,s=e.useMemo,a=e.useDebugValue;return yd.useSyncExternalStoreWithSelector=function(e,t,l,c,u){var d=r(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=s(function(){function e(e){if(!o){if(o=!0,i=e,e=c(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return r=t}return r=e}if(t=r,n(i,e))return t;var s=c(e);return void 0!==u&&u(t,s)?(i=e,t):(i=e,r=s)}var i,r,o=!1,s=void 0===l?null:l;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,l,c,u]);var f=i(e,d[0],d[1]);return o(function(){h.hasValue=!0,h.value=f},[f]),a(f),f},yd}()),_d.exports),wd=x.createContext(null),Sd=e=>e,Ed=()=>{var e=x.useContext(wd);return e?e.store.dispatch:Sd},Cd=()=>{},Td=()=>Cd,kd=(e,t)=>e===t;function Ad(e){var t=x.useContext(wd);return xd.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Td,t?t.store.getState:Cd,t?t.store.getState:Cd,t?e:Cd,kd)}var Id=e=>Array.isArray(e)?e:[e];var Pd="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Ld(){return{s:0,v:void 0,o:null,p:null}}function Rd(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let r,o=0;function s(){var t;let s=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=s.o;null===e&&(s.o=e=new WeakMap);const n=e.get(t);void 0===n?(s=Ld(),e.set(t,s)):s=n}else{let e=s.p;null===e&&(s.p=e=new Map);const n=e.get(t);void 0===n?(s=Ld(),e.set(t,s)):s=n}}const l=s;let c;if(1===s.s)c=s.v;else if(c=e.apply(null,arguments),o++,i){const e=(null==(t=null==r?void 0:r.deref)?void 0:t.call(r))??r;null!=e&&i(e,c)&&(c=e,0!==o&&o--),r="object"==typeof c&&null!==c||"function"==typeof c?new Pd(c):c}return l.s=1,l.v=c,c}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Od(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,i=(...e)=>{let t,i=0,r=0,o={},s=e.pop();"object"==typeof s&&(o=s,s=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const a={...n,...o},{memoize:l,memoizeOptions:c=[],argsMemoize:u=Rd,argsMemoizeOptions:d=[]}=a,h=Id(c),f=Id(d),p=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const n=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),m=l(function(){return i++,s.apply(null,arguments)},...h),g=u(function(){r++;const e=function(e,t){const n=[],{length:i}=e;for(let r=0;r<i;r++)n.push(e[r].apply(null,t));return n}(p,arguments);return t=m.apply(null,e),t},...f);return Object.assign(g,{resultFunc:s,memoizedResultFunc:m,dependencies:p,dependencyRecomputations:()=>r,resetDependencyRecomputations:()=>{r=0},lastResult:()=>t,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:l,argsMemoize:u})};return Object.assign(i,{withTypes:()=>i}),i}var Md,Dd=Od(Rd),Nd=Object.assign((e,t=Dd)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map(t=>e[t]),(...e)=>e.reduce((e,t,i)=>(e[n[i]]=t,e),{}))},{withTypes:()=>Nd}),Fd={},Bd={},zd={};function Ud(){return Md||(Md=1,function(e){function t(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.compareValues=(e,n,i)=>{if(e!==n){const r=t(e),o=t(n);if(r===o&&0===r){if(e<n)return"desc"===i?1:-1;if(e>n)return"desc"===i?-1:1}return"desc"===i?o-r:r-o}return 0}}(zd)),zd}var jd,Vd,Hd,Wd={},$d={};function Gd(){return jd||(jd=1,e=$d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}),$d;var e}function qd(){return Vd||(Vd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gd(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.isKey=function(e,r){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!t.isSymbol(e))||"string"==typeof e&&(i.test(e)||!n.test(e))||null!=r&&Object.hasOwn(r,e))}}(Wd)),Wd}function Yd(){return Hd||(Hd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ud(),n=qd(),i=oc();e.orderBy=function(e,r,o,s){if(null==e)return[];o=s?void 0:o,Array.isArray(e)||(e=Object.values(e)),Array.isArray(r)||(r=null==r?[null]:[r]),0===r.length&&(r=[null]),Array.isArray(o)||(o=null==o?[]:[o]),o=o.map(e=>String(e));const a=(e,t)=>{let n=e;for(let i=0;i<t.length&&null!=n;++i)n=n[t[i]];return n},l=r.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||n.isKey(e)?e:{key:e,path:i.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:a(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?a(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,n)=>{for(let i=0;i<l.length;i++){const r=t.compareValues(e.criteria[i],n.criteria[i],o[i]);if(0!==r)return r}return 0}).map(e=>e.original)}}(Bd)),Bd}var Xd,Kd={};function Zd(){return Xd||(Xd=1,e=Kd,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.flatten=function(e,t=1){const n=[],i=Math.floor(t),r=(e,t)=>{for(let o=0;o<e.length;o++){const s=e[o];Array.isArray(s)&&t<i?r(s,t+1):n.push(s)}};return r(e,0),n}),Kd;var e}var Qd,Jd,eh,th,nh={};function ih(){return Qd||(Qd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qu(),n=Kc(),i=du(),r=vu();e.isIterateeCall=function(e,o,s){return!!i.isObject(s)&&!!("number"==typeof o&&n.isArrayLike(s)&&t.isIndex(o)&&o<s.length||"string"==typeof o&&o in s)&&r.eq(s[o],e)}}(nh)),nh}function rh(){return th?eh:(th=1,eh=(Jd||(Jd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yd(),n=Zd(),i=ih();e.sortBy=function(e,...r){const o=r.length;return o>1&&i.isIterateeCall(e,r[0],r[1])?r=[]:o>2&&i.isIterateeCall(r[0],r[1],r[2])&&(r=[r[0]]),t.orderBy(e,n.flatten(r),["asc"])}}(Fd)),Fd).sortBy)}const oh=a(rh());var sh=e=>e.legend.settings;function ah(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Dd([e=>e.legend.payload,sh],(e,t)=>{var{itemSorter:n}=t,i=e.flat(1);return n?oh(i,n):i});var lh=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),ch=()=>Math.random().toString(36).substring(7).split("").join("."),uh={INIT:`@@redux/INIT${ch()}`,REPLACE:`@@redux/REPLACE${ch()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ch()}`};function dh(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function hh(e,t,n){if("function"!=typeof e)throw new Error(ah(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(ah(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(ah(1));return n(hh)(e,t)}let i=e,r=t,o=new Map,s=o,a=0,l=!1;function c(){s===o&&(s=new Map,o.forEach((e,t)=>{s.set(t,e)}))}function u(){if(l)throw new Error(ah(3));return r}function d(e){if("function"!=typeof e)throw new Error(ah(4));if(l)throw new Error(ah(5));let t=!0;c();const n=a++;return s.set(n,e),function(){if(t){if(l)throw new Error(ah(6));t=!1,c(),s.delete(n),o=null}}}function h(e){if(!dh(e))throw new Error(ah(7));if(void 0===e.type)throw new Error(ah(8));if("string"!=typeof e.type)throw new Error(ah(17));if(l)throw new Error(ah(9));try{l=!0,r=i(r,e)}finally{l=!1}return(o=s).forEach(e=>{e()}),e}return h({type:uh.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(ah(10));i=e,h({type:uh.REPLACE})},[lh]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(ah(11));function n(){const e=t;e.next&&e.next(u())}return n(),{unsubscribe:e(n)}},[lh](){return this}}}}}function fh(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const i=t[o];"function"==typeof e[i]&&(n[i]=e[i])}const i=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:uh.INIT}))throw new Error(ah(12));if(void 0===n(void 0,{type:uh.PROBE_UNKNOWN_ACTION()}))throw new Error(ah(13))})}(n)}catch(qe){r=qe}return function(e={},t){if(r)throw r;let o=!1;const s={};for(let r=0;r<i.length;r++){const a=i[r],l=n[a],c=e[a],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(ah(14));s[a]=u,o=o||u!==c}return o=o||i.length!==Object.keys(e).length,o?s:e}}function ph(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function mh(e){return dh(e)&&"type"in e&&"string"==typeof e.type}var gh=Symbol.for("immer-nothing"),_h=Symbol.for("immer-draftable"),yh=Symbol.for("immer-state");function vh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var bh=Object,xh=bh.getPrototypeOf,wh="constructor",Sh="prototype",Eh="configurable",Ch="enumerable",Th="writable",kh="value",Ah=e=>!!e&&!!e[yh];function Ih(e){var t;return!!e&&(Rh(e)||Bh(e)||!!e[_h]||!!(null==(t=e[wh])?void 0:t[_h])||zh(e)||Uh(e))}var Ph=bh[Sh][wh].toString(),Lh=new WeakMap;function Rh(e){if(!e||!jh(e))return!1;const t=xh(e);if(null===t||t===bh[Sh])return!0;const n=bh.hasOwnProperty.call(t,wh)&&t[wh];if(n===Object)return!0;if(!Vh(n))return!1;let i=Lh.get(n);return void 0===i&&(i=Function.toString.call(n),Lh.set(n,i)),i===Ph}function Oh(e,t,n=!0){0===Mh(e)?(n?Reflect.ownKeys(e):bh.keys(e)).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function Mh(e){const t=e[yh];return t?t.type_:Bh(e)?1:zh(e)?2:Uh(e)?3:0}var Dh=(e,t,n=Mh(e))=>2===n?e.has(t):bh[Sh].hasOwnProperty.call(e,t),Nh=(e,t,n=Mh(e))=>2===n?e.get(t):e[t],Fh=(e,t,n,i=Mh(e))=>{2===i?e.set(t,n):3===i?e.add(n):e[t]=n},Bh=Array.isArray,zh=e=>e instanceof Map,Uh=e=>e instanceof Set,jh=e=>"object"==typeof e,Vh=e=>"function"==typeof e,Hh=e=>"boolean"==typeof e,Wh=e=>e.copy_||e.base_,$h=e=>e.modified_?e.copy_:e.base_;function Gh(e,t){if(zh(e))return new Map(e);if(Uh(e))return new Set(e);if(Bh(e))return Array[Sh].slice.call(e);const n=Rh(e);if(!0===t||"class_only"===t&&!n){const t=bh.getOwnPropertyDescriptors(e);delete t[yh];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],o=t[r];!1===o[Th]&&(o[Th]=!0,o[Eh]=!0),(o.get||o.set)&&(t[r]={[Eh]:!0,[Th]:!0,[Ch]:o[Ch],[kh]:e[r]})}return bh.create(xh(e),t)}{const t=xh(e);if(null!==t&&n)return{...e};const i=bh.create(t);return bh.assign(i,e)}}function qh(e,t=!1){return Xh(e)||Ah(e)||!Ih(e)||(Mh(e)>1&&bh.defineProperties(e,{set:Yh,add:Yh,clear:Yh,delete:Yh}),bh.freeze(e),t&&Oh(e,(e,t)=>{qh(t,!0)},!1)),e}var Yh={[kh]:function(){vh(2)}};function Xh(e){return null===e||!jh(e)||bh.isFrozen(e)}var Kh="MapSet",Zh="Patches",Qh={};function Jh(e){const t=Qh[e];return t||vh(0),t}var ef,tf=()=>ef;function nf(e,t){t&&(e.patchPlugin_=Jh(Zh),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function rf(e){of(e),e.drafts_.forEach(af),e.drafts_=null}function of(e){e===ef&&(ef=e.parent_)}var sf=e=>{return ef={drafts_:[],parent_:ef,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:(t=Kh,Qh[t]?Jh(Kh):void 0)};var t};function af(e){const t=e[yh];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function lf(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(void 0!==e&&e!==n){n[yh].modified_&&(rf(t),vh(4)),Ih(e)&&(e=cf(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[yh].base_,e,t)}else e=cf(t,n);return function(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qh(t,n)}(t,e,!0),rf(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gh?e:void 0}function cf(e,t){if(Xh(t))return t;const n=t[yh];if(!n)return mf(t,e.handledSet_,e);if(!df(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:t}=n;if(t)for(;t.length>0;)t.pop()(e);pf(n,e)}return n.copy_}function uf(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var df=(e,t)=>e.scope_===t,hf=[];function ff(e,t,n,i){const r=Wh(e),o=e.type_;if(void 0!==i&&Nh(r,i,o)===t)return void Fh(r,i,n,o);if(!e.draftLocations_){const t=e.draftLocations_=new Map;Oh(r,(e,n)=>{if(Ah(n)){const i=t.get(n)||[];i.push(e),t.set(n,i)}})}const s=e.draftLocations_.get(t)??hf;for(const a of s)Fh(r,a,n,o)}function pf(e,t){var n;if(e.modified_&&!e.finalized_&&(3===e.type_||((null==(n=e.assigned_)?void 0:n.size)??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}uf(e)}}function mf(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ah(e)||t.has(e)||!Ih(e)||Xh(e)||(t.add(e),Oh(e,(i,r)=>{if(Ah(r)){const t=r[yh];if(df(t,n)){const n=$h(t);Fh(e,i,n,e.type_),uf(t)}}else Ih(r)&&mf(r,t,n)})),e}var gf={get(e,t){if(t===yh)return e;const n=Wh(e);if(!Dh(n,t,e.type_))return function(e,t,n){var i;const r=vf(t,n);return r?kh in r?r[kh]:null==(i=r.get)?void 0:i.call(e.draft_):void 0}(e,n,t);const i=n[t];if(e.finalized_||!Ih(i))return i;if(i===yf(e.base_,t)){xf(e);const n=1===e.type_?+t:t,r=wf(e.scope_,i,e,n);return e.copy_[n]=r}return i},has:(e,t)=>t in Wh(e),ownKeys:e=>Reflect.ownKeys(Wh(e)),set(e,t,n){const i=vf(Wh(e),t);if(null==i?void 0:i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=yf(Wh(e),t),s=null==i?void 0:i[yh];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(((r=n)===(o=i)?0!==r||1/r==1/o:r!=r&&o!=o)&&(void 0!==n||Dh(e.base_,t,e.type_)))return!0;xf(e),bf(e)}var r,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),function(e,t,n){const{scope_:i}=e;if(Ah(n)){const r=n[yh];df(r,i)&&r.callbacks_.push(function(){xf(e);const i=$h(r);ff(e,n,i,t)})}else Ih(n)&&e.callbacks_.push(function(){const r=Wh(e);Nh(r,t,e.type_)===n&&i.drafts_.length>1&&!0===(e.assigned_.get(t)??!1)&&e.copy_&&mf(Nh(e.copy_,t,e.type_),i.handledSet_,i)})}(e,t,n)),!0},deleteProperty:(e,t)=>(xf(e),void 0!==yf(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),bf(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Wh(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{[Th]:!0,[Eh]:1!==e.type_||"length"!==t,[Ch]:i[Ch],[kh]:n[t]}:i},defineProperty(){vh(11)},getPrototypeOf:e=>xh(e.base_),setPrototypeOf(){vh(12)}},_f={};function yf(e,t){const n=e[yh];return(n?Wh(n):e)[t]}function vf(e,t){if(!(t in e))return;let n=xh(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=xh(n)}}function bf(e){e.modified_||(e.modified_=!0,e.parent_&&bf(e.parent_))}function xf(e){e.copy_||(e.assigned_=new Map,e.copy_=Gh(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function wf(e,t,n,i){const[r,o]=zh(t)?Jh(Kh).proxyMap_(t,n):Uh(t)?Jh(Kh).proxySet_(t,n):function(e,t){const n=Bh(e),i={type_:n?1:0,scope_:t?t.scope_:tf(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,o=gf;n&&(r=[i],o=_f);const{revoke:s,proxy:a}=Proxy.revocable(r,o);return i.draft_=a,i.revoke_=s,[a,i]}(t,n);return((null==n?void 0:n.scope_)??tf()).drafts_.push(r),o.callbacks_=(null==n?void 0:n.callbacks_)??[],o.key_=i,n&&void 0!==i?function(e,t,n){e.callbacks_.push(function(i){var r;const o=t;if(!o||!df(o,i))return;null==(r=i.mapSetPlugin_)||r.fixSetContents(o);const s=$h(o);ff(e,o.draft_??o,s,n),pf(o,i)})}(n,o,i):o.callbacks_.push(function(e){var t;null==(t=e.mapSetPlugin_)||t.fixSetContents(o);const{patchPlugin_:n}=e;o.modified_&&n&&n.generatePatches_(o,[],e)}),r}function Sf(e){return Ah(e)||vh(10),Ef(e)}function Ef(e){if(!Ih(e)||Xh(e))return e;const t=e[yh];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Gh(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=Gh(e,!0);return Oh(n,(e,t)=>{Fh(n,e,Ef(t))},i),t&&(t.finalized_=!1),n}Oh(gf,(e,t)=>{_f[e]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),_f.deleteProperty=function(e,t){return _f.set.call(this,e,t,void 0)},_f.set=function(e,t,n){return gf.set.call(this,e[0],t,n,e[0])};var Cf=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,n)=>{if(Vh(e)&&!Vh(t)){const n=t;t=e;const i=this;return function(e=n,...r){return i.produce(e,e=>t.call(this,e,...r))}}let i;if(Vh(t)||vh(6),void 0===n||Vh(n)||vh(7),Ih(e)){const r=sf(this),o=wf(0,e,void 0);let s=!0;try{i=t(o),s=!1}finally{s?rf(r):of(r)}return nf(r,n),lf(i,r)}if(!e||!jh(e)){if(i=t(e),void 0===i&&(i=e),i===gh&&(i=void 0),this.autoFreeze_&&qh(i,!0),n){const t=[],r=[];Jh(Zh).generateReplacementPatches_(e,i,{patches_:t,inversePatches_:r}),n(t,r)}return i}vh(1)},this.produceWithPatches=(e,t)=>{if(Vh(e))return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,i;return[this.produce(e,t,(e,t)=>{n=e,i=t}),n,i]},Hh(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Hh(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Hh(null==e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ih(e)||vh(8),Ah(e)&&(e=Sf(e));const t=sf(this),n=wf(0,e,void 0);return n[yh].isManual_=!0,of(t),n}finishDraft(e,t){const n=e&&e[yh];n&&n.isManual_||vh(9);const{scope_:i}=n;return nf(i,t),lf(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=Jh(Zh).applyPatches_;return Ah(e)?i(e,t):this.produce(e,e=>i(e,t))}},Tf=Cf.produce;function kf(e){return({dispatch:t,getState:n})=>i=>r=>"function"==typeof r?r(t,n,e):i(r)}var Af=kf(),If=kf,Pf="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?ph:ph.apply(null,arguments)};function Lf(e,t){function n(...n){if(t){let i=t(...n);if(!i)throw new Error(Sp(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>mh(t)&&t.type===e,n}var Rf=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Of(e){return Ih(e)?Tf(e,()=>{}):e}function Mf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Df="RTK_autoBatch",Nf=()=>e=>({payload:e,meta:{[Df]:!0}}),Ff=e=>t=>{setTimeout(t,e)},Bf=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let r=!0,o=!1,s=!1;const a=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ff(10):"callback"===e.type?e.queueNotification:Ff(e.timeout),c=()=>{s=!1,o&&(o=!1,a.forEach(e=>e()))};return Object.assign({},i,{subscribe(e){const t=i.subscribe(()=>r&&e());return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){var t;try{return r=!(null==(t=null==e?void 0:e.meta)?void 0:t[Df]),o=!r,o&&(s||(s=!0,l(c))),i.dispatch(e)}finally{r=!0}}})};function zf(e){const t={},n=[];let i;const r={addCase(e,n){const i="string"==typeof e?e:e.type;if(!i)throw new Error(Sp(28));if(i in t)throw new Error(Sp(29));return t[i]=n,r},addAsyncThunk:(e,i)=>(i.pending&&(t[e.pending.type]=i.pending),i.rejected&&(t[e.rejected.type]=i.rejected),i.fulfilled&&(t[e.fulfilled.type]=i.fulfilled),i.settled&&n.push({matcher:e.settled,reducer:i.settled}),r),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(i=e,r)};return e(r),[t,n,i]}var Uf=(e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},jf=Symbol.for("rtk-slice-createasyncthunk");function Vf(e,t){return`${e}/${t}`}function Hf({creators:e}={}){var t;const n=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[jf];return function(e){const{name:t,reducerPath:i=t}=e;if(!t)throw new Error(Sp(11));const r=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(r),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(Sp(12));if(n in s.sliceCaseReducersByType)throw new Error(Sp(13));return s.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(s.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],i]="function"==typeof e.extraReducers?zf(e.extraReducers):[e.extraReducers],r={...t,...s.sliceCaseReducersByType};return function(e){let t,[o,a,l]=zf(e=>{for(let t in r)e.addCase(t,r[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)});if("function"==typeof e)t=()=>Of(e());else{const n=Of(e);t=()=>n}function c(e=t(),n){let i=[o[n.type],...a.filter(({matcher:e})=>e(n)).map(({reducer:e})=>e)];return 0===i.filter(e=>!!e).length&&(i=[l]),i.reduce((e,t)=>{if(t){if(Ah(e)){const i=t(e,n);return void 0===i?e:i}if(Ih(e))return Tf(e,e=>t(e,n));{const i=t(e,n);if(void 0===i){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}}return e},e)}return c.getInitialState=t,c}(e.initialState)}o.forEach(i=>{const o=r[i],s={reducerName:i,type:Vf(t,i),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},i,r){let o,s;if("reducer"in i){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(i))throw new Error(Sp(17));o=i.reducer,s=i.prepare}else o=i;r.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?Lf(e,s):Lf(e))}(s,o,a):function({type:e,reducerName:t},n,i,r){if(!r)throw new Error(Sp(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:l,settled:c,options:u}=n,d=r(e,o,u);i.exposeAction(t,d),s&&i.addCase(d.fulfilled,s),a&&i.addCase(d.pending,a),l&&i.addCase(d.rejected,l),c&&i.addMatcher(d.settled,c),i.exposeCaseReducer(t,{fulfilled:s||Gf,pending:a||Gf,rejected:l||Gf,settled:c||Gf})}(s,o,a,n)});const c=e=>e,u=new Map,d=new WeakMap;let h;function f(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function m(t,n=!1){function i(e){let r=e[t];return void 0===r&&n&&(r=Mf(d,i,p)),r}function r(t=c){const i=Mf(u,n,()=>new WeakMap);return Mf(i,t,()=>{const i={};for(const[r,o]of Object.entries(e.selectors??{}))i[r]=Wf(o,t,()=>Mf(d,t,p),n);return i})}return{reducerPath:t,getSelectors:r,get selectors(){return r(i)},selectSlice:i}}const g={name:t,reducer:f,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:p,...m(i),injectInto(e,{reducerPath:t,...n}={}){const r=t??i;return e.inject({reducerPath:r,reducer:f},n),{...g,...m(r,!0)}}};return g}}function Wf(e,t,n,i){function r(r,...o){let s=t(r);return void 0===s&&i&&(s=n()),e(s,...o)}return r.unwrapped=e,r}var $f=Hf();function Gf(){}var qf="listener",Yf="completed",Xf="cancelled",Kf=`task-${Xf}`,Zf=`task-${Yf}`,Qf=`${qf}-${Xf}`,Jf=`${qf}-${Yf}`,ep=class{constructor(e){s(this,"name","TaskAbortError"),s(this,"message"),this.code=e,this.message=`task ${Xf} (reason: ${e})`}},tp=(e,t)=>{if("function"!=typeof e)throw new TypeError(Sp(32))},np=()=>{},ip=(e,t=np)=>(e.catch(t),e),rp=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),op=e=>{if(e.aborted)throw new ep(e.reason)};function sp(e,t){let n=np;return new Promise((i,r)=>{const o=()=>r(new ep(e.reason));e.aborted?o():(n=rp(e,o),t.finally(()=>n()).then(i,r))}).finally(()=>{n=np})}var ap=e=>t=>ip(sp(e,t).then(t=>(op(e),t))),lp=e=>{const t=ap(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:cp}=Object,up={},dp="listenerMiddleware",hp=(e,t)=>(n,i)=>{tp(n);const r=new AbortController;var o;o=r,rp(e,()=>o.abort(e.reason));const s=(async(t,i)=>{try{return await Promise.resolve(),{status:"ok",value:await(async()=>{op(e),op(r.signal);const t=await n({pause:ap(r.signal),delay:lp(r.signal),signal:r.signal});return op(r.signal),t})()}}catch(o){return{status:o instanceof ep?"cancelled":"rejected",error:o}}finally{null==i||i()}})(0,()=>r.abort(Zf));return(null==i?void 0:i.autoJoin)&&t.push(s.catch(np)),{result:ap(e)(s),cancel(){r.abort(Kf)}}},fp=e=>{let{type:t,actionCreator:n,matcher:i,predicate:r,effect:o}=e;if(t)r=Lf(t).match;else if(n)t=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Sp(21));return tp(o),{predicate:r,type:t,effect:o}},pp=cp(e=>{const{type:t,predicate:n,effect:i}=fp(e);return{id:Uf(),effect:i,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Sp(22))}}},{withTypes:()=>pp}),mp=(e,t)=>{const{type:n,effect:i,predicate:r}=fp(t);return Array.from(e.values()).find(e=>("string"==typeof n?e.type===n:e.predicate===r)&&e.effect===i)},gp=e=>{e.pending.forEach(e=>{e.abort(Qf)})},_p=(e,t,n)=>{try{e(t,n)}catch(i){setTimeout(()=>{throw i},0)}},yp=cp(Lf(`${dp}/add`),{withTypes:()=>yp}),vp=Lf(`${dp}/removeAll`),bp=cp(Lf(`${dp}/remove`),{withTypes:()=>bp}),xp=(...e)=>{},wp=(e={})=>{const t=new Map,n=new Map,{extra:i,onError:r=xp}=e;tp(r);const o=e=>{return(n=mp(t,e)??pp(e)).unsubscribe=()=>t.delete(n.id),t.set(n.id,n),e=>{n.unsubscribe(),(null==e?void 0:e.cancelActive)&&gp(n)};var n};cp(o,{withTypes:()=>o});const s=e=>{const n=mp(t,e);return n&&(n.unsubscribe(),e.cancelActive&&gp(n)),!!n};cp(s,{withTypes:()=>s});const a=async(e,s,a,l)=>{const c=new AbortController,u=((e,t)=>(n,i)=>ip((async(n,i)=>{op(t);let r=()=>{};const o=[new Promise((t,i)=>{let o=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});r=()=>{o(),i()}})];null!=i&&o.push(new Promise(e=>setTimeout(e,i,null)));try{const e=await sp(t,Promise.race(o));return op(t),e}finally{r()}})(n,i)))(o,c.signal),d=[];try{e.pending.add(c),(e=>{const t=n.get(e)??0;n.set(e,t+1)})(e),await Promise.resolve(e.effect(s,cp({},a,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:lp(c.signal),pause:ap(c.signal),extra:i,signal:c.signal,fork:hp(c.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==c&&(e.abort(Qf),n.delete(e))})},cancel:()=>{c.abort(Qf),e.pending.delete(c)},throwIfCancelled:()=>{op(c.signal)}})))}catch(h){h instanceof ep||_p(r,h,{raisedBy:"effect"})}finally{await Promise.all(d),c.abort(Jf),(e=>{const t=n.get(e)??1;1===t?n.delete(e):n.set(e,t-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())gp(e);e.clear()})(t,n);return{middleware:e=>n=>i=>{if(!mh(i))return n(i);if(yp.match(i))return o(i.payload);if(vp.match(i))return void l();if(bp.match(i))return s(i.payload);let c=e.getState();const u=()=>{if(c===up)throw new Error(Sp(23));return c};let d;try{if(d=n(i),t.size>0){const n=e.getState(),o=Array.from(t.values());for(const t of o){let o=!1;try{o=t.predicate(i,n,c)}catch(h){o=!1,_p(r,h,{raisedBy:"predicate"})}o&&a(t,i,e,u)}}}finally{c=up}return d},startListening:o,stopListening:s,clearListeners:l}};function Sp(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ep=$f({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,i,r,o;e.margin.top=null!==(n=t.payload.top)&&void 0!==n?n:0,e.margin.right=null!==(i=t.payload.right)&&void 0!==i?i:0,e.margin.bottom=null!==(r=t.payload.bottom)&&void 0!==r?r:0,e.margin.left=null!==(o=t.payload.left)&&void 0!==o?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Cp,setLayout:Tp,setChartSize:kp,setScale:Ap}=Ep.actions,Ip=Ep.reducer;function Pp(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(n),!0).forEach(function(t){Op(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Op(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mp(e,t,n){return bc(e)||bc(t)?n:fc(t)?lc(e,t,n):"function"==typeof t?t(e):n}var Dp=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Np=(e,t,n,i)=>{if(i)return e.map(e=>e.coordinate);var r,o,s=e.map(e=>(e.coordinate===t&&(r=!0),e.coordinate===n&&(o=!0),e.coordinate));return r||s.push(t),o||s.push(n),s},Fp=(e,t,n)=>{if(!e)return null;var{duplicateDomain:i,type:r,range:o,scale:s,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:h,axisType:f}=e;if(!s)return null;var p="scaleBand"===a&&s.bandwidth?s.bandwidth()/2:2,m="category"===r&&s.bandwidth?s.bandwidth()/p:0;return m="angleAxis"===f&&o&&o.length>=2?2*cc(o[0]-o[1])*m:m,d||h?(d||h||[]).map((e,t)=>{var n=i?i.indexOf(e):e;return{coordinate:s(n)+m,value:e,offset:m,index:t}}).filter(e=>!uc(e.coordinate)):l&&c?c.map((e,t)=>({coordinate:s(e)+m,value:e,index:t,offset:m})):s.ticks&&null!=u?s.ticks(u).map((e,t)=>({coordinate:s(e)+m,value:e,offset:m,index:t})):s.domain().map((e,t)=>({coordinate:s(e)+m,value:i?i[e]:e,index:t,offset:m}))},Bp=1e-4,zp={sign:e=>{var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var r=0,o=0,s=0;s<t;++s){var a=uc(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=r,e[s][n][1]=r+a,r=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1])}},expand:function(e,t){if((i=e.length)>0){for(var n,i,r,o=0,s=e[0].length;o<s;++o){for(r=n=0;n<i;++n)r+=e[n][o][1]||0;if(r)for(n=0;n<i;++n)e[n][o][1]/=r}Fl(e,t)}},none:Fl,silhouette:function(e,t){if((n=e.length)>0){for(var n,i=0,r=e[t[0]],o=r.length;i<o;++i){for(var s=0,a=0;s<n;++s)a+=e[s][i][1]||0;r[i][1]+=r[i][0]=-a/2}Fl(e,t)}},wiggle:function(e,t){if((r=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,r,o=0,s=1;s<i;++s){for(var a=0,l=0,c=0;a<r;++a){for(var u=e[t[a]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,f=0;f<a;++f){var p=e[t[f]];h+=(p[s][1]||0)-(p[s-1][1]||0)}l+=d,c+=h*d}n[s-1][1]+=n[s-1][0]=o,l&&(o-=c/l)}n[s-1][1]+=n[s-1][0]=o,Fl(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var r=0,o=0;o<t;++o){var s=uc(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=r,e[o][n][1]=r+s,r=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},Up=(e,t,n)=>{var i=zp[n],r=function(){var e=Fa([]),t=Bl,n=Fl,i=zl;function r(r){var o,s,a=Array.from(e.apply(this,arguments),Ul),l=a.length,c=-1;for(const e of r)for(o=0,++c;o<l;++o)(a[o][c]=[0,+i(e,a[o].key,c,r)]).data=e;for(o=0,s=Ka(t(a));o<l;++o)a[s[o]].index=o;return n(a,s),a}return r.keys=function(t){return arguments.length?(e="function"==typeof t?t:Fa(Array.from(t)),r):e},r.value=function(e){return arguments.length?(i="function"==typeof e?e:Fa(+e),r):i},r.order=function(e){return arguments.length?(t=null==e?Bl:"function"==typeof e?e:Fa(Array.from(e)),r):t},r.offset=function(e){return arguments.length?(n=null==e?Fl:e,r):n},r}().keys(t).value((e,t)=>Number(Mp(e,t,0))).order(Bl).offset(i);return r(e)};function jp(e){var{axis:t,ticks:n,bandSize:i,entry:r,index:o,dataKey:s}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!bc(r[t.dataKey])){var a=vc(n,"value",r[t.dataKey]);if(a)return a.coordinate+i/2}return n[o]?n[o].coordinate+i/2:null}var l=Mp(r,bc(s)?t.dataKey:s);return bc(l)?null:t.scale(l)}var Vp=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hp=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Wp=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&t&&t.length>=2){for(var r=oh(t,e=>e.coordinate),o=1/0,s=1,a=r.length;s<a;s++){var l=r[s],c=r[s-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function $p(e){var{tooltipEntrySettings:t,dataKey:n,payload:i,value:r,name:o}=e;return Rp(Rp({},t),{},{dataKey:n,payload:i,value:r,name:o})}function Gp(e,t){return e?String(e):"string"==typeof t?t:void 0}var qp=e=>e.layout.width,Yp=e=>e.layout.height,Xp=e=>e.layout.scale,Kp=e=>e.layout.margin,Zp=Dd(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Qp=Dd(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Jp=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"];function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach(function(t){nm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var im,rm,om,sm,am,lm=Dd([qp,Yp,Kp,e=>e.brush.height,function(e){return Qp(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return Qp(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return Zp(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return Zp(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},sh,e=>e.legend.size],(e,t,n,i,r,o,s,a,l,c)=>{var u={left:(n.left||0)+r,right:(n.right||0)+o},d=tm(tm({},{top:(n.top||0)+s,bottom:(n.bottom||0)+a}),u),h=d.bottom;d.bottom+=i,d=((e,t,n)=>{if(t&&n){var{width:i,height:r}=n,{align:o,verticalAlign:s,layout:a}=t;if(("vertical"===a||"horizontal"===a&&"middle"===s)&&"center"!==o&&hc(e[o]))return Rp(Rp({},e),{},{[o]:e[o]+(i||0)});if(("horizontal"===a||"vertical"===a&&"center"===o)&&"middle"!==s&&hc(e[s]))return Rp(Rp({},e),{},{[s]:e[s]+(r||0)})}return e})(d,l,c);var f=e-d.left-d.right,p=t-d.top-d.bottom;return tm(tm({brushBottom:h},d),{},{width:Math.max(f,0),height:Math.max(p,0)})}),cm=Dd(lm,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),um=Dd(qp,Yp,(e,t)=>({x:0,y:0,width:e,height:t})),dm=x.createContext(null),hm=()=>null!=x.useContext(dm),fm=e=>e.brush,pm=Dd([fm,lm,Kp],(e,t,n)=>({height:e.height,x:hc(e.x)?e.x:t.left,y:hc(e.y)?e.y:t.top+t.height+t.brushBottom-((null==n?void 0:n.bottom)||0),width:hc(e.width)?e.width:t.width})),mm={},gm={},_m={};function ym(){return im||(im=1,e=_m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.debounce=function(e,t,{signal:n,edges:i}={}){let r,o=null;const s=null!=i&&i.includes("leading"),a=null==i||i.includes("trailing"),l=()=>{null!==o&&(e.apply(r,o),r=void 0,o=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,a&&l(),d()},t)},d=()=>{null!==c&&(clearTimeout(c),c=null),r=void 0,o=null},h=function(...e){if(null==n?void 0:n.aborted)return;r=this,o=e;const t=null==c;u(),s&&t&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},null==n||n.addEventListener("abort",d,{once:!0}),h}),_m;var e}function vm(){return rm||(rm=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ym();e.debounce=function(e,n=0,i={}){"object"!=typeof i&&(i={});const{leading:r=!1,trailing:o=!0,maxWait:s}=i,a=Array(2);let l;r&&(a[0]="leading"),o&&(a[1]="trailing");let c=null;const u=t.debounce(function(...t){l=e.apply(this,t),c=null},n,{edges:a}),d=function(...t){return null!=s&&(null===c&&(c=Date.now()),Date.now()-c>=s)?(l=e.apply(this,t),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,t),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}}(gm)),gm}function bm(){return am?sm:(am=1,sm=(om||(om=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vm();e.throttle=function(e,n=0,i={}){const{leading:r=!0,trailing:o=!0}=i;return t.debounce(e,n,{leading:r,maxWait:n,trailing:o})}}(mm)),mm).throttle)}const xm=a(bm());var wm=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];"undefined"!=typeof console&&console.warn},Sm=(e,t,n)=>{var{width:i="100%",height:r="100%",aspect:o,maxHeight:s}=n,a=dc(i)?e:Number(i),l=dc(r)?t:Number(r);return o&&o>0&&(a?l=a/o:l&&(a=l*o),s&&null!=l&&l>s&&(l=s)),{calculatedWidth:a,calculatedHeight:l}},Em={width:0,height:0,overflow:"visible"},Cm={width:0,overflowX:"visible"},Tm={height:0,overflowY:"visible"},km={},Am=e=>{var{width:t,height:n}=e,i=dc(t),r=dc(n);return i&&r?Em:i?Cm:r?Tm:km};function Im(e){return Number.isFinite(e)}function Pm(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lm.apply(null,arguments)}function Rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Om(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(n),!0).forEach(function(t){Mm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dm=x.createContext({width:-1,height:-1});function Nm(e){var{children:t,width:n,height:i}=e,r=x.useMemo(()=>({width:n,height:i}),[n,i]);return function(e){return Pm(e.width)&&Pm(e.height)}(r)?x.createElement(Dm.Provider,{value:r},t):null}var Fm=()=>x.useContext(Dm),Bm=x.forwardRef((e,t)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:o,minWidth:s=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:d,className:h,onResize:f,style:p={}}=e,m=x.useRef(null),g=x.useRef();g.current=f,x.useImperativeHandle(t,()=>m.current);var[_,y]=x.useState({containerWidth:i.width,containerHeight:i.height}),v=x.useCallback((e,t)=>{y(n=>{var i=Math.round(e),r=Math.round(t);return n.containerWidth===i&&n.containerHeight===r?n:{containerWidth:i,containerHeight:r}})},[]);x.useEffect(()=>{if(null==m.current||"undefined"==typeof ResizeObserver)return Sc;var e=e=>{var t,{width:n,height:i}=e[0].contentRect;v(n,i),null===(t=g.current)||void 0===t||t.call(g,n,i)};u>0&&(e=xm(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:i}=m.current.getBoundingClientRect();return v(n,i),t.observe(m.current),()=>{t.disconnect()}},[v,u]);var{containerWidth:b,containerHeight:w}=_;wm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:S,calculatedHeight:E}=Sm(b,w,{width:r,height:o,aspect:n,maxHeight:l});return wm(null!=S&&S>0||null!=E&&E>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",S,E,r,o,s,a,n),x.createElement("div",{id:d?"".concat(d):void 0,className:$("recharts-responsive-container",h),style:Om(Om({},p),{},{width:r,height:o,minWidth:s,minHeight:a,maxHeight:l}),ref:m},x.createElement("div",{style:Am({width:r,height:o})},x.createElement(Nm,{width:S,height:E},c)))}),zm=x.forwardRef((e,t)=>{var n=Fm();if(Pm(n.width)&&Pm(n.height))return e.children;var{width:i,height:r}=function(e){var{width:t,height:n,aspect:i}=e,r=t,o=n;return void 0===r&&void 0===o?(r="100%",o="100%"):void 0===r?r=i&&i>0?void 0:"100%":void 0===o&&(o=i&&i>0?void 0:"100%"),{width:r,height:o}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:s}=Sm(void 0,void 0,{width:i,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return hc(o)&&hc(s)?x.createElement(Nm,{width:o,height:s},e.children):x.createElement(Bm,Lm({},e,{width:i,height:r,ref:t}))});function Um(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var jm=()=>{var e,t=hm(),n=Ad(cm),i=Ad(pm),r=null===(e=Ad(fm))||void 0===e?void 0:e.padding;return t&&i&&r?{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}:n},Vm={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Hm=()=>{var e;return null!==(e=Ad(lm))&&void 0!==e?e:Vm},Wm=()=>Ad(qp),$m=()=>Ad(Yp),Gm=e=>e.layout.layoutType,qm=()=>Ad(Gm),Ym=e=>{var t=Ed(),n=hm(),{width:i,height:r}=e,o=Fm(),s=i,a=r;return o&&(s=o.width>0?o.width:i,a=o.height>0?o.height:r),x.useEffect(()=>{!n&&Pm(s)&&Pm(a)&&t(kp({width:s,height:a}))},[t,n,s,a]),null},Xm=e=>{var{margin:t}=e,n=Ed();return x.useEffect(()=>{n(Cp(t))},[n,t]),null},Km=Symbol.for("immer-nothing"),Zm=Symbol.for("immer-draftable"),Qm=Symbol.for("immer-state");function Jm(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var eg=Object.getPrototypeOf;function tg(e){return!!e&&!!e[Qm]}function ng(e){var t;return!!e&&(og(e)||Array.isArray(e)||!!e[Zm]||!!(null==(t=e.constructor)?void 0:t[Zm])||ug(e)||dg(e))}var ig=Object.prototype.constructor.toString(),rg=new WeakMap;function og(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!=typeof n)return!1;let i=rg.get(n);return void 0===i&&(i=Function.toString.call(n),rg.set(n,i)),i===ig}function sg(e,t,n=!0){0===ag(e)?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function ag(e){const t=e[Qm];return t?t.type_:Array.isArray(e)?1:ug(e)?2:dg(e)?3:0}function lg(e,t){return 2===ag(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cg(e,t,n){const i=ag(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n}function ug(e){return e instanceof Map}function dg(e){return e instanceof Set}function hg(e){return e.copy_||e.base_}function fg(e,t){if(ug(e))return new Map(e);if(dg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=og(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Qm];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],o=t[r];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[r]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[r]})}return Object.create(eg(e),t)}{const t=eg(e);if(null!==t&&n)return{...e};const i=Object.create(t);return Object.assign(i,e)}}function pg(e,t=!1){return gg(e)||tg(e)||!ng(e)||(ag(e)>1&&Object.defineProperties(e,{set:mg,add:mg,clear:mg,delete:mg}),Object.freeze(e),t&&Object.values(e).forEach(e=>pg(e,!0))),e}var mg={value:function(){Jm(2)}};function gg(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var _g,yg={};function vg(e){const t=yg[e];return t||Jm(0),t}function bg(){return _g}function xg(e,t){t&&(vg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function wg(e){Sg(e),e.drafts_.forEach(Cg),e.drafts_=null}function Sg(e){e===_g&&(_g=e.parent_)}function Eg(e){return _g={drafts_:[],parent_:_g,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Cg(e){const t=e[Qm];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Tg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Qm].modified_&&(wg(t),Jm(4)),ng(e)&&(e=kg(t,e),t.parent_||Ig(t,e)),t.patches_&&vg("Patches").generateReplacementPatches_(n[Qm].base_,e,t.patches_,t.inversePatches_)):e=kg(t,n,[]),wg(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Km?e:void 0}function kg(e,t,n){if(gg(t))return t;const i=e.immer_.shouldUseStrictIteration(),r=t[Qm];if(!r)return sg(t,(i,o)=>Ag(e,r,t,i,o,n),i),t;if(r.scope_!==e)return t;if(!r.modified_)return Ig(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,s=!1;3===r.type_&&(o=new Set(t),t.clear(),s=!0),sg(o,(i,o)=>Ag(e,r,t,i,o,n,s),i),Ig(e,t,!1),n&&e.patches_&&vg("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Ag(e,t,n,i,r,o,s){if(null==r)return;if("object"!=typeof r&&!s)return;const a=gg(r);if(!a||s){if(tg(r)){const s=kg(e,r,o&&t&&3!==t.type_&&!lg(t.assigned_,i)?o.concat(i):void 0);if(cg(n,i,s),!tg(s))return;e.canAutoFreeze_=!1}else s&&n.add(r);if(ng(r)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[i]===r&&a)return;kg(e,r),t&&t.scope_.parent_||"symbol"==typeof i||!(ug(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))||Ig(e,r)}}}function Ig(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pg(t,n)}var Pg={get(e,t){if(t===Qm)return e;const n=hg(e);if(!lg(n,t))return function(e,t,n){var i;const r=Og(t,n);return r?"value"in r?r.value:null==(i=r.get)?void 0:i.call(e.draft_):void 0}(e,n,t);const i=n[t];return e.finalized_||!ng(i)?i:i===Rg(e.base_,t)?(Dg(e),e.copy_[t]=Ng(i,e)):i},has:(e,t)=>t in hg(e),ownKeys:e=>Reflect.ownKeys(hg(e)),set(e,t,n){const i=Og(hg(e),t);if(null==i?void 0:i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=Rg(hg(e),t),s=null==i?void 0:i[Qm];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(o=i)?0!==r||1/r==1/o:r!=r&&o!=o)&&(void 0!==n||lg(e.base_,t)))return!0;Dg(e),Mg(e)}var r,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Rg(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Dg(e),Mg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=hg(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty(){Jm(11)},getPrototypeOf:e=>eg(e.base_),setPrototypeOf(){Jm(12)}},Lg={};function Rg(e,t){const n=e[Qm];return(n?hg(n):e)[t]}function Og(e,t){if(!(t in e))return;let n=eg(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=eg(n)}}function Mg(e){e.modified_||(e.modified_=!0,e.parent_&&Mg(e.parent_))}function Dg(e){e.copy_||(e.copy_=fg(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Ng(e,t){const n=ug(e)?vg("MapSet").proxyMap_(e,t):dg(e)?vg("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:bg(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,o=Pg;n&&(r=[i],o=Lg);const{revoke:s,proxy:a}=Proxy.revocable(r,o);return i.draft_=a,i.revoke_=s,a}(e,t);return(t?t.scope_:bg()).drafts_.push(n),n}function Fg(e){if(!ng(e)||gg(e))return e;const t=e[Qm];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=fg(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=fg(e,!0);return sg(n,(e,t)=>{cg(n,e,Fg(t))},i),t&&(t.finalized_=!1),n}sg(Pg,(e,t)=>{Lg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Lg.deleteProperty=function(e,t){return Lg.set.call(this,e,t,void 0)},Lg.set=function(e,t,n){return Pg.set.call(this,e[0],t,n,e[0])};var Bg=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const i=this;return function(e=n,...r){return i.produce(e,e=>t.call(this,e,...r))}}let i;if("function"!=typeof t&&Jm(6),void 0!==n&&"function"!=typeof n&&Jm(7),ng(e)){const r=Eg(this),o=Ng(e,void 0);let s=!0;try{i=t(o),s=!1}finally{s?wg(r):Sg(r)}return xg(r,n),Tg(i,r)}if(!e||"object"!=typeof e){if(i=t(e),void 0===i&&(i=e),i===Km&&(i=void 0),this.autoFreeze_&&pg(i,!0),n){const t=[],r=[];vg("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}Jm(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,i;return[this.produce(e,t,(e,t)=>{n=e,i=t}),n,i]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof(null==e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){var t;ng(e)||Jm(8),tg(e)&&(tg(t=e)||Jm(10),e=Fg(t));const n=Eg(this),i=Ng(e,void 0);return i[Qm].isManual_=!0,Sg(n),i}finishDraft(e,t){const n=e&&e[Qm];n&&n.isManual_||Jm(9);const{scope_:i}=n;return xg(i,t),Tg(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=vg("Patches").applyPatches_;return tg(e)?i(e,t):this.produce(e,e=>i(e,t))}};Bg.produce;var zg=$f({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nf()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:i}=t.payload,r=Sf(e).payload.indexOf(n);r>-1&&(e.payload[r]=i)},prepare:Nf()},removeLegendPayload:{reducer(e,t){var n=Sf(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Nf()}}}),{setLegendSize:Ug,setLegendSettings:jg,addLegendPayload:Vg,replaceLegendPayload:Hg,removeLegendPayload:Wg}=zg.actions,$g=zg.reducer;function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gg.apply(null,arguments)}function qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Yg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(n),!0).forEach(function(t){Xg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xg(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kg(e){return Array.isArray(e)&&fc(e[0])&&fc(e[1])?e.join(" ~ "):e}var Zg=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:o,formatter:s,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:h=!1}=e,f=Yg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),p=Yg({margin:0},r),m=!bc(u),g=m?u:"",_=$("recharts-default-tooltip",l),y=$("recharts-tooltip-label",c);m&&d&&null!=o&&(g=d(u,o));var v=h?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Gg({className:_,style:f},v),x.createElement("p",{className:y,style:p},x.isValidElement(g)?g:"".concat(g)),(()=>{if(o&&o.length){var e=(a?oh(o,a):o).map((e,n)=>{if("none"===e.type)return null;var r=e.formatter||s||Kg,{value:a,name:l}=e,c=a,u=l;if(r){var d=r(a,l,e,n,o);if(Array.isArray(d))[c,u]=d;else{if(null==d)return null;c=d}}var h=Yg({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:h},fc(u)?x.createElement("span",{className:"recharts-tooltip-item-name"},u):null,fc(u)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},c),x.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},Qg="recharts-tooltip-wrapper",Jg={visibility:"hidden"};function e_(e){var{coordinate:t,translateX:n,translateY:i}=e;return $(Qg,{["".concat(Qg,"-right")]:hc(n)&&t&&hc(t.x)&&n>=t.x,["".concat(Qg,"-left")]:hc(n)&&t&&hc(t.x)&&n<t.x,["".concat(Qg,"-bottom")]:hc(i)&&t&&hc(t.y)&&i>=t.y,["".concat(Qg,"-top")]:hc(i)&&t&&hc(t.y)&&i<t.y})}function t_(e){var{allowEscapeViewBox:t,coordinate:n,key:i,offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=e;if(o&&hc(o[i]))return o[i];var u=n[i]-a-(r>0?r:0),d=n[i]+r;if(t[i])return s[i]?u:d;var h=l[i];return null==h?0:s[i]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+a>h+c?Math.max(u,h):Math.max(d,h)}function n_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function i_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n_(Object(n),!0).forEach(function(t){r_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o_ extends x.PureComponent{constructor(){super(...arguments),r_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),r_(this,"handleKeyDown",e=>{var t,n,i,r;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(i=null===(r=this.props.coordinate)||void 0===r?void 0:r.y)&&void 0!==i?i:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:r,coordinate:o,hasPayload:s,isAnimationActive:a,offset:l,position:c,reverseDirection:u,useTranslate3d:d,viewBox:h,wrapperStyle:f,lastBoundingBox:p,innerRef:m,hasPortalFromProps:g}=this.props,{cssClasses:_,cssProperties:y}=function(e){var t,n,i,{allowEscapeViewBox:r,coordinate:o,offsetTopLeft:s,position:a,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=e;return t=c.height>0&&c.width>0&&o?function(e){var{translateX:t,translateY:n,useTranslate3d:i}=e;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=t_({allowEscapeViewBox:r,coordinate:o,key:"x",offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),translateY:i=t_({allowEscapeViewBox:r,coordinate:o,key:"y",offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:u}):Jg,{cssProperties:t,cssClasses:e_({translateX:n,translateY:i,coordinate:o})}}({allowEscapeViewBox:t,coordinate:o,offsetTopLeft:l,position:c,reverseDirection:u,tooltipBox:{height:p.height,width:p.width},useTranslate3d:d,viewBox:h}),v=g?{}:i_(i_({transition:a&&e?"transform ".concat(n,"ms ").concat(i):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),b=i_(i_({},v),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},f);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:b,ref:m},r)}}var s_=()=>{var e;return null===(e=Ad(e=>e.rootProps.accessibilityLayer))||void 0===e||e};function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a_.apply(null,arguments)}function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l_(Object(n),!0).forEach(function(t){u_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d_={curveBasisClosed:function(e){return new El(e)},curveBasisOpen:function(e){return new Cl(e)},curveBasis:function(e){return new Sl(e)},curveBumpX:function(e){return new il(e,!0)},curveBumpY:function(e){return new il(e,!1)},curveLinearClosed:function(e){return new Tl(e)},curveLinear:Qa,curveMonotoneX:function(e){return new Ll(e)},curveMonotoneY:function(e){return new Rl(e)},curveNatural:function(e){return new Ml(e)},curveStep:function(e){return new Nl(e,.5)},curveStepAfter:function(e){return new Nl(e,1)},curveStepBefore:function(e){return new Nl(e,0)}},h_=e=>Im(e.x)&&Im(e.y),f_=e=>null!=e.base&&h_(e.base)&&h_(e),p_=e=>e.x,m_=e=>e.y,g_=e=>{var{className:t,points:n,path:i,pathRef:r}=e;if(!(n&&n.length||i))return null;var o=n&&n.length?(e=>{var{type:t="linear",points:n=[],baseLine:i,layout:r,connectNulls:o=!1}=e,s=((e,t)=>{if("function"==typeof e)return e;var n="curve".concat(xc(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?d_[n]||Qa:d_["".concat(n).concat("vertical"===t?"Y":"X")]})(t,r),a=o?n.filter(h_):n;if(Array.isArray(i)){var l=n.map((e,t)=>c_(c_({},e),{},{base:i[t]}));return("vertical"===r?nl().y(m_).x1(p_).x0(e=>e.base.x):nl().x(p_).y1(m_).y0(e=>e.base.y)).defined(f_).curve(s)(o?l.filter(f_):l)}return("vertical"===r&&hc(i)?nl().y(m_).x1(p_).x0(i):hc(i)?nl().x(p_).y1(m_).y0(i):tl().x(p_).y(m_)).defined(h_).curve(s)(a)})(e):i;return x.createElement("path",a_({},ka(e),Oc(e),{className:$("recharts-curve",t),d:null===o?void 0:o,ref:r}))},__=["x","y","top","left","width","height","className"];function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y_.apply(null,arguments)}function v_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function b_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x_=(e,t,n,i,r,o)=>"M".concat(e,",").concat(r,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(n),w_=e=>{var{x:t=0,y:n=0,top:i=0,left:r=0,width:o=0,height:s=0,className:a}=e,l=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,__),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v_(Object(n),!0).forEach(function(t){b_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:i,left:r,width:o,height:s},l);return hc(t)&&hc(n)&&hc(o)&&hc(s)&&hc(i)&&hc(r)?x.createElement("path",y_({},Ia(c),{className:$("recharts-cross",a),d:x_(t,n,o,s,i,r)})):null};function S_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function E_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S_(Object(n),!0).forEach(function(t){C_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T_=(e,t,n)=>e.map(e=>{return"".concat((i=e,i.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var i}).join(","),k_=(e,t)=>Object.keys(t).reduce((n,i)=>E_(E_({},n),{},{[i]:e(i,t[i])}),{});function A_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function I_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A_(Object(n),!0).forEach(function(t){P_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L_=(e,t,n)=>e+(t-e)*n,R_=e=>{var{from:t,to:n}=e;return t!==n},O_=(e,t,n)=>{var i=k_((t,n)=>{if(R_(n)){var[i,r]=e(n.from,n.to,n.velocity);return I_(I_({},n),{},{from:i,velocity:r})}return n},t);return n<1?k_((e,t)=>R_(t)?I_(I_({},t),{},{velocity:L_(t.velocity,i[e].velocity,n),from:L_(t.from,i[e].from,n)}):t,t):O_(e,i,n-1)};const M_=(e,t,n,i,r,o)=>{var s,a,l=(s=e,a=t,[Object.keys(s),Object.keys(a)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==n?()=>(r(I_(I_({},e),t)),()=>{}):!0===n.isStepper?function(e,t,n,i,r,o){var s,a=i.reduce((n,i)=>I_(I_({},n),{},{[i]:{from:e[i],velocity:0,to:t[i]}}),{}),l=null,c=i=>{s||(s=i);var u=(i-s)/n.dt;a=O_(n,a,u),r(I_(I_(I_({},e),t),k_((e,t)=>t.from,a))),s=i,Object.values(a).filter(R_).length&&(l=o.setTimeout(c))};return()=>(l=o.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,n,l,r,o):function(e,t,n,i,r,o,s){var a,l=null,c=r.reduce((n,i)=>I_(I_({},n),{},{[i]:[e[i],t[i]]}),{}),u=r=>{a||(a=r);var d=(r-a)/i,h=k_((e,t)=>L_(...t,n(d)),c);if(o(I_(I_(I_({},e),t),h)),d<1)l=s.setTimeout(u);else{var f=k_((e,t)=>L_(...t,n(1)),c);o(I_(I_(I_({},e),t),f))}};return()=>(l=s.setTimeout(u),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,n,i,l,r,o)};var D_=1e-4,N_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],F_=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),B_=(e,t)=>n=>{var i=N_(e,t);return F_(i,n)},z_=function(){return((e,t,n,i)=>{var r,o,s=B_(e,n),a=B_(t,i),l=(r=e,o=n,e=>{var t=[...N_(r,o).map((e,t)=>e*t).slice(1),0];return F_(t,e)}),c=e=>e>1?1:e<0?0:e,u=e=>{for(var t=e>1?1:e,n=t,i=0;i<8;++i){var r=s(n)-t,o=l(n);if(Math.abs(r-t)<D_||o<D_)return a(n);n=c(n-r/o)}return a(n)};return u.isStepper=!1,u})(...function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var i,r=t[0].split("(");if("cubic-bezier"===r[0]&&4===(null===(i=r[1])||void 0===i?void 0:i.split(")")[0].split(",").length)){var o=r[1].split(")")[0].split(",").map(e=>parseFloat(e));return[o[0],o[1],o[2],o[3]]}}return 4===t.length?t:[0,0,1,1]}(...arguments))};class U_{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),i=null,r=o=>{o-n>=t?e(o):"function"==typeof requestAnimationFrame&&(i=requestAnimationFrame(r))};return i=requestAnimationFrame(r),()=>{null!=i&&cancelAnimationFrame(i)}}}function j_(){return e=new U_,t=()=>null,n=!1,i=null,r=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[a,...l]=s;return"number"==typeof a?void(i=e.setTimeout(r.bind(null,l),a)):(r(a),void(i=e.setTimeout(r.bind(null,l))))}"string"==typeof o&&t(o),"object"==typeof o&&t(o),"function"==typeof o&&o()}},{stop:()=>{n=!0},start:e=>{n=!1,i&&(i(),i=null),r(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,n,i,r}var V_=x.createContext(j_);function H_(e,t){var n=x.useContext(V_);return x.useMemo(()=>null!=t?t:n(e),[e,t,n])}var W_=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),$_={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},G_={t:0},q_={t:1};function Y_(e){var t=Nc(e,$_),{isActive:n,canBegin:i,duration:r,easing:o,begin:s,onAnimationEnd:a,onAnimationStart:l,children:c}=t,u="auto"===n?!W_:n,d=H_(t.animationId,t.animationManager),[h,f]=x.useState(u?G_:q_),p=x.useRef(null);return x.useEffect(()=>{u||f(q_)},[u]),x.useEffect(()=>{if(!u||!i)return Sc;var e=M_(G_,q_,(e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return z_(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,r=(e,r,o)=>{var s=o+(-(e-r)*t-o*n)*i/1e3,a=o*i/1e3+e;return Math.abs(a-r)<D_&&Math.abs(s)<D_?[r,0]:[a,s]};return r.isStepper=!0,r.dt=i,r}();default:if("cubic-bezier"===e.split("(")[0])return z_(e)}return"function"==typeof e?e:null})(o),r,f,d.getTimeoutController());return d.start([l,s,()=>{p.current=e()},r,a]),()=>{d.stop(),p.current&&p.current(),a()}},[u,i,r,o,s,l,a,d]),c(h.t)}function X_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=x.useRef(mc(t)),i=x.useRef(e);return i.current!==e&&(n.current=mc(t),i.current=e),n.current}var K_=["radius"],Z_=["radius"];function Q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function J_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q_(Object(n),!0).forEach(function(t){ey(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ey(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ty.apply(null,arguments)}function ny(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var iy=(e,t,n,i,r)=>{var o,s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0;if(s>0&&r instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=r[d]>s?s:r[d];o="M".concat(e,",").concat(t+a*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+a*u[1])),o+="L ".concat(e+n,",").concat(t+i-a*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+i)),o+="L ".concat(e+l*u[3],",").concat(t+i),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+i-a*u[3])),o+="Z"}else if(s>0&&r===+r&&r>0){var h=Math.min(s,r);o="M ".concat(e,",").concat(t+a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+a*h,"\n            L ").concat(e+n,",").concat(t+i-a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+i,"\n            L ").concat(e+l*h,",").concat(t+i,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+i-a*h," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return o},ry={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oy=e=>{var t=Nc(e,ry),n=x.useRef(null),[i,r]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&r(e)}catch(t){}},[]);var{x:o,y:s,width:a,height:l,radius:c,className:u}=t,{animationEasing:d,animationDuration:h,animationBegin:f,isAnimationActive:p,isUpdateAnimationActive:m}=t,g=x.useRef(a),_=x.useRef(l),y=x.useRef(o),v=x.useRef(s),b=X_(x.useMemo(()=>({x:o,y:s,width:a,height:l,radius:c}),[o,s,a,l,c]),"rectangle-");if(o!==+o||s!==+s||a!==+a||l!==+l||0===a||0===l)return null;var w=$("recharts-rectangle",u);if(!m){var S=Ia(t),{radius:E}=S,C=ny(S,K_);return x.createElement("path",ty({},C,{radius:"number"==typeof c?c:void 0,className:w,d:iy(o,s,a,l,c)}))}var T=g.current,k=_.current,A=y.current,I=v.current,P="0px ".concat(-1===i?1:i,"px"),L="".concat(i,"px 0px"),R=T_(["strokeDasharray"],h,"string"==typeof d?d:ry.animationEasing);return x.createElement(Y_,{animationId:b,key:b,canBegin:i>0,duration:h,easing:d,isActive:m,begin:f},e=>{var i,r=yc(T,a,e),u=yc(k,l,e),d=yc(A,o,e),h=yc(I,s,e);n.current&&(g.current=r,_.current=u,y.current=d,v.current=h),i=p?e>0?{transition:R,strokeDasharray:L}:{strokeDasharray:P}:{strokeDasharray:L};var f=Ia(t),{radius:m}=f,b=ny(f,Z_);return x.createElement("path",ty({},b,{radius:"number"==typeof c?c:void 0,className:w,d:iy(d,h,r,u,c),ref:n,style:J_(J_({},i),t.style)}))})};function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(n),!0).forEach(function(t){ly(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ly(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cy=Math.PI/180,uy=e=>180*e/Math.PI,dy=(e,t,n,i)=>({x:e+Math.cos(-cy*i)*n,y:t+Math.sin(-cy*i)*n}),hy=(e,t)=>{var{startAngle:n,endAngle:i}=t,r=Math.floor(n/360),o=Math.floor(i/360);return e+360*Math.min(r,o)},fy=(e,t)=>{var{chartX:n,chartY:i}=e,{radius:r,angle:o}=((e,t)=>{var{x:n,y:i}=e,{cx:r,cy:o}=t,s=((e,t)=>{var{x:n,y:i}=e,{x:r,y:o}=t;return Math.sqrt((n-r)**2+(i-o)**2)})({x:n,y:i},{x:r,y:o});if(s<=0)return{radius:s,angle:0};var a=(n-r)/s,l=Math.acos(a);return i>o&&(l=2*Math.PI-l),{radius:s,angle:uy(l),angleInRadian:l}})({x:n,y:i},t),{innerRadius:s,outerRadius:a}=t;if(r<s||r>a)return null;if(0===r)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),r=Math.floor(n/360),o=Math.min(i,r);return{startAngle:t-360*o,endAngle:n-360*o}})(t),d=o;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?ay(ay({},t),{},{radius:r,angle:hy(d,t)}):null};function py(e){var{cx:t,cy:n,radius:i,startAngle:r,endAngle:o}=e;return{points:[dy(t,n,i,r),dy(t,n,i,o)],cx:t,cy:n,radius:i,startAngle:r,endAngle:o}}function my(){return my=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},my.apply(null,arguments)}var gy=e=>{var{cx:t,cy:n,radius:i,angle:r,sign:o,isExternal:s,cornerRadius:a,cornerIsExternal:l}=e,c=a*(s?1:-1)+i,u=Math.asin(a/c)/cy,d=l?r:r+o*u,h=l?r-o*u:r;return{center:dy(t,n,c,d),circleTangency:dy(t,n,i,d),lineTangency:dy(t,n,c*Math.cos(u*cy),h),theta:u}},_y=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:r,startAngle:o,endAngle:s}=e,a=((e,t)=>cc(t-e)*Math.min(Math.abs(t-e),359.999))(o,s),l=o+a,c=dy(t,n,r,o),u=dy(t,n,r,l),d="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(r,",").concat(r,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>l),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(i>0){var h=dy(t,n,i,o),f=dy(t,n,i,l);d+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(i,",").concat(i,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},yy={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vy=e=>{var t=Nc(e,yy),{cx:n,cy:i,innerRadius:r,outerRadius:o,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=t;if(o<r||c===u)return null;var h,f=$("recharts-sector",d),p=o-r,m=gc(s,p,0,!0);return h=m>0&&Math.abs(c-u)<360?(e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:r,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:a,startAngle:l,endAngle:c}=e,u=cc(c-l),{circleTangency:d,lineTangency:h,theta:f}=gy({cx:t,cy:n,radius:r,angle:l,sign:u,cornerRadius:o,cornerIsExternal:a}),{circleTangency:p,lineTangency:m,theta:g}=gy({cx:t,cy:n,radius:r,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:a}),_=a?Math.abs(l-c):Math.abs(l-c)-f-g;if(_<0)return s?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):_y({cx:t,cy:n,innerRadius:i,outerRadius:r,startAngle:l,endAngle:c});var y="M ".concat(h.x,",").concat(h.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(r,",").concat(r,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,"\n  ");if(i>0){var{circleTangency:v,lineTangency:b,theta:x}=gy({cx:t,cy:n,radius:i,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),{circleTangency:w,lineTangency:S,theta:E}=gy({cx:t,cy:n,radius:i,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),C=a?Math.abs(l-c):Math.abs(l-c)-x-E;if(C<0&&0===o)return"".concat(y,"L").concat(t,",").concat(n,"Z");y+="L".concat(S.x,",").concat(S.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(u>0),",").concat(v.x,",").concat(v.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,"Z")}else y+="L".concat(t,",").concat(n,"Z");return y})({cx:n,cy:i,innerRadius:r,outerRadius:o,cornerRadius:Math.min(m,p/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):_y({cx:n,cy:i,innerRadius:r,outerRadius:o,startAngle:c,endAngle:u}),x.createElement("path",my({},Ia(t),{className:f,d:h}))};function by(e,t,n){if("horizontal"===e)return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if("vertical"===e)return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(Rc(t)){if("centric"===e){var{cx:i,cy:r,innerRadius:o,outerRadius:s,angle:a}=t,l=dy(i,r,o,a),c=dy(i,r,s,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return py(t)}}var xy,wy,Sy,Ey,Cy,Ty={},ky={},Ay={};function Iy(){return xy||(xy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gd();e.toNumber=function(e){return t.isSymbol(e)?NaN:Number(e)}}(Ay)),Ay}function Py(){return wy||(wy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iy();e.toFinite=function(e){return e?(e=t.toNumber(e))===1/0||e===-1/0?(e<0?-1:1)*Number.MAX_VALUE:e==e?e:0:0===e?e:0}}(ky)),ky}function Ly(){return Cy?Ey:(Cy=1,Ey=(Sy||(Sy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ih(),n=Py();e.range=function(e,i,r){r&&"number"!=typeof r&&t.isIterateeCall(e,i,r)&&(i=r=void 0),e=n.toFinite(e),void 0===i?(i=e,e=0):i=n.toFinite(i),r=void 0===r?e<i?1:-1:n.toFinite(r);const o=Math.max(Math.ceil((i-e)/(r||1)),0),s=new Array(o);for(let t=0;t<o;t++)s[t]=e,e+=r;return s}}(Ty)),Ty).range)}const Ry=a(Ly());function Oy(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function My(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dy(e){let t,n,i;function r(e,i,r=0,o=e.length){if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<0?r=t+1:o=t}while(r<o)}return r}return 2!==e.length?(t=Oy,n=(t,n)=>Oy(e(t),n),i=(t,n)=>e(t)-n):(t=e===Oy||e===My?e:Ny,n=e,i=e),{left:r,center:function(e,t,n=0,o=e.length){const s=r(e,t,n,o-1);return s>n&&i(e[s-1],t)>-i(e[s],t)?s-1:s},right:function(e,i,r=0,o=e.length){if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<=0?r=t+1:o=t}while(r<o)}return r}}}function Ny(){return 0}function Fy(e){return null===e?NaN:+e}const By=Dy(Oy).right;Dy(Fy).center;const zy=(Uy=function(e){const t=Math.floor(e);if(t===e)return function(e){const t=2*e+1;return(n,i,r,o,s)=>{if(!((o-=s)>=r))return;let a=e*i[r];const l=s*e;for(let e=r,t=r+l;e<t;e+=s)a+=i[Math.min(o,e)];for(let e=r,c=o;e<=c;e+=s)a+=i[Math.min(o,e+l)],n[e]=a/t,a-=i[Math.max(r,e-l)]}}(e);const n=e-t,i=2*e+1;return(e,r,o,s,a)=>{if(!((s-=a)>=o))return;let l=t*r[o];const c=a*t,u=c+a;for(let t=o,n=o+c;t<n;t+=a)l+=r[Math.min(s,t)];for(let t=o,d=s;t<=d;t+=a)l+=r[Math.min(s,t+c)],e[t]=(l+n*(r[Math.max(o,t-u)]+r[Math.min(s,t+u)]))/i,l-=r[Math.max(o,t-c)]}},function(e,t,n=t){if(!((t=+t)>=0))throw new RangeError("invalid rx");if(!((n=+n)>=0))throw new RangeError("invalid ry");let{data:i,width:r,height:o}=e;if(!((r=Math.floor(r))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(void 0!==o?o:i.length/r))>=0))throw new RangeError("invalid height");if(!r||!o||!t&&!n)return e;const s=t&&Uy(t),a=n&&Uy(n),l=i.slice();return s&&a?(jy(s,l,i,r,o),jy(s,i,l,r,o),jy(s,l,i,r,o),Vy(a,i,l,r,o),Vy(a,l,i,r,o),Vy(a,i,l,r,o)):s?(jy(s,i,l,r,o),jy(s,l,i,r,o),jy(s,i,l,r,o)):a&&(Vy(a,i,l,r,o),Vy(a,l,i,r,o),Vy(a,i,l,r,o)),e});var Uy;function jy(e,t,n,i,r){for(let o=0,s=i*r;o<s;)e(t,n,o,o+=i,1)}function Vy(e,t,n,i,r){for(let o=0,s=i*r;o<i;++o)e(t,n,o,o+s,i)}function Hy(e,t){let n,i;if(void 0===t)for(const r of e)null!=r&&(void 0===n?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(void 0===n?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class Wy extends Map{constructor(e,t=Gy){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,i]of e)this.set(n,i)}get(e){return super.get($y(this,e))}has(e){return super.has($y(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}(this,e))}}function $y({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Gy(e){return null!==e&&"object"==typeof e?e.valueOf():e}function qy(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const Yy=Math.sqrt(50),Xy=Math.sqrt(10),Ky=Math.sqrt(2);function Zy(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=Yy?10:o>=Xy?5:o>=Ky?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Zy(e,t,2*n):[a,l,c]}function Qy(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const i=t<e,[r,o,s]=i?Zy(t,e,n):Zy(e,t,n);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(r+c)/-s;else for(let c=0;c<a;++c)l[c]=(r+c)*s;return l}function Jy(e,t,n){return Zy(e=+e,t=+t,n=+n)[2]}function ev(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?Jy(t,e,n):Jy(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function tv(e){return Math.max(1,Math.ceil(Math.log(function(e){let t=0;for(let n of e)null!=n&&(n=+n)>=n&&++t;return t}(e))/Math.LN2)+1)}function nv(e,t){let n;for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);return n}function iv(e,t){let n;for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);return n}function rv(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=void 0===r?qy:function(e=Oy){if(e===Oy)return qy;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}(r);i>n;){if(i-n>600){const o=i-n+1,s=t-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);rv(e,t,Math.max(n,Math.floor(t-s*l/o+c)),Math.min(i,Math.floor(t+(o-s)*l/o+c)),r)}const o=e[t];let s=n,a=i;for(ov(e,n,t),r(e[i],o)>0&&ov(e,n,i);s<a;){for(ov(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}0===r(e[n],o)?ov(e,n,a):(++a,ov(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function ov(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function sv(e,t,n){if((i=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||i<2)return iv(e);if(t>=1)return nv(e);var i,r=(i-1)*t,o=Math.floor(r),s=nv(rv(e,o).subarray(0,o+1));return s+(iv(e.subarray(o+1))-s)*(r-o)}}function av(e,t,n=Fy){if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(r-o)}}function lv(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function cv(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const uv=Symbol("implicit");function dv(){var e=new Wy,t=[],n=[],i=uv;function r(r){let o=e.get(r);if(void 0===o){if(i!==uv)return i;e.set(r,o=t.push(r)-1)}return n[o%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Wy;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return r},r.range=function(e){return arguments.length?(n=Array.from(e),r):n.slice()},r.unknown=function(e){return arguments.length?(i=e,r):i},r.copy=function(){return dv(t,n).unknown(i)},lv.apply(r,arguments),r}function hv(){var e,t,n=dv().unknown(void 0),i=n.domain,r=n.range,o=0,s=1,a=!1,l=0,c=0,u=.5;function d(){var n=i().length,d=s<o,h=d?s:o,f=d?o:s;e=(f-h)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),h+=(f-h-e*(n-l))*u,t=e*(1-l),a&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}(n).map(function(t){return h+e*t});return r(d?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),d()):i()},n.range=function(e){return arguments.length?([o,s]=e,o=+o,s=+s,d()):[o,s]},n.rangeRound=function(e){return[o,s]=e,o=+o,s=+s,a=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,d()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return hv(i(),[o,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},lv.apply(d(),arguments)}function fv(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fv(t())},e}function pv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mv(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function gv(){}var _v=.7,yv=1/_v,vv="\\s*([+-]?\\d+)\\s*",bv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wv=/^#([0-9a-f]{3,8})$/,Sv=new RegExp(`^rgb\\(${vv},${vv},${vv}\\)$`),Ev=new RegExp(`^rgb\\(${xv},${xv},${xv}\\)$`),Cv=new RegExp(`^rgba\\(${vv},${vv},${vv},${bv}\\)$`),Tv=new RegExp(`^rgba\\(${xv},${xv},${xv},${bv}\\)$`),kv=new RegExp(`^hsl\\(${bv},${xv},${xv}\\)$`),Av=new RegExp(`^hsla\\(${bv},${xv},${xv},${bv}\\)$`),Iv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pv(){return this.rgb().formatHex()}function Lv(){return this.rgb().formatRgb()}function Rv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ov(t):3===n?new Fv(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Mv(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Mv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Sv.exec(e))?new Fv(t[1],t[2],t[3],1):(t=Ev.exec(e))?new Fv(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Cv.exec(e))?Mv(t[1],t[2],t[3],t[4]):(t=Tv.exec(e))?Mv(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=kv.exec(e))?Hv(t[1],t[2]/100,t[3]/100,1):(t=Av.exec(e))?Hv(t[1],t[2]/100,t[3]/100,t[4]):Iv.hasOwnProperty(e)?Ov(Iv[e]):"transparent"===e?new Fv(NaN,NaN,NaN,0):null}function Ov(e){return new Fv(e>>16&255,e>>8&255,255&e,1)}function Mv(e,t,n,i){return i<=0&&(e=t=n=NaN),new Fv(e,t,n,i)}function Dv(e){return e instanceof gv||(e=Rv(e)),e?new Fv((e=e.rgb()).r,e.g,e.b,e.opacity):new Fv}function Nv(e,t,n,i){return 1===arguments.length?Dv(e):new Fv(e,t,n,null==i?1:i)}function Fv(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Bv(){return`#${Vv(this.r)}${Vv(this.g)}${Vv(this.b)}`}function zv(){const e=Uv(this.opacity);return`${1===e?"rgb(":"rgba("}${jv(this.r)}, ${jv(this.g)}, ${jv(this.b)}${1===e?")":`, ${e})`}`}function Uv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vv(e){return((e=jv(e))<16?"0":"")+e.toString(16)}function Hv(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $v(e,t,n,i)}function Wv(e){if(e instanceof $v)return new $v(e.h,e.s,e.l,e.opacity);if(e instanceof gv||(e=Rv(e)),!e)return new $v;if(e instanceof $v)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new $v(s,a,l,e.opacity)}function $v(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Gv(e){return(e=(e||0)%360)<0?e+360:e}function qv(e){return Math.max(0,Math.min(1,e||0))}function Yv(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}pv(gv,Rv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Pv,formatHex:Pv,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Wv(this).formatHsl()},formatRgb:Lv,toString:Lv}),pv(Fv,Nv,mv(gv,{brighter(e){return e=null==e?yv:Math.pow(yv,e),new Fv(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?_v:Math.pow(_v,e),new Fv(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fv(jv(this.r),jv(this.g),jv(this.b),Uv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bv,formatHex:Bv,formatHex8:function(){return`#${Vv(this.r)}${Vv(this.g)}${Vv(this.b)}${Vv(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:zv,toString:zv})),pv($v,function(e,t,n,i){return 1===arguments.length?Wv(e):new $v(e,t,n,null==i?1:i)},mv(gv,{brighter(e){return e=null==e?yv:Math.pow(yv,e),new $v(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?_v:Math.pow(_v,e),new $v(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Fv(Yv(e>=240?e-240:e+120,r,i),Yv(e,r,i),Yv(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new $v(Gv(this.h),qv(this.s),qv(this.l),Uv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uv(this.opacity);return`${1===e?"hsl(":"hsla("}${Gv(this.h)}, ${100*qv(this.s)}%, ${100*qv(this.l)}%${1===e?")":`, ${e})`}`}}));const Xv=Math.PI/180,Kv=180/Math.PI;var Zv=-.14861,Qv=1.78277,Jv=-.29227,eb=-.90649,tb=1.97294,nb=tb*eb,ib=tb*Qv,rb=Qv*Jv-eb*Zv;function ob(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof sb)return new sb(e.h,e.s,e.l,e.opacity);e instanceof Fv||(e=Dv(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(rb*i+nb*t-ib*n)/(rb+nb-ib),o=i-r,s=(tb*(n-r)-Jv*o)/eb,a=Math.sqrt(s*s+o*o)/(tb*r*(1-r)),l=a?Math.atan2(s,o)*Kv-120:NaN;return new sb(l<0?l+360:l,a,r,e.opacity)}(e):new sb(e,t,n,null==i?1:i)}function sb(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}pv(sb,ob,mv(gv,{brighter(e){return e=null==e?yv:Math.pow(yv,e),new sb(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?_v:Math.pow(_v,e),new sb(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Xv,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Fv(255*(t+n*(Zv*i+Qv*r)),255*(t+n*(Jv*i+eb*r)),255*(t+n*(tb*i)),this.opacity)}}));const ab=e=>()=>e;function lb(e,t){return function(n){return e+n*t}}function cb(e,t){var n=t-e;return n?lb(e,n):ab(isNaN(e)?t:e)}const ub=function e(t){var n=function(e){return 1===(e=+e)?cb:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):ab(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=Nv(e)).r,(t=Nv(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),s=cb(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function db(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(o){for(n=0;n<i;++n)r[n]=e[n]*(1-o)+t[n]*o;return r}}function hb(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=vb(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<r;++n)s[n]=o[n](e);return s}}function fb(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function pb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mb(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=vb(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var gb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_b=new RegExp(gb.source,"g");function yb(e,t){var n,i,r,o=gb.lastIndex=_b.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=gb.exec(e))&&(i=_b.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:pb(n,i)})),o=_b.lastIndex;return o<t.length&&(r=t.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)a[(n=l[i]).i]=n.x(e);return a.join("")})}function vb(e,t){var n,i,r=typeof t;return null==t||"boolean"===r?ab(t):("number"===r?pb:"string"===r?(n=Rv(t))?(t=n,ub):yb:t instanceof Rv?ub:t instanceof Date?fb:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?hb:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?mb:pb:db))(e,t)}function bb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var xb,wb=180/Math.PI,Sb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Eb(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*wb,skewX:Math.atan(l)*wb,scaleX:s,scaleY:a}}function Cb(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,i,r,o,s,a){if(e!==r||i!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:pb(e,r)},{i:l-2,x:pb(i,o)})}else(r||o)&&s.push("translate("+r+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:pb(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:pb(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(o.skewX,s.skewX,a,l),function(e,t,n,i,o,s){if(e!==n||t!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:pb(e,n)},{i:a-2,x:pb(t,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,i=l.length;++n<i;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var Tb=Cb(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Sb:Eb(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),kb=Cb(function(e){return null==e?Sb:(xb||(xb=document.createElementNS("http://www.w3.org/2000/svg","g")),xb.setAttribute("transform",e),(e=xb.transform.baseVal.consolidate())?Eb((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Sb)},", ",")",")");function Ab(e){return function t(n){function i(t,i){var r=e((t=ob(t)).h,(i=ob(i)).h),o=cb(t.s,i.s),s=cb(t.l,i.l),a=cb(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=o(e),t.l=s(Math.pow(e,n)),t.opacity=a(e),t+""}}return n=+n,i.gamma=t,i}(1)}const Ib=Ab(function(e,t){var n=t-e;return n?lb(e,n>180||n<-180?n-360*Math.round(n/360):n):ab(isNaN(e)?t:e)});function Pb(e,t){void 0===t&&(t=e,e=vb);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return o[t](e-t)}}function Lb(e){return+e}Ab(cb);var Rb=[0,1];function Ob(e){return e}function Mb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Db(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=Mb(r,i),o=n(s,o)):(i=Mb(i,r),o=n(o,s)),function(e){return o(i(e))}}function Nb(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=Mb(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=By(e,t,1,i)-1;return o[n](r[n](t))}}function Fb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bb(){var e,t,n,i,r,o,s=Rb,a=Rb,l=vb,c=Ob;function u(){var e=Math.min(s.length,a.length);return c!==Ob&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),i=e>2?Nb:Db,r=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=i(s.map(e),a,l)))(e(c(t)))}return d.invert=function(n){return c(t((o||(o=i(a,s.map(e),pb)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,Lb),u()):s.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),l=bb,u()},d.clamp=function(e){return arguments.length?(c=!!e||Ob,u()):c!==Ob},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function zb(){return Bb()(Ob,Ob)}function Ub(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function jb(e){return(e=Ub(Math.abs(e)))?e[1]:NaN}var Vb,Hb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wb(e){if(!(t=Hb.exec(e)))throw new Error("invalid format: "+e);var t;return new $b({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function $b(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Gb(e,t){var n=Ub(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Wb.prototype=$b.prototype,$b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const qb={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Gb(100*e,t),r:Gb,s:function(e,t){var n=Ub(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(Vb=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ub(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yb(e){return e}var Xb,Kb,Zb,Qb=Array.prototype.map,Jb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ex(e,t,n,i){var r,o=ev(e,t,n);switch((i=Wb(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jb(t)/3)))-jb(Math.abs(e)))}(o,s))||(i.precision=r),Zb(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jb(t)-jb(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-jb(Math.abs(e)))}(o))||(i.precision=r-2*("%"===i.type))}return Kb(i)}function tx(e){var t=e.domain;return e.ticks=function(e){var n=t();return Qy(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return ex(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,o=t(),s=0,a=o.length-1,l=o[s],c=o[a],u=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);u-- >0;){if((r=Jy(l,c,n))===i)return o[s]=l,o[a]=c,t(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function nx(){var e=zb();return e.copy=function(){return Fb(e,nx())},lv.apply(e,arguments),tx(e)}function ix(e,t){var n,i=0,r=(e=e.slice()).length-1,o=e[i],s=e[r];return s<o&&(n=i,i=r,r=n,n=o,o=s,s=n),e[i]=t.floor(o),e[r]=t.ceil(s),e}function rx(e){return Math.log(e)}function ox(e){return Math.exp(e)}function sx(e){return-Math.log(-e)}function ax(e){return-Math.exp(-e)}function lx(e){return isFinite(e)?+("1e"+e):e<0?0:e}function cx(e){return(t,n)=>-e(-t,n)}function ux(e){const t=e(rx,ox),n=t.domain;let i,r,o=10;function s(){return i=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),r=function(e){return 10===e?lx:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(i=cx(i),r=cx(r),e(sx,ax)):e(rx,ox),t}return t.base=function(e){return arguments.length?(o=+e,s()):o},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],a=t[t.length-1];const l=a<s;l&&([s,a]=[a,s]);let c,u,d=i(s),h=i(a);const f=null==e?10:+e;let p=[];if(!(o%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<o;++c)if(u=d<0?c/r(-d):c*r(d),!(u<s)){if(u>a)break;p.push(u)}}else for(;d<=h;++d)for(c=o-1;c>=1;--c)if(u=d>0?c/r(-d):c*r(d),!(u<s)){if(u>a)break;p.push(u)}2*p.length<f&&(p=Qy(s,a,f))}else p=Qy(d,h,Math.min(h-d,f)).map(r);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=Wb(n)).precision||(n.trim=!0),n=Kb(n)),e===1/0)return n;const s=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/r(Math.round(i(e)));return t*o<o-.5&&(t*=o),t<=s?n(e):""}},t.nice=()=>n(ix(n(),{floor:e=>r(Math.floor(i(e))),ceil:e=>r(Math.ceil(i(e)))})),t}function dx(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hx(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fx(e){var t=1,n=e(dx(t),hx(t));return n.constant=function(n){return arguments.length?e(dx(t=+n),hx(t)):t},tx(n)}function px(){var e=fx(Bb());return e.copy=function(){return Fb(e,px()).constant(e.constant())},lv.apply(e,arguments)}function mx(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gx(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _x(e){return e<0?-e*e:e*e}function yx(e){var t=e(Ob,Ob),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Ob,Ob):.5===n?e(gx,_x):e(mx(n),mx(1/n)):n},tx(t)}function vx(){var e=yx(Bb());return e.copy=function(){return Fb(e,vx()).exponent(e.exponent())},lv.apply(e,arguments),e}function bx(e){return Math.sign(e)*e*e}function xx(){var e,t=0,n=1,i=1,r=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[By(r,t,0,i)]:e}function a(){var e=-1;for(r=new Array(i);++e<i;)r[e]=((e+1)*n-(e-i)*t)/(i+1);return s}return s.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,a()):[t,n]},s.range=function(e){return arguments.length?(i=(o=Array.from(e)).length-1,a()):o.slice()},s.invertExtent=function(e){var s=o.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,r[0]]:s>=i?[r[i-1],n]:[r[s-1],r[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return r.slice()},s.copy=function(){return xx().domain([t,n]).range(o).unknown(e)},lv.apply(tx(s),arguments)}Xb=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Yb:(t=Qb.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],s=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(e.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?Yb:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Qb.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Wb(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,_=e.trim,y=e.type;"n"===y?(m=!0,y="g"):qb[y]||(void 0===g&&(g=12),_=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var v="$"===h?r:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?o:/[%p]/.test(y)?l:"",x=qb[y],w=/[defgprs%]/.test(y);function S(e){var r,o,l,h=v,S=b;if("c"===y)S=x(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),g),_&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==d&&(E=!1),h=(E?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===y?Jb[8+Vb/3]:"")+S+(E&&"("===d?")":""),w)for(r=-1,o=e.length;++r<o;)if(48>(l=e.charCodeAt(r))||l>57){S=(46===l?s+e.slice(r+1):e.slice(r))+S,e=e.slice(0,r);break}}m&&!f&&(e=i(e,1/0));var C=h.length+e.length+S.length,T=C<p?new Array(p-C+1).join(t):"";switch(m&&f&&(e=i(T+e,T.length?p-S.length:1/0),T=""),n){case"<":e=h+e+S+T;break;case"=":e=h+T+e+S;break;case"^":e=T.slice(0,C=T.length>>1)+h+e+S+T.slice(C);break;default:e=T+h+e+S}return a(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=Wb(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(jb(t)/3))),r=Math.pow(10,-i),o=Jb[8+i/3];return function(e){return n(r*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),Kb=Xb.format,Zb=Xb.formatPrefix;const wx=new Date,Sx=new Date;function Ex(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=t=>(e(t=new Date(+t)),t),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=e=>{const t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),r.range=(n,i,o)=>{const s=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return s;let a;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<i);return s},r.filter=n=>Ex(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}),n&&(r.count=(t,i)=>(wx.setTime(+t),Sx.setTime(+i),e(wx),e(Sx),Math.floor(n(wx,Sx))),r.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?t=>i(t)%e===0:t=>r.count(0,t)%e===0):r:null)),r}const Cx=Ex(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Cx.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Ex(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Cx:null),Cx.range;const Tx=1e3,kx=6e4,Ax=36e5,Ix=864e5,Px=6048e5,Lx=31536e6,Rx=Ex(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Tx)},(e,t)=>(t-e)/Tx,e=>e.getUTCSeconds());Rx.range;const Ox=Ex(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tx)},(e,t)=>{e.setTime(+e+t*kx)},(e,t)=>(t-e)/kx,e=>e.getMinutes());Ox.range;const Mx=Ex(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kx)},(e,t)=>(t-e)/kx,e=>e.getUTCMinutes());Mx.range;const Dx=Ex(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tx-e.getMinutes()*kx)},(e,t)=>{e.setTime(+e+t*Ax)},(e,t)=>(t-e)/Ax,e=>e.getHours());Dx.range;const Nx=Ex(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ax)},(e,t)=>(t-e)/Ax,e=>e.getUTCHours());Nx.range;const Fx=Ex(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kx)/Ix,e=>e.getDate()-1);Fx.range;const Bx=Ex(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ix,e=>e.getUTCDate()-1);Bx.range;const zx=Ex(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ix,e=>Math.floor(e/Ix));function Ux(e){return Ex(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kx)/Px)}zx.range;const jx=Ux(0),Vx=Ux(1),Hx=Ux(2),Wx=Ux(3),$x=Ux(4),Gx=Ux(5),qx=Ux(6);function Yx(e){return Ex(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Px)}jx.range,Vx.range,Hx.range,Wx.range,$x.range,Gx.range,qx.range;const Xx=Yx(0),Kx=Yx(1),Zx=Yx(2),Qx=Yx(3),Jx=Yx(4),ew=Yx(5),tw=Yx(6);Xx.range,Kx.range,Zx.range,Qx.range,Jx.range,ew.range,tw.range;const nw=Ex(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());nw.range;const iw=Ex(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());iw.range;const rw=Ex(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());rw.every=e=>isFinite(e=Math.floor(e))&&e>0?Ex(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,rw.range;const ow=Ex(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function sw(e,t,n,i,r,o){const s=[[Rx,1,Tx],[Rx,5,5e3],[Rx,15,15e3],[Rx,30,3e4],[o,1,kx],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,Ax],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,Ix],[i,2,1728e5],[n,1,Px],[t,1,2592e6],[t,3,7776e6],[e,1,Lx]];function a(t,n,i){const r=Math.abs(n-t)/i,o=Dy(([,,e])=>e).right(s,r);if(o===s.length)return e.every(ev(t/Lx,n/Lx,i));if(0===o)return Cx.every(Math.max(ev(t,n,i),1));const[a,l]=s[r/s[o-1][2]<s[o][2]/r?o-1:o];return a.every(l)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const r=n&&"function"==typeof n.range?n:a(e,t,n),o=r?r.range(e,+t+1):[];return i?o.reverse():o},a]}ow.every=e=>isFinite(e=Math.floor(e))&&e>0?Ex(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,ow.range;const[aw,lw]=sw(ow,iw,Xx,zx,Nx,Mx),[cw,uw]=sw(rw,nw,jx,Fx,Dx,Ox);function dw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var pw,mw,gw,_w={"-":"",_:" ",0:"0"},yw=/^\s*\d+/,vw=/^%/,bw=/[\\^$*+?|[\]().{}]/g;function xw(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function ww(e){return e.replace(bw,"\\$&")}function Sw(e){return new RegExp("^(?:"+e.map(ww).join("|")+")","i")}function Ew(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Cw(e,t,n){var i=yw.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Tw(e,t,n){var i=yw.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function kw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Aw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Iw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Pw(e,t,n){var i=yw.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Lw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Rw(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Ow(e,t,n){var i=yw.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function Mw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Dw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Nw(e,t,n){var i=yw.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Fw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Bw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function zw(e,t,n){var i=yw.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Uw(e,t,n){var i=yw.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function jw(e,t,n){var i=yw.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Vw(e,t,n){var i=vw.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Hw(e,t,n){var i=yw.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Ww(e,t,n){var i=yw.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function $w(e,t){return xw(e.getDate(),t,2)}function Gw(e,t){return xw(e.getHours(),t,2)}function qw(e,t){return xw(e.getHours()%12||12,t,2)}function Yw(e,t){return xw(1+Fx.count(rw(e),e),t,3)}function Xw(e,t){return xw(e.getMilliseconds(),t,3)}function Kw(e,t){return Xw(e,t)+"000"}function Zw(e,t){return xw(e.getMonth()+1,t,2)}function Qw(e,t){return xw(e.getMinutes(),t,2)}function Jw(e,t){return xw(e.getSeconds(),t,2)}function eS(e){var t=e.getDay();return 0===t?7:t}function tS(e,t){return xw(jx.count(rw(e)-1,e),t,2)}function nS(e){var t=e.getDay();return t>=4||0===t?$x(e):$x.ceil(e)}function iS(e,t){return e=nS(e),xw($x.count(rw(e),e)+(4===rw(e).getDay()),t,2)}function rS(e){return e.getDay()}function oS(e,t){return xw(Vx.count(rw(e)-1,e),t,2)}function sS(e,t){return xw(e.getFullYear()%100,t,2)}function aS(e,t){return xw((e=nS(e)).getFullYear()%100,t,2)}function lS(e,t){return xw(e.getFullYear()%1e4,t,4)}function cS(e,t){var n=e.getDay();return xw((e=n>=4||0===n?$x(e):$x.ceil(e)).getFullYear()%1e4,t,4)}function uS(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xw(t/60|0,"0",2)+xw(t%60,"0",2)}function dS(e,t){return xw(e.getUTCDate(),t,2)}function hS(e,t){return xw(e.getUTCHours(),t,2)}function fS(e,t){return xw(e.getUTCHours()%12||12,t,2)}function pS(e,t){return xw(1+Bx.count(ow(e),e),t,3)}function mS(e,t){return xw(e.getUTCMilliseconds(),t,3)}function gS(e,t){return mS(e,t)+"000"}function _S(e,t){return xw(e.getUTCMonth()+1,t,2)}function yS(e,t){return xw(e.getUTCMinutes(),t,2)}function vS(e,t){return xw(e.getUTCSeconds(),t,2)}function bS(e){var t=e.getUTCDay();return 0===t?7:t}function xS(e,t){return xw(Xx.count(ow(e)-1,e),t,2)}function wS(e){var t=e.getUTCDay();return t>=4||0===t?Jx(e):Jx.ceil(e)}function SS(e,t){return e=wS(e),xw(Jx.count(ow(e),e)+(4===ow(e).getUTCDay()),t,2)}function ES(e){return e.getUTCDay()}function CS(e,t){return xw(Kx.count(ow(e)-1,e),t,2)}function TS(e,t){return xw(e.getUTCFullYear()%100,t,2)}function kS(e,t){return xw((e=wS(e)).getUTCFullYear()%100,t,2)}function AS(e,t){return xw(e.getUTCFullYear()%1e4,t,4)}function IS(e,t){var n=e.getUTCDay();return xw((e=n>=4||0===n?Jx(e):Jx.ceil(e)).getUTCFullYear()%1e4,t,4)}function PS(){return"+0000"}function LS(){return"%"}function RS(e){return+e}function OS(e){return Math.floor(+e/1e3)}function MS(e){return new Date(e)}function DS(e){return e instanceof Date?+e:+new Date(+e)}function NS(e,t,n,i,r,o,s,a,l,c){var u=zb(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),_=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function x(e){return(l(e)<e?f:a(e)<e?p:s(e)<e?m:o(e)<e?g:i(e)<e?r(e)<e?_:y:n(e)<e?v:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,DS)):h().map(MS)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?x:c(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(ix(n,e)):u},u.copy=function(){return Fb(u,NS(e,t,n,i,r,o,s,a,l,c))},u}function FS(){return lv.apply(NS(cw,uw,rw,nw,jx,Fx,Dx,Ox,Rx,mw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BS(){var e,t,n,i,r,o=0,s=1,a=Ob,l=!1;function c(t){return null==t||isNaN(t=+t)?r:a(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,i;return arguments.length?([n,i]=t,a=e(n,i),c):[a(0),a(1)]}}return c.domain=function(r){return arguments.length?([o,s]=r,e=i(o=+o),t=i(s=+s),n=e===t?0:1/(t-e),c):[o,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(a=e,c):a},c.range=u(vb),c.rangeRound=u(bb),c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return i=r,e=r(o),t=r(s),n=e===t?0:1/(t-e),c}}function zS(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function US(){var e=tx(BS()(Ob));return e.copy=function(){return zS(e,US())},cv.apply(e,arguments)}function jS(){var e=yx(BS());return e.copy=function(){return zS(e,jS()).exponent(e.exponent())},cv.apply(e,arguments)}function VS(){var e,t,n,i,r,o,s,a=0,l=.5,c=1,u=1,d=Ob,h=!1;function f(e){return isNaN(e=+e)?s:(e=.5+((e=+o(e))-t)*(u*e<u*t?i:r),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,i,r;return arguments.length?([n,i,r]=t,d=Pb(e,[n,i,r]),f):[d(0),d(.5),d(1)]}}return f.domain=function(s){return arguments.length?([a,l,c]=s,e=o(a=+a),t=o(l=+l),n=o(c=+c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,f):[a,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(vb),f.rangeRound=p(bb),f.unknown=function(e){return arguments.length?(s=e,f):s},function(s){return o=s,e=s(a),t=s(l),n=s(c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function HS(){var e=yx(VS());return e.copy=function(){return zS(e,HS()).exponent(e.exponent())},cv.apply(e,arguments)}pw=function(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=Sw(r),u=Ew(r),d=Sw(o),h=Ew(o),f=Sw(s),p=Ew(s),m=Sw(a),g=Ew(a),_=Sw(l),y=Ew(l),v={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:$w,e:$w,f:Kw,g:aS,G:cS,H:Gw,I:qw,j:Yw,L:Xw,m:Zw,M:Qw,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:RS,s:OS,S:Jw,u:eS,U:tS,V:iS,w:rS,W:oS,x:null,X:null,y:sS,Y:lS,Z:uS,"%":LS},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:dS,e:dS,f:gS,g:kS,G:IS,H:hS,I:fS,j:pS,L:mS,m:_S,M:yS,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:RS,s:OS,S:vS,u:bS,U:xS,V:SS,w:ES,W:CS,x:null,X:null,y:TS,Y:AS,Z:PS,"%":LS},x={a:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=d.exec(t.slice(n));return i?(e.w=h.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=_.exec(t.slice(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=g.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return E(e,t,n,i)},d:Dw,e:Dw,f:jw,g:Lw,G:Pw,H:Fw,I:Fw,j:Nw,L:Uw,m:Mw,M:Bw,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:Ow,Q:Hw,s:Ww,S:zw,u:Tw,U:kw,V:Aw,w:Cw,W:Iw,x:function(e,t,i){return E(e,n,t,i)},X:function(e,t,n){return E(e,i,t,n)},y:Lw,Y:Pw,Z:Rw,"%":Vw};function w(e,t){return function(n){var i,r,o,s=[],a=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===e.charCodeAt(a)&&(s.push(e.slice(l,a)),null!=(r=_w[i=e.charAt(++a)])?i=e.charAt(++a):r="e"===i?" ":"0",(o=t[i])&&(i=o(n,r)),s.push(i),l=a+1);return s.push(e.slice(l,a)),s.join("")}}function S(e,t){return function(n){var i,r,o=fw(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=hw(fw(o.y,0,1))).getUTCDay(),i=r>4||0===r?Kx.ceil(i):Kx(i),i=Bx.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=dw(fw(o.y,0,1))).getDay(),i=r>4||0===r?Vx.ceil(i):Vx(i),i=Fx.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?hw(fw(o.y,0,1)).getUTCDay():dw(fw(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,hw(o)):dw(o)}}function E(e,t,n,i){for(var r,o,s=0,a=t.length,l=n.length;s<a;){if(i>=l)return-1;if(37===(r=t.charCodeAt(s++))){if(r=t.charAt(s++),!(o=x[r in _w?t.charAt(s++):r])||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=w(n,v),v.X=w(i,v),v.c=w(t,v),b.x=w(n,b),b.X=w(i,b),b.c=w(t,b),{format:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),mw=pw.format,pw.parse,gw=pw.utcFormat,pw.utcParse;const WS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hv,scaleDiverging:function e(){var t=tx(VS()(Ob));return t.copy=function(){return zS(t,e())},cv.apply(t,arguments)},scaleDivergingLog:function e(){var t=ux(VS()).domain([.1,1,10]);return t.copy=function(){return zS(t,e()).base(t.base())},cv.apply(t,arguments)},scaleDivergingPow:HS,scaleDivergingSqrt:function(){return HS.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=fx(VS());return t.copy=function(){return zS(t,e()).constant(t.constant())},cv.apply(t,arguments)},scaleIdentity:function e(t){var n;function i(e){return null==e||isNaN(e=+e)?n:e}return i.invert=i,i.domain=i.range=function(e){return arguments.length?(t=Array.from(e,Lb),i):t.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,Lb):[0,1],tx(i)},scaleImplicit:uv,scaleLinear:nx,scaleLog:function e(){const t=ux(Bb()).domain([1,10]);return t.copy=()=>Fb(t,e()).base(t.base()),lv.apply(t,arguments),t},scaleOrdinal:dv,scalePoint:function(){return fv(hv.apply(null,arguments).paddingInner(1))},scalePow:vx,scaleQuantile:function e(){var t,n=[],i=[],r=[];function o(){var e=0,t=Math.max(1,i.length);for(r=new Array(t-1);++e<t;)r[e-1]=av(n,e/t);return s}function s(e){return null==e||isNaN(e=+e)?t:i[By(r,e)]}return s.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[t>0?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(Oy),o()},s.range=function(e){return arguments.length?(i=Array.from(e),o()):i.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return r.slice()},s.copy=function(){return e().domain(n).range(i).unknown(t)},lv.apply(s,arguments)},scaleQuantize:xx,scaleRadial:function e(){var t,n=zb(),i=[0,1],r=!1;function o(e){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(i)?t:r?Math.round(i):i}return o.invert=function(e){return n.invert(bx(e))},o.domain=function(e){return arguments.length?(n.domain(e),o):n.domain()},o.range=function(e){return arguments.length?(n.range((i=Array.from(e,Lb)).map(bx)),o):i.slice()},o.rangeRound=function(e){return o.range(e).round(!0)},o.round=function(e){return arguments.length?(r=!!e,o):r},o.clamp=function(e){return arguments.length?(n.clamp(e),o):n.clamp()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e(n.domain(),i).round(r).clamp(n.clamp()).unknown(t)},lv.apply(o,arguments),tx(o)},scaleSequential:US,scaleSequentialLog:function e(){var t=ux(BS()).domain([1,10]);return t.copy=function(){return zS(t,e()).base(t.base())},cv.apply(t,arguments)},scaleSequentialPow:jS,scaleSequentialQuantile:function e(){var t=[],n=Ob;function i(e){if(null!=e&&!isNaN(e=+e))return n((By(t,e,1)-1)/(t.length-1))}return i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Oy),i},i.interpolator=function(e){return arguments.length?(n=e,i):n},i.range=function(){return t.map((e,i)=>n(i/(t.length-1)))},i.quantiles=function(e){return Array.from({length:e+1},(n,i)=>sv(t,i/e))},i.copy=function(){return e(n).domain(t)},cv.apply(i,arguments)},scaleSequentialSqrt:function(){return jS.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=fx(BS());return t.copy=function(){return zS(t,e()).constant(t.constant())},cv.apply(t,arguments)},scaleSqrt:function(){return vx.apply(null,arguments).exponent(.5)},scaleSymlog:px,scaleThreshold:function e(){var t,n=[.5],i=[0,1],r=1;function o(e){return null!=e&&e<=e?i[By(n,e,0,r)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),r=Math.min(n.length,i.length-1),o):n.slice()},o.range=function(e){return arguments.length?(i=Array.from(e),r=Math.min(n.length,i.length-1),o):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(i).unknown(t)},lv.apply(o,arguments)},scaleTime:FS,scaleUtc:function(){return lv.apply(NS(aw,lw,ow,iw,Xx,Bx,Nx,Mx,Rx,gw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:ex},Symbol.toStringTag,{value:"Module"}));var $S=e=>e.chartData,GS=Dd([$S],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),qS=(e,t,n,i)=>i?GS(e):$S(e);function YS(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(Im(t)&&Im(n))return!0}return!1}function XS(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function KS(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var n,i,[r,o]=e;if(Im(r))n=r;else if("function"==typeof r)return;if(Im(o))i=o;else if("function"==typeof o)return;var s=[n,i];if(YS(s))return s}}var ZS,QS=1e9,JS=!0,eE="[DecimalError] ",tE=eE+"Invalid argument: ",nE=eE+"Exponent out of range: ",iE=Math.floor,rE=Math.pow,oE=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sE=1e7,aE=iE(1286742750677284.5),lE={};function cE(e,t){var n,i,r,o,s,a,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),JS?vE(t,d):t;if(l=e.d,c=t.d,s=e.e,r=t.e,l=l.slice(),o=s-r){for(o<0?(i=l,o=-o,a=c.length):(i=c,r=s,a=l.length),o>(a=(s=Math.ceil(d/7))>a?s+1:a+1)&&(o=a,i.length=1),i.reverse();o--;)i.push(0);i.reverse()}for((a=l.length)-(o=c.length)<0&&(o=a,i=c,c=l,l=i),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/sE|0,l[o]%=sE;for(n&&(l.unshift(n),++r),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=r,JS?vE(t,d):t}function uE(e,t,n){if(e!==~~e||e<t||e>n)throw Error(tE+e)}function dE(e){var t,n,i,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)(n=7-(i=e[t]+"").length)&&(o+=gE(n)),o+=i;(n=7-(i=(s=e[t])+"").length)&&(o+=gE(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}lE.absoluteValue=lE.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},lE.comparedTo=lE.cmp=function(e){var t,n,i,r,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(i=o.d.length)<(r=e.d.length)?i:r;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return i===r?0:i>r^o.s<0?1:-1},lE.decimalPlaces=lE.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},lE.dividedBy=lE.div=function(e){return hE(this,new this.constructor(e))},lE.dividedToIntegerBy=lE.idiv=function(e){var t=this.constructor;return vE(hE(this,new t(e),0,1),t.precision)},lE.equals=lE.eq=function(e){return!this.cmp(e)},lE.exponent=function(){return pE(this)},lE.greaterThan=lE.gt=function(e){return this.cmp(e)>0},lE.greaterThanOrEqualTo=lE.gte=function(e){return this.cmp(e)>=0},lE.isInteger=lE.isint=function(){return this.e>this.d.length-2},lE.isNegative=lE.isneg=function(){return this.s<0},lE.isPositive=lE.ispos=function(){return this.s>0},lE.isZero=function(){return 0===this.s},lE.lessThan=lE.lt=function(e){return this.cmp(e)<0},lE.lessThanOrEqualTo=lE.lte=function(e){return this.cmp(e)<1},lE.logarithm=lE.log=function(e){var t,n=this,i=n.constructor,r=i.precision,o=r+5;if(void 0===e)e=new i(10);else if((e=new i(e)).s<1||e.eq(ZS))throw Error(eE+"NaN");if(n.s<1)throw Error(eE+(n.s?"NaN":"-Infinity"));return n.eq(ZS)?new i(0):(JS=!1,t=hE(_E(n,o),_E(e,o),o),JS=!0,vE(t,r))},lE.minus=lE.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bE(t,e):cE(t,(e.s=-e.s,e))},lE.modulo=lE.mod=function(e){var t,n=this,i=n.constructor,r=i.precision;if(!(e=new i(e)).s)throw Error(eE+"NaN");return n.s?(JS=!1,t=hE(n,e,0,1).times(e),JS=!0,n.minus(t)):vE(new i(n),r)},lE.naturalExponential=lE.exp=function(){return fE(this)},lE.naturalLogarithm=lE.ln=function(){return _E(this)},lE.negated=lE.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},lE.plus=lE.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cE(t,e):bE(t,(e.s=-e.s,e))},lE.precision=lE.sd=function(e){var t,n,i,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(tE+e);if(t=pE(r)+1,n=7*(i=r.d.length-1)+1,i=r.d[i]){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return e&&t>n?t:n},lE.squareRoot=lE.sqrt=function(){var e,t,n,i,r,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(eE+"NaN")}for(e=pE(a),JS=!1,0==(r=Math.sqrt(+a))||r==1/0?(((t=dE(a.d)).length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=iE((e+1)/2)-(e<0||e%2),i=new l(t=r==1/0?"5e"+e:(t=r.toExponential()).slice(0,t.indexOf("e")+1)+e)):i=new l(r.toString()),r=s=(n=l.precision)+3;;)if(i=(o=i).plus(hE(a,o,s+2)).times(.5),dE(o.d).slice(0,s)===(t=dE(i.d)).slice(0,s)){if(t=t.slice(s-3,s+1),r==s&&"4999"==t){if(vE(o,n+1,0),o.times(o).eq(a)){i=o;break}}else if("9999"!=t)break;s+=4}return JS=!0,vE(i,n)},lE.times=lE.mul=function(e){var t,n,i,r,o,s,a,l,c,u=this,d=u.constructor,h=u.d,f=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,(l=h.length)<(c=f.length)&&(o=h,h=f,f=o,s=l,l=c,c=s),o=[],i=s=l+c;i--;)o.push(0);for(i=c;--i>=0;){for(t=0,r=l+i;r>i;)a=o[r]+f[i]*h[r-i-1]+t,o[r--]=a%sE|0,t=a/sE|0;o[r]=(o[r]+t)%sE|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,JS?vE(e,d.precision):e},lE.toDecimalPlaces=lE.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),void 0===e?n:(uE(e,0,QS),void 0===t?t=i.rounding:uE(t,0,8),vE(n,e+pE(n)+1,t))},lE.toExponential=function(e,t){var n,i=this,r=i.constructor;return void 0===e?n=xE(i,!0):(uE(e,0,QS),void 0===t?t=r.rounding:uE(t,0,8),n=xE(i=vE(new r(i),e+1,t),!0,e+1)),n},lE.toFixed=function(e,t){var n,i,r=this,o=r.constructor;return void 0===e?xE(r):(uE(e,0,QS),void 0===t?t=o.rounding:uE(t,0,8),n=xE((i=vE(new o(r),e+pE(r)+1,t)).abs(),!1,e+pE(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)},lE.toInteger=lE.toint=function(){var e=this,t=e.constructor;return vE(new t(e),pE(e)+1,t.rounding)},lE.toNumber=function(){return+this},lE.toPower=lE.pow=function(e){var t,n,i,r,o,s,a=this,l=a.constructor,c=+(e=new l(e));if(!e.s)return new l(ZS);if(!(a=new l(a)).s){if(e.s<1)throw Error(eE+"Infinity");return a}if(a.eq(ZS))return a;if(i=l.precision,e.eq(ZS))return vE(a,i);if(s=(t=e.e)>=(n=e.d.length-1),o=a.s,s){if((n=c<0?-c:c)<=9007199254740991){for(r=new l(ZS),t=Math.ceil(i/7+4),JS=!1;n%2&&wE((r=r.times(a)).d,t),0!==(n=iE(n/2));)wE((a=a.times(a)).d,t);return JS=!0,e.s<0?new l(ZS).div(r):vE(r,i)}}else if(o<0)throw Error(eE+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,a.s=1,JS=!1,r=e.times(_E(a,i+12)),JS=!0,(r=fE(r)).s=o,r},lE.toPrecision=function(e,t){var n,i,r=this,o=r.constructor;return void 0===e?i=xE(r,(n=pE(r))<=o.toExpNeg||n>=o.toExpPos):(uE(e,1,QS),void 0===t?t=o.rounding:uE(t,0,8),i=xE(r=vE(new o(r),e,t),e<=(n=pE(r))||n<=o.toExpNeg,e)),i},lE.toSignificantDigits=lE.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(uE(e,1,QS),void 0===t?t=n.rounding:uE(t,0,8)),vE(new n(this),e,t)},lE.toString=lE.valueOf=lE.val=lE.toJSON=lE[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=pE(e),n=e.constructor;return xE(e,t<=n.toExpNeg||t>=n.toExpPos)};var hE=function(){function e(e,t){var n,i=0,r=e.length;for(e=e.slice();r--;)n=e[r]*t+i,e[r]=n%sE|0,i=n/sE|0;return i&&e.unshift(i),e}function t(e,t,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(e[r]!=t[r]){o=e[r]>t[r]?1:-1;break}return o}function n(e,t,n){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*sE+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,r,o,s){var a,l,c,u,d,h,f,p,m,g,_,y,v,b,x,w,S,E,C=i.constructor,T=i.s==r.s?1:-1,k=i.d,A=r.d;if(!i.s)return new C(i);if(!r.s)throw Error(eE+"Division by zero");for(l=i.e-r.e,S=A.length,x=k.length,p=(f=new C(T)).d=[],c=0;A[c]==(k[c]||0);)++c;if(A[c]>(k[c]||0)&&--l,(y=null==o?o=C.precision:s?o+(pE(i)-pE(r))+1:o)<0)return new C(0);if(y=y/7+2|0,c=0,1==S)for(u=0,A=A[0],y++;(c<x||u)&&y--;c++)v=u*sE+(k[c]||0),p[c]=v/A|0,u=v%A|0;else{for((u=sE/(A[0]+1)|0)>1&&(A=e(A,u),k=e(k,u),S=A.length,x=k.length),b=S,g=(m=k.slice(0,S)).length;g<S;)m[g++]=0;(E=A.slice()).unshift(0),w=A[0],A[1]>=sE/2&&++w;do{u=0,(a=t(A,m,S,g))<0?(_=m[0],S!=g&&(_=_*sE+(m[1]||0)),(u=_/w|0)>1?(u>=sE&&(u=sE-1),1==(a=t(d=e(A,u),m,h=d.length,g=m.length))&&(u--,n(d,S<h?E:A,h))):(0==u&&(a=u=1),d=A.slice()),(h=d.length)<g&&d.unshift(0),n(m,d,g),-1==a&&(a=t(A,m,S,g=m.length))<1&&(u++,n(m,S<g?E:A,g)),g=m.length):0===a&&(u++,m=[0]),p[c++]=u,a&&m[0]?m[g++]=k[b]||0:(m=[k[b]],g=1)}while((b++<x||void 0!==m[0])&&y--)}return p[0]||p.shift(),f.e=l,vE(f,s?o+pE(f)+1:o)}}();function fE(e,t){var n,i,r,o,s,a=0,l=0,c=e.constructor,u=c.precision;if(pE(e)>16)throw Error(nE+pE(e));if(!e.s)return new c(ZS);for(JS=!1,s=u,o=new c(.03125);e.abs().gte(.1);)e=e.times(o),l+=5;for(s+=Math.log(rE(2,l))/Math.LN10*2+5|0,n=i=r=new c(ZS),c.precision=s;;){if(i=vE(i.times(e),s),n=n.times(++a),dE((o=r.plus(hE(i,n,s))).d).slice(0,s)===dE(r.d).slice(0,s)){for(;l--;)r=vE(r.times(r),s);return c.precision=u,null==t?(JS=!0,vE(r,u)):r}r=o}}function pE(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function mE(e,t,n){if(t>e.LN10.sd())throw JS=!0,n&&(e.precision=n),Error(eE+"LN10 precision limit exceeded");return vE(new e(e.LN10),t)}function gE(e){for(var t="";e--;)t+="0";return t}function _E(e,t){var n,i,r,o,s,a,l,c,u,d=1,h=e,f=h.d,p=h.constructor,m=p.precision;if(h.s<1)throw Error(eE+(h.s?"NaN":"-Infinity"));if(h.eq(ZS))return new p(0);if(null==t?(JS=!1,c=m):c=t,h.eq(10))return null==t&&(JS=!0),mE(p,c);if(c+=10,p.precision=c,i=(n=dE(f)).charAt(0),o=pE(h),!(Math.abs(o)<15e14))return l=mE(p,c+2,m).times(o+""),h=_E(new p(i+"."+n.slice(1)),c-10).plus(l),p.precision=m,null==t?(JS=!0,vE(h,m)):h;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=dE((h=h.times(e)).d)).charAt(0),d++;for(o=pE(h),i>1?(h=new p("0."+n),o++):h=new p(i+"."+n.slice(1)),a=s=h=hE(h.minus(ZS),h.plus(ZS),c),u=vE(h.times(h),c),r=3;;){if(s=vE(s.times(u),c),dE((l=a.plus(hE(s,new p(r),c))).d).slice(0,c)===dE(a.d).slice(0,c))return a=a.times(2),0!==o&&(a=a.plus(mE(p,c+2,m).times(o+""))),a=hE(a,new p(d),c),p.precision=m,null==t?(JS=!0,vE(a,m)):a;a=l,r+=2}}function yE(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;48===t.charCodeAt(i);)++i;for(r=t.length;48===t.charCodeAt(r-1);)--r;if(t=t.slice(i,r)){if(r-=i,n=n-i-1,e.e=iE(n/7),e.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=7;i<r;)e.d.push(+t.slice(i,i+=7));i=7-(t=t.slice(i)).length}else i-=r;for(;i--;)t+="0";if(e.d.push(+t),JS&&(e.e>aE||e.e<-aE))throw Error(nE+n)}else e.s=0,e.e=0,e.d=[0];return e}function vE(e,t,n){var i,r,o,s,a,l,c,u,d=e.d;for(s=1,o=d[0];o>=10;o/=10)s++;if((i=t-s)<0)i+=7,r=t,c=d[u=0];else{if((u=Math.ceil((i+1)/7))>=(o=d.length))return e;for(c=o=d[u],s=1;o>=10;o/=10)s++;r=(i%=7)-7+s}if(void 0!==n&&(a=c/(o=rE(10,s-r-1))%10|0,l=t<0||void 0!==d[u+1]||c%o,l=n<4?(a||l)&&(0==n||n==(e.s<0?3:2)):a>5||5==a&&(4==n||l||6==n&&(i>0?r>0?c/rE(10,s-r):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return l?(o=pE(e),d.length=1,t=t-o-1,d[0]=rE(10,(7-t%7)%7),e.e=iE(-t/7)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==i?(d.length=u,o=1,u--):(d.length=u+1,o=rE(10,7-i),d[u]=r>0?(c/rE(10,s-r)%rE(10,r)|0)*o:0),l)for(;;){if(0==u){(d[0]+=o)==sE&&(d[0]=1,++e.e);break}if(d[u]+=o,d[u]!=sE)break;d[u--]=0,o=1}for(i=d.length;0===d[--i];)d.pop();if(JS&&(e.e>aE||e.e<-aE))throw Error(nE+pE(e));return e}function bE(e,t){var n,i,r,o,s,a,l,c,u,d,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),JS?vE(t,f):t;if(l=e.d,d=t.d,i=t.e,c=e.e,l=l.slice(),s=c-i){for((u=s<0)?(n=l,s=-s,a=d.length):(n=d,i=c,a=l.length),s>(r=Math.max(Math.ceil(f/7),a)+2)&&(s=r,n.length=1),n.reverse(),r=s;r--;)n.push(0);n.reverse()}else{for((u=(r=l.length)<(a=d.length))&&(a=r),r=0;r<a;r++)if(l[r]!=d[r]){u=l[r]<d[r];break}s=0}for(u&&(n=l,l=d,d=n,t.s=-t.s),a=l.length,r=d.length-a;r>0;--r)l[a++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(o=r;o&&0===l[--o];)l[o]=sE-1;--l[o],l[r]+=sE}l[r]-=d[r]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--i;return l[0]?(t.d=l,t.e=i,JS?vE(t,f):t):new h(0)}function xE(e,t,n){var i,r=pE(e),o=dE(e.d),s=o.length;return t?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+gE(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(r<0?"e":"e+")+r):r<0?(o="0."+gE(-r-1)+o,n&&(i=n-s)>0&&(o+=gE(i))):r>=s?(o+=gE(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+gE(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=gE(i))),e.s<0?"-"+o:o}function wE(e,t){if(e.length>t)return e.length=t,!0}function SE(e){if(!e||"object"!=typeof e)throw Error(eE+"Object expected");var t,n,i,r=["precision",1,QS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if(void 0!==(i=e[n=r[t]])){if(!(iE(i)===i&&i>=r[t+1]&&i<=r[t+2]))throw Error(tE+n+": "+i);this[n]=i}if(void 0!==(i=e[n="LN10"])){if(i!=Math.LN10)throw Error(tE+n+": "+i);this[n]=new this(i)}return this}var EE=function e(t){var n,i,r;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(tE+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):yE(t,e.toString())}if("string"!=typeof e)throw Error(tE+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!oE.test(e))throw Error(tE+e);yE(t,e)}if(o.prototype=lE,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=SE,void 0===t&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<r.length;)t.hasOwnProperty(i=r[n++])||(t[i]=this[i]);return o.config(t),o}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});ZS=new EE(1);const CE=EE;var TE,kE=e=>e,AE={},IE=e=>e===AE,PE=e=>function t(){return 0===arguments.length||1===arguments.length&&IE(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},LE=(e,t)=>1===e?t:PE(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=i.filter(e=>e!==AE).length;return o>=e?t(...i):LE(e-o,PE(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=i.map(e=>IE(e)?n.shift():e);return t(...o,...n)}))}),RE=(e,t)=>{for(var n=[],i=e;i<t;++i)n[i-e]=i;return n},OE=LE((TE=(e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)).length,TE),ME=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function DE(e){return 0===e?1:Math.floor(new CE(e).abs().log(10).toNumber())+1}function NE(e,t,n){for(var i=new CE(e),r=0,o=[];i.lt(t)&&r<1e5;)o.push(i.toNumber()),i=i.add(n),r++;return o}var FE=e=>{var[t,n]=e,[i,r]=[t,n];return t>n&&([i,r]=[n,t]),[i,r]},BE=(e,t,n)=>{if(e.lte(0))return new CE(0);var i=DE(e.toNumber()),r=new CE(10).pow(i),o=e.div(r),s=1!==i?.05:.1,a=new CE(Math.ceil(o.div(s).toNumber())).add(n).mul(s).mul(r);return new CE(t?a.toNumber():Math.ceil(a.toNumber()))},zE=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new CE(0),tickMin:new CE(0),tickMax:new CE(0)};var o,s=BE(new CE(t).sub(e).div(n-1),i,r);o=e<=0&&t>=0?new CE(0):(o=new CE(e).add(t).div(2)).sub(new CE(o).mod(s));var a=Math.ceil(o.sub(e).div(s).toNumber()),l=Math.ceil(new CE(t).sub(o).div(s).toNumber()),c=a+l+1;return c>n?zE(e,t,n,i,r+1):(c<n&&(l=t>0?l+(n-c):l,a=t>0?a:a+(n-c)),{step:s,tickMin:o.sub(new CE(a).mul(s)),tickMax:o.add(new CE(l).mul(s))})},UE=e=>e.rootProps.stackOffset,jE=e=>e.rootProps.reverseStackOrder,VE=e=>e.options.chartName,HE=e=>e.rootProps.syncId,WE=e=>e.rootProps.syncMethod,$E=e=>e.options.eventEmitter,GE={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},qE="auto",YE=!0,XE=!1,KE=!0,ZE="auto",QE=!0,JE=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t},eC={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:qE,tick:YE,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},tC={allowDataOverflow:XE,allowDecimals:!1,allowDuplicatedCategory:KE,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:ZE,tick:QE,tickCount:5,ticks:void 0,type:"number",unit:void 0},nC={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:qE,tick:YE,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},iC={allowDataOverflow:XE,allowDecimals:!1,allowDuplicatedCategory:KE,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:ZE,tick:QE,tickCount:5,ticks:void 0,type:"category",unit:void 0},rC=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?nC:eC,oC=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?iC:tC,sC=e=>e.polarOptions,aC=Dd([qp,Yp,lm],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2}),lC=Dd([sC,aC],(e,t)=>{if(null!=e)return gc(e.innerRadius,t,0)}),cC=Dd([sC,aC],(e,t)=>{if(null!=e)return gc(e.outerRadius,t,.8*t)}),uC=Dd([sC],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]});Dd([rC,uC],JE);var dC=Dd([aC,lC,cC],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]});Dd([oC,dC],JE);var hC=Dd([Gm,sC,lC,cC,qp,Yp],(e,t,n,i,r,o)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=i){var{cx:s,cy:a,startAngle:l,endAngle:c}=t;return{cx:gc(s,r,r/2),cy:gc(a,o,o/2),innerRadius:n,outerRadius:i,startAngle:l,endAngle:c,clockWise:!1}}}),fC=(e,t)=>t,pC=(e,t,n)=>n;function mC(e){return null==e?void 0:e.id}function gC(e,t,n){var{chartData:i=[]}=t,{allowDuplicatedCategory:r,dataKey:o}=n,s=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:i;if(null!=n&&0!==n.length){var a=mC(e);n.forEach((t,n)=>{var i,l=null==o||r?n:String(Mp(t,o,null)),c=Mp(t,e.dataKey,0);i=s.has(l)?s.get(l):{},Object.assign(i,{[a]:c}),s.set(l,i)})}}),Array.from(s.values())}function _C(e){return null!=e.stackId&&null!=e.dataKey}var yC=(e,t)=>e===t||null!=e&&null!=t&&e[0]===t[0]&&e[1]===t[1];function vC(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var bC=e=>{var t=Gm(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},xC=e=>e.tooltip.settings.axisId;function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(t){EC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function EC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CC=[0,"auto"],TC={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},kC=(e,t)=>e.cartesianAxis.xAxis[t],AC=(e,t)=>{var n=kC(e,t);return null==n?TC:n},IC={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:CC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},PC=(e,t)=>e.cartesianAxis.yAxis[t],LC=(e,t)=>{var n=PC(e,t);return null==n?IC:n},RC={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OC=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?RC:n},MC=(e,t,n)=>{switch(t){case"xAxis":return AC(e,n);case"yAxis":return LC(e,n);case"zAxis":return OC(e,n);case"angleAxis":return rC(e,n);case"radiusAxis":return oC(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},DC=(e,t,n)=>{switch(t){case"xAxis":return AC(e,n);case"yAxis":return LC(e,n);case"angleAxis":return rC(e,n);case"radiusAxis":return oC(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},NC=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function FC(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var BC=e=>e.graphicalItems.cartesianItems,zC=Dd([fC,pC],FC),UC=(e,t,n)=>e.filter(n).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),jC=Dd([BC,MC,zC],UC,{memoizeOptions:{resultEqualityCheck:vC}}),VC=Dd([jC],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(_C)),HC=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),WC=Dd([jC],HC),$C=e=>e.map(e=>e.data).filter(Boolean).flat(1),GC=Dd([jC],$C,{memoizeOptions:{resultEqualityCheck:vC}}),qC=(e,t)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=t;return e.length>0?e:n.slice(i,r+1)},YC=Dd([GC,qS],qC),XC=(e,t,n)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:Mp(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Mp(e,t)}))):e.map(e=>({value:e})),KC=Dd([YC,MC,jC],XC);function ZC(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function QC(e){if(fc(e)||e instanceof Date){var t=Number(e);if(Im(t))return t}}function JC(e){if(Array.isArray(e)){var t=[QC(e[0]),QC(e[1])];return YS(t)?t:void 0}var n=QC(e);if(null!=n)return[n,n]}function eT(e){return e.map(QC).filter(wc)}var tT=e=>{var t=bC(e),n=xC(e);return DC(e,t,n)},nT=Dd([tT],e=>null==e?void 0:e.dataKey),iT=Dd([VC,qS,tT],gC),rT=(e,t,n,i)=>{var r=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(r).map(t=>{var[r,o]=t,s=i?[...o].reverse():o,a=s.map(mC);return[r,{stackedData:Up(e,a,n),graphicalItems:s}]}))},oT=Dd([iT,VC,UE,jE],rT),sT=(e,t,n,i)=>{var{dataStartIndex:r,dataEndIndex:o}=t;if(null==i&&"zAxis"!==n){var s=((e,t,n)=>{var i;if(null!=e)return[(i=Object.keys(e).reduce((i,r)=>{var o=e[r],{stackedData:s}=o,a=s.reduce((e,i)=>{var r,o=(r=Pp(i,t,n).flat(2).filter(hc),[Math.min(...r),Math.max(...r)]);return[Math.min(e[0],o[0]),Math.max(e[1],o[1])]},[1/0,-1/0]);return[Math.min(a[0],i[0]),Math.max(a[1],i[1])]},[1/0,-1/0]))[0]===1/0?0:i[0],i[1]===-1/0?0:i[1]]})(e,r,o);if(null==s||0!==s[0]||0!==s[1])return s}},aT=Dd([MC],e=>e.allowDataOverflow),lT=e=>{var t;if(null==e||!("domain"in e))return CC;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var n=eT(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:CC},cT=Dd([MC],lT),uT=Dd([cT,aT],KS),dT=Dd([oT,$S,fC,uT],sT,{memoizeOptions:{resultEqualityCheck:yC}}),hT=e=>e.errorBars,fT=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(0!==i.length){var r=i.flat();return[Math.min(...r),Math.max(...r)]}},pT=(e,t,n,i,r)=>{var o,s;if(n.length>0&&e.forEach(e=>{n.forEach(n=>{var a,l,c=null===(a=i[n.id])||void 0===a?void 0:a.filter(e=>ZC(r,e)),u=Mp(e,null!==(l=t.dataKey)&&void 0!==l?l:n.dataKey),d=function(e,t,n){return!n||"number"!=typeof t||uc(t)?[]:n.length?eT(n.flatMap(n=>{var i,r,o=Mp(e,n.dataKey);if(Array.isArray(o)?[i,r]=o:i=r=o,Im(i)&&Im(r))return[t-i,t+r]})):[]}(e,u,c);if(d.length>=2){var h=Math.min(...d),f=Math.max(...d);(null==o||h<o)&&(o=h),(null==s||f>s)&&(s=f)}var p=JC(u);null!=p&&(o=null==o?p[0]:Math.min(o,p[0]),s=null==s?p[1]:Math.max(s,p[1]))})}),null!=(null==t?void 0:t.dataKey)&&e.forEach(e=>{var n=JC(Mp(e,t.dataKey));null!=n&&(o=null==o?n[0]:Math.min(o,n[0]),s=null==s?n[1]:Math.max(s,n[1]))}),Im(o)&&Im(s))return[o,s]},mT=Dd([YC,MC,WC,hT,fC],pT,{memoizeOptions:{resultEqualityCheck:yC}});function gT(e){var{value:t}=e;if(fc(t)||t instanceof Date)return t}var _T=e=>e.referenceElements.dots,yT=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),vT=Dd([_T,fC,pC],yT),bT=e=>e.referenceElements.areas,xT=Dd([bT,fC,pC],yT),wT=e=>e.referenceElements.lines,ST=Dd([wT,fC,pC],yT),ET=(e,t)=>{var n=eT(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},CT=Dd(vT,fC,ET),TT=(e,t)=>{var n=eT(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},kT=Dd([xT,fC],TT),AT=(e,t)=>{var n=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return eT([e.x]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==n||0===n.length?[]:eT(n)}(e):function(e){var t;if(null!=e.y)return eT([e.y]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==n||0===n.length?[]:eT(n)}(e));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},IT=Dd([ST,fC],AT),PT=Dd(CT,IT,kT,(e,t,n)=>fT(e,n,t)),LT=(e,t,n,i,r,o,s,a)=>null!=n?n:function(e,t,n){if(n||null!=t){if("function"==typeof e&&null!=t)try{var i=e(t,n);if(YS(i))return XS(i,t,n)}catch(f){}if(Array.isArray(e)&&2===e.length){var r,o,[s,a]=e;if("auto"===s)null!=t&&(r=Math.min(...t));else if(hc(s))r=s;else if("function"==typeof s)try{null!=t&&(r=s(null==t?void 0:t[0]))}catch(p){}else if("string"==typeof s&&Vp.test(s)){var l=Vp.exec(s);if(null==l||null==t)r=void 0;else{var c=+l[1];r=t[0]-c}}else r=null==t?void 0:t[0];if("auto"===a)null!=t&&(o=Math.max(...t));else if(hc(a))o=a;else if("function"==typeof a)try{null!=t&&(o=a(null==t?void 0:t[1]))}catch(m){}else if("string"==typeof a&&Hp.test(a)){var u=Hp.exec(a);if(null==u||null==t)o=void 0;else{var d=+u[1];o=t[1]+d}}else o=null==t?void 0:t[1];var h=[r,o];if(YS(h))return null==t?h:XS(h,t,n)}}}(t,"vertical"===s&&"xAxis"===a||"horizontal"===s&&"yAxis"===a?fT(i,o,r):fT(o,r),e.allowDataOverflow),RT=Dd([MC,cT,uT,dT,mT,PT,Gm,fC],LT,{memoizeOptions:{resultEqualityCheck:yC}}),OT=[0,1],MT=(e,t,n,i,r,o,s)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==s){var a,{dataKey:l,type:c}=e,u=Dp(t,o);return u&&null==l?Ry(0,null!==(a=null==n?void 0:n.length)&&void 0!==a?a:0):"category"===c?((e,t,n)=>{var i=e.map(gT).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&_c(i))?Ry(0,e.length):t.allowDuplicatedCategory?i:Array.from(new Set(i))})(i,e,u):"expand"===r?OT:s}},DT=Dd([MC,Gm,YC,KC,UE,fC,RT],MT),NT=(e,t,n,i,r)=>{if(null!=e){var{scale:o,type:s}=e;if("auto"===o)return"radial"===t&&"radiusAxis"===r?"band":"radial"===t&&"angleAxis"===r?"linear":"category"===s&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":"category"===s?"band":"linear";if("string"==typeof o){var a="scale".concat(xc(o));return a in WS?a:"point"}}},FT=Dd([MC,Gm,NC,VE,fC],NT);function BT(e,t,n,i){if(null!=n&&null!=i){if("function"==typeof e.scale)return e.scale.copy().domain(n).range(i);var r=function(e){if(null!=e){if(e in WS)return WS[e]();var t="scale".concat(xc(e));return t in WS?WS[t]():void 0}}(t);if(null!=r){var o=r.domain(n).range(i);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,i=e.range(),r=Math.min(i[0],i[1])-Bp,o=Math.max(i[0],i[1])+Bp,s=e(t[0]),a=e(t[n-1]);(s<r||s>o||a<r||a>o)&&e.domain([t[0],t[n-1]])}})(o),o}}}var zT=(e,t,n)=>{var i=lT(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(i)&&("auto"===i[0]||"auto"===i[1])&&YS(e)?function(e){var[t,n]=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),[s,a]=FE([t,n]);if(s===-1/0||a===1/0){var l=a===1/0?[s,...RE(0,i-1).map(()=>1/0)]:[...RE(0,i-1).map(()=>-1/0),a];return t>n?ME(l):l}if(s===a)return((e,t,n)=>{var i=new CE(1),r=new CE(e);if(!r.isint()&&n){var o=Math.abs(e);o<1?(i=new CE(10).pow(DE(e)-1),r=new CE(Math.floor(r.div(i).toNumber())).mul(i)):o>1&&(r=new CE(Math.floor(e)))}else 0===e?r=new CE(Math.floor((t-1)/2)):n||(r=new CE(Math.floor(e)));var s=Math.floor((t-1)/2),a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return kE;var i=t.reverse(),r=i[0],o=i.slice(1);return function(){return o.reduce((e,t)=>t(e),r(...arguments))}}(OE(e=>r.add(new CE(e-s).mul(i)).toNumber()),RE);return a(0,t)})(s,i,r);var{step:c,tickMin:u,tickMax:d}=zE(s,a,o,r,0),h=NE(u,d.add(new CE(.1).mul(c)),c);return t>n?ME(h):h}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&YS(e)?function(e,t){var[n,i]=e,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[o,s]=FE([n,i]);if(o===-1/0||s===1/0)return[n,i];if(o===s)return[o];var a=Math.max(t,2),l=BE(new CE(s).sub(o).div(a-1),r,0),c=[...NE(new CE(o),new CE(s),l),s];return!1===r&&(c=c.map(e=>Math.round(e))),n>i?ME(c):c}(e,t.tickCount,t.allowDecimals):void 0},UT=Dd([DT,DC,FT],zT),jT=(e,t,n,i)=>{if("angleAxis"!==i&&"number"===(null==e?void 0:e.type)&&YS(t)&&Array.isArray(n)&&n.length>0){var r=t[0],o=n[0],s=t[1],a=n[n.length-1];return[Math.min(r,o),Math.max(s,a)]}return t},VT=Dd([MC,DT,UT,fC],jT),HT=Dd(KC,MC,(e,t)=>{if(t&&"number"===t.type){var n=1/0,i=Array.from(eT(e.map(e=>e.value))).sort((e,t)=>e-t);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(0===r)return 1/0;for(var o=0;o<i.length-1;o++){var s=i[o+1]-i[o];n=Math.min(n,s)}return n/r}}),WT=Dd(HT,Gm,e=>e.rootProps.barCategoryGap,lm,(e,t,n,i)=>i,(e,t,n,i,r)=>{if(!Im(e))return 0;var o="vertical"===t?i.height:i.width;if("gap"===r)return e*o/2;if("no-gap"===r){var s=gc(n,e*o),a=e*o/2;return a-s-(a-s)/o*s}return 0}),$T=Dd(AC,(e,t)=>{var n=AC(e,t);return null==n||"string"!=typeof n.padding?0:WT(e,"xAxis",t,n.padding)},(e,t)=>{var n,i;if(null==e)return{left:0,right:0};var{padding:r}=e;return"string"==typeof r?{left:t,right:t}:{left:(null!==(n=r.left)&&void 0!==n?n:0)+t,right:(null!==(i=r.right)&&void 0!==i?i:0)+t}}),GT=Dd(LC,(e,t)=>{var n=LC(e,t);return null==n||"string"!=typeof n.padding?0:WT(e,"yAxis",t,n.padding)},(e,t)=>{var n,i;if(null==e)return{top:0,bottom:0};var{padding:r}=e;return"string"==typeof r?{top:t,bottom:t}:{top:(null!==(n=r.top)&&void 0!==n?n:0)+t,bottom:(null!==(i=r.bottom)&&void 0!==i?i:0)+t}}),qT=Dd([lm,$T,pm,fm,(e,t,n)=>n],(e,t,n,i,r)=>{var{padding:o}=i;return r?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),YT=Dd([lm,Gm,GT,pm,fm,(e,t,n)=>n],(e,t,n,i,r,o)=>{var{padding:s}=r;return o?[i.height-s.bottom,s.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),XT=(e,t,n,i)=>{var r;switch(t){case"xAxis":return qT(e,n,i);case"yAxis":return YT(e,n,i);case"zAxis":return null===(r=OC(e,n))||void 0===r?void 0:r.range;case"angleAxis":return uC(e);case"radiusAxis":return dC(e,n);default:return}},KT=Dd([MC,XT],JE),ZT=Dd([MC,FT,VT,KT],BT);function QT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}Dd([jC,hT,fC],(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>ZC(n,e)));var JT=(e,t)=>t,ek=(e,t,n)=>n,tk=Dd(Zp,JT,ek,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(QT)),nk=Dd(Qp,JT,ek,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(QT)),ik=(e,t)=>({width:e.width,height:t.height}),rk=Dd(lm,AC,ik),ok=Dd(Yp,lm,tk,JT,ek,(e,t,n,i,r)=>{var o,s={};return n.forEach(n=>{var a=ik(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,i,e));var l="top"===i&&!r||"bottom"===i&&r;s[n.id]=o-Number(l)*a.height,o+=(l?-1:1)*a.height}),s}),sk=Dd(qp,lm,nk,JT,ek,(e,t,n,i,r)=>{var o,s={};return n.forEach(n=>{var a=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,i,e));var l="left"===i&&!r||"right"===i&&r;s[n.id]=o-Number(l)*a.width,o+=(l?-1:1)*a.width}),s}),ak=Dd([lm,AC,(e,t)=>{var n=AC(e,t);if(null!=n)return ok(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,i)=>{if(null!=t){var r=null==n?void 0:n[i];return null==r?{x:e.left,y:0}:{x:e.left,y:r}}}),lk=Dd([lm,LC,(e,t)=>{var n=LC(e,t);if(null!=n)return sk(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,i)=>{if(null!=t){var r=null==n?void 0:n[i];return null==r?{x:0,y:e.top}:{x:r,y:e.top}}}),ck=Dd(lm,LC,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),uk=(e,t,n,i)=>{if(null!=n){var{allowDuplicatedCategory:r,type:o,dataKey:s}=n,a=Dp(e,i),l=t.map(e=>e.value);return s&&a&&"category"===o&&r&&_c(l)?l:void 0}},dk=Dd([Gm,KC,MC,fC],uk),hk=(e,t,n,i)=>{if(null!=n&&null!=n.dataKey){var{type:r,scale:o}=n;return!Dp(e,i)||"number"!==r&&"auto"===o?void 0:t.map(e=>e.value)}},fk=Dd([Gm,KC,DC,fC],hk),pk=Dd([Gm,(e,t,n)=>{switch(t){case"xAxis":return AC(e,n);case"yAxis":return LC(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},FT,ZT,dk,fk,XT,UT,fC],(e,t,n,i,r,o,s,a,l)=>{if(null!=t){var c=Dp(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:o,duplicateDomain:r,isCategorical:c,niceTicks:a,range:s,realScaleType:n,scale:i}}}),mk=Dd([Gm,DC,FT,ZT,UT,XT,dk,fk,fC],(e,t,n,i,r,o,s,a,l)=>{if(null!=t&&null!=i){var c=Dp(e,l),{type:u,ticks:d,tickCount:h}=t,f="scaleBand"===n&&"function"==typeof i.bandwidth?i.bandwidth()/2:2,p="category"===u&&i.bandwidth?i.bandwidth()/f:0;p="angleAxis"===l&&null!=o&&o.length>=2?2*cc(o[0]-o[1])*p:p;var m=d||r;return m?m.map((e,t)=>{var n=s?s.indexOf(e):e;return{index:t,coordinate:i(n)+p,value:e,offset:p}}).filter(e=>Im(e.coordinate)):c&&a?a.map((e,t)=>({coordinate:i(e)+p,value:e,index:t,offset:p})).filter(e=>Im(e.coordinate)):i.ticks?i.ticks(h).map(e=>({coordinate:i(e)+p,value:e,offset:p})):i.domain().map((e,t)=>({coordinate:i(e)+p,value:s?s[e]:e,index:t,offset:p}))}}),gk=Dd([Gm,DC,ZT,XT,dk,fk,fC],(e,t,n,i,r,o,s)=>{if(null!=t&&null!=n&&null!=i&&i[0]!==i[1]){var a=Dp(e,s),{tickCount:l}=t,c=0;return c="angleAxis"===s&&(null==i?void 0:i.length)>=2?2*cc(i[0]-i[1])*c:c,a&&o?o.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:r?r[e]:e,index:t,offset:c}))}}),_k=Dd(MC,ZT,(e,t)=>{if(null!=e&&null!=t)return SC(SC({},e),{},{scale:t})}),yk=Dd([MC,FT,DT,KT],BT);Dd((e,t,n)=>OC(e,n),yk,(e,t)=>{if(null!=e&&null!=t)return SC(SC({},e),{},{scale:t})});var vk=Dd([Gm,Zp,Qp],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bk=e=>e.options.defaultTooltipEventType,xk=e=>e.options.validateTooltipEventTypes;function wk(e,t,n){if(null==e)return t;var i=e?"axis":"item";return null==n?t:n.includes(i)?i:t}function Sk(e,t){return wk(t,bk(e),xk(e))}var Ek=(e,t)=>{var n,i=Number(t);if(!uc(i)&&null!=t)return i>=0?null==e||null===(n=e[i])||void 0===n?void 0:n.value:void 0},Ck={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Tk=$f({name:"tooltip",initialState:{itemInteraction:{click:Ck,hover:Ck},axisInteraction:{click:Ck,hover:Ck},keyboardInteraction:Ck,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nf()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:i}=t.payload,r=Sf(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=i)},prepare:Nf()},removeTooltipEntrySettings:{reducer(e,t){var n=Sf(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Nf()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:kk,replaceTooltipEntrySettings:Ak,removeTooltipEntrySettings:Ik,setTooltipSettingsState:Pk,setActiveMouseOverItemIndex:Lk,mouseLeaveItem:Rk,mouseLeaveChart:Ok,setActiveClickItemIndex:Mk,setMouseOverAxisIndex:Dk,setMouseClickAxisIndex:Nk,setSyncInteraction:Fk,setKeyboardInteraction:Bk}=Tk.actions,zk=Tk.reducer;function Uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uk(Object(n),!0).forEach(function(t){Vk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hk=(e,t,n,i)=>{if(null==t)return Ck;var r=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==r)return Ck;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=r.index){if(o)return jk(jk({},r),{},{active:!0})}else if(null!=i)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return jk(jk({},Ck),{},{coordinate:r.coordinate})};var Wk=(e,t,n,i)=>{var r=null==e?void 0:e.index;if(null==r)return null;var o=Number(r);if(!Im(o))return r;var s=1/0;t.length>0&&(s=t.length-1);var a=Math.max(0,Math.min(o,s)),l=t[a];return null==l||function(e,t,n){if(null==n||null==t)return!0;var i=Mp(e,t);return null==i||!YS(n)||function(e,t){var n=function(e){if("number"==typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}(e),i=t[0],r=t[1];if(void 0===n)return!1;var o=Math.min(i,r),s=Math.max(i,r);return n>=o&&n<=s}(i,n)}(l,n,i)?String(a):null},$k=(e,t,n,i,r,o,s,a)=>{if(null!=o&&null!=a){var l=s[0],c=null==l?void 0:a(l.positions,o);if(null!=c)return c;var u=null==r?void 0:r[Number(o)];if(u)return"horizontal"===n?{x:u.coordinate,y:(i.top+t)/2}:{x:(i.left+e)/2,y:u.coordinate}}},Gk=(e,t,n,i)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(r="hover"===n?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=i?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===r});var r},qk=e=>e.options.tooltipPayloadSearcher,Yk=e=>e.tooltip;function Xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Kk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xk(Object(n),!0).forEach(function(t){Zk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Zk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qk=(e,t,n,i,r,o,s)=>{if(null!=t&&null!=o){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=n;return e.reduce((e,n)=>{var d,h,f,{dataDefinedOnItem:p,settings:m}=n,g=function(e,t){return null!=e?e:t}(p,a),_=Array.isArray(g)?Pp(g,c,u):g,y=null!==(d=null==m?void 0:m.dataKey)&&void 0!==d?d:i,v=null==m?void 0:m.nameKey;return h=i&&Array.isArray(_)&&!Array.isArray(_[0])&&"axis"===s?vc(_,i,r):o(_,t,l,v),Array.isArray(h)?h.forEach(t=>{var n=Kk(Kk({},m),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push($p({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:Mp(t.payload,t.dataKey),name:t.name}))}):e.push($p({tooltipEntrySettings:m,dataKey:y,payload:h,value:Mp(h,y),name:null!==(f=Mp(h,v))&&void 0!==f?f:null==m?void 0:m.name})),e},[])}},Jk=Dd([tT,Gm,NC,VE,bC],NT),eA=Dd([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),tA=Dd([bC,xC],FC),nA=Dd([eA,tT,tA],UC,{memoizeOptions:{resultEqualityCheck:vC}}),iA=Dd([nA],e=>e.filter(_C)),rA=Dd([nA],$C,{memoizeOptions:{resultEqualityCheck:vC}}),oA=Dd([rA,$S],qC),sA=Dd([iA,$S,tT],gC),aA=Dd([oA,tT,nA],XC),lA=Dd([tT],lT),cA=Dd([tT],e=>e.allowDataOverflow),uA=Dd([lA,cA],KS),dA=Dd([nA],e=>e.filter(_C)),hA=Dd([sA,dA,UE,jE],rT),fA=Dd([hA,$S,bC,uA],sT),pA=Dd([nA],HC),mA=Dd([oA,tT,pA,hT,bC],pT,{memoizeOptions:{resultEqualityCheck:yC}}),gA=Dd([_T,bC,xC],yT),_A=Dd([gA,bC],ET),yA=Dd([bT,bC,xC],yT),vA=Dd([yA,bC],TT),bA=Dd([wT,bC,xC],yT),xA=Dd([bA,bC],AT),wA=Dd([_A,xA,vA],fT),SA=Dd([tT,lA,uA,fA,mA,wA,Gm,bC],LT),EA=Dd([tT,Gm,oA,aA,UE,bC,SA],MT),CA=Dd([EA,tT,Jk],zT),TA=Dd([tT,EA,CA,bC],jT),kA=e=>{var t=bC(e),n=xC(e);return XT(e,t,n,!1)},AA=Dd([tT,kA],JE),IA=Dd([tT,Jk,TA,AA],BT),PA=Dd([Gm,aA,tT,bC],uk),LA=Dd([Gm,aA,tT,bC],hk),RA=Dd([Gm,tT,Jk,IA,kA,PA,LA,bC],(e,t,n,i,r,o,s,a)=>{if(t){var{type:l}=t,c=Dp(e,a);if(i){var u="scaleBand"===n&&i.bandwidth?i.bandwidth()/2:2,d="category"===l&&i.bandwidth?i.bandwidth()/u:0;return d="angleAxis"===a&&null!=r&&(null==r?void 0:r.length)>=2?2*cc(r[0]-r[1])*d:d,c&&s?s.map((e,t)=>({coordinate:i(e)+d,value:e,index:t,offset:d})):i.domain().map((e,t)=>({coordinate:i(e)+d,value:o?o[e]:e,index:t,offset:d}))}}}),OA=Dd([bk,xk,e=>e.tooltip.settings],(e,t,n)=>wk(n.shared,e,t)),MA=e=>e.tooltip.settings.trigger,DA=e=>e.tooltip.settings.defaultIndex,NA=Dd([Yk,OA,MA,DA],Hk),FA=Dd([NA,oA,nT,EA],Wk),BA=Dd([RA,FA],Ek),zA=Dd([NA],e=>{if(e)return e.dataKey});Dd([NA],e=>{if(e)return e.graphicalItemId});var UA=Dd([Yk,OA,MA,DA],Gk),jA=Dd([qp,Yp,Gm,lm,RA,DA,UA,qk],$k),VA=Dd([NA,jA],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),HA=Dd([NA],e=>e.active),WA=Dd([UA,FA,$S,nT,BA,qk,OA],Qk),$A=Dd([WA],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function GA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function qA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GA(Object(n),!0).forEach(function(t){YA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function YA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function KA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(t){ZA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ZA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QA=(e,t,n,i,r)=>{var o,s=-1,a=null!==(o=null==t?void 0:t.length)&&void 0!==o?o:0;if(a<=1||null==e)return 0;if("angleAxis"===i&&null!=r&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?n[l-1].coordinate:n[a-1].coordinate,u=n[l].coordinate,d=l>=a-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(cc(u-c)!==cc(d-u)){var f=[];if(cc(d-u)===cc(r[1]-r[0])){h=d;var p=u+r[1]-r[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=d+r[1]-r[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){({index:s}=n[l]);break}}else{var _=Math.min(c,d),y=Math.max(c,d);if(e>(_+u)/2&&e<=(y+u)/2){({index:s}=n[l]);break}}}else if(t)for(var v=0;v<a;v++)if(0===v&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v>0&&v<a-1&&e>(t[v].coordinate+t[v-1].coordinate)/2&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v===a-1&&e>(t[v].coordinate+t[v-1].coordinate)/2){({index:s}=t[v]);break}return s},JA=()=>Ad(VE),eI=(e,t)=>t,tI=(e,t,n)=>n,nI=(e,t,n,i)=>i,iI=Dd(RA,e=>oh(e,e=>e.coordinate)),rI=Dd([Yk,eI,tI,nI],Hk),oI=Dd([rI,oA,nT,EA],Wk),sI=Dd([Yk,eI,tI,nI],Gk),aI=Dd([qp,Yp,Gm,lm,RA,nI,sI,qk],$k),lI=Dd([rI,aI],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),cI=Dd([RA,oI],Ek),uI=Dd([sI,oI,$S,nT,cI,qk,eI],Qk),dI=Dd([rI,oI],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),hI=Dd(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(null!=t){var i=e[t];if(null!=i)return n?i.panoramaElementId:i.elementId}}),fI=Dd(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(GE));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}}});function pI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function mI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pI(Object(n),!0).forEach(function(t){gI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _I={zIndexMap:Object.values(GE).reduce((e,t)=>mI(mI({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),{})},yI=new Set(Object.values(GE)),vI=$f({name:"zIndex",initialState:_I,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Nf()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!function(e){return yI.has(e)}(n)&&delete e.zIndexMap[n])},prepare:Nf()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:i,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElementId=i:e.zIndexMap[n].elementId=i:e.zIndexMap[n]={consumers:0,elementId:r?void 0:i,panoramaElementId:r?i:void 0}},prepare:Nf()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:Nf()}}}),{registerZIndexPortal:bI,unregisterZIndexPortal:xI,registerZIndexPortalId:wI,unregisterZIndexPortalId:SI}=vI.actions,EI=vI.reducer;function CI(e){var{zIndex:t,children:n}=e,i=void 0!==qm()&&void 0!==t&&0!==t,r=hm(),o=Ed();x.useLayoutEffect(()=>i?(o(bI({zIndex:t})),()=>{o(xI({zIndex:t}))}):Sc,[o,t,i]);var s=Ad(e=>hI(e,t,r));if(!i)return n;if(!s)return null;var a=document.getElementById(s);return a?F.createPortal(n,a):null}function TI(){return TI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TI.apply(null,arguments)}function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function AI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kI(Object(n),!0).forEach(function(t){II(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function II(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PI(e){var{cursor:t,cursorComp:n,cursorProps:i}=e;return x.isValidElement(t)?x.cloneElement(t,i):x.createElement(n,i)}function LI(e){var t,n,i,r,{coordinate:o,payload:s,index:a,offset:l,tooltipAxisBandSize:c,layout:u,cursor:d,tooltipEventType:h,chartName:f}=e,p=o,m=s,g=a;if(!d||!p||"ScatterChart"!==f&&"axis"!==h)return null;if("ScatterChart"===f)n=p,i=w_,r=GE.cursorLine;else if("BarChart"===f)n=function(e,t,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-r:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-r,width:"horizontal"===e?i:n.width-1,height:"horizontal"===e?n.height-1:i}}(u,p,l,c),i=oy,r=GE.cursorRectangle;else if("radial"===u&&Rc(p)){var{cx:_,cy:y,radius:v,startAngle:b,endAngle:w}=py(p);n={cx:_,cy:y,startAngle:b,endAngle:w,innerRadius:v,outerRadius:v},i=vy,r=GE.cursorLine}else n={points:by(u,p,l)},i=g_,r=GE.cursorLine;var S="object"==typeof d&&"className"in d?d.className:void 0,E=AI(AI(AI(AI({stroke:"#ccc",pointerEvents:"none"},l),n),Aa(d)),{},{payload:m,payloadIndex:g,className:$("recharts-tooltip-cursor",S)});return x.createElement(CI,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:r},x.createElement(PI,{cursor:d,cursorComp:i,cursorProps:E}))}function RI(e){var t,n,i,r=(t=Ad(tT),n=Ad(RA),i=Ad(IA),Wp(t&&i?qA(qA({},t),{},{scale:i}):void 0,n)),o=Hm(),s=qm(),a=JA();return null==r||null==o||null==s||null==a?null:x.createElement(LI,TI({},e,{offset:o,layout:s,tooltipAxisBandSize:r,chartName:a}))}var OI,MI=x.createContext(null),DI={exports:{}},NI=(OI||(OI=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,o),!0;case 6:return u.fn.call(u.context,t,i,r,o,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,i);break;case 4:u[c].fn.call(u[c].context,t,i,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||r&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(DI)),DI.exports),FI=new(a(NI)),BI="recharts.syncEvent.tooltip",zI="recharts.syncEvent.brush";function UI(e,t){if(t){var n=Number.parseInt(t,10);if(!uc(n))return null==e?void 0:e[n]}}var jI=$f({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VI=jI.reducer,{createEventEmitter:HI}=jI.actions;function WI(e){return e.tooltip.syncInteraction}var $I=$f({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:i}=t.payload;null!=n&&(e.dataStartIndex=n),null!=i&&(e.dataEndIndex=i)}}}),{setChartData:GI,setDataStartEndIndexes:qI,setComputedData:YI}=$I.actions,XI=$I.reducer,KI=["x","y"];function ZI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function QI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZI(Object(n),!0).forEach(function(t){JI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function JI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eP(){var e=Ed();x.useEffect(()=>{e(HI())},[e]),function(){var e=Ad(HE),t=Ad($E),n=Ed(),i=Ad(WE),r=Ad(RA),o=qm(),s=jm(),a=Ad(e=>e.rootProps.className);x.useEffect(()=>{if(null==e)return Sc;var a=(a,l,c)=>{var u;if(t!==c&&e===a)if("index"!==i){if(null!=r){var d;if("function"==typeof i){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},f=i(r,h);d=r[f]}else"value"===i&&(d=r.find(e=>String(e.value)===l.payload.label));var{coordinate:p}=l.payload;if(null!=d&&!1!==l.payload.active&&null!=p&&null!=s){var{x:m,y:g}=p,_=Math.min(m,s.x+s.width),y=Math.min(g,s.y+s.height),v={x:"horizontal"===o?d.coordinate:_,y:"horizontal"===o?y:d.coordinate},b=Fk({active:l.payload.active,coordinate:v,dataKey:l.payload.dataKey,index:String(d.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId});n(b)}else n(Fk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(s&&null!=l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var x=l.payload.coordinate,{x:w,y:S}=x,E=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(x,KI),{x:C,y:T,width:k,height:A}=l.payload.sourceViewBox,I=QI(QI({},E),{},{x:s.x+(k?(w-C)/k:0)*s.width,y:s.y+(A?(S-T)/A:0)*s.height});n(QI(QI({},l),{},{payload:QI(QI({},l.payload),{},{coordinate:I})}))}else n(l)};return FI.on(BI,a),()=>{FI.off(BI,a)}},[a,n,t,e,i,r,o,s])}(),function(){var e=Ad(HE),t=Ad($E),n=Ed();x.useEffect(()=>{if(null==e)return Sc;var i=(i,r,o)=>{t!==o&&e===i&&n(qI(r))};return FI.on(zI,i),()=>{FI.off(zI,i)}},[n,t,e])}()}function tP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function nP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(n),!0).forEach(function(t){iP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function iP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rP(e){return e.dataKey}var oP=[],sP={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function aP(e){var t,n,i=Nc(e,sP),{active:r,allowEscapeViewBox:o,animationDuration:s,animationEasing:a,content:l,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:h,position:f,reverseDirection:p,useTranslate3d:m,wrapperStyle:g,cursor:_,shared:y,trigger:v,defaultIndex:b,portal:w,axisId:S}=i,E=Ed(),C="number"==typeof b?String(b):b;x.useEffect(()=>{E(Pk({shared:y,trigger:v,axisId:S,active:r,defaultIndex:C}))},[E,y,v,S,r,C]);var T=jm(),k=s_(),A=function(e){return Ad(t=>Sk(t,e))}(y),{activeIndex:I,isActive:P}=null!==(t=Ad(e=>dI(e,A,v,C)))&&void 0!==t?t:{},L=Ad(e=>uI(e,A,v,C)),R=Ad(e=>cI(e,A,v,C)),O=Ad(e=>lI(e,A,v,C)),M=L,D=x.useContext(MI),N=null!==(n=null!=r?r:P)&&void 0!==n&&n,[B,z]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=x.useState({height:0,left:0,top:0,width:0}),i=x.useCallback(e=>{if(null!=e){var i=e.getBoundingClientRect(),r={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(r.height-t.height)>1||Math.abs(r.left-t.left)>1||Math.abs(r.top-t.top)>1||Math.abs(r.width-t.width)>1)&&n({height:r.height,left:r.left,top:r.top,width:r.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,i]}([M,N]),U="axis"===A?R:void 0;!function(e,t,n,i,r,o){var s=Ad(n=>((e,t,n)=>{if(null!=t){var i=Yk(e);return"axis"===t?"hover"===n?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:"hover"===n?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}})(n,e,t)),a=Ad($E),l=Ad(HE),c=Ad(WE),u=Ad(WI),d=null==u?void 0:u.active,h=jm();x.useEffect(()=>{if(!d&&null!=l&&null!=a){var e=Fk({active:o,coordinate:n,dataKey:s,index:r,label:"number"==typeof i?String(i):i,sourceViewBox:h,graphicalItemId:void 0});FI.emit(BI,l,e,a)}},[d,n,s,r,i,a,l,c,o,h])}(A,v,O,U,I,N);var j=null!=w?w:D;if(null==j||null==T||null==A)return null;var V=null!=M?M:oP;N||(V=oP),c&&V.length&&(V=function(e,t){return!0===t?hd(e,rP):"function"==typeof t?hd(e,t):e}(V.filter(e=>null!=e.value&&(!0!==e.hide||i.includeHidden)),h));var H=V.length>0,W=x.createElement(o_,{allowEscapeViewBox:o,animationDuration:s,animationEasing:a,isAnimationActive:u,active:N,coordinate:O,hasPayload:H,offset:d,position:f,reverseDirection:p,useTranslate3d:m,viewBox:T,wrapperStyle:g,lastBoundingBox:B,innerRef:z,hasPortalFromProps:Boolean(w)},function(e,t){return x.isValidElement(e)?x.cloneElement(e,t):"function"==typeof e?x.createElement(e,t):x.createElement(Zg,t)}(l,nP(nP({},i),{},{payload:V,label:U,active:N,activeIndex:I,coordinate:O,accessibilityLayer:k})));return x.createElement(x.Fragment,null,F.createPortal(W,j),N&&x.createElement(RI,{cursor:_,tooltipEventType:A,coordinate:O,payload:V,index:I}))}function lP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uP=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lP(Object(n),!0).forEach(function(t){cP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),dP=new class{constructor(e){(function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;null!=n&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(uP.cacheSize),hP={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fP="recharts_measurement_span",pP=(e,t)=>{try{var n=document.getElementById(fP);n||((n=document.createElement("span")).setAttribute("id",fP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,hP,t),n.textContent="".concat(e);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch(r){return{width:0,height:0}}},mP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||W_)return{width:0,height:0};if(!uP.enableCache)return pP(e,t);var n=function(e,t){var n=t.fontSize||"",i=t.fontFamily||"",r=t.fontWeight||"",o=t.fontStyle||"",s=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(o,"|").concat(s,"|").concat(a)}(e,t),i=dP.get(n);if(i)return i;var r=pP(e,t);return dP.set(n,r),r},gP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_P=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yP=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vP=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},xP=Object.keys(bP),wP="NaN";class SP{static parse(e){var t,[,n,i]=null!==(t=vP.exec(e))&&void 0!==t?t:[];return new SP(parseFloat(n),null!=i?i:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,uc(e)&&(this.unit=""),""===t||yP.test(t)||(this.num=NaN,this.unit=""),xP.includes(t)&&(this.num=function(e,t){return e*bP[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new SP(NaN,""):new SP(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new SP(NaN,""):new SP(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new SP(NaN,""):new SP(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new SP(NaN,""):new SP(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return uc(this.num)}}function EP(e){if(e.includes(wP))return wP;for(var t=e;t.includes("*")||t.includes("/");){var n,[,i,r,o]=null!==(n=gP.exec(t))&&void 0!==n?n:[],s=SP.parse(null!=i?i:""),a=SP.parse(null!=o?o:""),l="*"===r?s.multiply(a):s.divide(a);if(l.isNaN())return wP;t=t.replace(gP,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=_P.exec(t))&&void 0!==c?c:[],f=SP.parse(null!=u?u:""),p=SP.parse(null!=h?h:""),m="+"===d?f.add(p):f.subtract(p);if(m.isNaN())return wP;t=t.replace(_P,m.toString())}return t}var CP=/\(([^()]*)\)/;function TP(e){var t=function(e){try{return function(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=CP.exec(n));){var[,i]=t;n=n.replace(CP,EP(i))}return n}(t),EP(t)}(e)}catch(t){return wP}}(e.slice(5,-1));return t===wP?"":t}var kP=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],AP=["dx","dy","angle","className","breakAll"];function IP(){return IP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},IP.apply(null,arguments)}function PP(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var LP=/[ \f\n\r\t\v\u2028\u2029]+/,RP=e=>{var{children:t,breakAll:n,style:i}=e;try{var r=[];return bc(t)||(r=n?t.toString().split(""):t.toString().split(LP)),{wordsWithComputedWidth:r.map(e=>({word:e,width:mP(e,i).width})),spaceWidth:n?0:mP("",i).width}}catch(o){return null}};function OP(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var MP=(e,t,n,i)=>e.reduce((e,r)=>{var{word:o,width:s}=r,a=e[e.length-1];if(a&&null!=s&&(null==t||i||a.width+s+n<Number(t)))a.words.push(o),a.width+=s+n;else{var l={words:[o],width:s};e.push(l)}return e},[]),DP=e=>e.reduce((e,t)=>e.width>t.width?e:t),NP=(e,t,n,i,r,o,s,a)=>{var l=e.slice(0,t),c=RP({breakAll:n,style:i,children:l+""});if(!c)return[!1,[]];var u=MP(c.wordsWithComputedWidth,o,s,a);return[u.length>r||DP(u).width>Number(o),u]},FP=e=>[{words:bc(e)?[]:e.toString().split(LP),width:void 0}],BP="#808080",zP={angle:0,breakAll:!1,capHeight:"0.71em",fill:BP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},UP=x.forwardRef((e,t)=>{var n=Nc(e,zP),{x:i,y:r,lineHeight:o,capHeight:s,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,d=PP(n,kP),h=x.useMemo(()=>(e=>{var{width:t,scaleToFit:n,children:i,style:r,breakAll:o,maxLines:s}=e;if((t||n)&&!W_){var a=RP({breakAll:o,children:i,style:r});if(!a)return FP(i);var{wordsWithComputedWidth:l,spaceWidth:c}=a;return((e,t,n,i,r)=>{var{maxLines:o,children:s,style:a,breakAll:l}=e,c=hc(o),u=String(s),d=MP(t,i,n,r);if(!c||r)return d;if(!(d.length>o||DP(d).width>Number(i)))return d;for(var h,f=0,p=u.length-1,m=0;f<=p&&m<=u.length-1;){var g=Math.floor((f+p)/2),_=g-1,[y,v]=NP(u,_,l,a,o,i,n,r),[b]=NP(u,g,l,a,o,i,n,r);if(y||b||(f=g+1),y&&b&&(p=g-1),!y&&b){h=v;break}m++}return h||d})({breakAll:o,children:i,maxLines:s,style:r},l,c,t,Boolean(n))}return FP(i)})({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:l,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,l,d.style,d.width]),{dx:f,dy:p,angle:m,className:g,breakAll:_}=d,y=PP(d,AP);if(!fc(i)||!fc(r)||0===h.length)return null;var v,b=Number(i)+(hc(f)?f:0),w=Number(r)+(hc(p)?p:0);if(!Im(b)||!Im(w))return null;switch(u){case"start":v=TP("calc(".concat(s,")"));break;case"middle":v=TP("calc(".concat((h.length-1)/2," * -").concat(o," + (").concat(s," / 2))"));break;default:v=TP("calc(".concat(h.length-1," * -").concat(o,")"))}var S=[];if(l){var E=h[0].width,{width:C}=d;S.push("scale(".concat(hc(C)&&hc(E)?C/E:1,")"))}return m&&S.push("rotate(".concat(m,", ").concat(b,", ").concat(w,")")),S.length&&(y.transform=S.join(" ")),x.createElement("text",IP({},Ia(y),{ref:t,x:b,y:w,className:$("recharts-text",g),textAnchor:c,fill:a.includes("url")?BP:a}),h.map((e,t)=>{var n=e.words.join(_?"":" ");return x.createElement("tspan",{x:b,dy:0===t?v:o,key:"".concat(n,"-").concat(t)},n)}))});UP.displayName="Text";var jP=["labelRef"];function VP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function HP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VP(Object(n),!0).forEach(function(t){WP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $P(){return $P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$P.apply(null,arguments)}var GP=x.createContext(null),qP=e=>{var{x:t,y:n,upperWidth:i,lowerWidth:r,width:o,height:s,children:a}=e,l=x.useMemo(()=>({x:t,y:n,upperWidth:i,lowerWidth:r,width:o,height:s}),[t,n,i,r,o,s]);return x.createElement(GP.Provider,{value:l},a)},YP=()=>{var e=x.useContext(GP),t=jm();return e||Um(t)},XP=x.createContext(null),KP=e=>null!=e&&"function"==typeof e,ZP=e=>"cx"in e&&hc(e.cx),QP={angle:0,offset:5,zIndex:GE.label,position:"middle",textBreakAll:!1};function JP(e){var t,n,i,r,o,s=Nc(e,QP),{viewBox:a,position:l,value:c,children:u,content:d,className:h="",textBreakAll:f,labelRef:p}=s,m=(t=x.useContext(XP),n=Ad(hC),t||n),g=YP();if(!(i=null==a?"center"===l?g:null!=m?m:g:ZP(a)?a:Um(a))||bc(c)&&bc(u)&&!x.isValidElement(d)&&"function"!=typeof d)return null;var _=HP(HP({},s),{},{viewBox:i});if(x.isValidElement(d)){var{labelRef:y}=_,v=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(_,jP);return x.cloneElement(d,v)}if("function"==typeof d){if(r=x.createElement(d,_),x.isValidElement(r))return r}else r=(e=>{var{value:t,formatter:n}=e,i=bc(e.children)?t:e.children;return"function"==typeof n?n(i):i})(s);var b=Ia(s);if(ZP(i)){if("insideStart"===l||"insideEnd"===l||"end"===l)return((e,t,n,i,r)=>{var o,s,{offset:a,className:l}=e,{cx:c,cy:u,innerRadius:d,outerRadius:h,startAngle:f,endAngle:p,clockWise:m}=r,g=(d+h)/2,_=((e,t)=>cc(t-e)*Math.min(Math.abs(t-e),360))(f,p),y=_>=0?1:-1;switch(t){case"insideStart":o=f+y*a,s=m;break;case"insideEnd":o=p-y*a,s=!m;break;case"end":o=p+y*a,s=m;break;default:throw new Error("Unsupported position ".concat(t))}s=_<=0?s:!s;var v=dy(c,u,g,o),b=dy(c,u,g,o+359*(s?1:-1)),w="M".concat(v.x,",").concat(v.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(s?0:1,",\n    ").concat(b.x,",").concat(b.y),S=bc(e.id)?mc("recharts-radial-line-"):e.id;return x.createElement("text",$P({},i,{dominantBaseline:"central",className:$("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:S,d:w})),x.createElement("textPath",{xlinkHref:"#".concat(S)},n))})(s,l,r,b,i);o=((e,t,n)=>{var{cx:i,cy:r,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l}=e,c=(a+l)/2;if("outside"===n){var{x:u,y:d}=dy(i,r,s+t,c);return{x:u,y:d,textAnchor:u>=i?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var h=(o+s)/2,{x:f,y:p}=dy(i,r,h,c);return{x:f,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(i,s.offset,s.position)}else o=((e,t)=>{var n,{parentViewBox:i,offset:r,position:o}=e;null==i||ZP(i)||(n=i);var{x:s,y:a,upperWidth:l,lowerWidth:c,height:u}=t,d=s,h=s+(l-c)/2,f=(d+h)/2,p=(l+c)/2,m=d+l/2,g=u>=0?1:-1,_=g*r,y=g>0?"end":"start",v=g>0?"start":"end",b=l>=0?1:-1,x=b*r,w=b>0?"end":"start",S=b>0?"start":"end";if("top"===o)return HP(HP({},{x:d+l/2,y:a-_,textAnchor:"middle",verticalAnchor:y}),n?{height:Math.max(a-n.y,0),width:l}:{});if("bottom"===o)return HP(HP({},{x:h+c/2,y:a+u+_,textAnchor:"middle",verticalAnchor:v}),n?{height:Math.max(n.y+n.height-(a+u),0),width:c}:{});if("left"===o){var E={x:f-x,y:a+u/2,textAnchor:w,verticalAnchor:"middle"};return HP(HP({},E),n?{width:Math.max(E.x-n.x,0),height:u}:{})}if("right"===o){var C={x:f+p+x,y:a+u/2,textAnchor:S,verticalAnchor:"middle"};return HP(HP({},C),n?{width:Math.max(n.x+n.width-C.x,0),height:u}:{})}var T=n?{width:p,height:u}:{};return"insideLeft"===o?HP({x:f+x,y:a+u/2,textAnchor:S,verticalAnchor:"middle"},T):"insideRight"===o?HP({x:f+p-x,y:a+u/2,textAnchor:w,verticalAnchor:"middle"},T):"insideTop"===o?HP({x:d+l/2,y:a+_,textAnchor:"middle",verticalAnchor:v},T):"insideBottom"===o?HP({x:h+c/2,y:a+u-_,textAnchor:"middle",verticalAnchor:y},T):"insideTopLeft"===o?HP({x:d+x,y:a+_,textAnchor:S,verticalAnchor:v},T):"insideTopRight"===o?HP({x:d+l-x,y:a+_,textAnchor:w,verticalAnchor:v},T):"insideBottomLeft"===o?HP({x:h+x,y:a+u-_,textAnchor:S,verticalAnchor:y},T):"insideBottomRight"===o?HP({x:h+c-x,y:a+u-_,textAnchor:w,verticalAnchor:y},T):o&&"object"==typeof o&&(hc(o.x)||dc(o.x))&&(hc(o.y)||dc(o.y))?HP({x:s+gc(o.x,p),y:a+gc(o.y,u),textAnchor:"end",verticalAnchor:"end"},T):HP({x:m,y:a+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)})(s,i);return x.createElement(CI,{zIndex:s.zIndex},x.createElement(UP,$P({ref:p,className:$("recharts-label",h)},b,o,{textAnchor:OP(b.textAnchor)?b.textAnchor:o.textAnchor,breakAll:f}),r))}function eL(e){var{label:t,labelRef:n}=e;return((e,t,n)=>{if(!e)return null;var i={viewBox:t,labelRef:n};return!0===e?x.createElement(JP,$P({key:"label-implicit"},i)):fc(e)?x.createElement(JP,$P({key:"label-implicit",value:e},i)):x.isValidElement(e)?e.type===JP?x.cloneElement(e,HP({key:"label-implicit"},i)):x.createElement(JP,$P({key:"label-implicit",content:e},i)):KP(e)?x.createElement(JP,$P({key:"label-implicit",content:e},i)):e&&"object"==typeof e?x.createElement(JP,$P({},e,{key:"label-implicit"},i)):null})(t,YP(),n)||null}JP.displayName="Label";var tL,nL={},iL={};function rL(){return tL||(tL=1,e=iL,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.last=function(e){return e[e.length-1]}),iL;var e}var oL,sL,aL,lL,cL={};function uL(){return oL||(oL=1,e=cL,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}),cL;var e}function dL(){return lL?aL:(lL=1,aL=(sL||(sL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL(),n=uL(),i=Kc();e.last=function(e){if(i.isArrayLike(e))return t.last(n.toArray(e))}}(nL)),nL).last)}const hL=a(dL());var fL=["valueAccessor"],pL=["dataKey","clockWise","id","textBreakAll","zIndex"];function mL(){return mL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mL.apply(null,arguments)}function gL(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _L=e=>Array.isArray(e.value)?hL(e.value):e.value,yL=x.createContext(void 0),vL=yL.Provider,bL=x.createContext(void 0);function xL(e){var{valueAccessor:t=_L}=e,n=gL(e,fL),{dataKey:i,clockWise:r,id:o,textBreakAll:s,zIndex:a}=n,l=gL(n,pL),c=x.useContext(yL),u=x.useContext(bL),d=c||u;return d&&d.length?x.createElement(CI,{zIndex:null!=a?a:GE.label},x.createElement(Da,{className:"recharts-label-list"},d.map((e,r)=>{var a,c=bc(i)?t(e,r):Mp(e&&e.payload,i),u=bc(o)?{}:{id:"".concat(o,"-").concat(r)};return x.createElement(JP,mL({key:"label-".concat(r)},Ia(e),l,u,{fill:null!==(a=n.fill)&&void 0!==a?a:e.fill,parentViewBox:e.parentViewBox,value:c,textBreakAll:s,viewBox:e.viewBox,index:r,zIndex:0}))}))):null}function wL(e){var{label:t}=e;return t?!0===t?x.createElement(xL,{key:"labelList-implicit"}):x.isValidElement(t)||KP(t)?x.createElement(xL,{key:"labelList-implicit",content:t}):"object"==typeof t?x.createElement(xL,mL({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}bL.Provider,xL.displayName="LabelList";var SL=["points","className","baseLinePoints","connectNulls"];function EL(){return EL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},EL.apply(null,arguments)}var CL=e=>e&&e.x===+e.x&&e.y===+e.y,TL=(e,t)=>{var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(e=>{CL(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),CL(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((e,t)=>[...e,...t],[])]);var i=n.map(e=>e.reduce((e,t,n)=>"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y),"")).join("");return 1===n.length?"".concat(i,"Z"):i},kL=e=>{var{points:t,className:n,baseLinePoints:i,connectNulls:r}=e,o=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,SL);if(!t||!t.length)return null;var s=$("recharts-polygon",n);if(i&&i.length){var a=o.stroke&&"none"!==o.stroke,l=((e,t,n)=>{var i=TL(e,n);return"".concat("Z"===i.slice(-1)?i.slice(0,-1):i,"L").concat(TL(Array.from(t).reverse(),n).slice(1))})(t,i,r);return x.createElement("g",{className:s},x.createElement("path",EL({},Ia(o),{fill:"Z"===l.slice(-1)?o.fill:"none",stroke:"none",d:l})),a?x.createElement("path",EL({},Ia(o),{fill:"none",d:TL(t,r)})):null,a?x.createElement("path",EL({},Ia(o),{fill:"none",d:TL(i,r)})):null)}var c=TL(t,r);return x.createElement("path",EL({},Ia(o),{fill:"Z"===c.slice(-1)?o.fill:"none",className:s,d:c}))};function AL(){return AL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},AL.apply(null,arguments)}var IL,PL,LL,RL=e=>{var{cx:t,cy:n,r:i,className:r}=e,o=$("recharts-dot",r);return hc(t)&&hc(n)&&hc(i)?x.createElement("circle",AL({},ka(e),Oc(e),{className:o,cx:t,cy:n,r:i})):null},OL=$f({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ML,removeRadiusAxis:DL,addAngleAxis:NL,removeAngleAxis:FL}=OL.actions,BL=OL.reducer,zL=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),UL={};function jL(){return IL||(IL=1,e=UL,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){var t;if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const n=e[Symbol.toStringTag];return null!=n&&!!(null==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))?void 0:t.writable)&&e.toString()===`[object ${n}]`}let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}),UL;var e}function VL(){return LL?PL:(LL=1,PL=jL().isPlainObject)}const HL=a(VL());function WL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function $L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WL(Object(n),!0).forEach(function(t){GL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function GL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qL(){return qL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qL.apply(null,arguments)}var YL,XL=(e,t,n,i,r)=>{var o,s=n-i;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-s/2,",").concat(t+r),(o+="L ".concat(e+n-s/2-i,",").concat(t+r))+"L ".concat(e,",").concat(t," Z")},KL={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZL=e=>{var t=Nc(e,KL),{x:n,y:i,upperWidth:r,lowerWidth:o,height:s,className:a}=t,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=t,h=x.useRef(null),[f,p]=x.useState(-1),m=x.useRef(r),g=x.useRef(o),_=x.useRef(s),y=x.useRef(n),v=x.useRef(i),b=X_(e,"trapezoid-");if(x.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var e=h.current.getTotalLength();e&&p(e)}catch(t){}},[]),n!==+n||i!==+i||r!==+r||o!==+o||s!==+s||0===r&&0===o||0===s)return null;var w=$("recharts-trapezoid",a);if(!d)return x.createElement("g",null,x.createElement("path",qL({},Ia(t),{className:w,d:XL(n,i,r,o,s)})));var S=m.current,E=g.current,C=_.current,T=y.current,k=v.current,A="0px ".concat(-1===f?1:f,"px"),I="".concat(f,"px 0px"),P=T_(["strokeDasharray"],c,l);return x.createElement(Y_,{animationId:b,key:b,canBegin:f>0,duration:c,easing:l,isActive:d,begin:u},e=>{var a=yc(S,r,e),l=yc(E,o,e),c=yc(C,s,e),u=yc(T,n,e),d=yc(k,i,e);h.current&&(m.current=a,g.current=l,_.current=c,y.current=u,v.current=d);var f=e>0?{transition:P,strokeDasharray:I}:{strokeDasharray:A};return x.createElement("path",qL({},Ia(t),{className:w,d:XL(u,d,a,l,c),ref:h,style:$L($L({},f),t.style)}))})},QL=["option","shapeType","propTransformer","activeClassName"];function JL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function eR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JL(Object(n),!0).forEach(function(t){tR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nR(e,t){return eR(eR({},t),e)}function iR(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return x.createElement(oy,n);case"trapezoid":return x.createElement(ZL,n);case"sector":return x.createElement(vy,n);case"symbols":if(function(e){return"symbols"===e}(t))return x.createElement(Lc,n);break;case"curve":return x.createElement(g_,n);default:return null}}function rR(e){var t,{option:n,shapeType:i,propTransformer:r=nR,activeClassName:o="recharts-active-shape"}=e,s=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,QL);if(x.isValidElement(n))t=x.cloneElement(n,eR(eR({},s),function(e){return x.isValidElement(e)?e.props:e}(n)));else if("function"==typeof n)t=n(s,s.index);else if(HL(n)&&"boolean"!=typeof n){var a=r(n,s);t=x.createElement(iR,{shapeType:i,elementProps:a})}else{var l=s;t=x.createElement(iR,{shapeType:i,elementProps:l})}return s.isActive?x.createElement(Da,{className:o},t):t}function oR(e){var{tooltipEntrySettings:t}=e,n=Ed(),i=hm(),r=x.useRef(null);return x.useLayoutEffect(()=>{i||(null===r.current?n(kk(t)):r.current!==t&&n(Ak({prev:r.current,next:t})),r.current=t)},[t,n,i]),x.useLayoutEffect(()=>()=>{r.current&&(n(Ik(r.current)),r.current=null)},[n]),null}function sR(e){var{legendPayload:t}=e,n=Ed(),i=hm(),r=x.useRef(null);return x.useLayoutEffect(()=>{i||(null===r.current?n(Vg(t)):r.current!==t&&n(Hg({prev:r.current,next:t})),r.current=t)},[n,i,t]),x.useLayoutEffect(()=>()=>{r.current&&(n(Wg(r.current)),r.current=null)},[n]),null}var aR=null!==(YL=S["useId".toString()])&&void 0!==YL?YL:()=>{var[e]=x.useState(()=>mc("uid-"));return e};function lR(e,t){var n=aR();return t||(e?"".concat(e,"-").concat(n):n)}var cR=x.createContext(void 0),uR=e=>{var{id:t,type:n,children:i}=e,r=lR("recharts-".concat(n),t);return x.createElement(cR.Provider,{value:r},i(r))},dR=$f({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nf()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:i}=t.payload,r=Sf(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=i)},prepare:Nf()},removeCartesianGraphicalItem:{reducer(e,t){var n=Sf(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Nf()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nf()},removePolarGraphicalItem:{reducer(e,t){var n=Sf(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Nf()}}}),{addCartesianGraphicalItem:hR,replaceCartesianGraphicalItem:fR,removeCartesianGraphicalItem:pR,addPolarGraphicalItem:mR,removePolarGraphicalItem:gR}=dR.actions,_R=dR.reducer,yR=e=>{var t=Ed(),n=x.useRef(null);return x.useLayoutEffect(()=>{null===n.current?t(hR(e)):n.current!==e&&t(fR({prev:n.current,next:e})),n.current=e},[t,e]),x.useLayoutEffect(()=>()=>{n.current&&(t(pR(n.current)),n.current=null)},[t]),null},vR=x.memo(yR),bR=["points"];function xR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function wR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xR(Object(n),!0).forEach(function(t){SR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function SR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ER(){return ER=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ER.apply(null,arguments)}function CR(e){var{option:t,dotProps:n,className:i}=e;if(x.isValidElement(t))return x.cloneElement(t,n);if("function"==typeof t)return t(n);var r=$(i,"boolean"!=typeof t?t.className:""),o=null!=n?n:{},{points:s}=o,a=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(o,bR);return x.createElement(RL,ER({},a,{className:r}))}function TR(e){var{points:t,dot:n,className:i,dotClassName:r,dataKey:o,baseProps:s,needClip:a,clipPathId:l,zIndex:c=GE.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var u,d=zL(n),h=null==(u=n)?null:x.isValidElement(u)?Ia(u.props):"object"!=typeof u||Array.isArray(u)?null:Ia(u),f=t.map((e,i)=>{var a,l,c=wR(wR(wR({r:3},s),h),{},{index:i,cx:null!==(a=e.x)&&void 0!==a?a:void 0,cy:null!==(l=e.y)&&void 0!==l?l:void 0,dataKey:o,value:e.value,payload:e.payload,points:t});return x.createElement(CR,{key:"dot-".concat(i),option:n,dotProps:c,className:r})}),p={};return a&&null!=l&&(p.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(l,")")),x.createElement(CI,{zIndex:c},x.createElement(Da,ER({className:i},p),f))}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function AR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(t){IR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function IR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PR=$f({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nf()},replaceXAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;void 0!==e.xAxis[n.id]&&(n.id!==i.id&&delete e.xAxis[n.id],e.xAxis[i.id]=i)},prepare:Nf()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nf()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nf()},replaceYAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;void 0!==e.yAxis[n.id]&&(n.id!==i.id&&delete e.yAxis[n.id],e.yAxis[i.id]=i)},prepare:Nf()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nf()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nf()},replaceZAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;void 0!==e.zAxis[n.id]&&(n.id!==i.id&&delete e.zAxis[n.id],e.zAxis[i.id]=i)},prepare:Nf()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nf()},updateYAxisWidth(e,t){var{id:n,width:i}=t.payload,r=e.yAxis[n];if(r){var o=r.widthHistory||[];if(3===o.length&&o[0]===o[2]&&i===o[1]&&i!==r.width&&Math.abs(i-o[0])<=1)return;var s=[...o,i].slice(-3);e.yAxis[n]=AR(AR({},e.yAxis[n]),{},{width:i,widthHistory:s})}}}}),{addXAxis:LR,replaceXAxis:RR,removeXAxis:OR,addYAxis:MR,replaceYAxis:DR,removeYAxis:NR,addZAxis:FR,replaceZAxis:BR,removeZAxis:zR,updateYAxisWidth:UR}=PR.actions,jR=PR.reducer,VR=Dd([lm],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),HR=Dd([VR,qp,Yp],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),WR=()=>Ad(HR);function $R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function GR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$R(Object(n),!0).forEach(function(t){qR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YR=e=>{var{point:t,childIndex:n,mainColor:i,activeDot:r,dataKey:o,clipPath:s}=e;if(!1===r||null==t.x||null==t.y)return null;var a,l=GR(GR(GR({},{index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:null!=i?i:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),Aa(r)),Oc(r));return a=x.isValidElement(r)?x.cloneElement(r,l):"function"==typeof r?r(l):x.createElement(RL,l),x.createElement(Da,{className:"recharts-active-dot",clipPath:s},a)};function XR(e){var{points:t,mainColor:n,activeDot:i,itemDataKey:r,clipPath:o,zIndex:s=GE.activeDot}=e,a=Ad(FA),l=Ad($A);if(null==t||null==l)return null;var c=t.find(e=>l.includes(e.payload));return bc(c)?null:x.createElement(CI,{zIndex:s},x.createElement(YR,{point:c,childIndex:Number(a),mainColor:n,dataKey:r,activeDot:i,clipPath:o}))}var KR=$f({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]||(e[n]=[]),e[n].push(i)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:i,next:r}=t.payload;e[n]&&(e[n]=e[n].map(e=>e.dataKey===i.dataKey&&e.direction===i.direction?r:e))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==i.dataKey||e.direction!==i.direction))}}}),{addErrorBar:ZR,replaceErrorBar:QR,removeErrorBar:JR}=KR.actions,eO=KR.reducer,tO=["children"],nO={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},iO=x.createContext(nO);function rO(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,tO);return x.createElement(iO.Provider,{value:n},t)}function oO(e,t){var n,i,r=Ad(t=>AC(t,e)),o=Ad(e=>LC(e,t)),s=null!==(n=null==r?void 0:r.allowDataOverflow)&&void 0!==n?n:TC.allowDataOverflow,a=null!==(i=null==o?void 0:o.allowDataOverflow)&&void 0!==i?i:IC.allowDataOverflow;return{needClip:s||a,needClipX:s,needClipY:a}}function sO(e){var{xAxisId:t,yAxisId:n,clipPathId:i}=e,r=WR(),{needClipX:o,needClipY:s,needClip:a}=oO(t,n);if(!a||!r)return null;var{x:l,y:c,width:u,height:d}=r;return x.createElement("clipPath",{id:"clipPath-".concat(i)},x.createElement("rect",{x:o?l:l-u/2,y:s?c:c-d/2,width:o?u:2*u,height:s?d:2*d}))}var aO={notify(){},get:()=>[]},lO=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),cO=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),uO=(()=>lO||cO?x.useLayoutEffect:x.useEffect)();function dO(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function hO(e,t){if(dO(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!dO(e[n[r]],t[n[r]]))return!1;return!0}var fO=Symbol.for("react-redux-context"),pO="undefined"!=typeof globalThis?globalThis:{};function mO(){if(!x.createContext)return{};const e=pO[fO]??(pO[fO]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var gO=mO(),_O=function(e){const{children:t,context:n,serverState:i,store:r}=e,o=x.useMemo(()=>{const e=function(e){let t,n=aO,i=0,r=!1;function o(){l.onStateChange&&l.onStateChange()}function s(){i++,t||(t=e.subscribe(o),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){i&&null!==e&&(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function a(){i--,t&&0===i&&(t(),t=void 0,n.clear(),n=aO)}const l={addNestedSub:function(e){s();const t=n.subscribe(e);let i=!1;return()=>{i||(i=!0,t(),a())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return r},trySubscribe:function(){r||(r=!0,s())},tryUnsubscribe:function(){r&&(r=!1,a())},getListeners:()=>n};return l}(r);return{store:r,subscription:e,getServerState:i?()=>i:void 0}},[r,i]),s=x.useMemo(()=>r.getState(),[r]);uO(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,s]);const a=n||gO;return x.createElement(a.Provider,{value:o},t)},yO=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function vO(e,t){return null==e&&null==t||("number"==typeof e&&"number"==typeof t?e===t||e!=e&&t!=t:e===t)}function bO(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var i of n)if(yO.has(i)){if(null==e[i]&&null==t[i])continue;if(!hO(e[i],t[i]))return!1}else if(!vO(e[i],t[i]))return!1;return!0}var xO=e=>{var{chartData:t}=e,n=Ed(),i=hm();return x.useEffect(()=>i?()=>{}:(n(GI(t)),()=>{n(GI(void 0))}),[t,n,i]),null},wO={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},SO=$f({name:"brush",initialState:wO,reducers:{setBrushSettings:(e,t)=>null==t.payload?wO:t.payload}}),{setBrushSettings:EO}=SO.actions,CO=SO.reducer;class TO{static create(e){return new TO(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var r=this.bandwidth?this.bandwidth():0;return this.scale(e)+r}if(t){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(TO,"EPS",1e-4);var kO=$f({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Sf(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Sf(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Sf(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:AO,removeDot:IO,addArea:PO,removeArea:LO,addLine:RO,removeLine:OO}=kO.actions,MO=kO.reducer,DO=x.createContext(void 0),NO=e=>{var{children:t}=e,[n]=x.useState("".concat(mc("recharts"),"-clip")),i=WR();if(null==i)return null;var{x:r,y:o,width:s,height:a}=i;return x.createElement(DO.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:r,y:o,height:a,width:s}))),t)};function FO(e,t){if(t<1)return[];if(1===t)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function BO(e,t,n,i,r){if(e*t<e*i||e*t>e*r)return!1;var o=n();return e*(t-e*o/2-i)>=0&&e*(t+e*o/2-r)<=0}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(n),!0).forEach(function(t){jO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VO(e,t,n){var i,{tick:r,ticks:o,viewBox:s,minTickGap:a,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!o||!o.length||!r)return[];if(hc(c)||W_)return null!==(i=function(e,t){return FO(e,t+1)}(o,hc(c)?c:0))&&void 0!==i?i:[];var f=[],p="top"===l||"bottom"===l?"width":"height",m=d&&"width"===p?mP(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(e,i)=>{var r="function"==typeof u?u(e.value,i):e.value;return"width"===p?function(e,t,n){return function(e){var{width:t,height:n}=e,i=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),r=i*Math.PI/180,o=Math.atan(n/t),s=r>o&&r<Math.PI-o?n/Math.sin(r):t/Math.cos(r);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}(mP(r,{fontSize:t,letterSpacing:n}),m,h):mP(r,{fontSize:t,letterSpacing:n})[p]},_=o.length>=2?cc(o[1].coordinate-o[0].coordinate):1,y=function(e,t,n){var i="width"===n,{x:r,y:o,width:s,height:a}=e;return 1===t?{start:i?r:o,end:i?r+s:o+a}:{start:i?r+s:o+a,end:i?r:o}}(s,_,p);return"equidistantPreserveStart"===c?function(e,t,n,i,r){for(var o,s=(i||[]).slice(),{start:a,end:l}=t,c=0,u=1,d=a,h=function(){var t=null==i?void 0:i[c];if(void 0===t)return{v:FO(i,u)};var o,s=c,h=()=>(void 0===o&&(o=n(t,s)),o),f=t.coordinate,p=0===c||BO(e,f,h,d,l);p||(c=0,d=a,u+=1),p&&(d=f+e*(h()/2+r),c+=u)};u<=s.length;)if(o=h())return o.v;return[]}(_,y,g,o,a):(f="preserveStart"===c||"preserveStartEnd"===c?function(e,t,n,i,r,o){var s=(i||[]).slice(),a=s.length,{start:l,end:c}=t;if(o){var u=i[a-1],d=n(u,a-1),h=e*(u.coordinate+e*d/2-c);s[a-1]=u=UO(UO({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),null!=u.tickCoord&&BO(e,u.tickCoord,()=>d,l,c)&&(c=u.tickCoord-e*(d/2+r),s[a-1]=UO(UO({},u),{},{isShow:!0}))}for(var f=o?a-1:a,p=function(t){var i,o=s[t],a=()=>(void 0===i&&(i=n(o,t)),i);if(0===t){var u=e*(o.coordinate-e*a()/2-l);s[t]=o=UO(UO({},o),{},{tickCoord:u<0?o.coordinate-u*e:o.coordinate})}else s[t]=o=UO(UO({},o),{},{tickCoord:o.coordinate});null!=o.tickCoord&&BO(e,o.tickCoord,a,l,c)&&(l=o.tickCoord+e*(a()/2+r),s[t]=UO(UO({},o),{},{isShow:!0}))},m=0;m<f;m++)p(m);return s}(_,y,g,o,a,"preserveStartEnd"===c):function(e,t,n,i,r){for(var o=(i||[]).slice(),s=o.length,{start:a}=t,{end:l}=t,c=function(t){var i,c=o[t],u=()=>(void 0===i&&(i=n(c,t)),i);if(t===s-1){var d=e*(c.coordinate+e*u()/2-l);o[t]=c=UO(UO({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else o[t]=c=UO(UO({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&BO(e,c.tickCoord,u,a,l)&&(l=c.tickCoord-e*(u()/2+r),o[t]=UO(UO({},c),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return o}(_,y,g,o,a),f.filter(e=>e.isShow))}var HO=["axisLine","width","height","className","hide","ticks","axisType"];function WO(){return WO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},WO.apply(null,arguments)}function $O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$O(Object(n),!0).forEach(function(t){qO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YO={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:GE.axis};function XO(e){var{x:t,y:n,width:i,height:r,orientation:o,mirror:s,axisLine:a,otherSvgProps:l}=e;if(!a)return null;var c=GO(GO(GO({},l),ka(a)),{},{fill:"none"});if("top"===o||"bottom"===o){var u=+("top"===o&&!s||"bottom"===o&&s);c=GO(GO({},c),{},{x1:t,y1:n+u*r,x2:t+i,y2:n+u*r})}else{var d=+("left"===o&&!s||"right"===o&&s);c=GO(GO({},c),{},{x1:t+d*i,y1:n,x2:t+d*i,y2:n+r})}return x.createElement("line",WO({},c,{className:$("recharts-cartesian-axis-line",lc(a,"className"))}))}function KO(e){var t,{option:n,tickProps:i,value:r}=e,o=$(i.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(n))t=x.cloneElement(n,GO(GO({},i),{},{className:o}));else if("function"==typeof n)t=n(GO(GO({},i),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";"boolean"!=typeof n&&(s=$(s,null==n?void 0:n.className)),t=x.createElement(UP,WO({},i,{className:s}),r)}return t}var ZO=x.forwardRef((e,t)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:o,tickFormatter:s,unit:a,padding:l,tickTextProps:c,orientation:u,mirror:d,x:h,y:f,width:p,height:m,tickSize:g,tickMargin:_,fontSize:y,letterSpacing:v,getTicksConfig:b,events:w,axisType:S}=e,E=VO(GO(GO({},b),{},{ticks:n}),y,v),C=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(u,d),T=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(u,d),k=ka(b),A=Aa(i),I={};"object"==typeof r&&(I=r);var P=GO(GO({},k),{},{fill:"none"},I),L=E.map(e=>GO({entry:e},function(e,t,n,i,r,o,s,a,l){var c,u,d,h,f,p,m=a?-1:1,g=e.tickSize||s,_=hc(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":c=u=e.coordinate,p=(d=(h=n+ +!a*r)-m*g)-m*l,f=_;break;case"left":d=h=e.coordinate,f=(c=(u=t+ +!a*i)-m*g)-m*l,p=_;break;case"right":d=h=e.coordinate,f=(c=(u=t+ +a*i)+m*g)+m*l,p=_;break;default:c=u=e.coordinate,p=(d=(h=n+ +a*r)+m*g)+m*l,f=_}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:f,y:p}}}(e,h,f,p,m,u,g,d,_))),R=L.map(e=>{var{entry:t,line:n}=e;return x.createElement(Da,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},r&&x.createElement("line",WO({},P,n,{className:$("recharts-cartesian-axis-tick-line",lc(r,"className"))})))}),O=L.map((e,t)=>{var{entry:n,tick:r}=e,u=GO(GO(GO(GO({textAnchor:C,verticalAnchor:T},k),{},{stroke:"none",fill:o},A),r),{},{index:t,payload:n,visibleTicksCount:E.length,tickFormatter:s,padding:l},c);return x.createElement(Da,WO({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(n.value,"-").concat(n.coordinate,"-").concat(n.tickCoord)},((e,t,n)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var i=null;return Object.keys(e).forEach(r=>{var o=e[r];Sa(r)&&"function"==typeof o&&(i||(i={}),i[r]=((e,t,n)=>i=>(e(t,n,i),null))(o,t,n))}),i})(w,n,t)),i&&x.createElement(KO,{option:i,tickProps:u,value:"".concat("function"==typeof s?s(n.value,t):n.value).concat(a||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(S,"-ticks")},O.length>0&&x.createElement(CI,{zIndex:GE.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(S,"-tick-labels"),ref:t},O)),R.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(S,"-tick-lines")},R))}),QO=x.forwardRef((e,t)=>{var{axisLine:n,width:i,height:r,className:o,hide:s,ticks:a,axisType:l}=e,c=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,HO),[u,d]=x.useState(""),[h,f]=x.useState(""),p=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:o=0}=e,s=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>s&&(s=t.width)}});var a=n?n.getBoundingClientRect().width:0,l=s+(r+o)+a+(n?i:0);return Math.round(l)}return 0})({ticks:p.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var m=x.useCallback(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=t;var n=t[0];if(n){var i=window.getComputedStyle(n),r=i.fontSize,o=i.letterSpacing;r===u&&o===h||(d(r),f(o))}}},[u,h]);return s||null!=i&&i<=0||null!=r&&r<=0?null:x.createElement(CI,{zIndex:e.zIndex},x.createElement(Da,{className:$("recharts-cartesian-axis",o)},x.createElement(XO,{x:e.x,y:e.y,width:i,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:ka(e)}),x.createElement(ZO,{ref:m,axisType:l,events:c,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:a,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(qP,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(eL,{label:e.label,labelRef:e.labelRef}),e.children)))}),JO=x.forwardRef((e,t)=>{var n=Nc(e,YO);return x.createElement(QO,WO({},n,{ref:t}))});JO.displayName="CartesianAxis";var eM=["x1","y1","x2","y2","key"],tM=["offset"],nM=["xAxisId","yAxisId"],iM=["xAxisId","yAxisId"];function rM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function oM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rM(Object(n),!0).forEach(function(t){sM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aM(){return aM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},aM.apply(null,arguments)}function lM(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var cM=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:i,y:r,width:o,height:s,ry:a}=e;return x.createElement("rect",{x:i,y:r,ry:a,width:o,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function uM(e){var t,{option:n,lineItemProps:i}=e;if(x.isValidElement(n))t=x.cloneElement(n,i);else if("function"==typeof n)t=n(i);else{var r,{x1:o,y1:s,x2:a,y2:l,key:c}=i,u=null!==(r=ka(lM(i,eM)))&&void 0!==r?r:{},{offset:d}=u,h=lM(u,tM);t=x.createElement("line",aM({},h,{x1:o,y1:s,x2:a,y2:l,fill:"none",key:c}))}return t}function dM(e){var{x:t,width:n,horizontal:i=!0,horizontalPoints:r}=e;if(!i||!r||!r.length)return null;var{xAxisId:o,yAxisId:s}=e,a=lM(e,nM),l=r.map((e,r)=>{var o=oM(oM({},a),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(r),index:r});return x.createElement(uM,{key:"line-".concat(r),option:i,lineItemProps:o})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function hM(e){var{y:t,height:n,vertical:i=!0,verticalPoints:r}=e;if(!i||!r||!r.length)return null;var{xAxisId:o,yAxisId:s}=e,a=lM(e,iM),l=r.map((e,r)=>{var o=oM(oM({},a),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(r),index:r});return x.createElement(uM,{option:i,lineItemProps:o,key:"line-".concat(r)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function fM(e){var{horizontalFill:t,fillOpacity:n,x:i,y:r,width:o,height:s,horizontalPoints:a,horizontal:l=!0}=e;if(!l||!t||!t.length||null==a)return null;var c=a.map(e=>Math.round(e+r-r)).sort((e,t)=>e-t);r!==c[0]&&c.unshift(0);var u=c.map((e,a)=>{var l=c[a+1]?c[a+1]-e:r+s-e;if(l<=0)return null;var u=a%t.length;return x.createElement("rect",{key:"react-".concat(a),y:e,x:i,height:l,width:o,stroke:"none",fill:t[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function pM(e){var{vertical:t=!0,verticalFill:n,fillOpacity:i,x:r,y:o,width:s,height:a,verticalPoints:l}=e;if(!t||!n||!n.length)return null;var c=l.map(e=>Math.round(e+r-r)).sort((e,t)=>e-t);r!==c[0]&&c.unshift(0);var u=c.map((e,t)=>{var l=c[t+1]?c[t+1]-e:r+s-e;if(l<=0)return null;var u=t%n.length;return x.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:l,height:a,stroke:"none",fill:n[u],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var mM=(e,t)=>{var{xAxis:n,width:i,height:r,offset:o}=e;return Np(VO(oM(oM(oM({},YO),n),{},{ticks:Fp(n),viewBox:{x:0,y:0,width:i,height:r}})),o.left,o.left+o.width,t)},gM=(e,t)=>{var{yAxis:n,width:i,height:r,offset:o}=e;return Np(VO(oM(oM(oM({},YO),n),{},{ticks:Fp(n),viewBox:{x:0,y:0,width:i,height:r}})),o.top,o.top+o.height,t)},_M={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:GE.grid};function yM(e){var t=Wm(),n=$m(),i=Hm(),r=oM(oM({},Nc(e,_M)),{},{x:hc(e.x)?e.x:i.left,y:hc(e.y)?e.y:i.top,width:hc(e.width)?e.width:i.width,height:hc(e.height)?e.height:i.height}),{xAxisId:o,yAxisId:s,x:a,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:h,verticalValues:f}=r,p=hm(),m=Ad(e=>pk(e,"xAxis",o,p)),g=Ad(e=>pk(e,"yAxis",s,p));if(!(Pm(c)&&Pm(u)&&hc(a)&&hc(l)))return null;var _=r.verticalCoordinatesGenerator||mM,y=r.horizontalCoordinatesGenerator||gM,{horizontalPoints:v,verticalPoints:b}=r;if(!(v&&v.length||"function"!=typeof y)){var w=h&&h.length,S=y({yAxis:g?oM(oM({},g),{},{ticks:w?h:g.ticks}):void 0,width:null!=t?t:c,height:null!=n?n:u,offset:i},!!w||d);wm(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(v=S)}if(!(b&&b.length||"function"!=typeof _)){var E=f&&f.length,C=_({xAxis:m?oM(oM({},m),{},{ticks:E?f:m.ticks}):void 0,width:null!=t?t:c,height:null!=n?n:u,offset:i},!!E||d);wm(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(b=C)}return x.createElement(CI,{zIndex:r.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(cM,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),x.createElement(fM,aM({},r,{horizontalPoints:v})),x.createElement(pM,aM({},r,{verticalPoints:b})),x.createElement(dM,aM({},r,{offset:i,horizontalPoints:v,xAxis:m,yAxis:g})),x.createElement(hM,aM({},r,{offset:i,verticalPoints:b,xAxis:m,yAxis:g}))))}yM.displayName="CartesianGrid";var vM=(e,t,n,i)=>_k(e,"xAxis",t,i),bM=(e,t,n,i)=>gk(e,"xAxis",t,i),xM=(e,t,n,i)=>_k(e,"yAxis",n,i),wM=(e,t,n,i)=>gk(e,"yAxis",n,i),SM=Dd([Gm,vM,xM,bM,wM],(e,t,n,i,r)=>Dp(e,"xAxis")?Wp(t,i,!1):Wp(n,r,!1));function EM(e){return"line"===e.type}var CM=Dd([BC,(e,t,n,i,r)=>r],(e,t)=>e.filter(EM).find(e=>e.id===t)),TM=Dd([Gm,vM,xM,bM,wM,CM,SM,qS],(e,t,n,i,r,o,s,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(null!=o&&null!=t&&null!=n&&null!=i&&null!=r&&0!==i.length&&0!==r.length&&null!=s&&("horizontal"===e||"vertical"===e)){var d,{dataKey:h,data:f}=o;if(null!=(d=null!=f&&f.length>0?f:null==l?void 0:l.slice(c,u+1)))return function(e){var{layout:t,xAxis:n,yAxis:i,xAxisTicks:r,yAxisTicks:o,dataKey:s,bandSize:a,displayedData:l}=e;return l.map((e,l)=>{var c=Mp(e,s);if("horizontal"===t)return{x:jp({axis:n,ticks:r,bandSize:a,entry:e,index:l}),y:bc(c)?null:i.scale(c),value:c,payload:e};var u=bc(c)?null:n.scale(c),d=jp({axis:i,ticks:o,bandSize:a,entry:e,index:l});return null==u||null==d?null:{x:u,y:d,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataKey:h,bandSize:s,displayedData:d})}});function kM(e){var t=Aa(e);if(null!=t){var{r:n,strokeWidth:i}=t,r=Number(n),o=Number(i);return(Number.isNaN(r)||r<0)&&(r=3),(Number.isNaN(o)||o<0)&&(o=2),{r:r,strokeWidth:o}}return{r:3,strokeWidth:2}}var AM=["id"],IM=["type","layout","connectNulls","needClip","shape"],PM=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function LM(){return LM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LM.apply(null,arguments)}function RM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function OM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RM(Object(n),!0).forEach(function(t){MM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DM(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var NM=e=>{var{dataKey:t,name:n,stroke:i,legendType:r,hide:o}=e;return[{inactive:o,dataKey:t,type:r,color:i,value:Gp(n,t),payload:e}]},FM=x.memo(e=>{var{dataKey:t,data:n,stroke:i,strokeWidth:r,fill:o,name:s,hide:a,unit:l,tooltipType:c}=e,u={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:o,dataKey:t,nameKey:void 0,name:Gp(s,t),hide:a,type:c,color:i,unit:l}};return x.createElement(oR,{tooltipEntrySettings:u})}),BM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function zM(e,t){for(var n=e.length%2!=0?[...e,0]:e,i=[],r=0;r<t;++r)i=[...i,...n];return i}function UM(e){var{clipPathId:t,points:n,props:i}=e,{dot:r,dataKey:o,needClip:s}=i,{id:a}=i,l=ka(DM(i,AM));return x.createElement(TR,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:l,needClip:s,clipPathId:t})}function jM(e){var{showLabels:t,children:n,points:i}=e,r=x.useMemo(()=>null==i?void 0:i.map(e=>{var t,n,i={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return OM(OM({},i),{},{value:e.value,payload:e.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[i]);return x.createElement(vL,{value:t?r:void 0},n)}function VM(e){var{clipPathId:t,pathRef:n,points:i,strokeDasharray:r,props:o}=e,{type:s,layout:a,connectNulls:l,needClip:c,shape:u}=o,d=OM(OM({},Ia(DM(o,IM))),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:i,type:s,layout:a,connectNulls:l,strokeDasharray:null!=r?r:o.strokeDasharray});return x.createElement(x.Fragment,null,(null==i?void 0:i.length)>1&&x.createElement(rR,LM({shapeType:"curve",option:u},d,{pathRef:n})),x.createElement(UM,{points:i,clipPathId:t,props:o}))}function HM(e){var{clipPathId:t,props:n,pathRef:i,previousPointsRef:r,longestAnimatedLengthRef:o}=e,{points:s,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:h,width:f,height:p,onAnimationEnd:m,onAnimationStart:g}=n,_=r.current,y=X_(s,"recharts-line-"),v=x.useRef(y),[b,w]=x.useState(!1),S=!b,E=x.useCallback(()=>{"function"==typeof m&&m(),w(!1)},[m]),C=x.useCallback(()=>{"function"==typeof g&&g(),w(!0)},[g]),T=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(i.current),k=x.useRef(0);v.current!==y&&(k.current=o.current,v.current=y);var A=k.current;return x.createElement(jM,{points:s,showLabels:S},n.children,x.createElement(Y_,{animationId:y,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:E,onAnimationStart:C,key:y},e=>{var c,u=yc(A,T+A,e),d=Math.min(u,T);if(l)if(a){var m="".concat(a).split(/[,\s]+/gim).map(e=>parseFloat(e));c=((e,t,n)=>{var i=n.reduce((e,t)=>e+t);if(!i)return BM(t,e);for(var r=Math.floor(e/i),o=e%i,s=t-e,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>o){a=[...n.slice(0,l),o-c];break}var u=a.length%2==0?[0,s]:[s];return[...zM(n,r),...a,...u].map(e=>"".concat(e,"px")).join(", ")})(d,T,m)}else c=BM(T,d);else c=null==a?void 0:String(a);if(e>0&&T>0&&(r.current=s,o.current=Math.max(o.current,d)),_){var g=_.length/s.length,y=1===e?s:s.map((t,n)=>{var i=Math.floor(n*g);if(_[i]){var r=_[i];return OM(OM({},t),{},{x:yc(r.x,t.x,e),y:yc(r.y,t.y,e)})}return OM(OM({},t),{},h?{x:yc(2*f,t.x,e),y:yc(p/2,t.y,e)}:{x:t.x,y:t.y})});return r.current=y,x.createElement(VM,{props:n,points:y,clipPathId:t,pathRef:i,strokeDasharray:c})}return x.createElement(VM,{props:n,points:s,clipPathId:t,pathRef:i,strokeDasharray:c})}),x.createElement(wL,{label:n.label}))}function WM(e){var{clipPathId:t,props:n}=e,i=x.useRef(null),r=x.useRef(0),o=x.useRef(null);return x.createElement(HM,{props:n,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:r,pathRef:o})}var $M=(e,t)=>{var n,i;return{x:null!==(n=e.x)&&void 0!==n?n:void 0,y:null!==(i=e.y)&&void 0!==i?i:void 0,value:e.value,errorVal:Mp(e.payload,t)}};class GM extends x.Component{render(){var{hide:e,dot:t,points:n,className:i,xAxisId:r,yAxisId:o,top:s,left:a,width:l,height:c,id:u,needClip:d,zIndex:h}=this.props;if(e)return null;var f=$("recharts-line",i),p=u,{r:m,strokeWidth:g}=kM(t),_=zL(t),y=2*m+g,v=d?"url(#clipPath-".concat(_?"":"dots-").concat(p,")"):void 0;return x.createElement(CI,{zIndex:h},x.createElement(Da,{className:f},d&&x.createElement("defs",null,x.createElement(sO,{clipPathId:p,xAxisId:r,yAxisId:o}),!_&&x.createElement("clipPath",{id:"clipPath-dots-".concat(p)},x.createElement("rect",{x:a-y/2,y:s-y/2,width:l+y,height:c+y}))),x.createElement(rO,{xAxisId:r,yAxisId:o,data:n,dataPointFormatter:$M,errorBarOffset:0},x.createElement(WM,{props:this.props,clipPathId:p}))),x.createElement(XR,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:v}))}}var qM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:GE.line,type:"linear"};function YM(e){var t=Nc(e,qM),{activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:o,animationEasing:s,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:d,legendType:h,xAxisId:f,yAxisId:p,id:m}=t,g=DM(t,PM),{needClip:_}=oO(f,p),y=WR(),v=qm(),b=hm(),w=Ad(e=>TM(e,f,p,b,m));if("horizontal"!==v&&"vertical"!==v||null==w||null==y)return null;var{height:S,width:E,x:C,y:T}=y;return x.createElement(GM,LM({},g,{id:m,connectNulls:a,dot:l,activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:o,animationEasing:s,isAnimationActive:u,hide:c,label:d,legendType:h,xAxisId:f,yAxisId:p,points:w,layout:v,height:S,width:E,left:C,top:T,needClip:_}))}function XM(e){var t=Nc(e,qM),n=hm();return x.createElement(uR,{id:t.id,type:"line"},e=>x.createElement(x.Fragment,null,x.createElement(sR,{legendPayload:NM(t)}),x.createElement(FM,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),x.createElement(vR,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),x.createElement(YM,LM({},t,{id:e}))))}var KM=x.memo(XM,bO);KM.displayName="Line";var ZM=(e,t,n,i)=>_k(e,"xAxis",t,i),QM=(e,t,n,i)=>gk(e,"xAxis",t,i),JM=(e,t,n,i)=>_k(e,"yAxis",n,i),eD=(e,t,n,i)=>gk(e,"yAxis",n,i),tD=Dd([Gm,ZM,JM,QM,eD],(e,t,n,i,r)=>Dp(e,"xAxis")?Wp(t,i,!1):Wp(n,r,!1)),nD=Dd([BC,(e,t,n,i,r)=>r],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),iD=Dd([Gm,ZM,JM,QM,eD,(e,t,n,i,r)=>{var o,s=nD(e,t,n,i,r);if(null!=s){var a,l=Gm(e);if(null!=(a=Dp(l,"xAxis")?oT(e,"yAxis",n,i):oT(e,"xAxis",t,i))){var{stackId:c}=s,u=mC(s);if(null!=c&&null!=u){var d=null===(o=a[c])||void 0===o?void 0:o.stackedData;return null==d?void 0:d.find(e=>e.key===u)}}}},qS,tD,nD,e=>e.rootProps.baseValue],(e,t,n,i,r,o,s,a,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=s;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=i&&null!=r&&0!==i.length&&0!==r.length&&null!=a){var f,{data:p}=l;if(null!=(f=p&&p.length>0?p:null==u?void 0:u.slice(d,h+1)))return function(e){var t,{areaSettings:{connectNulls:n,baseValue:i,dataKey:r},stackedData:o,layout:s,chartBaseValue:a,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:f,bandSize:p}=e,m=o&&o.length,g=CD(s,a,i,l,c),_="horizontal"===s,y=!1,v=u.map((e,t)=>{var i;m?i=o[d+t]:(i=Mp(e,r),Array.isArray(i)?y=!0:i=[g,i]);var s=null==i[1]||m&&!n&&null==Mp(e,r);return _?{x:jp({axis:l,ticks:h,bandSize:p,entry:e,index:t}),y:s?null:c.scale(i[1]),value:i,payload:e}:{x:s?null:l.scale(i[1]),y:jp({axis:c,ticks:f,bandSize:p,entry:e,index:t}),value:i,payload:e}});return t=m||y?v.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return _?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):_?c.scale(g):l.scale(g),{points:v,baseLine:t,isRange:y}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:d,areaSettings:l,stackedData:o,displayedData:f,chartBaseValue:c,bandSize:a})}}),rD=["id"],oD=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function sD(){return sD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sD.apply(null,arguments)}function aD(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lD(Object(n),!0).forEach(function(t){uD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dD(e,t){return e&&"none"!==e?e:t}var hD=e=>{var{dataKey:t,name:n,stroke:i,fill:r,legendType:o,hide:s}=e;return[{inactive:s,dataKey:t,type:o,color:dD(i,r),value:Gp(n,t),payload:e}]},fD=x.memo(e=>{var{dataKey:t,data:n,stroke:i,strokeWidth:r,fill:o,name:s,hide:a,unit:l,tooltipType:c}=e,u={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:o,dataKey:t,nameKey:void 0,name:Gp(s,t),hide:a,type:c,color:dD(i,o),unit:l}};return x.createElement(oR,{tooltipEntrySettings:u})});function pD(e){var{clipPathId:t,points:n,props:i}=e,{needClip:r,dot:o,dataKey:s}=i,a=ka(i);return x.createElement(TR,{points:n,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:a,needClip:r,clipPathId:t})}function mD(e){var{showLabels:t,children:n,points:i}=e,r=i.map(e=>{var t,n,i={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return cD(cD({},i),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:i,fill:void 0})});return x.createElement(vL,{value:t?r:void 0},n)}function gD(e){var{points:t,baseLine:n,needClip:i,clipPathId:r,props:o}=e,{layout:s,type:a,stroke:l,connectNulls:c,isRange:u}=o,{id:d}=o,h=aD(o,rD),f=ka(h),p=Ia(h);return x.createElement(x.Fragment,null,(null==t?void 0:t.length)>1&&x.createElement(Da,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},x.createElement(g_,sD({},p,{id:d,points:t,connectNulls:c,type:a,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==l&&x.createElement(g_,sD({},f,{className:"recharts-area-curve",layout:s,type:a,connectNulls:c,fill:"none",points:t})),"none"!==l&&u&&x.createElement(g_,sD({},f,{className:"recharts-area-curve",layout:s,type:a,connectNulls:c,fill:"none",points:n}))),x.createElement(pD,{points:t,props:h,clipPathId:r}))}function _D(e){var{alpha:t,baseLine:n,points:i,strokeWidth:r}=e,o=i[0].y,s=i[i.length-1].y;if(!Im(o)||!Im(s))return null;var a=t*Math.abs(o-s),l=Math.max(...i.map(e=>e.x||0));return hc(n)?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(...n.map(e=>e.x||0),l)),hc(l)?x.createElement("rect",{x:0,y:o<s?o:o-a,width:l+(r?parseInt("".concat(r),10):1),height:Math.floor(a)}):null}function yD(e){var{alpha:t,baseLine:n,points:i,strokeWidth:r}=e,o=i[0].x,s=i[i.length-1].x;if(!Im(o)||!Im(s))return null;var a=t*Math.abs(o-s),l=Math.max(...i.map(e=>e.y||0));return hc(n)?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(...n.map(e=>e.y||0),l)),hc(l)?x.createElement("rect",{x:o<s?o:o-a,y:0,width:a,height:Math.floor(l+(r?parseInt("".concat(r),10):1))}):null}function vD(e){var{alpha:t,layout:n,points:i,baseLine:r,strokeWidth:o}=e;return"vertical"===n?x.createElement(_D,{alpha:t,points:i,baseLine:r,strokeWidth:o}):x.createElement(yD,{alpha:t,points:i,baseLine:r,strokeWidth:o})}function bD(e){var{needClip:t,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:o}=e,{points:s,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,onAnimationStart:h,onAnimationEnd:f}=i,p=X_(x.useMemo(()=>({points:s,baseLine:a}),[s,a]),"recharts-area-"),m=(()=>{var e=qm();if("horizontal"===e||"vertical"===e)return e})(),[g,_]=x.useState(!1),y=!g,v=x.useCallback(()=>{"function"==typeof f&&f(),_(!1)},[f]),b=x.useCallback(()=>{"function"==typeof h&&h(),_(!0)},[h]);if(null==m)return null;var w=r.current,S=o.current;return x.createElement(mD,{showLabels:y,points:s},i.children,x.createElement(Y_,{animationId:p,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:v,onAnimationStart:b,key:p},e=>{if(w){var c,u=w.length/s.length,d=1===e?s:s.map((t,n)=>{var i=Math.floor(n*u);if(w[i]){var r=w[i];return cD(cD({},t),{},{x:yc(r.x,t.x,e),y:yc(r.y,t.y,e)})}return t});return c=hc(a)?yc(S,a,e):bc(a)||uc(a)?yc(S,0,e):a.map((t,n)=>{var i=Math.floor(n*u);if(Array.isArray(S)&&S[i]){var r=S[i];return cD(cD({},t),{},{x:yc(r.x,t.x,e),y:yc(r.y,t.y,e)})}return t}),e>0&&(r.current=d,o.current=c),x.createElement(gD,{points:d,baseLine:c,needClip:t,clipPathId:n,props:i})}return e>0&&(r.current=s,o.current=a),x.createElement(Da,null,l&&x.createElement("defs",null,x.createElement("clipPath",{id:"animationClipPath-".concat(n)},x.createElement(vD,{alpha:e,points:s,baseLine:a,layout:m,strokeWidth:i.strokeWidth}))),x.createElement(Da,{clipPath:"url(#animationClipPath-".concat(n,")")},x.createElement(gD,{points:s,baseLine:a,needClip:t,clipPathId:n,props:i})))}),x.createElement(wL,{label:i.label}))}function xD(e){var{needClip:t,clipPathId:n,props:i}=e,r=x.useRef(null),o=x.useRef();return x.createElement(bD,{needClip:t,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:o})}class wD extends x.PureComponent{render(){var{hide:e,dot:t,points:n,className:i,top:r,left:o,needClip:s,xAxisId:a,yAxisId:l,width:c,height:u,id:d,baseLine:h,zIndex:f}=this.props;if(e)return null;var p=$("recharts-area",i),m=d,{r:g,strokeWidth:_}=kM(t),y=zL(t),v=2*g+_,b=s?"url(#clipPath-".concat(y?"":"dots-").concat(m,")"):void 0;return x.createElement(CI,{zIndex:f},x.createElement(Da,{className:p},s&&x.createElement("defs",null,x.createElement(sO,{clipPathId:m,xAxisId:a,yAxisId:l}),!y&&x.createElement("clipPath",{id:"clipPath-dots-".concat(m)},x.createElement("rect",{x:o-v/2,y:r-v/2,width:c+v,height:u+v}))),x.createElement(xD,{needClip:s,clipPathId:m,props:this.props})),x.createElement(XR,{points:n,mainColor:dD(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:b}),this.props.isRange&&Array.isArray(h)&&x.createElement(XR,{points:h,mainColor:dD(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:b}))}}var SD={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:GE.area};function ED(e){var t,n=Nc(e,SD),{activeDot:i,animationBegin:r,animationDuration:o,animationEasing:s,connectNulls:a,dot:l,fill:c,fillOpacity:u,hide:d,isAnimationActive:h,legendType:f,stroke:p,xAxisId:m,yAxisId:g}=n,_=aD(n,oD),y=qm(),v=JA(),{needClip:b}=oO(m,g),w=hm(),{points:S,isRange:E,baseLine:C}=null!==(t=Ad(t=>iD(t,m,g,w,e.id)))&&void 0!==t?t:{},T=WR();if("horizontal"!==y&&"vertical"!==y||null==T)return null;if("AreaChart"!==v&&"ComposedChart"!==v)return null;var{height:k,width:A,x:I,y:P}=T;return S&&S.length?x.createElement(wD,sD({},_,{activeDot:i,animationBegin:r,animationDuration:o,animationEasing:s,baseLine:C,connectNulls:a,dot:l,fill:c,fillOpacity:u,height:k,hide:d,layout:y,isAnimationActive:"auto"===h?!W_:h,isRange:E,legendType:f,needClip:b,points:S,stroke:p,width:A,left:I,top:P,xAxisId:m,yAxisId:g})):null}var CD=(e,t,n,i,r)=>{var o=null!=n?n:t;if(hc(o))return o;var s="horizontal"===e?r:i,a=s.scale.domain();if("number"===s.type){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return"dataMin"===o?c:"dataMax"===o||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return"dataMin"===o?a[0]:"dataMax"===o?a[1]:a[0]};function TD(e){var t=Nc(e,SD),n=hm();return x.createElement(uR,{id:t.id,type:"area"},e=>{return x.createElement(x.Fragment,null,x.createElement(sR,{legendPayload:hD(t)}),x.createElement(fD,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),x.createElement(vR,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:(i=t.stackId,null==i?void 0:String(i)),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),x.createElement(ED,sD({},t,{id:e})));var i})}var kD=x.memo(TD,bO);kD.displayName="Area";var AD=["domain","range"],ID=["domain","range"];function PD(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LD(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&e[0]===t[0]&&e[1]===t[1]}function RD(e,t){if(e===t)return!0;var{domain:n,range:i}=e,r=PD(e,AD),{domain:o,range:s}=t,a=PD(t,ID);return!!LD(n,o)&&!!LD(i,s)&&bO(r,a)}var OD=["dangerouslySetInnerHTML","ticks"],MD=["id"];function DD(){return DD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},DD.apply(null,arguments)}function ND(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FD(e){var t=Ed(),n=x.useRef(null);return x.useLayoutEffect(()=>{null===n.current?t(LR(e)):n.current!==e&&t(RR({prev:n.current,next:e})),n.current=e},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(t(OR(n.current)),n.current=null)},[t]),null}var BD=e=>{var{xAxisId:t,className:n}=e,i=Ad(um),r=hm(),o="xAxis",s=Ad(e=>ZT(e,o,t,r)),a=Ad(e=>mk(e,o,t,r)),l=Ad(e=>rk(e,t)),c=Ad(e=>ak(e,t)),u=Ad(e=>kC(e,t));if(null==l||null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h}=e,f=ND(e,OD),{id:p}=u,m=ND(u,MD);return x.createElement(JO,DD({},f,m,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:$("recharts-".concat(o," ").concat(o),n),viewBox:i,ticks:a,axisType:o}))},zD={allowDataOverflow:TC.allowDataOverflow,allowDecimals:TC.allowDecimals,allowDuplicatedCategory:TC.allowDuplicatedCategory,angle:TC.angle,axisLine:YO.axisLine,height:TC.height,hide:!1,includeHidden:TC.includeHidden,interval:TC.interval,minTickGap:TC.minTickGap,mirror:TC.mirror,orientation:TC.orientation,padding:TC.padding,reversed:TC.reversed,scale:TC.scale,tick:TC.tick,tickCount:TC.tickCount,tickLine:YO.tickLine,tickSize:YO.tickSize,type:TC.type,xAxisId:0},UD=e=>{var t=Nc(e,zD);return x.createElement(x.Fragment,null,x.createElement(FD,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(BD,t))},jD=x.memo(UD,RD);jD.displayName="XAxis";var VD=["dangerouslySetInnerHTML","ticks"],HD=["id"];function WD(){return WD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},WD.apply(null,arguments)}function $D(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GD(e){var t=Ed(),n=x.useRef(null);return x.useLayoutEffect(()=>{null===n.current?t(MR(e)):n.current!==e&&t(DR({prev:n.current,next:e})),n.current=e},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(t(NR(n.current)),n.current=null)},[t]),null}var qD=e=>{var{yAxisId:t,className:n,width:i,label:r}=e,o=x.useRef(null),s=x.useRef(null),a=Ad(um),l=hm(),c=Ed(),u="yAxis",d=Ad(e=>ZT(e,u,t,l)),h=Ad(e=>ck(e,t)),f=Ad(e=>lk(e,t)),p=Ad(e=>mk(e,u,t,l)),m=Ad(e=>PC(e,t));if(x.useLayoutEffect(()=>{if("auto"===i&&h&&!KP(r)&&!x.isValidElement(r)&&null!=m){var e=o.current;if(e){var n=e.getCalculatedWidth();Math.round(h.width)!==Math.round(n)&&c(UR({id:t,width:n}))}}},[p,h,c,r,t,i,m]),null==h||null==f||null==m)return null;var{dangerouslySetInnerHTML:g,ticks:_}=e,y=$D(e,VD),{id:v}=m,b=$D(m,HD);return x.createElement(JO,WD({},y,b,{ref:o,labelRef:s,scale:d,x:f.x,y:f.y,tickTextProps:"auto"===i?{width:void 0}:{width:i},width:h.width,height:h.height,className:$("recharts-".concat(u," ").concat(u),n),viewBox:a,ticks:p,axisType:u}))},YD={allowDataOverflow:IC.allowDataOverflow,allowDecimals:IC.allowDecimals,allowDuplicatedCategory:IC.allowDuplicatedCategory,angle:IC.angle,axisLine:YO.axisLine,hide:!1,includeHidden:IC.includeHidden,interval:IC.interval,minTickGap:IC.minTickGap,mirror:IC.mirror,orientation:IC.orientation,padding:IC.padding,reversed:IC.reversed,scale:IC.scale,tick:IC.tick,tickCount:IC.tickCount,tickLine:YO.tickLine,tickSize:YO.tickSize,type:IC.type,width:IC.width,yAxisId:0},XD=e=>{var t=Nc(e,YD);return x.createElement(x.Fragment,null,x.createElement(GD,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement(qD,t))},KD=x.memo(XD,RD);KD.displayName="YAxis";var ZD={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}};function QD(e){var t=Nc(e,ZD),{animationId:n,from:i,to:r,attributeName:o,isActive:s,canBegin:a,duration:l,easing:c,begin:u,onAnimationEnd:d,onAnimationStart:h,children:f}=t,p="auto"===s?!W_:s,m=H_(n+o,t.animationManager),[g,_]=x.useState(()=>p?i:r),y=x.useRef(!1),v=x.useCallback(()=>{_(i),h()},[i,h]);return x.useEffect(()=>{if(!p||!a)return Sc;y.current=!0;var e=m.subscribe(_);return m.start([v,u,r,l,d]),()=>{m.stop(),e&&e(),d()}},[p,a,l,c,u,v,d,m,r,i]),p?a?y.current?f({transition:T_([o],l,c),[o]:g}):f({[o]:i}):f({[o]:i}):f({[o]:r})}var JD=Dd([(e,t)=>t,Gm,hC,bC,AA,RA,iI,lm],(e,t,n,i,r,o,s,a)=>{if(e&&t&&i&&r&&o)return"horizontal"===t||"vertical"===t?((e,t,n,i,r,o,s)=>{if(e&&n&&i&&r&&function(e,t){var{chartX:n,chartY:i}=e;return n>=t.left&&n<=t.left+t.width&&i>=t.top&&i<=t.top+t.height}(e,s)){var a=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=QA(a,o,r,n,i),c=((e,t,n,i)=>{var r=t.find(e=>e&&e.index===n);if(r){if("horizontal"===e)return{x:r.coordinate,y:i.chartY};if("vertical"===e)return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}})(t,r,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,i,r,o,s,a):((e,t,n,i,r,o,s)=>{if(e&&i&&r&&o&&n){var a=fy(e,n);if(a){var l=((e,t)=>"centric"===t?e.angle:e.radius)(a,t),c=QA(l,s,o,i,r),u=((e,t,n,i)=>{var r=t.find(e=>e&&e.index===n);if(r){if("centric"===e){var o=r.coordinate,{radius:s}=i;return KA(KA(KA({},i),dy(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var a=r.coordinate,{angle:l}=i;return KA(KA(KA({},i),dy(i.cx,i.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,o,c,a);return{activeIndex:String(c),activeCoordinate:u}}}})(e,t,n,i,r,o,s)}),eN=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,i=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/i)}},tN=Lf("mouseClick"),nN=wp();nN.startListening({actionCreator:tN,effect:(e,t)=>{var n=e.payload,i=JD(t.getState(),eN(n));null!=(null==i?void 0:i.activeIndex)&&t.dispatch(Nk({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var iN=Lf("mouseMove"),rN=wp(),oN=null;rN.startListening({actionCreator:iN,effect:(e,t)=>{var n=e.payload;null!==oN&&cancelAnimationFrame(oN);var i=eN(n);oN=requestAnimationFrame(()=>{var e=t.getState();if("axis"===Sk(e,e.tooltip.settings.shared)){var n=JD(e,i);null!=(null==n?void 0:n.activeIndex)?t.dispatch(Dk({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate})):t.dispatch(Ok())}oN=null})}});var sN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},aN=$f({name:"rootProps",initialState:sN,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:sN.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),lN=aN.reducer,{updateOptions:cN}=aN.actions,uN=$f({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:dN}=uN.actions,hN=uN.reducer,fN=Lf("keyDown"),pN=Lf("focus"),mN=wp();mN.startListening({actionCreator:fN,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:i}=n.tooltip,r=e.payload;if("ArrowRight"===r||"ArrowLeft"===r||"Enter"===r){var o=Wk(i,oA(n),nT(n),EA(n)),s=null==o?-1:Number(o);if(Number.isFinite(s)&&!(s<0)){var a=RA(n);if("Enter"!==r){var l=s+("ArrowRight"===r?1:-1)*("left-to-right"===vk(n)?1:-1);if(!(null==a||l>=a.length||l<0)){var c=aI(n,"axis","hover",String(l));t.dispatch(Bk({active:!0,activeIndex:l.toString(),activeDataKey:void 0,activeCoordinate:c}))}}else{var u=aI(n,"axis","hover",String(i.index));t.dispatch(Bk({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}))}}}}}}),mN.startListening({actionCreator:pN,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&null==i.index){var r=aI(n,"axis","hover",String("0"));t.dispatch(Bk({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:r}))}}}});var gN=Lf("externalEvent"),_N=wp(),yN=new Map;_N.startListening({actionCreator:gN,effect:(e,t)=>{var{handler:n,reactEvent:i}=e.payload;if(null!=n){i.persist();var r=i.type,o=yN.get(r);void 0!==o&&cancelAnimationFrame(o);var s=requestAnimationFrame(()=>{try{var e=t.getState(),o={activeCoordinate:VA(e),activeDataKey:zA(e),activeIndex:FA(e),activeLabel:BA(e),activeTooltipIndex:FA(e),isTooltipActive:HA(e)};n(o,i)}finally{yN.delete(r)}});yN.set(r,s)}}});var vN=Dd([Yk],e=>e.tooltipItemPayloads),bN=Dd([vN,qk,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,i)=>{var r=e.find(e=>e.settings.dataKey===i);if(null!=r){var{positions:o}=r;if(null!=o)return t(o,n)}}),xN=Lf("touchMove"),wN=wp();wN.startListening({actionCreator:xN,effect:(e,t)=>{var n=e.payload;if(null!=n.touches&&0!==n.touches.length){var i=t.getState(),r=Sk(i,i.tooltip.settings.shared);if("axis"===r){var o=JD(i,eN({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));null!=(null==o?void 0:o.activeIndex)&&t.dispatch(Dk({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===r){var s,a=n.touches[0];if(null==document.elementFromPoint)return;var l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute("data-recharts-item-index"),u=null!==(s=l.getAttribute("data-recharts-item-data-key"))&&void 0!==s?s:void 0,d=bN(t.getState(),c,u);t.dispatch(Lk({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}}});var SN=fh({brush:CO,cartesianAxis:jR,chartData:XI,errorBars:eO,graphicalItems:_R,layout:Ip,legend:$g,options:VI,polarAxis:BL,polarOptions:hN,referenceElements:MO,rootProps:lN,tooltip:zk,zIndex:EI});function EN(e){var{preloadedState:t,children:n,reduxStoreName:i}=e,r=hm(),o=x.useRef(null);if(r)return n;null==o.current&&(o.current=function(e){return function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=e??{};let o=new Rf;return t&&("boolean"==typeof t?o.push(Af):o.push(If(t.extraArgument))),o},{reducer:n,middleware:i,devTools:r=!0,preloadedState:o,enhancers:s}=e||{};let a,l;if("function"==typeof n)a=n;else{if(!dh(n))throw new Error(Sp(1));a=fh(n)}l="function"==typeof i?i(t):t();let c=ph;r&&(c=Pf({trace:!1,..."object"==typeof r&&r}));const u=function(...e){return t=>(n,i)=>{const r=t(n,i);let o=()=>{throw new Error(ah(15))};const s={getState:r.getState,dispatch:(e,...t)=>o(e,...t)},a=e.map(e=>e(s));return o=ph(...a)(r.dispatch),{...r,dispatch:o}}}(...l),d=(e=>function(t){const{autoBatch:n=!0}=t??{};let i=new Rf(e);return n&&i.push(Bf("object"==typeof n?n:void 0)),i})(u);return hh(a,o,c(..."function"==typeof s?s(d):d()))}({reducer:SN,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([nN.middleware,rN.middleware,mN.middleware,_N.middleware,wN.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(Bf({type:"raf"}))},devTools:false})}(t));var s=wd;return x.createElement(_O,{context:s,store:o.current},n)}function CN(e){var{layout:t,margin:n}=e,i=Ed(),r=hm();return x.useEffect(()=>{r||(i(Tp(t)),i(Cp(n)))},[i,r,t,n]),null}var TN=x.memo(CN,bO);function kN(e){var t=Ed();return x.useEffect(()=>{t(cN(e))},[t,e]),null}function AN(e){var{zIndex:t,isPanorama:n}=e,i=lR("".concat(n?"recharts-zindex-panorama-":"recharts-zindex-").concat(t)),r=Ed();return x.useLayoutEffect(()=>(r(wI({zIndex:t,elementId:i,isPanorama:n})),()=>{r(SI({zIndex:t,isPanorama:n}))}),[r,t,i,n]),x.createElement("g",{tabIndex:-1,id:i})}function IN(e){var{children:t,isPanorama:n}=e,i=Ad(fI);if(!i||0===i.length)return t;var r=i.filter(e=>e<0),o=i.filter(e=>e>0);return x.createElement(x.Fragment,null,r.map(e=>x.createElement(AN,{key:e,zIndex:e,isPanorama:n})),t,o.map(e=>x.createElement(AN,{key:e,zIndex:e,isPanorama:n})))}var PN=["children"];function LN(){return LN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LN.apply(null,arguments)}var RN={width:"100%",height:"100%",display:"block"},ON=x.forwardRef((e,t)=>{var n=Wm(),i=$m(),r=s_();if(!Pm(n)||!Pm(i))return null;var o,s,{children:a,otherAttributes:l,title:c,desc:u}=e;return null!=l&&(o="number"==typeof l.tabIndex?l.tabIndex:r?0:void 0,s="string"==typeof l.role?l.role:r?"application":void 0),x.createElement(Ra,LN({},l,{title:c,desc:u,role:s,tabIndex:o,width:n,height:i,style:RN,ref:t}),a)}),MN=e=>{var{children:t}=e,n=Ad(pm);if(!n)return null;var{width:i,height:r,y:o,x:s}=n;return x.createElement(Ra,{width:i,height:r,x:s,y:o},t)},DN=x.forwardRef((e,t)=>{var{children:n}=e,i=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,PN);return hm()?x.createElement(MN,null,x.createElement(IN,{isPanorama:!0},n)):x.createElement(ON,LN({ref:t},i),x.createElement(IN,{isPanorama:!1},n))});function NN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function FN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NN(Object(n),!0).forEach(function(t){BN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function BN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zN.apply(null,arguments)}var UN=()=>(eP(),null);function jN(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var VN=x.forwardRef((e,t)=>{var n,i,r=x.useRef(null),[o,s]=x.useState({containerWidth:jN(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:jN(null===(i=e.style)||void 0===i?void 0:i.height)}),a=x.useCallback((e,t)=>{s(n=>{var i=Math.round(e),r=Math.round(t);return n.containerWidth===i&&n.containerHeight===r?n:{containerWidth:i,containerHeight:r}})},[]),l=x.useCallback(e=>{if("function"==typeof t&&t(e),null!=e&&"undefined"!=typeof ResizeObserver){var{width:n,height:i}=e.getBoundingClientRect();a(n,i);var o=new ResizeObserver(e=>{var{width:t,height:n}=e[0].contentRect;a(t,n)});o.observe(e),r.current=o}},[t,a]);return x.useEffect(()=>()=>{var e=r.current;null!=e&&e.disconnect()},[a]),x.createElement(x.Fragment,null,x.createElement(Ym,{width:o.containerWidth,height:o.containerHeight}),x.createElement("div",zN({ref:l},e)))}),HN=x.forwardRef((e,t)=>{var{width:n,height:i}=e,[r,o]=x.useState({containerWidth:jN(n),containerHeight:jN(i)}),s=x.useCallback((e,t)=>{o(n=>{var i=Math.round(e),r=Math.round(t);return n.containerWidth===i&&n.containerHeight===r?n:{containerWidth:i,containerHeight:r}})},[]),a=x.useCallback(e=>{if("function"==typeof t&&t(e),null!=e){var{width:n,height:i}=e.getBoundingClientRect();s(n,i)}},[t,s]);return x.createElement(x.Fragment,null,x.createElement(Ym,{width:r.containerWidth,height:r.containerHeight}),x.createElement("div",zN({ref:a},e)))}),WN=x.forwardRef((e,t)=>{var{width:n,height:i}=e;return x.createElement(x.Fragment,null,x.createElement(Ym,{width:n,height:i}),x.createElement("div",zN({ref:t},e)))}),$N=x.forwardRef((e,t)=>{var{width:n,height:i}=e;return dc(n)||dc(i)?x.createElement(HN,zN({},e,{ref:t})):x.createElement(WN,zN({},e,{ref:t}))}),GN=x.forwardRef((e,t)=>{var{children:n,className:i,height:r,onClick:o,onContextMenu:s,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:h,onTouchEnd:f,onTouchMove:p,onTouchStart:m,style:g,width:_,responsive:y,dispatchTouchEvents:v=!0}=e,b=x.useRef(null),w=Ed(),[S,E]=x.useState(null),[C,T]=x.useState(null),k=function(){var e=Ed(),[t,n]=x.useState(null),i=Ad(Xp);return x.useEffect(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;Im(n)&&n!==i&&e(Ap(n))}},[t,e,i]),n}(),A=Fm(),I=(null==A?void 0:A.width)>0?A.width:_,P=(null==A?void 0:A.height)>0?A.height:r,L=x.useCallback(e=>{k(e),"function"==typeof t&&t(e),E(e),T(e),null!=e&&(b.current=e)},[k,t,E,T]),R=x.useCallback(e=>{w(tN(e)),w(gN({handler:o,reactEvent:e}))},[w,o]),O=x.useCallback(e=>{w(iN(e)),w(gN({handler:c,reactEvent:e}))},[w,c]),M=x.useCallback(e=>{w(Ok()),w(gN({handler:u,reactEvent:e}))},[w,u]),D=x.useCallback(e=>{w(iN(e)),w(gN({handler:d,reactEvent:e}))},[w,d]),N=x.useCallback(()=>{w(pN())},[w]),F=x.useCallback(e=>{w(fN(e.key))},[w]),B=x.useCallback(e=>{w(gN({handler:s,reactEvent:e}))},[w,s]),z=x.useCallback(e=>{w(gN({handler:a,reactEvent:e}))},[w,a]),U=x.useCallback(e=>{w(gN({handler:l,reactEvent:e}))},[w,l]),j=x.useCallback(e=>{w(gN({handler:h,reactEvent:e}))},[w,h]),V=x.useCallback(e=>{w(gN({handler:m,reactEvent:e}))},[w,m]),H=x.useCallback(e=>{v&&w(xN(e)),w(gN({handler:p,reactEvent:e}))},[w,v,p]),W=x.useCallback(e=>{w(gN({handler:f,reactEvent:e}))},[w,f]),G=function(e){return!0===e?VN:$N}(y);return x.createElement(MI.Provider,{value:S},x.createElement(Na.Provider,{value:C},x.createElement(G,{width:null!=I?I:null==g?void 0:g.width,height:null!=P?P:null==g?void 0:g.height,className:$("recharts-wrapper",i),style:FN({position:"relative",cursor:"default",width:I,height:P},g),onClick:R,onContextMenu:B,onDoubleClick:z,onFocus:N,onKeyDown:F,onMouseDown:U,onMouseEnter:O,onMouseLeave:M,onMouseMove:D,onMouseUp:j,onTouchEnd:W,onTouchMove:H,onTouchStart:V,ref:L},x.createElement(UN,null),n)))}),qN=["width","height","responsive","children","className","style","compact","title","desc"],YN=x.forwardRef((e,t)=>{var{width:n,height:i,responsive:r,children:o,className:s,style:a,compact:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,qN),h=ka(d);return l?x.createElement(x.Fragment,null,x.createElement(Ym,{width:n,height:i}),x.createElement(DN,{otherAttributes:h,title:c,desc:u},o)):x.createElement(GN,{className:s,style:a,width:n,height:i,responsive:null!=r&&r,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(DN,{otherAttributes:h,title:c,desc:u,ref:t},x.createElement(NO,null,o)))});function XN(){return XN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},XN.apply(null,arguments)}var KN,ZN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},QN=x.forwardRef(function(e,t){var n,i=Nc(e.categoricalChartProps,ZN),{chartName:r,defaultTooltipEventType:o,validateTooltipEventTypes:s,tooltipPayloadSearcher:a,categoricalChartProps:l}=e,c={chartName:r,defaultTooltipEventType:o,validateTooltipEventTypes:s,tooltipPayloadSearcher:a,eventEmitter:void 0};return x.createElement(EN,{preloadedState:{options:c},reduxStoreName:null!==(n=l.id)&&void 0!==n?n:r},x.createElement(xO,{chartData:l.data}),x.createElement(TN,{layout:i.layout,margin:i.margin}),x.createElement(kN,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),x.createElement(YN,XN({},i,{ref:t})))}),JN=["axis"],eF=x.forwardRef((e,t)=>x.createElement(QN,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:JN,tooltipPayloadSearcher:UI,categoricalChartProps:e,ref:t})),tF={},nF={},iF={};function rF(){return KN||(KN=1,e=iF,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isBuffer=function(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)}),iF;var e}var oF,sF={};function aF(){return oF||(oF=1,e=sF,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrototype=function(e){const t=null==e?void 0:e.constructor;return e===("function"==typeof t?t.prototype:Object.prototype)}),sF;var e}var lF,cF={};function uF(){return lF||(lF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bu();e.isTypedArray=function(e){return t.isTypedArray(e)}}(cF)),cF}var dF,hF,fF,pF={},mF={};function gF(){return dF||(dF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Py();e.toInteger=function(e){const n=t.toFinite(e),i=n%1;return i?n-i:n}}(mF)),mF}function _F(){return hF||(hF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gF();e.times=function(e,n){if((e=t.toInteger(e))<1||!Number.isSafeInteger(e))return[];const i=new Array(e);for(let t=0;t<e;t++)i[t]="function"==typeof n?n(t):t;return i}}(pF)),pF}function yF(){return fF||(fF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rF(),n=aF(),i=Kc(),r=uF(),o=_F();function s(e){const t=[];for(const n in e)t.push(n);return t}e.keysIn=function(e){if(null==e)return[];switch(typeof e){case"object":case"function":return i.isArrayLike(e)?function(e){const n=o.times(e.length,e=>`${e}`),i=new Set(n);t.isBuffer(e)&&(i.add("offset"),i.add("parent")),r.isTypedArray(e)&&(i.add("buffer"),i.add("byteLength"),i.add("byteOffset"));const a=s(e).filter(e=>!i.has(e));return Array.isArray(e)?[...n,...a]:[...n.filter(t=>Object.hasOwn(e,t)),...a]}(e):n.isPrototype(e)?function(e){return s(e).filter(e=>"constructor"!==e)}(e):s(e);default:return s(Object(e))}}}(nF)),nF}var vF,bF={};function xF(){return vF||(vF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sc(),n=Wl(),i=ql(),r=Kl(),o=oc();function s(e,i){const r=1===i.length?e:t.get(e,i.slice(0,-1)),o=i[i.length-1];if(void 0===(null==r?void 0:r[o]))return!0;if(n.isUnsafeProperty(o))return!1;try{return delete r[o],!0}catch{return!1}}e.unset=function(e,t){if(null==e)return!0;switch(typeof t){case"symbol":case"number":case"object":if(Array.isArray(t))return s(e,t);if("number"==typeof t?t=r.toKey(t):"object"==typeof t&&(t=Object.is(null==t?void 0:t.valueOf(),-0)?"-0":String(t)),n.isUnsafeProperty(t))return!1;if(void 0===(null==e?void 0:e[t]))return!0;try{return delete e[t],!0}catch{return!1}case"string":if(void 0===(null==e?void 0:e[t])&&i.isDeepKey(t))return s(e,o.toPath(t));if(n.isUnsafeProperty(t))return!1;try{return delete e[t],!0}catch{return!1}}}}(bF)),bF}var wF,SF={};function EF(){return wF||(wF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tu();e.getSymbolsIn=function(e){const n=[];for(;e;)n.push(...t.getSymbols(e)),e=Object.getPrototypeOf(e);return n}}(SF)),SF}var CF,TF,kF,AF,IF={};function PF(){return CF||(CF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kc();e.flatten=function(e,n=1){const i=[],r=Math.floor(n);if(!t.isArrayLike(e))return i;const o=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];t<r&&(Array.isArray(s)||Boolean(null==s?void 0:s[Symbol.isConcatSpreadable])||null!==s&&"object"==typeof s&&"[object Arguments]"===Object.prototype.toString.call(s))?Array.isArray(s)?o(s,t+1):o(Array.from(s),t+1):i.push(s)}};return o(Array.from(e),0),i}}(IF)),IF}function LF(){return AF?kF:(AF=1,kF=(TF||(TF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qu(),n=yF(),i=xF(),r=EF(),o=ql(),s=PF(),a=jL();e.omit=function(e,...l){if(null==e)return{};const c=function(e,i){return i.some(e=>Array.isArray(e)||o.isDeepKey(e))?function(e){const i={},o=[...n.keysIn(e),...r.getSymbolsIn(e)];for(let n=0;n<o.length;n++){const r=o[n];i[r]=t.cloneDeepWith(e[r],e=>{if(!a.isPlainObject(e))return e})}return i}(e):function(e){const t={},i=[...n.keysIn(e),...r.getSymbolsIn(e)];for(let n=0;n<i.length;n++){const r=i[n];t[r]=e[r]}return t}(e)}(e,l=s.flatten(l));for(let t=0;t<l.length;t++){let e=l[t];switch(typeof e){case"object":Array.isArray(e)||(e=Array.from(e));for(let t=0;t<e.length;t++){const n=e[t];i.unset(c,n)}break;case"string":case"symbol":case"number":i.unset(c,e)}}return c}}(tF)),tF).omit)}const RF=a(LF());var OF=["width","height","className","style","children","type"];function MF(){return MF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},MF.apply(null,arguments)}function DF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function NF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DF(Object(n),!0).forEach(function(t){FF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BF="value",zF=(e,t)=>{if(e&&t)return lc(e,t)},UF={chartName:"Treemap",defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],tooltipPayloadSearcher:zF,eventEmitter:void 0},jF=e=>{var t,{depth:n,node:i,index:r,dataKey:o,nameKey:s,nestedActiveTooltipIndex:a}=e,l=0===n?"":function(e){return"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"","children[").concat(e,"]")}(r,a),{children:c}=i,u=n+1,d=c&&c.length?c.map((e,t)=>jF({depth:u,node:e,index:t,dataKey:o,nameKey:s,nestedActiveTooltipIndex:l})):null;return t=d&&d.length?d.reduce((e,t)=>e+t[BF],0):uc(i[o])||i[o]<=0?0:i[o],NF(NF({},i),{},{children:d,name:Mp(i,s,""),[BF]:t,depth:n,index:r,tooltipIndex:l})},VF=(e,t,n)=>{var i=t*t,r=e.area*e.area,{min:o,max:s}=e.reduce((e,t)=>({min:Math.min(e.min,t.area),max:Math.max(e.max,t.area)}),{min:1/0,max:0});return r?Math.max(i*s*n/r,r/(i*o*n)):1/0},HF=(e,t,n,i)=>t===n.width?((e,t,n,i)=>{var r=t?Math.round(e.area/t):0;(i||r>n.height)&&(r=n.height);for(var o,s=n.x,a=0,l=e.length;a<l;a++)(o=e[a]).x=s,o.y=n.y,o.height=r,o.width=Math.min(r?Math.round(o.area/r):0,n.x+n.width-s),s+=o.width;return null!=o&&(o.width+=n.x+n.width-s),NF(NF({},n),{},{y:n.y+r,height:n.height-r})})(e,t,n,i):((e,t,n,i)=>{var r=t?Math.round(e.area/t):0;(i||r>n.width)&&(r=n.width);for(var o,s=n.y,a=0,l=e.length;a<l;a++)(o=e[a]).x=n.x,o.y=s,o.width=r,o.height=Math.min(r?Math.round(o.area/r):0,n.y+n.height-s),s+=o.height;return o&&(o.height+=n.y+n.height-s),NF(NF({},n),{},{x:n.x+r,width:n.width-r})})(e,t,n,i),WF=(e,t)=>{var{children:n}=e;if(n&&n.length){var i,r,o=(e=>({x:e.x,y:e.y,width:e.width,height:e.height}))(e),s=[],a=1/0,l=Math.min(o.width,o.height),c=((e,t)=>{var n=t<0?0:t;return e.map(e=>{var t=e[BF]*n;return NF(NF({},e),{},{area:uc(t)||t<=0?0:t})})})(n,o.width*o.height/e[BF]),u=c.slice();for(s.area=0;u.length>0;){var d,h;s.push(i=u[0]),s.area+=i.area,(r=VF(s,l,t))<=a?(u.shift(),a=r):(s.area-=null!==(d=null===(h=s.pop())||void 0===h?void 0:h.area)&&void 0!==d?d:0,o=HF(s,l,o,!1),l=Math.min(o.width,o.height),s.length=s.area=0,a=1/0)}return s.length&&(o=HF(s,l,o,!0),s.length=s.area=0),NF(NF({},e),{},{children:c.map(e=>WF(e,t))})}return e},$F={aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",nameKey:"name",type:"flat",isAnimationActive:"auto",isUpdateAnimationActive:"auto",animationBegin:0,animationDuration:1500,animationEasing:"linear"},GF={isAnimationFinished:!1,formatRoot:null,currentRoot:null,nestIndex:[],prevAspectRatio:$F.aspectRatio,prevDataKey:$F.dataKey};function qF(e){var{content:t,nodeProps:n,type:i,colorPanel:r,onMouseEnter:o,onMouseLeave:s,onClick:a}=e;if(x.isValidElement(t))return x.createElement(Da,{onMouseEnter:o,onMouseLeave:s,onClick:a},x.cloneElement(t,n));if("function"==typeof t)return x.createElement(Da,{onMouseEnter:o,onMouseLeave:s,onClick:a},t(n));var{x:l,y:c,width:u,height:d,index:h}=n,f=null;u>10&&d>10&&n.children&&"nest"===i&&(f=x.createElement(kL,{points:[{x:l+2,y:c+d/2},{x:l+6,y:c+d/2+3},{x:l+2,y:c+d/2+6}]}));var p=null,m=mP(n.name);u>20&&d>20&&m.width<u&&m.height<d&&(p=x.createElement("text",{x:l+8,y:c+d/2+7,fontSize:14},n.name));var g=r||Jp;return x.createElement("g",null,x.createElement(oy,MF({fill:n.depth<2?g[h%g.length]:"rgba(255,255,255,0)",stroke:"#fff"},RF(n,["children"]),{onMouseEnter:o,onMouseLeave:s,onClick:a,"data-recharts-item-index":n.tooltipIndex})),f,p)}function YF(e){var t=Ed(),n={x:e.nodeProps.x+e.nodeProps.width/2,y:e.nodeProps.y+e.nodeProps.height/2};return x.createElement(qF,MF({},e,{onMouseEnter:()=>{t(Lk({activeIndex:e.nodeProps.tooltipIndex,activeDataKey:e.dataKey,activeCoordinate:n}))},onMouseLeave:()=>{},onClick:()=>{t(Mk({activeIndex:e.nodeProps.tooltipIndex,activeDataKey:e.dataKey,activeCoordinate:n}))}}))}var XF=x.memo(e=>{var{dataKey:t,nameKey:n,stroke:i,fill:r,currentRoot:o}=e,s={dataDefinedOnItem:o,positions:void 0,settings:{stroke:i,strokeWidth:void 0,fill:r,dataKey:t,nameKey:n,name:void 0,hide:!1,type:void 0,color:r,unit:""}};return x.createElement(oR,{tooltipEntrySettings:s})}),KF={top:0,right:0,bottom:0,left:0};function ZF(e){var{content:t,nodeProps:n,isLeaf:i,treemapProps:r,onNestClick:o}=e,{isAnimationActive:s,animationBegin:a,animationDuration:l,animationEasing:c,isUpdateAnimationActive:u,type:d,colorPanel:h,dataKey:f,onAnimationStart:p,onAnimationEnd:m,onMouseEnter:g,onClick:_,onMouseLeave:y}=r,{width:v,height:b,x:w,y:S}=n,E=-w-v,C=e=>{!i&&"nest"!==d||"function"!=typeof g||g(n,e)},T=e=>{!i&&"nest"!==d||"function"!=typeof y||y(n,e)},k=()=>{"nest"===d&&o(n),!i&&"nest"!==d||"function"!=typeof _||_(n)},A=x.useCallback(()=>{"function"==typeof m&&m()},[m]),I=x.useCallback(()=>{"function"==typeof p&&p()},[p]);return x.createElement(QD,{animationId:"treemap-".concat(n.tooltipIndex),from:"translate(".concat(E,"px, ").concat(0,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:a,easing:c,isActive:s,duration:l,onAnimationStart:I,onAnimationEnd:A},e=>x.createElement(Da,{onMouseEnter:C,onMouseLeave:T,onClick:k,style:NF(NF({},e),{},{transformOrigin:"".concat(w," ").concat(S)})},x.createElement(YF,{content:t,dataKey:f,nodeProps:NF(NF({},n),{},{isAnimationActive:s,isUpdateAnimationActive:!u,width:v,height:b,x:w,y:S}),type:d,colorPanel:h})))}class QF extends x.PureComponent{constructor(){super(...arguments),FF(this,"state",NF({},GF)),FF(this,"handleClick",e=>{var{onClick:t,type:n}=this.props;if("nest"===n&&e.children){var{width:i,height:r,dataKey:o,nameKey:s,aspectRatio:a}=this.props,l=jF({depth:0,node:NF(NF({},e),{},{x:0,y:0,width:i,height:r}),index:0,dataKey:o,nameKey:s,nestedActiveTooltipIndex:e.tooltipIndex}),c=WF(l,a),{nestIndex:u}=this.state;u.push(e),this.setState({formatRoot:c,currentRoot:l,nestIndex:u})}t&&t(e)}),FF(this,"handleTouchMove",e=>{var t=e.touches[0],n=document.elementFromPoint(t.clientX,t.clientY);if(n&&n.getAttribute&&null!=this.state.formatRoot){var i=n.getAttribute("data-recharts-item-index"),r=zF(this.state.formatRoot,i);if(r){var{dataKey:o,dispatch:s}=this.props,a={x:r.x+r.width/2,y:r.y+r.height/2};s(Lk({activeIndex:i,activeDataKey:o,activeCoordinate:a}))}}})}static getDerivedStateFromProps(e,t){if(e.data!==t.prevData||e.type!==t.prevType||e.width!==t.prevWidth||e.height!==t.prevHeight||e.dataKey!==t.prevDataKey||e.aspectRatio!==t.prevAspectRatio){var n=jF({depth:0,node:{children:e.data,x:0,y:0,width:e.width,height:e.height},index:0,dataKey:e.dataKey,nameKey:e.nameKey}),i=WF(n,e.aspectRatio);return NF(NF({},t),{},{formatRoot:i,currentRoot:n,nestIndex:[n],prevAspectRatio:e.aspectRatio,prevData:e.data,prevWidth:e.width,prevHeight:e.height,prevDataKey:e.dataKey,prevType:e.type})}return null}handleNestIndex(e,t){var{nestIndex:n}=this.state,{width:i,height:r,dataKey:o,nameKey:s,aspectRatio:a}=this.props,l=jF({depth:0,node:NF(NF({},e),{},{x:0,y:0,width:i,height:r}),index:0,dataKey:o,nameKey:s,nestedActiveTooltipIndex:e.tooltipIndex}),c=WF(l,a);n=n.slice(0,t+1),this.setState({formatRoot:c,currentRoot:e,nestIndex:n})}renderNode(e,t){var{content:n,type:i}=this.props,r=NF(NF(NF({},ka(this.props)),t),{},{root:e}),o=!t.children||!t.children.length,{currentRoot:s}=this.state;return!((null==s?void 0:s.children)||[]).filter(e=>e.depth===t.depth&&e.name===t.name).length&&e.depth&&"nest"===i?null:x.createElement(Da,{key:"recharts-treemap-node-".concat(r.x,"-").concat(r.y,"-").concat(r.name),className:"recharts-treemap-depth-".concat(t.depth)},x.createElement(ZF,{isLeaf:o,content:n,nodeProps:r,treemapProps:this.props,onNestClick:this.handleClick}),t.children&&t.children.length?t.children.map(e=>this.renderNode(t,e)):null)}renderAllNodes(){var{formatRoot:e}=this.state;return e?this.renderNode(e,e):null}renderNestIndex(){var{nameKey:e,nestIndexContent:t}=this.props,{nestIndex:n}=this.state;return x.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},n.map((n,i)=>{var r,o=lc(n,e,"root");return x.isValidElement(t)&&(r=x.cloneElement(t,n,i)),r="function"==typeof t?t(n,i):o,x.createElement("div",{onClick:this.handleNestIndex.bind(this,n,i),key:"nest-index-".concat(mc()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},r)}))}render(){var e=this.props,{width:t,height:n,className:i,style:r,children:o,type:s}=e,a=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,OF),l=ka(a);return x.createElement(x.Fragment,null,x.createElement(XF,{dataKey:this.props.dataKey,nameKey:this.props.nameKey,stroke:this.props.stroke,fill:this.props.fill,currentRoot:this.state.currentRoot}),x.createElement(Ra,MF({},l,{width:t,height:"nest"===s?n-30:n,onTouchMove:this.handleTouchMove}),this.renderAllNodes(),o),"nest"===s&&this.renderNestIndex())}}function JF(e){var t=Ed(),n=Wm(),i=$m();return Pm(n)&&Pm(i)?x.createElement(QF,MF({},e,{width:n,height:i,dispatch:t})):null}function eB(e){var t,n=Nc(e,$F),{className:i,style:r,width:o,height:s}=n,[a,l]=x.useState(null);return x.createElement(EN,{preloadedState:{options:UF},reduxStoreName:null!==(t=n.className)&&void 0!==t?t:"Treemap"},x.createElement(Xm,{margin:KF}),x.createElement(GN,{dispatchTouchEvents:!1,className:i,style:r,width:o,height:s,responsive:!1,ref:e=>{null==a&&null!=e&&l(e)},onMouseEnter:void 0,onMouseLeave:void 0,onClick:void 0,onMouseMove:void 0,onMouseDown:void 0,onMouseUp:void 0,onContextMenu:void 0,onDoubleClick:void 0,onTouchStart:void 0,onTouchMove:void 0,onTouchEnd:void 0},x.createElement(MI.Provider,{value:a},x.createElement(JF,n))))}FF(QF,"displayName","Treemap");var tB=["axis"],nB=x.forwardRef((e,t)=>x.createElement(QN,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tB,tooltipPayloadSearcher:UI,categoricalChartProps:e,ref:t}));const iB=x.createContext(null);function rB(){return x.useContext(iB)}var oB=Object.defineProperty,sB=(e,t,n)=>((e,t,n)=>t in e?oB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),aB="http://www.w3.org/1999/xhtml";const lB={svg:"http://www.w3.org/2000/svg",xhtml:aB,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cB(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),lB.hasOwnProperty(t)?{space:lB[t],local:e}:e}function uB(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===aB&&t.documentElement.namespaceURI===aB?t.createElement(e):t.createElementNS(n,e)}}function dB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hB(e){var t=cB(e);return(t.local?dB:uB)(t)}function fB(){}function pB(e){return null==e?fB:function(){return this.querySelector(e)}}function mB(){return[]}function gB(e){return null==e?mB:function(){return this.querySelectorAll(e)}}function _B(e){return function(){return this.matches(e)}}function yB(e){return function(t){return t.matches(e)}}var vB=Array.prototype.find;function bB(){return this.firstElementChild}var xB=Array.prototype.filter;function wB(){return Array.from(this.children)}function SB(e){return new Array(e.length)}function EB(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function CB(e,t,n,i,r,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new EB(e,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function TB(e,t,n,i,r,o,s){var a,l,c,u=new Map,d=t.length,h=o.length,f=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?r[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(i[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new EB(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function kB(e){return e.__data__}function AB(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function IB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function PB(e){return function(){this.removeAttribute(e)}}function LB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function RB(e,t){return function(){this.setAttribute(e,t)}}function OB(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function MB(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function DB(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function NB(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function FB(e){return function(){this.style.removeProperty(e)}}function BB(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zB(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function UB(e,t){return e.style.getPropertyValue(t)||NB(e).getComputedStyle(e,null).getPropertyValue(t)}function jB(e){return function(){delete this[e]}}function VB(e,t){return function(){this[e]=t}}function HB(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function WB(e){return e.trim().split(/^|\s+/)}function $B(e){return e.classList||new GB(e)}function GB(e){this._node=e,this._names=WB(e.getAttribute("class")||"")}function qB(e,t){for(var n=$B(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function YB(e,t){for(var n=$B(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function XB(e){return function(){qB(this,e)}}function KB(e){return function(){YB(this,e)}}function ZB(e,t){return function(){(t.apply(this,arguments)?qB:YB)(this,e)}}function QB(){this.textContent=""}function JB(e){return function(){this.textContent=e}}function ez(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function tz(){this.innerHTML=""}function nz(e){return function(){this.innerHTML=e}}function iz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function rz(){this.nextSibling&&this.parentNode.appendChild(this)}function oz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sz(){return null}function az(){var e=this.parentNode;e&&e.removeChild(this)}function lz(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cz(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uz(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function dz(e,t,n){return function(){var i,r=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=t);this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function hz(e,t,n){var i=NB(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function fz(e,t){return function(){return hz(this,e,t)}}function pz(e,t){return function(){return hz(this,e,t.apply(this,arguments))}}EB.prototype={constructor:EB,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},GB.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var mz=[null];function gz(e,t){this._groups=e,this._parents=t}function _z(){return new gz([[document.documentElement]],mz)}function yz(e){return"string"==typeof e?new gz([[document.querySelector(e)]],[document.documentElement]):new gz([[e]],mz)}function vz(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}gz.prototype=_z.prototype={constructor:gz,select:function(e){"function"!=typeof e&&(e=pB(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=t[r],l=a.length,c=i[r]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new gz(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}(e):gB(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(i.push(e.call(s,s.__data__,c,a)),r.push(s));return new gz(i,r)},selectChild:function(e){return this.select(null==e?bB:function(e){return function(){return vB.call(this.children,e)}}("function"==typeof e?e:yB(e)))},selectChildren:function(e){return this.selectAll(null==e?wB:function(e){return function(){return xB.call(this.children,e)}}("function"==typeof e?e:yB(e)))},filter:function(e){"function"!=typeof e&&(e=_B(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s=t[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new gz(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,kB);var n=t?TB:CB,i=this._parents,r=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],h=d.length,f=AB(e.call(u,u&&u.__data__,c,i)),p=f.length,m=a[c]=new Array(p),g=s[c]=new Array(p);n(u,d,m,g,l[c]=new Array(h),f,t);for(var _,y,v=0,b=0;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(y=g[b])&&++b<p;);_._next=y||null}}return(s=new gz(s,i))._enter=a,s._exit=l,s},enter:function(){return new gz(this._enter||this._groups.map(SB),this._parents)},exit:function(){return new gz(this._exit||this._groups.map(SB),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c,u=n[l],d=i[l],h=u.length,f=a[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<r;++l)a[l]=n[l];return new gz(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=IB);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new gz(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],s=0,a=o.length;s<a;++s)(r=o[s])&&e.call(r,r.__data__,s,o);return this},attr:function(e,t){var n=cB(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?LB:PB:"function"==typeof t?n.local?DB:MB:n.local?OB:RB)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?FB:"function"==typeof t?zB:BB)(e,t,n??"")):UB(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?jB:"function"==typeof t?HB:VB)(e,t)):this.node()[e]},classed:function(e,t){var n=WB(e+"");if(arguments.length<2){for(var i=$B(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?ZB:t?XB:KB)(n,t))},text:function(e){return arguments.length?this.each(null==e?QB:("function"==typeof e?ez:JB)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?tz:("function"==typeof e?iz:nz)(e)):this.node().innerHTML},raise:function(){return this.each(rz)},lower:function(){return this.each(oz)},append:function(e){var t="function"==typeof e?e:hB(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:hB(e),i=null==t?sz:"function"==typeof t?t:pB(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(az)},clone:function(e){return this.select(e?cz:lz)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?dz:uz,i=0;i<s;++i)this.each(a(o[i],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(i=0,l=a[c];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?pz:fz)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};var bz={value:()=>{}};function xz(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new wz(i)}function wz(e){this._=e}function Sz(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function Ez(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=bz,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}wz.prototype=xz.prototype={constructor:wz,on:function(e,t){var n,i=this._,r=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=r[o]).type)i[n]=Ez(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Ez(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=r[o]).type)&&(n=Sz(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wz(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(i=this._[e]).length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};var Cz,Tz,kz=0,Az=0,Iz=0,Pz=0,Lz=0,Rz=0,Oz="object"==typeof performance&&performance.now?performance:Date,Mz="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dz(){return Lz||(Mz(Nz),Lz=Oz.now()+Rz)}function Nz(){Lz=0}function Fz(){this._call=this._time=this._next=null}function Bz(e,t,n){var i=new Fz;return i.restart(e,t,n),i}function zz(){Lz=(Pz=Oz.now())+Rz,kz=Az=0;try{!function(){Dz(),++kz;for(var e,t=Cz;t;)(e=Lz-t._time)>=0&&t._call.call(null,e),t=t._next;--kz}()}finally{kz=0,function(){for(var e,t,n=Cz,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Cz=t);Tz=e,jz(i)}(),Lz=0}}function Uz(){var e=Oz.now(),t=e-Pz;t>1e3&&(Rz-=t,Pz=e)}function jz(e){kz||(Az&&(Az=clearTimeout(Az)),e-Lz>24?(e<1/0&&(Az=setTimeout(zz,e-Oz.now()-Rz)),Iz&&(Iz=clearInterval(Iz))):(Iz||(Pz=Oz.now(),Iz=setInterval(Uz,1e3)),kz=1,Mz(zz)))}function Vz(e,t,n){var i=new Fz;return t=null==t?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,n),i}Fz.prototype=Bz.prototype={constructor:Fz,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Dz():+n)+(null==t?0:+t),!this._next&&Tz!==this&&(Tz?Tz._next=this:Cz=this,Tz=this),this._call=e,this._time=n,jz()},stop:function(){this._call&&(this._call=null,this._time=1/0,jz())}};var Hz=xz("start","end","cancel","interrupt"),Wz=[];function $z(e,t,n,i,r,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function o(l){var c,u,d,h;if(1!==n.state)return a();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return Vz(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Vz(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Bz(function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:r,on:Hz,tween:Wz,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Gz(e,t){var n=Yz(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function qz(e,t){var n=Yz(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Yz(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xz(e,t){var n,i,r,o=e.__transition,s=!0;if(o){for(r in t=null==t?null:t+"",o)(n=o[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete e.__transition}}function Kz(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zz(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Qz(){}var Jz=.7,eU=1/Jz,tU="\\s*([+-]?\\d+)\\s*",nU="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",iU="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rU=/^#([0-9a-f]{3,8})$/,oU=new RegExp(`^rgb\\(${tU},${tU},${tU}\\)$`),sU=new RegExp(`^rgb\\(${iU},${iU},${iU}\\)$`),aU=new RegExp(`^rgba\\(${tU},${tU},${tU},${nU}\\)$`),lU=new RegExp(`^rgba\\(${iU},${iU},${iU},${nU}\\)$`),cU=new RegExp(`^hsl\\(${nU},${iU},${iU}\\)$`),uU=new RegExp(`^hsla\\(${nU},${iU},${iU},${nU}\\)$`),dU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hU(){return this.rgb().formatHex()}function fU(){return this.rgb().formatRgb()}function pU(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?mU(t):3===n?new yU(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gU(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gU(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=oU.exec(e))?new yU(t[1],t[2],t[3],1):(t=sU.exec(e))?new yU(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=aU.exec(e))?gU(t[1],t[2],t[3],t[4]):(t=lU.exec(e))?gU(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cU.exec(e))?EU(t[1],t[2]/100,t[3]/100,1):(t=uU.exec(e))?EU(t[1],t[2]/100,t[3]/100,t[4]):dU.hasOwnProperty(e)?mU(dU[e]):"transparent"===e?new yU(NaN,NaN,NaN,0):null}function mU(e){return new yU(e>>16&255,e>>8&255,255&e,1)}function gU(e,t,n,i){return i<=0&&(e=t=n=NaN),new yU(e,t,n,i)}function _U(e,t,n,i){return 1===arguments.length?function(e){return e instanceof Qz||(e=pU(e)),e?new yU((e=e.rgb()).r,e.g,e.b,e.opacity):new yU}(e):new yU(e,t,n,i??1)}function yU(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function vU(){return`#${SU(this.r)}${SU(this.g)}${SU(this.b)}`}function bU(){const e=xU(this.opacity);return`${1===e?"rgb(":"rgba("}${wU(this.r)}, ${wU(this.g)}, ${wU(this.b)}${1===e?")":`, ${e})`}`}function xU(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wU(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function SU(e){return((e=wU(e))<16?"0":"")+e.toString(16)}function EU(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new TU(e,t,n,i)}function CU(e){if(e instanceof TU)return new TU(e.h,e.s,e.l,e.opacity);if(e instanceof Qz||(e=pU(e)),!e)return new TU;if(e instanceof TU)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new TU(s,a,l,e.opacity)}function TU(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function kU(e){return(e=(e||0)%360)<0?e+360:e}function AU(e){return Math.max(0,Math.min(1,e||0))}function IU(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Kz(Qz,pU,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hU,formatHex:hU,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return CU(this).formatHsl()},formatRgb:fU,toString:fU}),Kz(yU,_U,Zz(Qz,{brighter(e){return e=null==e?eU:Math.pow(eU,e),new yU(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Jz:Math.pow(Jz,e),new yU(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yU(wU(this.r),wU(this.g),wU(this.b),xU(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vU,formatHex:vU,formatHex8:function(){return`#${SU(this.r)}${SU(this.g)}${SU(this.b)}${SU(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:bU,toString:bU})),Kz(TU,function(e,t,n,i){return 1===arguments.length?CU(e):new TU(e,t,n,i??1)},Zz(Qz,{brighter(e){return e=null==e?eU:Math.pow(eU,e),new TU(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Jz:Math.pow(Jz,e),new TU(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new yU(IU(e>=240?e-240:e+120,r,i),IU(e,r,i),IU(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new TU(kU(this.h),AU(this.s),AU(this.l),xU(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xU(this.opacity);return`${1===e?"hsl(":"hsla("}${kU(this.h)}, ${100*AU(this.s)}%, ${100*AU(this.l)}%${1===e?")":`, ${e})`}`}}));const PU=e=>()=>e;function LU(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):PU(isNaN(e)?t:e)}const RU=function e(t){var n=function(e){return 1==(e=+e)?LU:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):PU(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=_U(e)).r,(t=_U(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),s=LU(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function OU(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(o){for(n=0;n<i;++n)r[n]=e[n]*(1-o)+t[n]*o;return r}}function MU(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=jU(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<r;++n)s[n]=o[n](e);return s}}function DU(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function NU(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function FU(e,t){var n,i={},r={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?i[n]=jU(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var BU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zU=new RegExp(BU.source,"g");function UU(e,t){var n,i,r,o=BU.lastIndex=zU.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=BU.exec(e))&&(i=zU.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:NU(n,i)})),o=zU.lastIndex;return o<t.length&&(r=t.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)a[(n=l[i]).i]=n.x(e);return a.join("")})}function jU(e,t){var n,i=typeof t;return null==t||"boolean"===i?PU(t):("number"===i?NU:"string"===i?(n=pU(t))?(t=n,RU):UU:t instanceof pU?RU:t instanceof Date?DU:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?OU:Array.isArray(t)?MU:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?FU:NU)(e,t)}function VU(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var HU,WU=180/Math.PI,$U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function GU(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*WU,skewX:Math.atan(l)*WU,scaleX:s,scaleY:a}}function qU(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,i,r,o,s,a){if(e!==r||i!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:NU(e,r)},{i:l-2,x:NU(i,o)})}else(r||o)&&s.push("translate("+r+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:NU(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:NU(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(o.skewX,s.skewX,a,l),function(e,t,n,i,o,s){if(e!==n||t!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:NU(e,n)},{i:a-2,x:NU(t,i)})}else(1!==n||1!==i)&&o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,i=l.length;++n<i;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var YU=qU(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$U:GU(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),XU=qU(function(e){return null!=e&&(HU||(HU=document.createElementNS("http://www.w3.org/2000/svg","g")),HU.setAttribute("transform",e),e=HU.transform.baseVal.consolidate())?GU((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):$U},", ",")",")");function KU(e){return((e=Math.exp(e))+1/e)/2}const ZU=function e(t,n,i){function r(e,r){var o,s,a=e[0],l=e[1],c=e[2],u=r[0],d=r[1],h=r[2],f=u-a,p=d-l,m=f*f+p*p;if(m<1e-12)s=Math.log(h/c)/t,o=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var g=Math.sqrt(m),_=(h*h-c*c+i*m)/(2*c*n*g),y=(h*h-c*c-i*m)/(2*h*n*g),v=Math.log(Math.sqrt(_*_+1)-_),b=Math.log(Math.sqrt(y*y+1)-y);s=(b-v)/t,o=function(e){var i=e*s,r=KU(v),o=c/(n*g)*(r*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*i+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[a+o*f,l+o*p,c*r/KU(t*i+v)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return r.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},r}(Math.SQRT2,2,4);function QU(e,t){var n,i;return function(){var r=qz(this,e),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function JU(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=qz(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function ej(e,t,n){var i=e._id;return e.each(function(){var e=qz(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Yz(e,i).value[t]}}function tj(e,t){var n;return("number"==typeof t?NU:t instanceof pU?RU:(n=pU(t))?(t=n,RU):UU)(e,t)}function nj(e){return function(){this.removeAttribute(e)}}function ij(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rj(e,t,n){var i,r,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===i?r:r=t(i=s,n)}}function oj(e,t,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?r:r=t(i=s,n)}}function sj(e,t,n){var i,r,o;return function(){var s,a,l=n(this);return null==l?void this.removeAttribute(e):(s=this.getAttribute(e))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=t(i=s,l))}}function aj(e,t,n){var i,r,o;return function(){var s,a,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=t(i=s,l))}}function lj(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function cj(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function uj(e,t){return function(){Gz(this,e).delay=+t.apply(this,arguments)}}function dj(e,t){return t=+t,function(){Gz(this,e).delay=t}}function hj(e,t){return function(){qz(this,e).duration=+t.apply(this,arguments)}}function fj(e,t){return t=+t,function(){qz(this,e).duration=t}}var pj=_z.prototype.constructor;function mj(e){return function(){this.style.removeProperty(e)}}var gj=0;function _j(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function yj(){return++gj}var vj=_z.prototype;function bj(e){return e*e}function xj(e){return e*(2-e)}function wj(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}_j.prototype={constructor:_j,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=pB(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,c=i[s],u=c.length,d=o[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=e.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,$z(d[h],t,n,h,d,Yz(a,n)));return new _j(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=gB(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,c=i[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=Yz(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&$z(h,t,n,m,f,p);o.push(f),s.push(l)}return new _j(o,s,t,n)},selectChild:vj.selectChild,selectChildren:vj.selectChildren,filter:function(e){"function"!=typeof e&&(e=_B(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s=t[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new _j(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,c=t[a],u=n[a],d=c.length,h=s[a]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;a<i;++a)s[a]=t[a];return new _j(s,this._parents,this._name,this._id)},selection:function(){return new pj(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=yj(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=Yz(s,t);$z(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new _j(i,this._parents,e,n)},call:vj.call,nodes:vj.nodes,node:vj.node,size:vj.size,empty:vj.empty,each:vj.each,on:function(e,t){var n=this._id;return arguments.length<2?Yz(this.node(),n).on.on(e):this.each(function(e,t,n){var i,r,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Gz:qz;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}(n,e,t))},attr:function(e,t){var n=cB(e),i="transform"===n?XU:tj;return this.attrTween(e,"function"==typeof t?(n.local?aj:sj)(n,i,ej(this,"attr."+e,t)):null==t?(n.local?ij:nj)(n):(n.local?oj:rj)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=cB(e);return this.tween(n,(i.local?lj:cj)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?YU:tj;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var o=UB(this,e),s=(this.style.removeProperty(e),UB(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}(e,i)).on("end.style."+e,mj(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,o;return function(){var s=UB(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=UB(this,e)),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}(e,i,ej(this,"style."+e,t))).each(function(e,t){var n,i,r,o,s="style."+t,a="end."+s;return function(){var l=qz(this,e),c=l.on,u=null==l.value[s]?o||(o=mj(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(a,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,o=n+"";return function(){var s=UB(this,e);return s===o?null:s===i?r:r=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,r;function o(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,o,n)),i}return o._value=t,o}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(ej(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=Yz(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?QU:JU)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?uj:dj)(t,e)):Yz(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?hj:fj)(t,e)):Yz(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){qz(this,e).ease=t}}(t,e)):Yz(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;qz(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0===--r&&o()}};n.each(function(){var n=qz(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t}),0===r&&o()})},[Symbol.iterator]:vj[Symbol.iterator]};var Sj={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ej(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Cj(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}_z.prototype.interrupt=function(e){return this.each(function(){Xz(this,e)})},_z.prototype.transition=function(e){var t,n;e instanceof _j?(t=e._id,e=e._name):(t=yj(),(n=Sj).time=Dz(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)(s=a[c])&&$z(s,e,t,c,a,n||Ej(s,t));return new _j(i,this._parents,e,t)};class Tj{constructor(e,t){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=t,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Cj(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Cj()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class kj{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const t of Object.values(this.stats))e(t)}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(e=>this._getOrCreate(e))}_getOrCreate(e){const{name:t,type:n}=e;let i=this.stats[t];return i||(i=e instanceof Tj?e:new Tj(t,n),this.stats[t]=i),i}}const Aj=new class{constructor(){sB(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new kj({id:e})),this.stats.get(e)}},Ij=globalThis,Pj=globalThis.process||{},Lj=globalThis.navigator||{};function Rj(e){var t,n;if(typeof window<"u"&&"renderer"===(null==(t=window.process)?void 0:t.type)||typeof process<"u"&&null!=(n=process.versions)&&n.electron)return!0;const i=typeof navigator<"u"&&navigator.userAgent;return!!(i&&i.indexOf("Electron")>=0)}function Oj(){return!("object"==typeof process&&"[object process]"===String(process)&&(null==process||!process.browser))||Rj()}const Mj="4.1.0";class Dj{constructor(e,t,n="sessionStorage"){this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}var Nj;function Fj(e){return"string"!=typeof e?e:(e=e.toUpperCase(),Nj[e]||Nj.WHITE)}function Bj(e,t){if(!e)throw new Error("Assertion failed")}function zj(){var e,t,n;let i;if(Oj()&&Ij.performance)i=null==(t=null==(e=null==Ij?void 0:Ij.performance)?void 0:e.now)?void 0:t.call(e);else if("hrtime"in Pj){const e=null==(n=null==Pj?void 0:Pj.hrtime)?void 0:n.call(Pj);i=1e3*e[0]+e[1]/1e6}else i=Date.now();return i}!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Nj||(Nj={}));const Uj={debug:Oj()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},jj={enabled:!0,level:0};function Vj(){}const Hj={},Wj={once:!0};class $j{constructor({id:e}={id:""}){this.VERSION=Mj,this._startTs=zj(),this._deltaTs=zj(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new Dj(`__probe-${this.id}__`,jj),this.timeStamp(`${this.id} started`),function(e,t=["constructor"]){const n=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(n),r=e;for(const o of i){const n=r[o];"function"==typeof n&&(t.find(e=>o===e)||(r[o]=n.bind(e)))}}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((zj()-this._startTs).toPrecision(10))}getDelta(){return Number((zj()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table}assert(e,t){if(!e)throw new Error(t||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Uj.warn,arguments,Wj)}error(e){return this._getLogFunction(0,e,Uj.error,arguments)}deprecated(e,t){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${t}\` instead`)}removed(e,t){return this.error(`\`${e}\` has been removed. Use \`${t}\` instead`)}probe(e,t){return this._getLogFunction(e,t,Uj.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,Uj.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,Uj.debug||Uj.info,arguments,Wj)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||Vj,n&&[n],{tag:Yj(t)}):Vj}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||Vj)}group(e,t,n={collapsed:!1}){const i=qj({logLevel:e,message:t,opts:n}),{collapsed:r}=n;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,t,n={}){return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Vj)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Gj(e)}_getLogFunction(e,t,n,i,r){if(this._shouldLog(e)){r=qj({logLevel:e,message:t,args:i,opts:r}),Bj(n=n||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=zj();const o=r.tag||r.message;if(r.once&&o){if(Hj[o])return Vj;Hj[o]=zj()}return t=function(e,t,n){if("string"==typeof t){const i=n.time?function(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}(function(e){let t;return t=e<10?`${e.toFixed(2)}ms`:e<100?`${e.toFixed(1)}ms`:e<1e3?`${e.toFixed(0)}ms`:`${(e/1e3).toFixed(2)}s`,t}(n.total)):"";t=function(e,t,n){return!Oj&&"string"==typeof e&&(t&&(e=`[${Fj(t)}m${e}[39m`),n&&(e=`[${Fj(n)+10}m${e}[49m`)),e}(t=n.time?`${e}: ${i}  ${t}`:`${e}: ${t}`,n.color,n.background)}return t}(this.id,r.message,r),n.bind(console,t,...r.args)}return Vj}}function Gj(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return Bj(Number.isFinite(t)&&t>=0),t}function qj(e){const{logLevel:t,message:n}=e;e.logLevel=Gj(t);const i=e.args?Array.from(e.args):[];for(;i.length&&i.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&i.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const r=typeof e.message;return Bj("string"===r||"object"===r),Object.assign(e,{args:i},e.opts)}function Yj(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}$j.VERSION=Mj;const Xj=new $j({id:"luma.gl"}),Kj={};function Zj(e="id"){return Kj[e]=Kj[e]||1,`${e}-${Kj[e]++}`}class Qj{constructor(e,t,n){if(sB(this,"id"),sB(this,"props"),sB(this,"userData",{}),sB(this,"_device"),sB(this,"destroyed",!1),sB(this,"allocatedBytes",0),sB(this,"_attachedResources",new Set),!e)throw new Error("no device");this._device=e,this.props=function(e,t){const n={...t};for(const i in e)void 0!==e[i]&&(n[i]=e[i]);return n}(t,n);const i="undefined"!==this.props.id?this.props.id:Zj(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get(`${t}s Active`).decrementCount()}trackAllocatedMemory(e,t=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get(`${t} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const t=this._device.statsManager.getStats("Resource Counts");t.get("GPU Memory").subtractCount(this.allocatedBytes),t.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${t}s Created`).incrementCount(),e.get(`${t}s Active`).incrementCount()}}sB(Qj,"defaultProps",{id:"undefined",handle:void 0,userData:void 0});const Jj=class e extends Qj{constructor(t,n){const i={...n};(n.usage||0)&e.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?i.indexType="uint32":n.data instanceof Uint16Array&&(i.indexType="uint16")),delete i.data,super(t,i,e.defaultProps),sB(this,"usage"),sB(this,"indexType"),sB(this,"updateTimestamp"),sB(this,"debugData",new ArrayBuffer(0)),this.usage=i.usage||0,this.indexType=i.indexType,this.updateTimestamp=t.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(e){return this.device.createBuffer({...this.props,...e})}_setDebugData(t,n,i){const r=ArrayBuffer.isView(t)?t.buffer:t,o=Math.min(t?t.byteLength:i,e.DEBUG_DATA_MAX_LENGTH);null===r?this.debugData=new ArrayBuffer(o):0===n&&i===r.byteLength?this.debugData=r.slice(0,o):this.debugData=r.slice(n,n+o)}};sB(Jj,"INDEX",16),sB(Jj,"VERTEX",32),sB(Jj,"UNIFORM",64),sB(Jj,"STORAGE",128),sB(Jj,"INDIRECT",256),sB(Jj,"QUERY_RESOLVE",512),sB(Jj,"MAP_READ",1),sB(Jj,"MAP_WRITE",2),sB(Jj,"COPY_SRC",4),sB(Jj,"COPY_DST",8),sB(Jj,"DEBUG_DATA_MAX_LENGTH",32),sB(Jj,"defaultProps",{...Qj.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",onMapped:void 0});let eV=Jj;function tV(e){const[t,n,i]=oV[e],r=e.includes("norm");return{signedType:t,primitiveType:n,byteLength:i,normalized:r,integer:!r&&!e.startsWith("float"),signed:e.startsWith("s")}}function nV(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}function iV(e){const t=ArrayBuffer.isView(e)?e.constructor:e;if(t===Uint8ClampedArray)return"uint8";const n=Object.values(oV).find(e=>t===e[4]);if(!n)throw new Error(t.name);return n[0]}function rV(e){const[,,,,t]=oV[e];return t}const oV={uint8:["uint8","u32",1,!1,Uint8Array],sint8:["sint8","i32",1,!1,Int8Array],unorm8:["uint8","f32",1,!0,Uint8Array],snorm8:["sint8","f32",1,!0,Int8Array],uint16:["uint16","u32",2,!1,Uint16Array],sint16:["sint16","i32",2,!1,Int16Array],unorm16:["uint16","u32",2,!0,Uint16Array],snorm16:["sint16","i32",2,!0,Int16Array],float16:["float16","f16",2,!1,Uint16Array],float32:["float32","f32",4,!1,Float32Array],uint32:["uint32","u32",4,!1,Uint32Array],sint32:["sint32","i32",4,!1,Int32Array]};function sV(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[n,i]=e.split("x"),r=n,o=i?parseInt(i):1,s=tV(r),a={type:r,components:o,byteLength:s.byteLength*o,integer:s.integer,signed:s.signed,normalized:s.normalized};return t&&(a.webglOnly=!0),a}function aV(e,t,n){if(!t||t>4)throw new Error(`size ${t}`);const i=t;return function(e,t,n){const i=n?function(e){const t=e;switch(t){case"uint8":return"unorm8";case"sint8":return"snorm8";case"uint16":return"unorm16";case"sint16":return"snorm16";default:return t}}(e):e;switch(i){case"unorm8":return 1===t?"unorm8":3===t?"unorm8x3-webgl":`${i}x${t}`;case"snorm8":case"uint8":case"sint8":case"uint16":case"sint16":case"unorm16":case"snorm16":case"float16":if(1===t||3===t)throw new Error(`size: ${t}`);return`${i}x${t}`;default:return 1===t?i:`${i}x${t}`}}(iV(e),i,n)}const lV="texture-compression-bc",cV="texture-compression-astc",uV="texture-compression-etc2",dV="texture-compression-pvrtc-webgl",hV="texture-compression-atc-webgl",fV="float32-renderable-webgl",pV="float16-renderable-webgl",mV="snorm8-renderable-webgl",gV="norm16-renderable-webgl",_V="snorm16-renderable-webgl",yV="float32-filterable",vV="float16-filterable-webgl";function bV(e){const t=xV[e];if(!t)throw new Error(`Unsupported texture format ${e}`);return t}const xV={r8unorm:{},rg8unorm:{},"rgb8unorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},r8snorm:{render:mV},rg8snorm:{render:mV},"rgb8snorm-webgl":{},rgba8snorm:{render:mV},r8uint:{},rg8uint:{},rgba8uint:{},r8sint:{},rg8sint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},r16unorm:{f:gV},rg16unorm:{render:gV},"rgb16unorm-webgl":{f:gV},rgba16unorm:{render:gV},r16snorm:{f:_V},rg16snorm:{render:_V},"rgb16snorm-webgl":{f:gV},rgba16snorm:{render:_V},r16uint:{},rg16uint:{},rgba16uint:{},r16sint:{},rg16sint:{},rgba16sint:{},r16float:{render:pV,filter:"float16-filterable-webgl"},rg16float:{render:pV,filter:vV},rgba16float:{render:pV,filter:vV},r32uint:{},rg32uint:{},rgba32uint:{},r32sint:{},rg32sint:{},rgba32sint:{},r32float:{render:fV,filter:yV},rg32float:{render:!1,filter:yV},"rgb32float-webgl":{render:fV,filter:yV},rgba32float:{render:fV,filter:yV},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},rgb9e5ufloat:{channels:"rgb",packed:!0,render:"rgb9e5ufloat-renderable-webgl"},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:fV},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},rgb10a2uint:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:lV},"bc1-rgb-unorm-srgb-webgl":{f:lV},"bc1-rgba-unorm":{f:lV},"bc1-rgba-unorm-srgb":{f:lV},"bc2-rgba-unorm":{f:lV},"bc2-rgba-unorm-srgb":{f:lV},"bc3-rgba-unorm":{f:lV},"bc3-rgba-unorm-srgb":{f:lV},"bc4-r-unorm":{f:lV},"bc4-r-snorm":{f:lV},"bc5-rg-unorm":{f:lV},"bc5-rg-snorm":{f:lV},"bc6h-rgb-ufloat":{f:lV},"bc6h-rgb-float":{f:lV},"bc7-rgba-unorm":{f:lV},"bc7-rgba-unorm-srgb":{f:lV},"etc2-rgb8unorm":{f:uV},"etc2-rgb8unorm-srgb":{f:uV},"etc2-rgb8a1unorm":{f:uV},"etc2-rgb8a1unorm-srgb":{f:uV},"etc2-rgba8unorm":{f:uV},"etc2-rgba8unorm-srgb":{f:uV},"eac-r11unorm":{f:uV},"eac-r11snorm":{f:uV},"eac-rg11unorm":{f:uV},"eac-rg11snorm":{f:uV},"astc-4x4-unorm":{f:cV},"astc-4x4-unorm-srgb":{f:cV},"astc-5x4-unorm":{f:cV},"astc-5x4-unorm-srgb":{f:cV},"astc-5x5-unorm":{f:cV},"astc-5x5-unorm-srgb":{f:cV},"astc-6x5-unorm":{f:cV},"astc-6x5-unorm-srgb":{f:cV},"astc-6x6-unorm":{f:cV},"astc-6x6-unorm-srgb":{f:cV},"astc-8x5-unorm":{f:cV},"astc-8x5-unorm-srgb":{f:cV},"astc-8x6-unorm":{f:cV},"astc-8x6-unorm-srgb":{f:cV},"astc-8x8-unorm":{f:cV},"astc-8x8-unorm-srgb":{f:cV},"astc-10x5-unorm":{f:cV},"astc-10x5-unorm-srgb":{f:cV},"astc-10x6-unorm":{f:cV},"astc-10x6-unorm-srgb":{f:cV},"astc-10x8-unorm":{f:cV},"astc-10x8-unorm-srgb":{f:cV},"astc-10x10-unorm":{f:cV},"astc-10x10-unorm-srgb":{f:cV},"astc-12x10-unorm":{f:cV},"astc-12x10-unorm-srgb":{f:cV},"astc-12x12-unorm":{f:cV},"astc-12x12-unorm-srgb":{f:cV},"pvrtc-rgb4unorm-webgl":{f:dV},"pvrtc-rgba4unorm-webgl":{f:dV},"pvrtc-rbg2unorm-webgl":{f:dV},"pvrtc-rgba2unorm-webgl":{f:dV},"etc1-rbg-unorm-webgl":{f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{f:hV},"atc-rgba-unorm-webgl":{f:hV},"atc-rgbai-unorm-webgl":{f:hV}},wV=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],SV=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/,EV=new class{getInfo(e){return CV(e)}isColor(e){return e.startsWith("rgba")||e.startsWith("bgra")||e.startsWith("rgb")}isDepthStencil(e){return e.startsWith("depth")||e.startsWith("stencil")}isCompressed(e){return wV.some(t=>e.startsWith(t))}getCapabilities(e){const t=bV(e),n={format:e,create:t.f??!0,render:t.render??!0,filter:t.filter??!0,blend:t.blend??!0,store:t.store??!0},i=CV(e),r=e.startsWith("depth")||e.startsWith("stencil"),o=null==i?void 0:i.signed,s=null==i?void 0:i.integer,a=null==i?void 0:i.webgl;return n.render&&(n.render=!o),n.filter&&(n.filter=!(r||o||s||a)),n}};function CV(e){let t=function(e){var t;const n=bV(e),i=n.bytesPerPixel||1,r=n.bitsPerChannel||[8,8,8,8];return delete n.bitsPerChannel,delete n.bytesPerPixel,delete n.f,delete n.render,delete n.filter,delete n.blend,delete n.store,{...n,format:e,attachment:n.attachment||"color",channels:n.channels||"r",components:n.components||(null==(t=n.channels)?void 0:t.length)||1,bytesPerPixel:i,bitsPerChannel:r,dataType:n.dataType||"uint8",srgb:n.srgb??!1,packed:n.packed??!1,webgl:n.webgl??!1,integer:n.integer??!1,signed:n.signed??!1,normalized:n.normalized??!1,compressed:n.compressed??!1}}(e);if(EV.isCompressed(e)){t.channels="rgb",t.components=3,t.bytesPerPixel=1,t.srgb=!1,t.compressed=!0;const n=function(e){const t=/.*-(\d+)x(\d+)-.*/.exec(e);if(t){const[,e,n]=t;return{blockWidth:Number(e),blockHeight:Number(n)}}return null}(e);n&&(t.blockWidth=n.blockWidth,t.blockHeight=n.blockHeight)}const n=SV.exec(e);if(n){const[,i,r,o,s,a]=n,l=tV(`${o}${r}`),c=8*l.byteLength,u=i.length,d=[c,u>=2?c:0,u>=3?c:0,u>=4?c:0];t={format:e,attachment:t.attachment,dataType:l.signedType,components:u,channels:i,integer:l.integer,signed:l.signed,normalized:l.normalized,bitsPerChannel:d,bytesPerPixel:l.byteLength*i.length,packed:t.packed,srgb:t.srgb},"-webgl"===a&&(t.webgl=!0),"-srgb"===s&&(t.srgb=!0)}return e.endsWith("-webgl")&&(t.webgl=!0),e.endsWith("-srgb")&&(t.srgb=!0),t}class TV{}class kV{constructor(e=[],t){sB(this,"features"),sB(this,"disabledFeatures"),this.features=new Set(e),this.disabledFeatures=t||{}}*[Symbol.iterator](){yield*this.features}has(e){var t;return!(null!=(t=this.disabledFeatures)&&t[e])&&this.features.has(e)}}const AV=class e{constructor(t){sB(this,"id"),sB(this,"props"),sB(this,"userData",{}),sB(this,"statsManager",Aj),sB(this,"timestamp",0),sB(this,"_reused",!1),sB(this,"_lumaData",{}),sB(this,"_textureCaps",{}),this.props={...e.defaultProps,...t},this.id=this.props.id||Zj(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}toString(){return`Device(${this.id})`}getVertexFormatInfo(e){return sV(e)}isVertexFormatSupported(e){return!0}getTextureFormatInfo(e){return EV.getInfo(e)}getTextureFormatCapabilities(e){let t=this._textureCaps[e];if(!t){const n=this._getDeviceTextureFormatCapabilities(e);t=this._getDeviceSpecificTextureFormatCapabilities(n),this._textureCaps[e]=t}return t}getMipLevelCount(e,t,n=1){const i=Math.max(e,t,n);return 1+Math.floor(Math.log2(i))}isExternalImage(e){return function(e){return typeof ImageData<"u"&&e instanceof ImageData||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement||typeof VideoFrame<"u"&&e instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}(e)}getExternalImageSize(e){return function(e){if(typeof ImageData<"u"&&e instanceof ImageData||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height};if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)return{width:e.naturalWidth,height:e.naturalHeight};if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)return{width:e.videoWidth,height:e.videoHeight};if(typeof VideoFrame<"u"&&e instanceof VideoFrame)return{width:e.displayWidth,height:e.displayHeight};throw new Error("Unknown image type")}(e)}isTextureFormatSupported(e){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return EV.isCompressed(e)}pushDebugGroup(e){this.commandEncoder.pushDebugGroup(e)}popDebugGroup(){var e;null==(e=this.commandEncoder)||e.popDebugGroup()}insertDebugMarker(e){var t;null==(t=this.commandEncoder)||t.insertDebugMarker(e)}loseDevice(){return!1}incrementTimestamp(){return this.timestamp++}reportError(e,t,...n){return this.props.onError(e,t)?()=>{}:Xj.error(e.message,t,...n)}debug(){this.props.debug||Xj.once(0,"'Type luma.log.set({debug: true}) in console to enable debug breakpoints',\nor create a device with the 'debug: true' prop.")()}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}beginRenderPass(e){return this.commandEncoder.beginRenderPass(e)}beginComputePass(e){return this.commandEncoder.beginComputePass(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,t){throw new Error("not implemented")}readPixelsToBufferWebGL(e,t){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,t){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return!0===e.createCanvasContext?{}:e.createCanvasContext}_getDeviceTextureFormatCapabilities(e){const t=EV.getCapabilities(e),n=e=>("string"==typeof e?this.features.has(e):e)??!0,i=n(t.create);return{format:e,create:i,render:i&&n(t.render),filter:i&&n(t.filter),blend:i&&n(t.blend),store:i&&n(t.store)}}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t={...e};if((e.usage||0)&eV.INDEX&&(e.indexType||(e.data instanceof Uint32Array?t.indexType="uint32":e.data instanceof Uint16Array&&(t.indexType="uint16")),!t.indexType))throw new Error("indices buffer content must be of type uint16 or uint32");return t}};sB(AV,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,webgl:{},onError:(e,t)=>{},onResize:(e,t)=>{const[n,i]=e.getDevicePixelSize();Xj.log(1,`${e} resized => ${n}x${i}px`)()},onPositionChange:(e,t)=>{const[n,i]=e.getPosition();Xj.log(1,`${e} repositioned => ${n},${i}`)()},onVisibilityChange:e=>Xj.log(1,`${e} Visibility changed ${e.isVisible}`)(),onDevicePixelRatioChange:(e,t)=>Xj.log(1,`${e} DPR changed ${t.oldRatio} => ${e.devicePixelRatio}`)(),debug:Xj.get("debug")||void 0,debugShaders:Xj.get("debug-shaders")||void 0,debugFramebuffers:!!Xj.get("debug-framebuffers"),debugFactories:!!Xj.get("debug-factories"),debugWebGL:!!Xj.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_reuseDevices:!1,_requestMaxLimits:!0,_cacheShaders:!1,_cachePipelines:!1,_cacheDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_handle:void 0});let IV=AV;const PV="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",LV=class e{constructor(){if(sB(this,"stats",Aj),sB(this,"log",Xj),sB(this,"VERSION","9.2.5"),sB(this,"spector"),sB(this,"preregisteredAdapters",new Map),globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw Xj.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),Xj.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");Xj.error("This version of luma.gl has already been initialized")()}Xj.log(1,`${this.VERSION} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=this}async createDevice(t={}){const n={...e.defaultProps,...t},i=this.selectAdapter(n.type,n.adapters);if(!i)throw new Error(PV);return n.waitForPageLoad&&await i.pageLoaded,await i.create(n)}async attachDevice(e,t){var n;const i=this._getTypeFromHandle(e,t.adapters),r=i&&this.selectAdapter(i,t.adapters);if(!r)throw new Error(PV);return await(null==(n=null==r?void 0:r.attach)?void 0:n.call(r,e,t))}registerAdapters(e){for(const t of e)this.preregisteredAdapters.set(t.type,t)}getSupportedAdapters(e=[]){const t=this._getAdapterMap(e);return Array.from(t).map(([,e])=>e).filter(e=>{var t;return null==(t=e.isSupported)?void 0:t.call(e)}).map(e=>e.type)}getBestAvailableAdapterType(e=[]){var t,n;const i=["webgpu","webgl","null"],r=this._getAdapterMap(e);for(const o of i)if(null!=(n=null==(t=r.get(o))?void 0:t.isSupported)&&n.call(t))return o;return null}selectAdapter(e,t=[]){let n=e;"best-available"===e&&(n=this.getBestAvailableAdapterType(t));const i=this._getAdapterMap(t);return n&&i.get(n)||null}enforceWebGL2(e=!0,t=[]){var n;const i=this._getAdapterMap(t).get("webgl");i||Xj.warn("enforceWebGL2: webgl adapter not found")(),null==(n=null==i?void 0:i.enforceWebGL2)||n.call(i,e)}setDefaultDeviceProps(t){Object.assign(e.defaultProps,t)}_getAdapterMap(e=[]){const t=new Map(this.preregisteredAdapters);for(const n of e)t.set(n.type,n);return t}_getTypeFromHandle(e,t=[]){return e instanceof WebGL2RenderingContext?"webgl":typeof GPUDevice<"u"&&e instanceof GPUDevice||null!=e&&e.queue?"webgpu":null===e?"null":(e instanceof WebGLRenderingContext?Xj.warn("WebGL1 is not supported",e)():Xj.warn("Unknown handle type",e)(),null)}};sB(LV,"defaultProps",{...IV.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0});const RV=new LV;class OV{get pageLoaded(){return NV||(NV=DV()||typeof window>"u"?Promise.resolve():new Promise(e=>window.addEventListener("load",()=>e()))),NV}}const MV=Oj()&&typeof document<"u",DV=()=>MV&&"complete"===document.readyState;let NV=null;const FV=class e extends Qj{get[Symbol.toStringTag](){return"Sampler"}constructor(t,n){super(t,n=e.normalizeProps(t,n),e.defaultProps)}static normalizeProps(e,t){return t}};sB(FV,"defaultProps",{...Qj.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let BV=FV;const zV={"1d":"1d","2d":"2d","2d-array":"2d",cube:"2d","cube-array":"2d","3d":"3d"},UV=class e extends Qj{constructor(t,n){if(super(t,n=e.normalizeProps(t,n),e.defaultProps),sB(this,"dimension"),sB(this,"baseDimension"),sB(this,"format"),sB(this,"width"),sB(this,"height"),sB(this,"depth"),sB(this,"mipLevels"),sB(this,"updateTimestamp"),this.dimension=this.props.dimension,this.baseDimension=zV[this.dimension],this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.mipLevels=this.props.mipLevels,void 0===this.props.width||void 0===this.props.height)if(t.isExternalImage(n.data)){const e=t.getExternalImageSize(n.data);this.width=(null==e?void 0:e.width)||1,this.height=(null==e?void 0:e.height)||1}else this.width=1,this.height=1,(void 0===this.props.width||void 0===this.props.height)&&Xj.warn(`${this} created with undefined width or height. This is deprecated. Use AsyncTexture instead.`)();this.updateTimestamp=t.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}setSampler(e){this.sampler=e instanceof BV?e:this.device.createSampler(e)}clone(e){return this.device.createTexture({...this.props,...e})}static normalizeProps(e,t){const n={...t},{width:i,height:r}=n;return"number"==typeof i&&(n.width=Math.max(1,Math.ceil(i))),"number"==typeof r&&(n.height=Math.max(1,Math.ceil(r))),n}_initializeData(e){this.device.isExternalImage(e)?this.copyExternalImage({image:e,width:this.width,height:this.height,depth:this.depth,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1}):e&&this.copyImageData({data:e,mipLevel:0,x:0,y:0,z:0,aspect:"all"})}_normalizeCopyImageDataOptions(t){const{width:n,height:i,depth:r}=this,o={...e.defaultCopyDataOptions,width:n,height:i,depth:r,...t},s=this.device.getTextureFormatInfo(this.format);if(!t.bytesPerRow&&!s.bytesPerPixel)throw new Error(`bytesPerRow must be provided for texture format ${this.format}`);return o.bytesPerRow=t.bytesPerRow||n*(s.bytesPerPixel||4),o.rowsPerImage=t.rowsPerImage||i,o}_normalizeCopyExternalImageOptions(t){const n=this.device.getExternalImageSize(t.image),i={...e.defaultCopyExternalImageOptions,...n,...t};return i.width=Math.min(i.width,this.width-i.x),i.height=Math.min(i.height,this.height-i.y),i}};sB(UV,"SAMPLE",4),sB(UV,"STORAGE",8),sB(UV,"RENDER",16),sB(UV,"COPY_SRC",1),sB(UV,"COPY_DST",2),sB(UV,"TEXTURE",4),sB(UV,"RENDER_ATTACHMENT",16),sB(UV,"defaultProps",{...Qj.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",usage:UV.TEXTURE|UV.RENDER_ATTACHMENT|UV.COPY_DST,width:void 0,height:void 0,depth:1,mipLevels:1,samples:void 0,sampler:{},view:void 0}),sB(UV,"defaultCopyDataOptions",{data:void 0,byteOffset:0,bytesPerRow:void 0,rowsPerImage:void 0,mipLevel:0,x:0,y:0,z:0,aspect:"all"}),sB(UV,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let jV=UV;const VV=class e extends Qj{get[Symbol.toStringTag](){return"TextureView"}constructor(t,n){super(t,n,e.defaultProps)}};sB(VV,"defaultProps",{...Qj.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let HV=VV;function WV(e,t,n,i){if(null!=i&&i.inlineSource){const i=function(e,t){let n="";for(let i=t-2;i<=t;i++){const r=e[i-1];void 0!==r&&(n+=$V(r,t,undefined))}return n}(t,n);return`\n${i}${e.linePos>0?`${" ".repeat(e.linePos+5)}^^^\n`:""}${e.type.toUpperCase()}: ${e.message}\n\n`}const r="error"===e.type?"red":"#8B4000";return null!=i&&i.html?`<div class='luma-compiler-log-error' style="color:${r};"><b> ${e.type.toUpperCase()}: ${e.message}</b></div>`:`${e.type.toUpperCase()}: ${e.message}`}function $V(e,t,n){const i=null!=n&&n.html?function(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}(e):e;return`${function(e){let t="";for(let n=e.length;n<4;++n)t+=" ";return t+e}(String(t))}: ${i}${null!=n&&n.html?"<br/>":"\n"}`}const GV=class e extends Qj{constructor(t,n){super(t,{id:YV(n={...n,debugShaders:n.debugShaders||t.props.debugShaders||"errors"}),...n},e.defaultProps),sB(this,"stage"),sB(this,"source"),sB(this,"compilationStatus","pending"),this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const e=this.props.debugShaders;switch(e){case"never":return;case"errors":if("success"===this.compilationStatus)return}const t=await this.getCompilationInfo();"warnings"===e&&0===(null==t?void 0:t.length)||this._displayShaderLog(t,this.id)}_displayShaderLog(e,t){var n;if(typeof document>"u"||null==document||!document.createElement)return;const i=t,r=`${this.stage} shader "${i}"`;let o=function(e,t,n){let i="";const r=t.split(/\r?\n/),o=e.slice().sort((e,t)=>e.lineNum-t.lineNum);switch((null==n?void 0:n.showSourceCode)||"no"){case"all":let t=0;for(let e=1;e<=r.length;e++)for(i+=$V(r[e-1],e,n);o.length>t&&o[t].lineNum===e;){const e=o[t++];i+=WV(e,r,e.lineNum,{...n,inlineSource:!1})}for(;o.length>t;)i+=WV(o[t++],[],0,{...n,inlineSource:!1});return i;case"issues":case"no":for(const o of e)i+=WV(o,r,o.lineNum,{inlineSource:"no"!==(null==n?void 0:n.showSourceCode)});return i}}(e,this.source,{showSourceCode:"all",html:!0});const s=this.getTranslatedSource();s&&(o+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${s}</pre></code>`);const a=document.createElement("Button");a.innerHTML=`\n<h1>Compilation error in ${r}</h1><br /><br />\n<code style="user-select:text;"><pre>\n${o}\n</pre></code>`,a.style.top="10px",a.style.left="10px",a.style.position="absolute",a.style.zIndex="9999",a.style.width="100%",a.style.textAlign="left",document.body.appendChild(a),null==(n=document.getElementsByClassName("luma-compiler-log-error")[0])||n.scrollIntoView(),a.onclick=()=>{const e=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(e)}}};sB(GV,"defaultProps",{...Qj.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let qV=GV;function YV(e){return function(e,t="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}(e.source)||e.id||Zj(`unnamed ${e.stage}-shader`)}const XV=class e extends Qj{constructor(t,n){super(t,n,e.defaultProps),sB(this,"shaderLayout"),sB(this,"bufferLayout"),sB(this,"linkStatus","pending"),sB(this,"hash",""),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}};sB(XV,"defaultProps",{...Qj.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",colorAttachmentFormats:void 0,depthStencilAttachmentFormat:void 0,parameters:{},bindings:{},uniforms:{}});let KV=XV;const ZV=class e extends Qj{constructor(t,n){super(t,n,e.defaultProps),sB(this,"hash",""),sB(this,"shaderLayout"),this.shaderLayout=n.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};sB(ZV,"defaultProps",{...Qj.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let QV=ZV;function JV(e){return nH[e]}const eH={f32:4,f16:2,i32:4,u32:4},tH={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},nH={f32:{type:"f32",components:1},f16:{type:"f16",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<f16>":{type:"f16",components:2},"vec3<f16>":{type:"f16",components:3},"vec4<f16>":{type:"f16",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16},"mat2x2<f16>":{type:"f16",components:4},"mat2x3<f16>":{type:"f16",components:6},"mat2x4<f16>":{type:"f16",components:8},"mat3x2<f16>":{type:"f16",components:6},"mat3x3<f16>":{type:"f16",components:9},"mat3x4<f16>":{type:"f16",components:12},"mat4x2<f16>":{type:"f16",components:8},"mat4x3<f16>":{type:"f16",components:12},"mat4x4<f16>":{type:"f16",components:16},"mat2x2<i32>":{type:"i32",components:4},"mat2x3<i32>":{type:"i32",components:6},"mat2x4<i32>":{type:"i32",components:8},"mat3x2<i32>":{type:"i32",components:6},"mat3x3<i32>":{type:"i32",components:9},"mat3x4<i32>":{type:"i32",components:12},"mat4x2<i32>":{type:"i32",components:8},"mat4x3<i32>":{type:"i32",components:12},"mat4x4<i32>":{type:"i32",components:16},"mat2x2<u32>":{type:"u32",components:4},"mat2x3<u32>":{type:"u32",components:6},"mat2x4<u32>":{type:"u32",components:8},"mat3x2<u32>":{type:"u32",components:6},"mat3x3<u32>":{type:"u32",components:9},"mat3x4<u32>":{type:"u32",components:12},"mat4x2<u32>":{type:"u32",components:8},"mat4x3<u32>":{type:"u32",components:12},"mat4x4<u32>":{type:"u32",components:16}};function iH(e,t){const n={};for(const i of e.attributes){const r=oH(e,t,i.name);r&&(n[i.name]=r)}return n}function rH(e,t,n=16){const i=iH(e,t),r=new Array(n).fill(null);for(const o of Object.values(i))r[o.location]=o;return r}function oH(e,t,n){const i=function(e,t){const n=e.attributes.find(e=>e.name===t);return n||Xj.warn(`shader layout attribute "${t}" not present in shader`),n||null}(e,n),r=function(e,t){!function(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&Xj.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}(e);let n=function(e,t){for(const n of e)if(n.format&&n.name===t)return{attributeName:n.name,bufferName:t,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}(e,t);return n||(n=function(e,t){var n;for(const i of e){let e=i.byteStride;if("number"!=typeof i.byteStride)for(const t of i.attributes||[])e+=sV(t.format).byteLength;const r=null==(n=i.attributes)?void 0:n.find(e=>e.attribute===t);if(r)return{attributeName:r.attribute,bufferName:i.name,stepMode:i.stepMode,vertexFormat:r.format,byteOffset:r.byteOffset,byteStride:e}}return null}(e,t),n)?n:(Xj.warn(`layout for attribute "${t}" not present in buffer layout`),null)}(t,n);if(!i)return null;const o=function(e){const[t,n]=tH[e];return{primitiveType:t,components:n,byteLength:eH[t]*n,integer:"i32"===t||"u32"===t,signed:"u32"!==t}}(i.type),s=function(e){let t;switch(e.primitiveType){case"f32":t="float32";break;case"i32":t="sint32";break;case"u32":t="uint32";break;case"f16":return e.components<=2?"float16x2":"float16x4"}return 1===e.components?t:`${t}x${e.components}`}(o),a=(null==r?void 0:r.vertexFormat)||s,l=sV(a);return{attributeName:(null==r?void 0:r.attributeName)||i.name,bufferName:(null==r?void 0:r.bufferName)||i.name,location:i.location,shaderType:i.type,primitiveType:o.primitiveType,shaderComponents:o.components,vertexFormat:a,bufferDataType:l.type,bufferComponents:l.components,normalized:l.normalized,integer:o.integer,stepMode:(null==r?void 0:r.stepMode)||i.stepMode||"vertex",byteOffset:(null==r?void 0:r.byteOffset)||0,byteStride:(null==r?void 0:r.byteStride)||0}}let sH;function aH(e){return(!sH||sH.byteLength<e)&&(sH=new ArrayBuffer(e)),sH}function lH(e,t){return new e(aH(e.BYTES_PER_ELEMENT*t),0,t)}function cH(e){return Array.isArray(e)?0===e.length||"number"==typeof e[0]:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(e)}class uH{constructor(e,t={}){sB(this,"layout",{}),sB(this,"byteLength");let n=0;for(const[r,o]of Object.entries(e)){const e=JV(o),{type:i,components:s}=e,a=s*((null==t?void 0:t[r])??1);n=nV(n,a);const l=n;n+=a,this.layout[r]={type:i,size:a,offset:l}}n+=(4-n%4)%4;const i=4*n;this.byteLength=Math.max(i,1024)}getData(e){const t=aH(this.byteLength),n={i32:new Int32Array(t),u32:new Uint32Array(t),f32:new Float32Array(t),f16:new Uint16Array(t)};for(const[i,r]of Object.entries(e)){const e=this.layout[i];if(!e){Xj.warn(`Supplied uniform value ${i} not present in uniform block layout`)();continue}const{type:t,size:o,offset:s}=e,a=n[t];if(1===o){if("number"!=typeof r&&"boolean"!=typeof r){Xj.warn(`Supplied value for single component uniform ${i} is not a number: ${r}`)();continue}a[s]=Number(r)}else{if(!cH(r)){Xj.warn(`Supplied value for multi component / array uniform ${i} is not a numeric array: ${r}`)();continue}a.set(r,s)}}return new Uint8Array(t,0,this.byteLength)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}class dH{constructor(e){var t;if(sB(this,"name"),sB(this,"uniforms",{}),sB(this,"modifiedUniforms",{}),sB(this,"modified",!0),sB(this,"bindingLayout",{}),sB(this,"needsRedraw","initialized"),this.name=(null==e?void 0:e.name)||"unnamed",null!=e&&e.name&&null!=e&&e.shaderLayout){const n=null==(t=null==e?void 0:e.shaderLayout.bindings)?void 0:t.find(t=>"uniform"===t.type&&t.name===(null==e?void 0:e.name));if(!n)throw new Error(null==e?void 0:e.name);const i=n;for(const e of i.uniforms||[])this.bindingLayout[e.name]=e}}setUniforms(e){for(const[t,n]of Object.entries(e))this._setUniform(t,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${t}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,t){(function(e,t){if(e!==t)return!1;const n=e,i=t;if(!cH(n))return!1;if(cH(i)&&n.length===i.length)for(let r=0;r<n.length;++r)if(i[r]!==n[r])return!1;return!0})(this.uniforms[e],t)||(this.uniforms[e]=function(e){return cH(e)?e.slice():e}(t),this.modifiedUniforms[e]=!0,this.modified=!0)}}let hH=class{constructor(e){sB(this,"uniformBlocks",new Map),sB(this,"uniformBufferLayouts",new Map),sB(this,"uniformBuffers",new Map);for(const[t,n]of Object.entries(e)){const e=t,i=new uH(n.uniformTypes??{},n.uniformSizes??{});this.uniformBufferLayouts.set(e,i);const r=new dH({name:t});r.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(e,r)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var t;for(const[n,i]of Object.entries(e))null==(t=this.uniformBlocks.get(n))||t.setUniforms(i);this.updateUniformBuffers()}getUniformBufferByteLength(e){var t;return(null==(t=this.uniformBufferLayouts.get(e))?void 0:t.byteLength)||0}getUniformBufferData(e){var t,n;const i=(null==(t=this.uniformBlocks.get(e))?void 0:t.getAllUniforms())||{};return null==(n=this.uniformBufferLayouts.get(e))?void 0:n.getData(i)}createUniformBuffer(e,t,n){n&&this.setUniforms(n);const i=this.getUniformBufferByteLength(t),r=e.createBuffer({usage:eV.UNIFORM|eV.COPY_DST,byteLength:i}),o=this.getUniformBufferData(t);return r.write(o),r}getManagedUniformBuffer(e,t){if(!this.uniformBuffers.get(t)){const n=this.getUniformBufferByteLength(t),i=e.createBuffer({usage:eV.UNIFORM|eV.COPY_DST,byteLength:n});this.uniformBuffers.set(t,i)}return this.uniformBuffers.get(t)}updateUniformBuffers(){let e=!1;for(const t of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(t);e||(e=n)}return e&&Xj.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var t;const n=this.uniformBlocks.get(e);let i=this.uniformBuffers.get(e),r=!1;if(i&&null!=n&&n.needsRedraw){r||(r=n.needsRedraw);const o=this.getUniformBufferData(e);i=this.uniformBuffers.get(e),null==i||i.write(o);const s=null==(t=this.uniformBlocks.get(e))?void 0:t.getAllUniforms();Xj.log(4,`Writing to uniform buffer ${String(e)}`,o,s)()}return r}};var fH;!function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.R16_EXT=33322]="R16_EXT",e[e.RG16_EXT=33324]="RG16_EXT",e[e.RGB16_EXT=32852]="RGB16_EXT",e[e.RGBA16_EXT=32859]="RGBA16_EXT",e[e.R16_SNORM_EXT=36760]="R16_SNORM_EXT",e[e.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",e[e.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",e[e.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",e[e.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",e[e.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",e[e.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",e[e.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",e[e.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",e[e.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",e[e.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",e[e.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",e[e.LINE_WEBGL=6913]="LINE_WEBGL",e[e.FILL_WEBGL=6914]="FILL_WEBGL",e[e.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",e[e.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",e[e.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",e[e.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",e[e.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",e[e.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",e[e.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",e[e.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",e[e.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",e[e.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",e[e.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",e[e.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",e[e.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",e[e.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",e[e.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",e[e.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",e[e.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",e[e.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",e[e.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",e[e.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",e[e.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",e[e.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",e[e.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",e[e.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"}(fH||(fH={}));const pH={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},mH=e=>({drawBuffersWEBGL:t=>e.drawBuffers(t),COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),gH=e=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES:()=>e.createVertexArray(),deleteVertexArrayOES:t=>e.deleteVertexArray(t),isVertexArrayOES:t=>e.isVertexArray(t),bindVertexArrayOES:t=>e.bindVertexArray(t)}),_H=e=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE:(...t)=>e.drawArraysInstanced(...t),drawElementsInstancedANGLE:(...t)=>e.drawElementsInstanced(...t),vertexAttribDivisorANGLE:(...t)=>e.vertexAttribDivisor(...t)});async function yH(e,t){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const i=document.createElement("script");return i.setAttribute("type","text/javascript"),i.setAttribute("src",e),new Promise((t,r)=>{i.onload=t,i.onerror=t=>r(new Error(`Unable to load script '${e}': ${t}`)),n.appendChild(i)})}let vH=null,bH=!1;const xH={debugSpectorJS:Xj.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};function wH(e){var t;if(!(e={...xH,...e}).debugSpectorJS)return null;if(!vH&&globalThis.SPECTOR&&(null==(t=globalThis.luma)||!t.spector)){Xj.probe(1,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:e}=globalThis.SPECTOR;vH=new e,globalThis.luma&&(globalThis.luma.spector=vH)}if(!vH)return null;if(bH||(bH=!0,vH.spyCanvases(),null==vH||vH.onCaptureStarted.add(e=>Xj.info("Spector capture started:",e)()),null==vH||vH.onCapture.add(e=>{Xj.info("Spector capture complete:",e)(),null==vH||vH.getResultUI(),null==vH||vH.resultView.display(),null==vH||vH.resultView.addCapture(e)})),e.gl){const t=e.gl,n=t.device;null==vH||vH.startCapture(e.gl,500),t.device=n,new Promise(e=>setTimeout(e,2e3)).then(e=>{Xj.info("Spector capture stopped after 2 seconds")(),null==vH||vH.stopCapture()})}return vH}function SH(e){return e.luma=e.luma||{},e.luma}function EH(e,t={}){return t.debugWebGL||t.traceWebGL?function(e,t){if(!globalThis.WebGLDebugUtils)return Xj.warn("webgl-debug not loaded")(),e;const n=SH(e);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...fH,...e});const i=globalThis.WebGLDebugUtils.makeDebugContext(e,TH.bind(null,t),kH.bind(null,t));for(const s in fH)!(s in i)&&"number"==typeof fH[s]&&(i[s]=fH[s]);class r{}Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.setPrototypeOf(r,i);const o=Object.create(r);return n.realContext=e,n.debugContext=o,o.debug=!0,o}(e,t):function(e){const t=SH(e);return t.realContext?t.realContext:e}(e)}function CH(e,t){t=Array.from(t).map(e=>void 0===e?"undefined":e);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(e,t);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${e}(${n})`}function TH(e,t,n,i){i=Array.from(i).map(e=>void 0===e?"undefined":e);const r=`${globalThis.WebGLDebugUtils.glEnumToString(t)} in gl.${n}(${globalThis.WebGLDebugUtils.glFunctionArgsToString(n,i)})`;Xj.error(r)()}function kH(e,t,n){let i="";Xj.level>=1&&(i=CH(t,n),e.traceWebGL&&Xj.log(1,i)());for(const r of n)void 0===r&&(i=i||CH(t,n))}const AH=new class extends OV{constructor(){super(),sB(this,"type","webgl"),IV.defaultProps={...IV.defaultProps,...xH}}enforceWebGL2(e){!function(e=!0){const t=HTMLCanvasElement.prototype;if(!e&&t.originalGetContext)return t.getContext=t.originalGetContext,void(t.originalGetContext=void 0);t.originalGetContext=t.getContext,t.getContext=function(e,t){if("webgl"===e||"experimental-webgl"===e){const e=this.originalGetContext("webgl2",t);return e instanceof HTMLElement&&function(e){e.getExtension("EXT_color_buffer_float");const t={...pH,WEBGL_disjoint_timer_query:e.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:mH(e),OES_vertex_array_object:gH(e),ANGLE_instanced_arrays:_H(e)},n=e.getExtension;e.getExtension=function(i){return n.call(e,i)||(i in t?t[i]:null)};const i=e.getSupportedExtensions;e.getSupportedExtensions=function(){const n=i.apply(e)||[];return null==n?void 0:n.concat(Object.keys(t))}}(e),e}return this.originalGetContext(e,t)}}(e)}isSupported(){return typeof WebGL2RenderingContext<"u"}isDeviceHandle(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||(typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext&&Xj.warn("WebGL1 is not supported",e)(),!1)}async attach(e,t={}){const{WebGLDevice:n}=await l(async()=>{const{WebGLDevice:e}=await import("./webgl-device-QoBMYpnS-BX-IJcIB.js");return{WebGLDevice:e}},__vite__mapDeps([0]));if(e instanceof n)return e;if((null==e?void 0:e.device)instanceof n)return e.device;if(!function(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||!(!e||!Number.isFinite(e._version))}(e))throw new Error("Invalid WebGL2RenderingContext");const i=!0===t.createCanvasContext?{}:t.createCanvasContext;return new n({...t,_handle:e,createCanvasContext:{canvas:e.canvas,autoResize:!1,...i}})}async create(e={}){const{WebGLDevice:t}=await l(async()=>{const{WebGLDevice:e}=await import("./webgl-device-QoBMYpnS-BX-IJcIB.js");return{WebGLDevice:e}},__vite__mapDeps([0]));Xj.groupCollapsed(1,"WebGLDevice created")();try{const n=[];(e.debugWebGL||e.debug)&&n.push(async function(){Oj()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await yH("https://unpkg.com/webgl-debug@2.0.1/index.js"))}()),e.debugSpectorJS&&n.push(async function(e){if(!globalThis.SPECTOR)try{await yH(e.debugSpectorJSUrl||xH.debugSpectorJSUrl)}catch(qe){Xj.warn(String(qe))}}(e));const i=await Promise.allSettled(n);for(const e of i)"rejected"===e.status&&Xj.error(`Failed to initialize debug libraries ${e.reason}`)();const r=new t(e),o=`${r._reused?"Reusing":"Created"} device with WebGL2 ${r.props.debug?"debug ":""}context: ${r.info.vendor}, ${r.info.renderer} for canvas: ${r.canvasContext.id}`;return Xj.probe(1,o)(),Xj.table(1,r.info)(),r}finally{Xj.groupEnd(1)()}}},IH=void 0,PH="#222222",LH={enableSimulation:!0,spaceSize:8192,pointSizeScale:1,linkWidthScale:1,linkArrowsSizeScale:1,renderLinks:!0,curvedLinks:!1,curvedLinkSegments:19,curvedLinkWeight:.8,curvedLinkControlPointDistance:.5,linkArrows:!1,linkVisibilityDistanceRange:[50,150],linkVisibilityMinTransparency:.25,hoveredPointCursor:"auto",hoveredLinkCursor:"auto",renderHoveredPointRing:!1,hoveredPointRingColor:"white",hoveredLinkColor:void 0,hoveredLinkWidthIncrease:5,focusedPointRingColor:"white",focusedPointIndex:void 0,simulation:{decay:5e3,gravity:.25,center:0,repulsion:1,repulsionTheta:1.15,linkSpring:1,linkDistance:10,linkDistRandomVariationRange:[1,1.2],repulsionFromMouse:2,friction:.85,cluster:.1},showFPSMonitor:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||2,scalePointsOnZoom:!1,scaleLinksOnZoom:!1,enableZoom:!0,enableSimulationDuringZoom:!1,enableDrag:!1,fitViewOnInit:!0,fitViewDelay:250,fitViewPadding:.1,fitViewDuration:250,pointSamplingDistance:150,attribution:"",rescalePositions:void 0,enableRightClickRepulsion:!1},{entries:RH,setPrototypeOf:OH,isFrozen:MH,getPrototypeOf:DH,getOwnPropertyDescriptor:NH}=Object;let{freeze:FH,seal:BH,create:zH}=Object,{apply:UH,construct:jH}=typeof Reflect<"u"&&Reflect;FH||(FH=function(e){return e}),BH||(BH=function(e){return e}),UH||(UH=function(e,t,n){return e.apply(t,n)}),jH||(jH=function(e,t){return new e(...t)});const VH=nW(Array.prototype.forEach),HH=nW(Array.prototype.lastIndexOf),WH=nW(Array.prototype.pop),$H=nW(Array.prototype.push),GH=nW(Array.prototype.splice),qH=nW(String.prototype.toLowerCase),YH=nW(String.prototype.toString),XH=nW(String.prototype.match),KH=nW(String.prototype.replace),ZH=nW(String.prototype.indexOf),QH=nW(String.prototype.trim),JH=nW(Object.prototype.hasOwnProperty),eW=nW(RegExp.prototype.test),tW=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return jH(e,n)}}(TypeError);function nW(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return UH(e,t,i)}}function iW(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qH;OH&&OH(e,null);let i=t.length;for(;i--;){let r=t[i];if("string"==typeof r){const e=n(r);e!==r&&(MH(t)||(t[i]=e),r=e)}e[r]=!0}return e}function rW(e){for(let t=0;t<e.length;t++)JH(e,t)||(e[t]=null);return e}function oW(e){const t=zH(null);for(const[n,i]of RH(e))JH(e,n)&&(Array.isArray(i)?t[n]=rW(i):i&&"object"==typeof i&&i.constructor===Object?t[n]=oW(i):t[n]=i);return t}function sW(e,t){for(;null!==e;){const n=NH(e,t);if(n){if(n.get)return nW(n.get);if("function"==typeof n.value)return nW(n.value)}e=DH(e)}return function(){return null}}const aW=FH(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lW=FH(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),cW=FH(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uW=FH(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dW=FH(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hW=FH(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fW=FH(["#text"]),pW=FH(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),mW=FH(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gW=FH(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_W=FH(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yW=BH(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vW=BH(/<%[\w\W]*|[\w\W]*%>/gm),bW=BH(/\$\{[\w\W]*/gm),xW=BH(/^data-[\-\w.\u00B7-\uFFFF]+$/),wW=BH(/^aria-[\-\w]+$/),SW=BH(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),EW=BH(/^(?:\w+script|data):/i),CW=BH(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),TW=BH(/^html$/i),kW=BH(/^[a-z][.\w]*(-[.\w]+)+$/i);var AW=Object.freeze({__proto__:null,ARIA_ATTR:wW,ATTR_WHITESPACE:CW,CUSTOM_ELEMENT:kW,DATA_ATTR:xW,DOCTYPE_NAME:TW,ERB_EXPR:vW,IS_ALLOWED_URI:SW,IS_SCRIPT_OR_DATA:EW,MUSTACHE_EXPR:yW,TMPLIT_EXPR:bW});var IW=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:i}=t;const r=i,o=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:p}=t,m=c.prototype,g=sW(m,"cloneNode"),_=sW(m,"remove"),y=sW(m,"nextSibling"),v=sW(m,"childNodes"),b=sW(m,"parentNode");if("function"==typeof a){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let x,w="";const{implementation:S,createNodeIterator:E,createDocumentFragment:C,getElementsByTagName:T}=i,{importNode:k}=r;let A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof RH&&"function"==typeof b&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:P,TMPLIT_EXPR:L,DATA_ATTR:R,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:N}=AW;let{IS_ALLOWED_URI:F}=AW,B=null;const z=iW({},[...aW,...lW,...cW,...dW,...fW]);let U=null;const j=iW({},[...pW,...mW,...gW,..._W]);let V=Object.seal(zH(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,W=null,$=!0,G=!0,q=!1,Y=!0,X=!1,K=!0,Z=!1,Q=!1,J=!1,ee=!1,te=!1,ne=!1,ie=!0,re=!1,oe=!0,se=!1,ae={},le=null;const ce=iW({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const de=iW({},["audio","video","img","source","image","track"]);let he=null;const fe=iW({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",me="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let _e=ge,ye=!1,ve=null;const be=iW({},[pe,me,ge],YH);let xe=iW({},["mi","mo","mn","ms","mtext"]),we=iW({},["annotation-xml"]);const Se=iW({},["title","style","font","a","script"]);let Ee=null;const Ce=["application/xhtml+xml","text/html"];let Te=null,ke=null;const Ae=i.createElement("form"),Ie=function(e){return e instanceof RegExp||e instanceof Function},Pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ke||ke!==e){if((!e||"object"!=typeof e)&&(e={}),e=oW(e),Ee=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Te="application/xhtml+xml"===Ee?YH:qH,B=JH(e,"ALLOWED_TAGS")?iW({},e.ALLOWED_TAGS,Te):z,U=JH(e,"ALLOWED_ATTR")?iW({},e.ALLOWED_ATTR,Te):j,ve=JH(e,"ALLOWED_NAMESPACES")?iW({},e.ALLOWED_NAMESPACES,YH):be,he=JH(e,"ADD_URI_SAFE_ATTR")?iW(oW(fe),e.ADD_URI_SAFE_ATTR,Te):fe,ue=JH(e,"ADD_DATA_URI_TAGS")?iW(oW(de),e.ADD_DATA_URI_TAGS,Te):de,le=JH(e,"FORBID_CONTENTS")?iW({},e.FORBID_CONTENTS,Te):ce,H=JH(e,"FORBID_TAGS")?iW({},e.FORBID_TAGS,Te):oW({}),W=JH(e,"FORBID_ATTR")?iW({},e.FORBID_ATTR,Te):oW({}),ae=!!JH(e,"USE_PROFILES")&&e.USE_PROFILES,$=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,X=e.SAFE_FOR_TEMPLATES||!1,K=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,ie=!1!==e.SANITIZE_DOM,re=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||SW,_e=e.NAMESPACE||ge,xe=e.MATHML_TEXT_INTEGRATION_POINTS||xe,we=e.HTML_INTEGRATION_POINTS||we,V=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ie(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ie(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(G=!1),te&&(ee=!0),ae&&(B=iW({},fW),U=[],!0===ae.html&&(iW(B,aW),iW(U,pW)),!0===ae.svg&&(iW(B,lW),iW(U,mW),iW(U,_W)),!0===ae.svgFilters&&(iW(B,cW),iW(U,mW),iW(U,_W)),!0===ae.mathMl&&(iW(B,dW),iW(U,gW),iW(U,_W))),e.ADD_TAGS&&(B===z&&(B=oW(B)),iW(B,e.ADD_TAGS,Te)),e.ADD_ATTR&&(U===j&&(U=oW(U)),iW(U,e.ADD_ATTR,Te)),e.ADD_URI_SAFE_ATTR&&iW(he,e.ADD_URI_SAFE_ATTR,Te),e.FORBID_CONTENTS&&(le===ce&&(le=oW(le)),iW(le,e.FORBID_CONTENTS,Te)),oe&&(B["#text"]=!0),Z&&iW(B,["html","head","body"]),B.table&&(iW(B,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw tW('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw tW('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=e.TRUSTED_TYPES_POLICY,w=x.createHTML("")}else void 0===x&&(x=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch{return null}}(p,o)),null!==x&&"string"==typeof w&&(w=x.createHTML(""));FH&&FH(e),ke=e}},Le=iW({},[...lW,...cW,...uW]),Re=iW({},[...dW,...hW]),Oe=function(e){$H(n.removed,{element:e});try{b(e).removeChild(e)}catch{_(e)}},Me=function(e,t){try{$H(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch{$H(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Oe(t)}catch{}else try{t.setAttribute(e,"")}catch{}},De=function(e){let t=null,n=null;if(J)e="<remove></remove>"+e;else{const t=XH(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ee&&_e===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=x?x.createHTML(e):e;if(_e===ge)try{t=(new f).parseFromString(r,Ee)}catch{}if(!t||!t.documentElement){t=S.createDocument(_e,"template",null);try{t.documentElement.innerHTML=ye?w:r}catch{}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),_e===ge?T.call(t,Z?"html":"body")[0]:Z?t.documentElement:o},Ne=function(e){return E.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Fe=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Be=function(e){return"function"==typeof l&&e instanceof l};function ze(e,t,i){VH(e,e=>{e.call(n,t,i,ke)})}const Ue=function(e){let t=null;if(ze(A.beforeSanitizeElements,e,null),Fe(e))return Oe(e),!0;const i=Te(e.nodeName);if(ze(A.uponSanitizeElement,e,{tagName:i,allowedTags:B}),K&&e.hasChildNodes()&&!Be(e.firstElementChild)&&eW(/<[/\w!]/g,e.innerHTML)&&eW(/<[/\w!]/g,e.textContent)||7===e.nodeType||K&&8===e.nodeType&&eW(/<[/\w]/g,e.data))return Oe(e),!0;if(!B[i]||H[i]){if(!H[i]&&Ve(i)&&(V.tagNameCheck instanceof RegExp&&eW(V.tagNameCheck,i)||V.tagNameCheck instanceof Function&&V.tagNameCheck(i)))return!1;if(oe&&!le[i]){const t=b(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i){const r=g(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,y(e))}}return Oe(e),!0}return e instanceof c&&!function(e){let t=b(e);(!t||!t.tagName)&&(t={namespaceURI:_e,tagName:"template"});const n=qH(e.tagName),i=qH(t.tagName);return!!ve[e.namespaceURI]&&(e.namespaceURI===me?t.namespaceURI===ge?"svg"===n:t.namespaceURI===pe?"svg"===n&&("annotation-xml"===i||xe[i]):!!Le[n]:e.namespaceURI===pe?t.namespaceURI===ge?"math"===n:t.namespaceURI===me?"math"===n&&we[i]:!!Re[n]:e.namespaceURI===ge?!(t.namespaceURI===me&&!we[i]||t.namespaceURI===pe&&!xe[i])&&!Re[n]&&(Se[n]||!Le[n]):!("application/xhtml+xml"!==Ee||!ve[e.namespaceURI]))}(e)||("noscript"===i||"noembed"===i||"noframes"===i)&&eW(/<\/no(script|embed|frames)/i,e.innerHTML)?(Oe(e),!0):(X&&3===e.nodeType&&(t=e.textContent,VH([I,P,L],e=>{t=KH(t,e," ")}),e.textContent!==t&&($H(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze(A.afterSanitizeElements,e,null),!1)},je=function(e,t,n){if(ie&&("id"===t||"name"===t)&&(n in i||n in Ae))return!1;if((!G||W[t]||!eW(R,t))&&(!$||!eW(O,t)))if(!U[t]||W[t]){if(!(Ve(e)&&(V.tagNameCheck instanceof RegExp&&eW(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&eW(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&eW(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(!he[t]&&!eW(F,KH(n,D,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==ZH(n,"data:")||!ue[e])&&(!q||eW(M,KH(n,D,"")))&&n)return!1;return!0},Ve=function(e){return"annotation-xml"!==e&&XH(e,N)},He=function(e){ze(A.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Fe(e))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let r=t.length;for(;r--;){const o=t[r],{name:s,namespaceURI:a,value:l}=o,c=Te(s),u=l;let d="value"===s?u:QH(u);if(i.attrName=c,i.attrValue=d,i.keepAttr=!0,i.forceKeepAttr=void 0,ze(A.uponSanitizeAttribute,e,i),d=i.attrValue,re&&("id"===c||"name"===c)&&(Me(s,e),d="user-content-"+d),K&&eW(/((--!?|])>)|<\/(style|title)/i,d)){Me(s,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){Me(s,e);continue}if(!Y&&eW(/\/>/i,d)){Me(s,e);continue}X&&VH([I,P,L],e=>{d=KH(d,e," ")});const h=Te(e.nodeName);if(je(h,c,d)){if(x&&"object"==typeof p&&"function"==typeof p.getAttributeType&&!a)switch(p.getAttributeType(h,c)){case"TrustedHTML":d=x.createHTML(d);break;case"TrustedScriptURL":d=x.createScriptURL(d)}if(d!==u)try{a?e.setAttributeNS(a,s,d):e.setAttribute(s,d),Fe(e)?Oe(e):WH(n.removed)}catch{Me(s,e)}}else Me(s,e)}ze(A.afterSanitizeAttributes,e,null)},We=function e(t){let n=null;const i=Ne(t);for(ze(A.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)ze(A.uponSanitizeShadowNode,n,null),Ue(n),He(n),n.content instanceof s&&e(n.content);ze(A.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,a=null,c=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Be(e)){if("function"!=typeof e.toString)throw tW("toString is not a function");if("string"!=typeof(e=e.toString()))throw tW("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Q||Pe(t),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){const t=Te(e.nodeName);if(!B[t]||H[t])throw tW("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)i=De("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!ee&&!X&&!Z&&-1===e.indexOf("<"))return x&&ne?x.createHTML(e):e;if(i=De(e),!i)return ee?null:ne?w:""}i&&J&&Oe(i.firstChild);const u=Ne(se?e:i);for(;a=u.nextNode();)Ue(a),He(a),a.content instanceof s&&We(a.content);if(se)return e;if(ee){if(te)for(c=C.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(U.shadowroot||U.shadowrootmode)&&(c=k.call(r,c,!0)),c}let d=Z?i.outerHTML:i.innerHTML;return Z&&B["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&eW(TW,i.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+d),X&&VH([I,P,L],e=>{d=KH(d,e," ")}),x&&ne?x.createHTML(d):d},n.setConfig=function(){Pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Q=!0},n.clearConfig=function(){ke=null,Q=!1},n.isValidAttribute=function(e,t,n){ke||Pe({});const i=Te(e),r=Te(t);return je(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&$H(A[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=HH(A[e],t);return-1===n?void 0:GH(A[e],n,1)[0]}return WH(A[e])},n.removeHooks=function(e){A[e]=[]},n.removeAllHooks=function(){A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const PW=e=>Array.isArray(e),LW=e=>(e=>e instanceof Object)(e)&&!PW(e)&&!(e=>"function"==typeof e)(e)&&!(e=>e instanceof Object&&"Function"!==e.constructor.name&&"Object"!==e.constructor.name)(e);function RW(e){let t;if(PW(e))t=e;else{const n=pU(e),i=null==n?void 0:n.rgb();t=[(null==i?void 0:i.r)||0,(null==i?void 0:i.g)||0,(null==i?void 0:i.b)||0,(null==n?void 0:n.opacity)??1]}return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function OW(e,t,n=0,i=0,r,o){return e.readPixelsToArrayWebGL(t,{sourceX:n,sourceY:i,sourceWidth:r,sourceHeight:o})}function MW(e){return null!=e&&!Number.isNaN(e)}class DW{constructor(){this.enableSimulation=LH.enableSimulation,this.backgroundColor=PH,this.spaceSize=LH.spaceSize,this.pointColor="#b3b3b3",this.pointDefaultColor=void 0,this.pointGreyoutOpacity=void 0,this.pointGreyoutColor=IH,this.pointSize=4,this.pointDefaultSize=void 0,this.pointOpacity=1,this.pointSizeScale=LH.pointSizeScale,this.hoveredPointCursor=LH.hoveredPointCursor,this.hoveredLinkCursor=LH.hoveredLinkCursor,this.renderHoveredPointRing=LH.renderHoveredPointRing,this.hoveredPointRingColor=LH.hoveredPointRingColor,this.focusedPointRingColor=LH.focusedPointRingColor,this.focusedPointIndex=LH.focusedPointIndex,this.linkColor="#666666",this.linkDefaultColor=void 0,this.linkOpacity=1,this.linkGreyoutOpacity=.1,this.linkWidth=1,this.linkDefaultWidth=void 0,this.linkWidthScale=LH.linkWidthScale,this.hoveredLinkColor=LH.hoveredLinkColor,this.hoveredLinkWidthIncrease=LH.hoveredLinkWidthIncrease,this.renderLinks=LH.renderLinks,this.curvedLinks=LH.curvedLinks,this.curvedLinkSegments=LH.curvedLinkSegments,this.curvedLinkWeight=LH.curvedLinkWeight,this.curvedLinkControlPointDistance=LH.curvedLinkControlPointDistance,this.linkArrows=LH.linkArrows,this.linkDefaultArrows=void 0,this.linkArrowsSizeScale=LH.linkArrowsSizeScale,this.scaleLinksOnZoom=LH.scaleLinksOnZoom,this.linkVisibilityDistanceRange=LH.linkVisibilityDistanceRange,this.linkVisibilityMinTransparency=LH.linkVisibilityMinTransparency,this.simulationDecay=LH.simulation.decay,this.simulationGravity=LH.simulation.gravity,this.simulationCenter=LH.simulation.center,this.simulationRepulsion=LH.simulation.repulsion,this.simulationRepulsionTheta=LH.simulation.repulsionTheta,this.simulationLinkSpring=LH.simulation.linkSpring,this.simulationLinkDistance=LH.simulation.linkDistance,this.simulationLinkDistRandomVariationRange=LH.simulation.linkDistRandomVariationRange,this.simulationRepulsionFromMouse=LH.simulation.repulsionFromMouse,this.enableRightClickRepulsion=LH.enableRightClickRepulsion,this.simulationFriction=LH.simulation.friction,this.simulationCluster=LH.simulation.cluster,this.onSimulationStart=void 0,this.onSimulationTick=void 0,this.onSimulationEnd=void 0,this.onSimulationPause=void 0,this.onSimulationRestart=void 0,this.onSimulationUnpause=void 0,this.onClick=void 0,this.onPointClick=void 0,this.onLinkClick=void 0,this.onBackgroundClick=void 0,this.onMouseMove=void 0,this.onPointMouseOver=void 0,this.onPointMouseOut=void 0,this.onLinkMouseOver=void 0,this.onLinkMouseOut=void 0,this.onZoomStart=void 0,this.onZoom=void 0,this.onZoomEnd=void 0,this.onDragStart=void 0,this.onDrag=void 0,this.onDragEnd=void 0,this.showFPSMonitor=LH.showFPSMonitor,this.pixelRatio=LH.pixelRatio,this.scalePointsOnZoom=LH.scalePointsOnZoom,this.initialZoomLevel=void 0,this.enableZoom=LH.enableZoom,this.enableSimulationDuringZoom=LH.enableSimulationDuringZoom,this.enableDrag=LH.enableDrag,this.fitViewOnInit=LH.fitViewOnInit,this.fitViewDelay=LH.fitViewDelay,this.fitViewPadding=LH.fitViewPadding,this.fitViewDuration=LH.fitViewDuration,this.fitViewByPointsInRect=void 0,this.fitViewByPointIndices=void 0,this.randomSeed=void 0,this.pointSamplingDistance=LH.pointSamplingDistance,this.attribution=LH.attribution,this.rescalePositions=LH.rescalePositions}init(e){Object.keys(e).forEach(t=>{this.deepMergeConfig(this.getConfig(),e,t)})}deepMergeConfig(e,t,n){LW(e[n])&&LW(t[n])?Object.keys(t[n]).forEach(i=>{this.deepMergeConfig(e[n],t[n],i)}):e[n]=t[n]}getConfig(){return this}}function NW(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const FW={number:{type:"number",validate:(e,t)=>Number.isFinite(e)&&"object"==typeof t&&(void 0===t.max||e<=t.max)&&(void 0===t.min||e>=t.min)},array:{type:"array",validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function BW(e){let t=zW(e);if("object"!==t)return{value:e,...FW[t],type:t};if("object"==typeof e)return e?void 0!==e.type?{...e,...FW[e.type],type:e.type}:void 0===e.value?{type:"object",value:e}:(t=zW(e.value),{...e,...FW[t],type:t}):{type:"object",value:null};throw new Error("props")}function zW(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const UW={vertex:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\n  fragColor = material_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  fragColor = lighting_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_FOG\n  fragColor = fog_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  fragColor = picking_filterHighlightColor(fragColor);\n  fragColor = picking_filterPickingColor(fragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},jW=/void\s+main\s*\([^)]*\)\s*\{\n?/,VW=/}\n?[^{}]*$/,HW=[],WW="__LUMA_INJECT_DECLARATIONS__";function $W(e){const t={vertex:{},fragment:{}};for(const n in e){let i=e[n];"string"==typeof i&&(i={order:0,injection:i}),t[GW(n)][n]=i}return t}function GW(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function qW(e,t,n,i=!1){const r="vertex"===t;for(const o in n){const t=n[o];t.sort((e,t)=>e.order-t.order),HW.length=t.length;for(let e=0,n=t.length;e<n;++e)HW[e]=t[e].injection;const i=`${HW.join("\n")}\n`;switch(o){case"vs:#decl":r&&(e=e.replace(WW,i));break;case"vs:#main-start":r&&(e=e.replace(jW,e=>e+i));break;case"vs:#main-end":r&&(e=e.replace(VW,e=>i+e));break;case"fs:#decl":r||(e=e.replace(WW,i));break;case"fs:#main-start":r||(e=e.replace(jW,e=>e+i));break;case"fs:#main-end":r||(e=e.replace(VW,e=>i+e));break;default:e=e.replace(o,e=>e+i)}}return e=e.replace(WW,""),i&&(e=e.replace(/\}\s*$/,e=>e+UW[t])),e}function YW(e){e.map(e=>function(e){if(e.instance)return;YW(e.dependencies||[]);const{propTypes:t={},deprecations:n=[],inject:i={}}=e,r={normalizedInjections:$W(i),parsedDeprecations:KW(n)};t&&(r.propValidators=function(e){const t={};for(const[n,i]of Object.entries(e))t[n]=BW(i);return t}(t)),e.instance=r;let o={};t&&(o=Object.entries(t).reduce((e,[t,n])=>{const i=null==n?void 0:n.value;return i&&(e[t]=i),e},{})),e.defaultUniforms={...e.defaultUniforms,...o}}(e))}function XW(e,t,n){var i;null==(i=e.deprecations)||i.forEach(e=>{var i;null!=(i=e.regex)&&i.test(t)&&(e.deprecated?n.deprecated(e.old,e.new)():n.removed(e.old,e.new)())})}function KW(e){return e.forEach(e=>{"function"===e.type?e.regex=new RegExp(`\\b${e.old}\\(`):e.regex=new RegExp(`${e.type} ${e.old};`)}),e}function ZW(e){YW(e);const t={},n={};QW({modules:e,level:0,moduleMap:t,moduleDepth:n});const i=Object.keys(n).sort((e,t)=>n[t]-n[e]).map(e=>t[e]);return YW(i),i}function QW(e){const{modules:t,level:n,moduleMap:i,moduleDepth:r}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of t)o.dependencies&&QW({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}const JW=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],e$=[...JW,[i$("attribute"),"in $1"],[i$("varying"),"out $1"]],t$=[...JW,[i$("varying"),"in $1"]];function n$(e,t){for(const[n,i]of t)e=e.replace(n,i);return e}function i$(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function r$(e,t){let n="";for(const i in e){const r=e[i];if(n+=`void ${r.signature} {\n`,r.header&&(n+=`  ${r.header}`),t[i]){const e=t[i];e.sort((e,t)=>e.order-t.order);for(const t of e)n+=`  ${t.injection}\n`}r.footer&&(n+=`  ${r.footer}`),n+="}\n"}return n}function o$(e){const t={vertex:{},fragment:{}};for(const n of e){let e,i;"string"!=typeof n?(e=n,i=e.hook):(e={},i=n),i=i.trim();const[r,o]=i.split(":"),s=i.replace(/\(.+/,""),a=Object.assign(e,{signature:o});switch(r){case"vs":t.vertex[s]=a;break;case"fs":t.fragment[s]=a;break;default:throw new Error(r)}}return t}function s$(e,t="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return n?n[1]:t}function a$(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}if(100!==t&&300!==t)throw new Error(`Invalid GLSL version ${t}`);return t}const l$=`\n\n${WW}\n`;function c$(e){const{vs:t,fs:n}=e,i=ZW(e.modules||[]);return{vs:d$(e.platformInfo,{...e,source:t,stage:"vertex",modules:i}),fs:d$(e.platformInfo,{...e,source:n,stage:"fragment",modules:i}),getUniforms:h$(i)}}function u$(e,t){var n;const{source:i,stage:r,modules:o,hookFunctions:s=[],inject:a={},log:l}=t;NW("string"==typeof i,"shader source must be a string");const c=i;let u="";const d=o$(s),h={},f={},p={};for(const g in a){const e="string"==typeof a[g]?{injection:a[g],order:0}:a[g],t=/^(v|f)s:(#)?([\w-]+)$/.exec(g);if(t){const n=t[2],i=t[3];n?"decl"===i?f[g]=[e]:p[g]=[e]:h[g]=[e]}else p[g]=[e]}const m=o;for(const g of m){l&&XW(g,c,l),u+=f$(g,"wgsl");const e=(null==(n=g.injections)?void 0:n[r])||{};for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const i="decl"===n[2]?f:p;i[t]=i[t]||[],i[t].push(e[t])}else h[t]=h[t]||[],h[t].push(e[t])}}return u+=l$,u=qW(u,r,f),u+=r$(d[r],h),u+=c,u=qW(u,r,p),u}function d$(e,t){var n;const{source:i,stage:r,language:o="glsl",modules:s,defines:a={},hookFunctions:l=[],inject:c={},prologue:u=!0,log:d}=t;NW("string"==typeof i,"shader source must be a string");const h="glsl"===o?function(e){return{name:s$(e,void 0),language:"glsl",version:a$(e)}}(i).version:-1,f=e.shaderLanguageVersion,p=100===h?"#version 100":"#version 300 es",m=i.split("\n").slice(1).join("\n"),g={};s.forEach(e=>{Object.assign(g,e.defines)}),Object.assign(g,a);let _="";switch(o){case"wgsl":break;case"glsl":_=u?`${p}\n\n// ----- PROLOGUE -------------------------\n#define SHADER_TYPE_${r.toUpperCase()}\n\n${function(e){switch(null==e?void 0:e.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n// Apple optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Headless Chrome's software shader 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// If the GPU doesn't have full 32 bits precision, will causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e)}\n${"fragment"===r?"precision highp float;\n":""}\n\n// ----- APPLICATION DEFINES -------------------------\n\n${function(e={}){let t="";for(const n in e){const i=e[n];(i||Number.isFinite(i))&&(t+=`#define ${n.toUpperCase()} ${e[n]}\n`)}return t}(g)}\n\n`:`${p}\n`}const y=o$(l),v={},b={},x={};for(const w in c){const e="string"==typeof c[w]?{injection:c[w],order:0}:c[w],t=/^(v|f)s:(#)?([\w-]+)$/.exec(w);if(t){const n=t[2],i=t[3];n?"decl"===i?b[w]=[e]:x[w]=[e]:v[w]=[e]}else x[w]=[e]}for(const w of s){d&&XW(w,m,d),_+=f$(w,r);const e=(null==(n=w.instance)?void 0:n.normalizedInjections[r])||{};for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const i="decl"===n[2]?b:x;i[t]=i[t]||[],i[t].push(e[t])}else v[t]=v[t]||[],v[t].push(e[t])}}return _+="// ----- MAIN SHADER SOURCE -------------------------",_+=l$,_=qW(_,r,b),_+=r$(y[r],v),_+=m,_=qW(_,r,x),"glsl"===o&&h!==f&&(_=function(e,t){var n;if(300!==Number((null==(n=e.match(/^#version[ \t]+(\d+)/m))?void 0:n[1])||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return n$(e,e$);case"fragment":return n$(e,t$);default:throw new Error(t)}}(_,r)),_.trim()}function h$(e){return function(t){var n;const i={};for(const r of e){const e=null==(n=r.getUniforms)?void 0:n.call(r,t,i);Object.assign(i,e)}return i}}function f$(e,t){let n;switch(t){case"vertex":n=e.vs||"";break;case"fragment":n=e.fs||"";break;case"wgsl":n=e.source||"";break;default:NW(!1)}if(!e.name)throw new Error("Shader module must have a name");const i=e.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let r=`// ----- MODULE ${e.name} ---------------\n\n`;return"wgsl"!==t&&(r+=`#define MODULE_${i}\n`),r+=`${n}\n`,r}const p$=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,m$=/^\s*\#\s*endif\s*$/;function g$(e,t){const n=e.split("\n"),i=[];let r=!0,o=null;for(const s of n){const e=s.match(p$),t=s.match(m$);e?(o=e[1],r=!1):t?r=!0:r&&i.push(s)}return i.join("\n")}const _$=class e{constructor(){sB(this,"_hookFunctions",[]),sB(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return e.defaultShaderAssembler=e.defaultShaderAssembler||new e,e.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(t=>t.name===("string"==typeof e?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(e=>e.name!==t)}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const t=this._getModuleList(e.modules),n=this._hookFunctions,{source:i,getUniforms:r}=function(e){const t=ZW(e.modules||[]);return{source:u$(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:h$(t)}}({...e,source:e.source,modules:t,hookFunctions:n});return{source:"wgsl"===e.platformInfo.shaderLanguage?g$(i):i,getUniforms:r,modules:t}}assembleGLSLShaderPair(e){const t=this._getModuleList(e.modules),n=this._hookFunctions;return{...c$({...e,vs:e.vs,fs:e.fs,modules:t,hookFunctions:n}),modules:t}}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),n={};let i=0;for(let r=0,o=this._defaultModules.length;r<o;++r){const e=this._defaultModules[r],o=e.name;t[i++]=e,n[o]=!0}for(let r=0,o=e.length;r<o;++r){const o=e[r],s=o.name;n[s]||(t[i++]=o,n[s]=!0)}return t.length=i,YW(t),t}};sB(_$,"defaultShaderAssembler");let y$=_$;class v${constructor(e,t){this.name=e,this.attributes=t,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class b${constructor(e,t,n){this.name=e,this.type=t,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class x$ extends v${constructor(e,t){super(e,t),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class w$ extends v${constructor(e,t){super(e,t),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class S$ extends v${constructor(e,t,n){super(e,n),this.format=t}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class E$ extends v${constructor(e,t,n,i){super(e,n),this.format=t,this.access=i}get isTemplate(){return!0}getTypeName(){let e=this.name;if(null!==this.format){if("vec2"===e||"vec3"===e||"vec4"===e||"mat2x2"===e||"mat2x3"===e||"mat2x4"===e||"mat3x2"===e||"mat3x3"===e||"mat3x4"===e||"mat4x2"===e||"mat4x3"===e||"mat4x4"===e){if("f32"===this.format.name)return e+="f",e;if("i32"===this.format.name)return e+="i",e;if("u32"===this.format.name)return e+="u",e;if("bool"===this.format.name)return e+="b",e;if("f16"===this.format.name)return e+="h",e}e+=`<${this.format.name}>`}else if("vec2"===e||"vec3"===e||"vec4"===e)return e;return e}}var C$;(e=>{e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"})(C$||(C$={}));class T${constructor(e,t,n,i,r,o,s){this.name=e,this.type=t,this.group=n,this.binding=i,this.attributes=r,this.resourceType=o,this.access=s}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class k${constructor(e,t){this.name=e,this.type=t}}class A${constructor(e,t,n,i){this.name=e,this.type=t,this.locationType=n,this.location=i,this.interpolation=null}}class I${constructor(e,t,n,i){this.name=e,this.type=t,this.locationType=n,this.location=i}}class P${constructor(e,t,n,i){this.name=e,this.type=t,this.attributes=n,this.id=i}}class L${constructor(e,t,n){this.name=e,this.type=t,this.attributes=n}}class R${constructor(e,t=null,n){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=t,this.attributes=n}}class O${constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}function M$(e){var t=(32768&e)>>15,n=(31744&e)>>10,i=1023&e;return 0==n?(t?-1:1)*Math.pow(2,-14)*(i/Math.pow(2,10)):31==n?i?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,n-15)*(1+i/Math.pow(2,10))}const D$=new Float32Array(1),N$=new Int32Array(D$.buffer),F$=new Uint16Array(1);function B$(e){D$[0]=e;const t=N$[0],n=t>>31&1;let i=t>>23&255,r=8388607&t;if(255===i)return F$[0]=n<<15|31744|(0!==r?512:0),F$[0];if(0===i){if(0===r)return F$[0]=n<<15,F$[0];r|=8388608;let e=113;for(;!(8388608&r);)r<<=1,e--;return i=127-e,r&=8388607,i>0?(r=(r>>126-i)+(r>>127-i&1),F$[0]=n<<15|i<<10|r>>13,F$[0]):(F$[0]=n<<15,F$[0])}return i=i-127+15,i>=31?(F$[0]=n<<15|31744,F$[0]):i<=0?i<-10?(F$[0]=n<<15,F$[0]):(r=(8388608|r)>>1-i,F$[0]=n<<15|r>>13,F$[0]):(r>>=13,F$[0]=n<<15|i<<10|r,F$[0])}const z$=new Uint32Array(1),U$=new Float32Array(z$.buffer,0,1);function j$(e){const t=112+(e>>6&31)<<23|(63&e)<<17;return z$[0]=t,U$[0]}function V$(e,t,n,i){const r=[0,0,0,0];for(let o=0;o<i;++o)switch(n){case"8unorm":r[o]=e[t]/255,t++;break;case"8snorm":r[o]=e[t]/255*2-1,t++;break;case"8uint":r[o]=e[t],t++;break;case"8sint":r[o]=e[t]-127,t++;break;case"16uint":r[o]=e[t]|e[t+1]<<8,t+=2;break;case"16sint":r[o]=(e[t]|e[t+1]<<8)-32768,t+=2;break;case"16float":r[o]=M$(e[t]|e[t+1]<<8),t+=2;break;case"32uint":case"32sint":r[o]=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,t+=4;break;case"32float":r[o]=new Float32Array(e.buffer,t,1)[0],t+=4}return r}function H$(e,t,n,i,r){for(let o=0;o<i;++o)switch(n){case"8unorm":e[t]=255*r[o],t++;break;case"8snorm":e[t]=.5*(r[o]+1)*255,t++;break;case"8uint":e[t]=r[o],t++;break;case"8sint":e[t]=r[o]+127,t++;break;case"16uint":new Uint16Array(e.buffer,t,1)[0]=r[o],t+=2;break;case"16sint":new Int16Array(e.buffer,t,1)[0]=r[o],t+=2;break;case"16float":{const n=B$(r[o]);new Uint16Array(e.buffer,t,1)[0]=n,t+=2;break}case"32uint":new Uint32Array(e.buffer,t,1)[0]=r[o],t+=4;break;case"32sint":new Int32Array(e.buffer,t,1)[0]=r[o],t+=4;break;case"32float":new Float32Array(e.buffer,t,1)[0]=r[o],t+=4}return r}const W$={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class $${constructor(){this.id=$$._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,t){if(e){t(G$.instance);for(const n of e)n instanceof Array?this.searchBlock(n,t):n.search(t);t(q$.instance)}}constEvaluate(e,t){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}$$._id=0;class G$ extends $${}G$.instance=new G$;class q$ extends $${}q$.instance=new q$;const Y$=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class X$ extends $${constructor(){super()}}class K$ extends X${constructor(e,t,n,i,r,o){super(),this.calls=new Set,this.name=e,this.args=t,this.returnType=n,this.body=i,this.startLine=r,this.endLine=o}get astNodeType(){return"function"}search(e){if(this.attributes)for(const t of this.attributes)e(t);e(this);for(const t of this.args)e(t);this.searchBlock(this.body,e)}}class Z$ extends X${constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class Q$ extends X${constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class J$ extends X${constructor(e,t){super(),this.body=e,this.loopId=t}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class eG extends X${constructor(e,t,n,i){super(),this.init=e,this.condition=t,this.increment=n,this.body=i}get astNodeType(){return"for"}search(e){var t,n,i;null===(t=this.init)||void 0===t||t.search(e),null===(n=this.condition)||void 0===n||n.search(e),null===(i=this.increment)||void 0===i||i.search(e),this.searchBlock(this.body,e)}}class tG extends X${constructor(e,t,n,i,r){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"var"}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}class nG extends X${constructor(e,t,n){super(),this.attributes=null,this.name=e,this.type=t,this.value=n}get astNodeType(){return"override"}search(e){var t;null===(t=this.value)||void 0===t||t.search(e)}}class iG extends X${constructor(e,t,n,i,r){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"let"}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}class rG extends X${constructor(e,t,n,i,r){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"const"}constEvaluate(e,t){return this.value.constEvaluate(e,t)}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}var oG,sG,aG,lG;(e=>{e.increment="++",e.decrement="--"})(oG||(oG={})),(e=>{e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for IncrementOperator");return e[n]}})(oG||(oG={}));class cG extends X${constructor(e,t){super(),this.operator=e,this.variable=t}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}(e=>{e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="})(sG||(sG={})),(sG||(sG={})).parse=function(e){const t=e;if("parse"==t)throw new Error("Invalid value for AssignOperator");return t};class uG extends X${constructor(e,t,n){super(),this.operator=e,this.variable=t,this.value=n}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class dG extends X${constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"call"}isBuiltin(){return Y$.has(this.name)}search(e){for(const t of this.args)t.search(e);e(this)}}class hG extends X${constructor(e,t){super(),this.body=e,this.continuing=t}get astNodeType(){return"loop"}search(e){var t;this.searchBlock(this.body,e),null===(t=this.continuing)||void 0===t||t.search(e)}}class fG extends X${constructor(e,t){super(),this.condition=e,this.cases=t}get astNodeType(){return"switch"}search(e){e(this);for(const t of this.cases)t.search(e)}}class pG extends X${constructor(e,t,n,i){super(),this.condition=e,this.body=t,this.elseif=n,this.else=i}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class mG extends X${constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var t;null===(t=this.value)||void 0===t||t.search(e)}}class gG extends X${constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class _G extends X${constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class yG extends X${constructor(e,t){super(),this.severity=e,this.rule=t}get astNodeType(){return"diagnostic"}}class vG extends X${constructor(e,t){super(),this.name=e,this.type=t}get astNodeType(){return"alias"}}class bG extends X${constructor(){super()}get astNodeType(){return"discard"}}class xG extends X${constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}let wG=class extends X${constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}},SG=class e extends X${constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(t){let n=t[0];if("f32"===n.name)return n;for(let i=1;i<t.length;++i){const r=e._priority.get(n.name);e._priority.get(t[i].name)<r&&(n=t[i])}return"x32"===n.name?e.i32:n}getTypeName(){return this.name}};SG.x32=new SG("x32"),SG.f32=new SG("f32"),SG.i32=new SG("i32"),SG.u32=new SG("u32"),SG.f16=new SG("f16"),SG.bool=new SG("bool"),SG.void=new SG("void"),SG._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class EG extends SG{constructor(e){super(e)}}class CG extends SG{constructor(e,t,n,i){super(e),this.members=t,this.startLine=n,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let t=0;t<this.members.length;t++)if(this.members[t].name==e)return t;return-1}search(e){for(const t of this.members)e(t)}}let TG=class extends SG{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(null!==this.format){if("vec2"===e||"vec3"===e||"vec4"===e||"mat2x2"===e||"mat2x3"===e||"mat2x4"===e||"mat3x2"===e||"mat3x3"===e||"mat3x4"===e||"mat4x2"===e||"mat4x3"===e||"mat4x4"===e){if("f32"===this.format.name)return e+="f",e;if("i32"===this.format.name)return e+="i",e;if("u32"===this.format.name)return e+="u",e;if("bool"===this.format.name)return e+="b",e;if("f16"===this.format.name)return e+="h",e}e+=`<${this.format.name}>`}else if("vec2"===e||"vec3"===e||"vec4"===e)return e;return e}};TG.vec2f=new TG("vec2",SG.f32,null),TG.vec3f=new TG("vec3",SG.f32,null),TG.vec4f=new TG("vec4",SG.f32,null),TG.vec2i=new TG("vec2",SG.i32,null),TG.vec3i=new TG("vec3",SG.i32,null),TG.vec4i=new TG("vec4",SG.i32,null),TG.vec2u=new TG("vec2",SG.u32,null),TG.vec3u=new TG("vec3",SG.u32,null),TG.vec4u=new TG("vec4",SG.u32,null),TG.vec2h=new TG("vec2",SG.f16,null),TG.vec3h=new TG("vec3",SG.f16,null),TG.vec4h=new TG("vec4",SG.f16,null),TG.vec2b=new TG("vec2",SG.bool,null),TG.vec3b=new TG("vec3",SG.bool,null),TG.vec4b=new TG("vec4",SG.bool,null),TG.mat2x2f=new TG("mat2x2",SG.f32,null),TG.mat2x3f=new TG("mat2x3",SG.f32,null),TG.mat2x4f=new TG("mat2x4",SG.f32,null),TG.mat3x2f=new TG("mat3x2",SG.f32,null),TG.mat3x3f=new TG("mat3x3",SG.f32,null),TG.mat3x4f=new TG("mat3x4",SG.f32,null),TG.mat4x2f=new TG("mat4x2",SG.f32,null),TG.mat4x3f=new TG("mat4x3",SG.f32,null),TG.mat4x4f=new TG("mat4x4",SG.f32,null),TG.mat2x2h=new TG("mat2x2",SG.f16,null),TG.mat2x3h=new TG("mat2x3",SG.f16,null),TG.mat2x4h=new TG("mat2x4",SG.f16,null),TG.mat3x2h=new TG("mat3x2",SG.f16,null),TG.mat3x3h=new TG("mat3x3",SG.f16,null),TG.mat3x4h=new TG("mat3x4",SG.f16,null),TG.mat4x2h=new TG("mat4x2",SG.f16,null),TG.mat4x3h=new TG("mat4x3",SG.f16,null),TG.mat4x4h=new TG("mat4x4",SG.f16,null),TG.mat2x2i=new TG("mat2x2",SG.i32,null),TG.mat2x3i=new TG("mat2x3",SG.i32,null),TG.mat2x4i=new TG("mat2x4",SG.i32,null),TG.mat3x2i=new TG("mat3x2",SG.i32,null),TG.mat3x3i=new TG("mat3x3",SG.i32,null),TG.mat3x4i=new TG("mat3x4",SG.i32,null),TG.mat4x2i=new TG("mat4x2",SG.i32,null),TG.mat4x3i=new TG("mat4x3",SG.i32,null),TG.mat4x4i=new TG("mat4x4",SG.i32,null),TG.mat2x2u=new TG("mat2x2",SG.u32,null),TG.mat2x3u=new TG("mat2x3",SG.u32,null),TG.mat2x4u=new TG("mat2x4",SG.u32,null),TG.mat3x2u=new TG("mat3x2",SG.u32,null),TG.mat3x3u=new TG("mat3x3",SG.u32,null),TG.mat3x4u=new TG("mat3x4",SG.u32,null),TG.mat4x2u=new TG("mat4x2",SG.u32,null),TG.mat4x3u=new TG("mat4x3",SG.u32,null),TG.mat4x4u=new TG("mat4x4",SG.u32,null);class kG extends SG{constructor(e,t,n,i){super(e),this.storage=t,this.type=n,this.access=i}get astNodeType(){return"pointer"}}class AG extends SG{constructor(e,t,n,i){super(e),this.attributes=t,this.format=n,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class IG extends SG{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"sampler"}}class PG extends $${constructor(){super(),this.postfix=null}}class LG extends PG{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class RG extends PG{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const t of this.args)t.search(e)}constEvaluate(e,t){return t&&(t[0]=this.type),e.evalExpression(this,e.context)}}class OG extends PG{constructor(e,t){super(),this.cachedReturnValue=null,this.name=e,this.args=t}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return Y$.has(this.name)}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){for(const t of this.args)t.search(e);e(this)}}class MG extends PG{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,t){return e.evalExpression(this,e.context)}}class DG extends PG{constructor(e,t){super(),this.name=e,this.initializer=t}get astNodeType(){return"constExpr"}constEvaluate(e,t){if(this.initializer){const t=e.evalExpression(this.initializer,e.context);return null!==t&&this.postfix?t.getSubData(e,this.postfix,e.context):t}return null}search(e){this.initializer.search(e)}}class NG extends PG{constructor(e,t){super(),this.value=e,this.type=t}get astNodeType(){return"literalExpr"}constEvaluate(e,t){return void 0!==t&&(t[0]=this.type),this.value}get isScalar(){return this.value instanceof JG}get isVector(){return this.value instanceof tq||this.value instanceof nq}get scalarValue(){return this.value instanceof JG?this.value.value:0}get vectorValue(){return this.value instanceof tq||this.value instanceof nq?this.value.data:new Float32Array(0)}}class FG extends PG{constructor(e,t){super(),this.type=e,this.value=t}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class BG extends PG{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class zG extends PG{constructor(){super()}}class UG extends zG{constructor(e,t){super(),this.operator=e,this.right=t}get astNodeType(){return"unaryOp"}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class jG extends zG{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}get astNodeType(){return"binaryOp"}_getPromotedType(e,t){return e.name===t.name?e:"f32"===e.name||"f32"===t.name?SG.f32:"u32"===e.name||"u32"===t.name?SG.u32:SG.i32}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class VG extends $${constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class HG extends PG{constructor(){super()}get astNodeType(){return"default"}}class WG extends VG{constructor(e,t){super(t),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class $G extends VG{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class GG extends $${constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"argument"}}class qG extends $${constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class YG extends $${constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"member"}}class XG extends $${constructor(e,t){super(),this.name=e,this.value=t}get astNodeType(){return"attribute"}}class KG{constructor(e,t){this.parent=null,this.typeInfo=e,this.parent=t,this.id=KG._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,t,n,i){}getSubData(e,t,n){return null}toString(){return`<${this.typeInfo.getTypeName()}>`}}KG._id=0;class ZG extends KG{constructor(){super(new v$("void",null),null)}toString(){return"void"}}ZG.void=new ZG;class QG extends KG{constructor(e){super(new S$("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,t,n,i){this.reference.setDataValue(e,t,n,i)}getSubData(e,t,n){return t?this.reference.getSubData(e,t,n):this}toString(){return`&${this.reference.toString()}`}}let JG=class e extends KG{constructor(e,t,n=null){super(t,n),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:"x32"===this.typeInfo.name?e-Math.floor(e)!==0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):"i32"===this.typeInfo.name||"bool"===this.typeInfo.name?this.data=new Int32Array([e]):"u32"===this.typeInfo.name?this.data=new Uint32Array([e]):("f32"===this.typeInfo.name||"f16"===this.typeInfo.name)&&(this.data=new Float32Array([e]))}clone(){if(this.data instanceof Float32Array)return new e(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new e(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new e(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(t,n,i,r){if(i)return;if(!(n instanceof e))return;let o=n.data[0];"i32"===this.typeInfo.name||"u32"===this.typeInfo.name?o=Math.floor(o):"bool"===this.typeInfo.name&&(o=o?1:0),this.data[0]=o}getSubData(e,t,n){return t?null:this}toString(){return`${this.value}`}};function eq(e,t,n){const i=t.length;return 2===i?"f32"===n?new tq(new Float32Array(t),e.getTypeInfo("vec2f")):"i32"===n||"bool"===n?new tq(new Int32Array(t),e.getTypeInfo("vec2i")):"u32"===n?new tq(new Uint32Array(t),e.getTypeInfo("vec2u")):"f16"===n?new tq(new Float32Array(t),e.getTypeInfo("vec2h")):null:3===i?"f32"===n?new tq(new Float32Array(t),e.getTypeInfo("vec3f")):"i32"===n||"bool"===n?new tq(new Int32Array(t),e.getTypeInfo("vec3i")):"u32"===n?new tq(new Uint32Array(t),e.getTypeInfo("vec3u")):"f16"===n?new tq(new Float32Array(t),e.getTypeInfo("vec3h")):null:4===i?"f32"===n?new tq(new Float32Array(t),e.getTypeInfo("vec4f")):"i32"===n||"bool"===n?new tq(new Int32Array(t),e.getTypeInfo("vec4i")):"u32"===n?new tq(new Uint32Array(t),e.getTypeInfo("vec4u")):"f16"===n?new tq(new Float32Array(t),e.getTypeInfo("vec4h")):null:null}let tq=class e extends KG{constructor(e,t,n=null){if(super(t,n),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const t=this.typeInfo.name;"vec2f"===t||"vec3f"===t||"vec4f"===t?this.data=new Float32Array(e):"vec2i"===t||"vec3i"===t||"vec4i"===t?this.data=new Int32Array(e):"vec2u"===t||"vec3u"===t||"vec4u"===t?this.data=new Uint32Array(e):"vec2h"===t||"vec3h"===t||"vec4h"===t?this.data=new Float32Array(e):"vec2b"===t||"vec3b"===t||"vec4b"===t?this.data=new Int32Array(e):("vec2"===t||"vec3"===t||"vec4"===t)&&(this.data=new Float32Array(e))}}clone(){if(this.data instanceof Float32Array)return new e(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new e(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new e(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(t,n,i,r){i instanceof LG||n instanceof e&&(this.data=n.data)}getSubData(e,t,n){if(null===t)return this;let i=e.getTypeInfo("f32");if(this.typeInfo instanceof E$)i=this.typeInfo.format||i;else{const t=this.typeInfo.name;"vec2f"===t||"vec3f"===t||"vec4f"===t?i=e.getTypeInfo("f32"):"vec2i"===t||"vec3i"===t||"vec4i"===t?i=e.getTypeInfo("i32"):"vec2b"===t||"vec3b"===t||"vec4b"===t?i=e.getTypeInfo("bool"):"vec2u"===t||"vec3u"===t||"vec4u"===t?i=e.getTypeInfo("u32"):("vec2h"===t||"vec3h"===t||"vec4h"===t)&&(i=e.getTypeInfo("f16"))}let r=this;for(;null!==t&&null!==r;){if(t instanceof BG){const o=t.index;let s=-1;if(o instanceof NG){if(!(o.value instanceof JG))return null;s=o.value.value}else{const t=e.evalExpression(o,n);if(!(t instanceof JG))return null;s=t.value}if(s<0||s>=r.data.length)return null;if(r.data instanceof Float32Array){const e=new Float32Array(r.data.buffer,r.data.byteOffset+4*s,1);return new JG(e,i)}if(r.data instanceof Int32Array){const e=new Int32Array(r.data.buffer,r.data.byteOffset+4*s,1);return new JG(e,i)}if(r.data instanceof Uint32Array){const e=new Uint32Array(r.data.buffer,r.data.byteOffset+4*s,1);return new JG(e,i)}throw"GetSubData: Invalid data type"}if(!(t instanceof LG))return null;{const n=t.value.toLowerCase();if(1===n.length){let e=0;if("x"===n||"r"===n)e=0;else if("y"===n||"g"===n)e=1;else if("z"===n||"b"===n)e=2;else{if("w"!==n&&"a"!==n)return null;e=3}if(this.data instanceof Float32Array){let t=new Float32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new JG(t,i,this)}if(this.data instanceof Int32Array){let t=new Int32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new JG(t,i,this)}if(this.data instanceof Uint32Array){let t=new Uint32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new JG(t,i,this)}}const o=[];for(const e of n)"x"===e||"r"===e?o.push(this.data[0]):"y"===e||"g"===e?o.push(this.data[1]):"z"===e||"b"===e?o.push(this.data[2]):("w"===e||"a"===e)&&o.push(this.data[3]);r=eq(e,o,i.name)}t=t.postfix}return r}toString(){let e=`${this.data[0]}`;for(let t=1;t<this.data.length;++t)e+=`, ${this.data[t]}`;return e}},nq=class e extends KG{constructor(e,t,n=null){super(t,n),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new e(new Float32Array(this.data),this.typeInfo,null)}setDataValue(t,n,i,r){i instanceof LG||n instanceof e&&(this.data=n.data)}getSubData(e,t,n){if(null===t)return this;const i=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof E$)this.typeInfo.format;else if(i.endsWith("f"))e.getTypeInfo("f32");else if(i.endsWith("i"))e.getTypeInfo("i32");else if(i.endsWith("u"))e.getTypeInfo("u32");else{if(!i.endsWith("h"))return null;e.getTypeInfo("f16")}if(t instanceof BG){const r=t.index;let o=-1;if(r instanceof NG){if(!(r.value instanceof JG))return null;o=r.value.value}else{const t=e.evalExpression(r,n);if(!(t instanceof JG))return null;o=t.value}if(o<0||o>=this.data.length)return null;const s=i.endsWith("h")?"h":"f";let a;if("mat2x2"===i||"mat2x2f"===i||"mat2x2h"===i||"mat3x2"===i||"mat3x2f"===i||"mat3x2h"===i||"mat4x2"===i||"mat4x2f"===i||"mat4x2h"===i)a=new tq(new Float32Array(this.data.buffer,this.data.byteOffset+2*o*4,2),e.getTypeInfo(`vec2${s}`));else if("mat2x3"===i||"mat2x3f"===i||"mat2x3h"===i||"mat3x3"===i||"mat3x3f"===i||"mat3x3h"===i||"mat4x3"===i||"mat4x3f"===i||"mat4x3h"===i)a=new tq(new Float32Array(this.data.buffer,this.data.byteOffset+3*o*4,3),e.getTypeInfo(`vec3${s}`));else{if("mat2x4"!==i&&"mat2x4f"!==i&&"mat2x4h"!==i&&"mat3x4"!==i&&"mat3x4f"!==i&&"mat3x4h"!==i&&"mat4x4"!==i&&"mat4x4f"!==i&&"mat4x4h"!==i)return null;a=new tq(new Float32Array(this.data.buffer,this.data.byteOffset+4*o*4,4),e.getTypeInfo(`vec4${s}`))}return t.postfix?a.getSubData(e,t.postfix,n):a}return null}toString(){let e=`${this.data[0]}`;for(let t=1;t<this.data.length;++t)e+=`, ${this.data[t]}`;return e}};class iq extends KG{constructor(e,t,n=0,i=null){super(t,i),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=n}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new iq(e.buffer,this.typeInfo,0,null)}setDataValue(e,t,n,i){if(null===t)return;let r=this.offset,o=this.typeInfo;for(;n;){if(n instanceof BG){if(o instanceof w$){const t=n.index;if(t instanceof NG){if(!(t.value instanceof JG))return;r+=t.value.value*o.stride}else{const n=e.evalExpression(t,i);if(!(n instanceof JG))return;r+=n.value*o.stride}o=o.format}}else{if(!(n instanceof LG))return;{const e=n.value;if(o instanceof x$){let t=!1;for(const n of o.members)if(n.name===e){r+=n.offset,o=n.type,t=!0;break}if(!t)return}else if(o instanceof v$){const n=o.getTypeName();let i=0;if("x"===e||"r"===e)i=0;else if("y"===e||"g"===e)i=1;else if("z"===e||"b"===e)i=2;else{if("w"!==e&&"a"!==e)return;i=3}if(!(t instanceof JG))return;const s=t.value;return"vec2f"===n?void(new Float32Array(this.buffer,r,2)[i]=s):"vec3f"===n?void(new Float32Array(this.buffer,r,3)[i]=s):"vec4f"===n?void(new Float32Array(this.buffer,r,4)[i]=s):"vec2i"===n?void(new Int32Array(this.buffer,r,2)[i]=s):"vec3i"===n?void(new Int32Array(this.buffer,r,3)[i]=s):"vec4i"===n?void(new Int32Array(this.buffer,r,4)[i]=s):"vec2u"===n?void(new Uint32Array(this.buffer,r,2)[i]=s):"vec3u"===n?void(new Uint32Array(this.buffer,r,3)[i]=s):"vec4u"===n?void(new Uint32Array(this.buffer,r,4)[i]=s):void 0}}}n=n.postfix}this.setData(e,t,o,r,i)}setData(e,t,n,i,r){const o=n.getTypeName();if("f32"!==o&&"f16"!==o)if("i32"!==o&&"atomic<i32>"!==o&&"x32"!==o)if("u32"!==o&&"atomic<u32>"!==o)if("bool"!==o){if("vec2f"===o||"vec2h"===o){const e=new Float32Array(this.buffer,i,2);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if("vec3f"===o||"vec3h"===o){const e=new Float32Array(this.buffer,i,3);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if("vec4f"===o||"vec4h"===o){const e=new Float32Array(this.buffer,i,4);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if("vec2i"===o){const e=new Int32Array(this.buffer,i,2);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if("vec3i"===o){const e=new Int32Array(this.buffer,i,3);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if("vec4i"===o){const e=new Int32Array(this.buffer,i,4);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if("vec2u"===o){const e=new Uint32Array(this.buffer,i,2);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if("vec3u"===o){const e=new Uint32Array(this.buffer,i,3);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if("vec4u"===o){const e=new Uint32Array(this.buffer,i,4);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if("vec2b"===o){const e=new Uint32Array(this.buffer,i,2);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if("vec3b"===o){const e=new Uint32Array(this.buffer,i,3);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if("vec4b"===o){const e=new Uint32Array(this.buffer,i,4);return void(t instanceof tq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if("mat2x2f"===o||"mat2x2h"===o){const e=new Float32Array(this.buffer,i,4);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if("mat2x3f"===o||"mat2x3h"===o){const e=new Float32Array(this.buffer,i,6);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]))}if("mat2x4f"===o||"mat2x4h"===o){const e=new Float32Array(this.buffer,i,8);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7]))}if("mat3x2f"===o||"mat3x2h"===o){const e=new Float32Array(this.buffer,i,6);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]))}if("mat3x3f"===o||"mat3x3h"===o){const e=new Float32Array(this.buffer,i,9);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]))}if("mat3x4f"===o||"mat3x4h"===o){const e=new Float32Array(this.buffer,i,12);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]))}if("mat4x2f"===o||"mat4x2h"===o){const e=new Float32Array(this.buffer,i,8);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7]))}if("mat4x3f"===o||"mat4x3h"===o){const e=new Float32Array(this.buffer,i,12);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]))}if("mat4x4f"===o||"mat4x4h"===o){const e=new Float32Array(this.buffer,i,16);return void(t instanceof nq?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11],e[12]=t.data[12],e[13]=t.data[13],e[14]=t.data[14],e[15]=t.data[15]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}if(t instanceof iq&&n===t.typeInfo)return void new Uint8Array(this.buffer,i,t.buffer.byteLength).set(new Uint8Array(t.buffer))}else t instanceof JG&&(new Int32Array(this.buffer,i,1)[0]=t.value);else t instanceof JG&&(new Uint32Array(this.buffer,i,1)[0]=t.value);else t instanceof JG&&(new Int32Array(this.buffer,i,1)[0]=t.value);else t instanceof JG&&(new Float32Array(this.buffer,i,1)[0]=t.value)}getSubData(e,t,n){var i,r;if(null===t)return this;let o=this.offset,s=this.typeInfo;for(;t;){if(t instanceof BG){const i=t.index,r=i instanceof PG?e.evalExpression(i,n):i;let a=0;if(r instanceof JG?a=r.value:"number"==typeof r&&(a=r),s instanceof w$)o+=a*s.stride,s=s.format;else{const t=s.getTypeName();("mat4x4"===t||"mat4x4f"===t||"mat4x4h"===t)&&(o+=16*a,s=e.getTypeInfo("vec4f"))}}else{if(!(t instanceof LG))return null;{const n=t.value;if(s instanceof x$){let e=!1;for(const t of s.members)if(t.name===n){o+=t.offset,s=t.type,e=!0;break}if(!e)return null}else if(s instanceof v$){const t=s.getTypeName();if("vec2f"===t||"vec3f"===t||"vec4f"===t||"vec2i"===t||"vec3i"===t||"vec4i"===t||"vec2u"===t||"vec3u"===t||"vec4u"===t||"vec2b"===t||"vec3b"===t||"vec4b"===t||"vec2h"===t||"vec3h"===t||"vec4h"===t||"vec2"===t||"vec3"===t||"vec4"===t){if(n.length>0&&n.length<5){let i="f";const r=[];for(let s=0;s<n.length;++s){const a=n[s].toLowerCase();let l=0;if("x"===a||"r"===a)l=0;else if("y"===a||"g"===a)l=1;else if("z"===a||"b"===a)l=2;else{if("w"!==a&&"a"!==a)return null;l=3}if(1===n.length){if(t.endsWith("f"))return this.buffer.byteLength<o+4*l+4?null:new JG(new Float32Array(this.buffer,o+4*l,1),e.getTypeInfo("f32"),this);if(t.endsWith("h"))return new JG(new Float32Array(this.buffer,o+4*l,1),e.getTypeInfo("f16"),this);if(t.endsWith("i"))return new JG(new Int32Array(this.buffer,o+4*l,1),e.getTypeInfo("i32"),this);if(t.endsWith("b"))return new JG(new Int32Array(this.buffer,o+4*l,1),e.getTypeInfo("bool"),this);if(t.endsWith("u"))return new JG(new Uint32Array(this.buffer,o+4*l,1),e.getTypeInfo("i32"),this)}if("vec2f"===t)r.push(new Float32Array(this.buffer,o,2)[l]);else if("vec3f"===t){if(o+12>=this.buffer.byteLength)return null;const e=new Float32Array(this.buffer,o,3);r.push(e[l])}else if("vec4f"===t)r.push(new Float32Array(this.buffer,o,4)[l]);else if("vec2i"===t)i="i",r.push(new Int32Array(this.buffer,o,2)[l]);else if("vec3i"===t)i="i",r.push(new Int32Array(this.buffer,o,3)[l]);else if("vec4i"===t)i="i",r.push(new Int32Array(this.buffer,o,4)[l]);else if("vec2u"===t){i="u";const e=new Uint32Array(this.buffer,o,2);r.push(e[l])}else"vec3u"===t?(i="u",r.push(new Uint32Array(this.buffer,o,3)[l])):"vec4u"===t&&(i="u",r.push(new Uint32Array(this.buffer,o,4)[l]))}return 2===r.length?s=e.getTypeInfo(`vec2${i}`):3===r.length?s=e.getTypeInfo(`vec3${i}`):4===r.length&&(s=e.getTypeInfo(`vec4${i}`)),new tq(r,s,null)}return null}return null}}}t=t.postfix}const a=s.getTypeName();return"f32"===a?new JG(new Float32Array(this.buffer,o,1),s,this):"i32"===a?new JG(new Int32Array(this.buffer,o,1),s,this):"u32"===a?new JG(new Uint32Array(this.buffer,o,1),s,this):"vec2f"===a?new tq(new Float32Array(this.buffer,o,2),s,this):"vec3f"===a?new tq(new Float32Array(this.buffer,o,3),s,this):"vec4f"===a?new tq(new Float32Array(this.buffer,o,4),s,this):"vec2i"===a?new tq(new Int32Array(this.buffer,o,2),s,this):"vec3i"===a?new tq(new Int32Array(this.buffer,o,3),s,this):"vec4i"===a?new tq(new Int32Array(this.buffer,o,4),s,this):"vec2u"===a?new tq(new Uint32Array(this.buffer,o,2),s,this):"vec3u"===a?new tq(new Uint32Array(this.buffer,o,3),s,this):"vec4u"===a?new tq(new Uint32Array(this.buffer,o,4),s,this):s instanceof E$&&"atomic"===s.name?"u32"===(null===(i=s.format)||void 0===i?void 0:i.name)?new JG(new Uint32Array(this.buffer,o,1)[0],s.format,this):"i32"===(null===(r=s.format)||void 0===r?void 0:r.name)?new JG(new Int32Array(this.buffer,o,1)[0],s.format,this):null:new iq(this.buffer,s,o,this)}toString(){let e="";if(this.typeInfo instanceof w$)if("f32"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if("i32"===this.typeInfo.format.name){const t=new Int32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if("u32"===this.typeInfo.format.name){const t=new Uint32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if("vec2f"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}]`;for(let n=1;n<t.length/2;++n)e+=`, [${t[2*n]}, ${t[2*n+1]}]`}else if("vec3f"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}, ${t[2]}]`;for(let n=4;n<t.length;n+=4)e+=`, [${t[n]}, ${t[n+1]}, ${t[n+2]}]`}else if("vec4f"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}, ${t[2]}, ${t[3]}]`;for(let n=4;n<t.length;n+=4)e+=`, [${t[n]}, ${t[n+1]}, ${t[n+2]}, ${t[n+3]}]`}else e="[...]";else this.typeInfo instanceof x$?e+="{...}":e="[...]";return e}}class rq extends KG{constructor(e,t,n,i){super(t,null),this.data=e,this.descriptor=n,this.view=i}clone(){return new rq(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>0?null!==(e=n[0])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.width)&&void 0!==t?t:0}get height(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>1?null!==(e=n[1])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.height)&&void 0!==t?t:0}get depthOrArrayLayers(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>2?null!==(e=n[2])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.depthOrArrayLayers)&&void 0!==t?t:0}get format(){var e;return this.descriptor&&null!==(e=this.descriptor.format)&&void 0!==e?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&null!==(e=this.descriptor.sampleCount)&&void 0!==e?e:1}get mipLevelCount(){var e;return this.descriptor&&null!==(e=this.descriptor.mipLevelCount)&&void 0!==e?e:1}get dimension(){var e;return this.descriptor&&null!==(e=this.descriptor.dimension)&&void 0!==e?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const t=[this.width,this.height,this.depthOrArrayLayers];for(let n=0;n<t.length;++n)t[n]=Math.max(1,t[n]>>e);return t}get texelByteSize(){const e=this.format,t=W$[e];return t?t.isDepthStencil?4:t.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,t=W$[e];return!!t&&t.isDepthStencil}getGpuSize(){const e=this.format,t=W$[e],n=this.width;if(!e||n<=0||!t)return-1;const i=this.height,r=this.depthOrArrayLayers,o=this.dimension;return n/t.blockWidth*("1d"===o?1:i/t.blockHeight)*t.bytesPerBlock*r}getPixel(e,t,n=0,i=0){const r=this.texelByteSize,o=this.bytesPerRow,s=this.height,a=this.data[i];return function(e,t,n,i,r,o,s,a,l){const c=i*(s>>=r)*(o>>=r)+n*s+t*a;switch(l){case"r8unorm":return[V$(e,c,"8unorm",1)[0]];case"r8snorm":return[V$(e,c,"8snorm",1)[0]];case"r8uint":return[V$(e,c,"8uint",1)[0]];case"r8sint":return[V$(e,c,"8sint",1)[0]];case"rg8unorm":{const t=V$(e,c,"8unorm",2);return[t[0],t[1]]}case"rg8snorm":{const t=V$(e,c,"8snorm",2);return[t[0],t[1]]}case"rg8uint":{const t=V$(e,c,"8uint",2);return[t[0],t[1]]}case"rg8sint":{const t=V$(e,c,"8sint",2);return[t[0],t[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const t=V$(e,c,"8unorm",4);return[t[0],t[1],t[2],t[3]]}case"rgba8snorm":{const t=V$(e,c,"8snorm",4);return[t[0],t[1],t[2],t[3]]}case"rgba8uint":{const t=V$(e,c,"8uint",4);return[t[0],t[1],t[2],t[3]]}case"rgba8sint":{const t=V$(e,c,"8sint",4);return[t[0],t[1],t[2],t[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const t=V$(e,c,"8unorm",4);return[t[2],t[1],t[0],t[3]]}case"r16uint":return[V$(e,c,"16uint",1)[0]];case"r16sint":return[V$(e,c,"16sint",1)[0]];case"r16float":return[V$(e,c,"16float",1)[0]];case"rg16uint":{const t=V$(e,c,"16uint",2);return[t[0],t[1]]}case"rg16sint":{const t=V$(e,c,"16sint",2);return[t[0],t[1]]}case"rg16float":{const t=V$(e,c,"16float",2);return[t[0],t[1]]}case"rgba16uint":{const t=V$(e,c,"16uint",4);return[t[0],t[1],t[2],t[3]]}case"rgba16sint":{const t=V$(e,c,"16sint",4);return[t[0],t[1],t[2],t[3]]}case"rgba16float":{const t=V$(e,c,"16float",4);return[t[0],t[1],t[2],t[3]]}case"r32uint":return[V$(e,c,"32uint",1)[0]];case"r32sint":return[V$(e,c,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[V$(e,c,"32float",1)[0]];case"rg32uint":{const t=V$(e,c,"32uint",2);return[t[0],t[1]]}case"rg32sint":{const t=V$(e,c,"32sint",2);return[t[0],t[1]]}case"rg32float":{const t=V$(e,c,"32float",2);return[t[0],t[1]]}case"rgba32uint":{const t=V$(e,c,"32uint",4);return[t[0],t[1],t[2],t[3]]}case"rgba32sint":{const t=V$(e,c,"32sint",4);return[t[0],t[1],t[2],t[3]]}case"rgba32float":{const t=V$(e,c,"32float",4);return[t[0],t[1],t[2],t[3]]}case"rg11b10ufloat":{const t=new Uint32Array(e.buffer,c,1)[0],n=(4192256&t)>>11,i=(4290772992&t)>>22;return[j$(2047&t),j$(n),function(e){const t=112+(e>>5&31)<<23|(31&e)<<18;return z$[0]=t,U$[0]}(i),1]}}return null}(new Uint8Array(a),e,t,n,i,s,o,r,this.format)}setPixel(e,t,n,i,r){const o=this.texelByteSize,s=this.bytesPerRow,a=this.height,l=this.data[i];!function(e,t,n,i,r,o,s,a,l,c){const u=i*(s>>=r)*(o>>=r)+n*s+t*a;switch(l){case"r8unorm":return void H$(e,u,"8unorm",1,c);case"r8snorm":return void H$(e,u,"8snorm",1,c);case"r8uint":return void H$(e,u,"8uint",1,c);case"r8sint":return void H$(e,u,"8sint",1,c);case"rg8unorm":return void H$(e,u,"8unorm",2,c);case"rg8snorm":return void H$(e,u,"8snorm",2,c);case"rg8uint":return void H$(e,u,"8uint",2,c);case"rg8sint":return void H$(e,u,"8sint",2,c);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void H$(e,u,"8unorm",4,c);case"rgba8snorm":return void H$(e,u,"8snorm",4,c);case"rgba8uint":return void H$(e,u,"8uint",4,c);case"rgba8sint":return void H$(e,u,"8sint",4,c);case"r16uint":return void H$(e,u,"16uint",1,c);case"r16sint":return void H$(e,u,"16sint",1,c);case"r16float":return void H$(e,u,"16float",1,c);case"rg16uint":return void H$(e,u,"16uint",2,c);case"rg16sint":return void H$(e,u,"16sint",2,c);case"rg16float":return void H$(e,u,"16float",2,c);case"rgba16uint":return void H$(e,u,"16uint",4,c);case"rgba16sint":return void H$(e,u,"16sint",4,c);case"rgba16float":return void H$(e,u,"16float",4,c);case"r32uint":return void H$(e,u,"32uint",1,c);case"r32sint":return void H$(e,u,"32sint",1,c);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void H$(e,u,"32float",1,c);case"rg32uint":return void H$(e,u,"32uint",2,c);case"rg32sint":return void H$(e,u,"32sint",2,c);case"rg32float":return void H$(e,u,"32float",2,c);case"rgba32uint":return void H$(e,u,"32uint",4,c);case"rgba32sint":return void H$(e,u,"32sint",4,c);case"rgba32float":H$(e,u,"32float",4,c)}}(new Uint8Array(l),e,t,n,i,a,s,o,this.format,r)}}(e=>{e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"})(lG||(lG={}));let oq=class{constructor(e,t,n){this.name=e,this.type=t,this.rule=n}toString(){return this.name}},sq=class{};aG=sq,sq.none=new oq("",lG.reserved,""),sq.eof=new oq("EOF",lG.token,""),sq.reserved={asm:new oq("asm",lG.reserved,"asm"),bf16:new oq("bf16",lG.reserved,"bf16"),do:new oq("do",lG.reserved,"do"),enum:new oq("enum",lG.reserved,"enum"),f16:new oq("f16",lG.reserved,"f16"),f64:new oq("f64",lG.reserved,"f64"),handle:new oq("handle",lG.reserved,"handle"),i8:new oq("i8",lG.reserved,"i8"),i16:new oq("i16",lG.reserved,"i16"),i64:new oq("i64",lG.reserved,"i64"),mat:new oq("mat",lG.reserved,"mat"),premerge:new oq("premerge",lG.reserved,"premerge"),regardless:new oq("regardless",lG.reserved,"regardless"),typedef:new oq("typedef",lG.reserved,"typedef"),u8:new oq("u8",lG.reserved,"u8"),u16:new oq("u16",lG.reserved,"u16"),u64:new oq("u64",lG.reserved,"u64"),unless:new oq("unless",lG.reserved,"unless"),using:new oq("using",lG.reserved,"using"),vec:new oq("vec",lG.reserved,"vec"),void:new oq("void",lG.reserved,"void")},sq.keywords={array:new oq("array",lG.keyword,"array"),atomic:new oq("atomic",lG.keyword,"atomic"),bool:new oq("bool",lG.keyword,"bool"),f32:new oq("f32",lG.keyword,"f32"),i32:new oq("i32",lG.keyword,"i32"),mat2x2:new oq("mat2x2",lG.keyword,"mat2x2"),mat2x3:new oq("mat2x3",lG.keyword,"mat2x3"),mat2x4:new oq("mat2x4",lG.keyword,"mat2x4"),mat3x2:new oq("mat3x2",lG.keyword,"mat3x2"),mat3x3:new oq("mat3x3",lG.keyword,"mat3x3"),mat3x4:new oq("mat3x4",lG.keyword,"mat3x4"),mat4x2:new oq("mat4x2",lG.keyword,"mat4x2"),mat4x3:new oq("mat4x3",lG.keyword,"mat4x3"),mat4x4:new oq("mat4x4",lG.keyword,"mat4x4"),ptr:new oq("ptr",lG.keyword,"ptr"),sampler:new oq("sampler",lG.keyword,"sampler"),sampler_comparison:new oq("sampler_comparison",lG.keyword,"sampler_comparison"),struct:new oq("struct",lG.keyword,"struct"),texture_1d:new oq("texture_1d",lG.keyword,"texture_1d"),texture_2d:new oq("texture_2d",lG.keyword,"texture_2d"),texture_2d_array:new oq("texture_2d_array",lG.keyword,"texture_2d_array"),texture_3d:new oq("texture_3d",lG.keyword,"texture_3d"),texture_cube:new oq("texture_cube",lG.keyword,"texture_cube"),texture_cube_array:new oq("texture_cube_array",lG.keyword,"texture_cube_array"),texture_multisampled_2d:new oq("texture_multisampled_2d",lG.keyword,"texture_multisampled_2d"),texture_storage_1d:new oq("texture_storage_1d",lG.keyword,"texture_storage_1d"),texture_storage_2d:new oq("texture_storage_2d",lG.keyword,"texture_storage_2d"),texture_storage_2d_array:new oq("texture_storage_2d_array",lG.keyword,"texture_storage_2d_array"),texture_storage_3d:new oq("texture_storage_3d",lG.keyword,"texture_storage_3d"),texture_depth_2d:new oq("texture_depth_2d",lG.keyword,"texture_depth_2d"),texture_depth_2d_array:new oq("texture_depth_2d_array",lG.keyword,"texture_depth_2d_array"),texture_depth_cube:new oq("texture_depth_cube",lG.keyword,"texture_depth_cube"),texture_depth_cube_array:new oq("texture_depth_cube_array",lG.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new oq("texture_depth_multisampled_2d",lG.keyword,"texture_depth_multisampled_2d"),texture_external:new oq("texture_external",lG.keyword,"texture_external"),u32:new oq("u32",lG.keyword,"u32"),vec2:new oq("vec2",lG.keyword,"vec2"),vec3:new oq("vec3",lG.keyword,"vec3"),vec4:new oq("vec4",lG.keyword,"vec4"),bitcast:new oq("bitcast",lG.keyword,"bitcast"),block:new oq("block",lG.keyword,"block"),break:new oq("break",lG.keyword,"break"),case:new oq("case",lG.keyword,"case"),continue:new oq("continue",lG.keyword,"continue"),continuing:new oq("continuing",lG.keyword,"continuing"),default:new oq("default",lG.keyword,"default"),diagnostic:new oq("diagnostic",lG.keyword,"diagnostic"),discard:new oq("discard",lG.keyword,"discard"),else:new oq("else",lG.keyword,"else"),enable:new oq("enable",lG.keyword,"enable"),fallthrough:new oq("fallthrough",lG.keyword,"fallthrough"),false:new oq("false",lG.keyword,"false"),fn:new oq("fn",lG.keyword,"fn"),for:new oq("for",lG.keyword,"for"),function:new oq("function",lG.keyword,"function"),if:new oq("if",lG.keyword,"if"),let:new oq("let",lG.keyword,"let"),const:new oq("const",lG.keyword,"const"),loop:new oq("loop",lG.keyword,"loop"),while:new oq("while",lG.keyword,"while"),private:new oq("private",lG.keyword,"private"),read:new oq("read",lG.keyword,"read"),read_write:new oq("read_write",lG.keyword,"read_write"),return:new oq("return",lG.keyword,"return"),requires:new oq("requires",lG.keyword,"requires"),storage:new oq("storage",lG.keyword,"storage"),switch:new oq("switch",lG.keyword,"switch"),true:new oq("true",lG.keyword,"true"),alias:new oq("alias",lG.keyword,"alias"),type:new oq("type",lG.keyword,"type"),uniform:new oq("uniform",lG.keyword,"uniform"),var:new oq("var",lG.keyword,"var"),override:new oq("override",lG.keyword,"override"),workgroup:new oq("workgroup",lG.keyword,"workgroup"),write:new oq("write",lG.keyword,"write"),r8unorm:new oq("r8unorm",lG.keyword,"r8unorm"),r8snorm:new oq("r8snorm",lG.keyword,"r8snorm"),r8uint:new oq("r8uint",lG.keyword,"r8uint"),r8sint:new oq("r8sint",lG.keyword,"r8sint"),r16uint:new oq("r16uint",lG.keyword,"r16uint"),r16sint:new oq("r16sint",lG.keyword,"r16sint"),r16float:new oq("r16float",lG.keyword,"r16float"),rg8unorm:new oq("rg8unorm",lG.keyword,"rg8unorm"),rg8snorm:new oq("rg8snorm",lG.keyword,"rg8snorm"),rg8uint:new oq("rg8uint",lG.keyword,"rg8uint"),rg8sint:new oq("rg8sint",lG.keyword,"rg8sint"),r32uint:new oq("r32uint",lG.keyword,"r32uint"),r32sint:new oq("r32sint",lG.keyword,"r32sint"),r32float:new oq("r32float",lG.keyword,"r32float"),rg16uint:new oq("rg16uint",lG.keyword,"rg16uint"),rg16sint:new oq("rg16sint",lG.keyword,"rg16sint"),rg16float:new oq("rg16float",lG.keyword,"rg16float"),rgba8unorm:new oq("rgba8unorm",lG.keyword,"rgba8unorm"),rgba8unorm_srgb:new oq("rgba8unorm_srgb",lG.keyword,"rgba8unorm_srgb"),rgba8snorm:new oq("rgba8snorm",lG.keyword,"rgba8snorm"),rgba8uint:new oq("rgba8uint",lG.keyword,"rgba8uint"),rgba8sint:new oq("rgba8sint",lG.keyword,"rgba8sint"),bgra8unorm:new oq("bgra8unorm",lG.keyword,"bgra8unorm"),bgra8unorm_srgb:new oq("bgra8unorm_srgb",lG.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new oq("rgb10a2unorm",lG.keyword,"rgb10a2unorm"),rg11b10float:new oq("rg11b10float",lG.keyword,"rg11b10float"),rg32uint:new oq("rg32uint",lG.keyword,"rg32uint"),rg32sint:new oq("rg32sint",lG.keyword,"rg32sint"),rg32float:new oq("rg32float",lG.keyword,"rg32float"),rgba16uint:new oq("rgba16uint",lG.keyword,"rgba16uint"),rgba16sint:new oq("rgba16sint",lG.keyword,"rgba16sint"),rgba16float:new oq("rgba16float",lG.keyword,"rgba16float"),rgba32uint:new oq("rgba32uint",lG.keyword,"rgba32uint"),rgba32sint:new oq("rgba32sint",lG.keyword,"rgba32sint"),rgba32float:new oq("rgba32float",lG.keyword,"rgba32float"),static_assert:new oq("static_assert",lG.keyword,"static_assert")},sq.tokens={decimal_float_literal:new oq("decimal_float_literal",lG.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new oq("hex_float_literal",lG.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new oq("int_literal",lG.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new oq("uint_literal",lG.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new oq("name",lG.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new oq("ident",lG.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new oq("and",lG.token,"&"),and_and:new oq("and_and",lG.token,"&&"),arrow:new oq("arrow ",lG.token,"->"),attr:new oq("attr",lG.token,"@"),forward_slash:new oq("forward_slash",lG.token,"/"),bang:new oq("bang",lG.token,"!"),bracket_left:new oq("bracket_left",lG.token,"["),bracket_right:new oq("bracket_right",lG.token,"]"),brace_left:new oq("brace_left",lG.token,"{"),brace_right:new oq("brace_right",lG.token,"}"),colon:new oq("colon",lG.token,":"),comma:new oq("comma",lG.token,","),equal:new oq("equal",lG.token,"="),equal_equal:new oq("equal_equal",lG.token,"=="),not_equal:new oq("not_equal",lG.token,"!="),greater_than:new oq("greater_than",lG.token,">"),greater_than_equal:new oq("greater_than_equal",lG.token,">="),shift_right:new oq("shift_right",lG.token,">>"),less_than:new oq("less_than",lG.token,"<"),less_than_equal:new oq("less_than_equal",lG.token,"<="),shift_left:new oq("shift_left",lG.token,"<<"),modulo:new oq("modulo",lG.token,"%"),minus:new oq("minus",lG.token,"-"),minus_minus:new oq("minus_minus",lG.token,"--"),period:new oq("period",lG.token,"."),plus:new oq("plus",lG.token,"+"),plus_plus:new oq("plus_plus",lG.token,"++"),or:new oq("or",lG.token,"|"),or_or:new oq("or_or",lG.token,"||"),paren_left:new oq("paren_left",lG.token,"("),paren_right:new oq("paren_right",lG.token,")"),semicolon:new oq("semicolon",lG.token,";"),star:new oq("star",lG.token,"*"),tilde:new oq("tilde",lG.token,"~"),underscore:new oq("underscore",lG.token,"_"),xor:new oq("xor",lG.token,"^"),plus_equal:new oq("plus_equal",lG.token,"+="),minus_equal:new oq("minus_equal",lG.token,"-="),times_equal:new oq("times_equal",lG.token,"*="),division_equal:new oq("division_equal",lG.token,"/="),modulo_equal:new oq("modulo_equal",lG.token,"%="),and_equal:new oq("and_equal",lG.token,"&="),or_equal:new oq("or_equal",lG.token,"|="),xor_equal:new oq("xor_equal",lG.token,"^="),shift_right_equal:new oq("shift_right_equal",lG.token,">>="),shift_left_equal:new oq("shift_left_equal",lG.token,"<<=")},sq.simpleTokens={"@":aG.tokens.attr,"{":aG.tokens.brace_left,"}":aG.tokens.brace_right,":":aG.tokens.colon,",":aG.tokens.comma,"(":aG.tokens.paren_left,")":aG.tokens.paren_right,";":aG.tokens.semicolon},sq.literalTokens={"&":aG.tokens.and,"&&":aG.tokens.and_and,"->":aG.tokens.arrow,"/":aG.tokens.forward_slash,"!":aG.tokens.bang,"[":aG.tokens.bracket_left,"]":aG.tokens.bracket_right,"=":aG.tokens.equal,"==":aG.tokens.equal_equal,"!=":aG.tokens.not_equal,">":aG.tokens.greater_than,">=":aG.tokens.greater_than_equal,">>":aG.tokens.shift_right,"<":aG.tokens.less_than,"<=":aG.tokens.less_than_equal,"<<":aG.tokens.shift_left,"%":aG.tokens.modulo,"-":aG.tokens.minus,"--":aG.tokens.minus_minus,".":aG.tokens.period,"+":aG.tokens.plus,"++":aG.tokens.plus_plus,"|":aG.tokens.or,"||":aG.tokens.or_or,"*":aG.tokens.star,"~":aG.tokens.tilde,_:aG.tokens.underscore,"^":aG.tokens.xor,"+=":aG.tokens.plus_equal,"-=":aG.tokens.minus_equal,"*=":aG.tokens.times_equal,"/=":aG.tokens.division_equal,"%=":aG.tokens.modulo_equal,"&=":aG.tokens.and_equal,"|=":aG.tokens.or_equal,"^=":aG.tokens.xor_equal,">>=":aG.tokens.shift_right_equal,"<<=":aG.tokens.shift_left_equal},sq.regexTokens={decimal_float_literal:aG.tokens.decimal_float_literal,hex_float_literal:aG.tokens.hex_float_literal,int_literal:aG.tokens.int_literal,uint_literal:aG.tokens.uint_literal,ident:aG.tokens.ident},sq.storage_class=[aG.keywords.function,aG.keywords.private,aG.keywords.workgroup,aG.keywords.uniform,aG.keywords.storage],sq.access_mode=[aG.keywords.read,aG.keywords.write,aG.keywords.read_write],sq.sampler_type=[aG.keywords.sampler,aG.keywords.sampler_comparison],sq.sampled_texture_type=[aG.keywords.texture_1d,aG.keywords.texture_2d,aG.keywords.texture_2d_array,aG.keywords.texture_3d,aG.keywords.texture_cube,aG.keywords.texture_cube_array],sq.multisampled_texture_type=[aG.keywords.texture_multisampled_2d],sq.storage_texture_type=[aG.keywords.texture_storage_1d,aG.keywords.texture_storage_2d,aG.keywords.texture_storage_2d_array,aG.keywords.texture_storage_3d],sq.depth_texture_type=[aG.keywords.texture_depth_2d,aG.keywords.texture_depth_2d_array,aG.keywords.texture_depth_cube,aG.keywords.texture_depth_cube_array,aG.keywords.texture_depth_multisampled_2d],sq.texture_external_type=[aG.keywords.texture_external],sq.any_texture_type=[...aG.sampled_texture_type,...aG.multisampled_texture_type,...aG.storage_texture_type,...aG.depth_texture_type,...aG.texture_external_type],sq.texel_format=[aG.keywords.r8unorm,aG.keywords.r8snorm,aG.keywords.r8uint,aG.keywords.r8sint,aG.keywords.r16uint,aG.keywords.r16sint,aG.keywords.r16float,aG.keywords.rg8unorm,aG.keywords.rg8snorm,aG.keywords.rg8uint,aG.keywords.rg8sint,aG.keywords.r32uint,aG.keywords.r32sint,aG.keywords.r32float,aG.keywords.rg16uint,aG.keywords.rg16sint,aG.keywords.rg16float,aG.keywords.rgba8unorm,aG.keywords.rgba8unorm_srgb,aG.keywords.rgba8snorm,aG.keywords.rgba8uint,aG.keywords.rgba8sint,aG.keywords.bgra8unorm,aG.keywords.bgra8unorm_srgb,aG.keywords.rgb10a2unorm,aG.keywords.rg11b10float,aG.keywords.rg32uint,aG.keywords.rg32sint,aG.keywords.rg32float,aG.keywords.rgba16uint,aG.keywords.rgba16sint,aG.keywords.rgba16float,aG.keywords.rgba32uint,aG.keywords.rgba32sint,aG.keywords.rgba32float],sq.const_literal=[aG.tokens.int_literal,aG.tokens.uint_literal,aG.tokens.decimal_float_literal,aG.tokens.hex_float_literal,aG.keywords.true,aG.keywords.false],sq.literal_or_ident=[aG.tokens.ident,aG.tokens.int_literal,aG.tokens.uint_literal,aG.tokens.decimal_float_literal,aG.tokens.hex_float_literal,aG.tokens.name],sq.element_count_expression=[aG.tokens.int_literal,aG.tokens.uint_literal,aG.tokens.ident],sq.template_types=[aG.keywords.vec2,aG.keywords.vec3,aG.keywords.vec4,aG.keywords.mat2x2,aG.keywords.mat2x3,aG.keywords.mat2x4,aG.keywords.mat3x2,aG.keywords.mat3x3,aG.keywords.mat3x4,aG.keywords.mat4x2,aG.keywords.mat4x3,aG.keywords.mat4x4,aG.keywords.atomic,aG.keywords.bitcast,...aG.any_texture_type],sq.attribute_name=[aG.tokens.ident,aG.keywords.block,aG.keywords.diagnostic],sq.assignment_operators=[aG.tokens.equal,aG.tokens.plus_equal,aG.tokens.minus_equal,aG.tokens.times_equal,aG.tokens.division_equal,aG.tokens.modulo_equal,aG.tokens.and_equal,aG.tokens.or_equal,aG.tokens.xor_equal,aG.tokens.shift_right_equal,aG.tokens.shift_left_equal],sq.increment_operators=[aG.tokens.plus_plus,aG.tokens.minus_minus];class aq{constructor(e,t,n,i,r){this.type=e,this.lexeme=t,this.line=n,this.start=i,this.end=r}toString(){return this.lexeme}isTemplateType(){return-1!=sq.template_types.indexOf(this.type)}isArrayType(){return this.type==sq.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class lq{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new aq(sq.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if("\n"==e)return this._line++,!0;if(this._isWhitespace(e))return!0;if("/"==e){if("/"==this._peekAhead()){for(;"\n"!=e;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let t=1;for(;t>0;){if(this._isAtEnd())return!0;if(e=this._advance(),"\n"==e)this._line++;else if("*"==e){if("/"==this._peekAhead()&&(this._advance(),t--,0==t))return!0}else"/"==e&&"*"==this._peekAhead()&&(this._advance(),t++)}return!0}}const t=sq.simpleTokens[e];if(t)return this._addToken(t),!0;let n=sq.none;const i=this._isAlpha(e),r="_"===e;if(this._isAlphaNumeric(e)){let t=this._peekAhead();for(;this._isAlphaNumeric(t);)e+=this._advance(),t=this._peekAhead()}if(i){const t=sq.keywords[e];if(t)return this._addToken(t),!0}if(i||r)return this._addToken(sq.tokens.ident),!0;for(;;){let t=this._findType(e);const i=this._peekAhead();if("-"==e&&this._tokens.length>0){if("="==i)return this._current++,e+=i,this._addToken(sq.tokens.minus_equal),!0;if("-"==i)return this._current++,e+=i,this._addToken(sq.tokens.minus_minus),!0;const n=this._tokens.length-1;if((-1!=sq.literal_or_ident.indexOf(this._tokens[n].type)||this._tokens[n].type==sq.tokens.paren_right)&&">"!=i)return this._addToken(t),!0}if(">"==e&&(">"==i||"="==i)){let e=!1,n=this._tokens.length-1;for(let t=0;t<5&&n>=0&&-1===sq.assignment_operators.indexOf(this._tokens[n].type);++t,--n)if(this._tokens[n].type===sq.tokens.less_than){n>0&&this._tokens[n-1].isArrayOrTemplateType()&&(e=!0);break}if(e)return this._addToken(t),!0}if(t===sq.none){let i=e,r=0;const o=2;for(let e=0;e<o;++e)if(i+=this._peekAhead(e),t=this._findType(i),t!==sq.none){r=e;break}if(t===sq.none)return n!==sq.none&&(this._current--,this._addToken(n),!0);e=i,this._current+=r+1}if(n=t,this._isAtEnd())break;e+=this._advance()}return n!==sq.none&&(this._addToken(n),!0)}_findType(e){for(const t in sq.regexTokens){const n=sq.regexTokens[t];if(this._match(e,n.rule))return n}return sq.literalTokens[e]||sq.none}_match(e,t){const n=t.exec(e);return n&&0==n.index&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&"_"!==e&&"."!==e&&"("!==e&&")"!==e&&"["!==e&&"]"!==e&&"{"!==e&&"}"!==e&&","!==e&&";"!==e&&":"!==e&&"="!==e&&"!"!==e&&"<"!==e&&">"!==e&&"+"!==e&&"-"!==e&&"*"!==e&&"/"!==e&&"%"!==e&&"&"!==e&&"|"!==e&&"^"!==e&&"~"!==e&&"@"!==e&&"#"!==e&&"?"!==e&&"'"!==e&&"`"!==e&&'"'!==e&&"\\"!==e&&"\n"!==e&&"\r"!==e&&"\t"!==e&&"\0"!==e}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||"_"===e}_isWhitespace(e){return" "==e||"\t"==e||"\r"==e}_advance(e=0){let t=this._source[this._current];return e=e||0,e++,this._current+=e,t}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const t=this._source.substring(this._start,this._current);this._tokens.push(new aq(e,t,this._line,this._start,this._current))}}function cq(e){return Array.isArray(e)||(null==e?void 0:e.buffer)instanceof ArrayBuffer}const uq=new Float32Array(1),dq=new Uint32Array(uq.buffer),hq=new Uint32Array(uq.buffer),fq=new Int32Array(1),pq=new Float32Array(fq.buffer),mq=new Uint32Array(fq.buffer),gq=new Uint32Array(1),_q=new Float32Array(gq.buffer),yq=new Int32Array(gq.buffer);function vq(e,t,n){if(t===n)return e;if("f32"===t){if("i32"===n||"x32"===n)return uq[0]=e,dq[0];if("u32"===n)return uq[0]=e,hq[0]}else if("i32"===t||"x32"===t){if("f32"===n)return fq[0]=e,pq[0];if("u32"===n)return fq[0]=e,mq[0]}else if("u32"===t){if("f32"===n)return gq[0]=e,_q[0];if("i32"===n||"x32"===n)return gq[0]=e,yq[0]}return e}class bq{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class xq{constructor(e,t){this.align=e,this.size=t}}class wq{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new O$,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return"texture_storage_1d"==e.name||"texture_storage_2d"==e.name||"texture_storage_2d_array"==e.name||"texture_storage_3d"==e.name}updateAST(e){for(const t of e)t instanceof K$&&this._functions.set(t.name,new bq(t));for(const t of e)if(t instanceof CG){const e=this.getTypeInfo(t,null);e instanceof x$&&this.structs.push(e)}for(const t of e)if(t instanceof vG)this.aliases.push(this._getAliasInfo(t));else{if(t instanceof nG){const e=t,n=this._getAttributeNum(e.attributes,"id",0),i=null!=e.type?this.getTypeInfo(e.type,e.attributes):null;this.overrides.push(new P$(e.name,i,e.attributes,n));continue}if(this._isUniformVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this.getTypeInfo(e.type,e.attributes),o=new T$(e.name,r,n,i,e.attributes,C$.Uniform,e.access);o.access||(o.access="read"),this.uniforms.push(o);continue}if(this._isStorageVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this.getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(r),s=new T$(e.name,r,n,i,e.attributes,o?C$.StorageTexture:C$.Storage,e.access);s.access||(s.access="read"),this.storage.push(s);continue}if(this._isTextureVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this.getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(r),s=new T$(e.name,r,n,i,e.attributes,o?C$.StorageTexture:C$.Texture,e.access);s.access||(s.access="read"),o?this.storage.push(s):this.textures.push(s);continue}if(this._isSamplerVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this.getTypeInfo(e.type,e.attributes),o=new T$(e.name,r,n,i,e.attributes,C$.Sampler,e.access);this.samplers.push(o);continue}}for(const t of e)if(t instanceof K$){const e=this._getAttribute(t,"vertex"),n=this._getAttribute(t,"fragment"),i=this._getAttribute(t,"compute"),r=e||n||i,o=new R$(t.name,null==r?void 0:r.name,t.attributes);o.attributes=t.attributes,o.startLine=t.startLine,o.endLine=t.endLine,this.functions.push(o),this._functions.get(t.name).info=o,r&&(this._functions.get(t.name).inUse=!0,o.inUse=!0,o.resources=this._findResources(t,!!r),o.inputs=this._getInputs(t.args),o.outputs=this._getOutputs(t.returnType),this.entry[r.name].push(o)),o.arguments=t.args.map(e=>new L$(e.name,this.getTypeInfo(e.type,e.attributes),e.attributes)),o.returnType=t.returnType?this.getTypeInfo(t.returnType,t.attributes):null;continue}for(const t of this._functions.values())t.info&&(t.info.inUse=t.inUse,this._addCalls(t.node,t.info.calls));for(const t of this._functions.values())t.node.search(e=>{var n,i,r;if(e instanceof XG){if(e.value)if(cq(e.value))for(const o of e.value)for(const e of this.overrides)o===e.name&&(null===(n=t.info)||void 0===n||n.overrides.push(e));else for(const o of this.overrides)e.value===o.name&&(null===(i=t.info)||void 0===i||i.overrides.push(o))}else if(e instanceof MG)for(const o of this.overrides)e.name===o.name&&(null===(r=t.info)||void 0===r||r.overrides.push(o))});for(const t of this.uniforms)this._markStructsInUse(t.type);for(const t of this.storage)this._markStructsInUse(t.type)}getFunctionInfo(e){for(const t of this.functions)if(t.name==e)return t;return null}getStructInfo(e){for(const t of this.structs)if(t.name==e)return t;return null}getOverrideInfo(e){for(const t of this.overrides)if(t.name==e)return t;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const t of e.members)this._markStructsInUse(t.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const t=this._getAlias(e.name);t&&this._markStructsInUse(t)}}_addCalls(e,t){var n;for(const i of e.calls){const e=null===(n=this._functions.get(i.name))||void 0===n?void 0:n.info;e&&t.add(e)}}findResource(e,t,n){if(n){for(const i of this.entry.compute)if(i.name===n)for(const n of i.resources)if(n.group==e&&n.binding==t)return n;for(const i of this.entry.vertex)if(i.name===n)for(const n of i.resources)if(n.group==e&&n.binding==t)return n;for(const i of this.entry.fragment)if(i.name===n)for(const n of i.resources)if(n.group==e&&n.binding==t)return n}for(const i of this.uniforms)if(i.group==e&&i.binding==t)return i;for(const i of this.storage)if(i.group==e&&i.binding==t)return i;for(const i of this.textures)if(i.group==e&&i.binding==t)return i;for(const i of this.samplers)if(i.group==e&&i.binding==t)return i;return null}_findResource(e){for(const t of this.uniforms)if(t.name==e)return t;for(const t of this.storage)if(t.name==e)return t;for(const t of this.textures)if(t.name==e)return t;for(const t of this.samplers)if(t.name==e)return t;return null}_markStructsFromAST(e){const t=this.getTypeInfo(e,null);this._markStructsInUse(t)}_findResources(e,t){const n=[],i=this,r=[];return e.search(o=>{if(o instanceof G$)r.push({});else if(o instanceof q$)r.pop();else if(o instanceof tG){const e=o;t&&null!==e.type&&this._markStructsFromAST(e.type),r.length>0&&(r[r.length-1][e.name]=e)}else if(o instanceof RG){const e=o;t&&null!==e.type&&this._markStructsFromAST(e.type)}else if(o instanceof iG){const e=o;t&&null!==e.type&&this._markStructsFromAST(e.type),r.length>0&&(r[r.length-1][e.name]=e)}else if(o instanceof MG){const e=o;if(r.length>0&&r[r.length-1][e.name])return;const t=i._findResource(e.name);t&&n.push(t)}else if(o instanceof OG){const r=o,s=i._functions.get(r.name);s&&(t&&(s.inUse=!0),e.calls.add(s.node),null===s.resources&&(s.resources=i._findResources(s.node,t)),n.push(...s.resources))}else if(o instanceof dG){const r=o,s=i._functions.get(r.name);s&&(t&&(s.inUse=!0),e.calls.add(s.node),null===s.resources&&(s.resources=i._findResources(s.node,t)),n.push(...s.resources))}}),[...new Map(n.map(e=>[e.name,e])).values()]}getBindGroups(){const e=[];function t(t,n){t>=e.length&&(e.length=t+1),void 0===e[t]&&(e[t]=[]),n>=e[t].length&&(e[t].length=n+1)}for(const n of this.uniforms)t(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.storage)t(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.textures)t(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.samplers)t(n.group,n.binding),e[n.group][n.binding]=n;return e}_getOutputs(e,t=void 0){if(void 0===t&&(t=[]),e instanceof CG)this._getStructOutputs(e,t);else{const n=this._getOutputInfo(e);null!==n&&t.push(n)}return t}_getStructOutputs(e,t){for(const n of e.members)if(n.type instanceof CG)this._getStructOutputs(n.type,t);else{const e=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(null!==e){const i=this.getTypeInfo(n.type,n.type.attributes),r=this._parseInt(e.value),o=new I$(n.name,i,e.name,r);t.push(o)}}}_getOutputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this.getTypeInfo(e,e.attributes),i=this._parseInt(t.value);return new I$("",n,t.name,i)}return null}_getInputs(e,t=void 0){void 0===t&&(t=[]);for(const n of e)if(n.type instanceof CG)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}return t}_getStructInputs(e,t){for(const n of e.members)if(n.type instanceof CG)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}}_getInputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getAttribute(e,"interpolation"),i=this.getTypeInfo(e.type,e.attributes),r=this._parseInt(t.value),o=new A$(e.name,i,t.name,r);return null!==n&&(o.interpolation=this._parseString(n.value)),o}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const t=parseInt(e);return isNaN(t)?e:t}_getAlias(e){for(const t of this.aliases)if(t.name==e)return t.type;return null}_getAliasInfo(e){return new k$(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const t of this.structs)if(t.name==e)return t;for(const t of this.aliases)if(t.name==e)return t.type;return null}getTypeInfo(e,t=null){if(this._types.has(e))return this._types.get(e);if(e instanceof kG){const n=e.type?this.getTypeInfo(e.type,e.attributes):null,i=new S$(e.name,n,t);return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof AG){const n=e,i=n.format?this.getTypeInfo(n.format,n.attributes):null,r=new w$(n.name,t);return r.format=i,r.count=n.count,this._types.set(e,r),this._updateTypeInfo(r),r}if(e instanceof CG){const n=e,i=new x$(n.name,t);i.startLine=n.startLine,i.endLine=n.endLine;for(const e of n.members){const t=this.getTypeInfo(e.type,e.attributes);i.members.push(new b$(e.name,t,e.attributes))}return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof IG){const n=e,i=n.format instanceof SG,r=n.format?i?this.getTypeInfo(n.format,null):new v$(n.format,null):null,o=new E$(n.name,r,t,n.access);return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof TG){const n=e,i=n.format?this.getTypeInfo(n.format,null):null,r=new E$(n.name,i,t,n.access);return this._types.set(e,r),this._updateTypeInfo(r),r}const n=new v$(e.name,t);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var t,n,i;const r=this._getTypeSize(e);if(e.size=null!==(t=null==r?void 0:r.size)&&void 0!==t?t:0,e instanceof w$&&e.format){const t=this._getTypeSize(e.format);e.stride=Math.max(null!==(n=null==t?void 0:t.size)&&void 0!==n?n:0,null!==(i=null==t?void 0:t.align)&&void 0!==i?i:0),this._updateTypeInfo(e.format)}e instanceof S$&&this._updateTypeInfo(e.format),e instanceof x$&&this._updateStructInfo(e)}_updateStructInfo(e){var t;let n=0,i=0,r=0,o=0;for(let s=0,a=e.members.length;s<a;++s){const a=e.members[s],l=this._getTypeSize(a);if(!l)continue;null!==(t=this._getAlias(a.type.name))&&void 0!==t||a.type;const c=l.align,u=l.size;n=this._roundUp(c,n+i),i=u,r=n,o=Math.max(o,c),a.offset=n,a.size=u,this._updateTypeInfo(a.type)}e.size=this._roundUp(o,r+i),e.align=o}_getTypeSize(e){var t,n;if(null==e)return null;const i=this._getAttributeNum(e.attributes,"size",0),r=this._getAttributeNum(e.attributes,"align",0);if(e instanceof b$&&(e=e.type),e instanceof v$){const t=this._getAlias(e.name);null!==t&&(e=t)}{const n=wq._typeInfo[e.name];if(void 0!==n){const o="f16"===(null===(t=e.format)||void 0===t?void 0:t.name)?2:1;return new xq(Math.max(r,n.align/o),Math.max(i,n.size/o))}}{const t=wq._typeInfo[e.name.substring(0,e.name.length-1)];if(t){const n="h"===e.name[e.name.length-1]?2:1;return new xq(Math.max(r,t.align/n),Math.max(i,t.size/n))}}if(e instanceof w$){let t=e,o=8,s=8;const a=this._getTypeSize(t.format);return null!==a&&(s=a.size,o=a.align),s=t.count*this._getAttributeNum(null!==(n=null==e?void 0:e.attributes)&&void 0!==n?n:null,"stride",this._roundUp(o,s)),i&&(s=i),new xq(Math.max(r,o),Math.max(i,s))}if(e instanceof x$){let t=0,n=0,o=0,s=0,a=0;for(const i of e.members){const e=this._getTypeSize(i.type);null!==e&&(t=Math.max(e.align,t),o=this._roundUp(e.align,o+s),s=e.size,a=o)}return n=this._roundUp(t,a+s),new xq(Math.max(r,t),Math.max(i,n))}return null}_isUniformVar(e){return e instanceof tG&&"uniform"==e.storage}_isStorageVar(e){return e instanceof tG&&"storage"==e.storage}_isTextureVar(e){return e instanceof tG&&null!==e.type&&-1!=wq._textureTypes.indexOf(e.type.name)}_isSamplerVar(e){return e instanceof tG&&null!==e.type&&-1!=wq._samplerTypes.indexOf(e.type.name)}_getAttribute(e,t){const n=e;if(!n||!n.attributes)return null;const i=n.attributes;for(let r of i)if(r.name==t)return r;return null}_getAttributeNum(e,t,n){if(null===e)return n;for(let i of e)if(i.name==t){let e=null!==i&&null!==i.value?i.value:n;return e instanceof Array&&(e=e[0]),"number"==typeof e?e:"string"==typeof e?parseInt(e):n}return n}_roundUp(e,t){return Math.ceil(t/e)*e}}wq._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},wq._textureTypes=sq.any_texture_type.map(e=>e.name),wq._samplerTypes=sq.sampler_type.map(e=>e.name);let Sq=0;class Eq{constructor(e,t,n){this.id=Sq++,this.name=e,this.value=t,this.node=n}clone(){return new Eq(this.name,this.value,this.node)}}class Cq{constructor(e){this.id=Sq++,this.name=e.name,this.node=e}clone(){return new Cq(this.node)}}class Tq{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=Sq++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var t;return this.variables.has(e)?null!==(t=this.variables.get(e))&&void 0!==t?t:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var t;return this.functions.has(e)?null!==(t=this.functions.get(e))&&void 0!==t?t:null:this.parent?this.parent.getFunction(e):null}createVariable(e,t,n){this.variables.set(e,new Eq(e,t,n??null))}setVariable(e,t,n){const i=this.getVariable(e);null!==i?i.value=t:this.createVariable(e,t,n)}getVariableValue(e){var t;const n=this.getVariable(e);return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:null}clone(){return new Tq(this)}}class kq{evalExpression(e,t){return null}getTypeInfo(e){return null}getVariableName(e,t){return""}}class Aq{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,t){const n=this.exec.evalExpression(e.args[0],t);let i=!0;if(n instanceof tq)return n.data.forEach(e=>{e||(i=!1)}),new JG(i?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq){const e=n.data.some(e=>e);return new JG(e?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,t){const n=this.exec.evalExpression(e.args[2],t);if(!(n instanceof JG))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return n.value?this.exec.evalExpression(e.args[1],t):this.exec.evalExpression(e.args[0],t)}ArrayLength(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.evalExpression(n,t);if(i instanceof iq&&0===i.typeInfo.size){const e=i.typeInfo,t=i.buffer.byteLength/e.stride;return new JG(t,this.getTypeInfo("u32"))}return new JG(i.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.abs(e)),n.typeInfo);const i=n;return new JG(Math.abs(i.value),i.typeInfo)}Acos(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.acos(e)),n.typeInfo);const i=n;return new JG(Math.acos(i.value),n.typeInfo)}Acosh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.acosh(e)),n.typeInfo);const i=n;return new JG(Math.acosh(i.value),n.typeInfo)}Asin(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.asin(e)),n.typeInfo);const i=n;return new JG(Math.asin(i.value),n.typeInfo)}Asinh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.asinh(e)),n.typeInfo);const i=n;return new JG(Math.asinh(i.value),n.typeInfo)}Atan(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.atan(e)),n.typeInfo);const i=n;return new JG(Math.atan(i.value),n.typeInfo)}Atanh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.atanh(e)),n.typeInfo);const i=n;return new JG(Math.atanh(i.value),n.typeInfo)}Atan2(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq)return new tq(n.data.map((e,t)=>Math.atan2(e,i.data[t])),n.typeInfo);const r=n,o=i;return new JG(Math.atan2(r.value,o.value),n.typeInfo)}Ceil(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.ceil(e)),n.typeInfo);const i=n;return new JG(Math.ceil(i.value),n.typeInfo)}_clamp(e,t,n){return Math.min(Math.max(e,t),n)}Clamp(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof tq&&i instanceof tq&&r instanceof tq)return new tq(n.data.map((e,t)=>this._clamp(e,i.data[t],r.data[t])),n.typeInfo);const o=n,s=i,a=r;return new JG(this._clamp(o.value,s.value,a.value),n.typeInfo)}Cos(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.cos(e)),n.typeInfo);const i=n;return new JG(Math.cos(i.value),n.typeInfo)}Cosh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.cosh(e)),n.typeInfo);const i=n;return new JG(Math.cos(i.value),n.typeInfo)}CountLeadingZeros(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.clz32(e)),n.typeInfo);const i=n;return new JG(Math.clz32(i.value),n.typeInfo)}_countOneBits(e){let t=0;for(;0!==e;)1&e&&t++,e>>=1;return t}CountOneBits(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>this._countOneBits(e)),n.typeInfo);const i=n;return new JG(this._countOneBits(i.value),n.typeInfo)}_countTrailingZeros(e){if(0===e)return 32;let t=0;for(;!(1&e);)e>>=1,t++;return t}CountTrailingZeros(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>this._countTrailingZeros(e)),n.typeInfo);const i=n;return new JG(this._countTrailingZeros(i.value),n.typeInfo)}Cross(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq){if(3!==n.data.length||3!==i.data.length)return null;const e=n.data,t=i.data;return new tq([e[1]*t[2]-t[1]*e[2],e[2]*t[0]-t[2]*e[0],e[0]*t[1]-t[0]*e[1]],n.typeInfo)}return null}Degrees(e,t){const n=this.exec.evalExpression(e.args[0],t),i=180/Math.PI;return n instanceof tq?new tq(n.data.map(e=>e*i),n.typeInfo):new JG(n.value*i,this.getTypeInfo("f32"))}Determinant(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof nq){const e=n.data,t=n.typeInfo.getTypeName(),i=t.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if("mat2x2"===t||"mat2x2f"===t||"mat2x2h"===t)return new JG(e[0]*e[3]-e[1]*e[2],i);if("mat2x3"===t||"mat2x3f"===t||"mat2x3h"===t)return new JG(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]),i);if("mat2x4"===t||"mat2x4f"===t||"mat2x4h"===t);else if("mat3x2"===t||"mat3x2f"===t||"mat3x2h"===t);else if("mat3x3"===t||"mat3x3f"===t||"mat3x3h"===t)return new JG(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]),i)}return null}Distance(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq){let e=0;for(let t=0;t<n.data.length;++t)e+=(n.data[t]-i.data[t])*(n.data[t]-i.data[t]);return new JG(Math.sqrt(e),this.getTypeInfo("f32"))}const r=n,o=i;return new JG(Math.abs(r.value-o.value),n.typeInfo)}_dot(e,t){let n=0;for(let i=0;i<e.length;++i)n+=t[i]*e[i];return n}Dot(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);return n instanceof tq&&i instanceof tq?new JG(this._dot(n.data,i.data),this.getTypeInfo("f32")):null}Dot4U8Packed(e,t){return null}Dot4I8Packed(e,t){return null}Exp(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.exp(e)),n.typeInfo);const i=n;return new JG(Math.exp(i.value),n.typeInfo)}Exp2(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.pow(2,e)),n.typeInfo);const i=n;return new JG(Math.pow(2,i.value),n.typeInfo)}ExtractBits(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if("u32"!==i.typeInfo.name&&"x32"!==i.typeInfo.name)return null;if("u32"!==r.typeInfo.name&&"x32"!==r.typeInfo.name)return null;const o=i.value,s=r.value;if(n instanceof tq)return new tq(n.data.map(e=>e>>o&(1<<s)-1),n.typeInfo);if("i32"!==n.typeInfo.name&&"x32"!==n.typeInfo.name)return null;const a=n.value;return new JG(a>>o&(1<<s)-1,this.getTypeInfo("i32"))}FaceForward(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof tq&&i instanceof tq&&r instanceof tq){const e=this._dot(i.data,r.data);return new tq(e<0?Array.from(n.data):n.data.map(e=>-e),n.typeInfo)}return null}_firstLeadingBit(e){return 0===e?-1:31-Math.clz32(e)}FirstLeadingBit(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>this._firstLeadingBit(e)),n.typeInfo);const i=n;return new JG(this._firstLeadingBit(i.value),n.typeInfo)}_firstTrailingBit(e){return 0===e?-1:Math.log2(e&-e)}FirstTrailingBit(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>this._firstTrailingBit(e)),n.typeInfo);const i=n;return new JG(this._firstTrailingBit(i.value),n.typeInfo)}Floor(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.floor(e)),n.typeInfo);const i=n;return new JG(Math.floor(i.value),n.typeInfo)}Fma(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof tq&&i instanceof tq&&r instanceof tq)return n.data.length!==i.data.length||n.data.length!==r.data.length?null:new tq(n.data.map((e,t)=>e*i.data[t]+r.data[t]),n.typeInfo);const o=n,s=i,a=r;return new JG(o.value*s.value+a.value,o.typeInfo)}Fract(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>e-Math.floor(e)),n.typeInfo);const i=n;return new JG(i.value-Math.floor(i.value),n.typeInfo)}Frexp(e,t){return null}InsertBits(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t),o=this.exec.evalExpression(e.args[3],t);if("u32"!==r.typeInfo.name&&"x32"!==r.typeInfo.name)return null;const s=r.value,a=(1<<o.value)-1<<s,l=~a;if(n instanceof tq&&i instanceof tq)return new tq(n.data.map((e,t)=>e&l|i.data[t]<<s&a),n.typeInfo);const c=n.value,u=i.value;return new JG(c&l|u<<s&a,n.typeInfo)}InverseSqrt(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>1/Math.sqrt(e)),n.typeInfo);const i=n;return new JG(1/Math.sqrt(i.value),n.typeInfo)}Ldexp(e,t){return null}Length(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq){let e=0;return n.data.forEach(t=>{e+=t*t}),new JG(Math.sqrt(e),this.getTypeInfo("f32"))}const i=n;return new JG(Math.abs(i.value),n.typeInfo)}Log(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.log(e)),n.typeInfo);const i=n;return new JG(Math.log(i.value),n.typeInfo)}Log2(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.log2(e)),n.typeInfo);const i=n;return new JG(Math.log2(i.value),n.typeInfo)}Max(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq)return new tq(n.data.map((e,t)=>Math.max(e,i.data[t])),n.typeInfo);const r=n,o=i;return new JG(Math.max(r.value,o.value),n.typeInfo)}Min(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq)return new tq(n.data.map((e,t)=>Math.min(e,i.data[t])),n.typeInfo);const r=n,o=i;return new JG(Math.min(r.value,o.value),n.typeInfo)}Mix(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof tq&&i instanceof tq&&r instanceof tq)return new tq(n.data.map((e,t)=>n.data[t]*(1-r.data[t])+i.data[t]*r.data[t]),n.typeInfo);const o=i,s=r;return new JG(n.value*(1-s.value)+o.value*s.value,n.typeInfo)}Modf(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq)return new tq(n.data.map((e,t)=>e%i.data[t]),n.typeInfo);const r=i;return new JG(n.value%r.value,n.typeInfo)}Normalize(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq){const i=this.Length(e,t).value;return new tq(n.data.map(e=>e/i),n.typeInfo)}return null}Pow(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq)return new tq(n.data.map((e,t)=>Math.pow(e,i.data[t])),n.typeInfo);const r=n,o=i;return new JG(Math.pow(r.value,o.value),n.typeInfo)}QuantizeToF16(e,t){const n=this.exec.evalExpression(e.args[0],t);return n instanceof tq?new tq(n.data.map(e=>e),n.typeInfo):new JG(n.value,n.typeInfo)}Radians(e,t){const n=this.exec.evalExpression(e.args[0],t);return n instanceof tq?new tq(n.data.map(e=>e*Math.PI/180),n.typeInfo):new JG(n.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,t){let n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(n instanceof tq&&i instanceof tq){const e=this._dot(n.data,i.data);return new tq(n.data.map((t,n)=>t-2*e*i.data[n]),n.typeInfo)}return null}Refract(e,t){let n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof tq&&i instanceof tq&&r instanceof JG){const e=this._dot(i.data,n.data);return new tq(n.data.map((t,n)=>{const o=1-r.value*r.value*(1-e*e);if(o<0)return 0;const s=Math.sqrt(o);return r.value*t-(r.value*e+s)*i.data[n]}),n.typeInfo)}return null}ReverseBits(e,t){return null}Round(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.round(e)),n.typeInfo);const i=n;return new JG(Math.round(i.value),n.typeInfo)}Saturate(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.min(Math.max(e,0),1)),n.typeInfo);const i=n;return new JG(Math.min(Math.max(i.value,0),1),n.typeInfo)}Sign(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.sign(e)),n.typeInfo);const i=n;return new JG(Math.sign(i.value),n.typeInfo)}Sin(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.sin(e)),n.typeInfo);const i=n;return new JG(Math.sin(i.value),n.typeInfo)}Sinh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.sinh(e)),n.typeInfo);const i=n;return new JG(Math.sinh(i.value),n.typeInfo)}_smoothstep(e,t,n){const i=Math.min(Math.max((n-e)/(t-e),0),1);return i*i*(3-2*i)}SmoothStep(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(r instanceof tq&&n instanceof tq&&i instanceof tq)return new tq(r.data.map((e,t)=>this._smoothstep(n.data[t],i.data[t],e)),r.typeInfo);const o=n,s=i,a=r;return new JG(this._smoothstep(o.value,s.value,a.value),r.typeInfo)}Sqrt(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.sqrt(e)),n.typeInfo);const i=n;return new JG(Math.sqrt(i.value),n.typeInfo)}Step(e,t){const n=this.exec.evalExpression(e.args[0],t),i=this.exec.evalExpression(e.args[1],t);if(i instanceof tq&&n instanceof tq)return new tq(i.data.map((e,t)=>e<n.data[t]?0:1),i.typeInfo);const r=n;return new JG(i.value<r.value?0:1,r.typeInfo)}Tan(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.tan(e)),n.typeInfo);const i=n;return new JG(Math.tan(i.value),n.typeInfo)}Tanh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.tanh(e)),n.typeInfo);const i=n;return new JG(Math.tanh(i.value),n.typeInfo)}_getTransposeType(e){const t=e.getTypeName();return"mat2x2f"===t||"mat2x2h"===t?e:"mat2x3f"===t?this.getTypeInfo("mat3x2f"):"mat2x3h"===t?this.getTypeInfo("mat3x2h"):"mat2x4f"===t?this.getTypeInfo("mat4x2f"):"mat2x4h"===t?this.getTypeInfo("mat4x2h"):"mat3x2f"===t?this.getTypeInfo("mat2x3f"):"mat3x2h"===t?this.getTypeInfo("mat2x3h"):"mat3x3f"===t||"mat3x3h"===t?e:"mat3x4f"===t?this.getTypeInfo("mat4x3f"):"mat3x4h"===t?this.getTypeInfo("mat4x3h"):"mat4x2f"===t?this.getTypeInfo("mat2x4f"):"mat4x2h"===t?this.getTypeInfo("mat2x4h"):"mat4x3f"===t?this.getTypeInfo("mat3x4f"):"mat4x3h"===t?this.getTypeInfo("mat3x4h"):e}Transpose(e,t){const n=this.exec.evalExpression(e.args[0],t);if(!(n instanceof nq))return null;const i=this._getTransposeType(n.typeInfo);if("mat2x2"===n.typeInfo.name||"mat2x2f"===n.typeInfo.name||"mat2x2h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[2],e[1],e[3]],i)}if("mat2x3"===n.typeInfo.name||"mat2x3f"===n.typeInfo.name||"mat2x3h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[3],e[6],e[1],e[4],e[7]],i)}if("mat2x4"===n.typeInfo.name||"mat2x4f"===n.typeInfo.name||"mat2x4h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13]],i)}if("mat3x2"===n.typeInfo.name||"mat3x2f"===n.typeInfo.name||"mat3x2h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[3],e[1],e[4],e[2],e[5]],i)}if("mat3x3"===n.typeInfo.name||"mat3x3f"===n.typeInfo.name||"mat3x3h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]],i)}if("mat3x4"===n.typeInfo.name||"mat3x4f"===n.typeInfo.name||"mat3x4h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14]],i)}if("mat4x2"===n.typeInfo.name||"mat4x2f"===n.typeInfo.name||"mat4x2h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[4],e[1],e[5],e[2],e[6]],i)}if("mat4x3"===n.typeInfo.name||"mat4x3f"===n.typeInfo.name||"mat4x3h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]],i)}if("mat4x4"===n.typeInfo.name||"mat4x4f"===n.typeInfo.name||"mat4x4h"===n.typeInfo.name){const e=n.data;return new nq([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]],i)}return null}Trunc(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof tq)return new tq(n.data.map(e=>Math.trunc(e)),n.typeInfo);const i=n;return new JG(Math.trunc(i.value),n.typeInfo)}Dpdx(e,t){return null}DpdxCoarse(e,t){return null}DpdxFine(e,t){return null}Dpdy(e,t){return null}DpdyCoarse(e,t){return null}DpdyFine(e,t){return null}Fwidth(e,t){return null}FwidthCoarse(e,t){return null}FwidthFine(e,t){return null}TextureDimensions(e,t){const n=e.args[0],i=e.args.length>1?this.exec.evalExpression(e.args[1],t).value:0;if(n instanceof MG){const e=n.name,r=t.getVariableValue(e);if(r instanceof rq){if(i<0||i>=r.mipLevelCount)return null;const e=r.getMipLevelSize(i),t=r.dimension;return"1d"===t?new JG(e[0],this.getTypeInfo("u32")):"3d"===t?new tq(e,this.getTypeInfo("vec3u")):"2d"===t?new tq(e.slice(0,2),this.getTypeInfo("vec2u")):null}return null}return null}TextureGather(e,t){return null}TextureGatherCompare(e,t){return null}TextureLoad(e,t){const n=e.args[0],i=this.exec.evalExpression(e.args[1],t),r=e.args.length>2?this.exec.evalExpression(e.args[2],t).value:0;if(!(i instanceof tq)||2!==i.data.length)return null;if(n instanceof MG){const e=n.name,o=t.getVariableValue(e);if(o instanceof rq){const e=Math.floor(i.data[0]),t=Math.floor(i.data[1]);if(e<0||e>=o.width||t<0||t>=o.height)return null;const n=o.getPixel(e,t,0,r);return null===n?null:new tq(n,this.getTypeInfo("vec4f"))}return null}return null}TextureNumLayers(e,t){const n=e.args[0];if(n instanceof MG){const e=n.name,i=t.getVariableValue(e);return i instanceof rq?new JG(i.depthOrArrayLayers,this.getTypeInfo("u32")):null}return null}TextureNumLevels(e,t){const n=e.args[0];if(n instanceof MG){const e=n.name,i=t.getVariableValue(e);return i instanceof rq?new JG(i.mipLevelCount,this.getTypeInfo("u32")):null}return null}TextureNumSamples(e,t){const n=e.args[0];if(n instanceof MG){const e=n.name,i=t.getVariableValue(e);return i instanceof rq?new JG(i.sampleCount,this.getTypeInfo("u32")):null}return null}TextureSample(e,t){return null}TextureSampleBias(e,t){return null}TextureSampleCompare(e,t){return null}TextureSampleCompareLevel(e,t){return null}TextureSampleGrad(e,t){return null}TextureSampleLevel(e,t){return null}TextureSampleBaseClampToEdge(e,t){return null}TextureStore(e,t){const n=e.args[0],i=this.exec.evalExpression(e.args[1],t),r=4===e.args.length?this.exec.evalExpression(e.args[2],t).value:0,o=4===e.args.length?this.exec.evalExpression(e.args[3],t).data:this.exec.evalExpression(e.args[2],t).data;if(4!==o.length)return null;if(!(i instanceof tq)||2!==i.data.length)return null;if(n instanceof MG){const e=n.name,s=t.getVariableValue(e);if(s instanceof rq){const e=s.getMipLevelSize(0),t=Math.floor(i.data[0]),n=Math.floor(i.data[1]);return t<0||t>=e[0]||n<0||n>=e[1]||s.setPixel(t,n,0,r,Array.from(o)),null}return null}return null}AtomicLoad(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t);return t.getVariable(i).value.getSubData(this.exec,n.postfix,t)}AtomicStore(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t);return a instanceof JG&&s instanceof JG&&(a.value=s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),null}AtomicAdd(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value+=s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicSub(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value-=s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicMax(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value=Math.max(a.value,s.value)),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicMin(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value=Math.min(a.value,s.value)),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicAnd(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value=a.value&s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicOr(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value=a.value|s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicXor(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value=a.value^s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicExchange(e,t){let n=e.args[0];n instanceof UG&&(n=n.right);const i=this.exec.getVariableName(n,t),r=t.getVariable(i);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=r.value.getSubData(this.exec,n.postfix,t),l=new JG(a.value,a.typeInfo);return a instanceof JG&&s instanceof JG&&(a.value=s.value),r.value instanceof iq&&r.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicCompareExchangeWeak(e,t){return null}Pack4x8snorm(e,t){return null}Pack4x8unorm(e,t){return null}Pack4xI8(e,t){return null}Pack4xU8(e,t){return null}Pack4x8Clamp(e,t){return null}Pack4xU8Clamp(e,t){return null}Pack2x16snorm(e,t){return null}Pack2x16unorm(e,t){return null}Pack2x16float(e,t){return null}Unpack4x8snorm(e,t){return null}Unpack4x8unorm(e,t){return null}Unpack4xI8(e,t){return null}Unpack4xU8(e,t){return null}Unpack2x16snorm(e,t){return null}Unpack2x16unorm(e,t){return null}Unpack2x16float(e,t){return null}StorageBarrier(e,t){return null}TextureBarrier(e,t){return null}WorkgroupBarrier(e,t){return null}WorkgroupUniformLoad(e,t){return null}SubgroupAdd(e,t){return null}SubgroupExclusiveAdd(e,t){return null}SubgroupInclusiveAdd(e,t){return null}SubgroupAll(e,t){return null}SubgroupAnd(e,t){return null}SubgroupAny(e,t){return null}SubgroupBallot(e,t){return null}SubgroupBroadcast(e,t){return null}SubgroupBroadcastFirst(e,t){return null}SubgroupElect(e,t){return null}SubgroupMax(e,t){return null}SubgroupMin(e,t){return null}SubgroupMul(e,t){return null}SubgroupExclusiveMul(e,t){return null}SubgroupInclusiveMul(e,t){return null}SubgroupOr(e,t){return null}SubgroupShuffle(e,t){return null}SubgroupShuffleDown(e,t){return null}SubgroupShuffleUp(e,t){return null}SubgroupShuffleXor(e,t){return null}SubgroupXor(e,t){return null}QuadBroadcast(e,t){return null}QuadSwapDiagonal(e,t){return null}QuadSwapX(e,t){return null}QuadSwapY(e,t){return null}}const Iq={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},Pq={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class Lq extends kq{constructor(e,t){var n;super(),this.ast=e??[],this.reflection=new wq,this.reflection.updateAST(this.ast),this.context=null!==(n=null==t?void 0:t.clone())&&void 0!==n?n:new Tq,this.builtins=new Aq(this),this.typeInfo={bool:this.getTypeInfo(SG.bool),i32:this.getTypeInfo(SG.i32),u32:this.getTypeInfo(SG.u32),f32:this.getTypeInfo(SG.f32),f16:this.getTypeInfo(SG.f16),vec2f:this.getTypeInfo(TG.vec2f),vec2u:this.getTypeInfo(TG.vec2u),vec2i:this.getTypeInfo(TG.vec2i),vec2h:this.getTypeInfo(TG.vec2h),vec3f:this.getTypeInfo(TG.vec3f),vec3u:this.getTypeInfo(TG.vec3u),vec3i:this.getTypeInfo(TG.vec3i),vec3h:this.getTypeInfo(TG.vec3h),vec4f:this.getTypeInfo(TG.vec4f),vec4u:this.getTypeInfo(TG.vec4u),vec4i:this.getTypeInfo(TG.vec4i),vec4h:this.getTypeInfo(TG.vec4h),mat2x2f:this.getTypeInfo(TG.mat2x2f),mat2x3f:this.getTypeInfo(TG.mat2x3f),mat2x4f:this.getTypeInfo(TG.mat2x4f),mat3x2f:this.getTypeInfo(TG.mat3x2f),mat3x3f:this.getTypeInfo(TG.mat3x3f),mat3x4f:this.getTypeInfo(TG.mat3x4f),mat4x2f:this.getTypeInfo(TG.mat4x2f),mat4x3f:this.getTypeInfo(TG.mat4x3f),mat4x4f:this.getTypeInfo(TG.mat4x4f)}}getVariableValue(e){var t,n;const i=null!==(n=null===(t=this.context.getVariable(e))||void 0===t?void 0:t.value)&&void 0!==n?n:null;if(null===i)return null;if(i instanceof JG)return i.value;if(i instanceof tq||i instanceof nq)return Array.from(i.data);if(i instanceof iq&&i.typeInfo instanceof w$){if("u32"===i.typeInfo.format.name)return Array.from(new Uint32Array(i.buffer,i.offset,i.typeInfo.count));if("i32"===i.typeInfo.format.name)return Array.from(new Int32Array(i.buffer,i.offset,i.typeInfo.count));if("f32"===i.typeInfo.format.name)return Array.from(new Float32Array(i.buffer,i.offset,i.typeInfo.count))}return null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,t,n,i){const r=this.context.clone();(i=i??{}).constants&&this._setOverrides(i.constants,r),this._execStatements(this.ast,r);const o=r.getFunction(e);if(!o)return;if("number"==typeof t)t=[t,1,1];else{if(0===t.length)return;1===t.length?t=[t[0],1,1]:2===t.length?t=[t[0],t[1],1]:t.length>3&&(t=[t[0],t[1],t[2]])}const s=t[0],a=t[1],l=t[2],c=this.getTypeInfo("vec3u");r.setVariable("@num_workgroups",new tq(t,c));const u=this.reflection.getFunctionInfo(e);for(const d in n)for(const e in n[d]){const t=n[d][e];r.variables.forEach(n=>{var i;const r=n.node;if(null!=r&&r.attributes){let o=null,s=null;for(const e of r.attributes)"binding"===e.name?o=e.value:"group"===e.name&&(s=e.value);if(e==o&&d==s){let o=!1;for(const t of u.resources)if(t.name===n.name&&t.group===parseInt(d)&&t.binding===parseInt(e)){o=!0;break}if(o)if(void 0!==t.texture&&void 0!==t.descriptor){const e=new rq(t.texture,this.getTypeInfo(r.type),t.descriptor,null!==(i=t.texture.view)&&void 0!==i?i:null);n.value=e}else void 0!==t.uniform?n.value=new iq(t.uniform,this.getTypeInfo(r.type)):n.value=new iq(t,this.getTypeInfo(r.type))}}})}for(let d=0;d<l;++d)for(let e=0;e<a;++e)for(let t=0;t<s;++t)r.setVariable("@workgroup_id",new tq([t,e,d],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(o,[t,e,d],r)}execStatement(e,t){if(e instanceof mG)return this.evalExpression(e.value,t);if(e instanceof xG){if(e.condition){const n=this.evalExpression(e.condition,t);if(!(n instanceof JG))throw new Error("Invalid break-if condition");if(!n.value)return null}return Lq._breakObj}if(e instanceof wG)return Lq._continueObj;if(e instanceof iG)this._let(e,t);else if(e instanceof tG)this._var(e,t);else if(e instanceof rG)this._const(e,t);else if(e instanceof K$)this._function(e,t);else{if(e instanceof pG)return this._if(e,t);if(e instanceof fG)return this._switch(e,t);if(e instanceof eG)return this._for(e,t);if(e instanceof Q$)return this._while(e,t);if(e instanceof hG)return this._loop(e,t);if(e instanceof J$){const n=t.clone();return n.currentFunctionName=t.currentFunctionName,this._execStatements(e.body,n)}if(e instanceof uG)this._assign(e,t);else if(e instanceof cG)this._increment(e,t);else{if(e instanceof CG)return null;if(e instanceof nG){const n=e.name;null===t.getVariable(n)&&t.setVariable(n,new JG(0,this.getTypeInfo("u32")))}else if(e instanceof dG)this._call(e,t);else if(e instanceof yG||e instanceof vG)return null}}return null}evalExpression(e,t){return e instanceof jG?this._evalBinaryOp(e,t):e instanceof NG?this._evalLiteral(e,t):e instanceof MG?this._evalVariable(e,t):e instanceof OG?this._evalCall(e,t):e instanceof RG?this._evalCreate(e,t):e instanceof DG?this._evalConst(e,t):e instanceof FG?this._evalBitcast(e,t):e instanceof UG?this._evalUnaryOp(e,t):null}getTypeInfo(e){var t;if(e instanceof SG){const t=this.reflection.getTypeInfo(e);if(null!==t)return t}let n=null!==(t=this.typeInfo[e])&&void 0!==t?t:null;return null!==n||(n=this.reflection.getTypeInfoByName(e)),n}_setOverrides(e,t){for(const n in e){const i=e[n],r=this.reflection.getOverrideInfo(n);null!==r&&(null===r.type&&(r.type=this.getTypeInfo("u32")),"u32"===r.type.name||"i32"===r.type.name||"f32"===r.type.name||"f16"===r.type.name?t.setVariable(n,new JG(i,r.type)):"bool"===r.type.name?t.setVariable(n,new JG(i?1:0,r.type)):("vec2"===r.type.name||"vec3"===r.type.name||"vec4"===r.type.name||"vec2f"===r.type.name||"vec3f"===r.type.name||"vec4f"===r.type.name||"vec2i"===r.type.name||"vec3i"===r.type.name||"vec4i"===r.type.name||"vec2u"===r.type.name||"vec3u"===r.type.name||"vec4u"===r.type.name||"vec2h"===r.type.name||"vec3h"===r.type.name||"vec4h"===r.type.name)&&t.setVariable(n,new tq(i,r.type)))}}_dispatchWorkgroup(e,t,n){const i=[1,1,1];for(const c of e.node.attributes)if("workgroup_size"===c.name){if(c.value.length>0){const e=n.getVariableValue(c.value[0]);i[0]=e instanceof JG?e.value:parseInt(c.value[0])}if(c.value.length>1){const e=n.getVariableValue(c.value[1]);i[1]=e instanceof JG?e.value:parseInt(c.value[1])}if(c.value.length>2){const e=n.getVariableValue(c.value[2]);i[2]=e instanceof JG?e.value:parseInt(c.value[2])}}const r=this.getTypeInfo("vec3u"),o=this.getTypeInfo("u32");n.setVariable("@workgroup_size",new tq(i,r));const s=i[0],a=i[1],l=i[2];for(let c=0,u=0;c<l;++c)for(let l=0;l<a;++l)for(let a=0;a<s;++a,++u){const s=[a,l,c],d=[a+t[0]*i[0],l+t[1]*i[1],c+t[2]*i[2]];n.setVariable("@local_invocation_id",new tq(s,r)),n.setVariable("@global_invocation_id",new tq(d,r)),n.setVariable("@local_invocation_index",new JG(u,o)),this._dispatchExec(e,n)}}_dispatchExec(e,t){for(const n of e.node.args)for(const e of n.attributes)if("builtin"===e.name){const i=`@${e.value}`,r=t.getVariable(i);void 0!==r&&t.variables.set(n.name,r)}this._execStatements(e.node.body,t)}getVariableName(e,t){for(;e instanceof UG;)e=e.right;return e instanceof MG?e.name:null}_execStatements(e,t){for(const n of e){if(n instanceof Array){const e=t.clone(),i=this._execStatements(n,e);if(i)return i;continue}const e=this.execStatement(n,t);if(e)return e}return null}_call(e,t){const n=t.clone();n.currentFunctionName=e.name;const i=t.getFunction(e.name);if(i){for(let t=0;t<i.node.args.length;++t){const r=i.node.args[t],o=this.evalExpression(e.args[t],n);n.setVariable(r.name,o,r)}this._execStatements(i.node.body,n)}else e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)&&this._evalCreate(e,t)}_increment(e,t){const n=this.getVariableName(e.variable,t),i=t.getVariable(n);i&&("++"===e.operator?i.value instanceof JG&&i.value.value++:"--"===e.operator&&i.value instanceof JG&&i.value.value--)}_getVariableData(e,t){if(e instanceof MG){const n=this.getVariableName(e,t),i=t.getVariable(n);return null===i?null:i.value.getSubData(this,e.postfix,t)}if(e instanceof UG){if("*"===e.operator){const n=this._getVariableData(e.right,t);return n instanceof QG?n.reference.getSubData(this,e.postfix,t):null}if("&"===e.operator){const n=this._getVariableData(e.right,t);return new QG(n)}}return null}_assign(e,t){let n=null,i="<var>",r=null;if(e.variable instanceof UG){const n=this._getVariableData(e.variable,t),i=this.evalExpression(e.value,t),r=e.operator;if("="===r){if(n instanceof JG||n instanceof tq||n instanceof nq){if(i instanceof JG||i instanceof tq||i instanceof nq&&n.data.length===i.data.length)return void n.data.set(i.data)}else if(n instanceof iq&&i instanceof iq&&n.buffer.byteLength-n.offset>=i.buffer.byteLength-i.offset)return void(n.buffer.byteLength%4==0?new Uint32Array(n.buffer,n.offset,n.typeInfo.size/4).set(new Uint32Array(i.buffer,i.offset,i.typeInfo.size/4)):new Uint8Array(n.buffer,n.offset,n.typeInfo.size).set(new Uint8Array(i.buffer,i.offset,i.typeInfo.size)));return null}if("+="===r)return(n instanceof JG||n instanceof tq||n instanceof nq)&&(i instanceof JG||i instanceof tq||i instanceof nq)?void n.data.set(i.data.map((e,t)=>n.data[t]+e)):void 0;if("-="===r)return(n instanceof JG||n instanceof tq||n instanceof nq)&&(i instanceof JG||i instanceof tq||i instanceof nq)?void n.data.set(i.data.map((e,t)=>n.data[t]-e)):void 0}if(e.variable instanceof UG){if("*"===e.variable.operator){i=this.getVariableName(e.variable.right,t);const r=t.getVariable(i);if(!(r&&r.value instanceof QG))return;n=r.value.reference;let o=e.variable.postfix;if(!o){let t=e.variable.right;for(;t instanceof UG;){if(t.postfix){o=t.postfix;break}t=t.right}}o&&(n=n.getSubData(this,o,t))}}else{r=e.variable.postfix,i=this.getVariableName(e.variable,t);const o=t.getVariable(i);if(null===o)return;n=o.value}if(n instanceof QG&&(n=n.reference),null===n)return;const o=this.evalExpression(e.value,t),s=e.operator;if("="!==s){const e=n.getSubData(this,r,t);if(e instanceof tq&&o instanceof JG){const t=e.data,n=o.value;if("+="===s)for(let e=0;e<t.length;++e)t[e]+=n;else if("-="===s)for(let e=0;e<t.length;++e)t[e]-=n;else if("*="===s)for(let e=0;e<t.length;++e)t[e]*=n;else if("/="===s)for(let e=0;e<t.length;++e)t[e]/=n;else if("%="===s)for(let e=0;e<t.length;++e)t[e]%=n;else if("&="===s)for(let e=0;e<t.length;++e)t[e]&=n;else if("|="===s)for(let e=0;e<t.length;++e)t[e]|=n;else if("^="===s)for(let e=0;e<t.length;++e)t[e]^=n;else if("<<="===s)for(let e=0;e<t.length;++e)t[e]<<=n;else if(">>="===s)for(let e=0;e<t.length;++e)t[e]>>=n}else if(e instanceof tq&&o instanceof tq){const t=e.data,n=o.data;if(t.length!==n.length)return;if("+="===s)for(let e=0;e<t.length;++e)t[e]+=n[e];else if("-="===s)for(let e=0;e<t.length;++e)t[e]-=n[e];else if("*="===s)for(let e=0;e<t.length;++e)t[e]*=n[e];else if("/="===s)for(let e=0;e<t.length;++e)t[e]/=n[e];else if("%="===s)for(let e=0;e<t.length;++e)t[e]%=n[e];else if("&="===s)for(let e=0;e<t.length;++e)t[e]&=n[e];else if("|="===s)for(let e=0;e<t.length;++e)t[e]|=n[e];else if("^="===s)for(let e=0;e<t.length;++e)t[e]^=n[e];else if("<<="===s)for(let e=0;e<t.length;++e)t[e]<<=n[e];else if(">>="===s)for(let e=0;e<t.length;++e)t[e]>>=n[e]}else{if(!(e instanceof JG&&o instanceof JG))return;"+="===s?e.value+=o.value:"-="===s?e.value-=o.value:"*="===s?e.value*=o.value:"/="===s?e.value/=o.value:"%="===s?e.value%=o.value:"&="===s?e.value&=o.value:"|="===s?e.value|=o.value:"^="===s?e.value^=o.value:"<<="===s?e.value<<=o.value:">>="===s&&(e.value>>=o.value)}return void(n instanceof iq&&n.setDataValue(this,e,r,t))}if(n instanceof iq)n.setDataValue(this,o,r,t);else if(r){if(!(n instanceof tq||n instanceof nq))return;if(r instanceof BG){const e=this.evalExpression(r.index,t).value;if(n instanceof tq){if(!(o instanceof JG))return;n.data[e]=o.value}else{if(!(n instanceof nq))return;{const e=this.evalExpression(r.index,t).value;if(e<0)return;if(!(o instanceof tq))return;{const t=n.typeInfo.getTypeName();if("mat2x2"===t||"mat2x2f"===t||"mat2x2h"===t){if(!(e<2&&2===o.data.length))return;n.data[2*e]=o.data[0],n.data[2*e+1]=o.data[1]}else if("mat2x3"===t||"mat2x3f"===t||"mat2x3h"===t){if(!(e<2&&3===o.data.length))return;n.data[3*e]=o.data[0],n.data[3*e+1]=o.data[1],n.data[3*e+2]=o.data[2]}else if("mat2x4"===t||"mat2x4f"===t||"mat2x4h"===t){if(!(e<2&&4===o.data.length))return;n.data[4*e]=o.data[0],n.data[4*e+1]=o.data[1],n.data[4*e+2]=o.data[2],n.data[4*e+3]=o.data[3]}else if("mat3x2"===t||"mat3x2f"===t||"mat3x2h"===t){if(!(e<3&&2===o.data.length))return;n.data[2*e]=o.data[0],n.data[2*e+1]=o.data[1]}else if("mat3x3"===t||"mat3x3f"===t||"mat3x3h"===t){if(!(e<3&&3===o.data.length))return;n.data[3*e]=o.data[0],n.data[3*e+1]=o.data[1],n.data[3*e+2]=o.data[2]}else if("mat3x4"===t||"mat3x4f"===t||"mat3x4h"===t){if(!(e<3&&4===o.data.length))return;n.data[4*e]=o.data[0],n.data[4*e+1]=o.data[1],n.data[4*e+2]=o.data[2],n.data[4*e+3]=o.data[3]}else if("mat4x2"===t||"mat4x2f"===t||"mat4x2h"===t){if(!(e<4&&2===o.data.length))return;n.data[2*e]=o.data[0],n.data[2*e+1]=o.data[1]}else if("mat4x3"===t||"mat4x3f"===t||"mat4x3h"===t){if(!(e<4&&3===o.data.length))return;n.data[3*e]=o.data[0],n.data[3*e+1]=o.data[1],n.data[3*e+2]=o.data[2]}else{if("mat4x4"!==t&&"mat4x4f"!==t&&"mat4x4h"!==t)return;if(!(e<4&&4===o.data.length))return;n.data[4*e]=o.data[0],n.data[4*e+1]=o.data[1],n.data[4*e+2]=o.data[2],n.data[4*e+3]=o.data[3]}}}}}else if(r instanceof LG){const e=r.value;if(!(n instanceof tq))return;if(o instanceof JG){if(e.length>1)return;if("x"===e)n.data[0]=o.value;else if("y"===e){if(n.data.length<2)return;n.data[1]=o.value}else if("z"===e){if(n.data.length<3)return;n.data[2]=o.value}else if("w"===e){if(n.data.length<4)return;n.data[3]=o.value}}else{if(!(o instanceof tq))return;if(e.length!==o.data.length)return;for(let t=0;t<e.length;++t){const i=e[t];if("x"===i||"r"===i)n.data[0]=o.data[t];else if("y"===i||"g"===i){if(o.data.length<2)return;n.data[1]=o.data[t]}else if("z"===i||"b"===i){if(o.data.length<3)return;n.data[2]=o.data[t]}else{if("w"!==i&&"a"!==i)return;if(o.data.length<4)return;n.data[3]=o.data[t]}}}}}else n instanceof JG&&o instanceof JG?n.value=o.value:(n instanceof tq&&o instanceof tq||n instanceof nq&&o instanceof nq)&&n.data.set(o.data)}_function(e,t){const n=new Cq(e);t.functions.set(e.name,n)}_const(e,t){let n=null;null!==e.value&&(n=this.evalExpression(e.value,t)),t.createVariable(e.name,n,e)}_let(e,t){let n=null;if(null!==e.value){if(n=this.evalExpression(e.value,t),null===n)return;e.value instanceof UG||(n=n.clone())}else{const i=e.type.name;if("f32"===i||"i32"===i||"u32"===i||"bool"===i||"f16"===i||"vec2"===i||"vec3"===i||"vec4"===i||"vec2f"===i||"vec3f"===i||"vec4f"===i||"vec2i"===i||"vec3i"===i||"vec4i"===i||"vec2u"===i||"vec3u"===i||"vec4u"===i||"vec2h"===i||"vec3h"===i||"vec4h"===i||"vec2b"===i||"vec3b"===i||"vec4b"===i||"mat2x2"===i||"mat2x3"===i||"mat2x4"===i||"mat3x2"===i||"mat3x3"===i||"mat3x4"===i||"mat4x2"===i||"mat4x3"===i||"mat4x4"===i||"mat2x2f"===i||"mat2x3f"===i||"mat2x4f"===i||"mat3x2f"===i||"mat3x3f"===i||"mat3x4f"===i||"mat4x2f"===i||"mat4x3f"===i||"mat4x4f"===i||"mat2x2h"===i||"mat2x3h"===i||"mat2x4h"===i||"mat3x2h"===i||"mat3x3h"===i||"mat3x4h"===i||"mat4x2h"===i||"mat4x3h"===i||"mat4x4h"===i||"array"===i){const i=new RG(e.type,[]);n=this._evalCreate(i,t)}}t.createVariable(e.name,n,e)}_var(e,t){let n=null;if(null!==e.value){if(n=this.evalExpression(e.value,t),null===n)return;e.value instanceof UG||(n=n.clone())}else{if(null===e.type)return;const i=e.type.name;if("f32"===i||"i32"===i||"u32"===i||"bool"===i||"f16"===i||"vec2"===i||"vec3"===i||"vec4"===i||"vec2f"===i||"vec3f"===i||"vec4f"===i||"vec2i"===i||"vec3i"===i||"vec4i"===i||"vec2u"===i||"vec3u"===i||"vec4u"===i||"vec2h"===i||"vec3h"===i||"vec4h"===i||"vec2b"===i||"vec3b"===i||"vec4b"===i||"mat2x2"===i||"mat2x3"===i||"mat2x4"===i||"mat3x2"===i||"mat3x3"===i||"mat3x4"===i||"mat4x2"===i||"mat4x3"===i||"mat4x4"===i||"mat2x2f"===i||"mat2x3f"===i||"mat2x4f"===i||"mat3x2f"===i||"mat3x3f"===i||"mat3x4f"===i||"mat4x2f"===i||"mat4x3f"===i||"mat4x4f"===i||"mat2x2h"===i||"mat2x3h"===i||"mat2x4h"===i||"mat3x2h"===i||"mat3x3h"===i||"mat3x4h"===i||"mat4x2h"===i||"mat4x3h"===i||"mat4x4h"===i||e.type instanceof AG||e.type instanceof CG||e.type instanceof TG){const i=new RG(e.type,[]);n=this._evalCreate(i,t)}}t.createVariable(e.name,n,e)}_switch(e,t){t=t.clone();const n=this.evalExpression(e.condition,t);if(!(n instanceof JG))return null;let i=null;for(const r of e.cases)if(r instanceof WG)for(const e of r.selectors){if(e instanceof HG){i=r;continue}const o=this.evalExpression(e,t);if(!(o instanceof JG))return null;if(o.value===n.value)return this._execStatements(r.body,t)}else r instanceof $G&&(i=r);return i?this._execStatements(i.body,t):null}_if(e,t){t=t.clone();const n=this.evalExpression(e.condition,t);if(!(n instanceof JG))return null;if(n.value)return this._execStatements(e.body,t);for(const i of e.elseif){const e=this.evalExpression(i.condition,t);if(!(e instanceof JG))return null;if(e.value)return this._execStatements(i.body,t)}return e.else?this._execStatements(e.else,t):null}_getScalarValue(e){return e instanceof JG?e.value:0}_for(e,t){for(t=t.clone(),this.execStatement(e.init,t);this._getScalarValue(this.evalExpression(e.condition,t));){const n=this._execStatements(e.body,t);if(n===Lq._breakObj)break;if(null!==n&&n!==Lq._continueObj)return n;this.execStatement(e.increment,t)}return null}_loop(e,t){for(t=t.clone();;){const n=this._execStatements(e.body,t);if(n===Lq._breakObj)break;if(n===Lq._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,t)===Lq._breakObj)break}else if(null!==n)return n}return null}_while(e,t){for(t=t.clone();this._getScalarValue(this.evalExpression(e.condition,t));){const n=this._execStatements(e.body,t);if(n===Lq._breakObj)break;if(n!==Lq._continueObj&&null!==n)return n}return null}_evalBitcast(e,t){const n=this.evalExpression(e.value,t),i=e.type;if(n instanceof JG){const e=vq(n.value,n.typeInfo.name,i.name);return new JG(e,this.getTypeInfo(i))}if(n instanceof tq){const e=n.typeInfo.getTypeName();let t="";if(e.endsWith("f"))t="f32";else if(e.endsWith("i"))t="i32";else if(e.endsWith("u"))t="u32";else if(e.endsWith("b"))t="bool";else{if(!e.endsWith("h"))return null;t="f16"}const r=i.getTypeName();let o="";if(r.endsWith("f"))o="f32";else if(r.endsWith("i"))o="i32";else if(r.endsWith("u"))o="u32";else if(r.endsWith("b"))o="bool";else{if(!r.endsWith("h"))return null;o="f16"}const s=function(e,t,n){if(t===n)return e;const i=new Array(e.length);for(let r=0;r<e.length;r++)i[r]=vq(e[r],t,n);return i}(Array.from(n.data),t,o);return new tq(s,this.getTypeInfo(i))}return null}_evalConst(e,t){return t.getVariableValue(e.name).clone().getSubData(this,e.postfix,t)}_evalCreate(e,t){var n;if(e instanceof RG){if(null===e.type)return ZG.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,t);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,t);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,t)}}e instanceof RG?e.type.name:e.name;const i=e instanceof RG?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(null===i)return null;if(0===i.size)return null;const r=new iq(new ArrayBuffer(i.size),i,0);if(i instanceof x$){if(e.args)for(let o=0;o<e.args.length;++o){const n=i.members[o],s=e.args[o],a=this.evalExpression(s,t);r.setData(this,a,n.type,n.offset,t)}}else if(i instanceof w$){let o=0;if(e.args)for(let s=0;s<e.args.length;++s){const a=e.args[s],l=this.evalExpression(a,t);null===i.format&&("x32"===(null===(n=l.typeInfo)||void 0===n?void 0:n.name)?i.format=this.getTypeInfo("i32"):i.format=l.typeInfo),r.setData(this,l,i.format,o,t),o+=i.stride}}return e instanceof RG?r.getSubData(this,e.postfix,t):r}_evalLiteral(e,t){const n=this.getTypeInfo(e.type),i=n.name;return"x32"===i||"u32"===i||"f32"===i||"f16"===i||"i32"===i||"bool"===i?new JG(e.scalarValue,n):"vec2"===i||"vec3"===i||"vec4"===i||"vec2f"===i||"vec3f"===i||"vec4f"===i||"vec2h"===i||"vec3h"===i||"vec4h"===i||"vec2i"===i||"vec3i"===i||"vec4i"===i||"vec2u"===i||"vec3u"===i||"vec4u"===i?this._callConstructorVec(e,t):"mat2x2"===i||"mat2x3"===i||"mat2x4"===i||"mat3x2"===i||"mat3x3"===i||"mat3x4"===i||"mat4x2"===i||"mat4x3"===i||"mat4x4"===i||"mat2x2f"===i||"mat2x3f"===i||"mat2x4f"===i||"mat3x2f"===i||"mat3x3f"===i||"mat3x4f"===i||"mat4x2f"===i||"mat4x3f"===i||"mat4x4f"===i||"mat2x2h"===i||"mat2x3h"===i||"mat2x4h"===i||"mat3x2h"===i||"mat3x3h"===i||"mat3x4h"===i||"mat4x2h"===i||"mat4x3h"===i||"mat4x4h"===i?this._callConstructorMatrix(e,t):e.value}_evalVariable(e,t){const n=t.getVariableValue(e.name);return null===n?n:n.getSubData(this,e.postfix,t)}_maxFormatTypeInfo(e){let t=e[0];if("f32"===t.name)return t;for(let n=1;n<e.length;++n){const i=Lq._priority.get(t.name);Lq._priority.get(e[n].name)<i&&(t=e[n])}return"x32"===t.name?this.getTypeInfo("i32"):t}_evalUnaryOp(e,t){const n=this.evalExpression(e.right,t);if("&"===e.operator)return new QG(n);if("*"===e.operator)return n instanceof QG?n.reference.getSubData(this,e.postfix,t):null;const i=n instanceof JG?n.value:n instanceof tq?Array.from(n.data):null;switch(e.operator){case"+":{if(cq(i)){const e=i.map((e,t)=>+e);return new tq(e,n.typeInfo)}const e=i,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new JG(+e,t)}case"-":{if(cq(i)){const e=i.map((e,t)=>-e);return new tq(e,n.typeInfo)}const e=i,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new JG(-e,t)}case"!":{if(cq(i)){const e=i.map((e,t)=>e?0:1);return new tq(e,n.typeInfo)}const e=i,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new JG(e?0:1,t)}case"~":{if(cq(i)){const e=i.map((e,t)=>~e);return new tq(e,n.typeInfo)}const e=i,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new JG(~e,t)}}return null}_evalBinaryOp(e,t){const n=this.evalExpression(e.left,t),i=this.evalExpression(e.right,t),r=n instanceof JG?n.value:n instanceof tq||n instanceof nq?Array.from(n.data):null,o=i instanceof JG?i.value:i instanceof tq||i instanceof nq?Array.from(i.data):null;switch(e.operator){case"+":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e+t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t+e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e+t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e+t,s)}case"-":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e-t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t-e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e-t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e-t,s)}case"*":{if(cq(r)&&cq(o)){const e=r,t=o;if(n instanceof nq&&i instanceof nq){const r=function(e,t,n,i){if(void 0===Pq[t.name]||void 0===Pq[i.name])return null;const r=Pq[t.name][0],o=Pq[t.name][1],s=Pq[i.name][0];if(r!==Pq[i.name][1])return null;const a=new Array(s*o);for(let l=0;l<o;l++)for(let t=0;t<s;t++){let i=0;for(let s=0;s<r;s++)i+=e[s*o+l]*n[t*r+s];a[l*s+t]=i}return a}(e,n.typeInfo,t,i.typeInfo);if(null===r)return null;const o=Pq[i.typeInfo.name][0],s=Pq[n.typeInfo.name][1],a=this.getTypeInfo(`mat${o}x${s}f`);return new nq(r,a)}if(n instanceof nq&&i instanceof tq){const r=function(e,t,n,i){if(void 0===Pq[t.name]||void 0===Iq[i.name])return null;const r=Pq[t.name][0],o=Pq[t.name][1];if(r!==n.length)return null;const s=new Array(o);for(let a=0;a<o;a++){let t=0;for(let i=0;i<r;i++)t+=e[i*o+a]*n[i];s[a]=t}return s}(e,n.typeInfo,t,i.typeInfo);return null===r?null:new tq(r,i.typeInfo)}if(n instanceof tq&&i instanceof nq){const r=function(e,t,n,i){if(void 0===Iq[t.name]||void 0===Pq[i.name])return null;const r=Pq[i.name][0],o=Pq[i.name][1];if(o!==e.length)return null;const s=[];for(let a=0;a<r;a++){let t=0;for(let i=0;i<o;i++)t+=e[i]*n[i*r+a];s[a]=t}return s}(e,n.typeInfo,t,i.typeInfo);return null===r?null:new tq(r,n.typeInfo)}{if(e.length!==t.length)return null;const i=e.map((e,n)=>e*t[n]);return new tq(i,n.typeInfo)}}if(cq(r)){const e=o,t=r.map((t,n)=>t*e);return n instanceof nq?new nq(t,n.typeInfo):new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e*t);return i instanceof nq?new nq(t,i.typeInfo):new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e*t,s)}case"%":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e%t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t%e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e%t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e%t,s)}case"/":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e/t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t/e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e/t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e/t,s)}case"&":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e&t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t&e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e&t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e&t,s)}case"|":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e|t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t|e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e|t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e|t,s)}case"^":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e^t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t^e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e^t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e^t,s)}case"<<":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e<<t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t<<e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e<<t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e<<t,s)}case">>":{if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e>>t[n]);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t>>e);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e>>t);return new tq(t,i.typeInfo)}const e=r,t=o,s=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new JG(e>>t,s)}case">":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e>t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t>e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e>t?1:0);return new tq(t,i.typeInfo)}return new JG(r>o?1:0,this.getTypeInfo("bool"));case"<":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e<t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t<e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e<t?1:0);return new tq(t,i.typeInfo)}return new JG(r<o?1:0,this.getTypeInfo("bool"));case"==":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e===t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t==e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e==t?1:0);return new tq(t,i.typeInfo)}return new JG(r===o?1:0,this.getTypeInfo("bool"));case"!=":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e!==t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t!==e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e!==t?1:0);return new tq(t,i.typeInfo)}return new JG(r!==o?1:0,this.getTypeInfo("bool"));case">=":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e>=t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t>=e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e>=t?1:0);return new tq(t,i.typeInfo)}return new JG(r>=o?1:0,this.getTypeInfo("bool"));case"<=":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e<=t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t<=e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e<=t?1:0);return new tq(t,i.typeInfo)}return new JG(r<=o?1:0,this.getTypeInfo("bool"));case"&&":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e&&t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t&&e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e&&t?1:0);return new tq(t,i.typeInfo)}return new JG(r&&o?1:0,this.getTypeInfo("bool"));case"||":if(cq(r)&&cq(o)){const e=r,t=o;if(e.length!==t.length)return null;const i=e.map((e,n)=>e||t[n]?1:0);return new tq(i,n.typeInfo)}if(cq(r)){const e=o,t=r.map((t,n)=>t||e?1:0);return new tq(t,n.typeInfo)}if(cq(o)){const e=r,t=o.map((t,n)=>e||t?1:0);return new tq(t,i.typeInfo)}return new JG(r||o?1:0,this.getTypeInfo("bool"))}return null}_evalCall(e,t){if(null!==e.cachedReturnValue)return e.cachedReturnValue;const n=t.clone();n.currentFunctionName=e.name;const i=t.getFunction(e.name);if(!i)return e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)?this._evalCreate(e,t):null;for(let r=0;r<i.node.args.length;++r){const t=i.node.args[r],o=this.evalExpression(e.args[r],n);n.createVariable(t.name,o,t)}return this._execStatements(i.node.body,n)}_callBuiltinFunction(e,t){switch(e.name){case"all":return this.builtins.All(e,t);case"any":return this.builtins.Any(e,t);case"select":return this.builtins.Select(e,t);case"arrayLength":return this.builtins.ArrayLength(e,t);case"abs":return this.builtins.Abs(e,t);case"acos":return this.builtins.Acos(e,t);case"acosh":return this.builtins.Acosh(e,t);case"asin":return this.builtins.Asin(e,t);case"asinh":return this.builtins.Asinh(e,t);case"atan":return this.builtins.Atan(e,t);case"atanh":return this.builtins.Atanh(e,t);case"atan2":return this.builtins.Atan2(e,t);case"ceil":return this.builtins.Ceil(e,t);case"clamp":return this.builtins.Clamp(e,t);case"cos":return this.builtins.Cos(e,t);case"cosh":return this.builtins.Cosh(e,t);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,t);case"countOneBits":return this.builtins.CountOneBits(e,t);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,t);case"cross":return this.builtins.Cross(e,t);case"degrees":return this.builtins.Degrees(e,t);case"determinant":return this.builtins.Determinant(e,t);case"distance":return this.builtins.Distance(e,t);case"dot":return this.builtins.Dot(e,t);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,t);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,t);case"exp":return this.builtins.Exp(e,t);case"exp2":return this.builtins.Exp2(e,t);case"extractBits":return this.builtins.ExtractBits(e,t);case"faceForward":return this.builtins.FaceForward(e,t);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,t);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,t);case"floor":return this.builtins.Floor(e,t);case"fma":return this.builtins.Fma(e,t);case"fract":return this.builtins.Fract(e,t);case"frexp":return this.builtins.Frexp(e,t);case"insertBits":return this.builtins.InsertBits(e,t);case"inverseSqrt":return this.builtins.InverseSqrt(e,t);case"ldexp":return this.builtins.Ldexp(e,t);case"length":return this.builtins.Length(e,t);case"log":return this.builtins.Log(e,t);case"log2":return this.builtins.Log2(e,t);case"max":return this.builtins.Max(e,t);case"min":return this.builtins.Min(e,t);case"mix":return this.builtins.Mix(e,t);case"modf":return this.builtins.Modf(e,t);case"normalize":return this.builtins.Normalize(e,t);case"pow":return this.builtins.Pow(e,t);case"quantizeToF16":return this.builtins.QuantizeToF16(e,t);case"radians":return this.builtins.Radians(e,t);case"reflect":return this.builtins.Reflect(e,t);case"refract":return this.builtins.Refract(e,t);case"reverseBits":return this.builtins.ReverseBits(e,t);case"round":return this.builtins.Round(e,t);case"saturate":return this.builtins.Saturate(e,t);case"sign":return this.builtins.Sign(e,t);case"sin":return this.builtins.Sin(e,t);case"sinh":return this.builtins.Sinh(e,t);case"smoothstep":return this.builtins.SmoothStep(e,t);case"sqrt":return this.builtins.Sqrt(e,t);case"step":return this.builtins.Step(e,t);case"tan":return this.builtins.Tan(e,t);case"tanh":return this.builtins.Tanh(e,t);case"transpose":return this.builtins.Transpose(e,t);case"trunc":return this.builtins.Trunc(e,t);case"dpdx":return this.builtins.Dpdx(e,t);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,t);case"dpdxFine":return this.builtins.DpdxFine(e,t);case"dpdy":return this.builtins.Dpdy(e,t);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,t);case"dpdyFine":return this.builtins.DpdyFine(e,t);case"fwidth":return this.builtins.Fwidth(e,t);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,t);case"fwidthFine":return this.builtins.FwidthFine(e,t);case"textureDimensions":return this.builtins.TextureDimensions(e,t);case"textureGather":return this.builtins.TextureGather(e,t);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,t);case"textureLoad":return this.builtins.TextureLoad(e,t);case"textureNumLayers":return this.builtins.TextureNumLayers(e,t);case"textureNumLevels":return this.builtins.TextureNumLevels(e,t);case"textureNumSamples":return this.builtins.TextureNumSamples(e,t);case"textureSample":return this.builtins.TextureSample(e,t);case"textureSampleBias":return this.builtins.TextureSampleBias(e,t);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,t);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,t);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,t);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,t);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,t);case"textureStore":return this.builtins.TextureStore(e,t);case"atomicLoad":return this.builtins.AtomicLoad(e,t);case"atomicStore":return this.builtins.AtomicStore(e,t);case"atomicAdd":return this.builtins.AtomicAdd(e,t);case"atomicSub":return this.builtins.AtomicSub(e,t);case"atomicMax":return this.builtins.AtomicMax(e,t);case"atomicMin":return this.builtins.AtomicMin(e,t);case"atomicAnd":return this.builtins.AtomicAnd(e,t);case"atomicOr":return this.builtins.AtomicOr(e,t);case"atomicXor":return this.builtins.AtomicXor(e,t);case"atomicExchange":return this.builtins.AtomicExchange(e,t);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,t);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,t);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,t);case"pack4xI8":return this.builtins.Pack4xI8(e,t);case"pack4xU8":return this.builtins.Pack4xU8(e,t);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,t);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,t);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,t);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,t);case"pack2x16float":return this.builtins.Pack2x16float(e,t);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,t);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,t);case"unpack4xI8":return this.builtins.Unpack4xI8(e,t);case"unpack4xU8":return this.builtins.Unpack4xU8(e,t);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,t);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,t);case"unpack2x16float":return this.builtins.Unpack2x16float(e,t);case"storageBarrier":return this.builtins.StorageBarrier(e,t);case"textureBarrier":return this.builtins.TextureBarrier(e,t);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,t);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,t);case"subgroupAdd":return this.builtins.SubgroupAdd(e,t);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,t);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,t);case"subgroupAll":return this.builtins.SubgroupAll(e,t);case"subgroupAnd":return this.builtins.SubgroupAnd(e,t);case"subgroupAny":return this.builtins.SubgroupAny(e,t);case"subgroupBallot":return this.builtins.SubgroupBallot(e,t);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,t);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,t);case"subgroupElect":return this.builtins.SubgroupElect(e,t);case"subgroupMax":return this.builtins.SubgroupMax(e,t);case"subgroupMin":return this.builtins.SubgroupMin(e,t);case"subgroupMul":return this.builtins.SubgroupMul(e,t);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,t);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,t);case"subgroupOr":return this.builtins.SubgroupOr(e,t);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,t);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,t);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,t);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,t);case"subgroupXor":return this.builtins.SubgroupXor(e,t);case"quadBroadcast":return this.builtins.QuadBroadcast(e,t);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,t);case"quadSwapX":return this.builtins.QuadSwapX(e,t);case"quadSwapY":return this.builtins.QuadSwapY(e,t)}const n=t.getFunction(e.name);if(n){const i=t.clone();for(let t=0;t<n.node.args.length;++t){const r=n.node.args[t],o=this.evalExpression(e.args[t],i);i.setVariable(r.name,o,r)}return this._execStatements(n.node.body,i)}return null}_callConstructorValue(e,t){if(!e.args||0===e.args.length)return new JG(0,this.getTypeInfo(e.type));const n=this.evalExpression(e.args[0],t);return n.typeInfo=this.getTypeInfo(e.type),n.getSubData(this,e.postfix,t).clone()}_callConstructorVec(e,t){const n=this.getTypeInfo(e.type),i=e.type.getTypeName(),r=Iq[i];if(void 0===r)return null;const o=[];if(e instanceof NG)if(e.isVector){const t=e.vectorValue;for(const e of t)o.push(e)}else o.push(e.scalarValue);else if(e.args)for(const s of e.args){const e=this.evalExpression(s,t);if(e instanceof tq){const t=e.data;for(let e=0;e<t.length;++e){let n=t[e];o.push(n)}}else if(e instanceof JG){let t=e.value;o.push(t)}}if(e.type instanceof TG&&null===e.type.format&&(e.type.format=TG.f32),0===o.length){const i=new Array(r).fill(0);return new tq(i,n).getSubData(this,e.postfix,t)}if(1===o.length)for(;o.length<r;)o.push(o[0]);return o.length<r?null:new tq(o.length>r?o.slice(0,r):o,n).getSubData(this,e.postfix,t)}_callConstructorMatrix(e,t){const n=this.getTypeInfo(e.type),i=e.type.getTypeName(),r=Pq[i];if(void 0===r)return null;const o=[];if(e instanceof NG)if(e.isVector){const t=e.vectorValue;for(const e of t)o.push(e)}else o.push(e.scalarValue);else if(e.args)for(const s of e.args){const e=this.evalExpression(s,t);e instanceof tq?o.push(...e.data):e instanceof JG?o.push(e.value):e instanceof nq&&o.push(...e.data)}if(n instanceof E$&&null===n.format&&(n.format=this.getTypeInfo("f32")),0===o.length){const i=new Array(r[2]).fill(0);return new nq(i,n).getSubData(this,e.postfix,t)}return o.length!==r[2]?null:new nq(o,n).getSubData(this,e.postfix,t)}}Lq._breakObj=new KG(new v$("BREAK",null),null),Lq._continueObj=new KG(new v$("CONTINUE",null),null),Lq._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class Rq{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class Oq{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new Rq,this._exec=new Lq,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const t=[];for(;!this._isAtEnd();){const e=this._global_decl_or_directive();if(!e)break;t.push(e)}if(this._deferArrayCountEval.length>0){for(const e of this._deferArrayCountEval){const t=e.arrayType,n=e.countNode;if(n instanceof MG){const e=n.name,i=this._context.constants.get(e);if(i)try{const e=i.constEvaluate(this._exec);t.count=e}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const n of t)n.search(e=>{e instanceof YG||e instanceof kG?e.type=this._forwardType(e.type):e instanceof AG?e.format=this._forwardType(e.format):e instanceof tG||e instanceof iG||e instanceof rG?e.type=this._forwardType(e.type):e instanceof K$?e.returnType=this._forwardType(e.returnType):e instanceof GG&&(e.type=this._forwardType(e.type))});return t}_forwardType(e){if(e instanceof EG){const t=this._getType(e.name);if(t)return t}else e instanceof kG?e.type=this._forwardType(e.type):e instanceof AG&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if("string"==typeof e){const t=new lq(e);this._tokens=t.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,t){return e.line=t??this._currentLine,e}_error(e,t){return{token:e,message:t,toString:()=>`${t}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==sq.eof}_match(e){if(e instanceof oq)return!!this._check(e)&&(this._advance(),!0);for(let t=0,n=e.length;t<n;++t){const n=e[t];if(this._check(n))return this._advance(),!0}return!1}_consume(e,t){if(this._check(e))return this._advance();throw this._error(this._peek(),`${t}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const t=this._peek();if(e instanceof Array){const n=t.type;let i=!1;for(const t of e){if(n===t)return!0;t===sq.tokens.name&&(i=!0)}if(i){const e=sq.tokens.name.rule.exec(t.lexeme);if(e&&0==e.index&&e[0]==t.lexeme)return!0}return!1}if(t.type===e)return!0;if(e===sq.tokens.name){const e=sq.tokens.name.rule.exec(t.lexeme);return e&&0==e.index&&e[0]==t.lexeme}return!1}_advance(){var e,t;return this._currentLine=null!==(t=null===(e=this._peek())||void 0===e?void 0:e.line)&&void 0!==t?t:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(sq.tokens.semicolon)&&!this._isAtEnd(););if(this._match(sq.keywords.alias)){const e=this._type_alias();return this._consume(sq.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}if(this._match(sq.keywords.diagnostic)){const e=this._diagnostic();return this._consume(sq.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}if(this._match(sq.keywords.requires)){const e=this._requires_directive();return this._consume(sq.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}if(this._match(sq.keywords.enable)){const e=this._enable_directive();return this._consume(sq.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}const e=this._attribute();if(this._check(sq.keywords.var)){const t=this._global_variable_decl();return null!=t&&(t.attributes=e),this._consume(sq.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(sq.keywords.override)){const t=this._override_variable_decl();return null!=t&&(t.attributes=e),this._consume(sq.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(sq.keywords.let)){const t=this._global_let_decl();return null!=t&&(t.attributes=e),this._consume(sq.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(sq.keywords.const)){const t=this._global_const_decl();return null!=t&&(t.attributes=e),this._consume(sq.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(sq.keywords.struct)){const t=this._struct_decl();return null!=t&&(t.attributes=e),this._exec.reflection.updateAST([t]),t}if(this._check(sq.keywords.fn)){const t=this._function_decl();return null!=t&&(t.attributes=e),this._exec.reflection.updateAST([t]),t}return null}_function_decl(){if(!this._match(sq.keywords.fn))return null;const e=this._currentLine,t=this._consume(sq.tokens.ident,"Expected function name.").toString();this._consume(sq.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(sq.tokens.paren_right))do{if(this._check(sq.tokens.paren_right))break;const e=this._attribute(),t=this._consume(sq.tokens.name,"Expected argument name.").toString();this._consume(sq.tokens.colon,"Expected ':' for argument type.");const i=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=i,n.push(this._updateNode(new GG(t,r,e))))}while(this._match(sq.tokens.comma));this._consume(sq.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(sq.tokens.arrow)){const e=this._attribute();i=this._type_decl(),null!=i&&(i.attributes=e)}const r=this._compound_statement(),o=this._currentLine;return this._updateNode(new K$(t,n,i,r,e,o),e)}_compound_statement(){const e=[];for(this._consume(sq.tokens.brace_left,"Expected '{' for block.");!this._check(sq.tokens.brace_right);){const t=this._statement();null!==t&&e.push(t)}return this._consume(sq.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(sq.tokens.semicolon)&&!this._isAtEnd(););if(this._check(sq.tokens.attr)&&this._attribute(),this._check(sq.keywords.if))return this._if_statement();if(this._check(sq.keywords.switch))return this._switch_statement();if(this._check(sq.keywords.loop))return this._loop_statement();if(this._check(sq.keywords.for))return this._for_statement();if(this._check(sq.keywords.while))return this._while_statement();if(this._check(sq.keywords.continuing))return this._continuing_statement();if(this._check(sq.keywords.static_assert))return this._static_assert_statement();if(this._check(sq.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(sq.keywords.return))e=this._return_statement();else if(this._check([sq.keywords.var,sq.keywords.let,sq.keywords.const]))e=this._variable_statement();else if(this._match(sq.keywords.discard))e=this._updateNode(new bG);else if(this._match(sq.keywords.break)){const t=this._updateNode(new xG);if(this._currentLoop.length>0){const e=this._currentLoop[this._currentLoop.length-1];t.loopId=e.id}e=t,this._check(sq.keywords.if)&&(this._advance(),t.condition=this._optional_paren_expression())}else if(this._match(sq.keywords.continue)){const t=this._updateNode(new wG);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${t.line}`);{const e=this._currentLoop[this._currentLoop.length-1];t.loopId=e.id}e=t}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return null!=e&&this._consume(sq.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(sq.keywords.static_assert))return null;const e=this._currentLine,t=this._optional_paren_expression();return this._updateNode(new Z$(t),e)}_while_statement(){if(!this._match(sq.keywords.while))return null;const e=this._updateNode(new Q$(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(sq.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(sq.keywords.continuing))return null;const t=this._currentLine,n=this._compound_statement();return this._updateNode(new J$(n,e),t)}_for_statement(){if(!this._match(sq.keywords.for))return null;this._consume(sq.tokens.paren_left,"Expected '('.");const e=this._updateNode(new eG(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(sq.tokens.semicolon)?null:this._for_init(),this._consume(sq.tokens.semicolon,"Expected ';'."),e.condition=this._check(sq.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(sq.tokens.semicolon,"Expected ';'."),e.increment=this._check(sq.tokens.paren_right)?null:this._for_increment(),this._consume(sq.tokens.paren_right,"Expected ')'."),this._check(sq.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(sq.keywords.var)){const e=this._variable_decl();if(null===e)throw this._error(this._peek(),"Variable declaration expected.");let t=null;return this._match(sq.tokens.equal)&&(t=this._short_circuit_or_expression()),this._updateNode(new tG(e.name,e.type,e.storage,e.access,t),e.line)}if(this._match(sq.keywords.let)){const e=this._currentLine,t=this._consume(sq.tokens.name,"Expected name for let.").toString();let n=null;if(this._match(sq.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}this._consume(sq.tokens.equal,"Expected '=' for let.");const i=this._short_circuit_or_expression();return this._updateNode(new iG(t,n,null,null,i),e)}if(this._match(sq.keywords.const)){const e=this._currentLine,t=this._consume(sq.tokens.name,"Expected name for const.").toString();let n=null;if(this._match(sq.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}this._consume(sq.tokens.equal,"Expected '=' for const.");const i=this._short_circuit_or_expression();return null===n&&i instanceof NG&&(n=i.type),this._updateNode(new rG(t,n,null,null,i),e)}return null}_increment_decrement_statement(){const e=this._current,t=this._unary_expression();if(null==t)return null;if(!this._check(sq.increment_operators))return this._current=e,null;const n=this._consume(sq.increment_operators,"Expected increment operator");return this._updateNode(new cG(n.type===sq.tokens.plus_plus?oG.increment:oG.decrement,t))}_assignment_statement(){let e=null;const t=this._currentLine;if(this._check(sq.tokens.brace_right))return null;let n=this._match(sq.tokens.underscore);if(n||(e=this._unary_expression()),!n&&null==e)return null;const i=this._consume(sq.assignment_operators,"Expected assignment operator."),r=this._short_circuit_or_expression();return this._updateNode(new uG(sG.parse(i.lexeme),e,r),t)}_func_call_statement(){if(!this._check(sq.tokens.ident))return null;const e=this._currentLine,t=this._current,n=this._consume(sq.tokens.ident,"Expected function name."),i=this._argument_expression_list();return null===i?(this._current=t,null):this._updateNode(new dG(n.lexeme,i),e)}_loop_statement(){if(!this._match(sq.keywords.loop))return null;this._check(sq.tokens.attr)&&this._attribute(),this._consume(sq.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new hG([],null));this._currentLoop.push(e);let t=this._statement();for(;null!==t;){if(Array.isArray(t))for(let n of t)e.body.push(n);else e.body.push(t);if(t instanceof J$){e.continuing=t;break}t=this._statement()}return this._currentLoop.pop(),this._consume(sq.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(sq.keywords.switch))return null;const e=this._updateNode(new fG(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(sq.tokens.attr)&&this._attribute(),this._consume(sq.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),null==e.cases||0==e.cases.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(sq.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let t=!1;for(;this._check([sq.keywords.default,sq.keywords.case]);){if(this._match(sq.keywords.case)){const n=this._case_selectors();for(const e of n)if(e instanceof HG){if(t)throw this._error(this._previous(),"Multiple default cases in switch statement.");t=!0;break}this._match(sq.tokens.colon),this._check(sq.tokens.attr)&&this._attribute(),this._consume(sq.tokens.brace_left,"Exected '{' for switch case.");const i=this._case_body();this._consume(sq.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new WG(n,i)))}if(this._match(sq.keywords.default)){if(t)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(sq.tokens.colon),this._check(sq.tokens.attr)&&this._attribute(),this._consume(sq.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(sq.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new $G(n)))}}return e}_case_selectors(){const e=[];for(this._match(sq.keywords.default)?e.push(this._updateNode(new HG)):e.push(this._shift_expression());this._match(sq.tokens.comma);)this._match(sq.keywords.default)?e.push(this._updateNode(new HG)):e.push(this._shift_expression());return e}_case_body(){if(this._match(sq.keywords.fallthrough))return this._consume(sq.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(null==e)return[];e instanceof Array||(e=[e]);const t=this._case_body();return 0==t.length?e:[...e,t[0]]}_if_statement(){if(!this._match(sq.keywords.if))return null;const e=this._currentLine,t=this._optional_paren_expression();this._check(sq.tokens.attr)&&this._attribute();const n=this._compound_statement();let i=[];this._match_elseif()&&(this._check(sq.tokens.attr)&&this._attribute(),i=this._elseif_statement(i));let r=null;return this._match(sq.keywords.else)&&(this._check(sq.tokens.attr)&&this._attribute(),r=this._compound_statement()),this._updateNode(new pG(t,n,i,r),e)}_match_elseif(){return this._tokens[this._current].type===sq.keywords.else&&this._tokens[this._current+1].type===sq.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const t=this._optional_paren_expression(),n=this._compound_statement();return e.push(this._updateNode(new qG(t,n))),this._match_elseif()&&(this._check(sq.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(sq.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new mG(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(sq.tokens.or_or);)e=this._updateNode(new jG(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(sq.tokens.and_and);)e=this._updateNode(new jG(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(sq.tokens.or);)e=this._updateNode(new jG(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(sq.tokens.xor);)e=this._updateNode(new jG(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(sq.tokens.and);)e=this._updateNode(new jG(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([sq.tokens.equal_equal,sq.tokens.not_equal])?this._updateNode(new jG(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([sq.tokens.less_than,sq.tokens.greater_than,sq.tokens.less_than_equal,sq.tokens.greater_than_equal]);)e=this._updateNode(new jG(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([sq.tokens.shift_left,sq.tokens.shift_right]);)e=this._updateNode(new jG(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([sq.tokens.plus,sq.tokens.minus]);)e=this._updateNode(new jG(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([sq.tokens.star,sq.tokens.forward_slash,sq.tokens.modulo]);)e=this._updateNode(new jG(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([sq.tokens.minus,sq.tokens.bang,sq.tokens.tilde,sq.tokens.star,sq.tokens.and])?this._updateNode(new UG(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),t=this._postfix_expression();return t&&(e.postfix=t),e}_postfix_expression(){if(this._match(sq.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(sq.tokens.bracket_right,"Expected ']'.");const t=this._updateNode(new BG(e)),n=this._postfix_expression();return n&&(t.postfix=n),t}if(this._match(sq.tokens.period)){const e=this._consume(sq.tokens.name,"Expected member name."),t=this._postfix_expression(),n=this._updateNode(new LG(e.lexeme));return t&&(n.postfix=t),n}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const t=this._getStruct(e);if(null!==t)return t;switch(e){case"void":return SG.void;case"bool":return SG.bool;case"i32":return SG.i32;case"u32":return SG.u32;case"f32":return SG.f32;case"f16":return SG.f16;case"vec2f":return TG.vec2f;case"vec3f":return TG.vec3f;case"vec4f":return TG.vec4f;case"vec2i":return TG.vec2i;case"vec3i":return TG.vec3i;case"vec4i":return TG.vec4i;case"vec2u":return TG.vec2u;case"vec3u":return TG.vec3u;case"vec4u":return TG.vec4u;case"vec2h":return TG.vec2h;case"vec3h":return TG.vec3h;case"vec4h":return TG.vec4h;case"mat2x2f":return TG.mat2x2f;case"mat2x3f":return TG.mat2x3f;case"mat2x4f":return TG.mat2x4f;case"mat3x2f":return TG.mat3x2f;case"mat3x3f":return TG.mat3x3f;case"mat3x4f":return TG.mat3x4f;case"mat4x2f":return TG.mat4x2f;case"mat4x3f":return TG.mat4x3f;case"mat4x4f":return TG.mat4x4f;case"mat2x2h":return TG.mat2x2h;case"mat2x3h":return TG.mat2x3h;case"mat2x4h":return TG.mat2x4h;case"mat3x2h":return TG.mat3x2h;case"mat3x3h":return TG.mat3x3h;case"mat3x4h":return TG.mat3x4h;case"mat4x2h":return TG.mat4x2h;case"mat4x3h":return TG.mat4x3h;case"mat4x4h":return TG.mat4x4h;case"mat2x2i":return TG.mat2x2i;case"mat2x3i":return TG.mat2x3i;case"mat2x4i":return TG.mat2x4i;case"mat3x2i":return TG.mat3x2i;case"mat3x3i":return TG.mat3x3i;case"mat3x4i":return TG.mat3x4i;case"mat4x2i":return TG.mat4x2i;case"mat4x3i":return TG.mat4x3i;case"mat4x4i":return TG.mat4x4i;case"mat2x2u":return TG.mat2x2u;case"mat2x3u":return TG.mat2x3u;case"mat2x4u":return TG.mat2x4u;case"mat3x2u":return TG.mat3x2u;case"mat3x3u":return TG.mat3x3u;case"mat3x4u":return TG.mat3x4u;case"mat4x2u":return TG.mat4x2u;case"mat4x3u":return TG.mat4x3u;case"mat4x4u":return TG.mat4x4u}return null}_validateTypeRange(e,t){if("i32"===t.name){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if("u32"===t.name&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(sq.tokens.ident)){const e=this._previous().toString();if(this._check(sq.tokens.paren_left)){const t=this._argument_expression_list(),n=this._getType(e);return null!==n?this._updateNode(new RG(n,t)):this._updateNode(new OG(e,t))}if(this._context.constants.has(e)){const t=this._context.constants.get(e);return this._updateNode(new DG(e,t.value))}return this._updateNode(new MG(e))}if(this._match(sq.tokens.int_literal)){const e=this._previous().toString();let t=e.endsWith("i")||e.endsWith("i")?SG.i32:e.endsWith("u")||e.endsWith("U")?SG.u32:SG.x32;const n=parseInt(e);return this._validateTypeRange(n,t),this._updateNode(new NG(new JG(n,this._exec.getTypeInfo(t)),t))}if(this._match(sq.tokens.uint_literal)){const e=parseInt(this._previous().toString());return this._validateTypeRange(e,SG.u32),this._updateNode(new NG(new JG(e,this._exec.getTypeInfo(SG.u32)),SG.u32))}if(this._match([sq.tokens.decimal_float_literal,sq.tokens.hex_float_literal])){let e=this._previous().toString(),t=e.endsWith("h");t&&(e=e.substring(0,e.length-1));const n=parseFloat(e);this._validateTypeRange(n,t?SG.f16:SG.f32);const i=t?SG.f16:SG.f32;return this._updateNode(new NG(new JG(n,this._exec.getTypeInfo(i)),i))}if(this._match([sq.keywords.true,sq.keywords.false])){let e=this._previous().toString()===sq.keywords.true.rule;return this._updateNode(new NG(new JG(e?1:0,this._exec.getTypeInfo(SG.bool)),SG.bool))}if(this._check(sq.tokens.paren_left))return this._paren_expression();if(this._match(sq.keywords.bitcast)){this._consume(sq.tokens.less_than,"Expected '<'.");const e=this._type_decl();this._consume(sq.tokens.greater_than,"Expected '>'.");const t=this._paren_expression();return this._updateNode(new FG(e,t))}const e=this._type_decl(),t=this._argument_expression_list();return this._updateNode(new RG(e,t))}_argument_expression_list(){if(!this._match(sq.tokens.paren_left))return null;const e=[];do{if(this._check(sq.tokens.paren_right))break;const t=this._short_circuit_or_expression();e.push(t)}while(this._match(sq.tokens.comma));return this._consume(sq.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(sq.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(sq.tokens.paren_right),e}_paren_expression(){this._consume(sq.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(sq.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(sq.keywords.struct))return null;const e=this._currentLine,t=this._consume(sq.tokens.ident,"Expected name for struct.").toString();this._consume(sq.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(sq.tokens.brace_right);){const e=this._attribute(),t=this._consume(sq.tokens.name,"Expected variable name.").toString();this._consume(sq.tokens.colon,"Expected ':' for struct member type.");const i=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=i),this._check(sq.tokens.brace_right)?this._match(sq.tokens.comma):this._consume(sq.tokens.comma,"Expected ',' for struct member."),n.push(this._updateNode(new YG(t,r,e)))}this._consume(sq.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,r=this._updateNode(new CG(t,n,e,i),e);return this._context.structs.set(t,r),r}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(sq.tokens.equal)){const t=this._const_expression();e.value=t}if(null!==e.type&&e.value instanceof NG){if("x32"!==e.value.type.name&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else null===e.type&&e.value instanceof NG&&(e.type="x32"===e.value.type.name?SG.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(sq.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(sq.keywords.const))return null;const t=this._consume(sq.tokens.name,"Expected variable name"),n=this._currentLine;let i=null;if(this._match(sq.tokens.colon)){const e=this._attribute();i=this._type_decl(),null!=i&&(i.attributes=e)}let r=null;this._consume(sq.tokens.equal,"const declarations require an assignment");const o=this._short_circuit_or_expression();try{let e=[SG.f32],n=o.constEvaluate(this._exec,e);n instanceof JG&&this._validateTypeRange(n.value,e[0]),e[0]instanceof TG&&null===e[0].format&&n.typeInfo instanceof E$&&null!==n.typeInfo.format&&("f16"===n.typeInfo.format.name?e[0].format=SG.f16:"f32"===n.typeInfo.format.name?e[0].format=SG.f32:"i32"===n.typeInfo.format.name?e[0].format=SG.i32:"u32"===n.typeInfo.format.name?e[0].format=SG.u32:"bool"===n.typeInfo.format.name&&(e[0].format=SG.bool)),r=this._updateNode(new NG(n,e[0])),this._exec.context.setVariable(t.toString(),n)}catch{r=o}if(null!==i&&r instanceof NG){if("x32"!==r.type.name&&i.getTypeName()!==r.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${r.type.name} to ${i.name}. Line:${this._currentLine}`);r.type=i,r.isScalar&&this._validateTypeRange(r.scalarValue,r.type)}else null===i&&r instanceof NG&&(i=null!==(e=null==r?void 0:r.type)&&void 0!==e?e:SG.f32,i===SG.x32&&(i=SG.i32));const s=this._updateNode(new rG(t.toString(),i,"","",r),n);return this._context.constants.set(s.name,s),s}_global_let_decl(){if(!this._match(sq.keywords.let))return null;const e=this._currentLine,t=this._consume(sq.tokens.name,"Expected variable name");let n=null;if(this._match(sq.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}let i=null;if(this._match(sq.tokens.equal)&&(i=this._const_expression()),null!==n&&i instanceof NG){if("x32"!==i.type.name&&n.getTypeName()!==i.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${i.type.name} to ${n.name}. Line:${this._currentLine}`);i.type=n}else null===n&&i instanceof NG&&(n="x32"===i.type.name?SG.i32:i.type);return i instanceof NG&&i.isScalar&&this._validateTypeRange(i.scalarValue,n),this._updateNode(new iG(t.toString(),n,"","",i),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(sq.keywords.var))return null;const e=this._currentLine;let t="",n="";this._match(sq.tokens.less_than)&&(t=this._consume(sq.storage_class,"Expected storage_class.").toString(),this._match(sq.tokens.comma)&&(n=this._consume(sq.access_mode,"Expected access_mode.").toString()),this._consume(sq.tokens.greater_than,"Expected '>'."));const i=this._consume(sq.tokens.name,"Expected variable name");let r=null;if(this._match(sq.tokens.colon)){const e=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=e)}return this._updateNode(new tG(i.toString(),r,t,n,null),e)}_override_decl(){if(!this._match(sq.keywords.override))return null;const e=this._consume(sq.tokens.name,"Expected variable name");let t=null;if(this._match(sq.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}return this._updateNode(new nG(e.toString(),t,null))}_diagnostic(){this._consume(sq.tokens.paren_left,"Expected '('");const e=this._consume(sq.tokens.ident,"Expected severity control name.");this._consume(sq.tokens.comma,"Expected ','");let t=this._consume(sq.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(sq.tokens.period)&&(t+=`.${this._consume(sq.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(sq.tokens.paren_right,"Expected ')'"),this._updateNode(new yG(e.toString(),t))}_enable_directive(){const e=this._consume(sq.tokens.ident,"identity expected.");return this._updateNode(new gG(e.toString()))}_requires_directive(){const e=[this._consume(sq.tokens.ident,"identity expected.").toString()];for(;this._match(sq.tokens.comma);){const t=this._consume(sq.tokens.ident,"identity expected.");e.push(t.toString())}return this._updateNode(new _G(e))}_type_alias(){const e=this._consume(sq.tokens.ident,"identity expected.");this._consume(sq.tokens.equal,"Expected '=' for type alias.");let t=this._type_decl();if(null===t)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);const n=this._updateNode(new vG(e.toString(),t));return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([sq.tokens.ident,...sq.texel_format,sq.keywords.bool,sq.keywords.f32,sq.keywords.i32,sq.keywords.u32])){const e=this._advance().toString();if(this._context.structs.has(e))return this._context.structs.get(e);if(this._context.aliases.has(e))return this._context.aliases.get(e).type;if(!this._getType(e)){const t=this._updateNode(new EG(e));return this._forwardTypeCount++,t}return this._updateNode(new SG(e))}let e=this._texture_sampler_types();if(e)return e;if(this._check(sq.template_types)){let e=this._advance().toString(),t=null,n=null;return this._match(sq.tokens.less_than)&&(t=this._type_decl(),n=null,this._match(sq.tokens.comma)&&(n=this._consume(sq.access_mode,"Expected access_mode for pointer").toString()),this._consume(sq.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new TG(e,t,n))}if(this._match(sq.keywords.ptr)){let e=this._previous().toString();this._consume(sq.tokens.less_than,"Expected '<' for pointer.");const t=this._consume(sq.storage_class,"Expected storage_class for pointer");this._consume(sq.tokens.comma,"Expected ',' for pointer.");const n=this._type_decl();let i=null;return this._match(sq.tokens.comma)&&(i=this._consume(sq.access_mode,"Expected access_mode for pointer").toString()),this._consume(sq.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new kG(e,t.toString(),n,i))}const t=this._attribute();if(this._match(sq.keywords.array)){let e=null,n=-1;const i=this._previous();let r=null;if(this._match(sq.tokens.less_than)){e=this._type_decl(),this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);let t="";if(this._match(sq.tokens.comma)){r=this._shift_expression();try{t=r.constEvaluate(this._exec).toString(),r=null}catch{t="1"}}this._consume(sq.tokens.greater_than,"Expected '>' for array."),n=t?parseInt(t):0}const o=this._updateNode(new AG(i.toString(),t,e,n));return r&&this._deferArrayCountEval.push({arrayType:o,countNode:r}),o}return null}_texture_sampler_types(){if(this._match(sq.sampler_type))return this._updateNode(new IG(this._previous().toString(),null,null));if(this._match(sq.depth_texture_type))return this._updateNode(new IG(this._previous().toString(),null,null));if(this._match(sq.sampled_texture_type)||this._match(sq.multisampled_texture_type)){const e=this._previous();this._consume(sq.tokens.less_than,"Expected '<' for sampler type.");const t=this._type_decl();return this._consume(sq.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new IG(e.toString(),t,null))}if(this._match(sq.storage_texture_type)){const e=this._previous();this._consume(sq.tokens.less_than,"Expected '<' for sampler type.");const t=this._consume(sq.texel_format,"Invalid texel format.").toString();this._consume(sq.tokens.comma,"Expected ',' after texel format.");const n=this._consume(sq.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(sq.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new IG(e.toString(),t,n))}return null}_attribute(){let e=[];for(;this._match(sq.tokens.attr);){const t=this._consume(sq.attribute_name,"Expected attribute name"),n=this._updateNode(new XG(t.toString(),null));if(this._match(sq.tokens.paren_left)){if(n.value=this._consume(sq.literal_or_ident,"Expected attribute value").toString(),this._check(sq.tokens.comma)){this._advance();do{const e=this._consume(sq.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(e)}while(this._match(sq.tokens.comma))}this._consume(sq.tokens.paren_right,"Expected ')'")}e.push(n)}return 0==e.length?null:e}}class Mq extends wq{constructor(e){super(),e&&this.update(e)}update(e){const t=(new Oq).parse(e);this.updateAST(t)}}function Dq(e){return null!=e&&e.format?`${e.name}<${e.format.name}>`:e.name}const Nq={};function Fq(e="id"){return Nq[e]=Nq[e]||1,`${e}-${Nq[e]++}`}class Bq{constructor(e){if(sB(this,"id"),sB(this,"userData",{}),sB(this,"topology"),sB(this,"bufferLayout",[]),sB(this,"vertexCount"),sB(this,"indices"),sB(this,"attributes"),this.id=e.id||Fq("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&eV.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;null==(e=this.indices)||e.destroy();for(const t of Object.values(this.attributes))t.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}const zq=class e{constructor(e){sB(this,"device"),sB(this,"cachingEnabled"),sB(this,"destroyPolicy"),sB(this,"debug"),sB(this,"_hashCounter",0),sB(this,"_hashes",{}),sB(this,"_renderPipelineCache",{}),sB(this,"_computePipelineCache",{}),this.device=e,this.cachingEnabled=e.props._cachePipelines,this.destroyPolicy=e.props._cacheDestroyPolicy,this.debug=e.props.debugFactories}static getDefaultPipelineFactory(t){return t._lumaData.defaultPipelineFactory=t._lumaData.defaultPipelineFactory||new e(t),t._lumaData.defaultPipelineFactory}get[Symbol.toStringTag](){return"PipelineFactory"}toString(){return`PipelineFactory(${this.device.id})`}createRenderPipeline(e){var t;if(!this.cachingEnabled)return this.device.createRenderPipeline(e);const n={...KV.defaultProps,...e},i=this._renderPipelineCache,r=this._hashRenderPipeline(n);let o=null==(t=i[r])?void 0:t.pipeline;return o?(i[r].useCount++,this.debug&&Xj.log(3,`${this}: ${i[r].pipeline} reused, count=${i[r].useCount}, (id=${e.id})`)()):(o=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:Fq("unnamed-cached")}),o.hash=r,i[r]={pipeline:o,useCount:1},this.debug&&Xj.log(3,`${this}: ${o} created, count=${i[r].useCount}`)()),o}createComputePipeline(e){var t;if(!this.cachingEnabled)return this.device.createComputePipeline(e);const n={...QV.defaultProps,...e},i=this._computePipelineCache,r=this._hashComputePipeline(n);let o=null==(t=i[r])?void 0:t.pipeline;return o?(i[r].useCount++,this.debug&&Xj.log(3,`${this}: ${i[r].pipeline} reused, count=${i[r].useCount}, (id=${e.id})`)()):(o=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0}),o.hash=r,i[r]={pipeline:o,useCount:1},this.debug&&Xj.log(3,`${this}: ${o} created, count=${i[r].useCount}`)()),o}release(e){if(!this.cachingEnabled)return void e.destroy();const t=this._getCache(e),n=e.hash;t[n].useCount--,0===t[n].useCount?(this._destroyPipeline(e),this.debug&&Xj.log(3,`${this}: ${e} released and destroyed`)()):t[n].useCount<0?(Xj.error(`${this}: ${e} released, useCount < 0, resetting`)(),t[n].useCount=0):this.debug&&Xj.log(3,`${this}: ${e} released, count=${t[n].useCount}`)()}_destroyPipeline(e){const t=this._getCache(e);switch(this.destroyPolicy){case"never":return!1;case"unused":return delete t[e.hash],e.destroy(),!0}}_getCache(e){let t;if(e instanceof QV&&(t=this._computePipelineCache),e instanceof KV&&(t=this._renderPipelineCache),!t)throw new Error(`${this}`);if(!t[e.hash])throw new Error(`${this}: ${e} matched incorrect entry`);return t}_hashComputePipeline(e){const{type:t}=this.device;return`${t}/C/${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const t=e.vs?this._getHash(e.vs.source):0,n=e.fs?this._getHash(e.fs.source):0,i=this._getHash(JSON.stringify(e.bufferLayout)),{type:r}=this.device;if("webgl"===r)return`${r}/R/${t}/${n}V-BL${i}`;{const o=this._getHash(JSON.stringify(e.parameters));return`${r}/R/${t}/${n}V-T${e.topology}P${o}BL${i}`}}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};sB(zq,"defaultProps",{...KV.defaultProps});let Uq=zq;const jq=class e{constructor(e){sB(this,"device"),sB(this,"cachingEnabled"),sB(this,"destroyPolicy"),sB(this,"debug"),sB(this,"_cache",{}),this.device=e,this.cachingEnabled=e.props._cacheShaders,this.destroyPolicy=e.props._cacheDestroyPolicy,this.debug=!0}static getDefaultShaderFactory(t){var n;return(n=t._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new e(t)),t._lumaData.defaultShaderFactory}get[Symbol.toStringTag](){return"ShaderFactory"}toString(){return`${this[Symbol.toStringTag]}(${this.device.id})`}createShader(e){if(!this.cachingEnabled)return this.device.createShader(e);const t=this._hashShader(e);let n=this._cache[t];if(n)n.useCount++,this.debug&&Xj.log(3,`${this}: Reusing shader ${n.shader.id} count=${n.useCount}`)();else{const i=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[t]=n={shader:i,useCount:1},this.debug&&Xj.log(3,`${this}: Created new shader ${i.id}`)()}return n.shader}release(e){if(!this.cachingEnabled)return void e.destroy();const t=this._hashShader(e),n=this._cache[t];if(n)if(n.useCount--,0===n.useCount)"unused"===this.destroyPolicy&&(delete this._cache[t],n.shader.destroy(),this.debug&&Xj.log(3,`${this}: Releasing shader ${e.id}, destroyed`)());else{if(n.useCount<0)throw new Error(`ShaderFactory: Shader ${e.id} released too many times`);this.debug&&Xj.log(3,`${this}: Releasing shader ${e.id} count=${n.useCount}`)()}}_hashShader(e){return`${e.stage}:${e.source}`}};sB(jq,"defaultProps",{...qV.defaultProps});let Vq=jq,Hq=null,Wq=null;function $q(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!$q(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(const o of i)if(!t.hasOwnProperty(o)||!$q(e[o],t[o],n-1))return!1;return!0}return!1}class Gq{constructor(e){sB(this,"bufferLayouts"),this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(t=>t.name===e)||null}getAttributeNamesForBuffer(e){var t;return e.attributes?null==(t=e.attributes)?void 0:t.map(e=>e.attribute):[e.name]}mergeBufferLayouts(e,t){const n=[...e];for(const i of t){const e=n.findIndex(e=>e.name===i.name);e<0?n.push(i):n[e]=i}return n}getBufferIndex(e){const t=this.bufferLayouts.findIndex(t=>t.name===e);return-1===t&&Xj.warn(`BufferLayout: Missing buffer for "${e}".`)(),t}}function qq(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach(n=>{const i=e[n];!function(e){return function(e){return function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(e)||function(e){return!!Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}(e)}(e)||"number"==typeof e||"boolean"==typeof e}(i)?t.bindings[n]=i:t.uniforms[n]=i}),t}class Yq{constructor(e,t){sB(this,"options",{disableWarnings:!1}),sB(this,"modules"),sB(this,"moduleUniforms"),sB(this,"moduleBindings"),Object.assign(this.options,t);const n=ZW(Object.values(e).filter(e=>e.dependencies));for(const i of n)e[i.name]=i;Xj.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[i,r]of Object.entries(e))this._addModule(r),r.name&&i!==r.name&&!this.options.disableWarnings&&Xj.warn(`Module name: ${i} vs ${r.name}`)()}destroy(){}setProps(e){var t;for(const n of Object.keys(e)){const i=n,r=e[i]||{},o=this.modules[i];if(!o){this.options.disableWarnings||Xj.warn(`Module ${n} not found`)();continue}const s=this.moduleUniforms[i],a=this.moduleBindings[i],l=(null==(t=o.getUniforms)?void 0:t.call(o,r,s))||r,{uniforms:c,bindings:u}=qq(l);this.moduleUniforms[i]={...s,...c},this.moduleBindings[i]={...a,...u}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const t of Object.values(this.moduleBindings))Object.assign(e,t);return e}getDebugTable(){var e;const t={};for(const[n,i]of Object.entries(this.moduleUniforms))for(const[r,o]of Object.entries(i))t[`${n}.${r}`]={type:null==(e=this.modules[n].uniformTypes)?void 0:e[r],value:String(o)};return t}_addModule(e){const t=e.name;this.moduleUniforms[t]=e.defaultUniforms||{},this.moduleBindings[t]={}}}const Xq=["+X","-X","+Y","-Y","+Z","-Z"],Kq=["+X","-X","+Y","-Y","+Z","-Z"],Zq=class e{constructor(t,n){sB(this,"device"),sB(this,"id"),sB(this,"props"),sB(this,"texture"),sB(this,"sampler"),sB(this,"view"),sB(this,"ready"),sB(this,"isReady",!1),sB(this,"destroyed",!1),sB(this,"resolveReady",()=>{}),sB(this,"rejectReady",()=>{}),this.device=t;const i=Fq("async-texture");this.props={...e.defaultProps,id:i,...n},this.id=this.props.id,"string"==typeof(null==(n={...n})?void 0:n.data)&&"2d"===n.dimension&&(n.data=async function(e){const t=new Image;return t.crossOrigin="anonymous",t.src=e.startsWith("http")?e:""+e,await t.decode(),await createImageBitmap(t)}(n.data)),n.mipmaps&&(n.mipLevels="auto"),this.ready=new Promise((e,t)=>{this.resolveReady=()=>{this.isReady=!0,e()},this.rejectReady=t}),this.initAsync(n)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){const t=e.data,n=await Jq(t).then(void 0,this.rejectReady);if(this.destroyed)return;const i=this.props.width&&this.props.height?{width:this.props.width,height:this.props.height}:this.getTextureDataSize(n);if(!i)throw new Error("Texture size could not be determined");const r={...i,...e,data:void 0,mipLevels:1},o=this.device.getMipLevelCount(r.width,r.height);if(r.mipLevels="auto"===this.props.mipLevels?o:Math.min(o,this.props.mipLevels),this.texture=this.device.createTexture(r),this.sampler=this.texture.sampler,this.view=this.texture.view,e.data)switch(this.props.dimension){case"1d":this._setTexture1DData(this.texture,n);break;case"2d":this._setTexture2DData(n);break;case"3d":this._setTexture3DData(this.texture,n);break;case"2d-array":this._setTextureArrayData(this.texture,n);break;case"cube":this._setTextureCubeData(this.texture,n);break;case"cube-array":this._setTextureCubeArrayData(this.texture,n)}this.props.mipmaps&&this.generateMipmaps(),Xj.info(1,`${this} loaded`),this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}generateMipmaps(){this.texture.generateMipmapsWebGL()}setSampler(e={}){this.texture.setSampler(e instanceof BV?e:this.device.createSampler(e))}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const t=this.texture;this.texture=t.clone(e),t.destroy()}return!0}isTextureLevelData(e){const t=null==e?void 0:e.data;return ArrayBuffer.isView(t)}getTextureDataSize(e){if(!e||ArrayBuffer.isView(e))return null;if(Array.isArray(e))return this.getTextureDataSize(e[0]);if(this.device.isExternalImage(e))return this.device.getExternalImageSize(e);if(e&&"object"==typeof e&&e.constructor===Object){const t=Object.values(e)[0];return{width:t.width,height:t.height}}throw new Error("texture size deduction failed")}getCubeFaceDepth(e){switch(e){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(e)}}setTextureData(e){}_setTexture1DData(e,t){throw new Error("setTexture1DData not supported in WebGL.")}_setTexture2DData(e,t=0){if(!this.texture)throw new Error("Texture not initialized");const n=this._normalizeTextureData(e);n.length>1&&!1!==this.props.mipmaps&&Xj.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let i=0;i<n.length;i++){const e=n[i];this.device.isExternalImage(e)?this.texture.copyExternalImage({image:e,depth:t,mipLevel:i,flipY:!0}):this.texture.copyImageData({data:e.data,mipLevel:i})}}_setTexture3DData(e,t){var n;if("3d"!==(null==(n=this.texture)?void 0:n.props.dimension))throw new Error(this.id);for(let i=0;i<t.length;i++)this._setTexture2DData(t[i],i)}_setTextureCubeData(e,t){var n;if("cube"!==(null==(n=this.texture)?void 0:n.props.dimension))throw new Error(this.id);for(const[i,r]of Object.entries(t)){const e=Kq.indexOf(i);this._setTexture2DData(r,e)}}_setTextureArrayData(e,t){var n;if("2d-array"!==(null==(n=this.texture)?void 0:n.props.dimension))throw new Error(this.id);for(let i=0;i<t.length;i++)this._setTexture2DData(t[i],i)}_setTextureCubeArrayData(e,t){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}_setTextureCubeFaceData(e,t,n,i=0){Array.isArray(t)&&t.length>1&&!1!==this.props.mipmaps&&Xj.warn(`${this.id} has mipmap and multiple LODs.`)();const r=Xq.indexOf(n);this._setTexture2DData(t,r)}_normalizeTextureData(e){const t=this.texture;let n;return n=ArrayBuffer.isView(e)?[{data:e,width:t.width,height:t.height}]:Array.isArray(e)?e:[e],n}};sB(Zq,"defaultProps",{...jV.defaultProps,data:null,mipmaps:!1});let Qq=Zq;async function Jq(e){if(e=await e,Array.isArray(e))return await Promise.all(e.map(Jq));if(e&&"object"==typeof e&&e.constructor===Object){const t=e,n=await Promise.all(Object.values(t)),i=Object.keys(t),r={};for(let e=0;e<i.length;e++)r[i[e]]=n[e];return r}return e}const eY=class e{constructor(t,n){var i,r,o,s;sB(this,"device"),sB(this,"id"),sB(this,"source"),sB(this,"vs"),sB(this,"fs"),sB(this,"pipelineFactory"),sB(this,"shaderFactory"),sB(this,"userData",{}),sB(this,"parameters"),sB(this,"topology"),sB(this,"bufferLayout"),sB(this,"isInstanced"),sB(this,"instanceCount",0),sB(this,"vertexCount"),sB(this,"indexBuffer",null),sB(this,"bufferAttributes",{}),sB(this,"constantAttributes",{}),sB(this,"bindings",{}),sB(this,"vertexArray"),sB(this,"transformFeedback",null),sB(this,"pipeline"),sB(this,"shaderInputs"),sB(this,"_uniformStore"),sB(this,"_attributeInfos",{}),sB(this,"_gpuGeometry",null),sB(this,"props"),sB(this,"_pipelineNeedsUpdate","newly created"),sB(this,"_needsRedraw","initializing"),sB(this,"_destroyed",!1),sB(this,"_lastDrawTimestamp",-1),sB(this,"_lastLogTime",0),sB(this,"_logOpen",!1),sB(this,"_drawCount",0),this.props={...e.defaultProps,...n},n=this.props,this.id=n.id||Fq("model"),this.device=t,Object.assign(this.userData,n.userData);const a=Object.fromEntries((null==(i=this.props.modules)?void 0:i.map(e=>[e.name,e]))||[]),l=n.shaderInputs||new Yq(a,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(l);const c=function(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}(t),u=((null==(r=this.props.modules)?void 0:r.length)>0?this.props.modules:null==(o=this.shaderInputs)?void 0:o.getModules())||[];if("webgpu"===this.device.type&&this.props.source){const{source:e,getUniforms:t}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:c,...this.props,modules:u});this.source=e,this._getModuleUniforms=t,(s=this.props).shaderLayout||(s.shaderLayout=function(e){var t;const n={attributes:[],bindings:[]};let i;try{i=function(e){try{return new Mq(e)}catch(n){if(n instanceof Error)throw n;let t="WGSL parse error";throw"object"==typeof n&&null!=n&&n.message&&(t+=`: ${n.message} `),"object"==typeof n&&null!=n&&n.token&&(t+=n.token.line||""),new Error(t,{cause:n})}}(e)}catch(u){return Xj.error(u.message)(),n}for(const s of i.uniforms){const e=[];for(const n of(null==(t=s.type)?void 0:t.members)||[])e.push({name:n.name,type:Dq(n.type)});n.bindings.push({type:"uniform",name:s.name,group:s.group,location:s.binding,members:e})}for(const s of i.textures)n.bindings.push({type:"texture",name:s.name,group:s.group,location:s.binding});for(const s of i.samplers)n.bindings.push({type:"sampler",name:s.name,group:s.group,location:s.binding});const r=i.entry.vertex[0],o=(null==r?void 0:r.inputs.length)||0;for(let s=0;s<o;s++){const e=r.inputs[s];if("location"===e.locationType){const t=Dq(e.type);n.attributes.push({name:e.name,location:Number(e.location),type:t})}}return n}(this.source))}else{const{vs:e,fs:t,getUniforms:n}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:c,...this.props,modules:u});this.vs=e,this.fs=t,this._getModuleUniforms=n}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||Uq.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||Vq.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=t.createVertexArray({shaderLayout:this.pipeline.shaderLayout,bufferLayout:this.pipeline.bufferLayout}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),null==(e=this._gpuGeometry)||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const t=this._areBindingsLoading();if(t)return Xj.info(2,`>>> DRAWING ABORTED ${this.id}: ${t} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let n;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const t=this._getBindings();this.pipeline.setBindings(t,{disableWarnings:this.props.disableWarnings});const{indexBuffer:i}=this.vertexArray,r=i?i.byteLength/("uint32"===i.indexType?4:2):void 0;n=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:r,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),n?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",n}setGeometry(e){var t;null==(t=this._gpuGeometry)||t.destroy();const n=e&&function(e,t){if(t instanceof Bq)return t;const n=function(e,t){if(!t.indices)return;const n=t.indices.value;return e.createBuffer({usage:eV.INDEX,data:n})}(e,t),{attributes:i,bufferLayout:r}=function(e,t){const n=[],i={};for(const[r,o]of Object.entries(t.attributes)){let t=r;switch(r){case"POSITION":t="positions";break;case"NORMAL":t="normals";break;case"TEXCOORD_0":t="texCoords";break;case"COLOR_0":t="colors"}if(o){i[t]=e.createBuffer({data:o.value,id:`${r}-buffer`});const{value:s,size:a,normalized:l}=o;n.push({name:t,format:aV(s,a,l)})}}return{attributes:i,bufferLayout:n,vertexCount:t._calculateVertexCount(t.attributes,t.indices)}}(e,t);return new Bq({topology:t.topology||"triangle-list",bufferLayout:r,vertexCount:t.vertexCount,indices:n,attributes:i})}(this.device,e);if(n){this.setTopology(n.topology||"triangle-list");const e=new Gq(this.bufferLayout);this.bufferLayout=e.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const t=new Gq(this.bufferLayout);this.bufferLayout=this._gpuGeometry?t.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({shaderLayout:this.pipeline.shaderLayout,bufferLayout:this.pipeline.bufferLayout}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){$q(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,void 0===this.isInstanced&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new hH(this.shaderInputs.modules);for(const[t,n]of Object.entries(this.shaderInputs.modules))if(nY(n)){const e=this._uniformStore.getManagedUniformBuffer(this.device,t);this.bindings[`${t}Uniforms`]=e}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,t){const n=(null==t?void 0:t.disableWarnings)??this.props.disableWarnings;e.indices&&Xj.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=function(e,t){const n=Object.fromEntries(e.attributes.map(e=>[e.name,e.location])),i=t.slice();return i.sort((e,t)=>{const i=e.attributes?e.attributes.map(e=>e.attribute):[e.name],r=t.attributes?t.attributes.map(e=>e.attribute):[t.name];return Math.min(...i.map(e=>n[e]))-Math.min(...r.map(e=>n[e]))}),i}(this.pipeline.shaderLayout,this.bufferLayout);const i=new Gq(this.bufferLayout);for(const[r,o]of Object.entries(e)){const e=i.getBufferLayout(r);if(!e){n||Xj.warn(`Model(${this.id}): Missing layout for buffer "${r}".`)();continue}const t=i.getAttributeNamesForBuffer(e);let s=!1;for(const n of t){const e=this._attributeInfos[n];if(e){const t="webgpu"===this.device.type?i.getBufferIndex(e.bufferName):e.location;this.vertexArray.setBuffer(t,o),s=!0}}!s&&!n&&Xj.warn(`Model(${this.id}): Ignoring buffer "${o.id}" for unknown attribute "${r}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,t){for(const[n,i]of Object.entries(e)){const e=this._attributeInfos[n];e?this.vertexArray.setConstantWebGL(e.location,i):((null==t?void 0:t.disableWarnings)??this.props.disableWarnings)||Xj.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof Qq&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[t,n]of Object.entries(this.bindings))n instanceof Qq?n.isReady&&(e[t]=n.texture):e[t]=n;return e}_getBindingsUpdateTimestamp(){let e=0;for(const t of Object.values(this.bindings))t instanceof HV?e=Math.max(e,t.texture.updateTimestamp):t instanceof eV||t instanceof jV?e=Math.max(e,t.updateTimestamp):t instanceof Qq?e=t.texture?Math.max(e,t.texture.updateTimestamp):1/0:t instanceof BV||(e=Math.max(e,t.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const t={...e.attributes};for(const[n]of Object.entries(t))!this.pipeline.shaderLayout.attributes.find(e=>e.name===n)&&"positions"!==n&&delete t[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(t,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,t=null;this.pipeline&&(Xj.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,t=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:n,fs:i}),this._attributeInfos=iH(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),t&&this.shaderFactory.release(t)}return this.pipeline}_logDrawCallStart(){const e=Xj.level>3?0:1e4;Xj.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,Xj.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:Xj.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=function(e){var t;const n={},i="Values";if(0===e.attributes.length&&(null==(t=e.varyings)||!t.length))return{"No attributes or varyings":{[i]:"N/A"}};for(const r of e.attributes)r&&(n[`in ${r.location} ${r.name}: ${r.type}`]={[i]:r.stepMode||"vertex"});for(const r of e.varyings||[])n[`out ${r.location} ${r.name}`]={[i]:JSON.stringify(r)};return n}(this.pipeline.shaderLayout,this.id);Xj.table(2,e)();const t=this.shaderInputs.getDebugTable();Xj.table(2,t)();const n=this._getAttributeDebugTable();Xj.table(2,this._attributeInfos)(),Xj.table(2,n)(),Xj.groupEnd(2)(),this._logOpen=!1}}_logFramebuffer(e){const t=this.device.props.debugFramebuffers;if(this._drawCount++,!t)return;const n=e.props.framebuffer;n&&function(e,{id:t,minimap:n,opaque:i,top:r="0",left:o="0",rgbaScale:s=1}){Hq||(Hq=document.createElement("canvas"),Hq.id=t,Hq.title=t,Hq.style.zIndex="100",Hq.style.position="absolute",Hq.style.top=r,Hq.style.left=o,Hq.style.border="blue 5px solid",Hq.style.transform="scaleY(-1)",document.body.appendChild(Hq),Wq=Hq.getContext("2d")),(Hq.width!==e.width||Hq.height!==e.height)&&(Hq.width=e.width/2,Hq.height=e.height/2,Hq.style.width="400px",Hq.style.height="400px");const a=e.device.readPixelsToArrayWebGL(e),l=null==Wq?void 0:Wq.createImageData(e.width,e.height);if(l){for(let e=0;e<a.length;e+=4)l.data[0+e+0]=a[e+0]*s,l.data[0+e+1]=a[e+1]*s,l.data[0+e+2]=a[e+2]*s,l.data[0+e+3]=i?255:a[e+3]*s;null==Wq||Wq.putImageData(l,0,0)}}(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[t,n]of Object.entries(this._attributeInfos)){const i=this.vertexArray.attributes[n.location];e[n.location]={name:t,type:n.shaderType,values:i?this._getBufferOrConstantValues(i,n.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:t}=this.vertexArray,n="uint32"===t.indexType?new Uint32Array(t.debugData):new Uint16Array(t.debugData);e.indices={name:"indices",type:t.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,t){const n=rV(t);return(e instanceof eV?new n(e.debugData):e).toString()}};sB(eY,"defaultProps",{...KV.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:y$.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let tY=eY;function nY(e){return!(!e.uniformTypes||function(e){for(const t in e)return!1;return!0}(e.uniformTypes))}class iY{constructor(e,t,n,i,r){this._debugRandomNumber=Math.floor(1e3*Math.random()),this.device=e,this.config=t,this.store=n,this.data=i,r&&(this.points=r)}}function rY(e){const t=new Float32Array(e*e*2);for(let n=0;n<e;n++)for(let i=0;i<e;i++){const r=n*e*2+2*i;t[r+0]=i,t[r+1]=n}return t}function oY(e,t){return t*(EV.getInfo(e).bytesPerPixel??0)}const sY="#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 vertexCoord; // Vertex coordinates in normalized device coordinates\nout vec2 textureCoords; // Texture coordinates to pass to the fragment shader\n\nvoid main() {\n    // Convert vertex coordinates from [-1, 1] range to [0, 1] range for texture sampling\n    textureCoords = (vertexCoord + 1.0) / 2.0;\n    gl_Position = vec4(vertexCoord, 0, 1);\n}\n";class aY extends iY{create(){var e;const{device:t,store:n}=this,{pointsTextureSize:i}=n;if(i){if(this.centermassTexture||(this.centermassTexture=t.createTexture({width:1,height:1,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST})),this.centermassTexture.copyImageData({data:new Float32Array(4).fill(0),bytesPerRow:oY("rgba32float",1),mipLevel:0,x:0,y:0}),this.centermassFbo||(this.centermassFbo=t.createFramebuffer({width:1,height:1,colorAttachments:[this.centermassTexture]})),!this.pointIndices||this.previousPointsTextureSize!==n.pointsTextureSize){this.pointIndices&&!this.pointIndices.destroyed&&this.pointIndices.destroy();const i=rY(n.pointsTextureSize);this.pointIndices=t.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST}),null==(e=this.calculateCentermassCommand)||e.setAttributes({pointIndices:this.pointIndices})}this.previousPointsTextureSize=i}}initPrograms(){const{device:e,store:t,points:n}=this;!n||!t.pointsTextureSize||!this.centermassFbo||this.centermassFbo.destroyed||!this.centermassTexture||this.centermassTexture.destroyed||(this.forceVertexCoordBuffer||(this.forceVertexCoordBuffer=e.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.calculateUniformStore||(this.calculateUniformStore=new hH({calculateCentermassUniforms:{uniformTypes:{pointsTextureSize:"f32"}}})),this.forceUniformStore||(this.forceUniformStore=new hH({forceCenterUniforms:{uniformTypes:{centerForce:"f32",alpha:"f32"}}})),this.calculateCentermassCommand||(this.calculateCentermassCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nin vec4 rgba;\nout vec4 fragColor;\n\nvoid main() {\n  fragColor = rgba;\n}",vs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform calculateCentermassUniforms {\n  float pointsTextureSize;\n} calculateCentermass;\n\n#define pointsTextureSize calculateCentermass.pointsTextureSize\n#else\nuniform float pointsTextureSize;\n#endif\n\nin vec2 pointIndices;\n\nout vec4 rgba;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, pointIndices / pointsTextureSize);\n  rgba = vec4(pointPosition.xy, 1.0, 0.0);\n\n  gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n  gl_PointSize = 1.0;\n}\n",topology:"point-list",attributes:{...this.pointIndices&&{pointIndices:this.pointIndices}},bufferLayout:[{name:"pointIndices",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{calculateCentermassUniforms:this.calculateUniformStore.getManagedUniformBuffer(e,"calculateCentermassUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one",depthWriteEnabled:!1,depthCompare:"always"}})),this.calculateCentermassCommand.setVertexCount(this.data.pointsNumber??0),this.runCommand||(this.runCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D centermassTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform forceCenterUniforms {\n  float centerForce;\n  float alpha;\n} forceCenter;\n\n#define centerForce forceCenter.centerForce\n#define alpha forceCenter.alpha\n#else\nuniform float centerForce;\nuniform float alpha;\n#endif\n\nin vec2 textureCoords;\nout vec4 fragColor;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec4 velocity = vec4(0.0);\n  vec4 centermassValues = texture(centermassTexture, vec2(0.0));\n  vec2 centermassPosition = centermassValues.xy / centermassValues.b;\n  vec2 distVector = centermassPosition - pointPosition.xy;\n  float dist = sqrt(dot(distVector, distVector));\n  if (dist > 0.0) {\n    float angle = atan(distVector.y, distVector.x);\n    float addV = alpha * centerForce * dist * 0.01;\n    velocity.rg += addV * vec2(cos(angle), sin(angle));\n  }\n\n  fragColor = velocity;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.forceVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{forceCenterUniforms:this.forceUniformStore.getManagedUniformBuffer(e,"forceCenterUniforms")},parameters:{depthWriteEnabled:!1,depthCompare:"always"}})))}run(){const{device:e,store:t,points:n}=this;if(!n||!this.calculateCentermassCommand||!this.calculateUniformStore||!this.runCommand||!this.forceUniformStore||!this.centermassFbo||!this.centermassTexture||!n.previousPositionTexture||n.previousPositionTexture.destroyed||!n.velocityFbo||n.velocityFbo.destroyed||t.pointsTextureSize!==this.previousPointsTextureSize||!this.pointIndices)return;const i=e.beginRenderPass({framebuffer:this.centermassFbo,clearColor:[0,0,0,0]});this.calculateUniformStore.setUniforms({calculateCentermassUniforms:{pointsTextureSize:t.pointsTextureSize??0}}),this.calculateCentermassCommand.setBindings({positionsTexture:n.previousPositionTexture}),this.calculateCentermassCommand.draw(i),i.end(),this.forceUniformStore.setUniforms({forceCenterUniforms:{centerForce:this.config.simulationCenter??0,alpha:t.alpha}}),this.runCommand.setBindings({positionsTexture:n.previousPositionTexture,centermassTexture:this.centermassTexture});const r=e.beginRenderPass({framebuffer:n.velocityFbo,clearColor:[0,0,0,0]});this.runCommand.draw(r),r.end()}destroy(){var e,t,n,i;null==(e=this.calculateCentermassCommand)||e.destroy(),this.calculateCentermassCommand=void 0,null==(t=this.runCommand)||t.destroy(),this.runCommand=void 0,this.centermassFbo&&!this.centermassFbo.destroyed&&this.centermassFbo.destroy(),this.centermassFbo=void 0,this.centermassTexture&&!this.centermassTexture.destroyed&&this.centermassTexture.destroy(),this.centermassTexture=void 0,null==(n=this.calculateUniformStore)||n.destroy(),this.calculateUniformStore=void 0,null==(i=this.forceUniformStore)||i.destroy(),this.forceUniformStore=void 0,this.pointIndices&&!this.pointIndices.destroyed&&this.pointIndices.destroy(),this.pointIndices=void 0,this.forceVertexCoordBuffer&&!this.forceVertexCoordBuffer.destroyed&&this.forceVertexCoordBuffer.destroy(),this.forceVertexCoordBuffer=void 0,this.previousPointsTextureSize=void 0}}class lY extends iY{initPrograms(){const{device:e,points:t,store:n}=this;!t||!n.pointsTextureSize||(this.vertexCoordBuffer||(this.vertexCoordBuffer=e.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.uniformStore||(this.uniformStore=new hH({forceGravityUniforms:{uniformTypes:{gravity:"f32",spaceSize:"f32",alpha:"f32"}}})),this.runCommand||(this.runCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform forceGravityUniforms {\n  float gravity;\n  float spaceSize;\n  float alpha;\n} forceGravity;\n\n#define gravity forceGravity.gravity\n#define spaceSize forceGravity.spaceSize\n#define alpha forceGravity.alpha\n#else\nuniform float gravity;\nuniform float spaceSize;\nuniform float alpha;\n#endif\n\nin vec2 textureCoords;\nout vec4 fragColor;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n\n  vec4 velocity = vec4(0.0);\n\n  vec2 centerPosition = vec2(spaceSize * 0.5);\n  vec2 distVector = centerPosition - pointPosition.rg;\n  float dist = sqrt(dot(distVector, distVector));\n  if (dist > 0.0) {\n    float angle = atan(distVector.y, distVector.x);\n    float additionalVelocity = alpha * gravity * dist * 0.1;\n    velocity.rg += additionalVelocity * vec2(cos(angle), sin(angle));\n  }\n\n  fragColor = velocity;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.vertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{forceGravityUniforms:this.uniformStore.getManagedUniformBuffer(e,"forceGravityUniforms")},parameters:{depthWriteEnabled:!1,depthCompare:"always"}})))}run(){const{device:e,points:t,store:n}=this;if(!t||!this.runCommand||!this.uniformStore||!t.previousPositionTexture||t.previousPositionTexture.destroyed||!t.velocityFbo||t.velocityFbo.destroyed)return;this.uniformStore.setUniforms({forceGravityUniforms:{gravity:this.config.simulationGravity??0,spaceSize:n.adjustedSpaceSize??0,alpha:n.alpha}}),this.runCommand.setBindings({positionsTexture:t.previousPositionTexture});const i=e.beginRenderPass({framebuffer:t.velocityFbo,clearColor:[0,0,0,0]});this.runCommand.draw(i),i.end()}destroy(){var e,t;null==(e=this.runCommand)||e.destroy(),this.runCommand=void 0,null==(t=this.uniformStore)||t.destroy(),this.uniformStore=void 0,this.vertexCoordBuffer&&!this.vertexCoordBuffer.destroyed&&this.vertexCoordBuffer.destroy(),this.vertexCoordBuffer=void 0}}function cY(e){return`#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D linkInfoTexture; // Texture storing first link indices and amount\nuniform sampler2D linkIndicesTexture;\nuniform sampler2D linkPropertiesTexture; // Texture storing link bias and strength\nuniform sampler2D linkRandomDistanceTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform forceLinkUniforms {\n  float linkSpring;\n  float linkDistance;\n  vec2 linkDistRandomVariationRange;\n  float pointsTextureSize;\n  float linksTextureSize;\n  float alpha;\n} forceLink;\n\n#define linkSpring forceLink.linkSpring\n#define linkDistance forceLink.linkDistance\n#define linkDistRandomVariationRange forceLink.linkDistRandomVariationRange\n#define pointsTextureSize forceLink.pointsTextureSize\n#define linksTextureSize forceLink.linksTextureSize\n#define alpha forceLink.alpha\n#else\nuniform float linkSpring;\nuniform float linkDistance;\nuniform vec2 linkDistRandomVariationRange;\nuniform float pointsTextureSize;\nuniform float linksTextureSize;\nuniform float alpha;\n#endif\n\nin vec2 textureCoords;\nout vec4 fragColor;\n\nconst float MAX_LINKS = ${e}.0;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec4 velocity = vec4(0.0);\n\n  vec4 linkInfo = texture(linkInfoTexture, textureCoords);\n  float iCount = linkInfo.r;\n  float jCount = linkInfo.g;\n  float linkAmount = linkInfo.b;\n  if (linkAmount > 0.0) {\n    for (float i = 0.0; i < MAX_LINKS; i += 1.0) {\n      if (i < linkAmount) {\n        if (iCount >= linksTextureSize) {\n          iCount = 0.0;\n          jCount += 1.0;\n        }\n        vec2 linkTextureIndex = (vec2(iCount, jCount) + 0.5) / linksTextureSize;\n        vec4 connectedPointIndex = texture(linkIndicesTexture, linkTextureIndex);\n        vec4 biasAndStrength = texture(linkPropertiesTexture, linkTextureIndex);\n        vec4 randomMinDistance = texture(linkRandomDistanceTexture, linkTextureIndex);\n        float bias = biasAndStrength.r;\n        float strength = biasAndStrength.g;\n        float randomMinLinkDist = randomMinDistance.r * (linkDistRandomVariationRange.g - linkDistRandomVariationRange.r) + linkDistRandomVariationRange.r;\n        randomMinLinkDist *= linkDistance;\n\n        iCount += 1.0;\n\n        vec4 connectedPointPosition = texture(positionsTexture, (connectedPointIndex.rg + 0.5) / pointsTextureSize);\n        float x = connectedPointPosition.x - (pointPosition.x + velocity.x);\n        float y = connectedPointPosition.y - (pointPosition.y + velocity.y);\n        float l = sqrt(x * x + y * y);\n\n        // Apply the link force\n        l = max(l, randomMinLinkDist * 0.99);\n        l = (l - randomMinLinkDist) / l;\n        l *= linkSpring * alpha;\n        l *= strength;\n        l *= bias;\n        x *= l;\n        y *= l;\n        velocity.x += x;\n        velocity.y += y;\n      }\n    }\n  }\n\n  fragColor = vec4(velocity.rg, 0.0, 0.0);\n}\n  `}function uY(e,t){return e&&2===e.length?[e[0],e[1]]:t}function dY(e,t){return e&&4===e.length?[e[0],e[1],e[2],e[3]]:t}var hY=(e=>(e.OUTGOING="outgoing",e.INCOMING="incoming",e))(hY||{});class fY extends iY{constructor(){super(...arguments),this.linkFirstIndicesAndAmount=new Float32Array,this.indices=new Float32Array,this.maxPointDegree=0}create(e){var t;const{device:n,store:{pointsTextureSize:i,linksTextureSize:r},data:o}=this;if(!i||!r)return;this.linkFirstIndicesAndAmount=new Float32Array(i*i*4),this.indices=new Float32Array(r*r*4);const s=new Float32Array(r*r*4),a=new Float32Array(r*r*4),l="incoming"===e?o.sourceIndexToTargetIndices:o.targetIndexToSourceIndices;this.maxPointDegree=0;let c=0;null==l||l.forEach((e,t)=>{e&&(this.linkFirstIndicesAndAmount[4*t+0]=c%r,this.linkFirstIndicesAndAmount[4*t+1]=Math.floor(c/r),this.linkFirstIndicesAndAmount[4*t+2]=e.length??0,e.forEach(([e,n])=>{var r,l,u;this.indices[4*c+0]=e%i,this.indices[4*c+1]=Math.floor(e/i);const d=(null==(r=o.degree)?void 0:r[e])??0,h=(null==(l=o.degree)?void 0:l[t])??0,f=d+h,p=0!==f?d/f:.5,m=Math.min(d,h);let g=(null==(u=o.linkStrength)?void 0:u[n])??1/Math.max(m,1);g=Math.sqrt(g),s[4*c+0]=p,s[4*c+1]=g,a[4*c]=this.store.getRandomFloat(0,1),c+=1}),this.maxPointDegree=Math.max(this.maxPointDegree,e.length??0))});const u=!this.linkFirstIndicesAndAmountTexture||this.linkFirstIndicesAndAmountTexture.width!==i||this.linkFirstIndicesAndAmountTexture.height!==i,d=!this.indicesTexture||this.indicesTexture.width!==r||this.indicesTexture.height!==r;u&&(this.linkFirstIndicesAndAmountTexture&&!this.linkFirstIndicesAndAmountTexture.destroyed&&this.linkFirstIndicesAndAmountTexture.destroy(),this.linkFirstIndicesAndAmountTexture=n.createTexture({width:i,height:i,format:"rgba32float",usage:jV.SAMPLE|jV.COPY_DST})),this.linkFirstIndicesAndAmountTexture.copyImageData({data:this.linkFirstIndicesAndAmount,bytesPerRow:oY("rgba32float",i),mipLevel:0,x:0,y:0}),d&&(this.indicesTexture&&!this.indicesTexture.destroyed&&this.indicesTexture.destroy(),this.biasAndStrengthTexture&&!this.biasAndStrengthTexture.destroyed&&this.biasAndStrengthTexture.destroy(),this.randomDistanceTexture&&!this.randomDistanceTexture.destroyed&&this.randomDistanceTexture.destroy(),this.indicesTexture=n.createTexture({width:r,height:r,format:"rgba32float",usage:jV.SAMPLE|jV.COPY_DST}),this.biasAndStrengthTexture=n.createTexture({width:r,height:r,format:"rgba32float",usage:jV.SAMPLE|jV.COPY_DST}),this.randomDistanceTexture=n.createTexture({width:r,height:r,format:"rgba32float",usage:jV.SAMPLE|jV.COPY_DST})),this.indicesTexture.copyImageData({data:this.indices,bytesPerRow:oY("rgba32float",r),mipLevel:0,x:0,y:0}),this.biasAndStrengthTexture.copyImageData({data:s,bytesPerRow:oY("rgba32float",r),mipLevel:0,x:0,y:0}),this.randomDistanceTexture.copyImageData({data:a,bytesPerRow:oY("rgba32float",r),mipLevel:0,x:0,y:0}),void 0!==this.previousMaxPointDegree&&this.previousMaxPointDegree!==this.maxPointDegree&&(null==(t=this.runCommand)||t.destroy(),this.runCommand=void 0),this.previousMaxPointDegree=this.maxPointDegree,this.previousPointsTextureSize=i,this.previousLinksTextureSize=r}initPrograms(){const{device:e,store:t,points:n}=this;!n||!t.pointsTextureSize||!t.linksTextureSize||!this.linkFirstIndicesAndAmountTexture||!this.indicesTexture||!this.biasAndStrengthTexture||!this.randomDistanceTexture||(this.vertexCoordBuffer||(this.vertexCoordBuffer=e.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.uniformStore||(this.uniformStore=new hH({forceLinkUniforms:{uniformTypes:{linkSpring:"f32",linkDistance:"f32",linkDistRandomVariationRange:"vec2<f32>",pointsTextureSize:"f32",linksTextureSize:"f32",alpha:"f32"}}})),this.runCommand||(this.runCommand=new tY(e,{fs:cY(this.maxPointDegree),vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.vertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{forceLinkUniforms:this.uniformStore.getManagedUniformBuffer(e,"forceLinkUniforms")},parameters:{depthWriteEnabled:!1,depthCompare:"always"}})))}run(){const{device:e,store:t,points:n}=this;if(!n||!this.runCommand||!this.uniformStore||!n.previousPositionTexture||n.previousPositionTexture.destroyed||!this.linkFirstIndicesAndAmountTexture||!this.indicesTexture||!this.biasAndStrengthTexture||!this.randomDistanceTexture||!n.velocityFbo||n.velocityFbo.destroyed||t.pointsTextureSize!==this.previousPointsTextureSize||t.linksTextureSize!==this.previousLinksTextureSize)return;this.uniformStore.setUniforms({forceLinkUniforms:{linkSpring:this.config.simulationLinkSpring??0,linkDistance:this.config.simulationLinkDistance??0,linkDistRandomVariationRange:uY(this.config.simulationLinkDistRandomVariationRange,[0,0]),pointsTextureSize:t.pointsTextureSize,linksTextureSize:t.linksTextureSize,alpha:t.alpha}}),this.runCommand.setBindings({positionsTexture:n.previousPositionTexture,linkInfoTexture:this.linkFirstIndicesAndAmountTexture,linkIndicesTexture:this.indicesTexture,linkPropertiesTexture:this.biasAndStrengthTexture,linkRandomDistanceTexture:this.randomDistanceTexture});const i=e.beginRenderPass({framebuffer:n.velocityFbo,clearColor:[0,0,0,0]});this.runCommand.draw(i),i.end()}destroy(){var e,t;null==(e=this.runCommand)||e.destroy(),this.runCommand=void 0,this.linkFirstIndicesAndAmountTexture&&!this.linkFirstIndicesAndAmountTexture.destroyed&&this.linkFirstIndicesAndAmountTexture.destroy(),this.linkFirstIndicesAndAmountTexture=void 0,this.indicesTexture&&!this.indicesTexture.destroyed&&this.indicesTexture.destroy(),this.indicesTexture=void 0,this.biasAndStrengthTexture&&!this.biasAndStrengthTexture.destroyed&&this.biasAndStrengthTexture.destroy(),this.biasAndStrengthTexture=void 0,this.randomDistanceTexture&&!this.randomDistanceTexture.destroyed&&this.randomDistanceTexture.destroy(),this.randomDistanceTexture=void 0,null==(t=this.uniformStore)||t.destroy(),this.uniformStore=void 0,this.vertexCoordBuffer&&!this.vertexCoordBuffer.destroyed&&this.vertexCoordBuffer.destroy(),this.vertexCoordBuffer=void 0}}class pY extends iY{constructor(){super(...arguments),this.levels=0,this.levelTargets=new Map}create(){var e;const{device:t,store:n}=this;if(!n.pointsTextureSize)return;this.levels=Math.log2(n.adjustedSpaceSize);for(let o=0;o<this.levels;o+=1){const e=Math.pow(2,o+1),n=this.levelTargets.get(o);if(n&&n.texture.width===e&&n.texture.height===e){n.texture.copyImageData({data:new Float32Array(e*e*4).fill(0),bytesPerRow:oY("rgba32float",e),mipLevel:0,x:0,y:0});continue}n&&(n.fbo.destroyed||n.fbo.destroy(),n.texture.destroyed||n.texture.destroy());const i=t.createTexture({width:e,height:e,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST});i.copyImageData({data:new Float32Array(e*e*4).fill(0),bytesPerRow:oY("rgba32float",e),mipLevel:0,x:0,y:0});const r=t.createFramebuffer({width:e,height:e,colorAttachments:[i]});this.levelTargets.set(o,{texture:i,fbo:r})}for(const[o,s]of Array.from(this.levelTargets.entries()))o>=this.levels&&(s.fbo.destroyed||s.fbo.destroy(),s.texture.destroyed||s.texture.destroy(),this.levelTargets.delete(o));const i=n.pointsTextureSize*n.pointsTextureSize,r=new Float32Array(4*i);for(let o=0;o<i;++o)r[4*o]=1e-5*n.getRandomFloat(-1,1),r[4*o+1]=1e-5*n.getRandomFloat(-1,1);if((!this.randomValuesTexture||this.randomValuesTexture.destroyed||this.randomValuesTexture.width!==n.pointsTextureSize||this.randomValuesTexture.height!==n.pointsTextureSize)&&(this.randomValuesTexture&&!this.randomValuesTexture.destroyed&&this.randomValuesTexture.destroy(),this.randomValuesTexture=t.createTexture({width:n.pointsTextureSize,height:n.pointsTextureSize,format:"rgba32float",usage:jV.SAMPLE|jV.COPY_DST})),this.randomValuesTexture.copyImageData({data:r,bytesPerRow:oY("rgba32float",n.pointsTextureSize),mipLevel:0,x:0,y:0}),!this.pointIndices||this.previousPointsTextureSize!==n.pointsTextureSize){this.pointIndices&&!this.pointIndices.destroyed&&this.pointIndices.destroy();const i=rY(n.pointsTextureSize);this.pointIndices=t.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST}),null==(e=this.calculateLevelsCommand)||e.setAttributes({pointIndices:this.pointIndices})}this.previousPointsTextureSize=n.pointsTextureSize,this.previousSpaceSize=n.adjustedSpaceSize}initPrograms(){const{device:e,store:t,data:n,points:i}=this;!n.pointsNumber||!i||!t.pointsTextureSize||(this.calculateLevelsUniformStore||(this.calculateLevelsUniformStore=new hH({calculateLevelsUniforms:{uniformTypes:{pointsTextureSize:"f32",levelTextureSize:"f32",cellSize:"f32"},defaultUniforms:{pointsTextureSize:t.pointsTextureSize,levelTextureSize:0,cellSize:0}}})),this.calculateLevelsCommand||(this.calculateLevelsCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nin vec4 vColor;\nout vec4 fragColor;\n\nvoid main() {\n  fragColor = vColor;\n}",vs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform calculateLevelsUniforms {\n  float pointsTextureSize;\n  float levelTextureSize;\n  float cellSize;\n} calculateLevels;\n\n#define pointsTextureSize calculateLevels.pointsTextureSize\n#define levelTextureSize calculateLevels.levelTextureSize\n#define cellSize calculateLevels.cellSize\n#else\nuniform float pointsTextureSize;\nuniform float levelTextureSize;\nuniform float cellSize;\n#endif\n\nin vec2 pointIndices;\n\nout vec4 vColor;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, pointIndices / pointsTextureSize);\n  vColor = vec4(pointPosition.rg, 1.0, 0.0);\n\n  float n = floor(pointPosition.x / cellSize);\n  float m = floor(pointPosition.y / cellSize);\n  \n  vec2 levelPosition = 2.0 * (vec2(n, m) + 0.5) / levelTextureSize - 1.0;\n\n  gl_Position = vec4(levelPosition, 0.0, 1.0);\n  gl_PointSize = 1.0;\n}",topology:"point-list",vertexCount:n.pointsNumber,attributes:{...this.pointIndices&&{pointIndices:this.pointIndices}},bufferLayout:[{name:"pointIndices",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{calculateLevelsUniforms:this.calculateLevelsUniformStore.getManagedUniformBuffer(e,"calculateLevelsUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one",depthWriteEnabled:!1,depthCompare:"always"}})),this.forceUniformStore||(this.forceUniformStore=new hH({forceUniforms:{uniformTypes:{level:"f32",levels:"f32",levelTextureSize:"f32",alpha:"f32",repulsion:"f32",spaceSize:"f32",theta:"f32"},defaultUniforms:{level:0,levels:this.levels,levelTextureSize:0,alpha:t.alpha,repulsion:this.config.simulationRepulsion??0,spaceSize:t.adjustedSpaceSize??0,theta:this.config.simulationRepulsionTheta??0}}})),this.forceVertexCoordBuffer||(this.forceVertexCoordBuffer=e.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.forceCommand||(this.forceCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D levelFbo;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform forceUniforms {\n  float level;\n  float levels;\n  float levelTextureSize;\n  float repulsion;\n  float alpha;\n  float spaceSize;\n  float theta;\n} force;\n\n#define level force.level\n#define levels force.levels\n#define levelTextureSize force.levelTextureSize\n#define repulsion force.repulsion\n#define alpha force.alpha\n#define spaceSize force.spaceSize\n#define theta force.theta\n#else\nuniform float level;\nuniform float levels;\nuniform float levelTextureSize;\nuniform float repulsion;\nuniform float alpha;\nuniform float spaceSize;\nuniform float theta;\n#endif\n\nin vec2 textureCoords;\nout vec4 fragColor;\n\nconst float MAX_LEVELS_NUM = 14.0;\n\nvec2 calculateAdditionalVelocity (vec2 ij, vec2 pp) {\n  vec2 add = vec2(0.0);\n  vec4 centermass = texture(levelFbo, ij);\n  if (centermass.r > 0.0 && centermass.g > 0.0 && centermass.b > 0.0) {\n    vec2 centermassPosition = vec2(centermass.rg / centermass.b);\n    vec2 distVector = pp - centermassPosition;\n    float l = dot(distVector, distVector);\n    float dist = sqrt(l);\n    if (l > 0.0) {\n      float c = alpha * repulsion * centermass.b;\n\n      float distanceMin2 = 1.0;\n      if (l < distanceMin2) l = sqrt(distanceMin2 * l);\n      float addV = c / sqrt(l);\n      add = addV * normalize(distVector);\n    }\n  }\n  return add;\n}\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  float x = pointPosition.x;\n  float y = pointPosition.y;\n\n  float left = 0.0;\n  float top = 0.0;\n  float right = spaceSize;\n  float bottom = spaceSize;\n\n  float n_left = 0.0;\n  float n_top = 0.0;\n  float n_right = 0.0;\n  float n_bottom = 0.0;\n\n  float cellSize = 0.0;\n\n  // Iterate over levels to adjust the boundaries based on the current level\n  for (float i = 0.0; i < MAX_LEVELS_NUM; i += 1.0) {\n    if (i <= level) {\n      left += cellSize * n_left;\n      top += cellSize * n_top;\n      right -= cellSize * n_right;\n      bottom -= cellSize * n_bottom;\n\n      cellSize = pow(2.0 , levels - i - 1.0);\n\n      float dist_left = x - left;\n      n_left = max(0.0, floor(dist_left / cellSize - theta));\n\n      float dist_top = y - top;\n      n_top = max(0.0, floor(dist_top / cellSize - theta));\n      \n      float dist_right = right - x;\n      n_right = max(0.0, floor(dist_right / cellSize - theta));\n\n      float dist_bottom = bottom - y;\n      n_bottom = max(0.0, floor(dist_bottom / cellSize - theta));\n\n    }\n  }\n\n  vec4 velocity = vec4(vec2(0.0), 1.0, 0.0);\n\n  // Calculate the additional velocity based on neighboring cells\n  for (float i = 0.0; i < 12.0; i += 1.0) {\n    for (float j = 0.0; j < 4.0; j += 1.0) {\n      float n = left + cellSize * j;\n      float m = top + cellSize * n_top + cellSize * i;\n\n      if (n < (left + n_left * cellSize) && m < bottom) {\n        velocity.xy += calculateAdditionalVelocity(vec2(n / cellSize, m / cellSize) / levelTextureSize, pointPosition.xy);\n      }\n\n      n = left + cellSize * i;\n      m = top + cellSize * j;\n\n      if (n < (right - n_right * cellSize) && m < (top + n_top * cellSize)) {\n        velocity.xy += calculateAdditionalVelocity(vec2(n / cellSize, m / cellSize) / levelTextureSize, pointPosition.xy);\n      }\n\n      n = right - n_right * cellSize + cellSize * j;\n      m = top + cellSize * i;\n\n      if (n < right && m < (bottom - n_bottom * cellSize)) {\n        velocity.xy += calculateAdditionalVelocity(vec2(n / cellSize, m / cellSize) / levelTextureSize, pointPosition.xy);\n      }\n\n      n = left + n_left * cellSize + cellSize * i;\n      m = bottom - n_bottom * cellSize + cellSize * j;\n\n      if (n < right && m < bottom) {\n        velocity.xy += calculateAdditionalVelocity(vec2(n / cellSize, m / cellSize) / levelTextureSize, pointPosition.xy);\n      }\n    }\n  }\n\n  fragColor = velocity;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.forceVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{forceUniforms:this.forceUniformStore.getManagedUniformBuffer(e,"forceUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one",depthWriteEnabled:!1,depthCompare:"always"}})),this.forceCenterUniformStore||(this.forceCenterUniformStore=new hH({forceCenterUniforms:{uniformTypes:{levelTextureSize:"f32",alpha:"f32",repulsion:"f32"},defaultUniforms:{levelTextureSize:0,alpha:t.alpha,repulsion:this.config.simulationRepulsion??0}}})),this.forceFromItsOwnCentermassCommand||(this.forceFromItsOwnCentermassCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D levelFbo;\nuniform sampler2D randomValues;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform forceCenterUniforms {\n  float levelTextureSize;\n  float repulsion;\n  float alpha;\n} forceCenter;\n\n#define levelTextureSize forceCenter.levelTextureSize\n#define repulsion forceCenter.repulsion\n#define alpha forceCenter.alpha\n#else\nuniform float levelTextureSize;\nuniform float repulsion;\nuniform float alpha;\n#endif\n\nin vec2 textureCoords;\nout vec4 fragColor;\n\n// Calculate the additional velocity based on the center of mass\nvec2 calculateAdditionalVelocity (vec2 ij, vec2 pp) {\n  vec2 add = vec2(0.0);\n  vec4 centermass = texture(levelFbo, ij);\n  if (centermass.r > 0.0 && centermass.g > 0.0 && centermass.b > 0.0) {\n    vec2 centermassPosition = vec2(centermass.rg / centermass.b);\n    vec2 distVector = pp - centermassPosition;\n    float l = dot(distVector, distVector);\n    float dist = sqrt(l);\n    if (l > 0.0) {\n      float angle = atan(distVector.y, distVector.x);\n      float c = alpha * repulsion * centermass.b;\n\n      float distanceMin2 = 1.0;\n      if (l < distanceMin2) l = sqrt(distanceMin2 * l);\n      float addV = c / sqrt(l);\n      add = addV * vec2(cos(angle), sin(angle));\n    }\n  }\n  return add;\n}\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec4 random = texture(randomValues, textureCoords);\n\n  vec4 velocity = vec4(0.0);\n\n  // Calculate additional velocity based on the point position\n  velocity.xy += calculateAdditionalVelocity(pointPosition.xy / levelTextureSize, pointPosition.xy);\n  // Apply random factor to the velocity\n  velocity.xy += velocity.xy * random.rg;\n\n  fragColor = velocity;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.forceVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{forceCenterUniforms:this.forceCenterUniformStore.getManagedUniformBuffer(e,"forceCenterUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one",depthWriteEnabled:!1,depthCompare:"always"}})))}run(){this.store.pointsTextureSize!==this.previousPointsTextureSize||this.store.adjustedSpaceSize!==this.previousSpaceSize||(this.drawLevels(),this.drawForces())}destroy(){var e,t,n,i,r,o;null==(e=this.calculateLevelsCommand)||e.destroy(),this.calculateLevelsCommand=void 0,null==(t=this.forceCommand)||t.destroy(),this.forceCommand=void 0,null==(n=this.forceFromItsOwnCentermassCommand)||n.destroy(),this.forceFromItsOwnCentermassCommand=void 0;for(const s of this.levelTargets.values())s.fbo&&!s.fbo.destroyed&&s.fbo.destroy();this.randomValuesTexture&&!this.randomValuesTexture.destroyed&&this.randomValuesTexture.destroy(),this.randomValuesTexture=void 0;for(const s of this.levelTargets.values())s.texture&&!s.texture.destroyed&&s.texture.destroy();this.levelTargets.clear(),null==(i=this.calculateLevelsUniformStore)||i.destroy(),this.calculateLevelsUniformStore=void 0,null==(r=this.forceUniformStore)||r.destroy(),this.forceUniformStore=void 0,null==(o=this.forceCenterUniformStore)||o.destroy(),this.forceCenterUniformStore=void 0,this.pointIndices&&!this.pointIndices.destroyed&&this.pointIndices.destroy(),this.pointIndices=void 0,this.forceVertexCoordBuffer&&!this.forceVertexCoordBuffer.destroyed&&this.forceVertexCoordBuffer.destroy(),this.forceVertexCoordBuffer=void 0}drawLevels(){const{device:e,store:t,data:n,points:i}=this;if(i&&this.calculateLevelsCommand&&this.calculateLevelsUniformStore&&i.previousPositionTexture&&!i.previousPositionTexture.destroyed&&n.pointsNumber&&this.pointIndices)for(let r=0;r<this.levels;r+=1){const o=this.levelTargets.get(r);if(!o||o.fbo.destroyed||o.texture.destroyed)continue;const s=Math.pow(2,r+1),a=(t.adjustedSpaceSize??0)/s;this.calculateLevelsUniformStore.setUniforms({calculateLevelsUniforms:{pointsTextureSize:t.pointsTextureSize??0,levelTextureSize:s,cellSize:a}}),this.calculateLevelsCommand.setVertexCount(n.pointsNumber),this.calculateLevelsCommand.setBindings({positionsTexture:i.previousPositionTexture});const l=e.beginRenderPass({framebuffer:o.fbo,clearColor:[0,0,0,0]});this.calculateLevelsCommand.draw(l),l.end()}}drawForces(){const{device:e,store:t,points:n}=this;if(!n||!this.forceCommand||!this.forceUniformStore||!this.forceFromItsOwnCentermassCommand||!this.forceCenterUniformStore||!n.previousPositionTexture||n.previousPositionTexture.destroyed||!this.randomValuesTexture||this.randomValuesTexture.destroyed||!n.velocityFbo||n.velocityFbo.destroyed)return;const i=e.beginRenderPass({framebuffer:n.velocityFbo,clearColor:[0,0,0,0]});for(let r=0;r<this.levels;r+=1){const e=this.levelTargets.get(r);if(!e||e.texture.destroyed)continue;const o=Math.pow(2,r+1);this.forceUniformStore.setUniforms({forceUniforms:{level:r,levels:this.levels,levelTextureSize:o,alpha:t.alpha,repulsion:this.config.simulationRepulsion??0,spaceSize:t.adjustedSpaceSize??0,theta:this.config.simulationRepulsionTheta??0}}),this.forceCommand.setBindings({positionsTexture:n.previousPositionTexture,levelFbo:e.texture}),this.forceCommand.draw(i),r===this.levels-1&&(this.forceCenterUniformStore.setUniforms({forceCenterUniforms:{levelTextureSize:o,alpha:t.alpha,repulsion:this.config.simulationRepulsion??0}}),this.forceFromItsOwnCentermassCommand.setBindings({positionsTexture:n.previousPositionTexture,randomValues:this.randomValuesTexture,levelFbo:e.texture}),this.forceFromItsOwnCentermassCommand.draw(i))}i.end()}}class mY extends iY{initPrograms(){const{device:e,points:t}=this;t&&(this.vertexCoordBuffer||(this.vertexCoordBuffer=e.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.uniformStore||(this.uniformStore=new hH({forceMouseUniforms:{uniformTypes:{repulsion:"f32",mousePos:"vec2<f32>"}}})),this.runCommand||(this.runCommand=new tY(e,{fs:"#version 300 es\nprecision highp float;\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform forceMouseUniforms {\n  float repulsion;\n  vec2 mousePos;\n} forceMouse;\n\n#define repulsion forceMouse.repulsion\n#define mousePos forceMouse.mousePos\n#else\nuniform float repulsion;\nuniform vec2 mousePos;\n#endif\n\nin vec2 textureCoords;\nout vec4 fragColor;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec4 velocity = vec4(0.0);\n  vec2 mouse = mousePos;\n  // Move particles away from the mouse position using a repulsive force\n  vec2 distVector = mouse - pointPosition.rg;\n  float dist = sqrt(dot(distVector, distVector));\n  dist = max(dist, 10.0);\n  float angle = atan(distVector.y, distVector.x);\n  float addV = 100.0 * repulsion / (dist * dist);\n  velocity.rg -= addV * vec2(cos(angle), sin(angle));\n\n  fragColor = velocity;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.vertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{forceMouseUniforms:this.uniformStore.getManagedUniformBuffer(e,"forceMouseUniforms")},parameters:{depthWriteEnabled:!1,depthCompare:"always"}})))}run(){const{device:e,points:t,store:n}=this;if(!t||!this.runCommand||!this.uniformStore||!t.previousPositionTexture||t.previousPositionTexture.destroyed||!t.velocityFbo||t.velocityFbo.destroyed)return;this.uniformStore.setUniforms({forceMouseUniforms:{repulsion:this.config.simulationRepulsionFromMouse??0,mousePos:uY(n.mousePosition,[0,0])}}),this.runCommand.setBindings({positionsTexture:t.previousPositionTexture});const i=e.beginRenderPass({framebuffer:t.velocityFbo,clearColor:[0,0,0,0]});this.runCommand.draw(i),i.end()}destroy(){var e,t;null==(e=this.runCommand)||e.destroy(),this.runCommand=void 0,null==(t=this.uniformStore)||t.destroy(),this.uniformStore=void 0,this.vertexCoordBuffer&&!this.vertexCoordBuffer.destroyed&&this.vertexCoordBuffer.destroy(),this.vertexCoordBuffer=void 0}}class gY extends iY{create(){var e,t;const{device:n,store:i,data:r}=this,{pointsTextureSize:o}=i;if(void 0===r.pointsNumber||!r.pointClusters&&!r.clusterPositions)return;this.clusterCount=(r.pointClusters??[]).reduce((e,t)=>void 0===t||t<0?e:Math.max(e,t),0)+1,this.clustersTextureSize=Math.ceil(Math.sqrt(this.clusterCount));const s=this.previousPointsTextureSize!==o||this.previousClustersTextureSize!==this.clustersTextureSize||this.previousClusterCount!==this.clusterCount,a=o*o*4,l=this.clustersTextureSize*this.clustersTextureSize*4,c=new Float32Array(a),u=new Float32Array(l).fill(-1),d=new Float32Array(a).fill(1);if(r.clusterPositions)for(let h=0;h<this.clusterCount;++h)u[4*h+0]=r.clusterPositions[2*h+0]??-1,u[4*h+1]=r.clusterPositions[2*h+1]??-1;for(let h=0;h<r.pointsNumber;++h){const t=null==(e=r.pointClusters)?void 0:e[h];void 0===t?(c[4*h+0]=-1,c[4*h+1]=-1):(c[4*h+0]=t%this.clustersTextureSize,c[4*h+1]=Math.floor(t/this.clustersTextureSize)),r.clusterStrength&&(d[4*h+0]=r.clusterStrength[h]??1)}if(!this.clusterTexture||s?(this.clusterTexture&&!this.clusterTexture.destroyed&&this.clusterTexture.destroy(),this.clusterTexture=n.createTexture({width:o,height:o,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST}),this.clusterTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",o),mipLevel:0,x:0,y:0})):this.clusterTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",o),mipLevel:0,x:0,y:0}),!this.clusterPositionsTexture||s?(this.clusterPositionsTexture&&!this.clusterPositionsTexture.destroyed&&this.clusterPositionsTexture.destroy(),this.clusterPositionsTexture=n.createTexture({width:this.clustersTextureSize,height:this.clustersTextureSize,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST}),this.clusterPositionsTexture.copyImageData({data:u,bytesPerRow:oY("rgba32float",this.clustersTextureSize),mipLevel:0,x:0,y:0})):this.clusterPositionsTexture.copyImageData({data:u,bytesPerRow:oY("rgba32float",this.clustersTextureSize),mipLevel:0,x:0,y:0}),!this.clusterForceCoefficientTexture||s?(this.clusterForceCoefficientTexture&&!this.clusterForceCoefficientTexture.destroyed&&this.clusterForceCoefficientTexture.destroy(),this.clusterForceCoefficientTexture=n.createTexture({width:o,height:o,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST}),this.clusterForceCoefficientTexture.copyImageData({data:d,bytesPerRow:oY("rgba32float",o),mipLevel:0,x:0,y:0})):this.clusterForceCoefficientTexture.copyImageData({data:d,bytesPerRow:oY("rgba32float",o),mipLevel:0,x:0,y:0}),this.centermassTexture&&this.previousClustersTextureSize===this.clustersTextureSize?this.centermassTexture.copyImageData({data:new Float32Array(l).fill(0),bytesPerRow:oY("rgba32float",this.clustersTextureSize),mipLevel:0,x:0,y:0}):(this.centermassFbo&&!this.centermassFbo.destroyed&&this.centermassFbo.destroy(),this.centermassTexture&&!this.centermassTexture.destroyed&&this.centermassTexture.destroy(),this.centermassTexture=n.createTexture({width:this.clustersTextureSize,height:this.clustersTextureSize,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST}),this.centermassTexture.copyImageData({data:new Float32Array(l).fill(0),bytesPerRow:oY("rgba32float",this.clustersTextureSize),mipLevel:0,x:0,y:0}),this.centermassFbo=n.createFramebuffer({width:this.clustersTextureSize,height:this.clustersTextureSize,colorAttachments:[this.centermassTexture]})),!this.pointIndices||this.previousPointsTextureSize!==o){this.pointIndices&&!this.pointIndices.destroyed&&this.pointIndices.destroy();const e=rY(i.pointsTextureSize);this.pointIndices=n.createBuffer({data:e,usage:eV.VERTEX|eV.COPY_DST}),null==(t=this.calculateCentermassCommand)||t.setAttributes({pointIndices:this.pointIndices})}this.previousPointsTextureSize=o,this.previousClustersTextureSize=this.clustersTextureSize,this.previousClusterCount=this.clusterCount}initPrograms(){const{device:e,store:t,data:n}=this;void 0===n.pointsNumber||!n.pointClusters&&!n.clusterPositions||(this.calculateCentermassUniformStore||(this.calculateCentermassUniformStore=new hH({calculateCentermassUniforms:{uniformTypes:{pointsTextureSize:"f32",clustersTextureSize:"f32"},defaultUniforms:{pointsTextureSize:t.pointsTextureSize,clustersTextureSize:this.clustersTextureSize??0}}})),this.calculateCentermassCommand||(this.calculateCentermassCommand=new tY(e,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec4 rgba;\n\nout vec4 fragColor;\n\nvoid main() {\n  fragColor = rgba;\n}",vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\nuniform sampler2D clusterTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform calculateCentermassUniforms {\n  float pointsTextureSize;\n  float clustersTextureSize;\n} calculateCentermass;\n\n#define pointsTextureSize calculateCentermass.pointsTextureSize\n#define clustersTextureSize calculateCentermass.clustersTextureSize\n#else\nuniform float pointsTextureSize;\nuniform float clustersTextureSize;\n#endif\n\nin vec2 pointIndices;\n\nout vec4 rgba;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, pointIndices / pointsTextureSize);\n  rgba = vec4(pointPosition.xy, 1.0, 0.0);\n\n  vec4 pointClusterIndices = texture(clusterTexture, pointIndices / pointsTextureSize);\n  vec2 xy = vec2(0.0);\n  if (pointClusterIndices.x >= 0.0 && pointClusterIndices.y >= 0.0) {\n    xy = 2.0 * (pointClusterIndices.xy + 0.5) / clustersTextureSize - 1.0;\n  }\n  \n  gl_Position = vec4(xy, 0.0, 1.0);\n  gl_PointSize = 1.0;\n}\n",topology:"point-list",vertexCount:n.pointsNumber??0,attributes:{...this.pointIndices&&{pointIndices:this.pointIndices}},bufferLayout:[{name:"pointIndices",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{calculateCentermassUniforms:this.calculateCentermassUniformStore.getManagedUniformBuffer(e,"calculateCentermassUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one",depthWriteEnabled:!1,depthCompare:"always"}})),this.applyForcesUniformStore||(this.applyForcesUniformStore=new hH({applyForcesUniforms:{uniformTypes:{alpha:"f32",clustersTextureSize:"f32",clusterCoefficient:"f32"},defaultUniforms:{alpha:t.alpha,clustersTextureSize:this.clustersTextureSize??0,clusterCoefficient:this.config.simulationCluster??0}}})),this.applyForcesVertexCoordBuffer||(this.applyForcesVertexCoordBuffer=e.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.applyForcesCommand||(this.applyForcesCommand=new tY(e,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\nuniform sampler2D centermassTexture;\nuniform sampler2D clusterTexture;\nuniform sampler2D clusterPositionsTexture;\nuniform sampler2D clusterForceCoefficient;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform applyForcesUniforms {\n  float alpha;\n  float clustersTextureSize;\n  float clusterCoefficient;\n} applyForces;\n\n#define alpha applyForces.alpha\n#define clustersTextureSize applyForces.clustersTextureSize\n#define clusterCoefficient applyForces.clusterCoefficient\n#else\nuniform float alpha;\nuniform float clustersTextureSize;\nuniform float clusterCoefficient;\n#endif\n\nin vec2 textureCoords;\n\nout vec4 fragColor;\n\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec4 velocity = vec4(0.0);\n  vec4 pointClusterIndices = texture(clusterTexture, textureCoords);\n  // no cluster, so no forces\n  if (pointClusterIndices.x >= 0.0 && pointClusterIndices.y >= 0.0) {\n    // positioning points to custom cluster position or either to the center of mass\n    vec2 clusterPositions = texture(clusterPositionsTexture, pointClusterIndices.xy / clustersTextureSize).xy;\n    if (clusterPositions.x < 0.0 || clusterPositions.y < 0.0) {\n      vec4 centermassValues = texture(centermassTexture, pointClusterIndices.xy / clustersTextureSize);\n      clusterPositions = centermassValues.xy / centermassValues.b;\n    }\n    vec4 clusterCustomCoeff = texture(clusterForceCoefficient, textureCoords);\n    vec2 distVector = clusterPositions.xy - pointPosition.xy;\n    float dist = length(distVector);\n    if (dist > 0.0) {\n      float addV = alpha * dist * clusterCoefficient * clusterCustomCoeff.r;\n      velocity.rg += addV * normalize(distVector);\n    }\n  }\n\n  fragColor = velocity;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.applyForcesVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{applyForcesUniforms:this.applyForcesUniformStore.getManagedUniformBuffer(e,"applyForcesUniforms")}})))}calculateCentermass(){const{device:e,points:t}=this;if(!t||!this.calculateCentermassCommand||!this.calculateCentermassUniformStore||!this.pointIndices||!this.centermassFbo||this.centermassFbo.destroyed||!this.clusterTexture||this.clusterTexture.destroyed||!t.previousPositionTexture||t.previousPositionTexture.destroyed)return;this.calculateCentermassCommand.setVertexCount(this.data.pointsNumber??0),this.calculateCentermassUniformStore.setUniforms({calculateCentermassUniforms:{pointsTextureSize:this.store.pointsTextureSize,clustersTextureSize:this.clustersTextureSize??0}}),this.calculateCentermassCommand.setBindings({clusterTexture:this.clusterTexture,positionsTexture:t.previousPositionTexture});const n=e.beginRenderPass({framebuffer:this.centermassFbo,clearColor:[0,0,0,0]});this.calculateCentermassCommand.draw(n),n.end()}run(){var e;if(!this.data.pointClusters&&!this.data.clusterPositions||(this.calculateCentermass(),!this.applyForcesCommand||!this.applyForcesUniformStore)||!this.clusterTexture||this.clusterTexture.destroyed||!this.centermassTexture||this.centermassTexture.destroyed||!this.clusterPositionsTexture||this.clusterPositionsTexture.destroyed||!this.clusterForceCoefficientTexture||this.clusterForceCoefficientTexture.destroyed||null==(e=this.points)||!e.previousPositionTexture||this.points.previousPositionTexture.destroyed||!this.points.velocityFbo||this.points.velocityFbo.destroyed)return;this.applyForcesUniformStore.setUniforms({applyForcesUniforms:{alpha:this.store.alpha,clustersTextureSize:this.clustersTextureSize??0,clusterCoefficient:this.config.simulationCluster??0}}),this.applyForcesCommand.setBindings({clusterTexture:this.clusterTexture,centermassTexture:this.centermassTexture,clusterPositionsTexture:this.clusterPositionsTexture,clusterForceCoefficient:this.clusterForceCoefficientTexture,positionsTexture:this.points.previousPositionTexture});const t=this.device.beginRenderPass({framebuffer:this.points.velocityFbo,clearColor:[0,0,0,0]});this.applyForcesCommand.draw(t),t.end()}destroy(){var e,t,n,i;null==(e=this.calculateCentermassCommand)||e.destroy(),this.calculateCentermassCommand=void 0,null==(t=this.applyForcesCommand)||t.destroy(),this.applyForcesCommand=void 0,this.centermassFbo&&!this.centermassFbo.destroyed&&this.centermassFbo.destroy(),this.centermassFbo=void 0,this.clusterTexture&&!this.clusterTexture.destroyed&&this.clusterTexture.destroy(),this.clusterTexture=void 0,this.clusterPositionsTexture&&!this.clusterPositionsTexture.destroyed&&this.clusterPositionsTexture.destroy(),this.clusterPositionsTexture=void 0,this.clusterForceCoefficientTexture&&!this.clusterForceCoefficientTexture.destroyed&&this.clusterForceCoefficientTexture.destroy(),this.clusterForceCoefficientTexture=void 0,this.centermassTexture&&!this.centermassTexture.destroyed&&this.centermassTexture.destroy(),this.centermassTexture=void 0,null==(n=this.calculateCentermassUniformStore)||n.destroy(),this.calculateCentermassUniformStore=void 0,null==(i=this.applyForcesUniformStore)||i.destroy(),this.applyForcesUniformStore=void 0,this.pointIndices&&!this.pointIndices.destroyed&&this.pointIndices.destroy(),this.pointIndices=void 0,this.applyForcesVertexCoordBuffer&&!this.applyForcesVertexCoordBuffer.destroyed&&this.applyForcesVertexCoordBuffer.destroy(),this.applyForcesVertexCoordBuffer=void 0}}function _Y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yY(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}),n}var vY,bY={exports:{}},xY=(vY||(vY=1,bY.exports=class{constructor(e,t={}){this.css="#gl-bench {\n  position:absolute;\n  left:0;\n  top:0;\n  z-index:1000;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n}\n\n#gl-bench div {\n  position: relative;\n  display: block;\n  margin: 4px;\n  padding: 0 7px 0 10px;\n  background: #6c6;\n  border-radius: 15px;\n  cursor: pointer;\n  opacity: 0.9;\n}\n\n#gl-bench svg {\n  height: 60px;\n  margin: 0 -1px;\n}\n\n#gl-bench text {\n  font-size: 12px;\n  font-family: Helvetica,Arial,sans-serif;\n  font-weight: 700;\n  dominant-baseline: middle;\n  text-anchor: middle;\n}\n\n#gl-bench .gl-mem {\n  font-size: 9px;\n}\n\n#gl-bench line {\n  stroke-width: 5;\n  stroke: #112211;\n  stroke-linecap: round;\n}\n\n#gl-bench polyline {\n  fill: none;\n  stroke: #112211;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 3.5;\n}\n\n#gl-bench rect {\n  fill: #448844;\n}\n\n#gl-bench .opacity {\n  stroke: #448844;\n}\n",this.svg='<div class="gl-box">\n  <svg viewBox="0 0 55 60">\n    <text x="27" y="56" class="gl-fps">00 FPS</text>\n    <text x="28" y="8" class="gl-mem"></text>\n    <rect x="0" y="14" rx="4" ry="4" width="55" height="32"></rect>\n    <polyline class="gl-chart"></polyline>\n  </svg>\n  <svg viewBox="0 0 14 60" class="gl-cpu-svg">\n    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>\n    <line x1="7" y1="38" x2="7" y2="11" class="gl-cpu" stroke-dasharray="0 27"/>\n    <path d="M5.35 43c-.464 0-.812.377-.812.812v1.16c-.783.1972-1.421.812-1.595 1.624h-1.16c-.435 0-.812.348-.812.812s.348.812.812.812h1.102v1.653H1.812c-.464 0-.812.377-.812.812 0 .464.377.812.812.812h1.131c.1943.783.812 1.392 1.595 1.595v1.131c0 .464.377.812.812.812.464 0 .812-.377.812-.812V53.15h1.653v1.073c0 .464.377.812.812.812.464 0 .812-.377.812-.812v-1.131c.783-.1943 1.392-.812 1.595-1.595h1.131c.464 0 .812-.377.812-.812 0-.464-.377-.812-.812-.812h-1.073V48.22h1.102c.435 0 .812-.348.812-.812s-.348-.812-.812-.812h-1.16c-.1885-.783-.812-1.421-1.595-1.624v-1.131c0-.464-.377-.812-.812-.812-.464 0-.812.377-.812.812v1.073H6.162v-1.073c0-.464-.377-.812-.812-.812zm.58 3.48h2.088c.754 0 1.363.609 1.363 1.363v2.088c0 .754-.609 1.363-1.363 1.363H5.93c-.754 0-1.363-.609-1.363-1.363v-2.088c0-.754.609-1.363 1.363-1.363z"/>\n  </svg>\n  <svg viewBox="0 0 14 60" class="gl-gpu-svg">\n    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>\n    <line x1="7" y1="38" x2="7" y2="11" class="gl-gpu" stroke-dasharray="0 27"/>\n    <path d="M1.94775 43.3772a.736.736 0 10-.00416 1.472c.58535.00231.56465.1288.6348.3197.07015.18975.04933.43585.04933.43585l-.00653.05405v8.671a.736.736 0 101.472 0v-1.4145c.253.09522.52785.1495.81765.1495h5.267c1.2535 0 2.254-.9752 2.254-2.185v-3.105c0-1.2075-1.00625-2.185-2.254-2.185h-5.267c-.28865 0-.5635.05405-.8165.1495.01806-.16445.04209-.598-.1357-1.0787-.22425-.6072-.9499-1.2765-2.0125-1.2765zm2.9095 3.6455c.42435 0 .7659.36225.7659.8119v2.9785c0 .44965-.34155.8119-.7659.8119s-.7659-.36225-.7659-.8119v-2.9785c0-.44965.34155-.8119.7659-.8119zm4.117 0a2.3 2.3 0 012.3 2.3 2.3 2.3 0 01-2.3 2.3 2.3 2.3 0 01-2.3-2.3 2.3 2.3 0 012.3-2.3z"/>\n  </svg>\n</div>',this.paramLogger=()=>{},this.chartLogger=()=>{},this.chartLen=20,this.chartHz=20,this.names=[],this.cpuAccums=[],this.gpuAccums=[],this.activeAccums=[],this.chart=new Array(this.chartLen),this.now=()=>performance&&performance.now?performance.now():Date.now(),this.updateUI=()=>{[].forEach.call(this.nodes["gl-gpu-svg"],e=>{e.style.display=this.trackGPU?"inline":"none"})},Object.assign(this,t),this.detected=0,this.finished=[],this.isFramebuffer=0,this.frameId=0;let n,i,r=0,o=e=>{++r<20?n=requestAnimationFrame(o):(this.detected=Math.ceil(1e3*r/(e-i)/70),cancelAnimationFrame(n)),i||(i=e)};if(requestAnimationFrame(o),e){const t=async(t,n)=>Promise.resolve(setTimeout(()=>{e.getError();const i=this.now()-t;n.forEach((e,t)=>{e&&(this.gpuAccums[t]+=i)})},0)),n=(e,n,i)=>function(){const r=n.now();e.apply(i,arguments),n.trackGPU&&n.finished.push(t(r,n.activeAccums.slice(0)))};["drawArrays","drawElements","drawArraysInstanced","drawBuffers","drawElementsInstanced","drawRangeElements"].forEach(t=>{e[t]&&(e[t]=n(e[t],this,e))}),e.getExtension=((t,i)=>function(){let r=t.apply(e,arguments);return r&&["drawElementsInstancedANGLE","drawBuffersWEBGL"].forEach(e=>{r[e]&&(r[e]=n(r[e],i,r))}),r})(e.getExtension,this)}if(!this.withoutUI){this.dom||(this.dom=document.body);let e=document.createElement("div");e.id="gl-bench",this.dom.appendChild(e),this.dom.insertAdjacentHTML("afterbegin",'<style id="gl-bench-style">'+this.css+"</style>"),this.dom=e,this.dom.addEventListener("click",()=>{this.trackGPU=!this.trackGPU,this.updateUI()}),this.paramLogger=((e,t,n)=>{const i=["gl-cpu","gl-gpu","gl-mem","gl-fps","gl-gpu-svg","gl-chart"],r=Object.assign({},i);return i.forEach(e=>r[e]=t.getElementsByClassName(e)),this.nodes=r,(t,i,o,s,a,l,c)=>{r["gl-cpu"][t].style.strokeDasharray=(.27*i).toFixed(0)+" 100",r["gl-gpu"][t].style.strokeDasharray=(.27*o).toFixed(0)+" 100",r["gl-mem"][t].innerHTML=n[t]?n[t]:s?"mem: "+s.toFixed(0)+"mb":"",r["gl-fps"][t].innerHTML=a.toFixed(0)+" FPS",e(n[t],i,o,s,a,l,c)}})(this.paramLogger,this.dom,this.names),this.chartLogger=(e=>{let t={"gl-chart":this.dom.getElementsByClassName("gl-chart")};return(n,i,r)=>{let o="",s=i.length;for(let e=0;e<s;e++){let t=(r+e+1)%s;null!=i[t]&&(o=o+" "+(55*e/(s-1)).toFixed(1)+","+(45-22*i[t]/60/this.detected).toFixed(1))}t["gl-chart"][n].setAttribute("points",o),e(this.names[n],i,r)}})(this.chartLogger)}}addUI(e){-1==this.names.indexOf(e)&&(this.names.push(e),this.dom&&(this.dom.insertAdjacentHTML("beforeend",this.svg),this.updateUI()),this.cpuAccums.push(0),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFrame(e){this.frameId++;const t=e||this.now();if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else{let e=t-this.paramTime;if(e>=1e3){const n=this.frameId-this.paramFrame,i=n/e*1e3;for(let t=0;t<this.names.length;t++){const r=this.cpuAccums[t]/e*100,o=this.gpuAccums[t]/e*100,s=performance&&performance.memory?performance.memory.usedJSHeapSize/(1<<20):0;this.paramLogger(t,r,o,s,i,e,n),this.cpuAccums[t]=0,Promise.all(this.finished).then(()=>{this.gpuAccums[t]=0,this.finished=[]})}this.paramFrame=this.frameId,this.paramTime=t}}if(this.detected&&this.chartFrame){let e=t-this.chartTime,n=this.chartHz*e/1e3;for(;--n>0&&this.detected;){const n=(this.frameId-this.chartFrame)/e*1e3;this.chart[this.circularId%this.chartLen]=n;for(let e=0;e<this.names.length;e++)this.chartLogger(e,this.chart,this.circularId);this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}else this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0}begin(e){this.updateAccums(e)}end(e){this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);-1==t&&(t=this.names.length,this.addUI(e));const n=this.now(),i=n-this.t0;for(let r=0;r<t+1;r++)this.activeAccums[r]&&(this.cpuAccums[r]+=i);this.activeAccums[t]=!this.activeAccums[t],this.t0=n}}),bY.exports);const wY=_Y(xY);class SY{constructor(e){this.destroy();const t=e.getContext("webgl")||e.getContext("experimental-webgl");this.bench=new wY(t,{css:"\n  #gl-bench {\n    position:absolute;\n    right:0;\n    top:0;\n    z-index:1000;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  #gl-bench div {\n    position: relative;\n    display: block;\n    margin: 4px;\n    padding: 0 7px 0 10px;\n    background: #5f69de;\n    border-radius: 15px;\n    cursor: pointer;\n    opacity: 0.9;\n  }\n  #gl-bench svg {\n    height: 60px;\n    margin: 0 -1px;\n  }\n  #gl-bench text {\n    font-size: 12px;\n    font-family: Helvetica,Arial,sans-serif;\n    font-weight: 700;\n    dominant-baseline: middle;\n    text-anchor: middle;\n  }\n  #gl-bench .gl-mem {\n    font-size: 9px;\n  }\n  #gl-bench line {\n    stroke-width: 5;\n    stroke: #112211;\n    stroke-linecap: round;\n  }\n  #gl-bench polyline {\n    fill: none;\n    stroke: #112211;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke-width: 3.5;\n  }\n  #gl-bench rect {\n    fill: #8288e4;\n  }\n  #gl-bench .opacity {\n    stroke: #8288e4;\n  }\n"})}begin(){var e;null==(e=this.bench)||e.begin("frame")}end(e){var t,n;null==(t=this.bench)||t.end("frame"),null==(n=this.bench)||n.nextFrame(e)}destroy(){this.bench=void 0,yz("#gl-bench").remove()}}class EY{constructor(e){this._config=e}get pointsNumber(){return this.pointPositions&&this.pointPositions.length/2}get linksNumber(){return this.links&&this.links.length/2}updatePoints(){this.pointPositions=this.inputPointPositions}updatePointColor(){if(void 0===this.pointsNumber)return void(this.pointColors=void 0);const e=RW(this._config.pointDefaultColor??this._config.pointColor);if(void 0===this.inputPointColors||this.inputPointColors.length/4!==this.pointsNumber){this.pointColors=new Float32Array(4*this.pointsNumber);for(let t=0;t<this.pointColors.length/4;t++)this.pointColors[4*t]=e[0],this.pointColors[4*t+1]=e[1],this.pointColors[4*t+2]=e[2],this.pointColors[4*t+3]=e[3]}else{this.pointColors=this.inputPointColors;for(let t=0;t<this.pointColors.length/4;t++)MW(this.pointColors[4*t])||(this.pointColors[4*t]=e[0]),MW(this.pointColors[4*t+1])||(this.pointColors[4*t+1]=e[1]),MW(this.pointColors[4*t+2])||(this.pointColors[4*t+2]=e[2]),MW(this.pointColors[4*t+3])||(this.pointColors[4*t+3]=e[3])}}updatePointSize(){if(void 0===this.pointsNumber)return void(this.pointSizes=void 0);const e=this._config.pointDefaultSize??this._config.pointSize;if(void 0===this.inputPointSizes||this.inputPointSizes.length!==this.pointsNumber)this.pointSizes=new Float32Array(this.pointsNumber).fill(e);else{this.pointSizes=this.inputPointSizes;for(let t=0;t<this.pointSizes.length;t++)MW(this.pointSizes[t])||(this.pointSizes[t]=e)}}updatePointShape(){if(void 0!==this.pointsNumber)if(void 0===this.inputPointShapes||this.inputPointShapes.length!==this.pointsNumber)this.pointShapes=new Float32Array(this.pointsNumber).fill(0);else{this.pointShapes=new Float32Array(this.inputPointShapes);const e=this.pointShapes;for(let t=0;t<e.length;t++){const n=e[t];(null==n||!MW(n)||n<0||n>8)&&(e[t]=0)}}else this.pointShapes=void 0}updatePointImageIndices(){if(void 0!==this.pointsNumber)if(void 0===this.inputPointImageIndices||this.inputPointImageIndices.length!==this.pointsNumber)this.pointImageIndices=new Float32Array(this.pointsNumber).fill(-1);else{const e=new Float32Array(this.inputPointImageIndices);for(let t=0;t<e.length;t++){const n=e[t],i=void 0===n?NaN:n;!Number.isFinite(i)||i<0?e[t]=-1:e[t]=Math.trunc(i)}this.pointImageIndices=e}else this.pointImageIndices=void 0}updatePointImageSizes(){var e;if(void 0===this.pointsNumber)return void(this.pointImageSizes=void 0);const t=this._config.pointDefaultSize??this._config.pointSize;if(void 0===this.inputPointImageSizes||this.inputPointImageSizes.length!==this.pointsNumber)this.pointImageSizes=this.pointSizes?new Float32Array(this.pointSizes):new Float32Array(this.pointsNumber).fill(t);else{this.pointImageSizes=new Float32Array(this.inputPointImageSizes);for(let n=0;n<this.pointImageSizes.length;n++)MW(this.pointImageSizes[n])||(this.pointImageSizes[n]=(null==(e=this.pointSizes)?void 0:e[n])??t)}}updateLinks(){this.links=this.inputLinks}updateLinkColor(){if(void 0===this.linksNumber)return void(this.linkColors=void 0);const e=RW(this._config.linkDefaultColor??this._config.linkColor);if(void 0===this.inputLinkColors||this.inputLinkColors.length/4!==this.linksNumber){this.linkColors=new Float32Array(4*this.linksNumber);for(let t=0;t<this.linkColors.length/4;t++)this.linkColors[4*t]=e[0],this.linkColors[4*t+1]=e[1],this.linkColors[4*t+2]=e[2],this.linkColors[4*t+3]=e[3]}else{this.linkColors=this.inputLinkColors;for(let t=0;t<this.linkColors.length/4;t++)MW(this.linkColors[4*t])||(this.linkColors[4*t]=e[0]),MW(this.linkColors[4*t+1])||(this.linkColors[4*t+1]=e[1]),MW(this.linkColors[4*t+2])||(this.linkColors[4*t+2]=e[2]),MW(this.linkColors[4*t+3])||(this.linkColors[4*t+3]=e[3])}}updateLinkWidth(){if(void 0===this.linksNumber)return void(this.linkWidths=void 0);const e=this._config.linkDefaultWidth??this._config.linkWidth;if(void 0===this.inputLinkWidths||this.inputLinkWidths.length!==this.linksNumber)this.linkWidths=new Float32Array(this.linksNumber).fill(e);else{this.linkWidths=this.inputLinkWidths;for(let t=0;t<this.linkWidths.length;t++)MW(this.linkWidths[t])||(this.linkWidths[t]=e)}}updateArrows(){if(void 0===this.linksNumber)return void(this.linkArrows=void 0);const e=this._config.linkDefaultArrows??this._config.linkArrows;void 0===this.linkArrowsBoolean||this.linkArrowsBoolean.length!==this.linksNumber?this.linkArrows=new Array(this.linksNumber).fill(+e):this.linkArrows=this.linkArrowsBoolean.map(e=>+e)}updateLinkStrength(){void 0===this.linksNumber&&(this.linkStrength=void 0),void 0===this.inputLinkStrength||this.inputLinkStrength.length!==this.linksNumber?this.linkStrength=void 0:this.linkStrength=this.inputLinkStrength}updateClusters(){if(void 0===this.pointsNumber)return this.pointClusters=void 0,void(this.clusterPositions=void 0);void 0===this.inputPointClusters||this.inputPointClusters.length!==this.pointsNumber?this.pointClusters=void 0:this.pointClusters=this.inputPointClusters,void 0===this.inputClusterPositions?this.clusterPositions=void 0:this.clusterPositions=this.inputClusterPositions,void 0===this.inputClusterStrength||this.inputClusterStrength.length!==this.pointsNumber?this.clusterStrength=void 0:this.clusterStrength=this.inputClusterStrength}update(){this.updatePoints(),this.updatePointColor(),this.updatePointSize(),this.updatePointShape(),this.updatePointImageIndices(),this.updatePointImageSizes(),this.updateLinks(),this.updateLinkColor(),this.updateLinkWidth(),this.updateArrows(),this.updateLinkStrength(),this.updateClusters(),this._createAdjacencyLists(),this._calculateDegrees()}getAdjacentIndices(e){var t,n,i,r;return[...(null==(n=null==(t=this.sourceIndexToTargetIndices)?void 0:t[e])?void 0:n.map(e=>e[0]))||[],...(null==(r=null==(i=this.targetIndexToSourceIndices)?void 0:i[e])?void 0:r.map(e=>e[0]))||[]]}_createAdjacencyLists(){var e,t;if(void 0===this.linksNumber||void 0===this.links)return this.sourceIndexToTargetIndices=void 0,void(this.targetIndexToSourceIndices=void 0);this.sourceIndexToTargetIndices=new Array(this.pointsNumber).fill(void 0),this.targetIndexToSourceIndices=new Array(this.pointsNumber).fill(void 0);for(let n=0;n<this.linksNumber;n++){const i=this.links[2*n],r=this.links[2*n+1];void 0!==i&&void 0!==r&&(void 0===this.sourceIndexToTargetIndices[i]&&(this.sourceIndexToTargetIndices[i]=[]),null==(e=this.sourceIndexToTargetIndices[i])||e.push([r,n]),void 0===this.targetIndexToSourceIndices[r]&&(this.targetIndexToSourceIndices[r]=[]),null==(t=this.targetIndexToSourceIndices[r])||t.push([i,n]))}}_calculateDegrees(){var e,t,n,i;if(void 0===this.pointsNumber)return this.degree=void 0,this.inDegree=void 0,void(this.outDegree=void 0);this.degree=new Array(this.pointsNumber).fill(0),this.inDegree=new Array(this.pointsNumber).fill(0),this.outDegree=new Array(this.pointsNumber).fill(0);for(let r=0;r<this.pointsNumber;r++)this.inDegree[r]=(null==(t=null==(e=this.targetIndexToSourceIndices)?void 0:e[r])?void 0:t.length)??0,this.outDegree[r]=(null==(i=null==(n=this.sourceIndexToTargetIndices)?void 0:n[r])?void 0:i.length)??0,this.degree[r]=(this.inDegree[r]??0)+(this.outDegree[r]??0)}}function CY(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TY(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kY(e){let t,n,i;function r(e,i,r=0,o=e.length){if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<0?r=t+1:o=t}while(r<o)}return r}return 2!==e.length?(t=CY,n=(t,n)=>CY(e(t),n),i=(t,n)=>e(t)-n):(t=e===CY||e===TY?e:AY,n=e,i=e),{left:r,center:function(e,t,n=0,o=e.length){const s=r(e,t,n,o-1);return s>n&&i(e[s-1],t)>-i(e[s],t)?s-1:s},right:function(e,i,r=0,o=e.length){if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<=0?r=t+1:o=t}while(r<o)}return r}}}function AY(){return 0}const IY=kY(CY).right;function PY(e,t){let n,i;for(const r of e)null!=r&&(void 0===n?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));return[n,i]}kY(function(e){return null===e?NaN:+e}).center;var LY=Math.sqrt(50),RY=Math.sqrt(10),OY=Math.sqrt(2);function MY(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=LY?10:o>=RY?5:o>=OY?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=LY?10:o>=RY?5:o>=OY?2:1)}function DY(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function NY(e){return+e}var FY=[0,1];function BY(e){return e}function zY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function UY(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=zY(r,i),o=n(s,o)):(i=zY(i,r),o=n(o,s)),function(e){return o(i(e))}}function jY(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=zY(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=IY(e,t,1,i)-1;return o[n](r[n](t))}}function VY(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function HY(){var e,t,n,i,r,o,s=FY,a=FY,l=jU,c=BY;function u(){var e=Math.min(s.length,a.length);return c!==BY&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),i=e>2?jY:UY,r=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=i(s.map(e),a,l)))(e(c(t)))}return d.invert=function(n){return c(t((o||(o=i(a,s.map(e),NU)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,NY),u()):s.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),l=VU,u()},d.clamp=function(e){return arguments.length?(c=!!e||BY,u()):c!==BY},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function WY(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function $Y(e){return(e=WY(Math.abs(e)))?e[1]:NaN}var GY,qY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function YY(e){if(!(t=qY.exec(e)))throw new Error("invalid format: "+e);var t;return new XY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function XY(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function KY(e,t){var n=WY(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}YY.prototype=XY.prototype,XY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const ZY={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KY(100*e,t),r:KY,s:function(e,t){var n=WY(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(GY=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+WY(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function QY(e){return e}var JY,eX,tX,nX=Array.prototype.map,iX=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rX(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,r,o,s,a=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(s=MY(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,o=new Array(r=i-n+1);++a<r;)o[a]=(n+a)*s}else{s=-s;let n=Math.round(e*s),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,o=new Array(r=i-n+1);++a<r;)o[a]=(n+a)/s}return i&&o.reverse(),o}(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var i=t();return function(e,t,n,i){var r,o=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=LY?r*=10:o>=RY?r*=5:o>=OY&&(r*=2),t<e?-r:r}(e,t,n);switch((i=YY(i??",f")).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null==i.precision&&!isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($Y(t)/3)))-$Y(Math.abs(e)))}(o,s))&&(i.precision=r),tX(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$Y(t)-$Y(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=r-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(r=function(e){return Math.max(0,-$Y(Math.abs(e)))}(o))&&(i.precision=r-2*("%"===i.type))}return eX(i)}(i[0],i[i.length-1],e??10,n)},e.nice=function(n){null==n&&(n=10);var i,r,o=t(),s=0,a=o.length-1,l=o[s],c=o[a],u=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);u-- >0;){if((r=MY(l,c,n))===i)return o[s]=l,o[a]=c,t(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function oX(){var e=HY()(BY,BY);return e.copy=function(){return VY(e,oX())},DY.apply(e,arguments),rX(e)}function sX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function aX(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function lX(e){return e<0?-e*e:e*e}function cX(){var e=function(e){var t=e(BY,BY),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(BY,BY):.5===n?e(aX,lX):e(sX(n),sX(1/n)):n},rX(t)}(HY());return e.copy=function(){return VY(e,cX()).exponent(e.exponent())},DY.apply(e,arguments),e}JY=function(e){var t=void 0===e.grouping||void 0===e.thousands?QY:function(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}(nX.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?QY:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(nX.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=YY(e)).fill,u=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,_=e.trim,y=e.type;"n"===y?(m=!0,y="g"):ZY[y]||(void 0===g&&(g=12),_=!0,y="g"),(f||"0"===c&&"="===u)&&(f=!0,c="0",u="=");var v="$"===h?n:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?i:/[%p]/.test(y)?s:"",x=ZY[y],w=/[defgprs%]/.test(y);function S(e){var n,i,s,h=v,S=b;if("c"===y)S=x(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:x(Math.abs(e),g),_&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==d&&(E=!1),h=(E?"("===d?d:a:"-"===d||"("===d?"":d)+h,S=("s"===y?iX[8+GY/3]:"")+S+(E&&"("===d?")":""),w)for(n=-1,i=e.length;++n<i;)if(48>(s=e.charCodeAt(n))||s>57){S=(46===s?r+e.slice(n+1):e.slice(n))+S,e=e.slice(0,n);break}}m&&!f&&(e=t(e,1/0));var C=h.length+e.length+S.length,T=C<p?new Array(p-C+1).join(c):"";switch(m&&f&&(e=t(T+e,T.length?p-S.length:1/0),T=""),u){case"<":e=h+e+S+T;break;case"=":e=h+T+e+S;break;case"^":e=T.slice(0,C=T.length>>1)+h+e+S+T.slice(C);break;default:e=T+h+e+S}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:c,formatPrefix:function(e,t){var n=c(((e=YY(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor($Y(t)/3))),r=Math.pow(10,-i),o=iX[8+i/3];return function(e){return n(r*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),eX=JY.format,tX=JY.formatPrefix;class uX extends iY{initPrograms(){var e;const{device:t,config:n,store:i}=this;this.updateLinkIndexFbo(),this.hoveredLineIndexTexture||(this.hoveredLineIndexTexture=t.createTexture({width:1,height:1,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST,data:new Float32Array(4).fill(0)})),this.hoveredLineIndexFbo||(this.hoveredLineIndexFbo=t.createFramebuffer({width:1,height:1,colorAttachments:[this.hoveredLineIndexTexture]})),this.curveLineGeometry||this.updateCurveLineGeometry();const r=this.data.linksNumber??0;this.pointABuffer||(this.pointABuffer=t.createBuffer({data:new Float32Array(2*r),usage:eV.VERTEX|eV.COPY_DST})),this.pointBBuffer||(this.pointBBuffer=t.createBuffer({data:new Float32Array(2*r),usage:eV.VERTEX|eV.COPY_DST})),this.colorBuffer||(this.colorBuffer=t.createBuffer({data:new Float32Array(4*r),usage:eV.VERTEX|eV.COPY_DST})),this.widthBuffer||(this.widthBuffer=t.createBuffer({data:new Float32Array(r),usage:eV.VERTEX|eV.COPY_DST})),this.arrowBuffer||(this.arrowBuffer=t.createBuffer({data:new Float32Array(r),usage:eV.VERTEX|eV.COPY_DST})),this.linkIndexBuffer||(this.linkIndexBuffer=t.createBuffer({data:new Float32Array(r),usage:eV.VERTEX|eV.COPY_DST})),this.drawLineUniformStore||(this.drawLineUniformStore=new hH({drawLineUniforms:{uniformTypes:{transformationMatrix:"mat4x4<f32>",pointsTextureSize:"f32",widthScale:"f32",linkArrowsSizeScale:"f32",spaceSize:"f32",screenSize:"vec2<f32>",linkVisibilityDistanceRange:"vec2<f32>",linkVisibilityMinTransparency:"f32",linkOpacity:"f32",greyoutOpacity:"f32",curvedWeight:"f32",curvedLinkControlPointDistance:"f32",curvedLinkSegments:"f32",scaleLinksOnZoom:"f32",maxPointSize:"f32",renderMode:"f32",hoveredLinkIndex:"f32",hoveredLinkColor:"vec4<f32>",hoveredLinkWidthIncrease:"f32"},defaultUniforms:{transformationMatrix:i.transformationMatrix4x4,pointsTextureSize:i.pointsTextureSize,widthScale:n.linkWidthScale??1,linkArrowsSizeScale:n.linkArrowsSizeScale??1,spaceSize:i.adjustedSpaceSize??0,screenSize:uY(i.screenSize,[0,0]),linkVisibilityDistanceRange:uY(n.linkVisibilityDistanceRange,[0,0]),linkVisibilityMinTransparency:n.linkVisibilityMinTransparency??0,linkOpacity:n.linkOpacity??1,greyoutOpacity:n.linkGreyoutOpacity??1,curvedWeight:n.curvedLinkWeight??0,curvedLinkControlPointDistance:n.curvedLinkControlPointDistance??0,curvedLinkSegments:n.curvedLinks?n.curvedLinkSegments??LH.curvedLinkSegments:1,scaleLinksOnZoom:n.scaleLinksOnZoom??1?1:0,maxPointSize:i.maxPointSize??100,renderMode:0,hoveredLinkIndex:i.hoveredLinkIndex??-1,hoveredLinkColor:dY(i.hoveredLinkColor,[-1,-1,-1,-1]),hoveredLinkWidthIncrease:n.hoveredLinkWidthIncrease??0}},drawLineFragmentUniforms:{uniformTypes:{renderMode:"f32"},defaultUniforms:{renderMode:0}}})),this.drawCurveCommand||(this.drawCurveCommand=new tY(t,{vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 position, pointA, pointB;\nin vec4 color;\nin float width;\nin float arrow;\nin float linkIndices;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D pointGreyoutStatus;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform drawLineUniforms {\n  mat4 transformationMatrix;\n  float pointsTextureSize;\n  float widthScale;\n  float linkArrowsSizeScale;\n  float spaceSize;\n  vec2 screenSize;\n  vec2 linkVisibilityDistanceRange;\n  float linkVisibilityMinTransparency;\n  float linkOpacity;\n  float greyoutOpacity;\n  float curvedWeight;\n  float curvedLinkControlPointDistance;\n  float curvedLinkSegments;\n  float scaleLinksOnZoom;\n  float maxPointSize;\n  float renderMode;\n  float hoveredLinkIndex;\n  vec4 hoveredLinkColor;\n  float hoveredLinkWidthIncrease;\n} drawLine;\n\n#define transformationMatrix drawLine.transformationMatrix\n#define pointsTextureSize drawLine.pointsTextureSize\n#define widthScale drawLine.widthScale\n#define linkArrowsSizeScale drawLine.linkArrowsSizeScale\n#define spaceSize drawLine.spaceSize\n#define screenSize drawLine.screenSize\n#define linkVisibilityDistanceRange drawLine.linkVisibilityDistanceRange\n#define linkVisibilityMinTransparency drawLine.linkVisibilityMinTransparency\n#define linkOpacity drawLine.linkOpacity\n#define greyoutOpacity drawLine.greyoutOpacity\n#define curvedWeight drawLine.curvedWeight\n#define curvedLinkControlPointDistance drawLine.curvedLinkControlPointDistance\n#define curvedLinkSegments drawLine.curvedLinkSegments\n#define scaleLinksOnZoom drawLine.scaleLinksOnZoom\n#define maxPointSize drawLine.maxPointSize\n#define renderMode drawLine.renderMode\n#define hoveredLinkIndex drawLine.hoveredLinkIndex\n#define hoveredLinkColor drawLine.hoveredLinkColor\n#define hoveredLinkWidthIncrease drawLine.hoveredLinkWidthIncrease\n#else\nuniform mat3 transformationMatrix;\nuniform float pointsTextureSize;\nuniform float widthScale;\nuniform float linkArrowsSizeScale;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform vec2 linkVisibilityDistanceRange;\nuniform float linkVisibilityMinTransparency;\nuniform float linkOpacity;\nuniform float greyoutOpacity;\nuniform float curvedWeight;\nuniform float curvedLinkControlPointDistance;\nuniform float curvedLinkSegments;\nuniform bool scaleLinksOnZoom;\nuniform float maxPointSize;\n// renderMode: 0.0 = normal rendering, 1.0 = index buffer rendering for picking\nuniform float renderMode;\nuniform float hoveredLinkIndex;\nuniform vec4 hoveredLinkColor;\nuniform float hoveredLinkWidthIncrease;\n#endif\n\nout vec4 rgbaColor;\nout vec2 pos;\nout float arrowLength;\nout float useArrow;\nout float smoothing;\nout float arrowWidthFactor;\nout float linkIndex;\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 conicParametricCurve(vec2 A, vec2 B, vec2 ControlPoint, float t, float w) {\n  vec2 divident = (1.0 - t) * (1.0 - t) * A + 2.0 * (1.0 - t) * t * w * ControlPoint + t * t * B;\n  float divisor = (1.0 - t) * (1.0 - t) + 2.0 * (1.0 - t) * t * w + t * t;\n  return divident / divisor;\n}\n\nfloat calculateLinkWidth(float width) {\n  float linkWidth;\n  if (scaleLinksOnZoom > 0.0) {\n    // Use original width if links should scale with zoom\n    linkWidth = width;\n  } else {\n    // Adjust width based on zoom level to maintain visual size\n    linkWidth = width / transformationMatrix[0][0];\n    // Apply a non-linear scaling to avoid extreme widths\n    linkWidth *= min(5.0, max(1.0, transformationMatrix[0][0] * 0.01));\n  }\n  // Limit link width based on whether it has an arrow\n  if (useArrow > 0.5) {\n    return min(linkWidth, (maxPointSize * 2.0) / transformationMatrix[0][0]);\n  } else {\n    return min(linkWidth, maxPointSize / transformationMatrix[0][0]);\n  }\n}\n\nfloat calculateArrowWidth(float arrowWidth) {\n  if (scaleLinksOnZoom > 0.0) {\n    return arrowWidth;\n  } else {\n    // Apply the same scaling logic as calculateLinkWidth to maintain proportionality\n    arrowWidth = arrowWidth / transformationMatrix[0][0];\n    // Apply the same non-linear scaling to avoid extreme widths\n    arrowWidth *= min(5.0, max(1.0, transformationMatrix[0][0] * 0.01));\n    return arrowWidth;\n  }\n}\n\nvoid main() {\n  pos = position;\n  linkIndex = linkIndices;\n\n  vec2 pointTexturePosA = (pointA + 0.5) / pointsTextureSize;\n  vec2 pointTexturePosB = (pointB + 0.5) / pointsTextureSize;\n  \n  vec4 greyoutStatusA = texture(pointGreyoutStatus, pointTexturePosA);\n  vec4 greyoutStatusB = texture(pointGreyoutStatus, pointTexturePosB);\n  \n  vec4 pointPositionA = texture(positionsTexture, pointTexturePosA);\n  vec4 pointPositionB = texture(positionsTexture, pointTexturePosB);\n  vec2 a = pointPositionA.xy;\n  vec2 b = pointPositionB.xy;\n  \n  // Calculate direction vector and its perpendicular\n  vec2 xBasis = b - a;\n  vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n\n  // Calculate link distance and control point for curved link\n  float linkDist = length(xBasis);\n  float h = curvedLinkControlPointDistance;\n  vec2 controlPoint = (a + b) / 2.0 + yBasis * linkDist * h;\n\n  // Convert link distance to screen pixels\n  float linkDistPx = linkDist * transformationMatrix[0][0];\n  \n  // Calculate line width using the width scale\n  float linkWidth = width * widthScale;\n  float k = 2.0;\n  // Arrow width is proportionally larger than the line width\n  float arrowWidth = linkWidth * k;\n  arrowWidth *= linkArrowsSizeScale;\n\n  // Ensure arrow width difference is non-negative to prevent unwanted changes to link width\n  float arrowWidthDifference = max(0.0, arrowWidth - linkWidth);\n\n  // Calculate arrow width in pixels\n  float arrowWidthPx = calculateArrowWidth(arrowWidth);\n\n  // Calculate arrow length proportional to its width\n  // 0.866 is approximately sqrt(3)/2 - related to equilateral triangle geometry\n  // Cap the length to avoid overly long arrows on short links\n  arrowLength = min(0.3, (0.866 * arrowWidthPx * 2.0) / linkDist);\n\n  useArrow = arrow;\n  if (useArrow > 0.5) {\n    linkWidth += arrowWidthDifference;\n  }\n\n  arrowWidthFactor = arrowWidthDifference / linkWidth;\n\n  // Calculate final link width in pixels with smoothing\n  float linkWidthPx = calculateLinkWidth(linkWidth);\n    \n  if (renderMode > 0.0) {\n    // Add 5 pixels padding for better hover detection\n    linkWidthPx += 5.0 / transformationMatrix[0][0];\n  } else {\n      // Add pixel increase if this is the hovered link\n    if (hoveredLinkIndex == linkIndex) {\n      linkWidthPx += hoveredLinkWidthIncrease / transformationMatrix[0][0];\n    }\n  }\n  float smoothingPx = 0.5 / transformationMatrix[0][0];\n  smoothing = smoothingPx / linkWidthPx;\n  linkWidthPx += smoothingPx;\n\n\n\n  // Calculate final color with opacity based on link distance\n  vec3 rgbColor = color.rgb;\n  // Adjust opacity based on link distance\n  float opacity = color.a * linkOpacity * max(linkVisibilityMinTransparency, map(linkDistPx, linkVisibilityDistanceRange.g, linkVisibilityDistanceRange.r, 0.0, 1.0));\n\n  // Apply greyed out opacity if either endpoint is greyed out\n  if (greyoutStatusA.r > 0.0 || greyoutStatusB.r > 0.0) {\n    opacity *= greyoutOpacity;\n  }\n\n  // Pass final color to fragment shader\n  rgbaColor = vec4(rgbColor, opacity);\n\n  // Apply hover color if this is the hovered link and hover color is defined\n  if (hoveredLinkIndex == linkIndex && hoveredLinkColor.a > -0.5) {\n    // Keep existing RGB values but multiply opacity with hover color opacity\n    rgbaColor.rgb = hoveredLinkColor.rgb;\n    rgbaColor.a *= hoveredLinkColor.a;\n  }\n\n  // Calculate position on the curved path\n  float t = position.x;\n  float w = curvedWeight;\n  \n  float tPrev = t - 1.0 / curvedLinkSegments;\n  float tNext = t + 1.0 / curvedLinkSegments;\n  \n  vec2 pointCurr = conicParametricCurve(a, b, controlPoint, t, w);\n  \n  vec2 pointPrev = conicParametricCurve(a, b, controlPoint, max(0.0, tPrev), w);\n  vec2 pointNext = conicParametricCurve(a, b, controlPoint, min(tNext, 1.0), w);\n  \n  vec2 xBasisCurved = pointNext - pointPrev;\n  vec2 yBasisCurved = normalize(vec2(-xBasisCurved.y, xBasisCurved.x));\n  \n  pointCurr += yBasisCurved * linkWidthPx * position.y;\n  \n  // Transform to clip space coordinates\n  vec2 p = 2.0 * pointCurr / spaceSize - 1.0;\n  p *= spaceSize / screenSize;\n  \n  #ifdef USE_UNIFORM_BUFFERS\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 final = transformMat3 * vec3(p, 1);\n  #else\n  vec3 final = transformationMatrix * vec3(p, 1);\n  #endif\n  \n  gl_Position = vec4(final.rg, 0, 1);\n}",fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec4 rgbaColor;\nin vec2 pos;\nin float arrowLength;\nin float useArrow;\nin float smoothing;\nin float arrowWidthFactor;\nin float linkIndex;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform drawLineFragmentUniforms {\n  float renderMode;\n} drawLineFrag;\n\n#define renderMode drawLineFrag.renderMode\n#else\n// renderMode: 0.0 = normal rendering, 1.0 = index buffer rendering for picking\nuniform float renderMode;\n#endif\n\nout vec4 fragColor;\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvoid main() {\n  float opacity = 1.0;\n  vec3 color = rgbaColor.rgb;\n\n  if (useArrow > 0.5) {\n    float end_arrow = 0.5 + arrowLength / 2.0;\n    float start_arrow = end_arrow - arrowLength;\n    float arrowWidthDelta = arrowWidthFactor / 2.0;\n    float linkOpacity = rgbaColor.a * smoothstep(0.5 - arrowWidthDelta, 0.5 - arrowWidthDelta - smoothing / 2.0, abs(pos.y));\n    float arrowOpacity = 1.0;\n    if (pos.x > start_arrow && pos.x < start_arrow + arrowLength) {\n      float xmapped = map(pos.x, start_arrow, end_arrow, 0.0, 1.0);\n      arrowOpacity = rgbaColor.a * smoothstep(xmapped - smoothing, xmapped, map(abs(pos.y), 0.5, 0.0, 0.0, 1.0));\n      if (linkOpacity != arrowOpacity) {\n        linkOpacity = max(linkOpacity, arrowOpacity);\n      }\n    }\n    opacity = linkOpacity;\n  } else opacity = rgbaColor.a * smoothstep(0.5, 0.5 - smoothing, abs(pos.y));\n  \n  if (renderMode > 0.0) {\n    if (opacity > 0.0) {\n      fragColor = vec4(linkIndex, 0.0, 0.0, 1.0);\n    } else {\n      fragColor = vec4(-1.0, 0.0, 0.0, 0.0);\n    }\n  } else fragColor = vec4(color, opacity);\n\n}",topology:"triangle-strip",vertexCount:(null==(e=this.curveLineGeometry)?void 0:e.length)??0,attributes:{...this.curveLineBuffer&&{position:this.curveLineBuffer},...this.pointABuffer&&{pointA:this.pointABuffer},...this.pointBBuffer&&{pointB:this.pointBBuffer},...this.colorBuffer&&{color:this.colorBuffer},...this.widthBuffer&&{width:this.widthBuffer},...this.arrowBuffer&&{arrow:this.arrowBuffer},...this.linkIndexBuffer&&{linkIndices:this.linkIndexBuffer}},bufferLayout:[{name:"position",format:"float32x2"},{name:"pointA",format:"float32x2",stepMode:"instance"},{name:"pointB",format:"float32x2",stepMode:"instance"},{name:"color",format:"float32x4",stepMode:"instance"},{name:"width",format:"float32",stepMode:"instance"},{name:"arrow",format:"float32",stepMode:"instance"},{name:"linkIndices",format:"float32",stepMode:"instance"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{drawLineUniforms:this.drawLineUniformStore.getManagedUniformBuffer(t,"drawLineUniforms"),drawLineFragmentUniforms:this.drawLineUniformStore.getManagedUniformBuffer(t,"drawLineFragmentUniforms")},parameters:{cullMode:"back",blend:!0,blendColorOperation:"add",blendColorSrcFactor:"src-alpha",blendColorDstFactor:"one-minus-src-alpha",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one-minus-src-alpha",depthWriteEnabled:!1,depthCompare:"always"}})),this.quadBuffer||(this.quadBuffer=t.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1]),usage:eV.VERTEX|eV.COPY_DST})),this.hoveredLineIndexUniformStore||(this.hoveredLineIndexUniformStore=new hH({hoveredLineIndexUniforms:{uniformTypes:{mousePosition:"vec2<f32>",screenSize:"vec2<f32>"},defaultUniforms:{mousePosition:uY(i.screenMousePosition,[0,0]),screenSize:uY(i.screenSize,[0,0])}}})),this.hoveredLineIndexCommand||(this.hoveredLineIndexCommand=new tY(t,{vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 vertexCoord;\n\nvoid main() {\n  gl_Position = vec4(vertexCoord, 0.0, 1.0);\n} ",fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D linkIndexTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform hoveredLineIndexUniforms {\n  vec2 mousePosition;\n  vec2 screenSize;\n} hoveredLine;\n\n#define mousePosition hoveredLine.mousePosition\n#define screenSize hoveredLine.screenSize\n#else\nuniform vec2 mousePosition;\nuniform vec2 screenSize;\n#endif\n\nout vec4 fragColor;\n\nvoid main() {\n  // Convert mouse position to texture coordinates\n  vec2 texCoord = mousePosition / screenSize;\n  \n  // Read the link index from the linkIndexFbo texture at mouse position\n  vec4 linkIndexData = texture(linkIndexTexture, texCoord);\n  \n  // Extract the link index (stored in the red channel)\n  float linkIndex = linkIndexData.r;\n  \n  // Check if there's a valid link at this position (alpha > 0)\n  if (linkIndexData.a > 0.0 && linkIndex >= 0.0) {\n    // Output the link index\n    fragColor = vec4(linkIndex, 0.0, 0.0, 1.0);\n  } else {\n    // No link at this position, output -1 to indicate no hover\n    fragColor = vec4(-1.0, 0.0, 0.0, 0.0);\n  }\n} ",topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.quadBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{hoveredLineIndexUniforms:this.hoveredLineIndexUniformStore.getManagedUniformBuffer(t,"hoveredLineIndexUniforms")}}))}draw(e){const{config:t,points:n,store:i}=this;n&&(!n.currentPositionTexture||n.currentPositionTexture.destroyed||!n.greyoutStatusTexture||n.greyoutStatusTexture.destroyed||((!this.pointABuffer||!this.pointBBuffer)&&this.updatePointsBuffer(),this.colorBuffer||this.updateColor(),this.widthBuffer||this.updateWidth(),this.arrowBuffer||this.updateArrow(),this.curveLineGeometry||this.updateCurveLineGeometry(),this.drawCurveCommand&&this.drawLineUniformStore&&(this.drawLineUniformStore.setUniforms({drawLineUniforms:{transformationMatrix:i.transformationMatrix4x4,pointsTextureSize:i.pointsTextureSize,widthScale:t.linkWidthScale??1,linkArrowsSizeScale:t.linkArrowsSizeScale??1,spaceSize:i.adjustedSpaceSize??0,screenSize:uY(i.screenSize,[0,0]),linkVisibilityDistanceRange:uY(t.linkVisibilityDistanceRange,[0,0]),linkVisibilityMinTransparency:t.linkVisibilityMinTransparency??0,linkOpacity:t.linkOpacity??1,greyoutOpacity:t.linkGreyoutOpacity??1,curvedWeight:t.curvedLinkWeight??0,curvedLinkControlPointDistance:t.curvedLinkControlPointDistance??0,curvedLinkSegments:t.curvedLinks?t.curvedLinkSegments??LH.curvedLinkSegments:1,scaleLinksOnZoom:t.scaleLinksOnZoom??1?1:0,maxPointSize:i.maxPointSize??100,renderMode:0,hoveredLinkIndex:i.hoveredLinkIndex??-1,hoveredLinkColor:dY(i.hoveredLinkColor,[-1,-1,-1,-1]),hoveredLinkWidthIncrease:t.hoveredLinkWidthIncrease??0},drawLineFragmentUniforms:{renderMode:0}}),this.drawCurveCommand.setBindings({positionsTexture:n.currentPositionTexture,pointGreyoutStatus:n.greyoutStatusTexture}),this.drawCurveCommand.setInstanceCount(this.data.linksNumber??0),this.drawCurveCommand.draw(e))))}updateLinkIndexFbo(){var e,t;const{device:n,store:i}=this;if(!this.store.isLinkHoveringEnabled)return;const r=i.screenSize??[0,0],o=r[0],s=r[1];if(!o||!s)return;const a=(null==(e=this.previousScreenSize)?void 0:e[0])!==o||(null==(t=this.previousScreenSize)?void 0:t[1])!==s;(!this.linkIndexTexture||a)&&(this.linkIndexFbo&&!this.linkIndexFbo.destroyed&&this.linkIndexFbo.destroy(),this.linkIndexTexture&&!this.linkIndexTexture.destroyed&&this.linkIndexTexture.destroy(),this.linkIndexTexture=n.createTexture({width:o,height:s,format:"rgba32float",usage:jV.SAMPLE|jV.RENDER|jV.COPY_DST}),this.linkIndexTexture.copyImageData({data:new Float32Array(o*s*4).fill(0),bytesPerRow:oY("rgba32float",o),mipLevel:0,x:0,y:0}),this.linkIndexFbo=n.createFramebuffer({width:o,height:s,colorAttachments:[this.linkIndexTexture]}),this.previousScreenSize=[o,s])}updatePointsBuffer(){var e;const{device:t,data:n,store:i}=this;if(void 0===n.linksNumber||void 0===n.links||!i.pointsTextureSize)return;const r=new Float32Array(2*n.linksNumber),o=new Float32Array(2*n.linksNumber);for(let l=0;l<n.linksNumber;l++){const e=n.links[2*l],t=n.links[2*l+1],s=e%i.pointsTextureSize,a=Math.floor(e/i.pointsTextureSize),c=t%i.pointsTextureSize,u=Math.floor(t/i.pointsTextureSize);r[2*l]=s,r[2*l+1]=a,o[2*l]=c,o[2*l+1]=u}const s=((null==(e=this.pointABuffer)?void 0:e.byteLength)??0)/(2*Float32Array.BYTES_PER_ELEMENT);this.pointABuffer&&s===n.linksNumber?this.pointABuffer.write(r):(this.pointABuffer&&!this.pointABuffer.destroyed&&this.pointABuffer.destroy(),this.pointABuffer=t.createBuffer({data:r,usage:eV.VERTEX|eV.COPY_DST})),this.pointBBuffer&&s===n.linksNumber?this.pointBBuffer.write(o):(this.pointBBuffer&&!this.pointBBuffer.destroyed&&this.pointBBuffer.destroy(),this.pointBBuffer=t.createBuffer({data:o,usage:eV.VERTEX|eV.COPY_DST}));const a=new Float32Array(n.linksNumber);for(let l=0;l<n.linksNumber;l++)a[l]=l;this.linkIndexBuffer&&s===n.linksNumber?this.linkIndexBuffer.write(a):(this.linkIndexBuffer&&!this.linkIndexBuffer.destroyed&&this.linkIndexBuffer.destroy(),this.linkIndexBuffer=t.createBuffer({data:a,usage:eV.VERTEX|eV.COPY_DST})),this.drawCurveCommand&&this.drawCurveCommand.setAttributes({pointA:this.pointABuffer,pointB:this.pointBBuffer,linkIndices:this.linkIndexBuffer})}updateColor(){const{device:e,data:t}=this,n=t.linksNumber??0,i=t.linkColors??new Float32Array(4*n).fill(0);this.colorBuffer?(this.colorBuffer.byteLength??0)/(4*Float32Array.BYTES_PER_ELEMENT)!==n?(this.colorBuffer&&!this.colorBuffer.destroyed&&this.colorBuffer.destroy(),this.colorBuffer=e.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST})):this.colorBuffer.write(i):this.colorBuffer=e.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST}),this.drawCurveCommand&&this.drawCurveCommand.setAttributes({color:this.colorBuffer})}updateWidth(){const{device:e,data:t}=this,n=t.linksNumber??0,i=t.linkWidths??new Float32Array(n).fill(0);this.widthBuffer?(this.widthBuffer.byteLength??0)/Float32Array.BYTES_PER_ELEMENT!==n?(this.widthBuffer&&!this.widthBuffer.destroyed&&this.widthBuffer.destroy(),this.widthBuffer=e.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST})):this.widthBuffer.write(i):this.widthBuffer=e.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST}),this.drawCurveCommand&&this.drawCurveCommand.setAttributes({width:this.widthBuffer})}updateArrow(){const{device:e,data:t}=this,n=t.linksNumber??0,i=t.linkArrows?new Float32Array(t.linkArrows):new Float32Array(n).fill(0);this.arrowBuffer?(this.arrowBuffer.byteLength??0)/Float32Array.BYTES_PER_ELEMENT!==n?(this.arrowBuffer&&!this.arrowBuffer.destroyed&&this.arrowBuffer.destroy(),this.arrowBuffer=e.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST})):this.arrowBuffer.write(i):this.arrowBuffer=e.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST}),this.drawCurveCommand&&this.drawCurveCommand.setAttributes({arrow:this.arrowBuffer})}updateCurveLineGeometry(){var e;const{device:t,config:{curvedLinks:n,curvedLinkSegments:i}}=this;this.curveLineGeometry=(e=>{const t=cX().exponent(2).range([0,1]).domain([-1,1]),n=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}(0,e).map(t=>t/e-.5);n.push(.5);const i=new Array(2*n.length);return n.forEach((e,n)=>{i[2*n]=[t(2*e),.5],i[2*n+1]=[t(2*e),-.5]}),i})(n?i??LH.curvedLinkSegments:1);const r=new Float32Array(2*this.curveLineGeometry.length);for(let o=0;o<this.curveLineGeometry.length;o++)r[2*o]=this.curveLineGeometry[o][0],r[2*o+1]=this.curveLineGeometry[o][1];this.curveLineBuffer&&this.curveLineBuffer.byteLength===r.byteLength?this.curveLineBuffer.write(r):(null==(e=this.curveLineBuffer)||e.destroy(),this.curveLineBuffer=t.createBuffer({data:r,usage:eV.VERTEX|eV.COPY_DST})),this.drawCurveCommand&&(this.drawCurveCommand.setAttributes({position:this.curveLineBuffer}),this.drawCurveCommand.setVertexCount(this.curveLineGeometry.length))}findHoveredLine(){const{config:e,points:t,store:n}=this;if(!t||!t.currentPositionTexture||t.currentPositionTexture.destroyed||!t.greyoutStatusTexture||t.greyoutStatusTexture.destroyed||!this.data.linksNumber||!this.store.isLinkHoveringEnabled||!this.linkIndexFbo||!this.drawCurveCommand||!this.drawLineUniformStore||!this.linkIndexTexture||this.linkIndexTexture.destroyed)return;this.drawLineUniformStore.setUniforms({drawLineUniforms:{transformationMatrix:n.transformationMatrix4x4,pointsTextureSize:n.pointsTextureSize,widthScale:e.linkWidthScale??1,linkArrowsSizeScale:e.linkArrowsSizeScale??1,spaceSize:n.adjustedSpaceSize??0,screenSize:uY(n.screenSize,[0,0]),linkVisibilityDistanceRange:uY(e.linkVisibilityDistanceRange,[0,0]),linkVisibilityMinTransparency:e.linkVisibilityMinTransparency??0,linkOpacity:e.linkOpacity??1,greyoutOpacity:e.linkGreyoutOpacity??1,curvedWeight:e.curvedLinkWeight??0,curvedLinkControlPointDistance:e.curvedLinkControlPointDistance??0,curvedLinkSegments:e.curvedLinks?e.curvedLinkSegments??LH.curvedLinkSegments:1,scaleLinksOnZoom:e.scaleLinksOnZoom??1?1:0,maxPointSize:n.maxPointSize??100,renderMode:1,hoveredLinkIndex:n.hoveredLinkIndex??-1,hoveredLinkColor:dY(n.hoveredLinkColor,[-1,-1,-1,-1]),hoveredLinkWidthIncrease:e.hoveredLinkWidthIncrease??0},drawLineFragmentUniforms:{renderMode:1}}),this.drawCurveCommand.setBindings({positionsTexture:t.currentPositionTexture,pointGreyoutStatus:t.greyoutStatusTexture}),this.drawCurveCommand.setInstanceCount(this.data.linksNumber??0);const i=this.device.beginRenderPass({framebuffer:this.linkIndexFbo,clearColor:[0,0,0,0]});if(this.drawCurveCommand.draw(i),i.end(),this.hoveredLineIndexCommand&&this.hoveredLineIndexFbo&&this.hoveredLineIndexUniformStore){this.hoveredLineIndexUniformStore.setUniforms({hoveredLineIndexUniforms:{mousePosition:uY(n.screenMousePosition,[0,0]),screenSize:uY(n.screenSize,[0,0])}}),this.hoveredLineIndexCommand.setBindings({linkIndexTexture:this.linkIndexTexture});const e=this.device.beginRenderPass({framebuffer:this.hoveredLineIndexFbo});this.hoveredLineIndexCommand.draw(e),e.end()}}destroy(){var e,t,n,i;null==(e=this.drawCurveCommand)||e.destroy(),this.drawCurveCommand=void 0,null==(t=this.hoveredLineIndexCommand)||t.destroy(),this.hoveredLineIndexCommand=void 0,this.linkIndexFbo&&!this.linkIndexFbo.destroyed&&this.linkIndexFbo.destroy(),this.linkIndexFbo=void 0,this.hoveredLineIndexFbo&&!this.hoveredLineIndexFbo.destroyed&&this.hoveredLineIndexFbo.destroy(),this.hoveredLineIndexFbo=void 0,this.linkIndexTexture&&!this.linkIndexTexture.destroyed&&this.linkIndexTexture.destroy(),this.linkIndexTexture=void 0,this.hoveredLineIndexTexture&&!this.hoveredLineIndexTexture.destroyed&&this.hoveredLineIndexTexture.destroy(),this.hoveredLineIndexTexture=void 0,null==(n=this.drawLineUniformStore)||n.destroy(),this.drawLineUniformStore=void 0,null==(i=this.hoveredLineIndexUniformStore)||i.destroy(),this.hoveredLineIndexUniformStore=void 0,this.pointABuffer&&!this.pointABuffer.destroyed&&this.pointABuffer.destroy(),this.pointABuffer=void 0,this.pointBBuffer&&!this.pointBBuffer.destroyed&&this.pointBBuffer.destroy(),this.pointBBuffer=void 0,this.colorBuffer&&!this.colorBuffer.destroyed&&this.colorBuffer.destroy(),this.colorBuffer=void 0,this.widthBuffer&&!this.widthBuffer.destroyed&&this.widthBuffer.destroy(),this.widthBuffer=void 0,this.arrowBuffer&&!this.arrowBuffer.destroyed&&this.arrowBuffer.destroy(),this.arrowBuffer=void 0,this.curveLineBuffer&&!this.curveLineBuffer.destroyed&&this.curveLineBuffer.destroy(),this.curveLineBuffer=void 0,this.linkIndexBuffer&&!this.linkIndexBuffer.destroyed&&this.linkIndexBuffer.destroy(),this.linkIndexBuffer=void 0,this.quadBuffer&&!this.quadBuffer.destroyed&&this.quadBuffer.destroy(),this.quadBuffer=void 0}}class dX extends iY{constructor(){super(...arguments),this.imageCount=0,this.isPositionsUpToDate=!1,this.polygonPathLength=0}updatePositions(){var e,t,n;const{device:i,store:r,data:o,config:{rescalePositions:s,enableSimulation:a}}=this,{pointsTextureSize:l}=r;if(!l||!o.pointPositions||void 0===o.pointsNumber)return;const c=new Float32Array(l*l*4);c.byteLength;let u=s;void 0===s&&!a&&(u=!0),this.shouldSkipRescale&&(u=!1),u?this.rescaleInitialNodePositions():this.shouldSkipRescale||(this.scaleX=void 0,this.scaleY=void 0),this.shouldSkipRescale=void 0;for(let f=0;f<o.pointsNumber;++f)c[4*f+0]=o.pointPositions[2*f+0],c[4*f+1]=o.pointPositions[2*f+1],c[4*f+2]=f;if(this.currentPositionTexture&&this.currentPositionTexture.width===l&&this.currentPositionTexture.height===l?this.currentPositionTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}):(this.currentPositionTexture&&this.currentPositionTexture.destroy(),this.currentPositionFbo&&this.currentPositionFbo.destroy(),this.currentPositionTexture=i.createTexture({width:l,height:l,format:"rgba32float"}),this.currentPositionTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}),this.currentPositionFbo=i.createFramebuffer({width:l,height:l,colorAttachments:[this.currentPositionTexture]})),this.previousPositionTexture&&this.previousPositionTexture.width===l&&this.previousPositionTexture.height===l?this.previousPositionTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}):(this.previousPositionTexture&&this.previousPositionTexture.destroy(),this.previousPositionFbo&&this.previousPositionFbo.destroy(),this.previousPositionTexture=i.createTexture({width:l,height:l,format:"rgba32float"}),this.previousPositionTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}),this.previousPositionFbo=i.createFramebuffer({width:l,height:l,colorAttachments:[this.previousPositionTexture]})),this.config.enableSimulation){const e=new Float32Array(l*l*4).fill(0);this.velocityTexture&&this.velocityTexture.width===l&&this.velocityTexture.height===l?this.velocityTexture.copyImageData({data:e,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}):(this.velocityTexture&&this.velocityTexture.destroy(),this.velocityFbo&&this.velocityFbo.destroy(),this.velocityTexture=i.createTexture({width:l,height:l,format:"rgba32float"}),this.velocityTexture.copyImageData({data:e,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}),this.velocityFbo=i.createFramebuffer({width:l,height:l,colorAttachments:[this.velocityTexture]}))}this.selectedTexture&&this.selectedTexture.width===l&&this.selectedTexture.height===l?this.selectedTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}):(this.selectedTexture&&this.selectedTexture.destroy(),this.selectedFbo&&this.selectedFbo.destroy(),this.selectedTexture=i.createTexture({width:l,height:l,format:"rgba32float"}),this.selectedTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",l),mipLevel:0,x:0,y:0}),this.selectedFbo=i.createFramebuffer({width:l,height:l,colorAttachments:[this.selectedTexture]})),this.hoveredFbo||(this.hoveredFbo=i.createFramebuffer({width:2,height:2,colorAttachments:["rgba32float"]}));const d=rY(r.pointsTextureSize),h=d.byteLength;this.drawPointIndices&&this.drawPointIndices.byteLength===h?this.drawPointIndices.write(d):(null==(e=this.drawPointIndices)||e.destroy(),this.drawPointIndices=i.createBuffer({data:d,usage:eV.VERTEX|eV.COPY_DST})),this.drawCommand&&this.drawCommand.setAttributes({pointIndices:this.drawPointIndices}),this.hoveredPointIndices&&this.hoveredPointIndices.byteLength===h?this.hoveredPointIndices.write(d):(null==(t=this.hoveredPointIndices)||t.destroy(),this.hoveredPointIndices=i.createBuffer({data:d,usage:eV.VERTEX|eV.COPY_DST})),this.sampledPointIndices&&this.sampledPointIndices.byteLength===h?this.sampledPointIndices.write(d):(null==(n=this.sampledPointIndices)||n.destroy(),this.sampledPointIndices=i.createBuffer({data:d,usage:eV.VERTEX|eV.COPY_DST})),this.fillSampledPointsFboCommand&&this.fillSampledPointsFboCommand.setAttributes({pointIndices:this.sampledPointIndices}),this.updateGreyoutStatus(),this.updatePinnedStatus(),this.updateSampledPointsGrid(),this.trackPointsByIndices()}initPrograms(){var e,t,n;const{device:i,config:r,store:o,data:s}=this;(!this.imageAtlasCoordsTexture||!this.imageAtlasTexture)&&this.createAtlas(),this.colorBuffer||this.updateColor(),this.sizeBuffer||this.updateSize(),this.shapeBuffer||this.updateShape(),this.imageIndicesBuffer||this.updateImageIndices(),this.imageSizesBuffer||this.updateImageSizes(),this.greyoutStatusTexture||this.updateGreyoutStatus(),r.enableSimulation&&(this.updatePositionVertexCoordBuffer||(this.updatePositionVertexCoordBuffer=i.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.updatePositionUniformStore||(this.updatePositionUniformStore=new hH({updatePositionUniforms:{uniformTypes:{friction:"f32",spaceSize:"f32"},defaultUniforms:{friction:r.simulationFriction??0,spaceSize:o.adjustedSpaceSize??0}}})),this.updatePositionCommand||(this.updatePositionCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\nuniform sampler2D velocity;\nuniform sampler2D pinnedStatusTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform updatePositionUniforms {\n  float friction;\n  float spaceSize;\n} updatePosition;\n\n#define friction updatePosition.friction\n#define spaceSize updatePosition.spaceSize\n#else\nuniform float friction;\nuniform float spaceSize;\n#endif\n\nin vec2 textureCoords;\n\nout vec4 fragColor;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec4 pointVelocity = texture(velocity, textureCoords);\n\n  // Check if point is pinned\n  // pinnedStatusTexture has the same size and layout as positionsTexture\n  // Each pixel corresponds to a point: red channel > 0.5 means the point is pinned\n  vec4 pinnedStatus = texture(pinnedStatusTexture, textureCoords);\n  \n  // If pinned, don't update position\n  if (pinnedStatus.r > 0.5) {\n    fragColor = pointPosition;\n    return;\n  }\n\n  // Friction\n  pointVelocity.rg *= friction;\n\n  pointPosition.rg += pointVelocity.rg;\n\n  pointPosition.r = clamp(pointPosition.r, 0.0, spaceSize);\n  pointPosition.g = clamp(pointPosition.g, 0.0, spaceSize);\n  \n  fragColor = pointPosition;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.updatePositionVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{updatePositionUniforms:this.updatePositionUniformStore.getManagedUniformBuffer(i,"updatePositionUniforms")}}))),this.dragPointVertexCoordBuffer||(this.dragPointVertexCoordBuffer=i.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.dragPointUniformStore||(this.dragPointUniformStore=new hH({dragPointUniforms:{uniformTypes:{mousePos:"vec2<f32>",index:"f32"},defaultUniforms:{mousePos:uY(o.mousePosition,[0,0]),index:(null==(e=o.hoveredPoint)?void 0:e.index)??-1}}})),this.dragPointCommand||(this.dragPointCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform dragPointUniforms {\n  vec2 mousePos;\n  float index;\n} dragPoint;\n\n#define mousePos dragPoint.mousePos\n#define index dragPoint.index\n#else\nuniform vec2 mousePos;\nuniform float index;\n#endif\n\nin vec2 textureCoords;\n\nout vec4 fragColor;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n\n  // Check if a point is being dragged\n  if (index >= 0.0 && index == pointPosition.b) {\n    pointPosition.rg = mousePos.rg;\n  }\n\n  fragColor = pointPosition;\n}",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.dragPointVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{dragPointUniforms:this.dragPointUniformStore.getManagedUniformBuffer(i,"dragPointUniforms")}})),this.drawUniformStore||(this.drawUniformStore=new hH({drawVertexUniforms:{uniformTypes:{ratio:"f32",transformationMatrix:"mat4x4<f32>",pointsTextureSize:"f32",sizeScale:"f32",spaceSize:"f32",screenSize:"vec2<f32>",greyoutColor:"vec4<f32>",backgroundColor:"vec4<f32>",scalePointsOnZoom:"f32",maxPointSize:"f32",isDarkenGreyout:"f32",skipSelected:"f32",skipUnselected:"f32",hasImages:"f32",imageCount:"f32",imageAtlasCoordsTextureSize:"f32"},defaultUniforms:{ratio:r.pixelRatio??LH.pixelRatio,transformationMatrix:(()=>{const e=o.transform??[1,0,0,0,1,0,0,0,1];return[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]})(),pointsTextureSize:o.pointsTextureSize??0,sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),greyoutColor:dY(o.greyoutPointColor,[0,0,0,1]),backgroundColor:dY(o.backgroundColor,[0,0,0,1]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,maxPointSize:o.maxPointSize??100,isDarkenGreyout:o.isDarkenGreyout?1:0,skipSelected:0,skipUnselected:0,hasImages:this.imageCount>0?1:0,imageCount:this.imageCount,imageAtlasCoordsTextureSize:this.imageAtlasCoordsTextureSize??0}},drawFragmentUniforms:{uniformTypes:{greyoutOpacity:"f32",pointOpacity:"f32",isDarkenGreyout:"f32",backgroundColor:"vec4<f32>"},defaultUniforms:{greyoutOpacity:r.pointGreyoutOpacity??-1,pointOpacity:r.pointOpacity??1,isDarkenGreyout:o.isDarkenGreyout?1:0,backgroundColor:dY(o.backgroundColor,[0,0,0,1])}}})),this.drawCommand||(this.drawCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D imageAtlasTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform drawFragmentUniforms {\n  float greyoutOpacity;\n  float pointOpacity;\n  float isDarkenGreyout;\n  vec4 backgroundColor;\n} drawFragment;\n\n#define greyoutOpacity drawFragment.greyoutOpacity\n#define pointOpacity drawFragment.pointOpacity\n#define isDarkenGreyout drawFragment.isDarkenGreyout\n#define backgroundColor drawFragment.backgroundColor\n#else\nuniform float greyoutOpacity;\nuniform float pointOpacity;\nuniform float isDarkenGreyout;\nuniform vec4 backgroundColor;\n#endif\n\n\nin float pointShape;\nin float isGreyedOut;\nin vec4 shapeColor;\nin vec4 imageAtlasUV;\nin float shapeSize;\nin float imageSizeVarying;\nin float overallSize;\n\nout vec4 fragColor;\n\n// Smoothing controls the smoothness of the point's edge\nconst float smoothing = 0.9;\n\n// Shape constants\nconst float CIRCLE = 0.0;\nconst float SQUARE = 1.0;\nconst float TRIANGLE = 2.0;\nconst float DIAMOND = 3.0;\nconst float PENTAGON = 4.0;\nconst float HEXAGON = 5.0;\nconst float STAR = 6.0;\nconst float CROSS = 7.0;\nconst float NONE = 8.0;\n\n// Distance functions for different shapes\nfloat circleDistance(vec2 p) {\n    return dot(p, p);\n}\n\n// Function to apply greyout logic to image colors\nvec4 applyGreyoutToImage(vec4 imageColor, float isGreyedOutValue) {\n    vec3 finalColor = imageColor.rgb;\n    float finalAlpha = imageColor.a;\n    \n    if (isGreyedOutValue > 0.0) {\n        float blendFactor = 0.65; // Controls how much to modify (0.0 = original, 1.0 = target color)\n        \n        if (isDarkenGreyout > 0.0) {\n            finalColor = mix(finalColor, vec3(0.2), blendFactor);\n        } else {\n            finalColor = mix(finalColor, max(backgroundColor.rgb, vec3(0.8)), blendFactor);\n        }\n    }\n    \n    return vec4(finalColor, finalAlpha);\n}\n\nfloat squareDistance(vec2 p) {\n    vec2 d = abs(p) - vec2(0.8);\n    return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n}\n\nfloat triangleDistance(vec2 p) {\n    const float k = sqrt(3.0);   // 1.732; slope of 60 lines for an equilateral triangle\n    p.x = abs(p.x) - 0.9;        // fold the X axis and shift: brings left and right halves together\n    p.y = p.y + 0.55;             // move the whole shape up slightly so it is centred vertically\n\n    // reflect points that fall outside the main triangle back inside, to reuse the same maths\n    if (p.x + k * p.y > 0.0)\n        p = vec2(p.x - k * p.y,  -k * p.x - p.y) / 2.0;\n\n    p.x -= clamp(p.x, -1.0, 0.0); // clip any remainder on the left side\n\n    // Return signed distance: negative = inside; positive = outside\n    return -length(p) * sign(p.y);\n}\n\nfloat diamondDistance(vec2 p) {\n    // aspect > 1    taller diamond\n    const float aspect = 1.2;\n    return abs(p.x) + abs(p.y) / aspect - 0.8;\n}\n\nfloat pentagonDistance(vec2 p) {\n    // Regular pentagon signed-distance (Inigo Quilez)\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.x = abs(p.x);\n\n    // Reflect across the two tilted edges  only if point is outside\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2( k.x, k.y), p), 0.0) * vec2( k.x, k.y);\n\n    // Clip against the top horizontal edge (keeps top point sharp)\n    p -= vec2(clamp(p.x, -k.z * k.x, k.z * k.x), k.z);\n\n    // Return signed distance (negative  inside, positive  outside)\n    return length(p) * sign(p.y);\n}\n\nfloat hexagonDistance(vec2 p) {\n    const vec3 k = vec3(-0.866025404, 0.5, 0.577350269);\n    p = abs(p);\n    p -= 2.0 * min(dot(k.xy, p), 0.0) * k.xy;\n    p -= vec2(clamp(p.x, -k.z * 0.8, k.z * 0.8), 0.8);\n    return length(p) * sign(p.y);\n}\n\nfloat starDistance(vec2 p) {\n    // 5-point star signed-distance function (adapted from Inigo Quilez)\n    // r   outer radius, rf  inner/outer radius ratio\n    const float r  = 0.9;\n    const float rf = 0.45;\n\n    // Pre-computed rotation vectors for the star arms (36 increments)\n    const vec2 k1 = vec2(0.809016994, -0.587785252);\n    const vec2 k2 = vec2(-k1.x, k1.y);\n\n    // Fold the plane into a single arm sector\n    p.x = abs(p.x);\n    p -= 2.0 * max(dot(k1, p), 0.0) * k1;\n    p -= 2.0 * max(dot(k2, p), 0.0) * k2;\n    p.x = abs(p.x);\n\n    // Translate so the top tip of the star lies on the X-axis\n    p.y -= r;\n\n    // Vector describing the edge between an outer tip and its adjacent inner point\n    vec2 ba = rf * vec2(-k1.y, k1.x) - vec2(0.0, 1.0);\n    // Project the point onto that edge and clamp the projection to the segment\n    float h = clamp(dot(p, ba) / dot(ba, ba), 0.0, r);\n\n    // Return signed distance (negative => inside, positive => outside)\n    return length(p - ba * h) * sign(p.y * ba.x - p.x * ba.y);\n}\n\nfloat crossDistance(vec2 p) {\n    // Signed distance function for a cross (union of two rectangles)\n    // Adapted from Inigo Quilez (https://iquilezles.org/)\n    // Each arm has half-sizes 0.3 (thickness) and 0.8 (length)\n    p = abs(p);\n    if (p.y > p.x) p = p.yx;       // exploit symmetry\n\n    vec2 q = p - vec2(0.8, 0.3);   // subtract half-sizes (length, thickness)\n\n    // Standard rectangle SDF, then take union of the two arms\n    return length(max(q, 0.0)) + min(max(q.x, q.y), 0.0);\n}\n\nfloat getShapeDistance(vec2 p, float shape) {\n    if (shape == SQUARE) return squareDistance(p);\n    else if (shape == TRIANGLE) return triangleDistance(p);\n    else if (shape == DIAMOND) return diamondDistance(p);\n    else if (shape == PENTAGON) return pentagonDistance(p);\n    else if (shape == HEXAGON) return hexagonDistance(p);\n    else if (shape == STAR) return starDistance(p);\n    else if (shape == CROSS) return crossDistance(p);\n    else return circleDistance(p); // Default to circle\n}\n\nvoid main() {\n    // Discard the fragment if the point is fully transparent and has no image\n    if (shapeColor.a == 0.0 && imageAtlasUV.x == -1.0) {\n        discard;\n    }\n\n    // Discard the fragment if the point has no shape and no image\n    if (pointShape == NONE && imageAtlasUV.x == -1.0) {\n        discard;\n    }\n\n    // Calculate coordinates within the point\n    vec2 pointCoord = 2.0 * gl_PointCoord - 1.0;\n\n    vec4 finalShapeColor = vec4(0.0);\n    vec4 finalImageColor = vec4(0.0);\n    \n    // Handle shape rendering with centering logic\n    if (pointShape != NONE) {\n        // Calculate shape coordinates with centering\n        vec2 shapeCoord = pointCoord;\n        if (overallSize > shapeSize && shapeSize > 0.0) {\n            // Shape is smaller than overall size, center it\n            float scale = shapeSize / overallSize;\n            shapeCoord = pointCoord / scale;\n        }\n        \n        float opacity;\n        if (pointShape == CIRCLE) {\n            // For circles, use the original distance calculation\n            float pointCenterDistance = dot(shapeCoord, shapeCoord);\n            opacity = 1.0 - smoothstep(smoothing, 1.0, pointCenterDistance);\n        } else {\n            // For other shapes, use the shape distance function\n            float shapeDistance = getShapeDistance(shapeCoord, pointShape);\n            opacity = 1.0 - smoothstep(-0.01, 0.01, shapeDistance);\n        }\n        opacity *= shapeColor.a;\n\n        finalShapeColor = vec4(shapeColor.rgb, opacity);\n    }\n\n    // Handle image rendering with centering logic\n    if (imageAtlasUV.x != -1.0) {\n        // Calculate image coordinates with centering\n        vec2 imageCoord = pointCoord;\n        if (overallSize > imageSizeVarying && imageSizeVarying > 0.0) {\n            // Image is smaller than overall size, center it\n            float scale = imageSizeVarying / overallSize;\n            imageCoord = pointCoord / scale;\n            \n            // Check if we're outside the valid image area\n            if (abs(imageCoord.x) > 1.0 || abs(imageCoord.y) > 1.0) {\n                // We're outside the image bounds, don't render the image\n                finalImageColor = vec4(0.0);\n            } else {\n                // Sample from texture atlas\n                vec2 atlasUV = mix(imageAtlasUV.xy, imageAtlasUV.zw, (imageCoord + 1.0) * 0.5);\n                vec4 imageColor = texture(imageAtlasTexture, atlasUV);\n                finalImageColor = applyGreyoutToImage(imageColor, isGreyedOut);\n            }\n        } else {\n            // Image is same size or larger than overall size, no scaling needed\n            // Sample from texture atlas\n            vec2 atlasUV = mix(imageAtlasUV.xy, imageAtlasUV.zw, (imageCoord + 1.0) * 0.5);\n            vec4 imageColor = texture(imageAtlasTexture, atlasUV);\n            finalImageColor = applyGreyoutToImage(imageColor, isGreyedOut);\n        }\n    }\n\n    float finalPointAlpha = max(finalShapeColor.a, finalImageColor.a);\n    if (isGreyedOut > 0.0 && greyoutOpacity != -1.0) {\n        finalPointAlpha *= greyoutOpacity;\n    } else {\n        finalPointAlpha *= pointOpacity;\n    }\n\n    // Blend image color above point color\n    fragColor = vec4(\n        mix(finalShapeColor.rgb, finalImageColor.rgb, finalImageColor.a),\n        finalPointAlpha\n    );\n}\n",vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 pointIndices;\nin float size;\nin vec4 color;\nin float shape;\nin float imageIndex;\nin float imageSize;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D pointGreyoutStatus;\nuniform sampler2D imageAtlasCoords;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform drawVertexUniforms {\n  float ratio;\n  mat4 transformationMatrix;\n  float pointsTextureSize;\n  float sizeScale;\n  float spaceSize;\n  vec2 screenSize;\n  vec4 greyoutColor;\n  vec4 backgroundColor;\n  float scalePointsOnZoom;\n  float maxPointSize;\n  float isDarkenGreyout;\n  float skipSelected;\n  float skipUnselected;\n  float hasImages;\n  float imageCount;\n  float imageAtlasCoordsTextureSize;\n} drawVertex;\n\n#define ratio drawVertex.ratio\n#define transformationMatrix drawVertex.transformationMatrix\n#define pointsTextureSize drawVertex.pointsTextureSize\n#define sizeScale drawVertex.sizeScale\n#define spaceSize drawVertex.spaceSize\n#define screenSize drawVertex.screenSize\n#define greyoutColor drawVertex.greyoutColor\n#define backgroundColor drawVertex.backgroundColor\n#define scalePointsOnZoom drawVertex.scalePointsOnZoom\n#define maxPointSize drawVertex.maxPointSize\n#define isDarkenGreyout drawVertex.isDarkenGreyout\n#define skipSelected drawVertex.skipSelected\n#define skipUnselected drawVertex.skipUnselected\n#define hasImages drawVertex.hasImages\n#define imageCount drawVertex.imageCount\n#define imageAtlasCoordsTextureSize drawVertex.imageAtlasCoordsTextureSize\n#else\nuniform float ratio;\nuniform mat3 transformationMatrix;\nuniform float pointsTextureSize;\nuniform float sizeScale;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform vec4 greyoutColor;\nuniform vec4 backgroundColor;\nuniform float scalePointsOnZoom;\nuniform float maxPointSize;\nuniform float isDarkenGreyout;\nuniform float skipSelected;\nuniform float skipUnselected;\nuniform float hasImages;\nuniform float imageCount;\nuniform float imageAtlasCoordsTextureSize;\n#endif\n\nout float pointShape;\nout float isGreyedOut;\nout vec4 shapeColor;\nout vec4 imageAtlasUV;\nout float shapeSize;\nout float imageSizeVarying;\nout float overallSize;\n\nfloat calculatePointSize(float size) {\n  float pSize;\n\n  if (scalePointsOnZoom > 0.0) { \n    pSize = size * ratio * transformationMatrix[0][0];\n  } else {\n    pSize = size * ratio * min(5.0, max(1.0, transformationMatrix[0][0] * 0.01));\n  }\n\n  return min(pSize, maxPointSize * ratio);\n}\n\nvoid main() {    \n  // Check greyout status for selective rendering\n  vec4 greyoutStatus = texture(pointGreyoutStatus, (pointIndices + 0.5) / pointsTextureSize);\n  isGreyedOut = greyoutStatus.r;\n  float isSelected = (greyoutStatus.r == 0.0) ? 1.0 : 0.0;\n  \n  // Discard point based on rendering mode\n  if (skipSelected > 0.0 && isSelected > 0.0) {\n    gl_Position = vec4(2.0, 2.0, 2.0, 1.0); // Move off-screen\n    gl_PointSize = 0.0;\n    return;\n  }\n  if (skipUnselected > 0.0 && isSelected <= 0.0) {\n    gl_Position = vec4(2.0, 2.0, 2.0, 1.0); // Move off-screen\n    gl_PointSize = 0.0;\n    return;\n  }\n  \n  // Position\n  vec4 pointPosition = texture(positionsTexture, (pointIndices + 0.5) / pointsTextureSize);\n  vec2 point = pointPosition.rg;\n\n  // Transform point position to normalized device coordinates\n  // Convert from space coordinates [0, spaceSize] to normalized [-1, 1]\n  vec2 normalizedPosition = 2.0 * point / spaceSize - 1.0;\n  \n  // Apply aspect ratio correction - this is needed to map the square space to the rectangular screen\n  // The transformation matrix handles zoom/pan, but we need this to handle aspect ratio\n  normalizedPosition *= spaceSize / screenSize;\n  \n  #ifdef USE_UNIFORM_BUFFERS\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 finalPosition = transformMat3 * vec3(normalizedPosition, 1);\n  #else\n  vec3 finalPosition = transformationMatrix * vec3(normalizedPosition, 1);\n  #endif\n  gl_Position = vec4(finalPosition.rg, 0, 1);\n\n  // Calculate sizes for shape and image\n  float shapeSizeValue = calculatePointSize(size * sizeScale);\n  float imageSizeValue = calculatePointSize(imageSize * sizeScale);\n  \n  // Use the larger of the two sizes for the overall point size\n  float overallSizeValue = max(shapeSizeValue, imageSizeValue);\n  gl_PointSize = overallSizeValue;\n\n  // Pass size information to fragment shader\n  shapeSize = shapeSizeValue;\n  imageSizeVarying = imageSizeValue;\n  overallSize = overallSizeValue;\n\n  shapeColor = color;\n  pointShape = shape;\n\n  // Adjust alpha of selected points\n  if (isGreyedOut > 0.0) {\n    if (greyoutColor[0] != -1.0) {\n      shapeColor = greyoutColor;\n    } else {\n      // If greyoutColor is not set, make color lighter or darker based on isDarkenGreyout\n      float blendFactor = 0.65; // Controls how much to modify (0.0 = original, 1.0 = target color)\n      \n      #ifdef USE_UNIFORM_BUFFERS\n      if (isDarkenGreyout > 0.0) {\n        // Darken the color\n        shapeColor.rgb = mix(shapeColor.rgb, vec3(0.2), blendFactor);\n      } else {\n        // Lighten the color\n        shapeColor.rgb = mix(shapeColor.rgb, max(backgroundColor.rgb, vec3(0.8)), blendFactor);\n      }\n      #else\n      if (isDarkenGreyout > 0.0) {\n        // Darken the color\n        shapeColor.rgb = mix(shapeColor.rgb, vec3(0.2), blendFactor);\n      } else {\n        // Lighten the color\n        shapeColor.rgb = mix(shapeColor.rgb, max(backgroundColor.rgb, vec3(0.8)), blendFactor);\n      }\n      #endif\n    }\n  }\n\n  #ifdef USE_UNIFORM_BUFFERS\n  if (hasImages <= 0.0 || imageIndex < 0.0 || imageIndex >= imageCount) {\n    imageAtlasUV = vec4(-1.0);\n  } else {\n    // Calculate image atlas UV coordinates based on imageIndex\n    float atlasCoordIndex = imageIndex;\n    // Calculate the position in the texture grid\n    float texX = mod(atlasCoordIndex, imageAtlasCoordsTextureSize);\n    float texY = floor(atlasCoordIndex / imageAtlasCoordsTextureSize);\n    // Convert to texture coordinates (0.0 to 1.0)\n    vec2 atlasCoordTexCoord = (vec2(texX, texY) + 0.5) / imageAtlasCoordsTextureSize;\n    vec4 atlasCoords = texture(imageAtlasCoords, atlasCoordTexCoord);\n    imageAtlasUV = atlasCoords;\n  }\n  #else\n  if (hasImages <= 0.0 || imageIndex < 0.0 || imageIndex >= imageCount) {\n    imageAtlasUV = vec4(-1.0);\n  } else {\n    // Calculate image atlas UV coordinates based on imageIndex\n    float atlasCoordIndex = imageIndex;\n    // Calculate the position in the texture grid\n    float texX = mod(atlasCoordIndex, imageAtlasCoordsTextureSize);\n    float texY = floor(atlasCoordIndex / imageAtlasCoordsTextureSize);\n    // Convert to texture coordinates (0.0 to 1.0)\n    vec2 atlasCoordTexCoord = (vec2(texX, texY) + 0.5) / imageAtlasCoordsTextureSize;\n    vec4 atlasCoords = texture(imageAtlasCoords, atlasCoordTexCoord);\n    imageAtlasUV = atlasCoords;\n  }\n  #endif\n} ",topology:"point-list",vertexCount:s.pointsNumber??0,attributes:{...this.drawPointIndices&&{pointIndices:this.drawPointIndices},...this.sizeBuffer&&{size:this.sizeBuffer},...this.colorBuffer&&{color:this.colorBuffer},...this.shapeBuffer&&{shape:this.shapeBuffer},...this.imageIndicesBuffer&&{imageIndex:this.imageIndicesBuffer},...this.imageSizesBuffer&&{imageSize:this.imageSizesBuffer}},bufferLayout:[{name:"pointIndices",format:"float32x2"},{name:"size",format:"float32"},{name:"color",format:"float32x4"},{name:"shape",format:"float32"},{name:"imageIndex",format:"float32"},{name:"imageSize",format:"float32"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{drawVertexUniforms:this.drawUniformStore.getManagedUniformBuffer(i,"drawVertexUniforms"),drawFragmentUniforms:this.drawUniformStore.getManagedUniformBuffer(i,"drawFragmentUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"src-alpha",blendColorDstFactor:"one-minus-src-alpha",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one-minus-src-alpha",depthWriteEnabled:!1,depthCompare:"always"}})),this.findPointsOnAreaSelectionVertexCoordBuffer||(this.findPointsOnAreaSelectionVertexCoordBuffer=i.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.findPointsOnAreaSelectionUniformStore||(this.findPointsOnAreaSelectionUniformStore=new hH({findPointsOnAreaSelectionUniforms:{uniformTypes:{sizeScale:"f32",spaceSize:"f32",screenSize:"vec2<f32>",ratio:"f32",transformationMatrix:"mat4x4<f32>",selection0:"vec2<f32>",selection1:"vec2<f32>",scalePointsOnZoom:"f32",maxPointSize:"f32"},defaultUniforms:{sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),ratio:r.pixelRatio??LH.pixelRatio,transformationMatrix:o.transformationMatrix4x4,selection0:uY(null==(t=o.selectedArea)?void 0:t[0],[0,0]),selection1:uY(null==(n=o.selectedArea)?void 0:n[1],[0,0]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,maxPointSize:o.maxPointSize??100}}})),this.findPointsOnAreaSelectionCommand||(this.findPointsOnAreaSelectionCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\nuniform sampler2D pointSize;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform findPointsOnAreaSelectionUniforms {\n  float sizeScale;\n  float spaceSize;\n  vec2 screenSize;\n  float ratio;\n  mat4 transformationMatrix;\n  vec2 selection0;\n  vec2 selection1;\n  float scalePointsOnZoom;\n  float maxPointSize;\n} findPointsOnAreaSelection;\n\n#define sizeScale findPointsOnAreaSelection.sizeScale\n#define spaceSize findPointsOnAreaSelection.spaceSize\n#define screenSize findPointsOnAreaSelection.screenSize\n#define ratio findPointsOnAreaSelection.ratio\n#define transformationMatrix findPointsOnAreaSelection.transformationMatrix\n#define selection0 findPointsOnAreaSelection.selection0\n#define selection1 findPointsOnAreaSelection.selection1\n#define scalePointsOnZoom findPointsOnAreaSelection.scalePointsOnZoom\n#define maxPointSize findPointsOnAreaSelection.maxPointSize\n#else\nuniform float sizeScale;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform float ratio;\nuniform mat3 transformationMatrix;\nuniform vec2 selection0;\nuniform vec2 selection1;\nuniform float scalePointsOnZoom;\nuniform float maxPointSize;\n#endif\n\nin vec2 textureCoords;\n\nout vec4 fragColor;\n\nfloat pointSizeF(float size) {\n  float pSize;\n  // Extract top-left element from mat4 (or use mat3 conversion)\n  #ifdef USE_UNIFORM_BUFFERS\n  float scale = transformationMatrix[0][0]; // mat4 first element\n  #else\n  float scale = transformationMatrix[0][0]; // mat3 first element\n  #endif\n  if (scalePointsOnZoom > 0.0) { \n    pSize = size * ratio * scale;\n  } else {\n    pSize = size * ratio * min(5.0, max(1.0, scale * 0.01));\n  }\n  return min(pSize, maxPointSize * ratio);\n}\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec2 p = 2.0 * pointPosition.rg / spaceSize - 1.0;\n  p *= spaceSize / screenSize;\n  #ifdef USE_UNIFORM_BUFFERS\n  // Convert mat4 to mat3 for vec3 multiplication\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 final = transformMat3 * vec3(p, 1);\n  #else\n  vec3 final = transformationMatrix * vec3(p, 1);\n  #endif\n\n  vec4 pSize = texture(pointSize, textureCoords);\n  float size = pSize.r * sizeScale;\n\n  float left = 2.0 * (selection0.x - 0.5 * pointSizeF(size)) / screenSize.x - 1.0;\n  float right = 2.0 * (selection1.x + 0.5 * pointSizeF(size)) / screenSize.x - 1.0;\n  float top =  2.0 * (selection0.y - 0.5 * pointSizeF(size)) / screenSize.y - 1.0;\n  float bottom =  2.0 * (selection1.y + 0.5 * pointSizeF(size)) / screenSize.y - 1.0;\n\n  fragColor = vec4(0.0, 0.0, pointPosition.r, pointPosition.g);\n  if (final.x >= left && final.x <= right && final.y >= top && final.y <= bottom) {\n    fragColor.r = 1.0;\n  }\n}\n\n",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.findPointsOnAreaSelectionVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{findPointsOnAreaSelectionUniforms:this.findPointsOnAreaSelectionUniformStore.getManagedUniformBuffer(i,"findPointsOnAreaSelectionUniforms")}})),this.findPointsOnPolygonSelectionVertexCoordBuffer||(this.findPointsOnPolygonSelectionVertexCoordBuffer=i.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.findPointsOnPolygonSelectionUniformStore||(this.findPointsOnPolygonSelectionUniformStore=new hH({findPointsOnPolygonSelectionUniforms:{uniformTypes:{spaceSize:"f32",screenSize:"vec2<f32>",transformationMatrix:"mat4x4<f32>",polygonPathLength:"f32"},defaultUniforms:{spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),transformationMatrix:o.transformationMatrix4x4,polygonPathLength:this.polygonPathLength}}})),this.findPointsOnPolygonSelectionCommand||(this.findPointsOnPolygonSelectionCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\nuniform sampler2D polygonPathTexture; // Texture containing polygon path points\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform findPointsOnPolygonSelectionUniforms {\n  float spaceSize;\n  vec2 screenSize;\n  mat4 transformationMatrix;\n  float polygonPathLength;\n} findPointsOnPolygonSelection;\n\n#define spaceSize findPointsOnPolygonSelection.spaceSize\n#define screenSize findPointsOnPolygonSelection.screenSize\n#define transformationMatrix findPointsOnPolygonSelection.transformationMatrix\n#define polygonPathLength int(findPointsOnPolygonSelection.polygonPathLength)\n#else\nuniform int polygonPathLength;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform mat3 transformationMatrix;\n#endif\n\nin vec2 textureCoords;\n\nout vec4 fragColor;\n\n// Get a point from the polygon path texture at a specific index\nvec2 getPolygonPoint(sampler2D pathTexture, int index, int pathLength) {\n  if (index >= pathLength) return vec2(0.0);\n  \n  // Calculate texture coordinates for the index\n  int textureSize = int(ceil(sqrt(float(pathLength))));\n  int x = index - (index / textureSize) * textureSize;\n  int y = index / textureSize;\n  \n  vec2 texCoord = (vec2(float(x), float(y)) + 0.5) / float(textureSize);\n  vec4 pathData = texture(pathTexture, texCoord);\n  \n  return pathData.xy;\n}\n\n// Point-in-polygon algorithm using ray casting\nbool pointInPolygon(vec2 point, sampler2D pathTexture, int pathLength) {\n  bool inside = false;\n  \n  for (int i = 0; i < 2048; i++) {\n    if (i >= pathLength) break;\n    \n    int j = int(mod(float(i + 1), float(pathLength)));\n    \n    vec2 pi = getPolygonPoint(pathTexture, i, pathLength);\n    vec2 pj = getPolygonPoint(pathTexture, j, pathLength);\n    \n    if (((pi.y > point.y) != (pj.y > point.y)) &&\n        (point.x < (pj.x - pi.x) * (point.y - pi.y) / (pj.y - pi.y) + pi.x)) {\n      inside = !inside;\n    }\n  }\n  \n  return inside;\n}\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, textureCoords);\n  vec2 p = 2.0 * pointPosition.rg / spaceSize - 1.0;\n  p *= spaceSize / screenSize;\n  #ifdef USE_UNIFORM_BUFFERS\n  // Convert mat4 to mat3 for vec3 multiplication\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 final = transformMat3 * vec3(p, 1);\n  #else\n  vec3 final = transformationMatrix * vec3(p, 1);\n  #endif\n\n  // Convert to screen coordinates for polygon check\n  vec2 screenPos = (final.xy + 1.0) * screenSize / 2.0;\n  \n  fragColor = vec4(0.0, 0.0, pointPosition.r, pointPosition.g);\n  \n  // Check if point center is inside the polygon\n  if (pointInPolygon(screenPos, polygonPathTexture, polygonPathLength)) {\n    fragColor.r = 1.0;\n  }\n} ",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.findPointsOnPolygonSelectionVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{findPointsOnPolygonSelectionUniforms:this.findPointsOnPolygonSelectionUniformStore.getManagedUniformBuffer(i,"findPointsOnPolygonSelectionUniforms")}})),this.findHoveredPointUniformStore||(this.findHoveredPointUniformStore=new hH({findHoveredPointUniforms:{uniformTypes:{pointsTextureSize:"f32",sizeScale:"f32",spaceSize:"f32",screenSize:"vec2<f32>",ratio:"f32",transformationMatrix:"mat4x4<f32>",mousePosition:"vec2<f32>",scalePointsOnZoom:"f32",maxPointSize:"f32"},defaultUniforms:{pointsTextureSize:o.pointsTextureSize??0,sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),ratio:r.pixelRatio??LH.pixelRatio,transformationMatrix:o.transformationMatrix4x4,mousePosition:uY(o.screenMousePosition,[0,0]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,maxPointSize:o.maxPointSize??100}}})),this.findHoveredPointCommand||(this.findHoveredPointCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec4 rgba;\n\nout vec4 fragColor;\n\nvoid main() {\n  if (rgba.g <= 0.0) {\n    discard;\n  }\n  fragColor = rgba;\n}",vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 pointIndices;\nin float size;\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform findHoveredPointUniforms {\n  float pointsTextureSize;\n  float sizeScale;\n  float spaceSize;\n  vec2 screenSize;\n  float ratio;\n  mat4 transformationMatrix;\n  vec2 mousePosition;\n  float scalePointsOnZoom;\n  float maxPointSize;\n} findHoveredPoint;\n\n#define pointsTextureSize findHoveredPoint.pointsTextureSize\n#define sizeScale findHoveredPoint.sizeScale\n#define spaceSize findHoveredPoint.spaceSize\n#define screenSize findHoveredPoint.screenSize\n#define ratio findHoveredPoint.ratio\n#define transformationMatrix findHoveredPoint.transformationMatrix\n#define mousePosition findHoveredPoint.mousePosition\n#define scalePointsOnZoom findHoveredPoint.scalePointsOnZoom\n#define maxPointSize findHoveredPoint.maxPointSize\n#else\nuniform float pointsTextureSize;\nuniform float sizeScale;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform float ratio;\nuniform mat3 transformationMatrix;\nuniform vec2 mousePosition;\nuniform float scalePointsOnZoom;\nuniform float maxPointSize;\n#endif\n\nout vec4 rgba;\n\nfloat calculatePointSize(float size) {\n  float pSize;\n\n  if (scalePointsOnZoom > 0.0) { \n    pSize = size * ratio * transformationMatrix[0][0];\n  } else {\n    pSize = size * ratio * min(5.0, max(1.0, transformationMatrix[0][0] * 0.01));\n  }\n\n  return min(pSize, maxPointSize * ratio);\n}\n\nfloat euclideanDistance (float x1, float x2, float y1, float y2) {\n  return sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n}\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, (pointIndices + 0.5) / pointsTextureSize);\n  vec2 point = pointPosition.rg;\n\n  vec2 normalizedPosition = 2.0 * point / spaceSize - 1.0;\n  normalizedPosition *= spaceSize / screenSize;\n  \n  #ifdef USE_UNIFORM_BUFFERS\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 finalPosition = transformMat3 * vec3(normalizedPosition, 1);\n  #else\n  vec3 finalPosition = transformationMatrix * vec3(normalizedPosition, 1);\n  #endif\n\n  float pointRadius = 0.5 * calculatePointSize(size * sizeScale);\n  vec2 pointScreenPosition = (finalPosition.xy + 1.0) * screenSize / 2.0;\n  \n  rgba = vec4(0.0);\n  gl_Position = vec4(0.5, 0.5, 0.0, 1.0);\n  \n  if (euclideanDistance(pointScreenPosition.x, mousePosition.x, pointScreenPosition.y, mousePosition.y) < pointRadius / ratio) {\n    float index = pointIndices.g * pointsTextureSize + pointIndices.r;\n    rgba = vec4(index, size, pointPosition.xy);\n    gl_Position = vec4(-0.5, -0.5, 0.0, 1.0);\n  }\n\n  gl_PointSize = 1.0;\n}",topology:"point-list",vertexCount:s.pointsNumber??0,attributes:{...this.hoveredPointIndices&&{pointIndices:this.hoveredPointIndices},...this.sizeBuffer&&{size:this.sizeBuffer}},bufferLayout:[{name:"pointIndices",format:"float32x2"},{name:"size",format:"float32"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{findHoveredPointUniforms:this.findHoveredPointUniformStore.getManagedUniformBuffer(i,"findHoveredPointUniforms")},parameters:{depthWriteEnabled:!1,depthCompare:"always",blend:!1}})),this.fillSampledPointsUniformStore||(this.fillSampledPointsUniformStore=new hH({fillSampledPointsUniforms:{uniformTypes:{pointsTextureSize:"f32",transformationMatrix:"mat4x4<f32>",spaceSize:"f32",screenSize:"vec2<f32>"},defaultUniforms:{pointsTextureSize:o.pointsTextureSize??0,transformationMatrix:o.transformationMatrix4x4,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0])}}})),this.fillSampledPointsFboCommand||(this.fillSampledPointsFboCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec4 rgba;\n\nout vec4 fragColor;\n\nvoid main() {\n  fragColor = rgba;\n}",vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 pointIndices;\n\nuniform sampler2D positionsTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform fillSampledPointsUniforms {\n  float pointsTextureSize;\n  mat4 transformationMatrix;\n  float spaceSize;\n  vec2 screenSize;\n} fillSampledPoints;\n\n#define pointsTextureSize fillSampledPoints.pointsTextureSize\n#define transformationMatrix fillSampledPoints.transformationMatrix\n#define spaceSize fillSampledPoints.spaceSize\n#define screenSize fillSampledPoints.screenSize\n#else\nuniform float pointsTextureSize;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform mat3 transformationMatrix;\n#endif\n\nout vec4 rgba;\n\nvoid main() {\n  vec4 pointPosition = texture(positionsTexture, (pointIndices + 0.5) / pointsTextureSize);\n  vec2 p = 2.0 * pointPosition.rg / spaceSize - 1.0;\n  p *= spaceSize / screenSize;\n  #ifdef USE_UNIFORM_BUFFERS\n  // Convert mat4 to mat3 for vec3 multiplication\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 final = transformMat3 * vec3(p, 1);\n  #else\n  vec3 final = transformationMatrix * vec3(p, 1);\n  #endif\n\n  vec2 pointScreenPosition = (final.xy + 1.0) * screenSize / 2.0;\n  float index = pointIndices.g * pointsTextureSize + pointIndices.r;\n  rgba = vec4(index, 1.0, pointPosition.xy);\n  float i = (pointScreenPosition.x + 0.5) / screenSize.x;\n  float j = (pointScreenPosition.y + 0.5) / screenSize.y;\n  gl_Position = vec4(2.0 * vec2(i, j) - 1.0, 0.0, 1.0);\n\n  gl_PointSize = 1.0;\n}",topology:"point-list",vertexCount:s.pointsNumber??0,attributes:{...this.sampledPointIndices&&{pointIndices:this.sampledPointIndices}},bufferLayout:[{name:"pointIndices",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{fillSampledPointsUniforms:this.fillSampledPointsUniformStore.getManagedUniformBuffer(i,"fillSampledPointsUniforms")},parameters:{depthWriteEnabled:!1,depthCompare:"always"}})),this.drawHighlightedVertexCoordBuffer||(this.drawHighlightedVertexCoordBuffer=i.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.drawHighlightedUniformStore||(this.drawHighlightedUniformStore=new hH({drawHighlightedUniforms:{uniformTypes:{size:"f32",transformationMatrix:"mat4x4<f32>",pointsTextureSize:"f32",sizeScale:"f32",spaceSize:"f32",screenSize:"vec2<f32>",scalePointsOnZoom:"f32",pointIndex:"f32",maxPointSize:"f32",color:"vec4<f32>",universalPointOpacity:"f32",greyoutOpacity:"f32",isDarkenGreyout:"f32",backgroundColor:"vec4<f32>",greyoutColor:"vec4<f32>",width:"f32"},defaultUniforms:{size:1,transformationMatrix:o.transformationMatrix4x4,pointsTextureSize:o.pointsTextureSize??0,sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,pointIndex:-1,maxPointSize:o.maxPointSize??100,color:[0,0,0,1],universalPointOpacity:r.pointOpacity??1,greyoutOpacity:r.pointGreyoutOpacity??-1,isDarkenGreyout:o.isDarkenGreyout?1:0,backgroundColor:dY(o.backgroundColor,[0,0,0,1]),greyoutColor:dY(o.greyoutPointColor,[0,0,0,1]),width:.85}}})),this.drawHighlightedCommand||(this.drawHighlightedCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform drawHighlightedUniforms {\n  float size;\n  mat4 transformationMatrix;\n  float pointsTextureSize;\n  float sizeScale;\n  float spaceSize;\n  vec2 screenSize;\n  float scalePointsOnZoom;\n  float pointIndex;\n  float maxPointSize;\n  vec4 color;\n  float universalPointOpacity;\n  float greyoutOpacity;\n  float isDarkenGreyout;\n  vec4 backgroundColor;\n  vec4 greyoutColor;\n  float width;\n} drawHighlighted;\n\n#define width drawHighlighted.width\n#else\nuniform float width;\n#endif\n\nin vec2 vertexPosition;\nin float pointOpacity;\nin vec3 rgbColor;\n\nout vec4 fragColor;\n\nconst float smoothing = 1.05;\n\nvoid main () {\n  float r = dot(vertexPosition, vertexPosition);\n  float opacity = smoothstep(r, r * smoothing, 1.0);\n  float stroke = smoothstep(width, width * smoothing, r);\n  fragColor = vec4(rgbColor, opacity * stroke * pointOpacity);\n}",vs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nin vec2 vertexCoord;\n\nuniform sampler2D positionsTexture;\nuniform sampler2D pointGreyoutStatusTexture;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform drawHighlightedUniforms {\n  float size;\n  mat4 transformationMatrix;\n  float pointsTextureSize;\n  float sizeScale;\n  float spaceSize;\n  vec2 screenSize;\n  float scalePointsOnZoom;\n  float pointIndex;\n  float maxPointSize;\n  vec4 color;\n  float universalPointOpacity;\n  float greyoutOpacity;\n  float isDarkenGreyout;\n  vec4 backgroundColor;\n  vec4 greyoutColor;\n  float width;\n} drawHighlighted;\n\n#define size drawHighlighted.size\n#define transformationMatrix drawHighlighted.transformationMatrix\n#define pointsTextureSize drawHighlighted.pointsTextureSize\n#define sizeScale drawHighlighted.sizeScale\n#define spaceSize drawHighlighted.spaceSize\n#define screenSize drawHighlighted.screenSize\n#define scalePointsOnZoom drawHighlighted.scalePointsOnZoom\n#define pointIndex drawHighlighted.pointIndex\n#define maxPointSize drawHighlighted.maxPointSize\n#define color drawHighlighted.color\n#define universalPointOpacity drawHighlighted.universalPointOpacity\n#define greyoutOpacity drawHighlighted.greyoutOpacity\n#define isDarkenGreyout drawHighlighted.isDarkenGreyout\n#define backgroundColor drawHighlighted.backgroundColor\n#define greyoutColor drawHighlighted.greyoutColor\n#else\nuniform float size;\nuniform mat3 transformationMatrix;\nuniform float pointsTextureSize;\nuniform float sizeScale;\nuniform float spaceSize;\nuniform vec2 screenSize;\nuniform float scalePointsOnZoom;\nuniform float pointIndex;\nuniform float maxPointSize;\nuniform vec4 color;\nuniform float universalPointOpacity;\nuniform float greyoutOpacity;\nuniform float isDarkenGreyout;\nuniform vec4 backgroundColor;\nuniform vec4 greyoutColor;\nuniform float width;\n#endif\nout vec2 vertexPosition;\nout float pointOpacity;\nout vec3 rgbColor;\n\nfloat calculatePointSize(float pointSize) {\n  float pSize;\n\n  if (scalePointsOnZoom > 0.0) { \n    pSize = pointSize * transformationMatrix[0][0];\n  } else {\n    pSize = pointSize * min(5.0, max(1.0, transformationMatrix[0][0] * 0.01));\n  }\n\n  return min(pSize, maxPointSize);\n}\n\nconst float relativeRingRadius = 1.3;\n\nvoid main () {\n  vertexPosition = vertexCoord;\n\n  vec2 textureCoordinates = vec2(mod(pointIndex, pointsTextureSize), floor(pointIndex / pointsTextureSize)) + 0.5;\n  vec4 pointPosition = texture(positionsTexture, textureCoordinates / pointsTextureSize);\n\n  rgbColor = color.rgb;\n  pointOpacity = color.a * universalPointOpacity;\n  vec4 greyoutStatus = texture(pointGreyoutStatusTexture, textureCoordinates / pointsTextureSize);\n  if (greyoutStatus.r > 0.0) {\n    if (greyoutColor[0] != -1.0) {\n      rgbColor = greyoutColor.rgb;\n      pointOpacity = greyoutColor.a;\n    } else {\n      // If greyoutColor is not set, make color lighter or darker based on isDarkenGreyout\n      float blendFactor = 0.65; // Controls how much to modify (0.0 = original, 1.0 = target color)\n      \n      #ifdef USE_UNIFORM_BUFFERS\n      if (isDarkenGreyout > 0.0) {\n        // Darken the color\n        rgbColor = mix(rgbColor, vec3(0.2), blendFactor);\n      } else {\n        // Lighten the color\n        rgbColor = mix(rgbColor, max(backgroundColor.rgb, vec3(0.8)), blendFactor);\n      }\n      #else\n      if (isDarkenGreyout > 0.0) {\n        // Darken the color\n        rgbColor = mix(rgbColor, vec3(0.2), blendFactor);\n      } else {\n        // Lighten the color\n        rgbColor = mix(rgbColor, max(backgroundColor.rgb, vec3(0.8)), blendFactor);\n      }\n      #endif\n    }\n\n    if (greyoutOpacity != -1.0) {\n      pointOpacity *= greyoutOpacity;\n    }\n  }\n\n  // Calculate point radius\n  float pointSize = (calculatePointSize(size * sizeScale) * relativeRingRadius) / transformationMatrix[0][0];\n  float radius = pointSize * 0.5;\n\n  // Calculate point position in screen space\n  vec2 a = pointPosition.xy;\n  vec2 b = pointPosition.xy + vec2(0.0, radius);\n  vec2 xBasis = b - a;\n  vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n  vec2 pointPositionInScreenSpace = a + xBasis * vertexCoord.x + yBasis * radius * vertexCoord.y;\n\n  // Transform point position to normalized device coordinates\n  vec2 p = 2.0 * pointPositionInScreenSpace / spaceSize - 1.0;\n  p *= spaceSize / screenSize;\n  #ifdef USE_UNIFORM_BUFFERS\n  mat3 transformMat3 = mat3(transformationMatrix);\n  vec3 final = transformMat3 * vec3(p, 1);\n  #else\n  vec3 final = transformationMatrix * vec3(p, 1);\n  #endif\n  \n  gl_Position = vec4(final.rg, 0, 1);\n}",topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.drawHighlightedVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{drawHighlightedUniforms:this.drawHighlightedUniformStore.getManagedUniformBuffer(i,"drawHighlightedUniforms")},parameters:{blend:!0,blendColorOperation:"add",blendColorSrcFactor:"src-alpha",blendColorDstFactor:"one-minus-src-alpha",blendAlphaOperation:"add",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one-minus-src-alpha",depthWriteEnabled:!1,depthCompare:"always"}})),this.trackPointsVertexCoordBuffer||(this.trackPointsVertexCoordBuffer=i.createBuffer({data:new Float32Array([-1,-1,1,-1,-1,1,1,1])})),this.trackPointsUniformStore||(this.trackPointsUniformStore=new hH({trackPointsUniforms:{uniformTypes:{pointsTextureSize:"f32"},defaultUniforms:{pointsTextureSize:o.pointsTextureSize??0}}})),this.trackPointsCommand||(this.trackPointsCommand=new tY(i,{fs:"#version 300 es\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D positionsTexture;\nuniform sampler2D trackedIndices;\n\n#ifdef USE_UNIFORM_BUFFERS\nlayout(std140) uniform trackPointsUniforms {\n  float pointsTextureSize;\n} trackPoints;\n\n#define pointsTextureSize trackPoints.pointsTextureSize\n#else\nuniform float pointsTextureSize;\n#endif\n\nin vec2 textureCoords;\n\nout vec4 fragColor;\n\nvoid main() {\n  vec4 trackedPointIndices = texture(trackedIndices, textureCoords);\n  if (trackedPointIndices.r < 0.0) discard;\n  vec4 pointPosition = texture(positionsTexture, (trackedPointIndices.rg + 0.5) / pointsTextureSize);\n\n  fragColor = vec4(pointPosition.rg, 1.0, 1.0);\n}\n\n",vs:sY,topology:"triangle-strip",vertexCount:4,attributes:{vertexCoord:this.trackPointsVertexCoordBuffer},bufferLayout:[{name:"vertexCoord",format:"float32x2"}],defines:{USE_UNIFORM_BUFFERS:!0},bindings:{trackPointsUniforms:this.trackPointsUniformStore.getManagedUniformBuffer(i,"trackPointsUniforms")}}))}updateColor(){var e;const{device:t,store:{pointsTextureSize:n},data:i}=this;if(!n)return;const r=i.pointColors,o=r.byteLength;this.colorBuffer&&this.colorBuffer.byteLength===o?this.colorBuffer.write(r):(null==(e=this.colorBuffer)||e.destroy(),this.colorBuffer=t.createBuffer({data:r,usage:eV.VERTEX|eV.COPY_DST})),this.drawCommand&&this.drawCommand.setAttributes({color:this.colorBuffer})}updateGreyoutStatus(){const{device:e,store:{selectedIndices:t,pointsTextureSize:n}}=this;if(!n)return;const i=new Float32Array(n*n*4).fill(t?1:0);if(t)for(const r of t)i[4*r]=0;this.greyoutStatusTexture&&this.greyoutStatusTexture.width===n&&this.greyoutStatusTexture.height===n||(this.greyoutStatusTexture&&this.greyoutStatusTexture.destroy(),this.greyoutStatusTexture=e.createTexture({width:n,height:n,format:"rgba32float"})),this.greyoutStatusTexture.copyImageData({data:i,bytesPerRow:oY("rgba32float",n),mipLevel:0,x:0,y:0})}updatePinnedStatus(){const{device:e,store:{pointsTextureSize:t},data:n}=this;if(!t)return;const i=new Float32Array(t*t*4).fill(0);if(n.inputPinnedPoints&&void 0!==n.pointsNumber)for(const r of n.inputPinnedPoints)r>=0&&r<n.pointsNumber&&(i[4*r]=1);this.pinnedStatusTexture&&this.pinnedStatusTexture.width===t&&this.pinnedStatusTexture.height===t||(this.pinnedStatusTexture&&this.pinnedStatusTexture.destroy(),this.pinnedStatusTexture=e.createTexture({width:t,height:t,format:"rgba32float"})),this.pinnedStatusTexture.copyImageData({data:i,bytesPerRow:oY("rgba32float",t),mipLevel:0,x:0,y:0})}updateSize(){var e;const{device:t,store:{pointsTextureSize:n},data:i}=this;if(!n||void 0===i.pointsNumber||void 0===i.pointSizes)return;const r=i.pointSizes,o=r.byteLength;this.sizeBuffer&&this.sizeBuffer.byteLength===o?this.sizeBuffer.write(r):(null==(e=this.sizeBuffer)||e.destroy(),this.sizeBuffer=t.createBuffer({data:r,usage:eV.VERTEX|eV.COPY_DST})),this.drawCommand&&this.drawCommand.setAttributes({size:this.sizeBuffer});const s=new Float32Array(n*n*4);for(let a=0;a<i.pointsNumber;a++)s[4*a]=i.pointSizes[a];this.sizeTexture&&this.sizeTexture.width===n&&this.sizeTexture.height===n||(this.sizeTexture&&this.sizeTexture.destroy(),this.sizeTexture=t.createTexture({width:n,height:n,format:"rgba32float"})),this.sizeTexture.copyImageData({data:s,bytesPerRow:oY("rgba32float",n),mipLevel:0,x:0,y:0})}updateShape(){var e;const{device:t,data:n}=this;if(void 0===n.pointsNumber||void 0===n.pointShapes)return;const i=n.pointShapes,r=i.byteLength;this.shapeBuffer&&this.shapeBuffer.byteLength===r?this.shapeBuffer.write(i):(null==(e=this.shapeBuffer)||e.destroy(),this.shapeBuffer=t.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST})),this.drawCommand&&this.drawCommand.setAttributes({shape:this.shapeBuffer})}updateImageIndices(){var e;const{device:t,data:n}=this;if(void 0===n.pointsNumber||void 0===n.pointImageIndices)return;const i=n.pointImageIndices,r=i.byteLength;this.imageIndicesBuffer&&this.imageIndicesBuffer.byteLength===r?this.imageIndicesBuffer.write(i):(null==(e=this.imageIndicesBuffer)||e.destroy(),this.imageIndicesBuffer=t.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST})),this.drawCommand&&this.drawCommand.setAttributes({imageIndex:this.imageIndicesBuffer})}updateImageSizes(){var e;const{device:t,data:n}=this;if(void 0===n.pointsNumber||void 0===n.pointImageSizes)return;const i=n.pointImageSizes,r=i.byteLength;this.imageSizesBuffer&&this.imageSizesBuffer.byteLength===r?this.imageSizesBuffer.write(i):(null==(e=this.imageSizesBuffer)||e.destroy(),this.imageSizesBuffer=t.createBuffer({data:i,usage:eV.VERTEX|eV.COPY_DST})),this.drawCommand&&this.drawCommand.setAttributes({imageSize:this.imageSizesBuffer})}createAtlas(){var e,t,n;const{device:i,data:r,store:o}=this;if(null==(e=r.inputImageData)||!e.length)return this.imageCount=0,this.imageAtlasCoordsTextureSize=0,this.imageAtlasCoordsTexture||(this.imageAtlasCoordsTexture=i.createTexture({data:new Float32Array(4).fill(0),width:1,height:1,format:"rgba32float"})),void(this.imageAtlasTexture||(this.imageAtlasTexture=i.createTexture({data:new Uint8Array(4).fill(0),width:1,height:1,format:"rgba8unorm"})));const s=function(e,t=16384){if(null==e||!e.length)return null;let n=0;for(const l of e){const e=Math.max(l.width,l.height);e>n&&(n=e)}if(0===n)return null;const i=Math.ceil(Math.sqrt(e.length));let r=i*n,o=1;r>t&&(o=t/r,n=Math.max(1,Math.floor(n*o)),r=Math.max(1,Math.floor(r*o)));const s=new Uint8Array(r*r*4).fill(0),a=new Float32Array(i*i*4).fill(-1);for(const[l,c]of e.entries()){const e=c.width,t=c.height;if(0===e||0===t)continue;const o=Math.min(1,n/Math.max(e,t)),u=Math.floor(e*o),d=Math.floor(t*o),h=l%i*n,f=Math.floor(l/i)*n;a[4*l]=h/r,a[4*l+1]=f/r,a[4*l+2]=(h+u)/r,a[4*l+3]=(f+d)/r;for(let n=0;n<d;n++)for(let i=0;i<u;i++){const o=Math.floor(i*(e/u)),a=4*(Math.floor(n*(t/d))*e+o),l=4*((f+n)*r+(h+i));s[l]=c.data[a]??0,s[l+1]=c.data[a+1]??0,s[l+2]=c.data[a+2]??0,s[l+3]=c.data[a+3]??255}}return{atlasData:s,atlasSize:r,atlasCoords:a,atlasCoordsSize:i}}(r.inputImageData,o.webglMaxTextureSize);if(!s)return;this.imageCount=r.inputImageData.length;const{atlasData:a,atlasSize:l,atlasCoords:c,atlasCoordsSize:u}=s;this.imageAtlasCoordsTextureSize=u,null==(t=this.imageAtlasTexture)||t.destroy(),this.imageAtlasTexture=i.createTexture({width:l,height:l,format:"rgba8unorm"}),this.imageAtlasTexture.copyImageData({data:a,bytesPerRow:oY("rgba8unorm",l),rowsPerImage:l,mipLevel:0,x:0,y:0}),null==(n=this.imageAtlasCoordsTexture)||n.destroy(),this.imageAtlasCoordsTexture=i.createTexture({width:u,height:u,format:"rgba32float"}),this.imageAtlasCoordsTexture.copyImageData({data:c,bytesPerRow:oY("rgba32float",u),rowsPerImage:u,mipLevel:0,x:0,y:0})}updateSampledPointsGrid(){const{store:{screenSize:e},config:{pointSamplingDistance:t},device:n}=this;let i=t??Math.min(...e)/2;0===i&&(i=LH.pointSamplingDistance);const r=Math.ceil(e[0]/i),o=Math.ceil(e[1]/i);(!this.sampledPointsFbo||this.sampledPointsFbo.width!==r||this.sampledPointsFbo.height!==o)&&(this.sampledPointsFbo&&!this.sampledPointsFbo.destroyed&&this.sampledPointsFbo.destroy(),this.sampledPointsFbo=n.createFramebuffer({width:r,height:o,colorAttachments:["rgba32float"]}))}trackPoints(){var e;if(null==(e=this.trackedIndices)||!e.length||!this.trackPointsCommand||!this.trackPointsUniformStore||!this.trackedPositionsFbo||this.trackedPositionsFbo.destroyed||!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.trackedIndicesTexture||this.trackedIndicesTexture.destroyed)return;this.trackPointsUniformStore.setUniforms({trackPointsUniforms:{pointsTextureSize:this.store.pointsTextureSize??0}}),this.trackPointsCommand.setBindings({positionsTexture:this.currentPositionTexture,trackedIndices:this.trackedIndicesTexture});const t=this.device.beginRenderPass({framebuffer:this.trackedPositionsFbo});this.trackPointsCommand.draw(t),t.end()}draw(e){var t,n;const{data:i,config:r,store:o}=this;if(this.colorBuffer||this.updateColor(),this.sizeBuffer||this.updateSize(),this.shapeBuffer||this.updateShape(),this.imageIndicesBuffer||this.updateImageIndices(),this.imageSizesBuffer||this.updateImageSizes(),!this.drawCommand||!this.drawUniformStore||!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.greyoutStatusTexture||this.greyoutStatusTexture.destroyed||(!this.imageAtlasTexture||!this.imageAtlasCoordsTexture)&&(this.createAtlas(),!this.imageAtlasTexture||!this.imageAtlasCoordsTexture)||this.imageAtlasTexture.destroyed||this.imageAtlasCoordsTexture.destroyed||!i.pointsNumber||0===i.pointsNumber||!o.screenSize||0===o.screenSize[0]||0===o.screenSize[1])return;this.drawCommand.setVertexCount(i.pointsNumber);const s={ratio:r.pixelRatio??LH.pixelRatio,transformationMatrix:o.transformationMatrix4x4,pointsTextureSize:o.pointsTextureSize??0,sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),greyoutColor:dY(o.greyoutPointColor,[-1,-1,-1,-1]),backgroundColor:dY(o.backgroundColor,[0,0,0,1]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,maxPointSize:o.maxPointSize??100,isDarkenGreyout:o.isDarkenGreyout?1:0,hasImages:this.imageCount>0?1:0,imageCount:this.imageCount,imageAtlasCoordsTextureSize:this.imageAtlasCoordsTextureSize??0},a={greyoutOpacity:r.pointGreyoutOpacity??-1,pointOpacity:r.pointOpacity??1,isDarkenGreyout:o.isDarkenGreyout?1:0,backgroundColor:dY(o.backgroundColor,[0,0,0,1])};if(o.selectedIndices&&o.selectedIndices.length>0?(this.drawUniformStore.setUniforms({drawVertexUniforms:{...s,skipSelected:1,skipUnselected:0},drawFragmentUniforms:a}),this.drawCommand.setBindings({positionsTexture:this.currentPositionTexture,pointGreyoutStatus:this.greyoutStatusTexture,imageAtlasTexture:this.imageAtlasTexture,imageAtlasCoords:this.imageAtlasCoordsTexture}),this.drawCommand.draw(e),this.drawUniformStore.setUniforms({drawVertexUniforms:{...s,skipSelected:0,skipUnselected:1},drawFragmentUniforms:a}),this.drawCommand.setBindings({positionsTexture:this.currentPositionTexture,pointGreyoutStatus:this.greyoutStatusTexture,imageAtlasTexture:this.imageAtlasTexture,imageAtlasCoords:this.imageAtlasCoordsTexture}),this.drawCommand.draw(e)):(this.drawUniformStore.setUniforms({drawVertexUniforms:{...s,skipSelected:0,skipUnselected:0},drawFragmentUniforms:a}),this.drawCommand.setBindings({positionsTexture:this.currentPositionTexture,pointGreyoutStatus:this.greyoutStatusTexture,imageAtlasTexture:this.imageAtlasTexture,imageAtlasCoords:this.imageAtlasCoordsTexture}),this.drawCommand.draw(e)),r.renderHoveredPointRing&&o.hoveredPoint&&this.drawHighlightedCommand&&this.drawHighlightedUniformStore){if(!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.greyoutStatusTexture||this.greyoutStatusTexture.destroyed)return;const n=(null==(t=i.pointSizes)?void 0:t[o.hoveredPoint.index])??1;this.drawHighlightedUniformStore.setUniforms({drawHighlightedUniforms:{size:n,transformationMatrix:o.transformationMatrix4x4,pointsTextureSize:o.pointsTextureSize??0,sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,pointIndex:o.hoveredPoint.index,maxPointSize:o.maxPointSize??100,color:dY(o.hoveredPointRingColor,[0,0,0,1]),universalPointOpacity:r.pointOpacity??1,greyoutOpacity:r.pointGreyoutOpacity??-1,isDarkenGreyout:o.isDarkenGreyout?1:0,backgroundColor:dY(o.backgroundColor,[0,0,0,1]),greyoutColor:dY(o.greyoutPointColor,[0,0,0,1]),width:.85}}),this.drawHighlightedCommand.setBindings({positionsTexture:this.currentPositionTexture,pointGreyoutStatusTexture:this.greyoutStatusTexture}),this.drawHighlightedCommand.draw(e)}if(o.focusedPoint&&this.drawHighlightedCommand&&this.drawHighlightedUniformStore){if(!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.greyoutStatusTexture||this.greyoutStatusTexture.destroyed)return;const t=(null==(n=i.pointSizes)?void 0:n[o.focusedPoint.index])??1;this.drawHighlightedUniformStore.setUniforms({drawHighlightedUniforms:{size:t,transformationMatrix:o.transformationMatrix4x4,pointsTextureSize:o.pointsTextureSize??0,sizeScale:r.pointSizeScale??1,spaceSize:o.adjustedSpaceSize??0,screenSize:uY(o.screenSize,[0,0]),scalePointsOnZoom:r.scalePointsOnZoom??1?1:0,pointIndex:o.focusedPoint.index,maxPointSize:o.maxPointSize??100,color:dY(o.focusedPointRingColor,[0,0,0,1]),universalPointOpacity:r.pointOpacity??1,greyoutOpacity:r.pointGreyoutOpacity??-1,isDarkenGreyout:o.isDarkenGreyout?1:0,backgroundColor:dY(o.backgroundColor,[0,0,0,1]),greyoutColor:dY(o.greyoutPointColor,[0,0,0,1]),width:.85}}),this.drawHighlightedCommand.setBindings({positionsTexture:this.currentPositionTexture,pointGreyoutStatusTexture:this.greyoutStatusTexture}),this.drawHighlightedCommand.draw(e)}}updatePosition(){if(!this.updatePositionCommand||!this.updatePositionUniformStore||!this.currentPositionFbo||this.currentPositionFbo.destroyed||!this.previousPositionTexture||this.previousPositionTexture.destroyed||!this.velocityTexture||this.velocityTexture.destroyed||!this.pinnedStatusTexture||this.pinnedStatusTexture.destroyed)return;this.updatePositionUniformStore.setUniforms({updatePositionUniforms:{friction:this.config.simulationFriction??0,spaceSize:this.store.adjustedSpaceSize??0}}),this.updatePositionCommand.setBindings({positionsTexture:this.previousPositionTexture,velocity:this.velocityTexture,pinnedStatusTexture:this.pinnedStatusTexture});const e=this.device.beginRenderPass({framebuffer:this.currentPositionFbo});this.updatePositionCommand.draw(e),e.end(),this.swapFbo(),this.isPositionsUpToDate=!1}drag(){var e;if(!this.dragPointCommand||!this.dragPointUniformStore||!this.currentPositionFbo||this.currentPositionFbo.destroyed||!this.previousPositionTexture||this.previousPositionTexture.destroyed)return;this.dragPointUniformStore.setUniforms({dragPointUniforms:{mousePos:uY(this.store.mousePosition,[0,0]),index:(null==(e=this.store.hoveredPoint)?void 0:e.index)??-1}}),this.dragPointCommand.setBindings({positionsTexture:this.previousPositionTexture});const t=this.device.beginRenderPass({framebuffer:this.currentPositionFbo});this.dragPointCommand.draw(t),t.end(),this.swapFbo(),this.isPositionsUpToDate=!1}findPointsOnAreaSelection(){var e,t;if(!this.findPointsOnAreaSelectionCommand||!this.findPointsOnAreaSelectionUniformStore||!this.selectedFbo||this.selectedFbo.destroyed||!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.sizeTexture||this.sizeTexture.destroyed)return;this.findPointsOnAreaSelectionUniformStore.setUniforms({findPointsOnAreaSelectionUniforms:{spaceSize:this.store.adjustedSpaceSize??0,screenSize:uY(this.store.screenSize,[0,0]),sizeScale:this.config.pointSizeScale??1,transformationMatrix:this.store.transformationMatrix4x4,ratio:this.config.pixelRatio??LH.pixelRatio,selection0:uY(null==(e=this.store.selectedArea)?void 0:e[0],[0,0]),selection1:uY(null==(t=this.store.selectedArea)?void 0:t[1],[0,0]),scalePointsOnZoom:this.config.scalePointsOnZoom??1?1:0,maxPointSize:this.store.maxPointSize??100}}),this.findPointsOnAreaSelectionCommand.setBindings({positionsTexture:this.currentPositionTexture,pointSize:this.sizeTexture});const n=this.device.beginRenderPass({framebuffer:this.selectedFbo});this.findPointsOnAreaSelectionCommand.draw(n),n.end()}findPointsOnPolygonSelection(){if(!this.findPointsOnPolygonSelectionCommand||!this.findPointsOnPolygonSelectionUniformStore||!this.selectedFbo||this.selectedFbo.destroyed||!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.polygonPathTexture||this.polygonPathTexture.destroyed)return;this.findPointsOnPolygonSelectionUniformStore.setUniforms({findPointsOnPolygonSelectionUniforms:{spaceSize:this.store.adjustedSpaceSize??0,screenSize:uY(this.store.screenSize,[0,0]),transformationMatrix:this.store.transformationMatrix4x4,polygonPathLength:this.polygonPathLength}}),this.findPointsOnPolygonSelectionCommand.setBindings({positionsTexture:this.currentPositionTexture,polygonPathTexture:this.polygonPathTexture});const e=this.device.beginRenderPass({framebuffer:this.selectedFbo});this.findPointsOnPolygonSelectionCommand.draw(e),e.end()}updatePolygonPath(e){const{device:t}=this;if(this.polygonPathLength=e.length,0===e.length)return this.polygonPathTexture&&!this.polygonPathTexture.destroyed&&this.polygonPathTexture.destroy(),void(this.polygonPathTexture=void 0);const n=Math.ceil(Math.sqrt(e.length)),i=new Float32Array(n*n*4);for(const[r,o]of e.entries()){const[e,t]=o;i[4*r]=e,i[4*r+1]=t,i[4*r+2]=0,i[4*r+3]=0}this.polygonPathTexture&&this.polygonPathTexture.width===n&&this.polygonPathTexture.height===n||(this.polygonPathTexture&&!this.polygonPathTexture.destroyed&&this.polygonPathTexture.destroy(),this.polygonPathTexture=t.createTexture({width:n,height:n,format:"rgba32float"})),this.polygonPathTexture.copyImageData({data:i,bytesPerRow:oY("rgba32float",n),mipLevel:0,x:0,y:0})}findHoveredPoint(){if(!this.hoveredFbo||this.hoveredFbo.destroyed||!this.findHoveredPointCommand||!this.findHoveredPointUniformStore||!this.currentPositionTexture||this.currentPositionTexture.destroyed)return;this.findHoveredPointCommand.setVertexCount(this.data.pointsNumber??0),this.findHoveredPointCommand.setAttributes({...this.hoveredPointIndices&&{pointIndices:this.hoveredPointIndices},...this.sizeBuffer&&{size:this.sizeBuffer}}),this.findHoveredPointUniformStore.setUniforms({findHoveredPointUniforms:{ratio:this.config.pixelRatio??LH.pixelRatio,sizeScale:this.config.pointSizeScale??1,pointsTextureSize:this.store.pointsTextureSize??0,transformationMatrix:this.store.transformationMatrix4x4,spaceSize:this.store.adjustedSpaceSize??0,screenSize:uY(this.store.screenSize,[0,0]),scalePointsOnZoom:this.config.scalePointsOnZoom??1?1:0,mousePosition:uY(this.store.screenMousePosition,[0,0]),maxPointSize:this.store.maxPointSize??100}}),this.findHoveredPointCommand.setBindings({positionsTexture:this.currentPositionTexture});const e=this.device.beginRenderPass({framebuffer:this.hoveredFbo,clearColor:[0,0,0,0]});this.findHoveredPointCommand.draw(e),e.end()}trackPointsByIndices(e){const{store:{pointsTextureSize:t},device:n}=this;if(this.trackedIndices=e,this.trackedPositions=void 0,this.isPositionsUpToDate=!1,null==e||!e.length||!t)return;const i=Math.ceil(Math.sqrt(e.length)),r=new Float32Array(i*i*4).fill(-1);for(const[o,s]of e.entries())void 0!==s&&(r[4*o]=s%t,r[4*o+1]=Math.floor(s/t),r[4*o+2]=0,r[4*o+3]=0);this.trackedIndicesTexture&&this.trackedIndicesTexture.width===i&&this.trackedIndicesTexture.height===i||(this.trackedIndicesTexture&&!this.trackedIndicesTexture.destroyed&&this.trackedIndicesTexture.destroy(),this.trackedIndicesTexture=n.createTexture({width:i,height:i,format:"rgba32float"})),this.trackedIndicesTexture.copyImageData({data:r,bytesPerRow:oY("rgba32float",i),mipLevel:0,x:0,y:0}),(!this.trackedPositionsFbo||this.trackedPositionsFbo.width!==i||this.trackedPositionsFbo.height!==i)&&(this.trackedPositionsFbo&&!this.trackedPositionsFbo.destroyed&&this.trackedPositionsFbo.destroy(),this.trackedPositionsFbo=n.createFramebuffer({width:i,height:i,colorAttachments:["rgba32float"]})),this.trackPoints()}getTrackedPositionsMap(){if(!this.trackedIndices)return new Map;const{config:{enableSimulation:e},store:{isSimulationRunning:t}}=this;if((!e||!t)&&this.isPositionsUpToDate&&this.trackedPositions)return this.trackedPositions;if(!this.trackedPositionsFbo||this.trackedPositionsFbo.destroyed)return new Map;const n=OW(this.device,this.trackedPositionsFbo),i=new Map;for(let r=0;r<n.length/4;r+=1){const e=n[4*r],t=n[4*r+1],o=this.trackedIndices[r];void 0!==e&&void 0!==t&&void 0!==o&&i.set(o,[e,t])}return(!e||!t)&&(this.trackedPositions=i,this.isPositionsUpToDate=!0),i}getSampledPointPositionsMap(){const e=new Map;if(!this.sampledPointsFbo||this.sampledPointsFbo.destroyed)return e;if(this.fillSampledPointsFboCommand&&this.fillSampledPointsUniformStore&&this.sampledPointsFbo){if(!this.currentPositionTexture||this.currentPositionTexture.destroyed)return e;this.fillSampledPointsFboCommand.setVertexCount(this.data.pointsNumber??0),this.fillSampledPointsUniformStore.setUniforms({fillSampledPointsUniforms:{pointsTextureSize:this.store.pointsTextureSize??0,transformationMatrix:this.store.transformationMatrix4x4,spaceSize:this.store.adjustedSpaceSize??0,screenSize:uY(this.store.screenSize,[0,0])}}),this.fillSampledPointsFboCommand.setBindings({positionsTexture:this.currentPositionTexture});const t=this.device.beginRenderPass({framebuffer:this.sampledPointsFbo,clearColor:[0,0,0,0]});this.fillSampledPointsFboCommand.draw(t),t.end()}const t=OW(this.device,this.sampledPointsFbo);for(let n=0;n<t.length/4;n++){const i=t[4*n],r=!!t[4*n+1],o=t[4*n+2],s=t[4*n+3];r&&void 0!==i&&void 0!==o&&void 0!==s&&e.set(i,[o,s])}return e}getSampledPoints(){const e=[],t=[];if(!this.sampledPointsFbo||this.sampledPointsFbo.destroyed)return{indices:e,positions:t};if(this.fillSampledPointsFboCommand&&this.fillSampledPointsUniformStore&&this.sampledPointsFbo){if(!this.currentPositionTexture||this.currentPositionTexture.destroyed)return{indices:e,positions:t};this.fillSampledPointsFboCommand.setVertexCount(this.data.pointsNumber??0),this.fillSampledPointsUniformStore.setUniforms({fillSampledPointsUniforms:{pointsTextureSize:this.store.pointsTextureSize??0,transformationMatrix:this.store.transformationMatrix4x4,spaceSize:this.store.adjustedSpaceSize??0,screenSize:uY(this.store.screenSize,[0,0])}}),this.fillSampledPointsFboCommand.setBindings({positionsTexture:this.currentPositionTexture});const n=this.device.beginRenderPass({framebuffer:this.sampledPointsFbo,clearColor:[0,0,0,0]});this.fillSampledPointsFboCommand.draw(n),n.end()}const n=OW(this.device,this.sampledPointsFbo);for(let i=0;i<n.length/4;i++){const r=n[4*i],o=!!n[4*i+1],s=n[4*i+2],a=n[4*i+3];o&&void 0!==r&&void 0!==s&&void 0!==a&&(e.push(r),t.push(s,a))}return{indices:e,positions:t}}getTrackedPositionsArray(){const e=[];if(!this.trackedIndices||!this.trackedPositionsFbo||this.trackedPositionsFbo.destroyed)return e;e.length=2*this.trackedIndices.length;const t=OW(this.device,this.trackedPositionsFbo);for(let n=0;n<t.length/4;n+=1){const i=t[4*n],r=t[4*n+1],o=this.trackedIndices[n];void 0!==i&&void 0!==r&&void 0!==o&&(e[2*n]=i,e[2*n+1]=r)}return e}destroy(){var e,t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,_;null==(e=this.drawCommand)||e.destroy(),this.drawCommand=void 0,null==(t=this.drawHighlightedCommand)||t.destroy(),this.drawHighlightedCommand=void 0,null==(n=this.updatePositionCommand)||n.destroy(),this.updatePositionCommand=void 0,null==(i=this.dragPointCommand)||i.destroy(),this.dragPointCommand=void 0,null==(r=this.findPointsOnAreaSelectionCommand)||r.destroy(),this.findPointsOnAreaSelectionCommand=void 0,null==(o=this.findPointsOnPolygonSelectionCommand)||o.destroy(),this.findPointsOnPolygonSelectionCommand=void 0,null==(s=this.findHoveredPointCommand)||s.destroy(),this.findHoveredPointCommand=void 0,null==(a=this.fillSampledPointsFboCommand)||a.destroy(),this.fillSampledPointsFboCommand=void 0,null==(l=this.trackPointsCommand)||l.destroy(),this.trackPointsCommand=void 0,this.currentPositionFbo&&!this.currentPositionFbo.destroyed&&this.currentPositionFbo.destroy(),this.currentPositionFbo=void 0,this.previousPositionFbo&&!this.previousPositionFbo.destroyed&&this.previousPositionFbo.destroy(),this.previousPositionFbo=void 0,this.velocityFbo&&!this.velocityFbo.destroyed&&this.velocityFbo.destroy(),this.velocityFbo=void 0,this.selectedFbo&&!this.selectedFbo.destroyed&&this.selectedFbo.destroy(),this.selectedFbo=void 0,this.hoveredFbo&&!this.hoveredFbo.destroyed&&this.hoveredFbo.destroy(),this.hoveredFbo=void 0,this.trackedPositionsFbo&&!this.trackedPositionsFbo.destroyed&&this.trackedPositionsFbo.destroy(),this.trackedPositionsFbo=void 0,this.sampledPointsFbo&&!this.sampledPointsFbo.destroyed&&this.sampledPointsFbo.destroy(),this.sampledPointsFbo=void 0,this.currentPositionTexture&&!this.currentPositionTexture.destroyed&&this.currentPositionTexture.destroy(),this.currentPositionTexture=void 0,this.previousPositionTexture&&!this.previousPositionTexture.destroyed&&this.previousPositionTexture.destroy(),this.previousPositionTexture=void 0,this.velocityTexture&&!this.velocityTexture.destroyed&&this.velocityTexture.destroy(),this.velocityTexture=void 0,this.selectedTexture&&!this.selectedTexture.destroyed&&this.selectedTexture.destroy(),this.selectedTexture=void 0,this.greyoutStatusTexture&&!this.greyoutStatusTexture.destroyed&&this.greyoutStatusTexture.destroy(),this.greyoutStatusTexture=void 0,this.sizeTexture&&!this.sizeTexture.destroyed&&this.sizeTexture.destroy(),this.sizeTexture=void 0,this.trackedIndicesTexture&&!this.trackedIndicesTexture.destroyed&&this.trackedIndicesTexture.destroy(),this.trackedIndicesTexture=void 0,this.polygonPathTexture&&!this.polygonPathTexture.destroyed&&this.polygonPathTexture.destroy(),this.polygonPathTexture=void 0,this.imageAtlasTexture&&!this.imageAtlasTexture.destroyed&&this.imageAtlasTexture.destroy(),this.imageAtlasTexture=void 0,this.imageAtlasCoordsTexture&&!this.imageAtlasCoordsTexture.destroyed&&this.imageAtlasCoordsTexture.destroy(),this.imageAtlasCoordsTexture=void 0,this.pinnedStatusTexture&&!this.pinnedStatusTexture.destroyed&&this.pinnedStatusTexture.destroy(),this.pinnedStatusTexture=void 0,null==(c=this.updatePositionUniformStore)||c.destroy(),this.updatePositionUniformStore=void 0,null==(u=this.dragPointUniformStore)||u.destroy(),this.dragPointUniformStore=void 0,null==(d=this.drawUniformStore)||d.destroy(),this.drawUniformStore=void 0,null==(h=this.findPointsOnAreaSelectionUniformStore)||h.destroy(),this.findPointsOnAreaSelectionUniformStore=void 0,null==(f=this.findPointsOnPolygonSelectionUniformStore)||f.destroy(),this.findPointsOnPolygonSelectionUniformStore=void 0,null==(p=this.findHoveredPointUniformStore)||p.destroy(),this.findHoveredPointUniformStore=void 0,null==(m=this.fillSampledPointsUniformStore)||m.destroy(),this.fillSampledPointsUniformStore=void 0,null==(g=this.drawHighlightedUniformStore)||g.destroy(),this.drawHighlightedUniformStore=void 0,null==(_=this.trackPointsUniformStore)||_.destroy(),this.trackPointsUniformStore=void 0,this.colorBuffer&&!this.colorBuffer.destroyed&&this.colorBuffer.destroy(),this.colorBuffer=void 0,this.sizeBuffer&&!this.sizeBuffer.destroyed&&this.sizeBuffer.destroy(),this.sizeBuffer=void 0,this.shapeBuffer&&!this.shapeBuffer.destroyed&&this.shapeBuffer.destroy(),this.shapeBuffer=void 0,this.imageIndicesBuffer&&!this.imageIndicesBuffer.destroyed&&this.imageIndicesBuffer.destroy(),this.imageIndicesBuffer=void 0,this.imageSizesBuffer&&!this.imageSizesBuffer.destroyed&&this.imageSizesBuffer.destroy(),this.imageSizesBuffer=void 0,this.drawPointIndices&&!this.drawPointIndices.destroyed&&this.drawPointIndices.destroy(),this.drawPointIndices=void 0,this.hoveredPointIndices&&!this.hoveredPointIndices.destroyed&&this.hoveredPointIndices.destroy(),this.hoveredPointIndices=void 0,this.sampledPointIndices&&!this.sampledPointIndices.destroyed&&this.sampledPointIndices.destroy(),this.sampledPointIndices=void 0,this.updatePositionVertexCoordBuffer&&!this.updatePositionVertexCoordBuffer.destroyed&&this.updatePositionVertexCoordBuffer.destroy(),this.updatePositionVertexCoordBuffer=void 0,this.dragPointVertexCoordBuffer&&!this.dragPointVertexCoordBuffer.destroyed&&this.dragPointVertexCoordBuffer.destroy(),this.dragPointVertexCoordBuffer=void 0,this.findPointsOnAreaSelectionVertexCoordBuffer&&!this.findPointsOnAreaSelectionVertexCoordBuffer.destroyed&&this.findPointsOnAreaSelectionVertexCoordBuffer.destroy(),this.findPointsOnAreaSelectionVertexCoordBuffer=void 0,this.findPointsOnPolygonSelectionVertexCoordBuffer&&!this.findPointsOnPolygonSelectionVertexCoordBuffer.destroyed&&this.findPointsOnPolygonSelectionVertexCoordBuffer.destroy(),this.findPointsOnPolygonSelectionVertexCoordBuffer=void 0,this.drawHighlightedVertexCoordBuffer&&!this.drawHighlightedVertexCoordBuffer.destroyed&&this.drawHighlightedVertexCoordBuffer.destroy(),this.drawHighlightedVertexCoordBuffer=void 0,this.trackPointsVertexCoordBuffer&&!this.trackPointsVertexCoordBuffer.destroyed&&this.trackPointsVertexCoordBuffer.destroy(),this.trackPointsVertexCoordBuffer=void 0}swapFbo(){if(!this.currentPositionTexture||this.currentPositionTexture.destroyed||!this.previousPositionTexture||this.previousPositionTexture.destroyed||!this.currentPositionFbo||this.currentPositionFbo.destroyed||!this.previousPositionFbo||this.previousPositionFbo.destroyed)return;const e=this.previousPositionTexture,t=this.previousPositionFbo;this.previousPositionTexture=this.currentPositionTexture,this.previousPositionFbo=this.currentPositionFbo,this.currentPositionTexture=e,this.currentPositionFbo=t}rescaleInitialNodePositions(){const{config:{spaceSize:e}}=this;if(!this.data.pointPositions||!e)return;const t=this.data.pointPositions,n=t.length/2;let i=1/0,r=-1/0,o=1/0,s=-1/0;for(let f=0;f<t.length;f+=2){const e=t[f],n=t[f+1];i=Math.min(i,e),r=Math.max(r,e),o=Math.min(o,n),s=Math.max(s,n)}const a=r-i,l=s-o,c=Math.max(a,l);if(c>e)return this.scaleX=void 0,void(this.scaleY=void 0);const u=(n>e*e*.001?e*Math.max(1.2,Math.sqrt(n)/e):.1*e)/c,d=(c-a)/2*u,h=(c-l)/2*u;this.scaleX=e=>(e-i)*u+d,this.scaleY=e=>(e-o)*u+h;for(let f=0;f<n;f++)this.data.pointPositions[2*f]=this.scaleX(t[2*f]),this.data.pointPositions[2*f+1]=this.scaleY(t[2*f+1])}}var hX=typeof Float32Array<"u"?Float32Array:Array;function fX(e,t,n){var i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1];return e[0]=i,e[1]=r,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=h*i+f*s+c,e[7]=h*r+f*a+u,e[8]=h*o+f*l+d,e}function pX(e,t,n){var i=n[0],r=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var mX,gX={exports:{}};var _X,yX,vX,bX,xX,wX={exports:{}},SX={exports:{}},EX={exports:{}},CX={exports:{}},TX={exports:{}},kX={exports:{}};const AX=yY(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var IX,PX,LX,RX=kX.exports;function OX(){return IX||(IX=1,function(e){!function(t,n,i){var r,o=256,s="random",a=i.pow(o,6),l=i.pow(2,52),c=2*l,u=255;function d(e,u,d){var _=[],y=m(p((u=1==u?{entropy:!0}:u||{}).entropy?[e,g(n)]:e??function(){try{var e;return r&&(e=r.randomBytes)?e=e(o):(e=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(e)),g(e)}catch{var i=t.navigator,s=i&&i.plugins;return[+new Date,t,s,t.screen,g(n)]}}(),3),_),v=new h(_),b=function(){for(var e=v.g(6),t=a,n=0;e<l;)e=(e+n)*o,t*=o,n=v.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,m(g(v.S),n),(u.pass||d||function(e,t,n,r){return r&&(r.S&&f(r,v),e.state=function(){return f(v,{})}),n?(i[s]=e,t):e})(b,y,"global"in u?u.global:this==i,u.state)}function h(e){var t,n=e.length,i=this,r=0,s=i.i=i.j=0,a=i.S=[];for(n||(e=[n++]);r<o;)a[r]=r++;for(r=0;r<o;r++)a[r]=a[s=u&s+e[r%n]+(t=a[r])],a[s]=t;(i.g=function(e){for(var t,n=0,r=i.i,s=i.j,a=i.S;e--;)t=a[r=u&r+1],n=n*o+a[u&(a[r]=a[s=u&s+t])+(a[s]=t)];return i.i=r,i.j=s,n})(o)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,i=[],r=typeof e;if(t&&"object"==r)for(n in e)try{i.push(p(e[n],t-1))}catch{}return i.length?i:"string"==r?e:e+"\0"}function m(e,t){for(var n,i=e+"",r=0;r<i.length;)t[u&r]=u&(n^=19*t[u&r])+i.charCodeAt(r++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(i.random(),n),e.exports){e.exports=d;try{r=AX}catch{}}else i["seed"+s]=d}(typeof self<"u"?self:RX,[],Math)}(kX)),kX.exports}var MX=function(){if(LX)return PX;LX=1;var e=(mX||(mX=1,function(e,t){function n(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function r(e,t){var r=new n(e),o=t&&t.state,s=r.next;return s.int32=function(){return 4294967296*r.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=r:this.alea=r}(0,gX)),gX.exports),t=(_X||(_X=1,function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function r(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=r:this.xor128=r}(0,wX)),wX.exports),n=(yX||(yX=1,function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function r(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=r:this.xorwow=r}(0,SX)),SX.exports),i=(vX||(vX=1,function(e,t){function n(e){var t=this;t.next=function(){var e,n,i=t.x,r=t.i;return e=i[r],n=(e^=e>>>7)^e<<24,n^=(e=i[r+1&7])^e>>>10,n^=(e=i[r+3&7])^e>>>3,n^=(e=i[r+4&7])^e<<7,e=i[r+7&7],n^=(e^=e<<13)^e<<9,i[r]=n,t.i=r+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n?i[7]=-1:i[n],e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function r(e,t){null==e&&(e=+new Date);var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&(o.x&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=r:this.xorshift7=r}(0,EX)),EX.exports),r=(bX||(bX=1,function(e,t){function n(e){var t=this;t.next=function(){var e,n,i=t.w,r=t.X,o=t.i;return t.w=i=i+1640531527|0,n=r[o+34&127],e=r[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[o]=n^e,t.i=o,n+(i^i>>>16)|0},function(e,t){var n,i,r,o,s,a=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),r=0,o=-32;o<l;++o)t&&(i^=t.charCodeAt((o+32)%t.length)),0===o&&(s=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(s=s+1640531527|0,r=0==(n=a[127&o]^=i+s)?r+1:0);for(r>=128&&(a[127&(t&&t.length||0)]=-1),r=127,o=512;o>0;--o)i=a[r+34&127],n=a[r=r+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,a[r]=i^n;e.w=s,e.X=a,e.i=r}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function r(e,t){null==e&&(e=+new Date);var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&(o.X&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=r:this.xor4096=r}(0,CX)),CX.exports),o=(xX||(xX=1,function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function r(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=r:this.tychei=r}(0,TX)),TX.exports),s=OX();return s.alea=e,s.xor128=t,s.xorwow=n,s.xorshift7=i,s.xor4096=r,s.tychei=o,PX=s}();const DX=_Y(MX);function NX(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,zX(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FX(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,BX(e,t)}function BX(e,t){return BX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BX(e,t)}function zX(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var UX=function(){function e(){}return e.prototype._seed=function(e,t){if(e===(e||0))return e;for(var n=""+e,i=0,r=0;r<n.length;++r)i^=0|n.charCodeAt(r);return i},e}(),jX=function(e){function t(t,n){var i;return(i=e.call(this)||this)._rng=void 0,i.seed(t,n),i}FX(t,e);var n=t.prototype;return n.next=function(){return this._rng()},n.seed=function(e,t){this._rng=e},n.clone=function(e,n){return new t(this._rng,n)},NX(t,[{key:"name",get:function(){return"function"}}]),t}(UX),VX=function(){var e=[].slice.call(arguments),t=e[0],n=void 0===t?"default":t;switch(typeof n){case"object":if(n instanceof UX)return n;break;case"function":return new jX(n);default:return new jX(DX.apply(void 0,e))}throw new Error('invalid RNG "'+n+'"')},HX=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),function(){return e.next()*(n-t)+t}};function WX(e){return new $X(e)}var $X=function(e){var t=this;this.n=void 0,this.isInt=function(){if(Number.isInteger(t.n))return t;throw new Error("Expected number to be an integer, got "+t.n)},this.isPositive=function(){if(t.n>0)return t;throw new Error("Expected number to be positive, got "+t.n)},this.lessThan=function(e){if(t.n<e)return t;throw new Error("Expected number to be less than "+e+", got "+t.n)},this.greaterThanOrEqual=function(e){if(t.n>=e)return t;throw new Error("Expected number to be greater than or equal to "+e+", got "+t.n)},this.greaterThan=function(e){if(t.n>e)return t;throw new Error("Expected number to be greater than "+e+", got "+t.n)},this.n=e},GX=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),void 0===n&&(n=void 0===t?1:t,t=0),WX(t).isInt(),WX(n).isInt(),function(){return Math.floor(e.next()*(n-t+1)+t)}},qX=function(e){return function(){return e.next()>=.5}},YX=[0,0,.6931471805599453,1.791759469228055,3.1780538303479458,4.787491742782046,6.579251212010101,8.525161361065415,10.60460290274525,12.801827480081469],XX=function(e){return YX[e]},KX=function(e){function t(){return e.apply(this,arguments)||this}FX(t,e);var n=t.prototype;return n.next=function(){return Math.random()},n.seed=function(e,t){},n.clone=function(){return new t},NX(t,[{key:"name",get:function(){return"default"}}]),t}(UX),ZX=function(){function e(e){var t=this;this._rng=void 0,this._patch=void 0,this._cache={},this.next=function(){return t._rng.next()},this.float=function(e,n){return t.uniform(e,n)()},this.int=function(e,n){return t.uniformInt(e,n)()},this.integer=function(e,n){return t.uniformInt(e,n)()},this.bool=function(){return t.uniformBoolean()()},this.boolean=function(){return t.uniformBoolean()()},this.uniform=function(e,n){return t._memoize("uniform",HX,e,n)},this.uniformInt=function(e,n){return t._memoize("uniformInt",GX,e,n)},this.uniformBoolean=function(){return t._memoize("uniformBoolean",qX)},this.normal=function(e,n){return function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),function(){var i,r,o;do{o=(i=2*e.next()-1)*i+(r=2*e.next()-1)*r}while(!o||o>1);return t+n*r*Math.sqrt(-2*Math.log(o)/o)}}(t,e,n)},this.logNormal=function(e,n){return function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1);var i=e.normal(t,n);return function(){return Math.exp(i())}}(t,e,n)},this.bernoulli=function(e){return function(e,t){return void 0===t&&(t=.5),WX(t).greaterThanOrEqual(0).lessThan(1),function(){return Math.floor(e.next()+t)}}(t,e)},this.binomial=function(e,n){return function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=.5),WX(t).isInt().isPositive(),WX(n).greaterThanOrEqual(0).lessThan(1),function(){for(var i=0,r=0;i++<t;)e.next()<n&&r++;return r}}(t,e,n)},this.geometric=function(e){return function(e,t){void 0===t&&(t=.5),WX(t).greaterThan(0).lessThan(1);var n=1/Math.log(1-t);return function(){return Math.floor(1+Math.log(e.next())*n)}}(t,e)},this.poisson=function(e){return function(e,t){if(void 0===t&&(t=1),WX(t).isPositive(),t<10){var n=Math.exp(-t);return function(){for(var i=n,r=0,o=e.next();o>i;)o-=i,i=t*i/++r;return r}}var i=Math.sqrt(t),r=.931+2.53*i,o=.02483*r-.059,s=1.1239+1.1328/(r-3.4),a=.9277-3.6224/(r-2);return function(){for(;;){var n=void 0,l=e.next();if(l<=.86*a)return n=l/a-.43,Math.floor((2*o/(.5-Math.abs(n))+r)*n+t+.445);l>=a?n=e.next()-.5:(n=((n=l/a-.93)<0?-.5:.5)-n,l=e.next()*a);var c=.5-Math.abs(n);if(!(c<.013&&l>c)){var u=Math.floor((2*o/c+r)*n+t+.445);if(l=l*s/(o/(c*c)+r),u>=10){var d=(u+.5)*Math.log(t/u)-t-.9189385332046727+u-(.08333333333333333-(.002777777777777778-1/(1260*u*u))/(u*u))/u;if(Math.log(l*i)<=d)return u}else if(u>=0){var h,f=null!=(h=XX(u))?h:0;if(Math.log(l)<=u*Math.log(t)-t-f)return u}}}}}(t,e)},this.exponential=function(e){return function(e,t){return void 0===t&&(t=1),WX(t).isPositive(),function(){return-Math.log(1-e.next())/t}}(t,e)},this.irwinHall=function(e){return function(e,t){return void 0===t&&(t=1),WX(t).isInt().greaterThanOrEqual(0),function(){for(var n=0,i=0;i<t;++i)n+=e.next();return n}}(t,e)},this.bates=function(e){return function(e,t){void 0===t&&(t=1),WX(t).isInt().isPositive();var n=e.irwinHall(t);return function(){return n()/t}}(t,e)},this.pareto=function(e){return function(e,t){void 0===t&&(t=1),WX(t).greaterThanOrEqual(0);var n=1/t;return function(){return 1/Math.pow(1-e.next(),n)}}(t,e)},e&&e instanceof UX?this.use(e):this.use(new KX),this._cache={}}var t=e.prototype;return t.clone=function(){var t=[].slice.call(arguments);return t.length?new e(VX.apply(void 0,t)):new e(this.rng.clone())},t.use=function(){this._rng=VX.apply(void 0,[].slice.call(arguments))},t.patch=function(){if(this._patch)throw new Error("Math.random already patched");this._patch=Math.random,Math.random=this.uniform()},t.unpatch=function(){this._patch&&(Math.random=this._patch,delete this._patch)},t.choice=function(e){if(!Array.isArray(e))throw new Error("Random.choice expected input to be an array, got "+typeof e);var t=null==e?void 0:e.length;return t>0?e[this.uniformInt(0,t-1)()]:void 0},t._memoize=function(e,t){var n=[].slice.call(arguments,2),i=""+n.join(";"),r=this._cache[e];return(void 0===r||r.key!==i)&&(r={key:i,distribution:t.apply(void 0,[this].concat(n))},this._cache[e]=r),r.distribution},NX(e,[{key:"rng",get:function(){return this._rng}}]),e}();new ZX;const QX=.001;class JX{constructor(){this.pointsTextureSize=0,this.linksTextureSize=0,this.alpha=1,this.transform=function(){var e=new hX(9);return hX!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}(),this.screenSize=[0,0],this.mousePosition=[0,0],this.screenMousePosition=[0,0],this.selectedArea=[[0,0],[0,0]],this.isSimulationRunning=!1,this.simulationProgress=0,this.selectedIndices=null,this.maxPointSize=64,this.hoveredPoint=void 0,this.focusedPoint=void 0,this.draggingPointIndex=void 0,this.hoveredLinkIndex=void 0,this.adjustedSpaceSize=LH.spaceSize,this.isSpaceKeyPressed=!1,this.webglMaxTextureSize=16384,this.hoveredPointRingColor=[1,1,1,.7],this.focusedPointRingColor=[1,1,1,.95],this.hoveredLinkColor=[-1,-1,-1,-1],this.greyoutPointColor=[-1,-1,-1,-1],this.isDarkenGreyout=!1,this.isLinkHoveringEnabled=!1,this.alphaTarget=0,this.scalePointX=oX(),this.scalePointY=oX(),this.random=new ZX,this._backgroundColor=[0,0,0,0],this.alphaDecay=e=>1-Math.pow(QX,1/e)}get backgroundColor(){return this._backgroundColor}get transformationMatrix4x4(){const e=this.transform;if(9!==e.length)throw new Error(`Transform must be a 9-element array (3x3 matrix), got ${e.length} elements`);return[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]}set backgroundColor(e){this._backgroundColor=e;const t=function(e,t,n){return.2126*e+.7152*t+.0722*n}(e[0],e[1],e[2]);document.documentElement.style.setProperty("--cosmosgl-attribution-color",t>.65?"black":"white"),document.documentElement.style.setProperty("--cosmosgl-error-message-color",t>.65?"black":"white"),this.div&&(this.div.style.backgroundColor=`rgba(${255*e[0]}, ${255*e[1]}, ${255*e[2]}, ${e[3]})`),this.isDarkenGreyout=t<.65}addRandomSeed(e){this.random=this.random.clone(e)}getRandomFloat(e,t){return this.random.float(e,t)}adjustSpaceSize(e,t){(e<=0||!isFinite(e))&&(e=LH.spaceSize),e<2&&(e=2),this.adjustedSpaceSize=e>=t?Math.max(t/2,2):e}setWebGLMaxTextureSize(e){this.webglMaxTextureSize=e}updateScreenSize(e,t){const{adjustedSpaceSize:n}=this;this.screenSize=[e,t],this.scalePointX.domain([0,n]).range([(e-n)/2,(e+n)/2]),this.scalePointY.domain([n,0]).range([(t-n)/2,(t+n)/2])}scaleX(e){return this.scalePointX(e)}scaleY(e){return this.scalePointY(e)}setHoveredPointRingColor(e){const t=RW(e);this.hoveredPointRingColor[0]=t[0],this.hoveredPointRingColor[1]=t[1],this.hoveredPointRingColor[2]=t[2]}setFocusedPointRingColor(e){const t=RW(e);this.focusedPointRingColor[0]=t[0],this.focusedPointRingColor[1]=t[1],this.focusedPointRingColor[2]=t[2]}setGreyoutPointColor(e){if(void 0===e)return void(this.greyoutPointColor=[-1,-1,-1,-1]);const t=RW(e);this.greyoutPointColor[0]=t[0],this.greyoutPointColor[1]=t[1],this.greyoutPointColor[2]=t[2],this.greyoutPointColor[3]=t[3]}updateLinkHoveringEnabled(e){this.isLinkHoveringEnabled=!!(e.onLinkClick||e.onLinkMouseOver||e.onLinkMouseOut),this.isLinkHoveringEnabled||(this.hoveredLinkIndex=void 0)}setHoveredLinkColor(e){if(void 0===e)return void(this.hoveredLinkColor=[-1,-1,-1,-1]);const t=RW(e);this.hoveredLinkColor[0]=t[0],this.hoveredLinkColor[1]=t[1],this.hoveredLinkColor[2]=t[2],this.hoveredLinkColor[3]=t[3]}setFocusedPoint(e){this.focusedPoint=void 0!==e?{index:e}:void 0}addAlpha(e){return(this.alphaTarget-this.alpha)*this.alphaDecay(e)}}const eK={passive:!1},tK={capture:!0,passive:!1};function nK(e){e.stopImmediatePropagation()}function iK(e){e.preventDefault(),e.stopImmediatePropagation()}function rK(e){var t=e.document.documentElement,n=yz(e).on("dragstart.drag",iK,tK);"onselectstart"in t?n.on("selectstart.drag",iK,tK):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oK(e,t){var n=e.document.documentElement,i=yz(e).on("dragstart.drag",null);t&&(i.on("click.drag",iK,tK),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sK=e=>()=>e;function aK(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function lK(e){return!e.ctrlKey&&!e.button}function cK(){return this.parentNode}function uK(e,t){return t??{x:e.x,y:e.y}}function dK(){return navigator.maxTouchPoints||"ontouchstart"in this}aK.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const hK=e=>()=>e;function fK(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function pK(e,t,n){this.k=e,this.x=t,this.y=n}pK.prototype={constructor:pK,scale:function(e){return 1===e?this:new pK(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new pK(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var mK=new pK(1,0,0);function gK(e){e.stopImmediatePropagation()}function _K(e){e.preventDefault(),e.stopImmediatePropagation()}function yK(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function vK(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function bK(){return this.__zoom||mK}function xK(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wK(){return navigator.maxTouchPoints||"ontouchstart"in this}function SK(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}pK.prototype;class EK{constructor(e,t){this.eventTransform=mK,this.behavior=function(){var e,t,n,i=yK,r=vK,o=SK,s=xK,a=wK,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=ZU,h=xz("start","zoom","end"),f=0,p=10;function m(e){e.property("__zoom",bK).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new pK(t,e.x,e.y)}function _(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new pK(e.k,i,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function v(e,t,n,i){e.on("start.zoom",function(){b(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(i).end()}).tween("zoom",function(){var e=this,o=arguments,s=b(e,o).event(i),a=r.apply(e,o),l=null==n?y(a):"function"==typeof n?n.apply(e,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,h="function"==typeof t?t.apply(e,o):t,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new pK(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function w(e,...t){if(i.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,a=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,s.apply(this,arguments)))),u=vz(e);if(n.wheel)(n.mouse[0][0]!==u[0]||n.mouse[0][1]!==u[1])&&(n.mouse[1]=r.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[u,r.invert(u)],Xz(this),n.start()}_K(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",o(_(g(r,a),n.mouse[0],n.mouse[1]),n.extent,c))}}function S(e,...t){if(!n&&i.apply(this,arguments)){var r=e.currentTarget,s=b(this,t,!0).event(e),a=yz(e.view).on("mousemove.zoom",function(e){if(_K(e),!s.moved){var t=e.clientX-u,n=e.clientY-d;s.moved=t*t+n*n>f}s.event(e).zoom("mouse",o(_(s.that.__zoom,s.mouse[0]=vz(e,r),s.mouse[1]),s.extent,c))},!0).on("mouseup.zoom",function(e){a.on("mousemove.zoom mouseup.zoom",null),oK(e.view,s.moved),_K(e),s.event(e).end()},!0),l=vz(e,r),u=e.clientX,d=e.clientY;rK(e.view),gK(e),s.mouse=[l,this.__zoom.invert(l)],Xz(this),s.start()}}function E(e,...t){if(i.apply(this,arguments)){var n=this.__zoom,s=vz(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(s),l=n.k*(e.shiftKey?.5:2),d=o(_(g(n,l),s,a),r.apply(this,t),c);_K(e),u>0?yz(this).transition().duration(u).call(v,d,s,e):yz(this).call(m.transform,d,s,e)}}function C(n,...r){if(i.apply(this,arguments)){var o,s,a,l,c=n.touches,u=c.length,d=b(this,r,n.changedTouches.length===u).event(n);for(gK(n),s=0;s<u;++s)l=[l=vz(a=c[s],this),this.__zoom.invert(l),a.identifier],d.touch0?!d.touch1&&d.touch0[2]!==l[2]&&(d.touch1=l,d.taps=0):(d.touch0=l,o=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),Xz(this),d.start())}}function T(e,...t){if(this.__zooming){var n,i,r,s,a=b(this,t).event(e),l=e.changedTouches,u=l.length;for(_K(e),n=0;n<u;++n)r=vz(i=l[n],this),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var d=a.touch0[0],h=a.touch0[1],f=a.touch1[0],p=a.touch1[1],m=(m=f[0]-d[0])*m+(m=f[1]-d[1])*m,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;i=g(i,Math.sqrt(m/y)),r=[(d[0]+f[0])/2,(d[1]+f[1])/2],s=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(_(i,r,s),a.extent,c))}}function k(e,...i){if(this.__zooming){var r,o,s=b(this,i).event(e),a=e.changedTouches,l=a.length;for(gK(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),r=0;r<l;++r)o=a[r],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=vz(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<p)){var c=yz(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,t,n,i){var r=e.selection?e.selection():e;r.property("__zoom",bK),e!==r?v(e,t,n,i):r.interrupt().each(function(){b(this,arguments).event(i).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,i){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,i)},m.scaleTo=function(e,t,n,i){m.transform(e,function(){var e=r.apply(this,arguments),i=this.__zoom,s=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return o(_(g(i,l),s,a),e,c)},n,i)},m.translateBy=function(e,t,n,i){m.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)},null,i)},m.translateTo=function(e,t,n,i,s){m.transform(e,function(){var e=r.apply(this,arguments),s=this.__zoom,a=null==i?y(e):"function"==typeof i?i.apply(this,arguments):i;return o(mK.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},i,s)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=yz(this.that).datum();h.call(e,this.that,new fK(e,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:hK(+e),m):s},m.filter=function(e){return arguments.length?(i="function"==typeof e?e:hK(!!e),m):i},m.touchable=function(e){return arguments.length?(a="function"==typeof e?e:hK(!!e),m):a},m.extent=function(e){return arguments.length?(r="function"==typeof e?e:hK([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):r},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}().scaleExtent([.001,1/0]).on("start",e=>{var t,n;this.isRunning=!0;const i=!!e.sourceEvent;null==(n=null==(t=this.config)?void 0:t.onZoomStart)||n.call(t,e,i)}).on("zoom",e=>{var t,n;this.eventTransform=e.transform;const{eventTransform:{x:i,y:r,k:o},store:{transform:s,screenSize:a}}=this,l=a[0],c=a[1];if(!l||!c)return;(function(e,t,n){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1})(s,l,c),fX(s,s,[i,r]),pX(s,s,[o,o]),fX(s,s,[l/2,c/2]),pX(s,s,[l/2,c/2]),pX(s,s,[1,-1]);const u=!!e.sourceEvent;null==(n=null==(t=this.config)?void 0:t.onZoom)||n.call(t,e,u)}).on("end",e=>{var t,n;this.isRunning=!1;const i=!!e.sourceEvent;null==(n=null==(t=this.config)?void 0:t.onZoomEnd)||n.call(t,e,i)}),this.isRunning=!1,this.store=e,this.config=t}getTransform(e,t,n=.1){if(0===e.length)return this.eventTransform;const{store:{screenSize:i}}=this,r=i[0],o=i[1],s=PY(e.map(e=>e[0])),a=PY(e.map(e=>e[1]));s[0]=this.store.scaleX(s[0]),s[1]=this.store.scaleX(s[1]),a[0]=this.store.scaleY(a[0]),a[1]=this.store.scaleY(a[1]),s[0]===s[1]&&(s[0]-=.5,s[1]+=.5),a[0]===a[1]&&(a[0]+=.5,a[1]-=.5);const l=r*(1-2*n)/(s[1]-s[0]),c=o*(1-2*n)/(a[0]-a[1]),u=function(e,t,n){return Math.min(Math.max(e,t),n)}(t??Math.min(l,c),...this.behavior.scaleExtent()),d=r/2-(s[1]+s[0])/2*u,h=o/2-(a[1]+a[0])/2*u;return mK.translate(d,h).scale(u)}getDistanceToPoint(e){const{x:t,y:n,k:i}=this.eventTransform,r=this.getTransform([e],i),o=t-r.x,s=n-r.y;return Math.sqrt(o*o+s*s)}getMiddlePointTransform(e){const{store:{screenSize:t},eventTransform:{x:n,y:i,k:r}}=this,o=t[0],s=t[1],a=(s/2-i)/r,l=o/2-((o/2-n)/r+this.store.scaleX(e[0]))/2*1,c=s/2-(a+this.store.scaleY(e[1]))/2*1;return mK.translate(l,c).scale(1)}convertScreenToSpacePosition(e){const{eventTransform:{x:t,y:n,k:i},store:{screenSize:r}}=this,o=r[0],s=r[1],a=[(e[0]-t)/i,s-(e[1]-n)/i];return a[0]-=(o-this.store.adjustedSpaceSize)/2,a[1]-=(s-this.store.adjustedSpaceSize)/2,a}convertSpaceToScreenPosition(e){return[this.eventTransform.applyX(this.store.scaleX(e[0])),this.eventTransform.applyY(this.store.scaleY(e[1]))]}convertSpaceToScreenRadius(e){const{config:{scalePointsOnZoom:t},store:{maxPointSize:n},eventTransform:{k:i}}=this;let r=2*e;return r*=t?i:Math.min(5,Math.max(1,.01*i)),Math.min(r,n)/2}}class CK{constructor(e,t){this.isActive=!1,this.behavior=function(){var e,t,n,i,r=lK,o=cK,s=uK,a=dK,l={},c=xz("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",g).on("touchmove.drag",_,eK).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!i&&r.call(this,s,a)){var l=v(this,o.call(this,s,a),s,a,"mouse");l&&(yz(s.view).on("mousemove.drag",p,tK).on("mouseup.drag",m,tK),rK(s.view),nK(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function p(i){if(iK(i),!n){var r=i.clientX-e,o=i.clientY-t;n=r*r+o*o>d}l.mouse("drag",i)}function m(e){yz(e.view).on("mousemove.drag mouseup.drag",null),oK(e.view,n),iK(e),l.mouse("end",e)}function g(e,t){if(r.call(this,e,t)){var n,i,s=e.changedTouches,a=o.call(this,e,t),l=s.length;for(n=0;n<l;++n)(i=v(this,a,e,t,s[n].identifier,s[n]))&&(nK(e),i("start",e,s[n]))}}function _(e){var t,n,i=e.changedTouches,r=i.length;for(t=0;t<r;++t)(n=l[i[t].identifier])&&(iK(e),n("drag",e,i[t]))}function y(e){var t,n,r=e.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),t=0;t<o;++t)(n=l[r[t].identifier])&&(nK(e),n("end",e,r[t]))}function v(e,t,n,i,r,o){var a,d,f,p=c.copy(),m=vz(o||n,t);if(null!=(f=s.call(e,new aK("beforestart",{sourceEvent:n,target:h,identifier:r,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),i)))return a=f.x-m[0]||0,d=f.y-m[1]||0,function n(o,s,c){var g,_=m;switch(o){case"start":l[r]=n,g=u++;break;case"end":delete l[r],--u;case"drag":m=vz(c||s,t),g=u}p.call(o,e,new aK(o,{sourceEvent:s,subject:f,target:h,identifier:r,active:g,x:m[0]+a,y:m[1]+d,dx:m[0]-_[0],dy:m[1]-_[1],dispatch:p}),i)}}return h.filter=function(e){return arguments.length?(r="function"==typeof e?e:sK(!!e),h):r},h.container=function(e){return arguments.length?(o="function"==typeof e?e:sK(e),h):o},h.subject=function(e){return arguments.length?(s="function"==typeof e?e:sK(e),h):s},h.touchable=function(e){return arguments.length?(a="function"==typeof e?e:sK(!!e),h):a},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}().subject(e=>this.store.hoveredPoint&&!this.store.isSpaceKeyPressed?{x:e.x,y:e.y}:void 0).on("start",e=>{var t,n;this.store.hoveredPoint&&(this.store.draggingPointIndex=this.store.hoveredPoint.index,this.isActive=!0,null==(n=null==(t=this.config)?void 0:t.onDragStart)||n.call(t,e))}).on("drag",e=>{var t,n;null==(n=null==(t=this.config)?void 0:t.onDrag)||n.call(t,e)}).on("end",e=>{var t,n;this.isActive=!1,this.store.draggingPointIndex=void 0,null==(n=null==(t=this.config)?void 0:t.onDragEnd)||n.call(t,e)}),this.store=e,this.config=t}}class TK{constructor(e,t,n){if(this.config=new DW,this.graph=new EY(this.config),this.requestAnimationFrameId=0,this.isRightClickMouse=!1,this.store=new JX,this.zoomInstance=new EK(this.store,this.config),this.dragInstance=new CK(this.store,this.config),this._findHoveredItemExecutionCount=0,this._isMouseOnCanvas=!1,this._isFirstRenderAfterInit=!0,this.isPointPositionsUpdateNeeded=!1,this.isPointColorUpdateNeeded=!1,this.isPointSizeUpdateNeeded=!1,this.isPointShapeUpdateNeeded=!1,this.isPointImageIndicesUpdateNeeded=!1,this.isLinksUpdateNeeded=!1,this.isLinkColorUpdateNeeded=!1,this.isLinkWidthUpdateNeeded=!1,this.isLinkArrowUpdateNeeded=!1,this.isPointClusterUpdateNeeded=!1,this.isForceManyBodyUpdateNeeded=!1,this.isForceLinkUpdateNeeded=!1,this.isForceCenterUpdateNeeded=!1,this.isPointImageSizesUpdateNeeded=!1,this._isDestroyed=!1,t&&this.config.init(t),n)this.deviceInitPromise=n;else{const e=document.createElement("canvas");this.deviceInitPromise=this.createDevice(e)}this.deviceInitPromise.then(t=>{if(this._isDestroyed)return t.destroy(),t;this.device=t;const i=this.validateDevice(t);n&&i.setProps({useDevicePixels:this.config.pixelRatio}),this.store.div=e;const r=i.canvas;r.parentNode!==this.store.div&&(r.parentNode&&r.parentNode.removeChild(r),this.store.div.appendChild(r)),this.addAttribution(),r.style.width="100%",r.style.height="100%",this.canvas=r;const o=this.canvas.clientWidth,s=this.canvas.clientHeight;this.store.adjustSpaceSize(this.config.spaceSize,this.device.limits.maxTextureDimension2D),this.store.setWebGLMaxTextureSize(this.device.limits.maxTextureDimension2D),this.store.updateScreenSize(o,s),this.canvasD3Selection=yz(this.canvas),this.canvasD3Selection.on("mouseenter.cosmos",()=>{this._isMouseOnCanvas=!0}).on("mousemove.cosmos",()=>{this._isMouseOnCanvas=!0}).on("mouseleave.cosmos",e=>{this._isMouseOnCanvas=!1,this.currentEvent=e,void 0!==this.store.hoveredPoint&&this.config.onPointMouseOut&&this.config.onPointMouseOut(e),void 0!==this.store.hoveredLinkIndex&&this.config.onLinkMouseOut&&this.config.onLinkMouseOut(e),this.isRightClickMouse=!1,this.store.hoveredPoint=void 0,this.store.hoveredLinkIndex=void 0,this.updateCanvasCursor()}),yz(document).on("keydown.cosmos",e=>{"Space"===e.code&&(this.store.isSpaceKeyPressed=!0)}).on("keyup.cosmos",e=>{"Space"===e.code&&(this.store.isSpaceKeyPressed=!1)}),this.zoomInstance.behavior.on("start.detect",e=>{this.currentEvent=e}).on("zoom.detect",e=>{!!e.sourceEvent&&this.updateMousePosition(e.sourceEvent),this.currentEvent=e}).on("end.detect",e=>{this.currentEvent=e}),this.dragInstance.behavior.on("start.detect",e=>{this.currentEvent=e,this.updateCanvasCursor()}).on("drag.detect",e=>{this.dragInstance.isActive&&this.updateMousePosition(e),this.currentEvent=e}).on("end.detect",e=>{this.currentEvent=e,this.updateCanvasCursor()}),this.canvasD3Selection.call(this.dragInstance.behavior).call(this.zoomInstance.behavior).on("click",this.onClick.bind(this)).on("mousemove",this.onMouseMove.bind(this)).on("contextmenu",this.onRightClickMouse.bind(this)),(!this.config.enableZoom||!this.config.enableDrag)&&this.updateZoomDragBehaviors(),this.setZoomLevel(this.config.initialZoomLevel??1);const a=t.gl.getParameter(fH.ALIASED_POINT_SIZE_RANGE);return this.store.maxPointSize=((null==a?void 0:a[1])??64)/this.config.pixelRatio,this.store.isSimulationRunning=this.config.enableSimulation,this.points=new dX(t,this.config,this.store,this.graph),this.lines=new uX(t,this.config,this.store,this.graph,this.points),this.config.enableSimulation&&(this.forceGravity=new lY(t,this.config,this.store,this.graph,this.points),this.forceCenter=new aY(t,this.config,this.store,this.graph,this.points),this.forceManyBody=new pY(t,this.config,this.store,this.graph,this.points),this.forceLinkIncoming=new fY(t,this.config,this.store,this.graph,this.points),this.forceLinkOutgoing=new fY(t,this.config,this.store,this.graph,this.points),this.forceMouse=new mY(t,this.config,this.store,this.graph,this.points)),this.clusters=new gY(t,this.config,this.store,this.graph,this.points),this.store.backgroundColor=RW(this.config.backgroundColor),this.store.setHoveredPointRingColor(this.config.hoveredPointRingColor??LH.hoveredPointRingColor),this.store.setFocusedPointRingColor(this.config.focusedPointRingColor??LH.focusedPointRingColor),void 0!==this.config.focusedPointIndex&&this.store.setFocusedPoint(this.config.focusedPointIndex),this.store.setGreyoutPointColor(this.config.pointGreyoutColor??IH),this.store.setHoveredLinkColor(this.config.hoveredLinkColor??LH.hoveredLinkColor),this.store.updateLinkHoveringEnabled(this.config),this.config.showFPSMonitor&&(this.fpsMonitor=new SY(this.canvas)),void 0!==this.config.randomSeed&&this.store.addRandomSeed(this.config.randomSeed),t}).catch(e=>{throw e})}get progress(){return this._isDestroyed?0:this.store.simulationProgress}get isSimulationRunning(){return!this._isDestroyed&&this.store.isSimulationRunning}get maxPointSize(){return this._isDestroyed?0:this.store.maxPointSize}setConfig(e){var t,n,i,r,o,s,a,l,c;if(this._isDestroyed||this.ensureDevice(()=>this.setConfig(e)))return;const u={...this.config};if(this.config.init(e),(u.pointDefaultColor!==this.config.pointDefaultColor||u.pointColor!==this.config.pointColor)&&(this.graph.updatePointColor(),null==(t=this.points)||t.updateColor()),(u.pointDefaultSize!==this.config.pointDefaultSize||u.pointSize!==this.config.pointSize)&&(this.graph.updatePointSize(),null==(n=this.points)||n.updateSize()),(u.linkDefaultColor!==this.config.linkDefaultColor||u.linkColor!==this.config.linkColor)&&(this.graph.updateLinkColor(),null==(i=this.lines)||i.updateColor()),(u.linkDefaultWidth!==this.config.linkDefaultWidth||u.linkWidth!==this.config.linkWidth)&&(this.graph.updateLinkWidth(),null==(r=this.lines)||r.updateWidth()),(u.linkDefaultArrows!==this.config.linkDefaultArrows||u.linkArrows!==this.config.linkArrows)&&(this.graph.updateArrows(),null==(o=this.lines)||o.updateArrow()),(u.curvedLinkSegments!==this.config.curvedLinkSegments||u.curvedLinks!==this.config.curvedLinks)&&(null==(s=this.lines)||s.updateCurveLineGeometry()),u.backgroundColor!==this.config.backgroundColor&&(this.store.backgroundColor=RW(this.config.backgroundColor??PH)),u.hoveredPointRingColor!==this.config.hoveredPointRingColor&&this.store.setHoveredPointRingColor(this.config.hoveredPointRingColor??LH.hoveredPointRingColor),u.focusedPointRingColor!==this.config.focusedPointRingColor&&this.store.setFocusedPointRingColor(this.config.focusedPointRingColor??LH.focusedPointRingColor),u.pointGreyoutColor!==this.config.pointGreyoutColor&&this.store.setGreyoutPointColor(this.config.pointGreyoutColor??IH),u.hoveredLinkColor!==this.config.hoveredLinkColor&&this.store.setHoveredLinkColor(this.config.hoveredLinkColor??LH.hoveredLinkColor),u.focusedPointIndex!==this.config.focusedPointIndex&&this.store.setFocusedPoint(this.config.focusedPointIndex),u.pixelRatio!==this.config.pixelRatio&&null!=(a=this.device)&&a.canvasContext){this.device.canvasContext.setProps({useDevicePixels:this.config.pixelRatio});const e=this.device.gl.getParameter(fH.ALIASED_POINT_SIZE_RANGE);this.store.maxPointSize=((null==e?void 0:e[1])??64)/this.config.pixelRatio}u.spaceSize!==this.config.spaceSize&&(this.store.adjustSpaceSize(this.config.spaceSize,(null==(l=this.device)?void 0:l.limits.maxTextureDimension2D)??4096),this.resizeCanvas(!0),this.update(this.store.isSimulationRunning?this.store.alpha:0)),u.showFPSMonitor!==this.config.showFPSMonitor&&(this.config.showFPSMonitor?this.fpsMonitor=new SY(this.canvas):(null==(c=this.fpsMonitor)||c.destroy(),this.fpsMonitor=void 0)),(u.enableZoom!==this.config.enableZoom||u.enableDrag!==this.config.enableDrag)&&this.updateZoomDragBehaviors(),(u.onLinkClick!==this.config.onLinkClick||u.onLinkMouseOver!==this.config.onLinkMouseOver||u.onLinkMouseOut!==this.config.onLinkMouseOut)&&this.store.updateLinkHoveringEnabled(this.config)}setPointPositions(e,t){this._isDestroyed||this.ensureDevice(()=>this.setPointPositions(e,t))||(this.graph.inputPointPositions=e,this.points.shouldSkipRescale=t,this.isPointPositionsUpdateNeeded=!0,this.isLinksUpdateNeeded=!0,this.isPointColorUpdateNeeded=!0,this.isPointSizeUpdateNeeded=!0,this.isPointShapeUpdateNeeded=!0,this.isPointImageIndicesUpdateNeeded=!0,this.isPointImageSizesUpdateNeeded=!0,this.isPointClusterUpdateNeeded=!0,this.isForceManyBodyUpdateNeeded=!0,this.isForceLinkUpdateNeeded=!0,this.isForceCenterUpdateNeeded=!0)}setPointColors(e){this._isDestroyed||this.ensureDevice(()=>this.setPointColors(e))||(this.graph.inputPointColors=e,this.isPointColorUpdateNeeded=!0)}getPointColors(){return this._isDestroyed?new Float32Array:this.graph.pointColors??new Float32Array}setPointSizes(e){this._isDestroyed||this.ensureDevice(()=>this.setPointSizes(e))||(this.graph.inputPointSizes=e,this.isPointSizeUpdateNeeded=!0)}setPointShapes(e){this._isDestroyed||this.ensureDevice(()=>this.setPointShapes(e))||(this.graph.inputPointShapes=e,this.isPointShapeUpdateNeeded=!0)}setImageData(e){var t;this._isDestroyed||this.ensureDevice(()=>this.setImageData(e))||(this.graph.inputImageData=e,null==(t=this.points)||t.createAtlas())}setPointImageIndices(e){this._isDestroyed||this.ensureDevice(()=>this.setPointImageIndices(e))||(this.graph.inputPointImageIndices=e,this.isPointImageIndicesUpdateNeeded=!0)}setPointImageSizes(e){this._isDestroyed||this.ensureDevice(()=>this.setPointImageSizes(e))||(this.graph.inputPointImageSizes=e,this.isPointImageSizesUpdateNeeded=!0)}getPointSizes(){return this._isDestroyed?new Float32Array:this.graph.pointSizes??new Float32Array}setLinks(e){this._isDestroyed||this.ensureDevice(()=>this.setLinks(e))||(this.graph.inputLinks=e,this.isLinksUpdateNeeded=!0,this.isLinkColorUpdateNeeded=!0,this.isLinkWidthUpdateNeeded=!0,this.isLinkArrowUpdateNeeded=!0,this.isForceLinkUpdateNeeded=!0)}setLinkColors(e){this._isDestroyed||this.ensureDevice(()=>this.setLinkColors(e))||(this.graph.inputLinkColors=e,this.isLinkColorUpdateNeeded=!0)}getLinkColors(){return this._isDestroyed?new Float32Array:this.graph.linkColors??new Float32Array}setLinkWidths(e){this._isDestroyed||this.ensureDevice(()=>this.setLinkWidths(e))||(this.graph.inputLinkWidths=e,this.isLinkWidthUpdateNeeded=!0)}getLinkWidths(){return this._isDestroyed?new Float32Array:this.graph.linkWidths??new Float32Array}setLinkArrows(e){this._isDestroyed||this.ensureDevice(()=>this.setLinkArrows(e))||(this.graph.linkArrowsBoolean=e,this.isLinkArrowUpdateNeeded=!0)}setLinkStrength(e){this._isDestroyed||this.ensureDevice(()=>this.setLinkStrength(e))||(this.graph.inputLinkStrength=e,this.isForceLinkUpdateNeeded=!0)}setPointClusters(e){this._isDestroyed||this.ensureDevice(()=>this.setPointClusters(e))||(this.graph.inputPointClusters=e,this.isPointClusterUpdateNeeded=!0)}setClusterPositions(e){this._isDestroyed||this.ensureDevice(()=>this.setClusterPositions(e))||(this.graph.inputClusterPositions=e,this.isPointClusterUpdateNeeded=!0)}setPointClusterStrength(e){this._isDestroyed||this.ensureDevice(()=>this.setPointClusterStrength(e))||(this.graph.inputClusterStrength=e,this.isPointClusterUpdateNeeded=!0)}setPinnedPoints(e){var t;this._isDestroyed||this.ensureDevice(()=>this.setPinnedPoints(e))||(this.graph.inputPinnedPoints=e&&e.length>0?e:void 0,null==(t=this.points)||t.updatePinnedStatus())}render(e){if(this._isDestroyed||this.ensureDevice(()=>this.render(e)))return;this.graph.update();const{fitViewOnInit:t,fitViewDelay:n,fitViewPadding:i,fitViewDuration:r,fitViewByPointsInRect:o,fitViewByPointIndices:s,initialZoomLevel:a}=this.config;if(!this.graph.pointsNumber&&!this.graph.linksNumber)return this.stopFrames(),yz(this.canvas).style("cursor",null),void(this.device&&this.device.beginRenderPass({clearColor:this.store.backgroundColor,clearDepth:1,clearStencil:0}).end());this._isFirstRenderAfterInit&&t&&void 0===a&&(this._fitViewOnInitTimeoutID=window.setTimeout(()=>{s?this.fitViewByPointIndices(s,r,i):o?this.setZoomTransformByPointPositions(o,r,void 0,i):this.fitView(r,i)},n)),this.update(e),this.startFrames(),this._isFirstRenderAfterInit=!1}zoomToPointByIndex(e,t=700,n=3,i=!0){if(this._isDestroyed||this.ensureDevice(()=>this.zoomToPointByIndex(e,t,n,i))||!this.device||!this.points||!this.canvasD3Selection)return;const{store:{screenSize:r}}=this,o=OW(this.device,this.points.currentPositionFbo);if(void 0===e)return;const s=o[4*e+0],a=o[4*e+1];if(void 0===s||void 0===a)return;const l=this.zoomInstance.getDistanceToPoint([s,a]),c=i?n:Math.max(this.getZoomLevel(),n);if(l<Math.min(r[0],r[1]))this.setZoomTransformByPointPositions([s,a],t,c);else{const e=this.zoomInstance.getTransform([[s,a]],c),n=this.zoomInstance.getMiddlePointTransform([s,a]);this.canvasD3Selection.transition().ease(bj).duration(t/2).call(this.zoomInstance.behavior.transform,n).transition().ease(xj).duration(t/2).call(this.zoomInstance.behavior.transform,e)}}zoom(e,t=0){this._isDestroyed||this.setZoomLevel(e,t)}setZoomLevel(e,t=0){this._isDestroyed||this.ensureDevice(()=>this.setZoomLevel(e,t))||this.canvasD3Selection&&(0===t?this.canvasD3Selection.call(this.zoomInstance.behavior.scaleTo,e):this.canvasD3Selection.transition().duration(t).call(this.zoomInstance.behavior.scaleTo,e))}getZoomLevel(){return this._isDestroyed?0:this.zoomInstance.eventTransform.k}getPointPositions(){if(this._isDestroyed||!this.device||!this.points)return[];if(void 0===this.graph.pointsNumber)return[];const e=[],t=OW(this.device,this.points.currentPositionFbo);e.length=2*this.graph.pointsNumber;for(let n=0;n<this.graph.pointsNumber;n+=1){const i=t[4*n+0],r=t[4*n+1];void 0!==i&&void 0!==r&&(e[2*n]=i,e[2*n+1]=r)}return e}getClusterPositions(){if(this._isDestroyed||!this.device||!this.clusters)return[];if(void 0===this.graph.pointClusters||void 0===this.clusters.clusterCount)return[];this.clusters.calculateCentermass();const e=[],t=OW(this.device,this.clusters.centermassFbo);e.length=2*this.clusters.clusterCount;for(let n=0;n<e.length/2;n+=1){const i=t[4*n+0],r=t[4*n+1],o=t[4*n+2];void 0!==i&&void 0!==r&&void 0!==o&&(e[2*n]=i/o,e[2*n+1]=r/o)}return e}fitView(e=250,t=.1){this._isDestroyed||this.ensureDevice(()=>this.fitView(e,t))||this.setZoomTransformByPointPositions(this.getPointPositions(),e,void 0,t)}fitViewByPointIndices(e,t=250,n=.1){if(this._isDestroyed||this.ensureDevice(()=>this.fitViewByPointIndices(e,t,n)))return;const i=this.getPointPositions(),r=new Array(2*e.length);for(const[o,s]of e.entries())r[2*o]=i[2*s],r[2*o+1]=i[2*s+1];this.setZoomTransformByPointPositions(r,t,void 0,n)}fitViewByPointPositions(e,t=250,n=.1){this._isDestroyed||this.ensureDevice(()=>this.fitViewByPointPositions(e,t,n))||this.setZoomTransformByPointPositions(e,t,void 0,n)}getPointsInRect(e){if(this._isDestroyed||!this.device||!this.points)return new Float32Array;const t=this.store.screenSize[1];return this.store.selectedArea=[[e[0][0],t-e[1][1]],[e[1][0],t-e[0][1]]],this.points.findPointsOnAreaSelection(),OW(this.device,this.points.selectedFbo).map((e,t)=>t%4==0&&0!==e?t/4:-1).filter(e=>-1!==e)}getPointsInRange(e){return this.getPointsInRect(e)}getPointsInPolygon(e){if(this._isDestroyed||!this.device||!this.points)return new Float32Array;if(e.length<3)return new Float32Array;const t=this.store.screenSize[1],n=e.map(([e,n])=>[e,t-n]);return this.points.updatePolygonPath(n),this.points.findPointsOnPolygonSelection(),OW(this.device,this.points.selectedFbo).map((e,t)=>t%4==0&&0!==e?t/4:-1).filter(e=>-1!==e)}selectPointsInRect(e){if(!this._isDestroyed&&!this.ensureDevice(()=>this.selectPointsInRect(e))&&this.device&&this.points){if(e){const t=this.store.screenSize[1];this.store.selectedArea=[[e[0][0],t-e[1][1]],[e[1][0],t-e[0][1]]],this.points.findPointsOnAreaSelection();const n=OW(this.device,this.points.selectedFbo);this.store.selectedIndices=n.map((e,t)=>t%4==0&&0!==e?t/4:-1).filter(e=>-1!==e)}else this.store.selectedIndices=null;this.points.updateGreyoutStatus()}}selectPointsInRange(e){return this.selectPointsInRect(e)}selectPointsInPolygon(e){if(!this._isDestroyed&&!this.ensureDevice(()=>this.selectPointsInPolygon(e))&&this.device&&this.points){if(e){if(e.length<3)return;const t=this.store.screenSize[1],n=e.map(([e,n])=>[e,t-n]);this.points.updatePolygonPath(n),this.points.findPointsOnPolygonSelection();const i=OW(this.device,this.points.selectedFbo);this.store.selectedIndices=i.map((e,t)=>t%4==0&&0!==e?t/4:-1).filter(e=>-1!==e)}else this.store.selectedIndices=null;this.points.updateGreyoutStatus()}}selectPointByIndex(e,t=!1){if(!this._isDestroyed&&!this.ensureDevice(()=>this.selectPointByIndex(e,t)))if(t){const t=this.graph.getAdjacentIndices(e)??[];this.selectPointsByIndices([e,...t])}else this.selectPointsByIndices([e])}selectPointsByIndices(e){this._isDestroyed||this.ensureDevice(()=>this.selectPointsByIndices(e))||this.points&&(e?0===e.length?this.store.selectedIndices=new Float32Array:this.store.selectedIndices=new Float32Array(e.filter(e=>void 0!==e)):this.store.selectedIndices=null,this.points.updateGreyoutStatus())}unselectPoints(){this._isDestroyed||this.ensureDevice(()=>this.unselectPoints())||this.points&&(this.store.selectedIndices=null,this.points.updateGreyoutStatus())}getSelectedIndices(){if(this._isDestroyed)return null;const{selectedIndices:e}=this.store;return e?Array.from(e):null}getAdjacentIndices(e){if(!this._isDestroyed)return this.graph.getAdjacentIndices(e)}spaceToScreenPosition(e){return this._isDestroyed?[0,0]:this.zoomInstance.convertSpaceToScreenPosition(e)}screenToSpacePosition(e){return this._isDestroyed?[0,0]:this.zoomInstance.convertScreenToSpacePosition(e)}spaceToScreenRadius(e){return this._isDestroyed?0:this.zoomInstance.convertSpaceToScreenRadius(e)}getPointRadiusByIndex(e){var t;if(!this._isDestroyed)return null==(t=this.graph.pointSizes)?void 0:t[e]}trackPointPositionsByIndices(e){this._isDestroyed||this.ensureDevice(()=>this.trackPointPositionsByIndices(e))||this.points&&this.points.trackPointsByIndices(e)}getTrackedPointPositionsMap(){return this._isDestroyed||!this.points?new Map:this.points.getTrackedPositionsMap()}getTrackedPointPositionsArray(){return this._isDestroyed||!this.points?[]:this.points.getTrackedPositionsArray()}getSampledPointPositionsMap(){return this._isDestroyed||!this.points?new Map:this.points.getSampledPointPositionsMap()}getSampledPoints(){return this._isDestroyed||!this.points?{indices:[],positions:[]}:this.points.getSampledPoints()}getScaleX(){if(!this._isDestroyed&&this.points)return this.points.scaleX}getScaleY(){if(!this._isDestroyed&&this.points)return this.points.scaleY}start(e=1){var t,n;this._isDestroyed||this.ensureDevice(()=>this.start(e))||this.graph.pointsNumber&&(this.store.isSimulationRunning=!0,this.store.simulationProgress=0,this.store.alpha=e,null==(n=(t=this.config).onSimulationStart)||n.call(t))}stop(){var e,t;this._isDestroyed||(this.store.isSimulationRunning=!1,this.store.simulationProgress=0,this.store.alpha=0,null==(t=(e=this.config).onSimulationEnd)||t.call(e))}pause(){var e,t;this._isDestroyed||this.ensureDevice(()=>this.pause())||(this.store.isSimulationRunning=!1,null==(t=(e=this.config).onSimulationPause)||t.call(e))}unpause(){var e,t;this._isDestroyed||this.ensureDevice(()=>this.unpause())||(this.store.isSimulationRunning=!0,null==(t=(e=this.config).onSimulationUnpause)||t.call(e))}restart(){var e,t;this._isDestroyed||this.ensureDevice(()=>this.restart())||(this.store.isSimulationRunning=!0,null==(t=(e=this.config).onSimulationRestart)||t.call(e))}step(){this._isDestroyed||this.ensureDevice(()=>this.step())||this.config.enableSimulation&&this.store.pointsTextureSize&&this.runSimulationStep(!0)}destroy(){var e,t,n,i,r,o,s,a,l,c,u,d,h;this._isDestroyed||(this._isDestroyed=!0,window.clearTimeout(this._fitViewOnInitTimeoutID),this.stopFrames(),this.canvasD3Selection&&this.canvasD3Selection.on("mouseenter.cosmos",null).on("mousemove.cosmos",null).on("mouseleave.cosmos",null).on("click",null).on("mousemove",null).on("contextmenu",null).on(".drag",null).on(".zoom",null),yz(document).on("keydown.cosmos",null).on("keyup.cosmos",null),null!=(e=this.zoomInstance)&&e.behavior&&this.zoomInstance.behavior.on("start.detect",null).on("zoom.detect",null).on("end.detect",null),null!=(t=this.dragInstance)&&t.behavior&&this.dragInstance.behavior.on("start.detect",null).on("drag.detect",null).on("end.detect",null),null==(n=this.fpsMonitor)||n.destroy(),null==(i=this.points)||i.destroy(),null==(r=this.lines)||r.destroy(),null==(o=this.clusters)||o.destroy(),null==(s=this.forceGravity)||s.destroy(),null==(a=this.forceCenter)||a.destroy(),null==(l=this.forceManyBody)||l.destroy(),null==(c=this.forceLinkIncoming)||c.destroy(),null==(u=this.forceLinkOutgoing)||u.destroy(),null==(d=this.forceMouse)||d.destroy(),this.device&&(this.device.beginRenderPass({clearColor:this.store.backgroundColor,clearDepth:1,clearStencil:0}).end(),this.device.destroy()),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.attributionDivElement&&this.attributionDivElement.parentNode&&this.attributionDivElement.parentNode.removeChild(this.attributionDivElement),null==(h=document.getElementById("gl-bench-style"))||h.remove(),this.canvasD3Selection=void 0,this.attributionDivElement=void 0)}create(){var e,t,n,i,r;this._isDestroyed||this.ensureDevice(()=>this.create())||this.points&&this.lines&&(this.isPointPositionsUpdateNeeded&&this.points.updatePositions(),this.isPointColorUpdateNeeded&&this.points.updateColor(),this.isPointSizeUpdateNeeded&&this.points.updateSize(),this.isPointShapeUpdateNeeded&&this.points.updateShape(),this.isPointImageIndicesUpdateNeeded&&this.points.updateImageIndices(),this.isPointImageSizesUpdateNeeded&&this.points.updateImageSizes(),this.isLinksUpdateNeeded&&this.lines.updatePointsBuffer(),this.isLinkColorUpdateNeeded&&this.lines.updateColor(),this.isLinkWidthUpdateNeeded&&this.lines.updateWidth(),this.isLinkArrowUpdateNeeded&&this.lines.updateArrow(),this.isForceManyBodyUpdateNeeded&&(null==(e=this.forceManyBody)||e.create()),this.isForceLinkUpdateNeeded&&(null==(t=this.forceLinkIncoming)||t.create(hY.INCOMING),null==(n=this.forceLinkOutgoing)||n.create(hY.OUTGOING)),this.isForceCenterUpdateNeeded&&(null==(i=this.forceCenter)||i.create()),this.isPointClusterUpdateNeeded&&(null==(r=this.clusters)||r.create()),this.isPointPositionsUpdateNeeded=!1,this.isPointColorUpdateNeeded=!1,this.isPointSizeUpdateNeeded=!1,this.isPointShapeUpdateNeeded=!1,this.isPointImageIndicesUpdateNeeded=!1,this.isPointImageSizesUpdateNeeded=!1,this.isLinksUpdateNeeded=!1,this.isLinkColorUpdateNeeded=!1,this.isLinkWidthUpdateNeeded=!1,this.isLinkArrowUpdateNeeded=!1,this.isPointClusterUpdateNeeded=!1,this.isForceManyBodyUpdateNeeded=!1,this.isForceLinkUpdateNeeded=!1,this.isForceCenterUpdateNeeded=!1)}flatten(e){return e.flat()}pair(e){const t=new Array(e.length/2);for(let n=0;n<e.length/2;n++)t[n]=[e[2*n],e[2*n+1]];return t}ensureDevice(e){return!this.device&&(this.deviceInitPromise.then(()=>{this._isDestroyed||e()}).catch(e=>{}),!0)}validateDevice(e){const t=e.canvasContext;if(null===t||"offscreen-canvas"===t.type)throw new Error("Device must have an HTMLCanvasElement canvas context. OffscreenCanvas and compute-only devices are not supported.");return t}async createDevice(e){return await RV.createDevice({type:"webgl",adapters:[AH],createCanvasContext:{canvas:e,useDevicePixels:this.config.pixelRatio,autoResize:!0,width:void 0,height:void 0}})}update(e=this.store.alpha){const{graph:t}=this;this.store.pointsTextureSize=Math.ceil(Math.sqrt(t.pointsNumber??0)),this.store.linksTextureSize=Math.ceil(Math.sqrt(2*(t.linksNumber??0))),this.create(),this.initPrograms(),this.store.hoveredPoint=void 0,this.store.alpha=e}runSimulationStep(e=!1){var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,_,y,v;const{config:{simulationGravity:b,simulationCenter:x,enableSimulation:w},store:{isSimulationRunning:S}}=this;w&&(this.isRightClickMouse&&this.config.enableRightClickRepulsion&&(null==(t=this.forceMouse)||t.run(),null==(n=this.points)||n.updatePosition()),(e||S&&!(this.zoomInstance.isRunning&&!this.config.enableSimulationDuringZoom))&&(b&&(null==(i=this.forceGravity)||i.run(),null==(r=this.points)||r.updatePosition()),x&&(null==(o=this.forceCenter)||o.run(),null==(s=this.points)||s.updatePosition()),null==(a=this.forceManyBody)||a.run(),null==(l=this.points)||l.updatePosition(),this.store.linksTextureSize&&(null==(c=this.forceLinkIncoming)||c.run(),null==(u=this.points)||u.updatePosition(),null==(d=this.forceLinkOutgoing)||d.run(),null==(h=this.points)||h.updatePosition()),(this.graph.pointClusters||this.graph.clusterPositions)&&(null==(f=this.clusters)||f.run(),null==(p=this.points)||p.updatePosition()),this.store.alpha+=this.store.addAlpha(this.config.simulationDecay??LH.simulation.decay),this.isRightClickMouse&&this.config.enableRightClickRepulsion&&(this.store.alpha=Math.max(this.store.alpha,.1)),this.store.simulationProgress=Math.sqrt(Math.min(1,QX/this.store.alpha)),null==(y=(_=this.config).onSimulationTick)||y.call(_,this.store.alpha,null==(m=this.store.hoveredPoint)?void 0:m.index,null==(g=this.store.hoveredPoint)?void 0:g.position)),null==(v=this.points)||v.trackPoints())}initPrograms(){var e,t,n,i,r,o;this._isDestroyed||!this.points||!this.lines||!this.clusters||(this.points.initPrograms(),this.lines.initPrograms(),null==(e=this.forceGravity)||e.initPrograms(),null==(t=this.forceManyBody)||t.initPrograms(),null==(n=this.forceCenter)||n.initPrograms(),null==(i=this.forceLinkIncoming)||i.initPrograms(),null==(r=this.forceLinkOutgoing)||r.initPrograms(),null==(o=this.forceMouse)||o.initPrograms(),this.clusters.initPrograms())}frame(){if(this._isDestroyed)return;const{store:{alpha:e,isSimulationRunning:t}}=this;e<QX&&t&&this.end(),this.requestAnimationFrameId=window.requestAnimationFrame(e=>{this.renderFrame(e),this._isDestroyed||this.frame()})}renderFrame(e){var t,n,i,r,o,s,a;if(!this._isDestroyed&&this.store.pointsTextureSize){if(null==(t=this.fpsMonitor)||t.begin(),this.resizeCanvas(),this.dragInstance.isActive||this.findHoveredItem(),this.runSimulationStep(!1),this.device){const e=this.store.backgroundColor??[0,0,0,1],t=this.device.beginRenderPass({clearColor:e,clearDepth:1,clearStencil:0}),{config:{renderLinks:a}}=this;!1!==a&&!!this.store.linksTextureSize&&!!this.graph.linksNumber&&this.graph.linksNumber>0&&(null==(n=this.lines)||n.draw(t)),null==(i=this.points)||i.draw(t),this.dragInstance.isActive&&(null==(r=this.points)||r.drag(),null==(o=this.points)||o.drag(),null==(s=this.points)||s.trackPoints()),t.end(),this.device.submit()}null==(a=this.fpsMonitor)||a.end(e??performance.now()),this.currentEvent=void 0}}stopFrames(){this.requestAnimationFrameId&&(window.cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=0)}startFrames(){this._isDestroyed||(this.stopFrames(),this.frame())}end(){var e,t;this.store.isSimulationRunning=!1,this.store.simulationProgress=1,null==(t=(e=this.config).onSimulationEnd)||t.call(e)}onClick(e){var t,n,i,r,o,s,a,l,c,u;null==(r=(i=this.config).onClick)||r.call(i,null==(t=this.store.hoveredPoint)?void 0:t.index,null==(n=this.store.hoveredPoint)?void 0:n.position,e),this.store.hoveredPoint?null==(s=(o=this.config).onPointClick)||s.call(o,this.store.hoveredPoint.index,this.store.hoveredPoint.position,e):void 0!==this.store.hoveredLinkIndex?null==(l=(a=this.config).onLinkClick)||l.call(a,this.store.hoveredLinkIndex,e):null==(u=(c=this.config).onBackgroundClick)||u.call(c,e)}updateMousePosition(e){if(!e)return;const t=e.offsetX??e.x,n=e.offsetY??e.y;void 0===t||void 0===n||(this.store.mousePosition=this.zoomInstance.convertScreenToSpacePosition([t,n]),this.store.screenMousePosition=[t,this.store.screenSize[1]-n])}onMouseMove(e){var t,n,i,r;this.currentEvent=e,this.updateMousePosition(e),this.isRightClickMouse=3===e.which,null==(r=(i=this.config).onMouseMove)||r.call(i,null==(t=this.store.hoveredPoint)?void 0:t.index,null==(n=this.store.hoveredPoint)?void 0:n.position,this.currentEvent)}onRightClickMouse(e){e.preventDefault()}resizeCanvas(e=!1){var t,n,i;if(this._isDestroyed)return;const r=this.canvas.clientWidth,o=this.canvas.clientHeight,[s,a]=this.store.screenSize;if(e||s!==r||a!==o){const{k:e}=this.zoomInstance.eventTransform,l=this.zoomInstance.convertScreenToSpacePosition([s/2,a/2]);this.store.updateScreenSize(r,o),null==(t=this.canvasD3Selection)||t.call(this.zoomInstance.behavior.transform,this.zoomInstance.getTransform([l],e)),null==(n=this.points)||n.updateSampledPointsGrid(),this.store.isLinkHoveringEnabled&&(null==(i=this.lines)||i.updateLinkIndexFbo())}}setZoomTransformByPointPositions(e,t=250,n,i){var r;this.resizeCanvas();const o=this.zoomInstance.getTransform(this.pair(e),n,i);null==(r=this.canvasD3Selection)||r.transition().ease(wj).duration(t).call(this.zoomInstance.behavior.transform,o)}updateZoomDragBehaviors(){var e,t,n,i;this.config.enableDrag?null==(e=this.canvasD3Selection)||e.call(this.dragInstance.behavior):null==(t=this.canvasD3Selection)||t.call(this.dragInstance.behavior).on(".drag",null),this.config.enableZoom?null==(n=this.canvasD3Selection)||n.call(this.zoomInstance.behavior):null==(i=this.canvasD3Selection)||i.call(this.zoomInstance.behavior).on("wheel.zoom",null)}findHoveredItem(){if(!this._isDestroyed&&this._isMouseOnCanvas){if(this._findHoveredItemExecutionCount<4)return void(this._findHoveredItemExecutionCount+=1);if(this._findHoveredItemExecutionCount=0,this.findHoveredPoint(),this.graph.linksNumber&&this.store.isLinkHoveringEnabled)this.findHoveredLine();else if(void 0!==this.store.hoveredLinkIndex){const e=void 0!==this.store.hoveredLinkIndex;this.store.hoveredLinkIndex=void 0,e&&this.config.onLinkMouseOut&&this.config.onLinkMouseOut(this.currentEvent)}this.updateCanvasCursor()}}findHoveredPoint(){var e,t,n,i;if(this._isDestroyed||!this.device||!this.points)return;this.points.findHoveredPoint();let r=!1,o=!1;const s=OW(this.device,this.points.hoveredFbo,0,0,2,2),a=s[0],l=s[1],c=s[2],u=s[3];l>0?((void 0===this.store.hoveredPoint||this.store.hoveredPoint.index!==a)&&(r=!0),this.store.hoveredPoint={index:a,position:[c,u]}):(this.store.hoveredPoint&&(o=!0),this.store.hoveredPoint=void 0),r&&this.store.hoveredPoint&&(null==(t=(e=this.config).onPointMouseOver)||t.call(e,this.store.hoveredPoint.index,this.store.hoveredPoint.position,this.currentEvent)),o&&(null==(i=(n=this.config).onPointMouseOut)||i.call(n,this.currentEvent))}findHoveredLine(){var e,t,n,i,r,o;if(this._isDestroyed||!this.lines)return;if(this.store.hoveredPoint)return void(void 0!==this.store.hoveredLinkIndex&&(this.store.hoveredLinkIndex=void 0,null==(t=(e=this.config).onLinkMouseOut)||t.call(e,this.currentEvent)));this.lines.findHoveredLine();let s=!1,a=!1;if(!this.device)return;const l=OW(this.device,this.lines.hoveredLineIndexFbo)[0];l>=0?(this.store.hoveredLinkIndex!==l&&(s=!0),this.store.hoveredLinkIndex=l):(void 0!==this.store.hoveredLinkIndex&&(a=!0),this.store.hoveredLinkIndex=void 0),s&&void 0!==this.store.hoveredLinkIndex&&(null==(i=(n=this.config).onLinkMouseOver)||i.call(n,this.store.hoveredLinkIndex)),a&&(null==(o=(r=this.config).onLinkMouseOut)||o.call(r,this.currentEvent))}updateCanvasCursor(){const{hoveredPointCursor:e,hoveredLinkCursor:t}=this.config;this.dragInstance.isActive?yz(this.canvas).style("cursor","grabbing"):this.store.hoveredPoint?!this.config.enableDrag||this.store.isSpaceKeyPressed?yz(this.canvas).style("cursor",e):yz(this.canvas).style("cursor","grab"):this.store.isLinkHoveringEnabled&&void 0!==this.store.hoveredLinkIndex?yz(this.canvas).style("cursor",t):yz(this.canvas).style("cursor",null)}addAttribution(){var e;this.config.attribution&&(this.attributionDivElement=document.createElement("div"),this.attributionDivElement.style.cssText="\n      user-select: none;\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      color: var(--cosmosgl-attribution-color);\n      margin: 0 0.6rem 0.6rem 0;\n      font-size: 0.7rem;\n      font-family: inherit;\n    ",this.attributionDivElement.innerHTML=function(e){return IW.sanitize(e,{ALLOWED_TAGS:["a","b","i","em","strong","span","div","p","br"],ALLOWED_ATTR:["href","target","class","id","style"],ALLOW_DATA_ATTR:!1,ALLOWED_TAGS:["a","b","i","em","strong","span","div","p","br","img"],ALLOWED_ATTR:["href","target","class","id","style","src","alt","title"]})}(this.config.attribution),null==(e=this.store.div)||e.appendChild(this.attributionDivElement))}}const kK={};function AK(e,t=!1){let n,i,r=kK;function o(t){var r;n=(null==(r=e(t))?void 0:r.catch(()=>{}).finally(()=>{if(i){const{event:e}=i;i=null,o(e)}else n=null}))||null}function s(e){n?function(e){i={event:e}}(e):o(e)}return t?function(e){r!==e&&requestAnimationFrame(()=>{const e=r;r=kK,s(e)}),r=e}:s}class IK{constructor(e){s(this,"_filterBy"),s(this,"_requestUpdate"),s(this,"_coordinator"),s(this,"_pending"),s(this,"_enabled"),s(this,"_initialized"),s(this,"_request"),this._filterBy=e,this._requestUpdate=AK(()=>this.requestQuery(),!0),this._coordinator=null,this._pending=Promise.resolve(),this._enabled=!0,this._initialized=!1,this._request=null}get coordinator(){return this._coordinator}set coordinator(e){this._coordinator=e}get enabled(){return this._enabled}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,e&&(this._initialized?this._request&&this.requestQuery(!0===this._request?void 0:this._request):this.initialize(),this._request=null))}get pending(){return this._pending}get filterBy(){return this._filterBy}get filterStable(){return!0}async prepare(){}query(e){return null}queryPending(){return this}queryResult(e){return this}queryError(e){return this}requestQuery(e){var t;if(this._enabled){const n=e||this.query(null==(t=this.filterBy)?void 0:t.predicate(this));return this._coordinator.requestQuery(this,n)}return this._request=e??!0,null}requestUpdate(){this._enabled?this._requestUpdate():this.requestQuery()}initialize(){this._enabled?this._coordinator&&(this._initialized=!0,this._pending=this.prepare().then(()=>this.requestQuery())):this._initialized=!1}destroy(){var e;this._enabled=!1,null==(e=this.coordinator)||e.disconnect(this)}update(){return this}}const PK=Uint8Array.of(65,82,82,79,87,49),LK={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3,Tensor:4,SparseTensor:5},RK={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},OK={HALF:0,SINGLE:1,DOUBLE:2},MK={DAY:0,MILLISECOND:1},DK={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},NK={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},FK={Sparse:0,Dense:1},BK={LZ4_FRAME:0,ZSTD:1},zK=Uint8Array,UK=Uint16Array,jK=Uint32Array,VK=BigUint64Array,HK=Int8Array,WK=Int16Array,$K=Int32Array,GK=BigInt64Array,qK=Float32Array,YK=Float64Array;function XK(e,t){const n=Math.log2(e)-3;return(t?[HK,WK,$K,GK]:[zK,UK,jK,VK])[n]}function KK(e,t){let n=0,i=e.length;if(i<=2147483648)do{const r=n+i>>>1;e[r]<=t?n=r+1:i=r}while(n<i);else do{const r=Math.trunc((n+i)/2);e[r]<=t?n=r+1:i=r}while(n<i);return n}function ZK(e,t,n){if(t(e))return e;throw new Error(n(e))}function QK(e,t,n){return t=Array.isArray(t)?t:Object.values(t),ZK(e,e=>t.includes(e),n??(()=>`${e} must be one of ${t}`))}function JK(e,t){for(const[n,i]of Object.entries(e))if(i===t)return n;return"<Unknown>"}const eZ=e=>`Unsupported data type: "${JK(RK,e)}" (id ${e})`,tZ=(e,t,n=!0,i=null)=>({name:e,type:t,nullable:n,metadata:i});function nZ(e){return Object.hasOwn(e,"name")&&iZ(e.type)}function iZ(e){return"number"==typeof(null==e?void 0:e.typeId)}function rZ(e,t="",n=!0){return nZ(e)?e:tZ(t,ZK(e,iZ,()=>"Data type expected."),n)}const oZ=(e=32,t=!0)=>({typeId:RK.Int,bitWidth:QK(e,[8,16,32,64]),signed:t,values:XK(e,t)}),sZ=()=>oZ(32),aZ=new YK(2).buffer;function lZ(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${e}`);return Number(e)}function cZ(e,t){return Number(e/t)+Number(e%t)/Number(t)}new GK(aZ);const uZ=e=>BigInt.asUintN(64,e);function dZ(e,t){return BigInt.asIntN(64,e[t])}function hZ(e,t){const n=t<<1;let i;return BigInt.asIntN(64,e[n+1])<0?(i=uZ(~e[n])|uZ(~e[n+1])<<64n,i=-(i+1n)):i=e[n]|e[n+1]<<64n,i}function fZ(e,t){const n=t<<2;let i;return BigInt.asIntN(64,e[n+3])<0?(i=uZ(~e[n])|uZ(~e[n+1])<<64n|uZ(~e[n+2])<<128n|uZ(~e[n+3])<<192n,i=-(i+1n)):i=e[n]|e[n+1]<<64n|e[n+2]<<128n|e[n+3]<<192n,i}const pZ=new TextDecoder("utf-8");function mZ(e){return pZ.decode(e)}function gZ(e,t){return!!(e[t>>3]&1<<t%8)}function _Z(e,t){const n=t+SZ(e,t),i=n-SZ(e,n),r=wZ(e,i);return(t,o,s=null)=>{if(t<r){const r=wZ(e,i+t);if(r)return o(e,n+r)}return s}}function yZ(e,t){return t}function vZ(e,t){return!!bZ(e,t)}function bZ(e,t){return xZ(e,t)<<24>>24}function xZ(e,t){return e[t]}function wZ(e,t){return function(e,t){return e[t]|e[t+1]<<8}(e,t)<<16>>16}function SZ(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function EZ(e,t){return SZ(e,t)>>>0}function CZ(e,t){return lZ(BigInt.asIntN(64,BigInt(EZ(e,t))+(BigInt(EZ(e,t+4))<<32n)))}function TZ(e,t){let n=t+SZ(e,t);const i=SZ(e,n);return n+=4,mZ(e.subarray(n,n+i))}function kZ(e,t,n,i){if(!t)return[];const r=t+SZ(e,t);return Array.from({length:SZ(e,r)},(t,o)=>i(e,r+4+o*n))}new TextEncoder;const AZ=Symbol("rowIndex");function IZ(e,t){class n{constructor(e){this[AZ]=e}toJSON(){return LZ(e,t,this[AZ])}}const i=n.prototype;for(let r=0;r<e.length;++r){if(Object.hasOwn(i,e[r]))continue;const n=t[r];Object.defineProperty(i,e[r],{get(){return n.at(this[AZ])},enumerable:!0})}return e=>new n(e)}function PZ(e,t){return n=>LZ(e,t,n)}function LZ(e,t,n){const i={};for(let r=0;r<e.length;++r)i[e[r]]=t[r].at(n);return i}class RZ{constructor({length:e,nullCount:t,type:n,validity:i,values:r,offsets:o,sizes:s,children:a}){this.length=e,this.nullCount=t,this.type=n,this.validity=i,this.values=r,this.offsets=o,this.sizes=s,this.children=a,t&&this.validity||(this.at=e=>this.value(e))}get[Symbol.toStringTag](){return"Batch"}at(e){return this.isValid(e)?this.value(e):null}isValid(e){return gZ(this.validity,e)}value(e){return this.values[e]}slice(e,t){const n=t-e,i=Array(n);for(let r=0;r<n;++r)i[r]=this.at(e+r);return i}*[Symbol.iterator](){for(let e=0;e<this.length;++e)yield this.at(e)}}s(RZ,"ArrayType",null);class OZ extends RZ{constructor(e){super(e);const{length:t,values:n}=this;this.values=n.subarray(0,t)}slice(e,t){return this.nullCount?super.slice(e,t):this.values.subarray(e,t)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}}class MZ extends RZ{}s(MZ,"ArrayType",YK);class DZ extends RZ{}s(DZ,"ArrayType",Array);class NZ extends DZ{value(e){return null}}class FZ extends MZ{value(e){return lZ(this.values[e])}}class BZ extends MZ{value(e){const t=this.values[e],n=(31744&t)>>10,i=(1023&t)/1024,r=(-1)**((32768&t)>>15);switch(n){case 31:return r*(i?Number.NaN:1/0);case 0:return r*(i?6103515625e-14*i:0)}return r*2**(n-15)*(1+i)}}class zZ extends DZ{value(e){return gZ(this.values,e)}}class UZ extends MZ{constructor(e){super(e);const{scale:t}=this.type;this.scale=10**t}value(e){return this.values[e]/this.scale}}class jZ extends RZ{constructor(e){super(e);const{bitWidth:t,scale:n}=this.type;this.decimal=64===t?dZ:128===t?hZ:fZ,this.scale=10n**BigInt(n)}}class VZ extends jZ{value(e){return cZ(this.decimal(this.values,e),this.scale)}}s(VZ,"ArrayType",YK);class HZ extends jZ{value(e){return this.decimal(this.values,e)}}s(HZ,"ArrayType",Array);class WZ extends DZ{constructor(e){super(e),this.source=e}value(e){return new Date(this.source.value(e))}}class $Z extends MZ{value(e){return 864e5*this.values[e]}}const GZ=FZ;class qZ extends FZ{value(e){return 1e3*super.value(e)}}const YZ=FZ;class XZ extends FZ{value(e){return cZ(this.values[e],1000n)}}class KZ extends FZ{value(e){return cZ(this.values[e],1000000n)}}class ZZ extends DZ{value(e){return this.values.subarray(e<<1,e+1<<1)}}class QZ extends DZ{value(e){const t=this.values,n=e<<4;return Float64Array.of(SZ(t,n),SZ(t,n+4),CZ(t,n+8))}}const JZ=({values:e,offsets:t},n)=>e.subarray(t[n],t[n+1]),eQ=({values:e,offsets:t},n)=>e.subarray(lZ(t[n]),lZ(t[n+1]));class tQ extends DZ{value(e){return JZ(this,e)}}class nQ extends DZ{value(e){return eQ(this,e)}}class iQ extends DZ{value(e){return mZ(JZ(this,e))}}class rQ extends DZ{value(e){return mZ(eQ(this,e))}}class oQ extends DZ{value(e){const t=this.offsets;return this.children[0].slice(t[e],t[e+1])}}class sQ extends DZ{value(e){const t=this.offsets;return this.children[0].slice(lZ(t[e]),lZ(t[e+1]))}}class aQ extends DZ{value(e){const t=this.offsets[e],n=t+this.sizes[e];return this.children[0].slice(t,n)}}class lQ extends DZ{value(e){const t=this.offsets[e],n=t+this.sizes[e];return this.children[0].slice(lZ(t),lZ(n))}}class cQ extends DZ{constructor(e){super(e),this.stride=this.type.stride}}class uQ extends cQ{value(e){const{stride:t,values:n}=this;return n.subarray(e*t,(e+1)*t)}}class dQ extends cQ{value(e){const{children:t,stride:n}=this;return t[0].slice(e*n,(e+1)*n)}}function hQ({children:e,offsets:t},n){const[i,r]=e[0].children,o=t[n],s=t[n+1],a=[];for(let l=o;l<s;++l)a.push([i.at(l),r.at(l)]);return a}class fQ extends DZ{value(e){return hQ(this,e)}}class pQ extends DZ{value(e){return new Map(hQ(this,e))}}class mQ extends DZ{constructor({typeIds:e,...t}){super(t),this.typeIds=e,this.typeMap=this.type.typeMap}value(e,t=e){const{typeIds:n,children:i,typeMap:r}=this;return i[r[n[e]]].at(t)}}class gQ extends mQ{value(e){return super.value(e,this.offsets[e])}}class _Q extends DZ{constructor(e,t=PZ){super(e),this.names=this.type.children.map(e=>e.name),this.factory=t(this.names,this.children)}value(e){return this.factory(e)}}class yQ extends _Q{constructor(e){super(e,IZ)}}class vQ extends DZ{value(e){const[{values:t},n]=this.children;return n.at(KK(t,e))}}let bQ=class extends DZ{setDictionary(e){return this.dictionary=e,this.cache=e.cache(),this}value(e){return this.cache[this.key(e)]}key(e){return this.values[e]}};class xQ extends DZ{constructor({data:e,...t}){super(t),this.data=e}view(e){const{values:t,data:n}=this,i=e<<4;let r=i+4,o=t;const s=SZ(o,i);return s>12&&(r=SZ(o,i+12),o=n[SZ(o,i+8)]),o.subarray(r,r+s)}}class wQ extends xQ{value(e){return this.view(e)}}class SQ extends xQ{value(e){return mZ(this.view(e))}}function EQ(e){let t=[];return{add(e){return t.push(e),this},clear:()=>t=[],done:()=>new CQ(t,e)}}class CQ{constructor(e,t=(t=>null==(t=e[0])?void 0:t.type)()){this.type=t,this.length=e.reduce((e,t)=>e+t.length,0),this.nullCount=e.reduce((e,t)=>e+t.nullCount,0),this.data=e;const n=e.length,i=new Int32Array(n+1);if(1===n){const[t]=e;i[1]=t.length,this.at=e=>t.at(e)}else for(let r=0,o=0;r<n;++r)i[r+1]=o+=e[r].length;this.offsets=i}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){const e=this.data;return 1===e.length?e[0][Symbol.iterator]():function*(e){for(let t=0;t<e.length;++t){const n=e[t][Symbol.iterator]();for(let e=n.next();!e.done;e=n.next())yield e.value}}(e)}at(e){var t;const{data:n,offsets:i}=this,r=KK(i,e)-1;return null==(t=n[r])?void 0:t.at(e-i[r])}get(e){return this.at(e)}toArray(){const{length:e,nullCount:t,data:n}=this,i=!t&&n[0]instanceof OZ,r=n.length;if(i&&1===r)return n[0].values;const o=new(!r||t>0?Array:n[0].constructor.ArrayType??n[0].values.constructor)(e);return i?function(e,t){for(let n=0,i=0;n<t.length;++n){const{values:r}=t[n];e.set(r,i),i+=r.length}return e}(o,n):function(e,t){let n=-1;for(let i=0;i<t.length;++i){const r=t[i];for(let t=0;t<r.length;++t)e[++n]=r.at(t)}return e}(o,n)}cache(){return this._cache??(this._cache=this.toArray())}}let TQ=class e{constructor(e,t,n=!1){const i=e.fields.map(e=>e.name);this.schema=e,this.names=i,this.children=t,this.factory=n?IZ:PZ;const r=[];this.getFactory=e=>r[e]??(r[e]=this.factory(i,t.map(t=>t.data[e])))}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){var e;return(null==(e=this.children[0])?void 0:e.length)??0}getChildAt(e){return this.children[e]}getChild(e){const t=this.names.findIndex(t=>t===e);return t>-1?this.children[t]:void 0}selectAt(t,n=[]){const{children:i,factory:r,schema:o}=this,{fields:s}=o;return new e({...o,fields:t.map((e,t)=>{return i=s[e],null!=(r=n[t])&&r!==i.name?{...i,name:r}:i;var i,r})},t.map(e=>i[e]),r===IZ)}select(e,t){const n=this.names,i=e.map(e=>n.indexOf(e));return this.selectAt(i,t)}toColumns(){const{children:e,names:t}=this,n={};return t.forEach((t,i)=>{var r;return n[t]=(null==(r=e[i])?void 0:r.toArray())??[]}),n}toArray(){var e;const{children:t,getFactory:n,numRows:i}=this,r=(null==(e=t[0])?void 0:e.data)??[],o=Array(i);for(let s=0,a=-1;s<r.length;++s){const e=n(s);for(let t=0;t<r[s].length;++t)o[++a]=e(t)}return o}*[Symbol.iterator](){var e;const{children:t,getFactory:n}=this,i=(null==(e=t[0])?void 0:e.data)??[];for(let r=0;r<i.length;++r){const e=n(r);for(let t=0;t<i[r].length;++t)yield e(t)}}at(e){const{children:t,getFactory:n,numRows:i}=this;if(e<0||e>=i)return null;const[{offsets:r}]=t,o=KK(r,e)-1;return n(o)(e-r[o])}get(e){return this.at(e)}};function kQ(e,t){return t?class extends t{constructor(t){super(new e(t))}}:e}const AQ=new Map;function IQ(e,t){return{offset:CZ(e,t),metadataLength:SZ(e,t+8),bodyLength:CZ(e,t+16)}}function PQ(e,t){return kZ(e,t,24,IQ)}function LQ(e,t){const n=_Z(e,t);return{codec:n(4,bZ,BK.LZ4_FRAME),method:n(6,bZ,0)}}function RQ(e,t,n){const i=_Z(e,t),r=n<3?8:0;return{length:i(4,CZ,0),nodes:kZ(e,i(6,yZ),16,(e,t)=>({length:CZ(e,t),nullCount:CZ(e,t+8)})),regions:kZ(e,i(8,yZ),16+r,(e,t)=>({offset:CZ(e,t+r),length:CZ(e,t+r+8)})),compression:i(10,LQ),variadic:kZ(e,i(12,yZ),8,CZ)}}function OQ(e,t,n){const i=_Z(e,t);return{id:i(4,CZ,0),data:i(6,(e,t)=>RQ(e,t,n)),isDelta:i(8,vZ,!1)}}function MQ(e,t,n,i){QK(n,RK,eZ);const r=_Z(e,t);switch(n){case RK.Binary:return{typeId:RK.Binary,offsets:$K};case RK.Utf8:return{typeId:RK.Utf8,offsets:$K};case RK.LargeBinary:return{typeId:RK.LargeBinary,offsets:GK};case RK.LargeUtf8:return{typeId:RK.LargeUtf8,offsets:GK};case RK.List:return c=i[0],{typeId:RK.List,children:[rZ(c)],offsets:$K};case RK.ListView:return(e=>({typeId:RK.ListView,children:[rZ(e,"value")],offsets:$K}))(i[0]);case RK.LargeList:return(e=>({typeId:RK.LargeList,children:[rZ(e)],offsets:GK}))(i[0]);case RK.LargeListView:return(e=>({typeId:RK.LargeListView,children:[rZ(e,"value")],offsets:GK}))(i[0]);case RK.Struct:return(e=>({typeId:RK.Struct,children:Array.isArray(e)&&e.length>0&&nZ(e[0])?e:Object.entries(e).map(([e,t])=>tZ(e,t))}))(i);case RK.RunEndEncoded:return a=i[0],l=i[1],{typeId:RK.RunEndEncoded,children:[ZK(rZ(a,"run_ends"),e=>e.type.typeId===RK.Int,()=>"Run-ends must have an integer type."),rZ(l,"values")]};case RK.Int:return oZ(r(4,SZ,0),r(6,vZ,!1));case RK.Float:return((e=2)=>({typeId:RK.Float,precision:QK(e,OK),values:[UK,qK,YK][e]}))(r(4,wZ,OK.HALF));case RK.Decimal:return((e,t,n=128)=>({typeId:RK.Decimal,precision:e,scale:t,bitWidth:QK(n,[32,64,128,256]),values:32===n?$K:VK}))(r(4,SZ,0),r(6,SZ,0),r(8,SZ,128));case RK.Date:return s=r(4,wZ,MK.MILLISECOND),{typeId:RK.Date,unit:QK(s,MK),values:s===MK.DAY?$K:GK};case RK.Time:return((e=DK.MILLISECOND)=>{const t=(e=QK(e,DK))===DK.SECOND||e===DK.MILLISECOND?32:64;return{typeId:RK.Time,unit:e,bitWidth:t,values:32===t?$K:GK}})(r(4,wZ,DK.MILLISECOND));case RK.Timestamp:return((e=DK.MILLISECOND,t=null)=>({typeId:RK.Timestamp,unit:QK(e,DK),timezone:t,values:GK}))(r(4,wZ,DK.SECOND),r(6,TZ));case RK.Interval:return((e=NK.MONTH_DAY_NANO)=>({typeId:RK.Interval,unit:QK(e,NK),values:e===NK.MONTH_DAY_NANO?void 0:$K}))(r(4,wZ,NK.YEAR_MONTH));case RK.Duration:return((e=DK.MILLISECOND)=>({typeId:RK.Duration,unit:QK(e,DK),values:GK}))(r(4,wZ,DK.MILLISECOND));case RK.FixedSizeBinary:return o=r(4,SZ,0),{typeId:RK.FixedSizeBinary,stride:o};case RK.FixedSizeList:return((e,t)=>({typeId:RK.FixedSizeList,stride:t,children:[rZ(e)]}))(i[0],r(4,SZ,0));case RK.Map:return((e,t)=>({typeId:RK.Map,keysSorted:e,children:[t],offsets:$K}))(r(4,vZ,!1),i[0]);case RK.Union:return((e,t,n)=>(n??(n=t.map((e,t)=>t)),{typeId:RK.Union,mode:QK(e,FK),typeIds:n,typeMap:n.reduce((e,t,n)=>(e[t]=n,e),{}),children:t.map((e,t)=>rZ(e,`_${t}`)),typeIdForValue:void 0,offsets:$K}))(r(4,wZ,FK.Sparse),i,kZ(e,r(6,yZ),4,SZ))}var o,s,a,l,c;return{typeId:n}}function DQ(e,t){const n=kZ(e,t,4,(e,t)=>{const n=_Z(e,t);return[n(4,TZ),n(6,TZ)]});return n.length?new Map(n):null}function NQ(e,t,n){const i=_Z(e,t);return{version:n,endianness:i(4,wZ,0),fields:i(6,FQ,[]),metadata:i(8,DQ)}}function FQ(e,t){return kZ(e,t,4,BQ)}function BQ(e,t){const n=_Z(e,t),i=n(8,xZ,RK.NONE),r=n(10,yZ,0),o=n(12,UQ);let s=MQ(e,r,i,n(14,zQ,[]));return o&&(o.dictionary=s,s=o),{name:n(4,TZ),type:s,nullable:n(6,vZ,!1),metadata:n(16,DQ)}}function zQ(e,t){return kZ(e,t,4,BQ)}function UQ(e,t){if(!t)return null;const n=_Z(e,t);return((e,t,n=!1,i=-1)=>({typeId:RK.Dictionary,id:i,dictionary:e,indices:t||sZ(),ordered:n}))(null,n(6,jQ,sZ()),n(8,vZ,!1),n(4,CZ,0))}function jQ(e,t){return MQ(e,t,RK.Int)}function VQ(e,t){let n=SZ(e,t)||0;if(t+=4,-1===n&&(n=SZ(e,t)||0,t+=4),0===n)return null;const i=e.subarray(t,t+=n);if(i.byteLength<n)throw new Error(`Expected to read ${n} metadata bytes, but only read ${i.byteLength}.`);const r=_Z(i,0),o=r(4,wZ,0),s=r(6,xZ,LK.NONE),a=r(8,yZ,0),l=r(10,CZ,0);let c;if(a){const n=s===LK.Schema?NQ:s===LK.DictionaryBatch?OQ:s===LK.RecordBatch?RQ:null;if(!n)throw new Error((e=>`Unsupported message type: ${e} (${JK(LK,e)})`)(s));if(c=n(i,a,o),l>0){const n=e.subarray(t,t+=l);if(n.byteLength<l)throw new Error(((e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`)(l,n.byteLength));c.body=n}else s!==LK.Schema&&(c.body=new Uint8Array(0))}return{version:o,type:s,index:t,content:c}}function HQ(e,t){return function(e,t={}){const{schema:n={fields:[]},dictionaries:i,records:r}=e,{version:o,fields:s}=n,a=new Map,l=function(e,t,n){const i={version:t,options:e,dictionary:e=>n.get(e)};return e=>{const{length:t,nodes:n,regions:r,compression:o,variadic:s,body:a}=e;let l=-1,c=-1,u=-1;return{...i,length:t,node:()=>n[++l],buffer:e=>{const{bytes:t,length:n,offset:i}=function(e,t,n){if(n){if(0!==n.method)throw new Error(`Unknown compression method (${n.method})`);{const r=n.codec,o=null!=(i=r)&&AQ.get(i)||null;if(!o)throw new Error(function(e){return`Missing compression codec "${JK(BK,e)}" (id ${e})`}(r));return function(e,{offset:t,length:n},i){if(0===n)return{bytes:new Uint8Array(0),offset:0,length:0};const r=CZ(e,t),o=e.subarray(t+8,t+n),s=-1===r?o:i.decode(o);return{bytes:s,offset:0,length:s.length}}(e,t,o)}}return{bytes:e,...t};var i}(a,r[++c],o);return e?new e(t.buffer,t.byteOffset+i,n/e.BYTES_PER_ELEMENT):t.subarray(i,i+n)},variadic:()=>s[++u],visit(e){return e.map(e=>WQ(e.type,this))}}}}(t,o,a),c=new Map;!function(e){e.fields.forEach(function e(t){var n,i,r;(e=>{const t=e.type;t.typeId===RK.Dictionary&&c.set(t.id,t.dictionary)})(t),null==(i=null==(n=t.type.dictionary)?void 0:n.children)||i.forEach(e),null==(r=t.type.children)||r.forEach(e)})}(n);const u=new Map;for(const h of i){const{id:e,data:t,isDelta:n,body:i}=h,r=c.get(e),o=WQ(r,l({...t,body:i}));if(u.has(e)){const t=u.get(e);n||t.clear(),t.add(o)}else{if(n)throw new Error("Delta update can not be first dictionary batch.");u.set(e,EQ(r).add(o))}}u.forEach((e,t)=>a.set(t,e.done()));const d=s.map(e=>EQ(e.type));for(const h of r){const e=l(h);s.forEach((t,n)=>d[n].add(WQ(t.type,e)))}return new TQ(n,d.map(e=>e.done()),t.useProxy)}(function(e){const t=function(e){return e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}(e)?new Uint8Array(e):e;return t instanceof Uint8Array&&function(e){if(!e||e.length<4)return!1;for(let t=0;t<6;++t)if(PK[t]!==e[t])return!1;return!0}(t)?function(e){const t=e.byteLength-(PK.length+4),n=SZ(e,t),i=_Z(e,t-n),r=i(4,wZ,0),o=i(8,PQ,[]),s=i(10,PQ,[]);return{schema:i(6,(e,t)=>NQ(e,t,r)),dictionaries:o.map(({offset:t})=>VQ(e,t).content),records:s.map(({offset:t})=>VQ(e,t).content),metadata:i(12,DQ)}}(t):function(e){const t=[e].flat();let n;const i=[],r=[];for(const o of t){if(!(o instanceof Uint8Array))throw new Error("IPC data batch was not a Uint8Array.");let e=0;for(;;){const t=VQ(o,e);if(null===t)break;if(e=t.index,t.content)switch(t.type){case LK.Schema:n||(n=t.content);break;case LK.RecordBatch:i.push(t.content);break;case LK.DictionaryBatch:r.push(t.content)}}}return{schema:n,dictionaries:r,records:i,metadata:null}}(t)}(e),t)}function WQ(e,t){const{typeId:n}=e,{options:i,node:r,buffer:o,variadic:s,version:a}=t,l=function(e,t={}){const{typeId:n,bitWidth:i,mode:r,precision:o,unit:s}=e,{useBigInt:a,useDate:l,useDecimalInt:c,useMap:u,useProxy:d}=t;switch(n){case RK.Null:return NZ;case RK.Bool:return zZ;case RK.Int:case RK.Time:case RK.Duration:return a||i<64?OZ:FZ;case RK.Float:return o?OZ:BZ;case RK.Date:return kQ(s===MK.DAY?$Z:GZ,l&&WZ);case RK.Timestamp:return kQ(s===DK.SECOND?qZ:s===DK.MILLISECOND?YZ:s===DK.MICROSECOND?XZ:KZ,l&&WZ);case RK.Decimal:return 32===i?c?OZ:UZ:c?HZ:VZ;case RK.Interval:return s===NK.DAY_TIME?ZZ:s===NK.YEAR_MONTH?OZ:QZ;case RK.FixedSizeBinary:return uQ;case RK.Utf8:return iQ;case RK.LargeUtf8:return rQ;case RK.Binary:return tQ;case RK.LargeBinary:return nQ;case RK.BinaryView:return wQ;case RK.Utf8View:return SQ;case RK.List:return oQ;case RK.LargeList:return sQ;case RK.Map:return u?pQ:fQ;case RK.ListView:return aQ;case RK.LargeListView:return lQ;case RK.FixedSizeList:return dQ;case RK.Struct:return d?yQ:_Q;case RK.RunEndEncoded:return vQ;case RK.Dictionary:return bQ;case RK.Union:return r?gQ:mQ}throw new Error(eZ(n))}(e,i),c={...r(),type:e};if(n===RK.Null)return new l({...c,nullCount:c.length});switch(n){case RK.Bool:case RK.Int:case RK.Time:case RK.Duration:case RK.Float:case RK.Decimal:case RK.Date:case RK.Timestamp:case RK.Interval:case RK.FixedSizeBinary:return new l({...c,validity:o(),values:o(e.values)});case RK.Utf8:case RK.LargeUtf8:case RK.Binary:case RK.LargeBinary:return new l({...c,validity:o(),offsets:o(e.offsets),values:o()});case RK.BinaryView:case RK.Utf8View:return new l({...c,validity:o(),values:o(),data:Array.from({length:s()},()=>o())});case RK.List:case RK.LargeList:case RK.Map:return new l({...c,validity:o(),offsets:o(e.offsets),children:t.visit(e.children)});case RK.ListView:case RK.LargeListView:return new l({...c,validity:o(),offsets:o(e.offsets),sizes:o(e.offsets),children:t.visit(e.children)});case RK.FixedSizeList:case RK.Struct:return new l({...c,validity:o(),children:t.visit(e.children)});case RK.RunEndEncoded:return new l({...c,children:t.visit(e.children)});case RK.Dictionary:{const{id:n,indices:i}=e;return new l({...c,validity:o(),values:o(i.values)}).setDictionary(t.dictionary(n))}case RK.Union:return a<4&&o(),new l({...c,typeIds:o(HK),offsets:e.mode===FK.Sparse?null:o(e.offsets),children:t.visit(e.children)});default:throw new Error(eZ(n))}}function $Q(e,t={useDate:!0}){return HQ(e,t)}new Uint16Array(new Uint8Array([1,0]).buffer)[0];class GQ{constructor({uri:e="ws://localhost:3000/",ipc:t}={}){s(this,"_uri"),s(this,"_queue"),s(this,"_connected"),s(this,"_request"),s(this,"_ws"),s(this,"_events"),this._uri=e,this._queue=[],this._connected=!1,this._request=null,this._ws=null;const n=this;this._events={open(){n._connected=!0,n.next()},close(){for(n._connected=!1,n._request=null,n._ws=null;n._queue.length;)n._queue.shift().reject("Socket closed")},error(e){if(n._request){const{reject:t}=n._request;n._request=null,n.next(),t(e)}},message(e){const{data:i}=e;if(n._request){const{query:e,resolve:r,reject:o}=n._request;if(n._request=null,n.next(),"string"==typeof i){const e=JSON.parse(i);e.error?o(e.error):r(e)}else if("exec"===e.type)r();else{if("arrow"!==e.type)throw new Error(`Unexpected socket data: ${i}`);r($Q(i,t))}}}}}get connected(){return this._connected}init(){this._ws=new WebSocket(this._uri),this._ws.binaryType="arraybuffer";for(const e in this._events)this._ws.addEventListener(e,this._events[e])}enqueue(e,t,n){null==this._ws&&this.init(),this._queue.push({query:e,resolve:t,reject:n}),this._connected&&!this._request&&this.next()}next(){this._queue.length&&(this._request=this._queue.shift(),this._ws.send(JSON.stringify(this._request.query)))}query(e){return new Promise((t,n)=>this.enqueue(e,t,n))}}function qQ(e){return e instanceof XQ}let YQ;class XQ{constructor(e){s(this,"type"),this.type=e}clone(){const e=new this.constructor(this.type);for(const t in this)"type"!==t&&(e[t]=this[t]);return e}toString(e=YQ){if(!e)throw new Error("No visitor provided and no default visitor set.");return e.toString(this)}}class KQ extends XQ{}function ZQ(e){return e.split(".")}function QQ(e){return`"${e.replaceAll('"','""')}"`}function JQ(e){return e&&function(e){return'"'===e[0]&&'"'===e[e.length-1]}(e)?e.slice(1,-1):e}const eJ="COLUMN_REF",tJ="COLUMN_PARAM",nJ="TABLE_REF",iJ="LITERAL",rJ="UNNEST",oJ="ORDER_BY",sJ="CAST",aJ="CASE",lJ="WHEN",cJ="COLLATE",uJ="UNARY",dJ="UNARY_POSTFIX",hJ="BINARY",fJ="BETWEEN",pJ="NOT_BETWEEN",mJ="LOGICAL_OPERATOR",gJ="IN",_J="FUNCTION",yJ="AGGREGATE",vJ="WINDOW",bJ="WINDOW_FUNCTION",xJ="WINDOW_DEF",wJ="WINDOW_FRAME",SJ="WINDOW_EXTENT_EXPR",EJ="EXPRESSION",CJ="FRAGMENT",TJ="VERBATIM",kJ="PARAM",AJ="WITH_CLAUSE",IJ="WINDOW_CLAUSE",PJ="SELECT_CLAUSE",LJ="FROM_CLAUSE",RJ="JOIN_CLAUSE",OJ="SAMPLE_CLAUSE",MJ="SELECT_QUERY",DJ="DESCRIBE_QUERY",NJ="SET_OPERATION",FJ="SCALAR_SUBQUERY";class BJ extends KQ{constructor(e){super(iJ),s(this,"value"),this.value=e}}function zJ(e){switch(typeof e){case"number":return Number.isFinite(e)?`${e}`:"NULL";case"string":return`'${e.replaceAll("'","''")}'`;case"boolean":return e?"TRUE":"FALSE";default:if(null==e)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),i=e.getUTCMonth(),r=e.getUTCDate();return t===Date.UTC(n,i,r)?`DATE '${n}-${i+1}-${r}'`:`epoch_ms(${t})`}return e instanceof RegExp?`'${e.source}'`:`${e}`}}class UJ{toString(e){if(!e)throw new Error("Node is null or undefined");if("string"!=typeof e.type)throw new Error(`Node type is not a string: ${typeof e.type}, value: ${e.type}`);if("CUSTOM"===e.type)return e.toString(this);const t=this.getVisitMethod(e.type);if("function"==typeof t)return t.call(this,e);throw new Error(`No visitor method for node type: '${e.type}'`)}getVisitMethod(e){switch(e){case yJ:return this.visitAggregate;case fJ:return this.visitBetween;case hJ:return this.visitBinary;case aJ:return this.visitCase;case sJ:return this.visitCast;case cJ:return this.visitCollate;case tJ:return this.visitColumnParam;case eJ:return this.visitColumnRef;case DJ:return this.visitDescribeQuery;case EJ:return this.visitExpression;case CJ:return this.visitFragment;case LJ:return this.visitFromClause;case _J:return this.visitFunction;case gJ:return this.visitIn;case"INTERVAL":return this.visitInterval;case RJ:return this.visitJoinClause;case"LIST":return this.visitList;case iJ:return this.visitLiteral;case mJ:return this.visitLogicalOperator;case pJ:return this.visitNotBetween;case oJ:return this.visitOrderBy;case kJ:return this.visitParam;case OJ:return this.visitSampleClause;case FJ:return this.visitScalarSubquery;case PJ:return this.visitSelectClause;case MJ:return this.visitSelectQuery;case NJ:return this.visitSetOperation;case nJ:return this.visitTableRef;case uJ:return this.visitUnary;case dJ:return this.visitUnaryPostfix;case rJ:return this.visitUnnest;case TJ:return this.visitVerbatim;case lJ:return this.visitWhen;case vJ:return this.visitWindow;case IJ:return this.visitWindowClause;case xJ:return this.visitWindowDef;case SJ:return this.visitWindowExtentExpr;case wJ:return this.visitWindowFrame;case bJ:return this.visitWindowFunction;case AJ:return this.visitWithClause;default:throw new Error(`Unknown node type: '${e}'`)}}mapToString(e){return e.map(e=>this.toString(e))}}function jJ(e){return"string"==typeof e}function VJ(e){return Array.isArray(e)}function HJ(e){if(e){const t=e;return"function"==typeof(null==t?void 0:t.addEventListener)&&!1!==t.dynamic&&"value"in t}return!1}class WJ extends KQ{constructor(e){super(kJ),s(this,"param"),this.param=e}get value(){return this.param.value}}const $J="CURRENT ROW",GJ="UNBOUNDED";function qJ(e,t,n){const{extent:i,expr:r}=t;if(!i)return"";const[o,s]=e.mapToString(i);return`(${e.toString(r)} ${n} ${o} AND ${s})`}function YJ(e,t,n){const i=qQ(t)?e.toString(t):t;return qQ(t)&&t.type===SJ?i:null!=i&&"number"!=typeof i?`${i} ${n}`:0===i?$J:i&&Number.isFinite(i)?`${Math.abs(i)} ${n}`:`${GJ} ${n}`}const XJ=new class extends UJ{visitAggregate(e){const{name:t,args:n,isDistinct:i,filter:r,order:o}=e,s=[i?"DISTINCT":"",(null==n?void 0:n.length)?this.mapToString(n).join(", "):"count"===t.toLowerCase()?"*":"",o.length?`ORDER BY ${this.mapToString(o).join(", ")}`:""].filter(e=>e).join(" ");return`${t}(${s})${r?` FILTER (WHERE ${this.toString(r)})`:""}`}visitBetween(e){return qJ(this,e,"BETWEEN")}visitBinary(e){const{left:t,right:n,op:i}=e;return`(${this.toString(t)} ${i} ${this.toString(n)})`}visitCase(e){const{expr:t,_when:n,_else:i}=e;return"CASE "+(t?`${this.toString(t)} `:"")+this.mapToString(n).join(" ")+(i?` ELSE ${this.toString(i)}`:"")+" END"}visitCast(e){const{expr:t,cast:n}=e;return`(${this.toString(t)})::${n}`}visitCollate(e){const{expr:t,collation:n}=e;return`${this.toString(t)} COLLATE ${n}`}visitColumnParam(e){return this.visitColumnRef(e)}visitColumnRef(e){const{column:t,table:n}=e;return`${n?`${this.toString(n)}.`:""}${"*"===t?"*":QQ(t)}`}visitDescribeQuery(e){const{query:t}=e;return`DESC ${this.toString(t)}`}visitExpression(e){throw new Error(`Unexpected EXPRESSION node type. Node: ${JSON.stringify(e)}`)}visitFragment(e){const{spans:t}=e;return t.map(e=>"string"==typeof e?e:this.toString(e)).join("")}visitFromClause(e){var t;const{expr:n,alias:i,sample:r}=e,o=D0(n)?`(${this.toString(n)})`:`${this.toString(n)}`;return`${!i||f0(n)&&(null==(t=n.table)?void 0:t.join("."))===i?`${o}`:`${o} AS ${QQ(i)}`}${r?` TABLESAMPLE ${this.toString(r)}`:""}`}visitFunction(e){const{name:t,args:n}=e;return`${t}(${this.mapToString(n).join(", ")})`}visitIn(e){const{expr:t,values:n}=e;return`(${this.toString(t)} IN (${this.mapToString(n).join(", ")}))`}visitInterval(e){const{steps:t,name:n}=e;return`INTERVAL ${t} ${n}`}visitJoinClause(e){const{left:t,right:n,joinVariant:i,joinType:r,condition:o,using:s,sample:a}=e,l="REGULAR"===i?"":`${i} `;let c="",u="";"CROSS"!==i&&(c="INNER"!==r?`${r} `:"",u=o?` ON ${this.toString(o)}`:s?` USING (${this.mapToString(s).join(", ")})`:"");const d=a?` USING SAMPLE ${this.toString(a)}`:"";return`${this.toString(t)} ${l}${c}JOIN ${this.toString(n)}${u}${d}`}visitList(e){const{values:t}=e;return`[${this.mapToString(t).join(", ")}]`}visitLiteral(e){const{value:t}=e;return zJ(t)}visitLogicalOperator(e){const{clauses:t,op:n}=e,i=this.mapToString(t);return 0===i.length?"":1===i.length?`${i[0]}`:`(${i.join(` ${n} `)})`}visitNotBetween(e){return qJ(this,e,"NOT BETWEEN")}visitOrderBy(e){const{expr:t,desc:n,nullsFirst:i}=e,r=n?" DESC":!1===n?" ASC":"",o=i?" NULLS FIRST":!1===i?" NULLS LAST":"";return`${this.toString(t)}${r}${o}`}visitParam(e){const{param:t}=e;return zJ(t.value)}visitSampleClause(e){const{size:t,perc:n,method:i,seed:r}=e;return`${i?`${i} `:""}(${t}${n?"%":" ROWS"})${null!=r?` REPEATABLE (${r})`:""}`}visitScalarSubquery(e){return`(${this.toString(e.subquery)})`}visitSelectClause(e){const{expr:t,alias:n}=e;return!n||function(e,t){return e instanceof a0&&null==e.table&&e.column===t}(t,n)?this.toString(t):`${this.toString(t)} AS ${QQ(n)}`}visitSelectQuery(e){const{_with:t,_select:n,_distinct:i,_from:r,_sample:o,_where:s,_groupby:a,_having:l,_window:c,_qualify:u,_orderby:d,_limitPerc:h,_limit:f,_offset:p}=e,m=[];if(t.length&&m.push(`WITH ${this.mapToString(t).join(", ")}`),m.push(`SELECT${i?" DISTINCT":""} ${this.mapToString(n).join(", ")}`),r.length&&m.push(`FROM ${this.mapToString(r).join(", ")}`),o&&m.push(`USING SAMPLE ${this.toString(o)}`),s.length){const e=this.mapToString(s).filter(e=>e).join(" AND ");e&&m.push(`WHERE ${e}`)}if(a.length&&m.push(`GROUP BY ${this.mapToString(a).join(", ")}`),l.length){const e=this.mapToString(l).filter(e=>e).join(" AND ");e&&m.push(`HAVING ${e}`)}if(c.length&&m.push(`WINDOW ${this.mapToString(c).join(", ")}`),u.length){const e=this.mapToString(u).filter(e=>e).join(" AND ");e&&m.push(`QUALIFY ${e}`)}return d.length&&m.push(`ORDER BY ${this.mapToString(d).join(", ")}`),f&&m.push(`LIMIT ${this.toString(f)}${h?"%":""}`),null!=p&&m.push(`OFFSET ${this.toString(p)}`),m.join(" ")}visitSetOperation(e){const{op:t,queries:n,_with:i,_orderby:r,_limitPerc:o,_limit:s,_offset:a}=e,l=[];return i.length&&l.push(`WITH ${this.mapToString(i).join(", ")}`),l.push(n.join(` ${t} `)),r.length&&l.push(`ORDER BY ${this.mapToString(r).join(", ")}`),s&&l.push(`LIMIT ${this.toString(s)}${o?"%":""}`),a&&l.push(`OFFSET ${this.toString(a)}`),l.join(" ")}visitTableRef(e){const{table:t}=e;return t.map(e=>QQ(e)).join(".")}visitUnary(e){const{expr:t,op:n}=e;return`(${n} ${this.toString(t)})`}visitUnaryPostfix(e){const{expr:t,op:n}=e;return`(${this.toString(t)} ${n})`}visitUnnest(e){const{expr:t,recursive:n,maxDepth:i}=e,r=[this.toString(t)];return n&&r.push("recursive := true"),null!=i&&i>0&&r.push(`max_depth := ${i}`),`UNNEST(${r.join(", ")})`}visitVerbatim(e){const{value:t}=e;return t}visitWhen(e){const{when:t,then:n}=e;return`WHEN ${this.toString(t)} THEN ${this.toString(n)}`}visitWindow(e){const{func:t,def:n}=e;return`${this.toString(t)} OVER ${this.toString(n)}`}visitWindowClause(e){const{name:t,def:n}=e;return`${QQ(t)} AS ${this.toString(n)}`}visitWindowDef(e){const{name:t,partition:n,order:i,framedef:r}=e,o=t&&QQ(t),s=[o,(null==n?void 0:n.length)&&`PARTITION BY ${this.mapToString(n).join(", ")}`,(null==i?void 0:i.length)&&`ORDER BY ${this.mapToString(i).join(", ")}`,r&&this.toString(r)].filter(e=>e);return o&&s.length<2?o:`(${s.join(" ")})`}visitWindowExtentExpr(e){const{scope:t,expr:n}=e;return t===$J?t:`${qQ(n)?this.toString(n):n??GJ} ${t}`}visitWindowFrame(e){const{frameType:t,exclude:n,extent:i}=e,[r,o]=qQ(i)?i.value:i;return`${t} BETWEEN ${YJ(this,r,"PRECEDING")} AND ${YJ(this,o,"FOLLOWING")}${n?` ${n}`:""}`}visitWindowFunction(e){const{name:t,args:n,ignoreNulls:i,order:r}=e;return`${t}(${[this.mapToString(n).join(", "),r.length?`ORDER BY ${this.mapToString(r).join(", ")}`:"",i?"IGNORE NULLS":""].filter(e=>e).join(" ")})`}visitWithClause(e){const{name:t,query:n,materialized:i}=e,r=!0===i?"MATERIALIZED ":!1===i?"NOT MATERIALIZED ":"";return`${QQ(t)} AS ${r}(${this.toString(n)})`}};YQ=XJ;class KJ extends KQ{constructor(e,t=[]){super(_J),s(this,"name"),s(this,"args"),this.name=e,this.args=t}}function ZJ(e,...t){return new KJ(e,t0(t).map(g0))}function QJ(e,...t){return new b0(e,t0(t).map(g0))}function JJ(e,t){return e.flat().filter(e=>null!=e).map(e=>t(e))}function e0(e){return JJ(e,g0)}function t0(e){const t=e.length;let n=t;for(;n>0&&void 0===e[n-1];--n);return n<t?e.slice(0,n):e}class n0 extends XQ{constructor(e,t){super(IJ),s(this,"name"),s(this,"def"),this.name=e,this.def=t}}class i0 extends KQ{constructor(e,t=new r0){super(vJ),s(this,"func"),s(this,"def"),this.func=e,this.def=t}over(e){return new i0(this.func,this.def.over(e))}partitionby(...e){return new i0(this.func,this.def.partitionby(...e))}orderby(...e){return new i0(this.func,this.def.orderby(...e))}frame(e){return new i0(this.func,this.def.frame(e))}}class r0 extends XQ{constructor(e,t,n,i){super(xJ),s(this,"name"),s(this,"partition"),s(this,"order"),s(this,"framedef"),this.name=e,this.partition=t,this.order=n,this.framedef=i}over(e){return o0(this,{name:e})}partitionby(...e){return o0(this,{partition:e0(e)})}orderby(...e){return o0(this,{order:e0(e)})}frame(e){return o0(this,{framedef:e})}}function o0(e,t){return new r0(t.name??e.name,t.partition??e.partition,t.order??e.order,t.framedef??e.framedef)}function s0(e){return e instanceof a0}class a0 extends KQ{constructor(e,t){super(e),s(this,"table"),this.table=t}get column(){return""}}class l0 extends a0{constructor(e,t){super(eJ,t),s(this,"name"),this.name=e}get column(){return this.name}}class c0 extends a0{constructor(e,t){super(tJ,t),s(this,"param"),this.param=e}get column(){return`${this.param.value}`}}function u0(e,t){const n=v0(t);return HJ(e)?new c0(new WJ(e),n):new l0(e,n)}class d0 extends KQ{constructor(e,t){super(TJ),s(this,"value"),s(this,"hint"),this.value=e,this.hint=t}}function h0(e){return new BJ(e)}function f0(e){return e instanceof p0}class p0 extends KQ{constructor(e){super(nJ),s(this,"table"),this.table=[e].flat()}get name(){return this.table[this.table.length-1]}}function m0(...e){const t=JJ(e,String);return(null==t?void 0:t.length)?new p0(t):void 0}function g0(e){return jJ(e)?function(e){const t=ZQ(e);return u0(t.pop(),m0(t))}(e):y0(e)}function _0(e){return jJ(e)?function(e){return new d0(e,void 0)}(e):y0(e)}function y0(e){return e instanceof KQ?e:HJ(e)?new WJ(e):h0(e)}function v0(e){return jJ(e)?m0(ZQ(e)):VJ(e)?m0(e):e}class b0 extends KQ{constructor(e,t,n=!1,i=null,r=[]){super(yJ),s(this,"name"),s(this,"args"),s(this,"isDistinct"),s(this,"filter"),s(this,"order"),this.name=e,this.args=t,this.isDistinct=n,this.filter=i,this.order=e0([r])}distinct(e=!0){return new b0(this.name,this.args,e,this.filter,this.order)}where(e){return jJ(e)&&(e=_0(e)),new b0(this.name,this.args,this.isDistinct,e,this.order)}argOrder(e){return new b0(this.name,this.args,this.isDistinct,this.filter,e)}window(){return new i0(this)}partitionby(...e){return this.window().partitionby(...e)}orderby(...e){return this.window().orderby(...e)}frame(e){return this.window().frame(e)}}class x0 extends KQ{constructor(e,t,n){super(e),s(this,"expr"),s(this,"extent"),this.expr=t,this.extent=n}toSQL(e){const{extent:t,expr:n}=this;return t?`(${n} ${e} ${t[0]} AND ${t[1]})`:""}}class w0 extends x0{constructor(e,t){super(fJ,e,t)}}class S0 extends KQ{constructor(e,t,n){super(hJ),s(this,"op"),s(this,"left"),s(this,"right"),this.op=e,this.left=t,this.right=n}}class E0 extends KQ{constructor(e,t){super(sJ),s(this,"expr"),s(this,"cast"),this.expr=e,this.cast=t}}class C0 extends KQ{constructor(e){super(CJ),s(this,"spans"),this.spans=e}}class T0 extends XQ{}class k0 extends T0{constructor(e,t,n){super(LJ),s(this,"expr"),s(this,"alias"),s(this,"sample"),this.expr=e,this.alias=t,this.sample=n}as(e){return new k0(this.expr,e,this.sample)}}class A0 extends KQ{constructor(e,t){super(gJ),s(this,"expr"),s(this,"values"),this.expr=e,this.values=t}}class I0 extends KQ{constructor(e,t){super(mJ),s(this,"op"),s(this,"clauses"),this.op=e,this.clauses=t}}class P0 extends I0{constructor(e){super("AND",e)}}class L0 extends I0{constructor(e){super("OR",e)}}class R0 extends XQ{constructor(e,t=!1,n,i){super(OJ),s(this,"size"),s(this,"perc"),s(this,"method"),s(this,"seed"),this.size=e,this.perc=t,this.method=n,this.seed=i}}class O0 extends XQ{constructor(e,t){super(PJ),s(this,"expr"),s(this,"alias"),this.expr=e,this.alias=t}}class M0 extends XQ{constructor(e,t,n=null){super(AJ),s(this,"name"),s(this,"query"),s(this,"materialized"),this.name=e,this.query=t,this.materialized=n}}function D0(e){return e instanceof F0}function N0(e){return e instanceof B0}class F0 extends KQ{constructor(e){super(e),s(this,"_with",[]),s(this,"_orderby",[]),s(this,"_limitPerc",!1),s(this,"_limit"),s(this,"_offset"),s(this,"cteFor",null)}static with(...e){return new j0(...e)}static select(...e){return(new B0).select(...e)}static from(...e){return(new B0).from(...e)}static union(...e){return new U0("UNION",e.flat())}static unionByName(...e){return new U0("UNION BY NAME",e.flat())}static unionAll(...e){return new U0("UNION ALL",e.flat())}static unionAllByName(...e){return new U0("UNION ALL BY NAME",e.flat())}static intersect(...e){return new U0("INTERSECT",e.flat())}static intersectAll(...e){return new U0("INTERSECT ALL",e.flat())}static except(...e){return new U0("EXCEPT",e.flat())}static exceptAll(...e){return new U0("EXCEPT ALL",e.flat())}static describe(e){return new z0(e)}get subqueries(){return[]}clone(){return this}setCteFor(e){this.cteFor=e}with(...e){const t=[],n=(e,n)=>{const i=n.clone();i.setCteFor(this),t.push(new M0(e,i))};return e.flat().forEach(e=>{if(e instanceof M0)t.push(e);else if(null!=e)for(const t in e)n(t,e[t])}),this._with=this._with.concat(t),this}orderby(...e){return this._orderby=this._orderby.concat(e0(e)),this}limitPercent(e){return this._limitPerc=!0,this._limit=g0(e),this}limit(e){return this._limitPerc=!1,this._limit=g0(e),this}offset(e){return this._offset=g0(e),this}}class B0 extends F0{constructor(){super(MJ),s(this,"_select",[]),s(this,"_from",[]),s(this,"_where",[]),s(this,"_sample"),s(this,"_groupby",[]),s(this,"_having",[]),s(this,"_window",[]),s(this,"_qualify",[]),s(this,"_distinct",!1)}get subqueries(){const e=this.cteFor||this,t=(e instanceof B0?e._with:[]).reduce((e,t)=>(e[t.name]=t.query,e),{}),n=[];return this._from.forEach(e=>{if(e instanceof k0){const{expr:i}=e;if(D0(i))n.push(i);else if(f0(i)){const e=t[i.name];e&&n.push(e)}}}),n}clone(){return Object.assign(new B0,this)}select(...e){const t=new Set,n=[],i=(e,i)=>{const r=JQ(i);t.add(r),e&&n.push(new O0(g0(e),r))};return e.flat().forEach(e=>{if(null!=e)if(jJ(e))i(e,e);else if(s0(e))i(e,e.column);else if(VJ(e))i(e[1],e[0]);else if(qQ(e))i(e,`${e}`);else for(const t in e)i(e[t],t)}),this._select=this._select.filter(e=>!t.has(e.alias)).concat(n),this}setSelect(...e){return this._select=[],this.select(...e)}distinct(e=!0){return this._distinct=!!e,this}from(...e){const t=[],n=(e,n)=>{t.push(new k0(v0(e),JQ(n)))};return e.flat().forEach(e=>{if(null!=e)if(e instanceof T0)t.push(e);else if(jJ(e))n(e,e);else if(f0(e))n(e,e.name);else if(qQ(e))n(e);else if(VJ(e))n(e[1],e[0]);else for(const t in e)n(e[t],t)}),this._from=this._from.concat(t),this}setFrom(...e){return this._from=[],this.from(...e)}sample(e,t,n){let i;if("number"==typeof e){const r=e>0&&e<1,o=r?100*e:Math.floor(e);i=new R0(o,r,t,n)}else i=e;return this._sample=i??void 0,this}where(...e){return this._where=this._where.concat(JJ(e,_0)),this}setWhere(...e){return this._where=[],this.where(...e)}groupby(...e){return this._groupby=this._groupby.concat(e0(e)),this}setGroupby(...e){return this._groupby=[],this.groupby(...e)}having(...e){return this._having=this._having.concat(JJ(e,_0)),this}window(...e){const t=[];return e.flat().forEach(e=>{if(null!=e)for(const n in e)t.push(new n0(JQ(n),e[n]))}),this._window=this._window.concat(t),this}qualify(...e){return this._qualify=this._qualify.concat(JJ(e,_0)),this}}class z0 extends XQ{constructor(e){super(DJ),s(this,"query"),this.query=e}clone(){return new z0(this.query.clone())}}class U0 extends F0{constructor(e,t){super(NJ),s(this,"op"),s(this,"queries"),this.op=e,this.queries=t}setCteFor(e){super.setCteFor(e);const{queries:t,cteFor:n}=this;n&&t.forEach(e=>e.setCteFor(n))}get subqueries(){return this.queries}clone(){const{op:e,queries:t,...n}=this;return Object.assign(new U0(e,t),n)}}class j0{constructor(...e){s(this,"_with"),this._with=e}select(...e){return F0.select(...e).with(...this._with)}from(...e){return F0.from(...e).with(...this._with)}union(...e){return F0.union(...e).with(...this._with)}unionByName(...e){return F0.unionByName(...e).with(...this._with)}unionAll(...e){return F0.unionAll(...e).with(...this._with)}unionAllByName(...e){return F0.unionAllByName(...e).with(...this._with)}intersect(...e){return F0.intersect(...e).with(...this._with)}intersectAll(...e){return F0.intersectAll(...e).with(...this._with)}except(...e){return F0.except(...e).with(...this._with)}exceptAll(...e){return F0.exceptAll(...e).with(...this._with)}}class V0 extends KQ{constructor(e,t,n){super(e),s(this,"op"),s(this,"expr"),this.op=t,this.expr=n}}class H0 extends V0{constructor(e,t){super(dJ,e,t)}}function W0(e){return QJ("avg",e)}function $0(e){return QJ("count",e)}function G0(e){return QJ("sum",e)}function q0(e,t){return new E0(g0(e),t)}function Y0(e){return q0(e,"DOUBLE")}function X0(e){return ZJ("exp",e)}function K0(e){return ZJ("ln",e)}function Z0(e){return ZJ("sign",e)}function Q0(e){return ZJ("abs",e)}function J0(e){return ZJ("sqrt",e)}function e1(e){return ZJ("floor",e)}function t1(e,t){return new H0(e,g0(t))}function n1(e,t,n){return new S0(e,g0(t),g0(n))}function i1(...e){return new P0(e0(e))}function r1(e){return t1("IS NOT NULL",e)}function o1(e,t){return n1("-",e,t)}function s1(e,t){return n1("*",e,t)}function a1(e,t){return n1("/",e,t)}function l1(e,t){return n1("**",e,t)}function c1(e,t){return n1("<=",e,t)}function u1(e,t){return n1(">=",e,t)}function d1(e,t){return new w0(g0(e),null==t?void 0:t.map(g0))}function h1(e,t){return new A0(g0(e),t.map(g0))}function f1(e,...t){return new C0(function(e,t){const n=[e[0]],i=t.length;for(let r=0,o=0;r<i;){const i=t[r];qQ(i)?n[++o]=i:HJ(i)?n[++o]=new WJ(i):n[o]+=jJ(i)?i:`${h0(i)}`;const s=e[++r];qQ(n[o])?n[++o]=s:n[o]+=s}return n.filter(e=>e).map(e=>jJ(e)?new d0(e):e)}(e,t))}function p1(...e){return ZJ("coalesce",...e)}const m1={[yJ]:["args","order","filter"],[fJ]:["expr","extent"],[hJ]:["left","right"],[aJ]:["expr","_when","_else"],[sJ]:["expr"],[cJ]:["expr"],[tJ]:["param","table"],[eJ]:["table"],[DJ]:["query"],[EJ]:["node"],[CJ]:["spans"],[LJ]:["expr"],[_J]:["args"],[gJ]:["expr","values"],[RJ]:["left","right","on","using","sample"],[mJ]:["clauses"],[pJ]:["expr","extent"],[oJ]:["expr"],[kJ]:["value"],[FJ]:["subquery"],[PJ]:["expr"],[MJ]:["_with","_select","_from","_where","_sample","_groupby","_having","_window","_qualify","_orderby"],[NJ]:["queries","_orderby"],[uJ]:["expr"],[dJ]:["expr"],[rJ]:["expr"],[lJ]:["when","then"],[vJ]:["func","def"],[IJ]:["def"],[xJ]:["partition","order","framedef"],[SJ]:["expr"],[wJ]:["extent"],[bJ]:["args"],[AJ]:["query"]};function g1(e,t){if(t.has(e))return t.get(e);if(qQ(e)){const n=m1[e.type],i=(null==n?void 0:n.length)??0;if(i>0){e=e.clone();for(let r=0;r<i;++r){const i=n[r],o=e[i];if(Array.isArray(o)){const n=e[i]=o.slice(),r=o.length;for(let e=0;e<r;++e)n[e]=g1(o[e],t)}else o&&(e[i]=g1(o,t))}}}return e}function _1(e,t){if(!qQ(e))return;const n=t(e);if(n)return n;const i=m1[e.type],r=(null==i?void 0:i.length)??0;for(let o=0;o<r;++o){const r=e[i[o]];if(Array.isArray(r)){const e=r.length;for(let i=0;i<e;++i)if(r[i]&&Number(_1(r[i],t))<0)return n}else if(r&&Number(_1(r,t))<0)return-1}}const y1=new RegExp(`^(${["any_value","approx_count_distinct","approx_quantile","arbitrary","arg_max","arg_max_null","arg_min","arg_min_null","array_agg","avg","bit_and","bit_or","bit_xor","bitstring_agg","bool_and","bool_or","corr","count","count_star","covar_pop","covar_samp","entropy","favg","first","fsum","geomean","kurtosis_pop","kurtosis","last","mad","max","max_by","median","min","min_by","mode","product","quantile","quantile_cont","quantile_disc","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_sxx","regr_sxy","regr_syy","regr_slope","reservoir_quantile","skewness","stddev","stddev_pop","stddev_samp","string_agg","sum","variance","var_pop","var_samp"].join("|")})$`),v1=/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\w+\()/g;function b1(e){let t=0;return _1(e,e=>{switch(e.type){case vJ:return-1;case yJ:return t|=1,-1;case CJ:case TJ:{let n=`${e}`.toLowerCase();const i=n.indexOf("(select ");return i>=0&&(n=n.slice(0,i)),n.includes(") over ")?-1:function(e){return e.split(v1).some(e=>e.endsWith("(")&&y1.test(e.slice(0,-1)))}(n)?(t|=2,-1):1}}}),t}function x1(e){const t=new Set;return _1(e,e=>{e.type===yJ&&t.add(e)}),Array.from(t)}function w1(e){const t={};return _1(e,e=>{e.type!==eJ&&e.type!==tJ||(t[`${e}`]=e)}),Object.values(t)}function S1(e,t,{replace:n=!1,temp:i=!1,view:r=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(i?"TEMP ":"")+(r?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function E1(e){return e}function C1(){return{apply:E1,invert:E1,sqlApply:g0,sqlInvert:E1}}function T1(){return{apply:e=>Number(e),invert:e=>new Date(e),sqlApply:e=>{return e instanceof Date?h0(+e):(t=e)instanceof BJ&&t.value instanceof Date?h0(Number(e.value)):ZJ("epoch_ms",e);var t},sqlInvert:E1}}const k1={identity:C1,linear:C1,log:function({base:e=null}={}){if(null==e||e===Math.E)return{apply:Math.log,invert:Math.exp,sqlApply:e=>K0(e),sqlInvert:e=>X0(e)};if(10===e)return{apply:Math.log10,invert:e=>Math.pow(10,e),sqlApply:e=>ZJ("log",e),sqlInvert:e=>l1(10,e)};{const t=+e;return{apply:e=>Math.log(e)/Math.log(t),invert:e=>Math.pow(t,e),sqlApply:e=>a1(K0(e),K0(t)),sqlInvert:e=>l1(t,e)}}},symlog:function({constant:e=1}={}){const t=+e;return{apply:e=>Math.sign(e)*Math.log1p(Math.abs(e)),invert:e=>Math.sign(e)*Math.exp(Math.abs(e)-t),sqlApply:e=>s1(Z0(e=g0(e)),K0(n1("+",t,Q0(e)))),sqlInvert:e=>s1(Z0(e),o1(X0(Q0(e)),t))}},sqrt:function(){return{apply:e=>Math.sign(e)*Math.sqrt(Math.abs(e)),invert:e=>Math.sign(e)*e*e,sqlApply:e=>s1(Z0(e=g0(e)),J0(Q0(e))),sqlInvert:e=>s1(Z0(e),l1(e,2))}},pow:function({exponent:e=1}={}){const t=+e;return{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),t),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/t),sqlApply:e=>s1(Z0(e=g0(e)),l1(Q0(e),t)),sqlInvert:e=>s1(Z0(e),l1(Q0(e),a1(1,t)))}},time:T1,utc:T1};function A1(e){let t=2166136261;for(let n=0,i=e.length;n<i;++n){const i=e.charCodeAt(n),r=65280&i;r&&(t=I1(t^r>>8)),t=I1(t^255&i)}return function(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,4294967295&(e+=e<<5)}(t)>>>0}function I1(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function P1(e,t,n){switch(e.name){case"count":case"count_star":return function(e,t){return p1(M1(e,t),0)}(t,e);case"sum":return M1(t,e);case"avg":return function(e,t){const n=R1(e,t),{expr:i,name:r}=O1(e,t);return a1(G0(s1(n,r)),i)}(t,e);case"geomean":return function(e,t){const n=R1(e,G0(K0(t.args[0])),t),{expr:i}=O1(e,t);return X0(a1(G0(n),i))}(t,e);case"arg_max":return function(e,t){const n=R1(e,t),i=R1(e,function(e){return QJ("max",e)}(t.args[1]),t);return QJ("arg_max",n,i)}(t,e);case"arg_min":return function(e,t){const n=R1(e,t),i=R1(e,function(e){return QJ("min",e)}(t.args[1]),t);return QJ("arg_min",n,i)}(t,e);case"variance":case"var_samp":return D1(t,e,n);case"var_pop":return D1(t,e,n,!1);case"stddev":case"stddev_samp":return J0(D1(t,e,n));case"stddev_pop":return J0(D1(t,e,n,!1));case"covar_samp":return N1(t,e,n);case"covar_pop":return N1(t,e,n,!1);case"corr":return F1(t,e,n);case"regr_count":return B1(t,e).expr;case"regr_avgx":return V1(t,e);case"regr_avgy":return H1(t,e);case"regr_syy":return W1(t,0,e,n);case"regr_sxx":return W1(t,1,e,n);case"regr_sxy":return N1(t,e,n,null);case"regr_slope":return $1(t,e,n);case"regr_intercept":return function(e,t,n){const i=V1(e,t);return o1(H1(e,t),s1($1(e,t,n),i))}(t,e,n);case"regr_r2":return l1(F1(t,e,n),2);case"max":case"min":case"bit_and":case"bit_or":case"bit_xor":case"bool_and":case"bool_or":case"product":{const n=L1(e);return t[n]=e,f1`${e.name}("${n}")`}default:return null}}function L1(e){return"pre_"+A1(`${e}`).toString(16)}function R1(e,t,n){const i=null==n?void 0:n.filter;i&&(t=t.filter?t.where(i1(i,t.filter)):t.where(i));const r=L1(t);return e[r]=t,r}function O1(e,t){const n=R1(e,$0(t.args[0]),t);return{expr:p1(G0(n),0),name:n}}function M1(e,t){return G0(R1(e,t))}function D1(e,t,n,i=!0){const r=t.args[0],{expr:o}=O1(e,t),s=o1(r,n(r)),a=R1(e,G0(l1(s,2)),t),l=R1(e,G0(s),t),c=i?o1(o,1):o;return a1(o1(G0(a),a1(l1(G0(l),2),o)),c)}function N1(e,t,n,i=!0){const{expr:r}=B1(e,t),o=o1(j1(e,t,n),a1(s1(z1(e,1,t,n),z1(e,0,t,n)),r));return null===i?o:a1(o,i?o1(r,1):r)}function F1(e,t,n){const{expr:i}=B1(e,t),r=j1(e,t,n),o=U1(e,1,t,n),s=U1(e,0,t,n),a=z1(e,1,t,n),l=z1(e,0,t,n),c=o1(o,a1(l1(a,2),i)),u=o1(s,a1(l1(l,2),i));return a1(o1(r,a1(s1(a,l),i)),J0(s1(c,u)))}function B1(e,t){const[n,i]=t.args,r=R1(e,function(e,t){return QJ("regr_count",e,t)}(n,i),t);return{expr:G0(r),name:r}}function z1(e,t,n,i){const r=n.args,o=r[t],s=r[1-t],a=G0(o1(o,i(o))).where(r1(s));return G0(R1(e,a,n))}function U1(e,t,n,i){const r=n.args,o=r[t],s=r[1-t],a=G0(l1(o1(o,i(o)),2)).where(r1(s));return G0(R1(e,a,n))}function j1(e,t,n){const[i,r]=t.args,o=G0(s1(o1(r,n(r)),o1(i,n(i))));return G0(R1(e,o,t))}function V1(e,t){const[n,i]=t.args,{expr:r,name:o}=B1(e,t),s=R1(e,function(e,t){return QJ("regr_avgx",e,t)}(n,i),t);return a1(G0(s1(s,o)),r)}function H1(e,t){const[n,i]=t.args,{expr:r,name:o}=B1(e,t),s=R1(e,function(e,t){return QJ("regr_avgy",e,t)}(n,i),t);return a1(G0(s1(s,o)),r)}function W1(e,t,n,i){const{expr:r}=B1(e,n),o=z1(e,t,n,i);return o1(U1(e,t,n,i),a1(l1(o,2),r))}function $1(e,t,n){return a1(N1(e,t,n,null),W1(e,1,t,n))}function G1(e,t){const n=e.subqueries;if(N0(e)&&0===n.length)return t(e);const i=G1(n[0],t);for(let r=1;r<n.length;++r){const e=G1(n[r],t);if(void 0!==e&&e!==i)return NaN}return i}const q1={skip:!0,result:null};class Y1{constructor(e,{schema:t="mosaic",enabled:n=!0}={}){s(this,"entries"),s(this,"active"),s(this,"mc"),s(this,"_schema"),s(this,"_enabled"),this.entries=new Map,this.active=null,this.mc=e,this._schema=t,this._enabled=n}set enabled(e){this._enabled!==e&&(e||this.clear(),this._enabled=e)}get enabled(){return this._enabled}set schema(e){this._schema!==e&&(this.clear(),this._schema=e)}get schema(){return this._schema}dropSchema(){return this.clear(),this.mc.exec(`DROP SCHEMA IF EXISTS "${this.schema}" CASCADE`)}clear(){this.entries.clear(),this.active=null}request(e,t,n){var i;if(!this.enabled||null==n)return null;const{entries:r,mc:o,schema:s}=this,{source:a}=n;if(!a)return null;if(this.active&&(this.active.source!==a&&this.clear(),null===(null==(i=this.active)?void 0:i.source)))return null;let{active:l}=this;if(!l){if(null==n.predicate)return null;if(this.active=l=function(e){const{source:t,meta:n}=e,i=e.predicate,r=w1(i).map(e=>e.column);let o,s;if(!n||!r)return{source:null,columns:s,predicate:o};switch(n.type){case"point":o=e=>e,s=Object.fromEntries(r.map(e=>[`${e}`,g0(e)]));break;case"interval":{const{scales:e,bin:t,pixelSize:r=1}=n;if(!e)break;const a=e.map(e=>function(e,t,n){const{type:i,domain:r,range:o,apply:s,sqlApply:a}=function(e){const t=k1[e.type];if(!t)throw new Error(`Unrecognized scale type: ${e.type}`);return{...e,...t(e)}}(e);if(!s)return;const l=X1[`${n}`.toLowerCase()]||e1,c=r.map(e=>Number(e)),u=s(Math.min(...c)),d=s(Math.max(...c)),h=("identity"===i?1:Math.abs(o[1]-o[0])/(d-u))/t,f=1===h?e=>e:e=>s1(Y0(h),e),p=0===u?e=>e:e=>o1(e,Y0(u));return e=>q0(l(f(p(a(e)))),"INTEGER")}(e,r,t));a.some(e=>!e)||(1===a.length?(o=e=>{var t;return e?d1("active0",null==(t=e.extent)?void 0:t.map(a[0])):[]},s={active0:a[0](i.expr)}):(o=e=>e?i1(e.clauses.map((e,t)=>{var n;return d1(`active${t}`,null==(n=e.extent)?void 0:n.map(a[t]))})):[],s=Object.fromEntries(i.clauses.map((e,t)=>[`active${t}`,a[t](e.expr)]))))}}return{source:s?t:null,columns:s,predicate:o}}(n),null===l.source)return null}if(r.has(e))return r.get(e);const c=function(e){if(!e.filterStable)return null;const t=e.query();if(!N0(t))return null;const n=G1(t,e=>{const t=e._from[0],n=t instanceof k0&&t.expr;return f0(n)?n.name:n});if("string"!=typeof n)return null;const i=new Map,r={},o={},s=[],a=e=>{const i=e.column;return f1`(SELECT avg(${G1(t,e=>{var t;return null==(t=e._select.find(e=>e.alias===i))?void 0:t.expr})??e}) FROM "${n}")`};for(const{alias:l,expr:c}of t._select){if(b1(c)>1)return null;const e=x1(c);if(0===e.length)s.push(l),r[l]=c;else{for(const t of e){if(t.isDistinct)return null;const e=P1(t,r,a);if(!e)return null;i.set(t,e)}o[l]=g1(c,i)}}return i.size?{group:s,preagg:r,output:o}:null}(e);let u;if(c)if(t.skip(e,n))u=q1;else{const n=t.remove(a).predicate(e);u=function(e,t,n,i){const{group:r,output:o,preagg:s}=n,{columns:a}=t,l=e.setSelect({...s,...a}).groupby(Object.keys(a)),[c]=l.subqueries;c&&function(e,t){const n=new Set,i=e=>{if(!n.has(e)){if(n.add(e),N0(e)&&e._from.length&&(e.select(t),function(e){return e._groupby.length>0||e._select.some(e=>b1(e))}(e))){const n=new Set(e._groupby.flatMap(e=>e instanceof l0?[e.name]:[]));e.groupby(t.filter(e=>!n.has(e)))}e.subqueries.forEach(i)}};i(e)}(c,Object.values(a).flatMap(e=>w1(e).map(e=>e.column)));const u=l._having,d=l._orderby;l._having=[],l._orderby=[];const h=l.toString(),f=`${i}.preagg_${(A1(h)>>>0).toString(16)}`,p=F0.select(r,o).from(f).groupby(r).having(u).orderby(d);return new K1({table:f,create:h,active:t,select:p})}(e.query(n),l,c,s),u.result=o.exec([`CREATE SCHEMA IF NOT EXISTS ${s}`,S1(u.table,u.create,{temp:!1})]),u.result.catch(e=>o.logger().error(e))}else u=null;return r.set(e,u),u}}const X1={ceil:function(e){return ZJ("ceil",e)},round:function(e,t){return ZJ("round",e,t)}};class K1{constructor({table:e,create:t,active:n,select:i}){s(this,"table"),s(this,"create"),s(this,"result"),s(this,"active"),s(this,"select"),s(this,"skip"),this.table=e,this.create=t,this.result=null,this.active=n,this.select=i,this.skip=!1}query(e){return this.select.clone().where(this.active.predicate(e))}}function Z1(){return{debug(){},info(){},log(){},warn(){},error(){},group(){},groupCollapsed(){},groupEnd(){}}}const Q1=Object.freeze({pending:Symbol("pending"),ready:Symbol("ready"),error:Symbol("error"),done:Symbol("done")});class J1 extends Promise{constructor(){let e,t;super((n,i)=>{e=n,t=i}),s(this,"_resolve"),s(this,"_reject"),s(this,"_state"),s(this,"_value"),this._resolve=e,this._reject=t,this._state=Q1.pending,this._value=void 0}fulfill(e){if(void 0!==this._value){if(void 0!==e)throw Error("Promise is ready and fulfill has a provided value");this._resolve(this._value)}else{if(void 0===e)throw Error("Promise is neither ready nor has provided value");this._resolve(e)}return this._state=Q1.done,this}ready(e){return this._state=Q1.ready,this._value=e,this}reject(e){return this._state=Q1.error,this._reject(e),this}get state(){return this._state}}function e2(e,t){let n=[],i=0;return{add(r,o){var s;"arrow"===r.request.type?(i||(s=()=>function(){const r=function(e,t){const n=[],i=new Map;for(const r of e){const{entry:{request:e}}=r,o=t2(e.query,t);if(!i.has(o)){const e=[];n.push(e),i.set(o,e)}i.get(o).push(r)}return n}(n,t);n=[],i=0;for(const n of r)n2(n,e),r2(n,t)}(),i="undefined"!=typeof requestAnimationFrame?requestAnimationFrame(s):"undefined"!=typeof setImmediate?setImmediate(s):setTimeout(s)),n.push({entry:r,priority:o,index:n.length})):e(r,o)}}}function t2(e,t){const n=`${e}`;if(N0(e)&&!t.get(n)){if(e._where.length||e._qualify.length||e._having.length||e._orderby.length||e._distinct)return n;const t=e.clone().setSelect("*"),i=e._groupby;if(i.length){const n={};e._select.forEach(({alias:e,expr:t})=>n[e]=t),t.setGroupby(i.map(e=>s0(e)&&n[e.column]||e))}else e._select.some(e=>b1(e.expr))&&t.setGroupby("ALL");return`${t}`}return n}function n2(e,t){if(function(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}(e))t({request:{type:"arrow",cache:!1,query:e.query=i2(e)},result:e.result=new J1});else for(const{entry:n,priority:i}of e)t(n,i)}function i2(e){const t=e.maps=[],n=new Map;for(const o of e){const e=o.entry.request.query,i=[];t.push(i);for(const{alias:t,expr:r}of e._select){const e=`${r}`;n.has(e)||n.set(e,[`col${n.size}`,r]);const[o]=n.get(e);i.push([o,t])}}const i=e[0].entry.request.query.clone(),r=i._groupby;if(r.length){const t={};e.maps[0].forEach(([e,n])=>t[n]=e),i.setGroupby(r.map(e=>s0(e)&&t[e.column]||e))}return i.setSelect(Array.from(n.values()))}async function r2(e,t){const{maps:n,query:i,result:r}=e;if(!n)return;let o;try{o=await r}catch(a){for(const{entry:t}of e)t.result.reject(a);return}const s=i instanceof z0;e.forEach(({entry:e},i)=>{const{request:r,result:a}=e,l=n[i],c=s&&l?function(e,t){const n=new Map(t),i=[];for(const r of e)n.has(r.column_name)&&i.push({...r,column_name:n.get(r.column_name)});return i}(o,l):l?function(e,t){return e.select(t.map(e=>e[0]),t.map(e=>e[1]))}(o,l):o;r.cache&&t.set(String(r.query),c),a.fulfill(c)})}J1.prototype.constructor=Promise;const o2="undefined"!=typeof requestIdleCallback?requestIdleCallback:setTimeout;class s2{constructor(e){s(this,"queue"),this.queue=Array.from({length:e},()=>({head:null,tail:null}))}isEmpty(){return this.queue.every(e=>!e.head)}insert(e,t){const n=this.queue[t];if(!n)throw new Error(`Invalid queue priority rank: ${t}`);const i={item:e,next:null};null===n.head?n.head=n.tail=i:n.tail=n.tail.next=i}remove(e){for(const t of this.queue){let{head:n,tail:i}=t;for(let t=null,r=n;r;t=r,r=r.next)e(r.item)&&(r===n?n=r.next:t.next=r.next,r===i&&(i=t||n));t.head=n,t.tail=i}}next(){for(const e of this.queue){const{head:t}=e;if(null!==t)return e.head=t.next,e.tail===t&&(e.tail=null),t.item}}}const a2=Object.freeze({High:0,Normal:1,Low:2});class l2{constructor(e=32){s(this,"queue"),s(this,"db"),s(this,"clientCache"),s(this,"_logger"),s(this,"_logQueries"),s(this,"_consolidate"),s(this,"pendingResults"),s(this,"maxConcurrentRequests"),s(this,"pendingExec"),this.queue=new s2(3),this.db=null,this.clientCache=null,this._logger=Z1(),this._logQueries=!1,this._consolidate=null,this.pendingResults=[],this.maxConcurrentRequests=e,this.pendingExec=!1}next(){if(this.queue.isEmpty()||this.pendingResults.length>this.maxConcurrentRequests||this.pendingExec)return;const e=this.queue.next();if(!e)return;const{request:t,result:n}=e;this.pendingResults.push(n),"exec"===t.type&&(this.pendingExec=!0),this.submit(t,n).finally(()=>{for(;this.pendingResults.length&&this.pendingResults[0].state!==Q1.pending;){const e=this.pendingResults.shift();e.state===Q1.ready?e.fulfill():e.state===Q1.done&&this._logger.warn("Found resolved query in pending results.")}"exec"===t.type&&(this.pendingExec=!1),this.next()})}enqueue(e,t=a2.Normal){this.queue.insert(e,t),this.next()}async submit(e,t){try{const{query:n,type:i,cache:r=!1,options:o}=e,s=n?`${n}`:null;if(r){const e=this.clientCache.get(s);if(e){const n=await e;return this._logger.debug("Cache"),void t.ready(n)}}const a=performance.now();this._logQueries&&this._logger.debug("Query",{type:i,sql:s,...o});const l=this.db.query({type:i,sql:s,...o});r&&this.clientCache.set(s,l);const c=await l;r&&this.clientCache.set(s,c),this._logger.debug(`Request: ${(performance.now()-a).toFixed(1)}`),t.ready("exec"===i?null:c)}catch(n){t.reject(n)}}cache(e){return void 0!==e?this.clientCache=!0===e?function({max:e=1e3,ttl:t=108e5}={}){let n=new Map;function i(){const e=performance.now()-t;let i=null,r=1/0;for(const[t,o]of n){const{last:s}=o;s<r&&(i=t,r=s),e>s&&n.delete(t)}i&&n.delete(i)}return{get(e){const t=n.get(e);if(t)return t.last=performance.now(),t.value},set:(t,r)=>(n.set(t,{last:performance.now(),value:r}),n.size>e&&o2(i),r),clear(){n=new Map}}}():e||{get:()=>{},set:(e,t)=>t,clear:()=>{}}:this.clientCache}logger(e){return e?this._logger=e:this._logger}logQueries(e){return void 0!==e?this._logQueries=!!e:this._logQueries}connector(e){return e?this.db=e:this.db}consolidate(e){e&&!this._consolidate?this._consolidate=e2(this.enqueue.bind(this),this.clientCache):!e&&this._consolidate&&(this._consolidate=null)}request(e,t=a2.Normal){const n=new J1,i={request:e,result:n};return this._consolidate?this._consolidate.add(i,t):this.enqueue(i,t),n}cancel(e){const t=new Set(e);if(t.size){this.queue.remove(({result:e})=>!!t.has(e)&&(e.reject("Canceled"),!0));for(const e of this.pendingResults)t.has(e)&&e.reject("Canceled")}}clear(){this.queue.remove(({result:e})=>(e.reject("Cleared"),!0));for(const e of this.pendingResults)e.reject("Cleared");this.pendingResults=[]}}let c2;function u2(e){return e?c2=e:null==c2&&(c2=new d2),c2}class d2{constructor(e=new GQ,t={}){s(this,"manager"),s(this,"preaggregator"),s(this,"clients",new Set),s(this,"filterGroups",new Map),s(this,"_logger",Z1());const{logger:n=console,manager:i=new l2,cache:r=!0,consolidate:o=!0,preagg:a={}}=t;this.manager=i,this.manager.cache(r),this.manager.consolidate(o),this.databaseConnector(e),this.logger(n),this.clear(),this.preaggregator=new Y1(this,a)}clear(e={}){var t,n;const{clients:i=!0,cache:r=!0}=e;this.manager.clear(),i&&(null==(t=this.filterGroups)||t.forEach(e=>e.disconnect()),this.filterGroups=new Map,null==(n=this.clients)||n.forEach(e=>this.disconnect(e)),this.clients=new Set),r&&this.manager.cache().clear()}databaseConnector(e){return e?this.manager.connector(e):this.manager.connector()}logger(e){return arguments.length&&(this._logger=e||Z1(),this.manager.logger(this._logger)),this._logger}cancel(e){this.manager.cancel(e)}exec(e,t={}){const{priority:n=a2.Normal}=t;return e=Array.isArray(e)?e.filter(e=>e).join(";\n"):e,this.manager.request({type:"exec",query:e},n)}query(e,t={}){const{type:n="arrow",cache:i=!0,priority:r=a2.Normal,...o}=t;return this.manager.request({type:n,query:e,cache:i,options:o},r)}prefetch(e,t={}){return this.query(e,{...t,cache:!0,priority:a2.Low})}updateClient(e,t,n=a2.Normal){return e.queryPending(),e._pending=this.query(t,{priority:n}).then(t=>e.queryResult(t).update(),t=>{var n;null==(n=this._logger)||n.error(t),e.queryError(t)}).catch(e=>{var t;return null==(t=this._logger)?void 0:t.error(e)})}requestQuery(e,t){return this.preaggregator.clear(),t?this.updateClient(e,t):Promise.resolve(e.update())}connect(e){const{clients:t}=this;if(null==t?void 0:t.has(e))throw new Error("Client already connected.");null==t||t.add(e),e.coordinator=this,e.initialize(),function(e,t,n){var i,r;if(!t)return;let o=null==(i=e.filterGroups)?void 0:i.get(t);if(!o){const n=n=>function(e,t,n){const{preaggregator:i,filterGroups:r}=e,{clients:o}=r.get(t);for(const s of o)s.enabled&&i.request(s,t,n)}(e,t,n),i=()=>function(e,t){const{preaggregator:n,filterGroups:i}=e,{clients:r}=i.get(t),{active:o}=t;return Promise.allSettled(Array.from(r,i=>{if(!i.enabled)return i.requestQuery();const r=n.request(i,t,o),s=r?null:t.predicate(i);if((null==r?void 0:r.skip)||!r&&!s)return;const a=(null==r?void 0:r.query(o.predicate))??i.query(s);return e.updateClient(i,a)}))}(e,t);t.addEventListener("activate",n),t.addEventListener("value",i),o={selection:t,clients:new Set,disconnect(){t.removeEventListener("activate",n),t.removeEventListener("value",i)}},null==(r=e.filterGroups)||r.set(t,o)}o.clients.add(n)}(this,e.filterBy,e)}disconnect(e){const{clients:t,filterGroups:n}=this;if(!(null==t?void 0:t.has(e)))return;t.delete(e),e.coordinator=null;const i=null==n?void 0:n.get(e.filterBy);i&&i.clients.delete(e)}}class h2 extends IK{constructor({selection:e,enabled:t=!0,filterStable:n=!0,...i}){super(e),s(this,"_methods"),s(this,"_filterStable"),this.enabled=t,this._methods=i,this._filterStable=n}get filterStable(){return this._filterStable}async prepare(){var e,t;await(null==(t=(e=this._methods).prepare)?void 0:t.call(e))}query(e){var t,n;return(null==(n=(t=this._methods).query)?void 0:n.call(t,e))??null}queryResult(e){var t,n;return null==(n=(t=this._methods).queryResult)||n.call(t,e),this}queryPending(){var e,t;return null==(t=(e=this._methods).queryPending)||t.call(e),this}queryError(e){var t,n;return null==(n=(t=this._methods).queryError)||n.call(t,e),this}}class f2{constructor(){s(this,"_callbacks"),this._callbacks=new Map}addEventListener(e,t){this._callbacks.has(e)||this._callbacks.set(e,{callbacks:new Set,pending:null,queue:new p2}),this._callbacks.get(e).callbacks.add(t)}removeEventListener(e,t){const n=this._callbacks.get(e);n&&n.callbacks.delete(t)}willEmit(e,t){return t}emitQueueFilter(e,t){return null}cancel(e){const t=this._callbacks.get(e);null==t||t.queue.clear()}async pending(e){var t;await(null==(t=this._callbacks.get(e))?void 0:t.pending)}emit(e,t){const n=this._callbacks.get(e)||{};if(n.pending)n.queue.enqueue(t,this.emitQueueFilter(e,t));else{const i=this.willEmit(e,t),{callbacks:r,queue:o}=n;if(null==r?void 0:r.size){const t=Array.from(r,e=>e(i));n.pending=Promise.allSettled(t).then(()=>{n.pending=null,o.isEmpty()||this.emit(e,o.dequeue())})}}}}class p2{constructor(){s(this,"next",null),this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(e,t){const n={value:e};if(t&&this.next){let e=this;for(;e.next;)t(e.next.value)?e=e.next:e.next=e.next.next;e.next=n}else this.next=n}dequeue(){const{next:e}=this;return this.next=(null==e?void 0:e.next)||null,null==e?void 0:e.value}}function m2(e){return e instanceof g2}class g2 extends f2{constructor(e){super(),s(this,"_value"),this._value=e}static value(e){return new g2(e)}static array(e){if(e.some(e=>m2(e))){const t=new g2,n=()=>{t.update(e.map(e=>m2(e)?e.value:e))};return n(),e.forEach(e=>m2(e)?e.addEventListener("value",n):0),t}return new g2(e)}get value(){return this._value}update(e,{force:t}={}){const n=function(e,t){return e!==t&&(e instanceof Date&&t instanceof Date?+e!==+t:!Array.isArray(e)||!Array.isArray(t)||function(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}(e,t))}(this._value,e)||t;return n?this.emit("value",e):this.cancel("value"),this}willEmit(e,t){return"value"===e&&(this._value=t),t}}function _2(e,t){return new y2(new v2(e),t?[t].flat():void 0)}let y2=class e extends g2{constructor(e=new v2,t=[]){if(super([]),s(this,"_resolved"),s(this,"_resolver"),s(this,"_relay"),this._resolved=this._value,this._resolver=e,this._relay=new Set,Array.isArray(t))for(const n of t)n._relay.add(this)}static intersect({cross:e=!1,empty:t=!1,include:n=[]}={}){return _2({cross:e,empty:t},n)}static union({cross:e=!1,empty:t=!1,include:n=[]}={}){return _2({cross:e,empty:t,union:!0},n)}static single({cross:e=!1,empty:t=!1,include:n=[]}={}){return _2({cross:e,empty:t,single:!0},n)}static crossfilter({empty:e=!1,include:t=[]}={}){return _2({cross:!0,empty:e},t)}clone(){const t=new e(this._resolver);return t._value=t._resolved=this._value,t}remove(e){const t=this.clone();return t._value=t._resolved=t._resolver.resolve(this._resolved,{source:e}),t._value.active={source:e},t}get resolver(){return this._resolver}get single(){return this._resolver.single}get clauses(){return super.value}get active(){return this.clauses.active}get value(){var e;return null==(e=this.active)?void 0:e.value}valueFor(e){var t;return null==(t=this.clauses.find(t=>t.source===e))?void 0:t.value}activate(e){this.emit("activate",e),this._relay.forEach(t=>t.activate(e))}update(e){return this._resolved=this._resolver.resolve(this._resolved,e,!0),this._resolved.active=e,this._relay.forEach(t=>t.update(e)),super.update(this._resolved)}reset(e){return e??(e=this._resolved),e.forEach(e=>{var t,n;return null==(n=null==(t=e.source)?void 0:t.reset)?void 0:n.call(t)}),this._resolved=this._resolved.filter(t=>!e.includes(t)),this._relay.forEach(t=>t.reset(e)),super.update(this._resolved)}willEmit(e,t){return"value"===e?(this._value=t,this.value):t}emitQueueFilter(e,t){return"value"===e?this._resolver.queueFilter(t):null}skip(e,t){return this._resolver.skip(e,t)}predicate(e=void 0,t=!1){const{clauses:n}=this,i=t?null:n.active;return this._resolver.predicate(n,i,e)}};class v2{constructor({union:e,cross:t,single:n,empty:i}={}){s(this,"union"),s(this,"cross"),s(this,"single"),s(this,"empty"),this.union=!!e,this.cross=!!t,this.single=!!n,this.empty=!!i}resolve(e,t,n=!1){const{source:i,predicate:r}=t,o=e.filter(e=>i!==e.source),s=this.single?[]:o;return this.single&&n&&o.forEach(e=>{var t,n;return null==(n=null==(t=e.source)?void 0:t.reset)?void 0:n.call(t)}),r&&s.push(t),s}skip(e,t){var n;return null!=e&&Boolean(this.cross&&(null==(n=null==t?void 0:t.clients)?void 0:n.has(e)))}predicate(e,t,n){const{empty:i,union:r}=this;if(i&&!e.length)return[h0(!1)];if(this.skip(n,t))return;const o=e.filter(e=>!this.skip(n,e)).map(e=>e.predicate);return r&&o.length>1?function(...e){return new L0(e0(e))}(o):o}queueFilter(e){var t;if(this.cross){const n=null==(t=e.active)?void 0:t.source;return e=>{var t;return(null==(t=e.active)?void 0:t.source)!==n}}return null}}class b2{constructor({uri:e="http://localhost:3000/",ipc:t}={}){s(this,"_uri"),s(this,"_ipc"),this._uri=e,this._ipc=t}async query(e){const t=fetch(this._uri,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t;if(!n.ok)throw new Error(`Query failed with HTTP status ${n.status}: ${await n.text()}`);return"exec"===e.type?t:"arrow"===e.type?$Q(await n.arrayBuffer(),this._ipc):n.json()}}function x2(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{l(i.next(e))}catch(qe){o(qe)}}function a(e){try{l(i.throw(e))}catch(qe){o(qe)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})}function w2(e){return this instanceof w2?(this.v=e,this):new w2(e)}function S2(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),i[Symbol.asyncIterator]=function(){return this},i;function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,i){o.push([e,t,n,i])>1||a(e,t)})},t&&(i[e]=t(i[e])))}function a(e,t){try{!function(e){e.value instanceof w2?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(r[e](t))}catch(qe){u(o[0][3],qe)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function E2(e){var t,n;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:w2(e[i](t)),done:!1}:r?r(t):t}:r}}function C2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,r){!function(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)}(i,r,(t=e[n](t)).done,t.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const T2=new TextDecoder("utf-8"),k2=e=>T2.decode(e),A2=new TextEncoder,I2=e=>A2.encode(e),P2=e=>"boolean"==typeof e,L2=e=>"function"==typeof e,R2=e=>null!=e&&Object(e)===e,O2=e=>R2(e)&&L2(e.then),M2=e=>R2(e)&&L2(e[Symbol.iterator]),D2=e=>R2(e)&&L2(e[Symbol.asyncIterator]),N2=e=>R2(e)&&R2(e.schema),F2=e=>R2(e)&&"done"in e&&"value"in e,B2=e=>R2(e)&&L2(e.stat)&&(e=>"number"==typeof e)(e.fd),z2=e=>R2(e)&&j2(e.body),U2=e=>"_getDOMStream"in e&&"_getNodeStream"in e,j2=e=>R2(e)&&L2(e.cancel)&&L2(e.getReader)&&!U2(e),V2=e=>R2(e)&&L2(e.read)&&L2(e.pipe)&&P2(e.readable)&&!U2(e),H2="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function W2(e,t,n=0,i=t.byteLength){const r=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,r),s=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return o.set(s,n),e}function $2(e,t){const n=function(e){const t=e[0]?[e[0]]:[];let n,i,r,o;for(let s,a,l=0,c=0,u=e.length;++l<u;)s=t[c],a=e[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset?a&&(t[++c]=a):(({byteOffset:n,byteLength:r}=s),({byteOffset:i,byteLength:o}=a),n+r<i||i+o<n?a&&(t[++c]=a):t[c]=new Uint8Array(s.buffer,n,i-n+o));return t}(e),i=n.reduce((e,t)=>e+t.byteLength,0);let r,o,s,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,i);for(const u=n.length;++l<u;){if(r=n[l],o=r.subarray(0,Math.min(r.length,c-a)),c<=a+o.length){o.length<r.length?n[l]=r.subarray(o.length):o.length===r.length&&l++,s?W2(s,o,a):s=o;break}W2(s||(s=new Uint8Array(c)),o,a),a+=o.length}return[s||new Uint8Array(0),n.slice(l),i-(s?s.byteLength:0)]}function G2(e,t){let n=F2(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=I2(n)),n instanceof ArrayBuffer||n instanceof H2?new e(n):R2(i=n)&&L2(i.clear)&&L2(i.bytes)&&L2(i.position)&&L2(i.setPosition)&&L2(i.capacity)&&L2(i.getBufferIdentifier)&&L2(i.createLong)?G2(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0);var i}const q2=e=>G2(Int32Array,e),Y2=e=>G2(BigInt64Array,e),X2=e=>G2(Uint8Array,e),K2=e=>(e.next(),e);function Z2(e,t){return S2(this,arguments,function*(){if(O2(t))return yield w2(yield w2(yield*E2(C2(Z2(e,yield w2(t))))));const n=function(e){return S2(this,arguments,function*(){yield yield w2(yield w2(e))})},i="string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof H2?n(t):M2(t)?function(e){return S2(this,arguments,function*(){yield w2(yield*E2(C2(K2(function*(e){let t=null;do{t=e.next(yield null==t?void 0:t.value)}while(!t.done)}(e[Symbol.iterator]())))))})}(t):D2(t)?t:n(t);return yield w2(yield*E2(C2(K2(function(t){return S2(this,arguments,function*(){let n=null;do{n=yield w2(t.next(yield yield w2(G2(e,n))))}while(!n.done)})}(i[Symbol.asyncIterator]()))))),yield w2(new e)})}const Q2=e=>Z2(Uint8Array,e);function J2(e,t,n){if(0!==e)for(let i=-1,r=(n=n.slice(0,t)).length;++i<r;)n[i]+=e;return n.subarray(0,t)}const e3={fromIterable:e=>t3(function*(e){let t,n,i,r,o=!1,s=[],a=0;function l(){return"peek"===i?$2(s,r)[0]:([n,s,a]=$2(s,r),n)}({cmd:i,size:r}=(yield(()=>null)())||{cmd:"read",size:0});const c=(u=e,function*(e,t){const n=function*(e){yield e},i="string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof H2?n(t):M2(t)?t:n(t);return yield*K2(function*(t){let n=null;do{n=t.next(yield G2(e,n))}while(!n.done)}(i[Symbol.iterator]())),new e}(Uint8Array,u))[Symbol.iterator]();var u;try{do{if(({done:t,value:n}=Number.isNaN(r-a)?c.next():c.next(r-a)),!t&&n.byteLength>0&&(s.push(n),a+=n.byteLength),t||r<=a)do{({cmd:i,size:r}=yield l())}while(r<a)}while(!t)}catch(qe){(o=!0)&&"function"==typeof c.throw&&c.throw(qe)}finally{!1===o&&"function"==typeof c.return&&c.return(null)}return null}(e)),fromAsyncIterable:e=>t3(function(e){return S2(this,arguments,function*(){let t,n,i,r,o=!1,s=[],a=0;function l(){return"peek"===i?$2(s,r)[0]:([n,s,a]=$2(s,r),n)}({cmd:i,size:r}=(yield yield w2((()=>null)()))||{cmd:"read",size:0});const c=Q2(e)[Symbol.asyncIterator]();try{do{if(({done:t,value:n}=Number.isNaN(r-a)?yield w2(c.next()):yield w2(c.next(r-a))),!t&&n.byteLength>0&&(s.push(n),a+=n.byteLength),t||r<=a)do{({cmd:i,size:r}=yield yield w2(l()))}while(r<a)}while(!t)}catch(qe){(o=!0)&&"function"==typeof c.throw&&(yield w2(c.throw(qe)))}finally{!1===o&&"function"==typeof c.return&&(yield w2(c.return(new Uint8Array(0))))}return yield w2(null)})}(e)),fromDOMStream:e=>t3(function(e){return S2(this,arguments,function*(){let t,n,i,r=!1,o=!1,s=[],a=0;function l(){return"peek"===n?$2(s,i)[0]:([t,s,a]=$2(s,i),t)}({cmd:n,size:i}=(yield yield w2((()=>null)()))||{cmd:"read",size:0});const c=new n3(e);try{do{if(({done:r,value:t}=Number.isNaN(i-a)?yield w2(c.read()):yield w2(c.read(i-a))),!r&&t.byteLength>0&&(s.push(X2(t)),a+=t.byteLength),r||i<=a)do{({cmd:n,size:i}=yield yield w2(l()))}while(i<a)}while(!r)}catch(qe){(o=!0)&&(yield w2(c.cancel(qe)))}finally{!1===o?yield w2(c.cancel()):e.locked&&c.releaseLock()}return yield w2(null)})}(e)),fromNodeStream:e=>t3(function(e){return S2(this,arguments,function*(){const t=[];let n,i,r,o="error",s=!1,a=null,l=0,c=[];function u(){return"peek"===n?$2(c,i)[0]:([r,c,l]=$2(c,i),r)}if(({cmd:n,size:i}=(yield yield w2((()=>null)()))||{cmd:"read",size:0}),e.isTTY)return yield yield w2(new Uint8Array(0)),yield w2(null);try{t[0]=i3(e,"end"),t[1]=i3(e,"error");do{if(t[2]=i3(e,"readable"),[o,a]=yield w2(Promise.race(t.map(e=>e[2]))),"error"===o)break;if((s="end"===o)||(Number.isFinite(i-l)?(r=X2(e.read(i-l)),r.byteLength<i-l&&(r=X2(e.read()))):r=X2(e.read()),r.byteLength>0&&(c.push(r),l+=r.byteLength)),s||i<=l)do{({cmd:n,size:i}=yield yield w2(u()))}while(i<l)}while(!s)}finally{yield w2((d=t,h="error"===o?a:null,r=c=null,new Promise((t,n)=>{for(const[i,r]of d)e.off(i,r);try{const t=e.destroy;t&&t.call(e,h),h=void 0}catch(qe){h=qe||h}finally{null!=h?n(h):t()}})))}var d,h;return yield w2(null)})}(e)),toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},t3=e=>(e.next(),e);class n3{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return x2(this,void 0,void 0,function*(){const{reader:t,source:n}=this;t&&(yield t.cancel(e).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(e){return x2(this,void 0,void 0,function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=X2(t)),t})}}const i3=(e,t)=>{const n=e=>i([t,e]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};var r3,o3,s3,a3,l3,c3,u3,d3,h3,f3,p3,m3;(o3=r3||(r3={}))[o3.V1=0]="V1",o3[o3.V2=1]="V2",o3[o3.V3=2]="V3",o3[o3.V4=3]="V4",o3[o3.V5=4]="V5",(a3=s3||(s3={}))[a3.Sparse=0]="Sparse",a3[a3.Dense=1]="Dense",(c3=l3||(l3={}))[c3.HALF=0]="HALF",c3[c3.SINGLE=1]="SINGLE",c3[c3.DOUBLE=2]="DOUBLE",(d3=u3||(u3={}))[d3.DAY=0]="DAY",d3[d3.MILLISECOND=1]="MILLISECOND",(f3=h3||(h3={}))[f3.SECOND=0]="SECOND",f3[f3.MILLISECOND=1]="MILLISECOND",f3[f3.MICROSECOND=2]="MICROSECOND",f3[f3.NANOSECOND=3]="NANOSECOND",(m3=p3||(p3={}))[m3.YEAR_MONTH=0]="YEAR_MONTH",m3[m3.DAY_TIME=1]="DAY_TIME",m3[m3.MONTH_DAY_NANO=2]="MONTH_DAY_NANO";const g3=new Int32Array(2),_3=new Float32Array(g3.buffer),y3=new Float64Array(g3.buffer),v3=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var b3,x3;(x3=b3||(b3={}))[x3.UTF8_BYTES=1]="UTF8_BYTES",x3[x3.UTF16_STRING=2]="UTF16_STRING";let w3=class e{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new e(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return g3[0]=this.readInt32(e),_3[0]}readFloat64(e){return g3[v3?0:1]=this.readInt32(e),g3[v3?1:0]=this.readInt32(e+4),y3[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){_3[0]=t,this.writeInt32(e,g3[0])}writeFloat64(e,t){y3[0]=t,this.writeInt32(e,g3[v3?0:1]),this.writeInt32(e+4,g3[v3?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);e+=4;const i=this.bytes_.subarray(e,e+n);return t===b3.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createScalarList(e,t){const n=[];for(let i=0;i<t;++i){const t=e(i);null!==t&&n.push(t)}return n}createObjList(e,t){const n=[];for(let i=0;i<t;++i){const t=e(i);null!==t&&n.push(t.unpack())}return n}},S3=class e{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=w3.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=1+~(this.bb.capacity()-this.space+n)&t-1;for(;this.space<i+t+n;){const t=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,n){(this.force_defaults||t!==n)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,n){t!=n&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=t<<1,i=w3.allocate(n);return i.setPosition(n-t),i.bytes().set(e.bytes(),n-t),i}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);const n=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const o=this.space;e:for(t=0;t<this.vtables.length;t++){const e=this.bb.capacity()-this.vtables[t];if(i==this.bb.readInt16(e)){for(let t=2;t<i;t+=2)if(this.bb.readInt16(o+t)!=this.bb.readInt16(e+t))continue e;r=this.vtables[t];break}}return r?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,r-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,n){const i=n?4:0;if(t){const e=t;if(this.prep(this.minalign,8+i),4!=e.length)throw new TypeError("FlatBuffers: file identifier must be length 4");for(let t=3;t>=0;t--)this.writeInt8(e.charCodeAt(t))}this.prep(this.minalign,4+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const n=this.bb.capacity()-e,i=n-this.bb.readInt32(n);if(!(t<this.bb.readInt16(i)&&0!=this.bb.readInt16(i+t)))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(n,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(null==e)return 0;let t;return t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return null==e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let n=0;n<e.length;++n){const i=e[n];if(null===i)throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(i))}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var E3,C3,T3,k3;(C3=E3||(E3={}))[C3.BUFFER=0]="BUFFER",(k3=T3||(T3={}))[k3.LZ4_FRAME=0]="LZ4_FRAME",k3[k3.ZSTD=1]="ZSTD";class A3{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new A3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+4),(t||new A3).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):T3.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):E3.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,T3.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,E3.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,n){return A3.startBodyCompression(e),A3.addCodec(e,t),A3.addMethod(e,n),A3.endBodyCompression(e)}}let I3=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,n){return e.prep(8,16),e.writeInt64(BigInt(null!=n?n:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}},P3=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,n){return e.prep(8,16),e.writeInt64(BigInt(null!=n?n:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}},L3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new P3).__init(this.bb.__vector(this.bb_pos+n)+16*e,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new I3).__init(this.bb.__vector(this.bb_pos+n)+16*e,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new A3).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}},R3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new L3).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}};var O3,M3,D3,N3;(M3=O3||(O3={}))[M3.Little=0]="Little",M3[M3.Big=1]="Big",(N3=D3||(D3={}))[N3.DenseArray=0]="DenseArray";class F3{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new F3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+4),(t||new F3).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,n){return F3.startInt(e),F3.addBitWidth(e,t),F3.addIsSigned(e,n),F3.endInt(e)}}class B3{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new B3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+4),(t||new B3).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new F3).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):D3.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,D3.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class z3{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new z3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+4),(t||new z3).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,n){return z3.startKeyValue(e),z3.addKey(e,t),z3.addValue(e,n),z3.endKeyValue(e)}}let U3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}},j3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}},V3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):u3.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,u3.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(t,n){return e.startDate(t),e.addUnit(t,n),e.endDate(t)}},H3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(t,n,i,r){return e.startDecimal(t),e.addPrecision(t,n),e.addScale(t,i),e.addBitWidth(t,r),e.endDecimal(t)}},W3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDuration(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):h3.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,h3.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(t,n){return e.startDuration(t),e.addUnit(t,n),e.endDuration(t)}},$3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(t,n){return e.startFixedSizeBinary(t),e.addByteWidth(t,n),e.endFixedSizeBinary(t)}},G3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(t,n){return e.startFixedSizeList(t),e.addListSize(t,n),e.endFixedSizeList(t)}};class q3{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new q3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+4),(t||new q3).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):l3.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,l3.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return q3.startFloatingPoint(e),q3.addPrecision(e,t),q3.endFloatingPoint(e)}}class Y3{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new Y3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+4),(t||new Y3).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):p3.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,p3.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return Y3.startInterval(e),Y3.addUnit(e,t),Y3.endInterval(e)}}let X3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}},K3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}},Z3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(t){return e.startList(t),e.endList(t)}},Q3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(t,n){return e.startMap(t),e.addKeysSorted(t,n),e.endMap(t)}},J3=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}};class e4{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new e4).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+4),(t||new e4).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return e4.startStruct_(e),e4.endStruct_(e)}}class t4{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new t4).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+4),(t||new t4).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):h3.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,h3.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,n){return t4.startTime(e),t4.addUnit(e,t),t4.addBitWidth(e,n),t4.endTime(e)}}class n4{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new n4).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+4),(t||new n4).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):h3.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,h3.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,n){return n4.startTimestamp(e),n4.addUnit(e,t),n4.addTimezone(e,n),n4.endTimestamp(e)}}class i4{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new i4).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+4),(t||new i4).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):s3.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,s3.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,n){return i4.startUnion(e),i4.addMode(e,t),i4.addTypeIds(e,n),i4.endUnion(e)}}let r4=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}};var o4,s4;(s4=o4||(o4={}))[s4.NONE=0]="NONE",s4[s4.Null=1]="Null",s4[s4.Int=2]="Int",s4[s4.FloatingPoint=3]="FloatingPoint",s4[s4.Binary=4]="Binary",s4[s4.Utf8=5]="Utf8",s4[s4.Bool=6]="Bool",s4[s4.Decimal=7]="Decimal",s4[s4.Date=8]="Date",s4[s4.Time=9]="Time",s4[s4.Timestamp=10]="Timestamp",s4[s4.Interval=11]="Interval",s4[s4.List=12]="List",s4[s4.Struct_=13]="Struct_",s4[s4.Union=14]="Union",s4[s4.FixedSizeBinary=15]="FixedSizeBinary",s4[s4.FixedSizeList=16]="FixedSizeList",s4[s4.Map=17]="Map",s4[s4.Duration=18]="Duration",s4[s4.LargeBinary=19]="LargeBinary",s4[s4.LargeUtf8=20]="LargeUtf8",s4[s4.LargeList=21]="LargeList",s4[s4.RunEndEncoded=22]="RunEndEncoded";let a4=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):o4.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new B3).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,16);return n?(t||new z3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,o4.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}},l4=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):O3.Little}fields(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new a4).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new z3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,O3.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(t,n,i,r,o){return e.startSchema(t),e.addEndianness(t,n),e.addFields(t,i),e.addCustomMetadata(t,r),e.addFeatures(t,o),e.endSchema(t)}};var c4,u4,d4,h4,f4;function p4(e){if(null===e)return"null";if(void 0===e)return"undefined";switch(typeof e){case"number":case"bigint":return`${e}`;case"string":return`"${e}"`}return"function"==typeof e[Symbol.toPrimitive]?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(e=>p4(e))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(e,t)=>"bigint"==typeof t?`${t}`:t)}function m4(e){if("bigint"==typeof e&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function g4(e,t){return m4(e/t)+m4(e%t)/m4(t)}(u4=c4||(c4={}))[u4.NONE=0]="NONE",u4[u4.Schema=1]="Schema",u4[u4.DictionaryBatch=2]="DictionaryBatch",u4[u4.RecordBatch=3]="RecordBatch",u4[u4.Tensor=4]="Tensor",u4[u4.SparseTensor=5]="SparseTensor",function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"}(d4||(d4={})),(f4=h4||(h4={}))[f4.OFFSET=0]="OFFSET",f4[f4.DATA=1]="DATA",f4[f4.VALIDITY=2]="VALIDITY",f4[f4.TYPE=3]="TYPE";const _4=Symbol.for("isArrowBigNum");function y4(e,...t){return 0===t.length?Object.setPrototypeOf(G2(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}function v4(...e){return y4.apply(this,e)}function b4(...e){return y4.apply(this,e)}function x4(...e){return y4.apply(this,e)}y4.prototype[_4]=!0,y4.prototype.toJSON=function(){return`"${E4(this)}"`},y4.prototype.valueOf=function(e){return S4(this,e)},y4.prototype.toString=function(){return E4(this)},y4.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return S4(this);case"string":return E4(this);case"default":return function(e){return 8===e.byteLength?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:E4(e)}(this)}return E4(this)},Object.setPrototypeOf(v4.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(b4.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(x4.prototype,Object.create(Uint32Array.prototype)),Object.assign(v4.prototype,y4.prototype,{constructor:v4,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(b4.prototype,y4.prototype,{constructor:b4,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(x4.prototype,y4.prototype,{constructor:x4,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const w4=BigInt(4294967296)*BigInt(4294967296)-BigInt(1);function S4(e,t){const{buffer:n,byteOffset:i,byteLength:r,signed:o}=e,s=new BigUint64Array(n,i,r/8),a=o&&s.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),c=0;if(a){for(const e of s)l|=(e^w4)*(BigInt(1)<<BigInt(64*c++));l*=BigInt(-1),l-=BigInt(1)}else for(const u of s)l|=u*(BigInt(1)<<BigInt(64*c++));if("number"==typeof t){const e=BigInt(Math.pow(10,t)),n=l%e;return m4(l/e)+m4(n)/m4(e)}return m4(l)}function E4(e){if(8===e.byteLength)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return C4(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return C4(e);t=t.slice();let n=1;for(let i=0;i<t.length;i++){const e=t[i],r=~e+n;t[i]=r,n&=0===e?1:0}return`-${C4(t)}`}function C4(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const s=i.length-1;do{for(n[0]=i[o=0];o<s;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return null!=t?t:"0"}class T4{static new(e,t){switch(t){case!0:return new v4(e);case!1:return new b4(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new v4(e)}return 16===e.byteLength?new x4(e):new b4(e)}static signed(e){return new v4(e)}static unsigned(e){return new b4(e)}static decimal(e){return new x4(e)}constructor(e,t){return T4.new(e,t)}}var k4,A4,I4,P4,L4,R4,O4,M4,D4,N4,F4,B4,z4,U4,j4,V4,H4,W4,$4,G4,q4,Y4,X4;class K4{static isNull(e){return(null==e?void 0:e.typeId)===d4.Null}static isInt(e){return(null==e?void 0:e.typeId)===d4.Int}static isFloat(e){return(null==e?void 0:e.typeId)===d4.Float}static isBinary(e){return(null==e?void 0:e.typeId)===d4.Binary}static isLargeBinary(e){return(null==e?void 0:e.typeId)===d4.LargeBinary}static isUtf8(e){return(null==e?void 0:e.typeId)===d4.Utf8}static isLargeUtf8(e){return(null==e?void 0:e.typeId)===d4.LargeUtf8}static isBool(e){return(null==e?void 0:e.typeId)===d4.Bool}static isDecimal(e){return(null==e?void 0:e.typeId)===d4.Decimal}static isDate(e){return(null==e?void 0:e.typeId)===d4.Date}static isTime(e){return(null==e?void 0:e.typeId)===d4.Time}static isTimestamp(e){return(null==e?void 0:e.typeId)===d4.Timestamp}static isInterval(e){return(null==e?void 0:e.typeId)===d4.Interval}static isDuration(e){return(null==e?void 0:e.typeId)===d4.Duration}static isList(e){return(null==e?void 0:e.typeId)===d4.List}static isStruct(e){return(null==e?void 0:e.typeId)===d4.Struct}static isUnion(e){return(null==e?void 0:e.typeId)===d4.Union}static isFixedSizeBinary(e){return(null==e?void 0:e.typeId)===d4.FixedSizeBinary}static isFixedSizeList(e){return(null==e?void 0:e.typeId)===d4.FixedSizeList}static isMap(e){return(null==e?void 0:e.typeId)===d4.Map}static isDictionary(e){return(null==e?void 0:e.typeId)===d4.Dictionary}static isDenseUnion(e){return K4.isUnion(e)&&e.mode===s3.Dense}static isSparseUnion(e){return K4.isUnion(e)&&e.mode===s3.Sparse}constructor(e){this.typeId=e}}k4=Symbol.toStringTag,K4[k4]=((X4=K4.prototype).children=null,X4.ArrayType=Array,X4.OffsetArrayType=Int32Array,X4[Symbol.toStringTag]="DataType");class Z4 extends K4{constructor(){super(d4.Null)}toString(){return"Null"}}A4=Symbol.toStringTag,Z4[A4]=Z4.prototype[Symbol.toStringTag]="Null";class Q4 extends K4{constructor(e,t){super(d4.Int),this.isSigned=e,this.bitWidth=t}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}I4=Symbol.toStringTag,Q4[I4]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Q4.prototype);class J4 extends Q4{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class e5 extends Q4{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class t5 extends Q4{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let n5=class extends Q4{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}};class i5 extends Q4{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class r5 extends Q4{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class o5 extends Q4{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let s5=class extends Q4{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};Object.defineProperty(J4.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(e5.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(t5.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(n5.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(i5.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(r5.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(o5.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(s5.prototype,"ArrayType",{value:BigUint64Array});class a5 extends K4{constructor(e){super(d4.Float),this.precision=e}get ArrayType(){switch(this.precision){case l3.HALF:return Uint16Array;case l3.SINGLE:return Float32Array;case l3.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}P4=Symbol.toStringTag,a5[P4]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(a5.prototype);class l5 extends a5{constructor(){super(l3.SINGLE)}}class c5 extends a5{constructor(){super(l3.DOUBLE)}}Object.defineProperty(l5.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(c5.prototype,"ArrayType",{value:Float64Array});class u5 extends K4{constructor(){super(d4.Binary)}toString(){return"Binary"}}L4=Symbol.toStringTag,u5[L4]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(u5.prototype);class d5 extends K4{constructor(){super(d4.LargeBinary)}toString(){return"LargeBinary"}}R4=Symbol.toStringTag,d5[R4]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(d5.prototype);class h5 extends K4{constructor(){super(d4.Utf8)}toString(){return"Utf8"}}O4=Symbol.toStringTag,h5[O4]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(h5.prototype);class f5 extends K4{constructor(){super(d4.LargeUtf8)}toString(){return"LargeUtf8"}}M4=Symbol.toStringTag,f5[M4]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(f5.prototype);class p5 extends K4{constructor(){super(d4.Bool)}toString(){return"Bool"}}D4=Symbol.toStringTag,p5[D4]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(p5.prototype);class m5 extends K4{constructor(e,t,n=128){super(d4.Decimal),this.scale=e,this.precision=t,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}N4=Symbol.toStringTag,m5[N4]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(m5.prototype);class g5 extends K4{constructor(e){super(d4.Date),this.unit=e}toString(){return`Date${32*(this.unit+1)}<${u3[this.unit]}>`}get ArrayType(){return this.unit===u3.DAY?Int32Array:BigInt64Array}}F4=Symbol.toStringTag,g5[F4]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(g5.prototype);class _5 extends K4{constructor(e,t){super(d4.Time),this.unit=e,this.bitWidth=t}toString(){return`Time${this.bitWidth}<${h3[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}B4=Symbol.toStringTag,_5[B4]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(_5.prototype);class y5 extends K4{constructor(e,t){super(d4.Timestamp),this.unit=e,this.timezone=t}toString(){return`Timestamp<${h3[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}z4=Symbol.toStringTag,y5[z4]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(y5.prototype);class v5 extends y5{constructor(e){super(h3.MILLISECOND,e)}}class b5 extends K4{constructor(e){super(d4.Interval),this.unit=e}toString(){return`Interval<${p3[this.unit]}>`}}U4=Symbol.toStringTag,b5[U4]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(b5.prototype);class x5 extends K4{constructor(e){super(d4.Duration),this.unit=e}toString(){return`Duration<${h3[this.unit]}>`}}j4=Symbol.toStringTag,x5[j4]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(x5.prototype);class w5 extends K4{constructor(e){super(d4.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}V4=Symbol.toStringTag,w5[V4]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(w5.prototype);class S5 extends K4{constructor(e){super(d4.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}H4=Symbol.toStringTag,S5[H4]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(S5.prototype);class E5 extends K4{constructor(e,t,n){super(d4.Union),this.mode=e,this.children=n,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((e,t,n)=>(e[t]=n)&&e||e,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}W4=Symbol.toStringTag,E5[W4]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(E5.prototype);class C5 extends K4{constructor(e){super(d4.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}$4=Symbol.toStringTag,C5[$4]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(C5.prototype);class T5 extends K4{constructor(e,t){super(d4.FixedSizeList),this.listSize=e,this.children=[t]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}G4=Symbol.toStringTag,T5[G4]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(T5.prototype);class k5 extends K4{constructor(e,t=!1){var n,i,r;if(super(d4.Map),this.children=[e],this.keysSorted=t,e&&(e.name="entries",null===(n=null==e?void 0:e.type)||void 0===n?void 0:n.children)){const t=null===(i=null==e?void 0:e.type)||void 0===i?void 0:i.children[0];t&&(t.name="key");const n=null===(r=null==e?void 0:e.type)||void 0===r?void 0:r.children[1];n&&(n.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}q4=Symbol.toStringTag,k5[q4]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(k5.prototype);const A5=(e=>()=>++e)(-1);class I5 extends K4{constructor(e,t,n,i){super(d4.Dictionary),this.indices=t,this.dictionary=e,this.isOrdered=i||!1,this.id=null==n?A5():m4(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function P5(e){const t=e;switch(e.typeId){case d4.Decimal:return e.bitWidth/32;case d4.Interval:return 1+t.unit;case d4.FixedSizeList:return t.listSize;case d4.FixedSizeBinary:return t.byteWidth;default:return 1}}Y4=Symbol.toStringTag,I5[Y4]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(I5.prototype);class L5{visitMany(e,...t){return e.map((e,n)=>this.visit(e,...t.map(e=>e[n])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return function(e,t,n=!0){return"number"==typeof t?R5(e,t,n):"string"==typeof t&&t in d4?R5(e,d4[t],n):t&&t instanceof K4?R5(e,O5(t),n):(null==t?void 0:t.type)&&t.type instanceof K4?R5(e,O5(t.type),n):R5(e,d4.NONE,n)}(this,e,t)}getVisitFnByTypeId(e,t=!0){return R5(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitLargeUtf8(e,...t){return null}visitBinary(e,...t){return null}visitLargeBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitDuration(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function R5(e,t,n=!0){let i=null;switch(t){case d4.Null:i=e.visitNull;break;case d4.Bool:i=e.visitBool;break;case d4.Int:i=e.visitInt;break;case d4.Int8:i=e.visitInt8||e.visitInt;break;case d4.Int16:i=e.visitInt16||e.visitInt;break;case d4.Int32:i=e.visitInt32||e.visitInt;break;case d4.Int64:i=e.visitInt64||e.visitInt;break;case d4.Uint8:i=e.visitUint8||e.visitInt;break;case d4.Uint16:i=e.visitUint16||e.visitInt;break;case d4.Uint32:i=e.visitUint32||e.visitInt;break;case d4.Uint64:i=e.visitUint64||e.visitInt;break;case d4.Float:i=e.visitFloat;break;case d4.Float16:i=e.visitFloat16||e.visitFloat;break;case d4.Float32:i=e.visitFloat32||e.visitFloat;break;case d4.Float64:i=e.visitFloat64||e.visitFloat;break;case d4.Utf8:i=e.visitUtf8;break;case d4.LargeUtf8:i=e.visitLargeUtf8;break;case d4.Binary:i=e.visitBinary;break;case d4.LargeBinary:i=e.visitLargeBinary;break;case d4.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case d4.Date:i=e.visitDate;break;case d4.DateDay:i=e.visitDateDay||e.visitDate;break;case d4.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case d4.Timestamp:i=e.visitTimestamp;break;case d4.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case d4.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case d4.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case d4.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case d4.Time:i=e.visitTime;break;case d4.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case d4.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case d4.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case d4.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case d4.Decimal:i=e.visitDecimal;break;case d4.List:i=e.visitList;break;case d4.Struct:i=e.visitStruct;break;case d4.Union:i=e.visitUnion;break;case d4.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case d4.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case d4.Dictionary:i=e.visitDictionary;break;case d4.Interval:i=e.visitInterval;break;case d4.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case d4.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case d4.Duration:i=e.visitDuration;break;case d4.DurationSecond:i=e.visitDurationSecond||e.visitDuration;break;case d4.DurationMillisecond:i=e.visitDurationMillisecond||e.visitDuration;break;case d4.DurationMicrosecond:i=e.visitDurationMicrosecond||e.visitDuration;break;case d4.DurationNanosecond:i=e.visitDurationNanosecond||e.visitDuration;break;case d4.FixedSizeList:i=e.visitFixedSizeList;break;case d4.Map:i=e.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${d4[t]}'`)}function O5(e){switch(e.typeId){case d4.Null:return d4.Null;case d4.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?d4.Int8:d4.Uint8;case 16:return n?d4.Int16:d4.Uint16;case 32:return n?d4.Int32:d4.Uint32;case 64:return n?d4.Int64:d4.Uint64}return d4.Int}case d4.Float:switch(e.precision){case l3.HALF:return d4.Float16;case l3.SINGLE:return d4.Float32;case l3.DOUBLE:return d4.Float64}return d4.Float;case d4.Binary:return d4.Binary;case d4.LargeBinary:return d4.LargeBinary;case d4.Utf8:return d4.Utf8;case d4.LargeUtf8:return d4.LargeUtf8;case d4.Bool:return d4.Bool;case d4.Decimal:return d4.Decimal;case d4.Time:switch(e.unit){case h3.SECOND:return d4.TimeSecond;case h3.MILLISECOND:return d4.TimeMillisecond;case h3.MICROSECOND:return d4.TimeMicrosecond;case h3.NANOSECOND:return d4.TimeNanosecond}return d4.Time;case d4.Timestamp:switch(e.unit){case h3.SECOND:return d4.TimestampSecond;case h3.MILLISECOND:return d4.TimestampMillisecond;case h3.MICROSECOND:return d4.TimestampMicrosecond;case h3.NANOSECOND:return d4.TimestampNanosecond}return d4.Timestamp;case d4.Date:switch(e.unit){case u3.DAY:return d4.DateDay;case u3.MILLISECOND:return d4.DateMillisecond}return d4.Date;case d4.Interval:switch(e.unit){case p3.DAY_TIME:return d4.IntervalDayTime;case p3.YEAR_MONTH:return d4.IntervalYearMonth}return d4.Interval;case d4.Duration:switch(e.unit){case h3.SECOND:return d4.DurationSecond;case h3.MILLISECOND:return d4.DurationMillisecond;case h3.MICROSECOND:return d4.DurationMicrosecond;case h3.NANOSECOND:return d4.DurationNanosecond}return d4.Duration;case d4.Map:return d4.Map;case d4.List:return d4.List;case d4.Struct:return d4.Struct;case d4.Union:switch(e.mode){case s3.Dense:return d4.DenseUnion;case s3.Sparse:return d4.SparseUnion}return d4.Union;case d4.FixedSizeBinary:return d4.FixedSizeBinary;case d4.FixedSizeList:return d4.FixedSizeList;case d4.Dictionary:return d4.Dictionary}throw new Error(`Unrecognized type '${d4[e.typeId]}'`)}L5.prototype.visitInt8=null,L5.prototype.visitInt16=null,L5.prototype.visitInt32=null,L5.prototype.visitInt64=null,L5.prototype.visitUint8=null,L5.prototype.visitUint16=null,L5.prototype.visitUint32=null,L5.prototype.visitUint64=null,L5.prototype.visitFloat16=null,L5.prototype.visitFloat32=null,L5.prototype.visitFloat64=null,L5.prototype.visitDateDay=null,L5.prototype.visitDateMillisecond=null,L5.prototype.visitTimestampSecond=null,L5.prototype.visitTimestampMillisecond=null,L5.prototype.visitTimestampMicrosecond=null,L5.prototype.visitTimestampNanosecond=null,L5.prototype.visitTimeSecond=null,L5.prototype.visitTimeMillisecond=null,L5.prototype.visitTimeMicrosecond=null,L5.prototype.visitTimeNanosecond=null,L5.prototype.visitDenseUnion=null,L5.prototype.visitSparseUnion=null,L5.prototype.visitIntervalDayTime=null,L5.prototype.visitIntervalYearMonth=null,L5.prototype.visitDuration=null,L5.prototype.visitDurationSecond=null,L5.prototype.visitDurationMillisecond=null,L5.prototype.visitDurationMicrosecond=null,L5.prototype.visitDurationNanosecond=null;const M5=new Float64Array(1),D5=new Uint32Array(M5.buffer);function N5(e){const t=(31744&e)>>10,n=(1023&e)/1024,i=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function F5(e){if(e!=e)return 32256;M5[0]=e;const t=(2147483648&D5[1])>>16&65535;let n=2146435072&D5[1],i=0;return n>=1089470464?D5[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&D5[1])>>10):n<=1056964608?(i=1048576+(1048575&D5[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&D5[1])>>10),t|n|65535&i}class B5 extends L5{}function z5(e){return(t,n,i)=>{if(t.setValid(n,null!=i))return e(t,n,i)}}const U5=(e,t,n,i)=>{if(n+1<t.length){const r=m4(t[n]),o=m4(t[n+1]);e.set(i.subarray(0,o-r),r)}},j5=({values:e},t,n)=>{e[t]=n},V5=({values:e},t,n)=>{e[t]=n},H5=({values:e},t,n)=>{e[t]=F5(n)},W5=({values:e},t,n)=>{((e,t,n)=>{e[t]=Math.floor(n/864e5)})(e,t,n.valueOf())},$5=({values:e},t,n)=>{e[t]=BigInt(n)},G5=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},q5=({values:e,valueOffsets:t},n,i)=>U5(e,t,n,i),Y5=({values:e,valueOffsets:t},n,i)=>U5(e,t,n,I2(i)),X5=(e,t,n)=>{e.type.unit===u3.DAY?W5(e,t,n):$5(e,t,n)},K5=({values:e},t,n)=>{e[t]=BigInt(n/1e3)},Z5=({values:e},t,n)=>{e[t]=BigInt(n)},Q5=({values:e},t,n)=>{e[t]=BigInt(1e3*n)},J5=({values:e},t,n)=>{e[t]=BigInt(1e6*n)},e6=(e,t,n)=>{switch(e.type.unit){case h3.SECOND:return K5(e,t,n);case h3.MILLISECOND:return Z5(e,t,n);case h3.MICROSECOND:return Q5(e,t,n);case h3.NANOSECOND:return J5(e,t,n)}},t6=({values:e},t,n)=>{e[t]=n},n6=({values:e},t,n)=>{e[t]=n},i6=({values:e},t,n)=>{e[t]=n},r6=({values:e},t,n)=>{e[t]=n},o6=(e,t,n)=>{switch(e.type.unit){case h3.SECOND:return t6(e,t,n);case h3.MILLISECOND:return n6(e,t,n);case h3.MICROSECOND:return i6(e,t,n);case h3.NANOSECOND:return r6(e,t,n)}},s6=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},a6=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];_6.visit(r,e.valueOffsets[t],n)},l6=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];_6.visit(r,t,n)},c6=(e,t,n)=>{e.type.unit===p3.DAY_TIME?u6(e,t,n):d6(e,t,n)},u6=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},d6=({values:e},t,n)=>{e[t]=12*n[0]+n[1]%12},h6=({values:e},t,n)=>{e[t]=n},f6=({values:e},t,n)=>{e[t]=n},p6=({values:e},t,n)=>{e[t]=n},m6=({values:e},t,n)=>{e[t]=n},g6=(e,t,n)=>{switch(e.type.unit){case h3.SECOND:return h6(e,t,n);case h3.MILLISECOND:return f6(e,t,n);case h3.MICROSECOND:return p6(e,t,n);case h3.NANOSECOND:return m6(e,t,n)}};B5.prototype.visitBool=z5(({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)}),B5.prototype.visitInt=z5(j5),B5.prototype.visitInt8=z5(j5),B5.prototype.visitInt16=z5(j5),B5.prototype.visitInt32=z5(j5),B5.prototype.visitInt64=z5(j5),B5.prototype.visitUint8=z5(j5),B5.prototype.visitUint16=z5(j5),B5.prototype.visitUint32=z5(j5),B5.prototype.visitUint64=z5(j5),B5.prototype.visitFloat=z5((e,t,n)=>{switch(e.type.precision){case l3.HALF:return H5(e,t,n);case l3.SINGLE:case l3.DOUBLE:return V5(e,t,n)}}),B5.prototype.visitFloat16=z5(H5),B5.prototype.visitFloat32=z5(V5),B5.prototype.visitFloat64=z5(V5),B5.prototype.visitUtf8=z5(Y5),B5.prototype.visitLargeUtf8=z5(Y5),B5.prototype.visitBinary=z5(q5),B5.prototype.visitLargeBinary=z5(q5),B5.prototype.visitFixedSizeBinary=z5(G5),B5.prototype.visitDate=z5(X5),B5.prototype.visitDateDay=z5(W5),B5.prototype.visitDateMillisecond=z5($5),B5.prototype.visitTimestamp=z5(e6),B5.prototype.visitTimestampSecond=z5(K5),B5.prototype.visitTimestampMillisecond=z5(Z5),B5.prototype.visitTimestampMicrosecond=z5(Q5),B5.prototype.visitTimestampNanosecond=z5(J5),B5.prototype.visitTime=z5(o6),B5.prototype.visitTimeSecond=z5(t6),B5.prototype.visitTimeMillisecond=z5(n6),B5.prototype.visitTimeMicrosecond=z5(i6),B5.prototype.visitTimeNanosecond=z5(r6),B5.prototype.visitDecimal=z5(s6),B5.prototype.visitList=z5((e,t,n)=>{const i=e.children[0],r=e.valueOffsets,o=_6.getVisitFn(i);if(Array.isArray(n))for(let s=-1,a=r[t],l=r[t+1];a<l;)o(i,a++,n[++s]);else for(let s=-1,a=r[t],l=r[t+1];a<l;)o(i,a++,n.get(++s))}),B5.prototype.visitStruct=z5((e,t,n)=>{const i=e.type.children.map(e=>_6.getVisitFn(e.type)),r=n instanceof Map?((e,t)=>(n,i,r,o)=>i&&n(i,e,t.get(r.name)))(t,n):n instanceof U7?((e,t)=>(n,i,r,o)=>i&&n(i,e,t.get(o)))(t,n):Array.isArray(n)?((e,t)=>(n,i,r,o)=>i&&n(i,e,t[o]))(t,n):((e,t)=>(n,i,r,o)=>i&&n(i,e,t[r.name]))(t,n);e.type.children.forEach((t,n)=>r(i[n],e.children[n],t,n))}),B5.prototype.visitUnion=z5((e,t,n)=>{e.type.mode===s3.Dense?a6(e,t,n):l6(e,t,n)}),B5.prototype.visitDenseUnion=z5(a6),B5.prototype.visitSparseUnion=z5(l6),B5.prototype.visitDictionary=z5((e,t,n)=>{var i;null===(i=e.dictionary)||void 0===i||i.set(e.values[t],n)}),B5.prototype.visitInterval=z5(c6),B5.prototype.visitIntervalDayTime=z5(u6),B5.prototype.visitIntervalYearMonth=z5(d6),B5.prototype.visitDuration=z5(g6),B5.prototype.visitDurationSecond=z5(h6),B5.prototype.visitDurationMillisecond=z5(f6),B5.prototype.visitDurationMicrosecond=z5(p6),B5.prototype.visitDurationNanosecond=z5(m6),B5.prototype.visitFixedSizeList=z5((e,t,n)=>{const{stride:i}=e,r=e.children[0],o=_6.getVisitFn(r);if(Array.isArray(n))for(let s=-1,a=t*i;++s<i;)o(r,a+s,n[s]);else for(let s=-1,a=t*i;++s<i;)o(r,a+s,n.get(s))}),B5.prototype.visitMap=z5((e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,o=_6.getVisitFn(i);let{[t]:s,[t+1]:a}=r;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(o(i,s,c),++s>=a)break});const _6=new B5,y6=Symbol.for("parent"),v6=Symbol.for("rowIndex");class b6{constructor(e,t){return this[y6]=e,this[v6]=t,new Proxy(this,new w6)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[v6],t=this[y6],n=t.type.children,i={};for(let r=-1,o=n.length;++r<o;)i[n[r].name]=Y6.visit(t.children[r],e);return i}toString(){return`{${[...this].map(([e,t])=>`${p4(e)}: ${p4(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new x6(this[y6],this[v6])}}class x6{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Y6.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(b6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[y6]:{writable:!0,enumerable:!1,configurable:!1,value:null},[v6]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class w6{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[y6].type.children.map(e=>e.name)}has(e,t){return-1!==e[y6].type.children.findIndex(e=>e.name===t)}getOwnPropertyDescriptor(e,t){if(-1!==e[y6].type.children.findIndex(e=>e.name===t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const n=e[y6].type.children.findIndex(e=>e.name===t);if(-1!==n){const i=Y6.visit(e[y6].children[n],e[v6]);return Reflect.set(e,t,i),i}}set(e,t,n){const i=e[y6].type.children.findIndex(e=>e.name===t);return-1!==i?(_6.visit(e[y6].children[i],e[v6],n),Reflect.set(e,t,n)):!(!Reflect.has(e,t)&&"symbol"!=typeof t)&&Reflect.set(e,t,n)}}class S6 extends L5{}function E6(e){return(t,n)=>t.getValid(n)?e(t,n):null}const C6=(e,t,n)=>{if(n+1>=t.length)return null;const i=m4(t[n]),r=m4(t[n+1]);return e.subarray(i,r)},T6=({values:e},t)=>((e,t)=>864e5*e[t])(e,t),k6=({values:e},t)=>m4(e[t]),A6=({stride:e,values:t},n)=>t[e*n],I6=({values:e},t)=>e[t],P6=({values:e,valueOffsets:t},n)=>C6(e,t,n),L6=({values:e,valueOffsets:t},n)=>{const i=C6(e,t,n);return null!==i?k2(i):null},R6=({values:e},t)=>1e3*m4(e[t]),O6=({values:e},t)=>m4(e[t]),M6=({values:e},t)=>g4(e[t],BigInt(1e3)),D6=({values:e},t)=>g4(e[t],BigInt(1e6)),N6=({values:e},t)=>e[t],F6=({values:e},t)=>e[t],B6=({values:e},t)=>e[t],z6=({values:e},t)=>e[t],U6=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Y6.visit(i,e.valueOffsets[t])},j6=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Y6.visit(i,t)},V6=({values:e},t)=>e.subarray(2*t,2*(t+1)),H6=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},W6=({values:e},t)=>e[t],$6=({values:e},t)=>e[t],G6=({values:e},t)=>e[t],q6=({values:e},t)=>e[t];S6.prototype.visitNull=E6((e,t)=>null),S6.prototype.visitBool=E6(({offset:e,values:t},n)=>{const i=e+n;return!!(t[i>>3]&1<<i%8)}),S6.prototype.visitInt=E6(({values:e},t)=>e[t]),S6.prototype.visitInt8=E6(A6),S6.prototype.visitInt16=E6(A6),S6.prototype.visitInt32=E6(A6),S6.prototype.visitInt64=E6(I6),S6.prototype.visitUint8=E6(A6),S6.prototype.visitUint16=E6(A6),S6.prototype.visitUint32=E6(A6),S6.prototype.visitUint64=E6(I6),S6.prototype.visitFloat=E6(({type:e,values:t},n)=>e.precision!==l3.HALF?t[n]:N5(t[n])),S6.prototype.visitFloat16=E6(({stride:e,values:t},n)=>N5(t[e*n])),S6.prototype.visitFloat32=E6(A6),S6.prototype.visitFloat64=E6(A6),S6.prototype.visitUtf8=E6(L6),S6.prototype.visitLargeUtf8=E6(L6),S6.prototype.visitBinary=E6(P6),S6.prototype.visitLargeBinary=E6(P6),S6.prototype.visitFixedSizeBinary=E6(({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1))),S6.prototype.visitDate=E6((e,t)=>e.type.unit===u3.DAY?T6(e,t):k6(e,t)),S6.prototype.visitDateDay=E6(T6),S6.prototype.visitDateMillisecond=E6(k6),S6.prototype.visitTimestamp=E6((e,t)=>{switch(e.type.unit){case h3.SECOND:return R6(e,t);case h3.MILLISECOND:return O6(e,t);case h3.MICROSECOND:return M6(e,t);case h3.NANOSECOND:return D6(e,t)}}),S6.prototype.visitTimestampSecond=E6(R6),S6.prototype.visitTimestampMillisecond=E6(O6),S6.prototype.visitTimestampMicrosecond=E6(M6),S6.prototype.visitTimestampNanosecond=E6(D6),S6.prototype.visitTime=E6((e,t)=>{switch(e.type.unit){case h3.SECOND:return N6(e,t);case h3.MILLISECOND:return F6(e,t);case h3.MICROSECOND:return B6(e,t);case h3.NANOSECOND:return z6(e,t)}}),S6.prototype.visitTimeSecond=E6(N6),S6.prototype.visitTimeMillisecond=E6(F6),S6.prototype.visitTimeMicrosecond=E6(B6),S6.prototype.visitTimeNanosecond=E6(z6),S6.prototype.visitDecimal=E6(({values:e,stride:t},n)=>T4.decimal(e.subarray(t*n,t*(n+1)))),S6.prototype.visitList=E6((e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:o,[t*i+1]:s}=n,a=r[0].slice(o,s-o);return new U7([a])}),S6.prototype.visitStruct=E6((e,t)=>new b6(e,t)),S6.prototype.visitUnion=E6((e,t)=>e.type.mode===s3.Dense?U6(e,t):j6(e,t)),S6.prototype.visitDenseUnion=E6(U6),S6.prototype.visitSparseUnion=E6(j6),S6.prototype.visitDictionary=E6((e,t)=>{var n;return null===(n=e.dictionary)||void 0===n?void 0:n.get(e.values[t])}),S6.prototype.visitInterval=E6((e,t)=>e.type.unit===p3.DAY_TIME?V6(e,t):H6(e,t)),S6.prototype.visitIntervalDayTime=E6(V6),S6.prototype.visitIntervalYearMonth=E6(H6),S6.prototype.visitDuration=E6((e,t)=>{switch(e.type.unit){case h3.SECOND:return W6(e,t);case h3.MILLISECOND:return $6(e,t);case h3.MICROSECOND:return G6(e,t);case h3.NANOSECOND:return q6(e,t)}}),S6.prototype.visitDurationSecond=E6(W6),S6.prototype.visitDurationMillisecond=E6($6),S6.prototype.visitDurationMicrosecond=E6(G6),S6.prototype.visitDurationNanosecond=E6(q6),S6.prototype.visitFixedSizeList=E6((e,t)=>{const{stride:n,children:i}=e,r=i[0].slice(t*n,n);return new U7([r])}),S6.prototype.visitMap=E6((e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:o}=n,s=i[0];return new J6(s.slice(r,o-r))});const Y6=new S6,X6=Symbol.for("keys"),K6=Symbol.for("vals"),Z6=Symbol.for("kKeysAsStrings"),Q6=Symbol.for("_kKeysAsStrings");class J6{constructor(e){return this[X6]=new U7([e.children[0]]).memoize(),this[K6]=e.children[1],new Proxy(this,new t7)}get[Z6](){return this[Q6]||(this[Q6]=Array.from(this[X6].toArray(),String))}[Symbol.iterator](){return new e7(this[X6],this[K6])}get size(){return this[X6].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[X6],t=this[K6],n={};for(let i=-1,r=e.length;++i<r;)n[e.get(i)]=Y6.visit(t,i);return n}toString(){return`{${[...this].map(([e,t])=>`${p4(e)}: ${p4(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class e7{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Y6.visit(this.vals,e)]})}}class t7{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Z6]}has(e,t){return e[Z6].includes(t)}getOwnPropertyDescriptor(e,t){if(-1!==e[Z6].indexOf(t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const n=e[Z6].indexOf(t);if(-1!==n){const i=Y6.visit(Reflect.get(e,K6),n);return Reflect.set(e,t,i),i}}set(e,t,n){const i=e[Z6].indexOf(t);return-1!==i?(_6.visit(Reflect.get(e,K6),i,n),Reflect.set(e,t,n)):!!Reflect.has(e,t)&&Reflect.set(e,t,n)}}let n7;function i7(e,t,n,i){const{length:r=0}=e;let o="number"!=typeof t?0:t,s="number"!=typeof n?r:n;return o<0&&(o=(o%r+r)%r),s<0&&(s=(s%r+r)%r),s<o&&(n7=o,o=s,s=n7),s>r&&(s=r),i?i(e,o,s):[o,s]}Object.defineProperties(J6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[X6]:{writable:!0,enumerable:!1,configurable:!1,value:null},[K6]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Q6]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const r7=(e,t)=>e<0?t+e:e,o7=e=>e!=e;function s7(e){if("object"!=typeof e||null===e)return o7(e)?o7:t=>t===e;if(e instanceof Date){const t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&function(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do{if(e[n]!==t[n])return!1}while(++n<i);return!0}(e,t):e instanceof Map?function(e){let t=-1;const n=[];for(const i of e.values())n[++t]=s7(i);return a7(n)}(e):Array.isArray(e)?function(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=s7(e[n]);return a7(t)}(e):e instanceof U7?function(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=s7(e.get(n));return a7(t)}(e):function(e,t=!1){const n=Object.keys(e);if(!t&&0===n.length)return()=>!1;const i=[];for(let r=-1,o=n.length;++r<o;)i[r]=s7(e[n[r]]);return a7(i,n)}(e,!0)}function a7(e,t){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}(e,n);case Map:return l7(e,n,n.keys());case J6:case b6:case Object:case void 0:return l7(e,n,t||Object.keys(n))}return n instanceof U7&&function(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}(e,n)}}function l7(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let s=0;const a=e.length;let l=o.next(),c=i.next(),u=r.next();for(;s<a&&!c.done&&!u.done&&!l.done&&c.value===u.value&&e[s](l.value);++s,c=i.next(),u=r.next(),l=o.next());return!!(s===a&&c.done&&u.done&&l.done)||(i.return&&i.return(),r.return&&r.return(),o.return&&o.return(),!1)}function c7(e,t,n,i){return!!(n&1<<i)}function u7(e,t,n,i){return(n&1<<i)>>i}function d7(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8==0?n.subarray(e>>3):h7(new f7(n,e,t,null,c7)).subarray(0,i)),r}return n}function h7(e){const t=[];let n=0,i=0,r=0;for(const s of e)s&&(r|=1<<i),8===++i&&(t[n++]=r,r=i=0);(0===n||i>0)&&(t[n++]=r);const o=new Uint8Array(t.length+7&-8);return o.set(t),o}class f7{constructor(e,t,n,i,r){this.bytes=e,this.length=n,this.context=i,this.get=r,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function p7(e,t,n){if(n-t<=0)return 0;if(n-t<8){let i=0;for(const r of new f7(e,t,n-t,e,u7))i+=r;return i}const i=n>>3<<3,r=t+(t%8==0?0:8-t%8);return p7(e,t,r)+p7(e,i,n)+function(e,t,n){let i=0,r=Math.trunc(t);const o=new DataView(e.buffer,e.byteOffset,e.byteLength),s=void 0===n?e.byteLength:r+n;for(;s-r>=4;)i+=m7(o.getUint32(r)),r+=4;for(;s-r>=2;)i+=m7(o.getUint16(r)),r+=2;for(;s-r>=1;)i+=m7(o.getUint8(r)),r+=1;return i}(e,r>>3,i-r>>3)}function m7(e){let t=Math.trunc(e);return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24}class g7{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){const{type:e}=this;return K4.isSparseUnion(e)||K4.isDenseUnion(e)?this.children.some(e=>e.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:t,values:n,nullBitmap:i,typeIds:r}=this;return t&&(e+=t.byteLength),n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),this.children.reduce((e,t)=>e+t.byteLength,e)}get nullCount(){if(K4.isUnion(this.type))return this.children.reduce((e,t)=>e+t.nullCount,0);let e,t=this._nullCount;return t<=-1&&(e=this.nullBitmap)&&(this._nullCount=t=0===e.length?0:this.length-p7(e,this.offset,this.offset+this.length)),t}constructor(e,t,n,i,r,o=[],s){let a;this.type=e,this.children=o,this.dictionary=s,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof g7?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=P5(e),r&&((a=r[0])&&(this.valueOffsets=a),(a=r[1])&&(this.values=a),(a=r[2])&&(this.nullBitmap=a),(a=r[3])&&(this.typeIds=a)))}getValid(e){const{type:t}=this;if(K4.isUnion(t)){const n=t,i=this.children[n.typeIdToChildIndex[this.typeIds[e]]],r=n.mode===s3.Dense?this.valueOffsets[e]:e;return i.getValid(r)}if(this.nullable&&this.nullCount>0){const t=this.offset+e;return!!(this.nullBitmap[t>>3]&1<<t%8)}return!0}setValid(e,t){let n;const{type:i}=this;if(K4.isUnion(i)){const r=i,o=this.children[r.typeIdToChildIndex[this.typeIds[e]]],s=r.mode===s3.Dense?this.valueOffsets[e]:e;n=o.getValid(s),o.setValid(s,t)}else{let{nullBitmap:i}=this;const{offset:r,length:o}=this,s=r+e,a=1<<s%8,l=s>>3;(!i||i.byteLength<=l)&&(i=new Uint8Array((r+o+63&-64)>>3).fill(255),this.nullCount>0?(i.set(d7(r,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:i})):Object.assign(this,{nullBitmap:i,_nullCount:0}));const c=i[l];n=0!==(c&a),i[l]=t?c|a:c&~a}return n!==!!t&&(this._nullCount=this.nullCount+(t?-1:1)),t}clone(e=this.type,t=this.offset,n=this.length,i=this._nullCount,r=this,o=this.children){return new g7(e,t,n,i,r,o,this.dictionary)}slice(e,t){const{stride:n,typeId:i,children:r}=this,o=+(0===this._nullCount)-1,s=16===i?n:1,a=this._sliceBuffers(e,t,n,i);return this.clone(this.type,this.offset+e,t,o,a,0===r.length||this.valueOffsets?r:this._sliceChildren(r,s*e,s*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===d4.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:n}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);i[t>>3]=(1<<t-(-8&t))-1,n>0&&i.set(d7(this.offset,t,this.nullBitmap),0);const r=this.buffers;return r[h4.VALIDITY]=i,this.clone(this.type,0,e,n+(e-t),r)}_sliceBuffers(e,t,n,i){let r;const{buffers:o}=this;return(r=o[h4.TYPE])&&(o[h4.TYPE]=r.subarray(e,e+t)),(r=o[h4.OFFSET])&&(o[h4.OFFSET]=r.subarray(e,e+t+1))||(r=o[h4.DATA])&&(o[h4.DATA]=6===i?r:r.subarray(n*e,n*(e+t))),o}_sliceChildren(e,t,n){return e.map(e=>e.slice(t,n))}}g7.prototype.children=Object.freeze([]);class _7 extends L5{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{type:t,offset:n=0,length:i=0}=e;return new g7(t,n,i,i)}visitBool(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length>>3,nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitInt(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length,nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitFloat(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length,nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitUtf8(e){const{type:t,offset:n=0}=e,i=X2(e.data),r=X2(e.nullBitmap),o=q2(e.valueOffsets),{length:s=o.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[o,i,r])}visitLargeUtf8(e){const{type:t,offset:n=0}=e,i=X2(e.data),r=X2(e.nullBitmap),o=Y2(e.valueOffsets),{length:s=o.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[o,i,r])}visitBinary(e){const{type:t,offset:n=0}=e,i=X2(e.data),r=X2(e.nullBitmap),o=q2(e.valueOffsets),{length:s=o.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[o,i,r])}visitLargeBinary(e){const{type:t,offset:n=0}=e,i=X2(e.data),r=X2(e.nullBitmap),o=Y2(e.valueOffsets),{length:s=o.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[o,i,r])}visitFixedSizeBinary(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitDate(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitTimestamp(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitTime(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitDecimal(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitList(e){const{type:t,offset:n=0,child:i}=e,r=X2(e.nullBitmap),o=q2(e.valueOffsets),{length:s=o.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[o,void 0,r],[i])}visitStruct(e){const{type:t,offset:n=0,children:i=[]}=e,r=X2(e.nullBitmap),{length:o=i.reduce((e,{length:t})=>Math.max(e,t),0),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,void 0,r],i)}visitUnion(e){const{type:t,offset:n=0,children:i=[]}=e,r=G2(t.ArrayType,e.typeIds),{length:o=r.length,nullCount:s=-1}=e;if(K4.isSparseUnion(t))return new g7(t,n,o,s,[void 0,void 0,void 0,r],i);const a=q2(e.valueOffsets);return new g7(t,n,o,s,[a,void 0,void 0,r],i)}visitDictionary(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.indices.ArrayType,e.data),{dictionary:o=new U7([(new _7).visit({type:t.dictionary})])}=e,{length:s=r.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[void 0,r,i],[],o)}visitInterval(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitDuration(e){const{type:t,offset:n=0}=e,i=X2(e.nullBitmap),r=G2(t.ArrayType,e.data),{length:o=r.length,nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,r,i])}visitFixedSizeList(e){const{type:t,offset:n=0,child:i=(new _7).visit({type:t.valueType})}=e,r=X2(e.nullBitmap),{length:o=i.length/P5(t),nullCount:s=(e.nullBitmap?-1:0)}=e;return new g7(t,n,o,s,[void 0,void 0,r],[i])}visitMap(e){const{type:t,offset:n=0,child:i=(new _7).visit({type:t.childType})}=e,r=X2(e.nullBitmap),o=q2(e.valueOffsets),{length:s=o.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new g7(t,n,s,a,[o,void 0,r],[i])}}const y7=new _7;function v7(e){return y7.visit(e)}class b7{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function x7(e){return e.reduce((e,t)=>e+t.nullCount,0)}function w7(e){return e.reduce((e,t,n)=>(e[n+1]=e[n]+t.length,e),new Uint32Array(e.length+1))}function S7(e,t,n,i){const r=[];for(let o=-1,s=e.length;++o<s;){const s=e[o],a=t[o],{length:l}=s;if(a>=i)break;if(n>=a+l)continue;if(a>=n&&a+l<=i){r.push(s);continue}const c=Math.max(0,n-a),u=Math.min(i-a,l);r.push(s.slice(c,u-c))}return 0===r.length&&r.push(e[0].slice(0,0)),r}function E7(e,t,n,i){let r=0,o=0,s=t.length-1;do{if(r>=s-1)return n<t[s]?i(e,r,n-t[r]):null;o=r+Math.trunc(.5*(s-r)),n<t[o]?s=o:r=o}while(r<s)}function C7(e,t){return e.getValid(t)}function T7(e){function t(t,n,i){return e(t[n],i)}return function(e){return E7(this.data,this._offsets,e,t)}}function k7(e){let t;function n(n,i,r){return e(n[i],r,t)}return function(e,i){const r=this.data;t=i;const o=E7(r,this._offsets,e,n);return t=void 0,o}}function A7(e){let t;function n(n,i,r){let o=r,s=0,a=0;for(let l=i-1,c=n.length;++l<c;){const i=n[l];if(~(s=e(i,t,o)))return a+s;o=0,a+=i.length}return-1}return function(e,i){t=e;const r=this.data,o="number"!=typeof i?n(r,0,0):E7(r,this._offsets,i,n);return t=void 0,o}}class I7 extends L5{}function P7(e,t,n){if(void 0===t)return-1;if(null===t)switch(e.typeId){case d4.Union:case d4.Dictionary:break;default:return function(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new f7(n,e.offset+(t||0),e.length,n,c7)){if(!r)return i;++i}return-1}(e,n)}const i=Y6.getVisitFn(e),r=s7(t);for(let o=(n||0)-1,s=e.length;++o<s;)if(r(i(e,o)))return o;return-1}function L7(e,t,n){const i=Y6.getVisitFn(e),r=s7(t);for(let o=(n||0)-1,s=e.length;++o<s;)if(r(i(e,o)))return o;return-1}I7.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},I7.prototype.visitBool=P7,I7.prototype.visitInt=P7,I7.prototype.visitInt8=P7,I7.prototype.visitInt16=P7,I7.prototype.visitInt32=P7,I7.prototype.visitInt64=P7,I7.prototype.visitUint8=P7,I7.prototype.visitUint16=P7,I7.prototype.visitUint32=P7,I7.prototype.visitUint64=P7,I7.prototype.visitFloat=P7,I7.prototype.visitFloat16=P7,I7.prototype.visitFloat32=P7,I7.prototype.visitFloat64=P7,I7.prototype.visitUtf8=P7,I7.prototype.visitLargeUtf8=P7,I7.prototype.visitBinary=P7,I7.prototype.visitLargeBinary=P7,I7.prototype.visitFixedSizeBinary=P7,I7.prototype.visitDate=P7,I7.prototype.visitDateDay=P7,I7.prototype.visitDateMillisecond=P7,I7.prototype.visitTimestamp=P7,I7.prototype.visitTimestampSecond=P7,I7.prototype.visitTimestampMillisecond=P7,I7.prototype.visitTimestampMicrosecond=P7,I7.prototype.visitTimestampNanosecond=P7,I7.prototype.visitTime=P7,I7.prototype.visitTimeSecond=P7,I7.prototype.visitTimeMillisecond=P7,I7.prototype.visitTimeMicrosecond=P7,I7.prototype.visitTimeNanosecond=P7,I7.prototype.visitDecimal=P7,I7.prototype.visitList=P7,I7.prototype.visitStruct=P7,I7.prototype.visitUnion=P7,I7.prototype.visitDenseUnion=L7,I7.prototype.visitSparseUnion=L7,I7.prototype.visitDictionary=P7,I7.prototype.visitInterval=P7,I7.prototype.visitIntervalDayTime=P7,I7.prototype.visitIntervalYearMonth=P7,I7.prototype.visitDuration=P7,I7.prototype.visitDurationSecond=P7,I7.prototype.visitDurationMillisecond=P7,I7.prototype.visitDurationMicrosecond=P7,I7.prototype.visitDurationNanosecond=P7,I7.prototype.visitFixedSizeList=P7,I7.prototype.visitMap=P7;const R7=new I7;class O7 extends L5{}function M7(e){const{type:t}=e;if(0===e.nullCount&&1===e.stride&&(K4.isInt(t)&&64!==t.bitWidth||K4.isTime(t)&&64!==t.bitWidth||K4.isFloat(t)&&t.precision!==l3.HALF))return new b7(e.data.length,t=>{const n=e.data[t];return n.values.subarray(0,n.length)[Symbol.iterator]()});let n=0;return new b7(e.data.length,t=>{const i=e.data[t].length,r=e.slice(n,n+i);return n+=i,new D7(r)})}class D7{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}O7.prototype.visitNull=M7,O7.prototype.visitBool=M7,O7.prototype.visitInt=M7,O7.prototype.visitInt8=M7,O7.prototype.visitInt16=M7,O7.prototype.visitInt32=M7,O7.prototype.visitInt64=M7,O7.prototype.visitUint8=M7,O7.prototype.visitUint16=M7,O7.prototype.visitUint32=M7,O7.prototype.visitUint64=M7,O7.prototype.visitFloat=M7,O7.prototype.visitFloat16=M7,O7.prototype.visitFloat32=M7,O7.prototype.visitFloat64=M7,O7.prototype.visitUtf8=M7,O7.prototype.visitLargeUtf8=M7,O7.prototype.visitBinary=M7,O7.prototype.visitLargeBinary=M7,O7.prototype.visitFixedSizeBinary=M7,O7.prototype.visitDate=M7,O7.prototype.visitDateDay=M7,O7.prototype.visitDateMillisecond=M7,O7.prototype.visitTimestamp=M7,O7.prototype.visitTimestampSecond=M7,O7.prototype.visitTimestampMillisecond=M7,O7.prototype.visitTimestampMicrosecond=M7,O7.prototype.visitTimestampNanosecond=M7,O7.prototype.visitTime=M7,O7.prototype.visitTimeSecond=M7,O7.prototype.visitTimeMillisecond=M7,O7.prototype.visitTimeMicrosecond=M7,O7.prototype.visitTimeNanosecond=M7,O7.prototype.visitDecimal=M7,O7.prototype.visitList=M7,O7.prototype.visitStruct=M7,O7.prototype.visitUnion=M7,O7.prototype.visitDenseUnion=M7,O7.prototype.visitSparseUnion=M7,O7.prototype.visitDictionary=M7,O7.prototype.visitInterval=M7,O7.prototype.visitIntervalDayTime=M7,O7.prototype.visitIntervalYearMonth=M7,O7.prototype.visitDuration=M7,O7.prototype.visitDurationSecond=M7,O7.prototype.visitDurationMillisecond=M7,O7.prototype.visitDurationMicrosecond=M7,O7.prototype.visitDurationNanosecond=M7,O7.prototype.visitFixedSizeList=M7,O7.prototype.visitMap=M7;const N7=new O7;var F7;const B7={},z7={};class U7{constructor(e){var t,n,i;const r=e[0]instanceof U7?e.flatMap(e=>e.data):e;if(0===r.length||r.some(e=>!(e instanceof g7)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(t=r[0])||void 0===t?void 0:t.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:e,set:t,indexOf:n}=B7[o.typeId],i=r[0];this.isValid=e=>C7(i,e),this.get=t=>e(i,t),this.set=(e,n)=>t(i,e,n),this.indexOf=e=>n(i,e),this._offsets=[0,i.length];break}default:Object.setPrototypeOf(this,z7[o.typeId]),this._offsets=w7(r)}this.data=r,this.type=o,this.stride=P5(o),this.numChildren=null!==(i=null===(n=o.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,t)=>e+t.byteLength,0)}get nullable(){return this.data.some(e=>e.nullable)}get nullCount(){return x7(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${d4[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(r7(e,this.length))}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>-1}[Symbol.iterator](){return N7.visit(this)}concat(...e){return new U7(this.data.concat(e.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new U7(i7(this,e,t,({data:e,_offsets:t},n,i)=>S7(e,t,n,i)))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:n,stride:i,ArrayType:r}=this;switch(e.typeId){case d4.Int:case d4.Float:case d4.Decimal:case d4.Time:case d4.Timestamp:switch(t.length){case 0:return new r;case 1:return t[0].values.subarray(0,n*i);default:return t.reduce((e,{values:t,length:n})=>(e.array.set(t.subarray(0,n*i),e.offset),e.offset+=n*i,e),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt(null===(t=this.type.children)||void 0===t?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new U7(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return!!K4.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(K4.isDictionary(this.type)){const e=new j7(this.data[0].dictionary),t=this.data.map(t=>{const n=t.clone();return n.dictionary=e,n});return new U7(t)}return new j7(this)}unmemoize(){if(K4.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map(t=>{const n=t.clone();return n.dictionary=e,n});return new U7(t)}return this}}F7=Symbol.toStringTag,U7[F7]=(e=>{e.type=K4.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(d4).map(e=>d4[e]).filter(e=>"number"==typeof e&&e!==d4.NONE);for(const n of t){const t=Y6.getVisitFnByTypeId(n),i=_6.getVisitFnByTypeId(n),r=R7.getVisitFnByTypeId(n);B7[n]={get:t,set:i,indexOf:r},z7[n]=Object.create(e,{isValid:{value:T7(C7)},get:{value:T7(Y6.getVisitFnByTypeId(n))},set:{value:k7(_6.getVisitFnByTypeId(n))},indexOf:{value:A7(R7.getVisitFnByTypeId(n))}})}return"Vector"})(U7.prototype);class j7 extends U7{constructor(e){super(e.data);const t=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(e){const n=r[e];if(void 0!==n)return n;const i=t.call(this,e);return r[e]=i,i}}),Object.defineProperty(this,"set",{value(e,t){n.call(this,e,t),r[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new j7(i.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new U7(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function V7(e){if(e){if(e instanceof g7)return new U7([e]);if(e instanceof U7)return new U7(e.data);if(e.type instanceof K4)return new U7([v7(e)]);if(Array.isArray(e))return new U7(e.flatMap(e=>{return(t=e)instanceof g7?[t]:t instanceof U7?t.data:V7(t).data;var t}));if(ArrayBuffer.isView(e)){e instanceof DataView&&(e=new Uint8Array(e.buffer));const t={offset:0,length:e.length,nullCount:-1,data:e};if(e instanceof Int8Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new J4}))]);if(e instanceof Int16Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new e5}))]);if(e instanceof Int32Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new t5}))]);if(e instanceof BigInt64Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new n5}))]);if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new U7([v7(Object.assign(Object.assign({},t),{type:new i5}))]);if(e instanceof Uint16Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new r5}))]);if(e instanceof Uint32Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new o5}))]);if(e instanceof BigUint64Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new s5}))]);if(e instanceof Float32Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new l5}))]);if(e instanceof Float64Array)return new U7([v7(Object.assign(Object.assign({},t),{type:new c5}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function H7(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function W7(e,t=0){return e.length>=t?e.subarray(0,t):W2(new e.constructor(t),e,0)}class $7{constructor(e,t=0,n=1){this.length=Math.ceil(t/n),this.buffer=new e(this.length),this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,t){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const t=this.stride,n=this.length*t,i=this.buffer.length;n>=i&&this._resize(H7(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=H7(e*this.stride,this.BYTES_PER_ELEMENT);const t=W7(this.buffer,e);return this.clear(),t}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(e){return this.buffer=W7(this.buffer,e)}}class G7 extends $7{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,t){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=t,this}}class q7 extends G7{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,t){const{buffer:n}=this.reserve(e-this.length+1),i=e>>3,r=e%8,o=n[i]>>r&1;return t?0===o&&(n[i]|=1<<r,++this.numValid):1===o&&(n[i]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Y7 extends G7{constructor(e){super(e.OffsetArrayType,1,1)}append(e){return this.set(this.length-1,e)}set(e,t){const n=this.length-1,i=this.reserve(e-n+1).buffer;return n<e++&&n>=0&&i.fill(i[n],n,e),i[e]=i[e-1]+t,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(e+1)}}let X7=class{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}constructor({type:e,nullValues:t}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=t,this.stride=P5(e),this._nulls=new q7,t&&t.length>0&&(this._isValid=function(e){if(!e||e.length<=0)return function(e){return!0};let t="";const n=e.filter(e=>e==e);return n.length>0&&(t=`\n    switch (x) {${n.map(e=>`\n        case ${function(e){return"bigint"!=typeof e?p4(e):`${p4(e)}n`}(e)}:`).join("")}\n            return false;\n    }`),e.length!==n.length&&(t=`if (x !== x) return false;\n${t}`),new Function("x",`${t}\nreturn true;`)}(t))}toVector(){return new U7([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:t,_values:n,_nulls:i,_typeIds:r,children:o}=this;return t&&(e+=t.byteLength),n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),o.reduce((e,t)=>e+t.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((e,t)=>e+t.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,t){return this.setValid(e,this.isValid(t))&&this.setValue(e,t),this}setValue(e,t){this._setValue(this,e,t)}setValid(e,t){return this.length=this._nulls.set(e,+t).length,t}addChild(e,t=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,t,n,i;const{type:r,length:o,nullCount:s,_typeIds:a,_offsets:l,_values:c,_nulls:u}=this;(t=null==a?void 0:a.flush(o))?i=null==l?void 0:l.flush(o):e=(i=null==l?void 0:l.flush(o))?null==c?void 0:c.flush(l.last()):null==c?void 0:c.flush(o),s>0&&(n=null==u?void 0:u.flush(o));const d=this.children.map(e=>e.flush());return this.clear(),v7({type:r,length:o,nullCount:s,children:d,child:d[0],data:e,typeIds:t,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,t,n,i;this.length=0,null===(e=this._nulls)||void 0===e||e.clear(),null===(t=this._values)||void 0===t||t.clear(),null===(n=this._offsets)||void 0===n||n.clear(),null===(i=this._typeIds)||void 0===i||i.clear();for(const r of this.children)r.clear();return this}};X7.prototype.length=1,X7.prototype.stride=1,X7.prototype.children=null,X7.prototype.finished=!1,X7.prototype.nullValues=null,X7.prototype._isValid=()=>!0;class K7 extends X7{constructor(e){super(e),this._values=new G7(this.ArrayType,0,this.stride)}setValue(e,t){const n=this._values;return n.reserve(e-n.length+1),super.setValue(e,t)}}class Z7 extends X7{constructor(e){super(e),this._pendingLength=0,this._offsets=new Y7(e.type)}setValue(e,t){const n=this._pending||(this._pending=new Map),i=n.get(e);i&&(this._pendingLength-=i.length),this._pendingLength+=t instanceof J6?t[X6].length:t.length,n.set(e,t)}setValid(e,t){return!!super.setValid(e,t)||((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,t=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,t),this}}class Q7{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,n,i){return e.prep(8,24),e.writeInt64(BigInt(null!=i?i:0)),e.pad(4),e.writeInt32(n),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}class J7{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new J7).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+4),(t||new J7).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):r3.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new l4).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new Q7).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Q7).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new z3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,r3.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class e8{constructor(e=[],t,n,i=r3.V5){this.fields=e||[],this.metadata=t||new Map,n||(n=i8(this.fields)),this.dictionaries=n,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){const t=new Set(e),n=this.fields.filter(e=>t.has(e.name));return new e8(n,this.metadata)}selectAt(e){const t=e.map(e=>this.fields[e]).filter(Boolean);return new e8(t,this.metadata)}assign(...e){const t=e[0]instanceof e8?e[0]:Array.isArray(e[0])?new e8(e[0]):new e8(e),n=[...this.fields],i=n8(n8(new Map,this.metadata),t.metadata),r=t.fields.filter(e=>{const t=n.findIndex(t=>t.name===e.name);return!~t||(n[t]=e.clone({metadata:n8(n8(new Map,n[t].metadata),e.metadata)}))&&!1}),o=i8(r,new Map);return new e8([...n,...r],i,new Map([...this.dictionaries,...o]))}}e8.prototype.fields=null,e8.prototype.metadata=null,e8.prototype.dictionaries=null;class t8{static new(...e){let[t,n,i,r]=e;return e[0]&&"object"==typeof e[0]&&(({name:t}=e[0]),void 0===n&&(n=e[0].type),void 0===i&&(i=e[0].nullable),void 0===r&&(r=e[0].metadata)),new t8(`${t}`,n,i,r)}constructor(e,t,n=!1,i){this.name=e,this.type=t,this.nullable=n,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,n,i,r]=e;return e[0]&&"object"==typeof e[0]?({name:t=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=e[0]):[t=this.name,n=this.type,i=this.nullable,r=this.metadata]=e,t8.new(t,n,i,r)}}function n8(e,t){return new Map([...e||new Map,...t||new Map])}function i8(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const i=e[n].type;if(K4.isDictionary(i))if(t.has(i.id)){if(t.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(i.id,i.dictionary);i.children&&i.children.length>0&&i8(i.children,t)}return t}t8.prototype.type=null,t8.prototype.name=null,t8.prototype.nullable=null,t8.prototype.metadata=null;var r8=S3,o8=w3;class s8{static decode(e){e=new o8(X2(e));const t=J7.getRootAsFooter(e),n=e8.decode(t.schema(),new Map,t.version());return new a8(n,t)}static encode(e){const t=new r8,n=e8.encode(t,e.schema);J7.startRecordBatchesVector(t,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())l8.encode(t,o);const i=t.endVector();J7.startDictionariesVector(t,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())l8.encode(t,o);const r=t.endVector();return J7.startFooter(t),J7.addSchema(t,n),J7.addVersion(t,r3.V5),J7.addRecordBatches(t,i),J7.addDictionaries(t,r),J7.finishFooterBuffer(t,J7.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,t=r3.V5,n,i){this.schema=e,this.version=t,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,t=-1,n=this.numRecordBatches;++t<n;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,n=this.numDictionaries;++t<n;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class a8 extends s8{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return l8.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return l8.decode(t)}return null}}class l8{static decode(e){return new l8(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:n}=t,i=BigInt(t.offset),r=BigInt(t.bodyLength);return Q7.createBlock(e,i,n,r)}constructor(e,t,n){this.metaDataLength=e,this.offset=m4(n),this.bodyLength=m4(t)}}const c8=Object.freeze({done:!0,value:void 0});class u8{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class d8{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class h8 extends d8{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return x2(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(c8);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return e3.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return e3.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return x2(this,void 0,void 0,function*(){return yield this.abort(e),c8})}return(e){return x2(this,void 0,void 0,function*(){return yield this.close(),c8})}read(e){return x2(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return x2(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,t)=>{this.resolvers.push({resolve:e,reject:t})}):Promise.resolve(c8)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class f8 extends h8{write(e){if((e=X2(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?k2(this.toUint8Array(!0)):this.toUint8Array(!1).then(k2)}toUint8Array(e=!1){return e?$2(this._values)[0]:(()=>x2(this,void 0,void 0,function*(){var e,t,n,i;const r=[];let o=0;try{for(var s,a=!0,l=C2(this);!(e=(s=yield l.next()).done);a=!0){i=s.value,a=!1;const e=i;r.push(e),o+=e.byteLength}}catch(c){t={error:c}}finally{try{a||e||!(n=l.return)||(yield n.call(l))}finally{if(t)throw t.error}}return $2(r,o)[0]}))()}}class p8{constructor(e){e&&(this.source=new g8(e3.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class m8{constructor(e){e instanceof m8?this.source=e.source:e instanceof f8?this.source=new _8(e3.fromAsyncIterable(e)):V2(e)?this.source=new _8(e3.fromNodeStream(e)):j2(e)?this.source=new _8(e3.fromDOMStream(e)):z2(e)?this.source=new _8(e3.fromDOMStream(e.body)):M2(e)?this.source=new _8(e3.fromIterable(e)):(O2(e)||D2(e))&&(this.source=new _8(e3.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class g8{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||c8)}return(e){return Object.create(this.source.return&&this.source.return(e)||c8)}}class _8{constructor(e){this.source=e,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(e){return x2(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return x2(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return x2(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return x2(this,arguments,void 0,function*(e,t="read"){return yield this.source.next({cmd:t,size:e})})}throw(e){return x2(this,void 0,void 0,function*(){const t=this.source.throw&&(yield this.source.throw(e))||c8;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return x2(this,void 0,void 0,function*(){const t=this.source.return&&(yield this.source.return(e))||c8;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class y8 extends p8{constructor(e,t){super(),this.position=0,this.buffer=X2(e),this.size=void 0===t?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:n}=this.readAt(e,4);return new DataView(t,n).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:n,position:i}=this;return t&&i<n?("number"!=typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,e)),t.subarray(i,this.position)):null}readAt(e,t){const n=this.buffer,i=Math.min(this.size,e+t);return n?n.subarray(e,i):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class v8 extends m8{constructor(e,t){super(),this.position=0,this._handle=e,"number"==typeof t?this.size=t:this._pending=(()=>x2(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return x2(this,void 0,void 0,function*(){const{buffer:t,byteOffset:n}=yield this.readAt(e,4);return new DataView(t,n).getInt32(0,!0)})}seek(e){return x2(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return x2(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:t,size:n,position:i}=this;if(t&&i<n){"number"!=typeof e&&(e=Number.POSITIVE_INFINITY);let r=i,o=0,s=0;const a=Math.min(n,r+Math.min(n-r,e)),l=new Uint8Array(Math.max(0,(this.position=a)-r));for(;(r+=s)<a&&(o+=s)<l.byteLength;)({bytesRead:s}=yield t.read(l,o,l.byteLength-o,r));return l}return null})}readAt(e,t){return x2(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i}=this;if(n&&e+t<i){const r=Math.min(i,e+t),o=new Uint8Array(r-e);return(yield n.read(o,0,t,e)).buffer}return new Uint8Array(t)})}close(){return x2(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return x2(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return x2(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}function b8(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const x8=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class w8{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]);let i=t[3]*n[3];this.buffer[0]=65535&i;let r=i>>>16;return i=t[2]*n[3],r+=i,i=t[3]*n[2]>>>0,r+=i,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=t[1]*n[3]+t[2]*n[2]+t[3]*n[1],this.buffer[1]+=t[0]*n[3]+t[1]*n[2]+t[2]*n[1]+t[3]*n[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${b8(this.buffer[1])} ${b8(this.buffer[0])}`}}class S8 extends w8{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return S8.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return S8.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const n=e.length,i=new S8(t);for(let r=0;r<n;){const t=8<n-r?8:n-r,o=new S8(new Uint32Array([Number.parseInt(e.slice(r,r+t),10),0])),s=new S8(new Uint32Array([x8[t],0]));i.times(s),i.plus(o),r+=t}return i}static convertArray(e){const t=new Uint32Array(2*e.length);for(let n=-1,i=e.length;++n<i;)S8.from(e[n],new Uint32Array(t.buffer,t.byteOffset+2*n*4,2));return t}static multiply(e,t){return new S8(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new S8(new Uint32Array(e.buffer)).plus(t)}}class E8 extends w8{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=0|this.buffer[1],n=0|e.buffer[1];return t<n||t===n&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return E8.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return E8.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const n=e.startsWith("-"),i=e.length,r=new E8(t);for(let o=n?1:0;o<i;){const t=8<i-o?8:i-o,n=new E8(new Uint32Array([Number.parseInt(e.slice(o,o+t),10),0])),s=new E8(new Uint32Array([x8[t],0]));r.times(s),r.plus(n),o+=t}return n?r.negate():r}static convertArray(e){const t=new Uint32Array(2*e.length);for(let n=-1,i=e.length;++n<i;)E8.from(e[n],new Uint32Array(t.buffer,t.byteOffset+2*n*4,2));return t}static multiply(e,t){return new E8(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new E8(new Uint32Array(e.buffer)).plus(t)}}class C8{constructor(e){this.buffer=e}high(){return new E8(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new E8(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){const t=new S8(new Uint32Array([this.buffer[3],0])),n=new S8(new Uint32Array([this.buffer[2],0])),i=new S8(new Uint32Array([this.buffer[1],0])),r=new S8(new Uint32Array([this.buffer[0],0])),o=new S8(new Uint32Array([e.buffer[3],0])),s=new S8(new Uint32Array([e.buffer[2],0])),a=new S8(new Uint32Array([e.buffer[1],0])),l=new S8(new Uint32Array([e.buffer[0],0]));let c=S8.multiply(r,l);this.buffer[0]=c.low();const u=new S8(new Uint32Array([c.high(),0]));return c=S8.multiply(i,l),u.plus(c),c=S8.multiply(r,a),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high(),new S8(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(S8.multiply(n,l)).plus(S8.multiply(i,a)).plus(S8.multiply(r,s)),this.buffer[3]+=S8.multiply(t,l).plus(S8.multiply(n,a)).plus(S8.multiply(i,s)).plus(S8.multiply(r,o)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${b8(this.buffer[3])} ${b8(this.buffer[2])} ${b8(this.buffer[1])} ${b8(this.buffer[0])}`}static multiply(e,t){return new C8(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new C8(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return C8.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return C8.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){const n=e.startsWith("-"),i=e.length,r=new C8(t);for(let o=n?1:0;o<i;){const t=8<i-o?8:i-o,n=new C8(new Uint32Array([Number.parseInt(e.slice(o,o+t),10),0,0,0])),s=new C8(new Uint32Array([x8[t],0,0,0]));r.times(s),r.plus(n),o+=t}return n?r.negate():r}static convertArray(e){const t=new Uint32Array(4*e.length);for(let n=-1,i=e.length;++n<i;)C8.from(e[n],new Uint32Array(t.buffer,t.byteOffset+16*n,4));return t}}class T8 extends L5{constructor(e,t,n,i,r=r3.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=n,this.dictionaries=i,this.metadataVersion=r}visit(e){return super.visit(e instanceof t8?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return v7({type:e,length:t})}visitBool(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitInt(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDate(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTime(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitList(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),children:this.visitMany(e.children)})}visitUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return this.metadataVersion<r3.V5&&this.readNullBitmap(e,n),e.mode===s3.Sparse?this.visitSparseUnion(e,{length:t,nullCount:n}):this.visitDenseUnion(e,{length:t,nullCount:n})}visitDenseUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDuration(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:n}=this.nextFieldNode()){return v7({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,n=this.nextBufferRange()){return t>0&&this.readData(e,n)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class k8 extends T8{constructor(e,t,n,i,r){super(new Uint8Array(0),t,n,i,r),this.sources=e}readNullBitmap(e,t,{offset:n}=this.nextBufferRange()){return t<=0?new Uint8Array(0):h7(this.sources[n])}readOffsets(e,{offset:t}=this.nextBufferRange()){return G2(Uint8Array,G2(e.OffsetArrayType,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return G2(Uint8Array,G2(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){const{sources:n}=this;return K4.isTimestamp(e)||(K4.isInt(e)||K4.isTime(e))&&64===e.bitWidth||K4.isDuration(e)||K4.isDate(e)&&e.unit===u3.MILLISECOND?G2(Uint8Array,E8.convertArray(n[t])):K4.isDecimal(e)?G2(Uint8Array,C8.convertArray(n[t])):K4.isBinary(e)||K4.isLargeBinary(e)||K4.isFixedSizeBinary(e)?function(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}(n[t]):K4.isBool(e)?h7(n[t]):K4.isUtf8(e)||K4.isLargeUtf8(e)?I2(n[t].join("")):G2(Uint8Array,G2(e.ArrayType,n[t].map(e=>+e)))}}class A8 extends Z7{constructor(e){super(e),this._values=new $7(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,X2(t))}_flushPending(e,t){const n=this._offsets,i=this._values.reserve(t).buffer;let r=0;for(const[o,s]of e)if(void 0===s)n.set(o,0);else{const e=s.length;i.set(s,r),n.set(o,e),r+=e}}}class I8 extends Z7{constructor(e){super(e),this._values=new $7(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,X2(t))}_flushPending(e,t){const n=this._offsets,i=this._values.reserve(t).buffer;let r=0;for(const[o,s]of e)if(void 0===s)n.set(o,BigInt(0));else{const e=s.length;i.set(s,r),n.set(o,BigInt(e)),r+=e}}}class P8 extends X7{constructor(e){super(e),this._values=new q7}setValue(e,t){this._values.set(e,+t)}}class L8 extends K7{}L8.prototype._setValue=X5;class R8 extends L8{}R8.prototype._setValue=W5;class O8 extends L8{}O8.prototype._setValue=$5;class M8 extends K7{}M8.prototype._setValue=s6;class D8 extends X7{constructor({type:e,nullValues:t,dictionaryHashFunction:n}){super({type:new I5(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=B9({type:this.type.indices,nullValues:t}),this.dictionary=B9({type:this.type.dictionary,nullValues:null}),"function"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,t){const n=this.indices;return t=n.setValid(e,t),this.length=n.length,t}setValue(e,t){const n=this._keysToIndices,i=this.valueToKey(t);let r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(t).length-1),this.indices.setValue(e,r)}flush(){const e=this.type,t=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(e);return i.dictionary=t?t.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return"string"==typeof e?e:`${e}`}}class N8 extends K7{}N8.prototype._setValue=G5;class F8 extends X7{setValue(e,t){const[n]=this.children,i=e*this.stride;for(let r=-1,o=t.length;++r<o;)n.set(i+r,t[r])}addChild(e,t="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(e);return this.type=new T5(this.type.listSize,new t8(t,e.type,!0)),n}}class B8 extends K7{setValue(e,t){this._values.set(e,t)}}class z8 extends B8{setValue(e,t){super.setValue(e,F5(t))}}class U8 extends B8{}class j8 extends B8{}class V8 extends K7{}V8.prototype._setValue=c6;class H8 extends V8{}H8.prototype._setValue=u6;class W8 extends V8{}W8.prototype._setValue=d6;class $8 extends K7{}$8.prototype._setValue=g6;class G8 extends $8{}G8.prototype._setValue=h6;class q8 extends $8{}q8.prototype._setValue=f6;class Y8 extends $8{}Y8.prototype._setValue=p6;class X8 extends $8{}X8.prototype._setValue=m6;class K8 extends K7{setValue(e,t){this._values.set(e,t)}}class Z8 extends K8{}class Q8 extends K8{}class J8 extends K8{}class e9 extends K8{}class t9 extends K8{}class n9 extends K8{}class i9 extends K8{}class r9 extends K8{}class o9 extends Z7{constructor(e){super(e),this._offsets=new Y7(e.type)}addChild(e,t="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new w5(new t8(t,e.type,!0)),this.numChildren-1}_flushPending(e){const t=this._offsets,[n]=this.children;for(const[i,r]of e)if(void 0===r)t.set(i,0);else{const e=r,o=e.length,s=t.set(i,o).buffer[i];for(let t=-1;++t<o;)n.set(s+t,e[t])}}}class s9 extends Z7{set(e,t){return super.set(e,t)}setValue(e,t){const n=t instanceof Map?t:new Map(Object.entries(t)),i=this._pending||(this._pending=new Map),r=i.get(e);r&&(this._pendingLength-=r.size),this._pendingLength+=n.size,i.set(e,n)}addChild(e,t=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new k5(new t8(t,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const t=this._offsets,[n]=this.children;for(const[i,r]of e)if(void 0===r)t.set(i,0);else{let{[i]:e,[i+1]:o}=t.set(i,r.size).buffer;for(const t of r.entries())if(n.set(e,t),++e>=o)break}}}class a9 extends X7{setValue(e,t){}setValid(e,t){return this.length=Math.max(e+1,this.length),t}}class l9 extends X7{setValue(e,t){const{children:n,type:i}=this;switch(Array.isArray(t)||t.constructor){case!0:return i.children.forEach((i,r)=>n[r].set(e,t[r]));case Map:return i.children.forEach((i,r)=>n[r].set(e,t.get(i.name)));default:return i.children.forEach((i,r)=>n[r].set(e,t[i.name]))}}setValid(e,t){return super.setValid(e,t)||this.children.forEach(n=>n.setValid(e,t)),t}addChild(e,t=`${this.numChildren}`){const n=this.children.push(e);return this.type=new S5([...this.type.children,new t8(t,e.type,!0)]),n}}class c9 extends K7{}c9.prototype._setValue=e6;class u9 extends c9{}u9.prototype._setValue=K5;class d9 extends c9{}d9.prototype._setValue=Z5;class h9 extends c9{}h9.prototype._setValue=Q5;class f9 extends c9{}f9.prototype._setValue=J5;class p9 extends K7{}p9.prototype._setValue=o6;class m9 extends p9{}m9.prototype._setValue=t6;class g9 extends p9{}g9.prototype._setValue=n6;class _9 extends p9{}_9.prototype._setValue=i6;class y9 extends p9{}y9.prototype._setValue=r6;class v9 extends X7{constructor(e){super(e),this._typeIds=new G7(Int8Array,0,1),"function"==typeof e.valueToChildTypeId&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,t){return this.set(this.length,e,t)}set(e,t,n){return void 0===n&&(n=this._valueToChildTypeId(this,t,e)),this.setValue(e,t,n),this}setValue(e,t,n){this._typeIds.set(e,n);const i=this.type.typeIdToChildIndex[n],r=this.children[i];null==r||r.set(e,t)}addChild(e,t=`${this.children.length}`){const n=this.children.push(e),{type:{children:i,mode:r,typeIds:o}}=this,s=[...i,new t8(t,e.type)];return this.type=new E5(r,[...o,n],s),n}_valueToChildTypeId(e,t,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class b9 extends v9{}class x9 extends v9{constructor(e){super(e),this._offsets=new G7(Int32Array)}setValue(e,t,n){const i=this._typeIds.set(e,n).buffer[e],r=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(e,r.length).buffer[e];null==r||r.set(o,t)}}class w9 extends Z7{constructor(e){super(e),this._values=new $7(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,I2(t))}_flushPending(e,t){}}w9.prototype._flushPending=A8.prototype._flushPending;class S9 extends Z7{constructor(e){super(e),this._values=new $7(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,I2(t))}_flushPending(e,t){}}S9.prototype._flushPending=I8.prototype._flushPending;const E9=new class extends L5{visitNull(){return a9}visitBool(){return P8}visitInt(){return K8}visitInt8(){return Z8}visitInt16(){return Q8}visitInt32(){return J8}visitInt64(){return e9}visitUint8(){return t9}visitUint16(){return n9}visitUint32(){return i9}visitUint64(){return r9}visitFloat(){return B8}visitFloat16(){return z8}visitFloat32(){return U8}visitFloat64(){return j8}visitUtf8(){return w9}visitLargeUtf8(){return S9}visitBinary(){return A8}visitLargeBinary(){return I8}visitFixedSizeBinary(){return N8}visitDate(){return L8}visitDateDay(){return R8}visitDateMillisecond(){return O8}visitTimestamp(){return c9}visitTimestampSecond(){return u9}visitTimestampMillisecond(){return d9}visitTimestampMicrosecond(){return h9}visitTimestampNanosecond(){return f9}visitTime(){return p9}visitTimeSecond(){return m9}visitTimeMillisecond(){return g9}visitTimeMicrosecond(){return _9}visitTimeNanosecond(){return y9}visitDecimal(){return M8}visitList(){return o9}visitStruct(){return l9}visitUnion(){return v9}visitDenseUnion(){return x9}visitSparseUnion(){return b9}visitDictionary(){return D8}visitInterval(){return V8}visitIntervalDayTime(){return H8}visitIntervalYearMonth(){return W8}visitDuration(){return $8}visitDurationSecond(){return G8}visitDurationMillisecond(){return q8}visitDurationMicrosecond(){return Y8}visitDurationNanosecond(){return X8}visitFixedSizeList(){return F8}visitMap(){return s9}};class C9 extends L5{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,n)=>this.compareFields(e,t[n]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function T9(e,t){return t instanceof e.constructor}function k9(e,t){return e===t||T9(e,t)}function A9(e,t){return e===t||T9(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function I9(e,t){return e===t||T9(e,t)&&e.precision===t.precision}function P9(e,t){return e===t||T9(e,t)&&e.unit===t.unit}function L9(e,t){return e===t||T9(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function R9(e,t){return e===t||T9(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function O9(e,t){return e===t||T9(e,t)&&e.mode===t.mode&&e.typeIds.every((e,n)=>e===t.typeIds[n])&&N9.compareManyFields(e.children,t.children)}function M9(e,t){return e===t||T9(e,t)&&e.unit===t.unit}function D9(e,t){return e===t||T9(e,t)&&e.unit===t.unit}C9.prototype.visitNull=k9,C9.prototype.visitBool=k9,C9.prototype.visitInt=A9,C9.prototype.visitInt8=A9,C9.prototype.visitInt16=A9,C9.prototype.visitInt32=A9,C9.prototype.visitInt64=A9,C9.prototype.visitUint8=A9,C9.prototype.visitUint16=A9,C9.prototype.visitUint32=A9,C9.prototype.visitUint64=A9,C9.prototype.visitFloat=I9,C9.prototype.visitFloat16=I9,C9.prototype.visitFloat32=I9,C9.prototype.visitFloat64=I9,C9.prototype.visitUtf8=k9,C9.prototype.visitLargeUtf8=k9,C9.prototype.visitBinary=k9,C9.prototype.visitLargeBinary=k9,C9.prototype.visitFixedSizeBinary=function(e,t){return e===t||T9(e,t)&&e.byteWidth===t.byteWidth},C9.prototype.visitDate=P9,C9.prototype.visitDateDay=P9,C9.prototype.visitDateMillisecond=P9,C9.prototype.visitTimestamp=L9,C9.prototype.visitTimestampSecond=L9,C9.prototype.visitTimestampMillisecond=L9,C9.prototype.visitTimestampMicrosecond=L9,C9.prototype.visitTimestampNanosecond=L9,C9.prototype.visitTime=R9,C9.prototype.visitTimeSecond=R9,C9.prototype.visitTimeMillisecond=R9,C9.prototype.visitTimeMicrosecond=R9,C9.prototype.visitTimeNanosecond=R9,C9.prototype.visitDecimal=k9,C9.prototype.visitList=function(e,t){return e===t||T9(e,t)&&e.children.length===t.children.length&&N9.compareManyFields(e.children,t.children)},C9.prototype.visitStruct=function(e,t){return e===t||T9(e,t)&&e.children.length===t.children.length&&N9.compareManyFields(e.children,t.children)},C9.prototype.visitUnion=O9,C9.prototype.visitDenseUnion=O9,C9.prototype.visitSparseUnion=O9,C9.prototype.visitDictionary=function(e,t){return e===t||T9(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&N9.visit(e.indices,t.indices)&&N9.visit(e.dictionary,t.dictionary)},C9.prototype.visitInterval=M9,C9.prototype.visitIntervalDayTime=M9,C9.prototype.visitIntervalYearMonth=M9,C9.prototype.visitDuration=D9,C9.prototype.visitDurationSecond=D9,C9.prototype.visitDurationMillisecond=D9,C9.prototype.visitDurationMicrosecond=D9,C9.prototype.visitDurationNanosecond=D9,C9.prototype.visitFixedSizeList=function(e,t){return e===t||T9(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&N9.compareManyFields(e.children,t.children)},C9.prototype.visitMap=function(e,t){return e===t||T9(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&N9.compareManyFields(e.children,t.children)};const N9=new C9;function F9(e,t){return N9.compareSchemas(e,t)}function B9(e){const t=e.type,n=new(E9.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},o=Array.isArray(i)?(e,t)=>i[t]||r:({name:e})=>i[e]||r;for(const[e,s]of t.children.entries()){const{type:t}=s,i=o(s,e);n.children.push(B9(Object.assign(Object.assign({},i),{type:t})))}}return n}function z9(e,t){if(e instanceof g7||e instanceof U7||e.type instanceof K4||ArrayBuffer.isView(e))return V7(e);const n=[...j9({type:U9(e),nullValues:[null]})(e)],i=1===n.length?n[0]:n.reduce((e,t)=>e.concat(t));return K4.isDictionary(i.type)?i.memoize():i}function U9(e){if(0===e.length)return new Z4;let t=0,n=0,i=0,r=0,o=0,s=0,a=0,l=0;for(const c of e){if(null!=c){switch(typeof c){case"bigint":++s;continue;case"boolean":++a;continue;case"number":++r;continue;case"string":++o;continue;case"object":Array.isArray(c)?++n:"[object Date]"===Object.prototype.toString.call(c)?++l:++i;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}++t}if(r+t===e.length)return new c5;if(o+t===e.length)return new I5(new h5,new t5);if(s+t===e.length)return new n5;if(a+t===e.length)return new p5;if(l+t===e.length)return new v5;if(n+t===e.length){const t=e,n=U9(t[t.findIndex(e=>null!=e)]);if(t.every(e=>{return null==e||(t=n,i=U9(e),N9.visit(t,i));var t,i}))return new w5(new t8("",n,!0))}else if(i+t===e.length){const t=new Map;for(const n of e)for(const e of Object.keys(n))t.has(e)||null==n[e]||t.set(e,new t8(e,U9([n[e]]),!0));return new S5([...t.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function j9(e){const{queueingStrategy:t="count"}=e,{highWaterMark:n=("bytes"!==t?Number.POSITIVE_INFINITY:Math.pow(2,14))}=e,i="bytes"!==t?"length":"byteLength";return function*(t){let r=0;const o=B9(e);for(const e of t)o.append(e)[i]>=n&&++r&&(yield o.toVector());(o.finish().length>0||0===r)&&(yield o.toVector())}}function V9(e,t){return function(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((e,t)=>Math.max(e,t.length),0)};let o=0,s=0,a=-1;const l=t.length;let c,u=[];for(;r.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),s=Math.min(s,c?c.length:s);Number.isFinite(s)&&(u=H9(n,s,u,t,r),s>0&&(i[o++]=v7({type:new S5(n),length:s,nullCount:0,children:u.slice()})))}return[e=e.assign(n),i.map(t=>new Y9(e,t))]}(e,t.map(e=>e.data.concat()))}function H9(e,t,n,i,r){var o;const s=(t+63&-64)>>3;for(let a=-1,l=i.length;++a<l;){const l=n[a],c=null==l?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),r.numBatches=Math.max(r.numBatches,i[a].unshift(l.slice(t,c-t))));else{const i=e[a];e[a]=i.clone({nullable:!0}),n[a]=null!==(o=null==l?void 0:l._changeLengthAndBackfillNullBitmap(t))&&void 0!==o?o:v7({type:i.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)})}}return n}var W9,$9;class G9{constructor(...e){var t,n;if(0===e.length)return this.batches=[],this.schema=new e8([]),this._offsets=[0],this;let i,r;e[0]instanceof e8&&(i=e.shift()),e.at(-1)instanceof Uint32Array&&(r=e.pop());const o=e=>{if(e){if(e instanceof Y9)return[e];if(e instanceof G9)return e.batches;if(e instanceof g7){if(e.type instanceof S5)return[new Y9(new e8(e.type.children),e)]}else{if(Array.isArray(e))return e.flatMap(e=>o(e));if("function"==typeof e[Symbol.iterator])return[...e].flatMap(e=>o(e));if("object"==typeof e){const t=Object.keys(e),n=t.map(t=>new U7([e[t]])),r=null!=i?i:new e8(t.map((e,t)=>new t8(String(e),n[t].type,n[t].nullable))),[,o]=V9(r,n);return 0===o.length?[new Y9(e)]:o}}}return[]},s=e.flatMap(e=>o(e));if(i=null!==(n=null!=i?i:null===(t=s[0])||void 0===t?void 0:t.schema)&&void 0!==n?n:new e8([]),!(i instanceof e8))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const a of s){if(!(a instanceof Y9))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!F9(i,a.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=s,this._offsets=null!=r?r:w7(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=x7(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(r7(e,this.numRows))}set(e,t){}indexOf(e,t){return-1}[Symbol.iterator](){return this.batches.length>0?N7.visit(new U7(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...e){const t=this.schema,n=this.data.concat(e.flatMap(({data:e})=>e));return new G9(t,n.map(e=>new Y9(t,e)))}slice(e,t){const n=this.schema;[e,t]=i7({length:this.numRows},e,t);const i=S7(this.data,this._offsets,e,t);return new G9(n,i.map(e=>new Y9(n,e)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map(t=>t.children[e]);if(0===t.length){const{type:n}=this.schema.fields[e],i=v7({type:n,length:0,nullCount:0});t.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new U7(t)}return null}setChild(e,t){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex(t=>t.name===e),t)}setChildAt(e,t){let n=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new U7([v7({type:new Z4,length:this.numRows})]));const r=n.fields.slice(),o=r[e].clone({type:t.type}),s=this.schema.fields.map((e,t)=>this.getChildAt(t));[r[e],s[e]]=[o,t],[n,i]=V9(n,s)}return new G9(n,i)}select(e){const t=this.schema.fields.reduce((e,t,n)=>e.set(t.name,n),new Map);return this.selectAt(e.map(e=>t.get(e)).filter(e=>e>-1))}selectAt(e){const t=this.schema.selectAt(e),n=this.batches.map(t=>t.selectAt(e));return new G9(t,n)}assign(e){const t=this.schema.fields,[n,i]=e.schema.fields.reduce((e,n,i)=>{const[r,o]=e,s=t.findIndex(e=>e.name===n.name);return~s?o[s]=i:r.push(i),e},[[],[]]),r=this.schema.assign(e.schema),o=[...t.map((e,t)=>[t,i[t]]).map(([t,n])=>void 0===n?this.getChildAt(t):e.getChildAt(n)),...n.map(t=>e.getChildAt(t))].filter(Boolean);return new G9(...V9(r,o))}}function q9(e){const t={},n=Object.entries(e);for(const[i,r]of n)t[i]=z9(r);return new G9(t)}W9=Symbol.toStringTag,G9[W9]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=T7(C7),e.get=T7(Y6.getVisitFn(d4.Struct)),e.set=k7(_6.getVisitFn(d4.Struct)),e.indexOf=A7(R7.getVisitFn(d4.Struct)),"Table"))(G9.prototype);let Y9=class e{constructor(...e){switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof e8))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=v7({nullCount:0,type:new S5(this.schema.fields),children:this.schema.fields.map(e=>v7({type:e.type,nullCount:0}))})]=e,!(this.data instanceof g7))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=X9(this.schema,this.data.children);break;case 1:{const[t]=e,{fields:n,children:i,length:r}=Object.keys(t).reduce((e,n,i)=>(e.children[i]=t[n],e.length=Math.max(e.length,t[n].length),e.fields[i]=t8.new({name:n,type:t[n].type,nullable:!0}),e),{length:0,fields:new Array,children:new Array}),o=new e8(n),s=v7({type:new S5(n),length:r,children:i,nullCount:0});[this.schema,this.data]=X9(o,s.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=K9(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Y6.visit(this.data,e)}at(e){return this.get(r7(e,this.numRows))}set(e,t){return _6.visit(this.data,e,t)}indexOf(e,t){return R7.visit(this.data,e,t)}[Symbol.iterator](){return N7.visit(new U7([this.data]))}toArray(){return[...this]}concat(...e){return new G9(this.schema,[this,...e])}slice(t,n){const[i]=new U7([this.data]).slice(t,n).data;return new e(this.schema,i)}getChild(e){var t;return this.getChildAt(null===(t=this.schema.fields)||void 0===t?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new U7([this.data.children[e]]):null}setChild(e,t){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex(t=>t.name===e),t)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new U7([v7({type:new Z4,length:this.numRows})]));const e=i.fields.slice(),o=r.children.slice(),s=e[t].clone({type:n.type});[e[t],o[t]]=[s,n.data[0]],i=new e8(e,new Map(this.schema.metadata)),r=v7({type:new S5(e),children:o})}return new e(i,r)}select(t){const n=this.schema.select(t),i=new S5(n.fields),r=[];for(const e of t){const t=this.schema.fields.findIndex(t=>t.name===e);~t&&(r[t]=this.data.children[t])}return new e(n,v7({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(e=>this.data.children[e]).filter(Boolean),r=v7({type:new S5(n.fields),length:this.numRows,children:i});return new e(n,r)}};function X9(e,t,n=t.reduce((e,t)=>Math.max(e,t.length),0)){var i;const r=[...e.fields],o=[...t],s=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const e=t[a];e&&e.length===n||(r[a]=l.clone({nullable:!0}),o[a]=null!==(i=null==e?void 0:e._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:v7({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(s)}))}return[e.assign(r),v7({type:new S5(r),length:n,children:o})]}function K9(e,t,n=new Map){var i,r;if((null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0)>0&&(null==e?void 0:e.length)===(null==t?void 0:t.length))for(let o=-1,s=e.length;++o<s;){const{type:i}=e[o],s=t[o];for(const e of[s,...(null===(r=null==s?void 0:s.dictionary)||void 0===r?void 0:r.data)||[]])K9(i.children,null==e?void 0:e.children,n);if(K4.isDictionary(i)){const{id:e}=i;if(n.has(e)){if(n.get(e)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null==s?void 0:s.dictionary)&&n.set(e,s.dictionary)}}return n}$9=Symbol.toStringTag,Y9[$9]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Y9.prototype);class Z9 extends Y9{constructor(e){const t=e.fields.map(e=>v7({type:e.type}));super(e,v7({type:new S5(e.fields),nullCount:0,children:t}))}}let Q9=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):r3.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):c4.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new z3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,r3.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,c4.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(t,n,i,r,o,s){return e.startMessage(t),e.addVersion(t,n),e.addHeaderType(t,i),e.addHeader(t,r),e.addBodyLength(t,o),e.addCustomMetadata(t,s),e.endMessage(t)}};const J9=new class extends L5{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return J3.startNull(t),J3.endNull(t)}visitInt(e,t){return F3.startInt(t),F3.addBitWidth(t,e.bitWidth),F3.addIsSigned(t,e.isSigned),F3.endInt(t)}visitFloat(e,t){return q3.startFloatingPoint(t),q3.addPrecision(t,e.precision),q3.endFloatingPoint(t)}visitBinary(e,t){return U3.startBinary(t),U3.endBinary(t)}visitLargeBinary(e,t){return X3.startLargeBinary(t),X3.endLargeBinary(t)}visitBool(e,t){return j3.startBool(t),j3.endBool(t)}visitUtf8(e,t){return r4.startUtf8(t),r4.endUtf8(t)}visitLargeUtf8(e,t){return K3.startLargeUtf8(t),K3.endLargeUtf8(t)}visitDecimal(e,t){return H3.startDecimal(t),H3.addScale(t,e.scale),H3.addPrecision(t,e.precision),H3.addBitWidth(t,e.bitWidth),H3.endDecimal(t)}visitDate(e,t){return V3.startDate(t),V3.addUnit(t,e.unit),V3.endDate(t)}visitTime(e,t){return t4.startTime(t),t4.addUnit(t,e.unit),t4.addBitWidth(t,e.bitWidth),t4.endTime(t)}visitTimestamp(e,t){const n=e.timezone&&t.createString(e.timezone)||void 0;return n4.startTimestamp(t),n4.addUnit(t,e.unit),void 0!==n&&n4.addTimezone(t,n),n4.endTimestamp(t)}visitInterval(e,t){return Y3.startInterval(t),Y3.addUnit(t,e.unit),Y3.endInterval(t)}visitDuration(e,t){return W3.startDuration(t),W3.addUnit(t,e.unit),W3.endDuration(t)}visitList(e,t){return Z3.startList(t),Z3.endList(t)}visitStruct(e,t){return e4.startStruct_(t),e4.endStruct_(t)}visitUnion(e,t){i4.startTypeIdsVector(t,e.typeIds.length);const n=i4.createTypeIdsVector(t,e.typeIds);return i4.startUnion(t),i4.addMode(t,e.mode),i4.addTypeIds(t,n),i4.endUnion(t)}visitDictionary(e,t){const n=this.visit(e.indices,t);return B3.startDictionaryEncoding(t),B3.addId(t,BigInt(e.id)),B3.addIsOrdered(t,e.isOrdered),void 0!==n&&B3.addIndexType(t,n),B3.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return $3.startFixedSizeBinary(t),$3.addByteWidth(t,e.byteWidth),$3.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return G3.startFixedSizeList(t),G3.addListSize(t,e.listSize),G3.endFixedSizeList(t)}visitMap(e,t){return Q3.startMap(t),Q3.addKeysSorted(t,e.keysSorted),Q3.endMap(t)}};function eee(e){return new uee(e.count,nee(e.columns),iee(e.columns))}function tee(e,t){return(e.children||[]).filter(Boolean).map(e=>t8.fromJSON(e,t))}function nee(e){return(e||[]).reduce((e,t)=>{return[...e,new fee(t.count,(n=t.VALIDITY,(n||[]).reduce((e,t)=>e+ +(0===t),0))),...nee(t.children)];var n},[])}function iee(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const i=e[n];i.VALIDITY&&t.push(new hee(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new hee(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new hee(t.length,i.OFFSET.length)),i.DATA&&t.push(new hee(t.length,i.DATA.length)),t=iee(i.children,t)}return t}function ree(e=[]){return new Map(e.map(({key:e,value:t})=>[e,t]))}function oee(e){return new Q4(e.isSigned,e.bitWidth)}function see(e,t){const n=e.type.name;switch(n){case"NONE":case"null":return new Z4;case"binary":return new u5;case"largebinary":return new d5;case"utf8":return new h5;case"largeutf8":return new f5;case"bool":return new p5;case"list":return new w5((t||[])[0]);case"struct":case"struct_":return new S5(t||[])}switch(n){case"int":{const t=e.type;return new Q4(t.isSigned,t.bitWidth)}case"floatingpoint":{const t=e.type;return new a5(l3[t.precision])}case"decimal":{const t=e.type;return new m5(t.scale,t.precision,t.bitWidth)}case"date":{const t=e.type;return new g5(u3[t.unit])}case"time":{const t=e.type;return new _5(h3[t.unit],t.bitWidth)}case"timestamp":{const t=e.type;return new y5(h3[t.unit],t.timezone)}case"interval":{const t=e.type;return new b5(p3[t.unit])}case"duration":{const t=e.type;return new x5(h3[t.unit])}case"union":{const n=e.type,[i,...r]=(n.mode+"").toLowerCase(),o=i.toUpperCase()+r.join("");return new E5(s3[o],n.typeIds||[],t||[])}case"fixedsizebinary":{const t=e.type;return new C5(t.byteWidth)}case"fixedsizelist":{const n=e.type;return new T5(n.listSize,(t||[])[0])}case"map":{const n=e.type;return new k5((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var aee=S3,lee=w3;class cee{static fromJSON(e,t){const n=new cee(0,r3.V5,t);return n._createHeader=function(e,t){return()=>{switch(t){case c4.Schema:return e8.fromJSON(e);case c4.RecordBatch:return uee.fromJSON(e);case c4.DictionaryBatch:return dee.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${c4[t]}, type: ${t} }`)}}(e,t),n}static decode(e){e=new lee(X2(e));const t=Q9.getRootAsMessage(e),n=t.bodyLength(),i=t.version(),r=t.headerType(),o=new cee(n,i,r);return o._createHeader=function(e,t){return()=>{switch(t){case c4.Schema:return e8.decode(e.header(new l4),new Map,e.version());case c4.RecordBatch:return uee.decode(e.header(new L3),e.version());case c4.DictionaryBatch:return dee.decode(e.header(new R3),e.version())}throw new Error(`Unrecognized Message type: { name: ${c4[t]}, type: ${t} }`)}}(t,r),o}static encode(e){const t=new aee;let n=-1;return e.isSchema()?n=e8.encode(t,e.header()):e.isRecordBatch()?n=uee.encode(t,e.header()):e.isDictionaryBatch()&&(n=dee.encode(t,e.header())),Q9.startMessage(t),Q9.addVersion(t,r3.V5),Q9.addHeader(t,n),Q9.addHeaderType(t,e.headerType),Q9.addBodyLength(t,BigInt(e.bodyLength)),Q9.finishMessageBuffer(t,Q9.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof e8)return new cee(0,r3.V5,c4.Schema,e);if(e instanceof uee)return new cee(t,r3.V5,c4.RecordBatch,e);if(e instanceof dee)return new cee(t,r3.V5,c4.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===c4.Schema}isRecordBatch(){return this.headerType===c4.RecordBatch}isDictionaryBatch(){return this.headerType===c4.DictionaryBatch}constructor(e,t,n,i){this._version=t,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=m4(e)}}class uee{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,n){this._nodes=t,this._buffers=n,this._length=m4(e)}}class dee{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t,n=!1){this._data=e,this._isDelta=n,this._id=m4(t)}}class hee{constructor(e,t){this.offset=m4(e),this.length=m4(t)}}class fee{constructor(e,t){this.length=m4(e),this.nullCount=m4(t)}}function pee(e,t){const n=[];for(let i,r=-1,o=-1,s=e.childrenLength();++r<s;)(i=e.children(r))&&(n[++o]=t8.decode(i,t));return n}function mee(e){const t=new Map;if(e)for(let n,i,r=-1,o=Math.trunc(e.customMetadataLength());++r<o;)(n=e.customMetadata(r))&&null!=(i=n.key())&&t.set(i,n.value());return t}function gee(e){return new Q4(e.isSigned(),e.bitWidth())}function _ee(e,t){const n=e.typeType();switch(n){case o4.NONE:case o4.Null:return new Z4;case o4.Binary:return new u5;case o4.LargeBinary:return new d5;case o4.Utf8:return new h5;case o4.LargeUtf8:return new f5;case o4.Bool:return new p5;case o4.List:return new w5((t||[])[0]);case o4.Struct_:return new S5(t||[])}switch(n){case o4.Int:{const t=e.type(new F3);return new Q4(t.isSigned(),t.bitWidth())}case o4.FloatingPoint:{const t=e.type(new q3);return new a5(t.precision())}case o4.Decimal:{const t=e.type(new H3);return new m5(t.scale(),t.precision(),t.bitWidth())}case o4.Date:{const t=e.type(new V3);return new g5(t.unit())}case o4.Time:{const t=e.type(new t4);return new _5(t.unit(),t.bitWidth())}case o4.Timestamp:{const t=e.type(new n4);return new y5(t.unit(),t.timezone())}case o4.Interval:{const t=e.type(new Y3);return new b5(t.unit())}case o4.Duration:{const t=e.type(new W3);return new x5(t.unit())}case o4.Union:{const n=e.type(new i4);return new E5(n.mode(),n.typeIdsArray()||[],t||[])}case o4.FixedSizeBinary:{const t=e.type(new $3);return new C5(t.byteWidth())}case o4.FixedSizeList:{const n=e.type(new G3);return new T5(n.listSize(),(t||[])[0])}case o4.Map:{const n=e.type(new Q3);return new k5((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${o4[n]}" (${n})`)}t8.encode=function(e,t){let n=-1,i=-1,r=-1;const o=t.type;let s=t.typeId;K4.isDictionary(o)?(s=o.dictionary.typeId,r=J9.visit(o,e),i=J9.visit(o.dictionary,e)):i=J9.visit(o,e);const a=(o.children||[]).map(t=>t8.encode(e,t)),l=a4.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?a4.createCustomMetadataVector(e,[...t.metadata].map(([t,n])=>{const i=e.createString(`${t}`),r=e.createString(`${n}`);return z3.startKeyValue(e),z3.addKey(e,i),z3.addValue(e,r),z3.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),a4.startField(e),a4.addType(e,i),a4.addTypeType(e,s),a4.addChildren(e,l),a4.addNullable(e,!!t.nullable),-1!==n&&a4.addName(e,n),-1!==r&&a4.addDictionary(e,r),-1!==c&&a4.addCustomMetadata(e,c),a4.endField(e)},t8.decode=function(e,t){let n,i,r,o,s,a;return t&&(a=e.dictionary())?t.has(n=m4(a.id()))?(o=(o=a.indexType())?gee(o):new t5,s=new I5(t.get(n),o,n,a.isOrdered()),i=new t8(e.name(),s,e.nullable(),mee(e))):(o=(o=a.indexType())?gee(o):new t5,t.set(n,r=_ee(e,pee(e,t))),s=new I5(r,o,n,a.isOrdered()),i=new t8(e.name(),s,e.nullable(),mee(e))):(r=_ee(e,pee(e,t)),i=new t8(e.name(),r,e.nullable(),mee(e))),i||null},t8.fromJSON=function(e,t){let n,i,r,o,s,a;return t&&(o=e.dictionary)?t.has(n=o.id)?(i=(i=o.indexType)?oee(i):new t5,a=new I5(t.get(n),i,n,o.isOrdered),r=new t8(e.name,a,e.nullable,ree(e.metadata))):(i=(i=o.indexType)?oee(i):new t5,t.set(n,s=see(e,tee(e,t))),a=new I5(s,i,n,o.isOrdered),r=new t8(e.name,a,e.nullable,ree(e.metadata))):(s=see(e,tee(e,t)),r=new t8(e.name,s,e.nullable,ree(e.metadata))),r||null},e8.encode=function(e,t){const n=t.fields.map(t=>t8.encode(e,t));l4.startFieldsVector(e,n.length);const i=l4.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?l4.createCustomMetadataVector(e,[...t.metadata].map(([t,n])=>{const i=e.createString(`${t}`),r=e.createString(`${n}`);return z3.startKeyValue(e),z3.addKey(e,i),z3.addValue(e,r),z3.endKeyValue(e)})):-1;return l4.startSchema(e),l4.addFields(e,i),l4.addEndianness(e,yee?O3.Little:O3.Big),-1!==r&&l4.addCustomMetadata(e,r),l4.endSchema(e)},e8.decode=function(e,t=new Map,n=r3.V5){const i=function(e,t){const n=[];for(let i,r=-1,o=-1,s=e.fieldsLength();++r<s;)(i=e.fields(r))&&(n[++o]=t8.decode(i,t));return n}(e,t);return new e8(i,mee(e),t,n)},e8.fromJSON=function(e,t=new Map){return new e8(function(e,t){return(e.fields||[]).filter(Boolean).map(e=>t8.fromJSON(e,t))}(e,t),ree(e.metadata),t)},uee.encode=function(e,t){const n=t.nodes||[],i=t.buffers||[];L3.startNodesVector(e,n.length);for(const s of n.slice().reverse())fee.encode(e,s);const r=e.endVector();L3.startBuffersVector(e,i.length);for(const s of i.slice().reverse())hee.encode(e,s);const o=e.endVector();return L3.startRecordBatch(e),L3.addLength(e,BigInt(t.length)),L3.addNodes(e,r),L3.addBuffers(e,o),L3.endRecordBatch(e)},uee.decode=function(e,t=r3.V5){if(null!==e.compression())throw new Error("Record batch compression not implemented");return new uee(e.length(),function(e){const t=[];for(let n,i=-1,r=-1,o=e.nodesLength();++i<o;)(n=e.nodes(i))&&(t[++r]=fee.decode(n));return t}(e),function(e,t){const n=[];for(let i,r=-1,o=-1,s=e.buffersLength();++r<s;)(i=e.buffers(r))&&(t<r3.V4&&(i.bb_pos+=8*(r+1)),n[++o]=hee.decode(i));return n}(e,t))},uee.fromJSON=eee,dee.encode=function(e,t){const n=uee.encode(e,t.data);return R3.startDictionaryBatch(e),R3.addId(e,BigInt(t.id)),R3.addIsDelta(e,t.isDelta),R3.addData(e,n),R3.endDictionaryBatch(e)},dee.decode=function(e,t=r3.V5){return new dee(uee.decode(e.data(),t),e.id(),e.isDelta())},dee.fromJSON=function(e){return new dee(eee(e.data),e.id,e.isDelta)},fee.encode=function(e,t){return P3.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))},fee.decode=function(e){return new fee(e.length(),e.nullCount())},hee.encode=function(e,t){return I3.createBuffer(e,BigInt(t.offset),BigInt(t.length))},hee.decode=function(e){return new hee(e.offset(),e.length())};const yee=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),vee=e=>`Expected ${c4[e]} Message in stream, but was null or length 0.`,bee=e=>`Header pointer of flatbuffer-encoded ${c4[e]} Message is null or length 0.`,xee=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,wee=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class See{constructor(e){this.source=e instanceof p8?e:new p8(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?c8:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(vee(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=X2(this.source.read(e));if(t.byteLength<e)throw new Error(wee(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){const t=c4.Schema,n=this.readMessage(t),i=null==n?void 0:n.header();if(e&&!i)throw new Error(bee(t));return i}readMetadataLength(){const e=this.source.read(Tee),t=e&&new w3(e),n=(null==t?void 0:t.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(e){const t=this.source.read(e);if(!t)return c8;if(t.byteLength<e)throw new Error(xee(e,t.byteLength));return{done:!1,value:cee.decode(t)}}}class Eee{constructor(e,t){this.source=e instanceof m8?e:B2(e)?new v8(e,t):new m8(e)}[Symbol.asyncIterator](){return this}next(){return x2(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?c8:e})}throw(e){return x2(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return x2(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return x2(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(vee(e));return t.value})}readMessageBody(e){return x2(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const t=X2(yield this.source.read(e));if(t.byteLength<e)throw new Error(wee(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(){return x2(this,arguments,void 0,function*(e=!1){const t=c4.Schema,n=yield this.readMessage(t),i=null==n?void 0:n.header();if(e&&!i)throw new Error(bee(t));return i})}readMetadataLength(){return x2(this,void 0,void 0,function*(){const e=yield this.source.read(Tee),t=e&&new w3(e),n=(null==t?void 0:t.readInt32(0))||0;return{done:0===n,value:n}})}readMetadata(e){return x2(this,void 0,void 0,function*(){const t=yield this.source.read(e);if(!t)return c8;if(t.byteLength<e)throw new Error(xee(e,t.byteLength));return{done:!1,value:cee.decode(t)}})}}class Cee extends See{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof u8?e:new u8(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:cee.fromJSON(e.schema,c4.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:cee.fromJSON(t,c4.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:cee.fromJSON(t,c4.RecordBatch)}}return this._body=[],c8}readMessageBody(e){return function e(t){return(t||[]).reduce((t,n)=>[...t,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE_ID&&[n.TYPE_ID]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...e(n.children)],[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(vee(e));return t.value}readSchema(){const e=c4.Schema,t=this.readMessage(e),n=null==t?void 0:t.header();if(!t||!n)throw new Error(bee(e));return n}}const Tee=4,kee=new Uint8Array(6);for(let hhe=0;hhe<6;hhe+=1)kee[hhe]="ARROW1".codePointAt(hhe);function Aee(e,t=0){for(let n=-1,i=kee.length;++n<i;)if(kee[n]!==e[t+n])return!1;return!0}const Iee=kee.length,Pee=Iee+Tee,Lee=2*Iee+Tee;class Ree extends d8{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return O2(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return e3.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return e3.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Ree?e:N2(e)?function(e){return new Oee(new Vee(e))}(e):B2(e)?function(e){return x2(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new v8(e,t);return t>=Lee&&Aee(yield n.readAt(0,Iee+7&-8))?new Nee(new jee(n)):new Mee(new zee(n))})}(e):O2(e)?(()=>x2(this,void 0,void 0,function*(){return yield Ree.from(yield e)}))():z2(e)||j2(e)||V2(e)||D2(e)?function(e){return x2(this,void 0,void 0,function*(){const t=yield e.peek(Iee+7&-8);return t&&t.byteLength>=4?Aee(t)?new Dee(new Uee(yield e.read())):new Mee(new zee(e)):new Mee(new zee(function(){return S2(this,arguments,function*(){})}()))})}(new m8(e)):function(e){const t=e.peek(Iee+7&-8);return t&&t.byteLength>=4?Aee(t)?new Dee(new Uee(e.read())):new Oee(new Bee(e)):new Oee(new Bee(function*(){}()))}(new p8(e))}static readAll(e){return e instanceof Ree?e.isSync()?Wee(e):$ee(e):N2(e)||ArrayBuffer.isView(e)||M2(e)||F2(e)?Wee(e):$ee(e)}}class Oee extends Ree{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return S2(this,arguments,function*(){yield w2(yield*E2(C2(this[Symbol.iterator]())))})}}class Mee extends Ree{constructor(e){super(e),this._impl=e}readAll(){return x2(this,void 0,void 0,function*(){var e,t,n,i;const r=new Array;try{for(var o,s=!0,a=C2(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;const e=i;r.push(e)}}catch(l){t={error:l}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Dee extends Oee{constructor(e){super(e),this._impl=e}}class Nee extends Mee{constructor(e){super(e),this._impl=e}}class Fee{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const n=this._loadVectors(e,t,this.schema.fields),i=v7({type:new S5(this.schema.fields),length:e.length,children:n});return new Y9(this.schema,i)}_loadDictionaryBatch(e,t){const{id:n,isDelta:i}=e,{dictionaries:r,schema:o}=this,s=r.get(n),a=o.dictionaries.get(n),l=this._loadVectors(e.data,t,[a]);return(s&&i?s.concat(new U7(l)):new U7(l)).memoize()}_loadVectors(e,t,n){return new T8(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}}class Bee extends Fee{constructor(e,t){super(t),this._reader=N2(e)?new Cee(this._handle=e):new See(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Hee(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):c8}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):c8}next(){if(this.closed)return c8;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),i=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),i=t.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Z9(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class zee extends Fee{constructor(e,t){super(t),this._reader=new Eee(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return x2(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return x2(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Hee(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return x2(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):c8})}return(e){return x2(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):c8})}next(){return x2(this,void 0,void 0,function*(){if(this.closed)return c8;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),i=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),i=yield t.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Z9(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return x2(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class Uee extends Bee{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof y8?e:new y8(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const n=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(n&&this._handle.seek(n.offset)){const e=this._reader.readMessage(c4.RecordBatch);if(null==e?void 0:e.isRecordBatch()){const t=e.header(),n=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,n)}}return null}_readDictionaryBatch(e){var t;const n=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(n&&this._handle.seek(n.offset)){const e=this._reader.readMessage(c4.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){const t=e.header(),n=this._reader.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(t,n);this.dictionaries.set(t.id,i)}}}_readFooter(){const{_handle:e}=this,t=e.size-Pee,n=e.readInt32(t),i=e.readAt(t-n,n);return s8.decode(i)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(e)}return null}}class jee extends zee{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...t){const n="number"!=typeof t[0]?t.shift():void 0,i=t[0]instanceof Map?t.shift():void 0;super(e instanceof v8?e:new v8(e,n),i)}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return x2(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)})}readRecordBatch(e){return x2(this,void 0,void 0,function*(){var t;if(this.closed)return null;this._footer||(yield this.open());const n=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(n&&(yield this._handle.seek(n.offset))){const e=yield this._reader.readMessage(c4.RecordBatch);if(null==e?void 0:e.isRecordBatch()){const t=e.header(),n=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,n)}}return null})}_readDictionaryBatch(e){return x2(this,void 0,void 0,function*(){var t;const n=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(n&&(yield this._handle.seek(n.offset))){const e=yield this._reader.readMessage(c4.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){const t=e.header(),n=yield this._reader.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(t,n);this.dictionaries.set(t.id,i)}}})}_readFooter(){return x2(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-Pee,n=yield e.readInt32(t),i=yield e.readAt(t-n,n);return s8.decode(i)})}_readNextMessageAndValidate(e){return x2(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class Vee extends Bee{constructor(e,t){super(e,t)}_loadVectors(e,t,n){return new k8(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}}function Hee(e,t){return t&&"boolean"==typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*Wee(e){const t=Ree.from(e);try{if(!t.open({autoDestroy:!1}).closed)do{yield t}while(!t.reset().open().closed)}finally{t.cancel()}}function $ee(e){return S2(this,arguments,function*(){const t=yield w2(Ree.from(e));try{if(!(yield w2(t.open({autoDestroy:!1}))).closed)do{yield yield w2(t)}while(!(yield w2(t.reset().open())).closed)}finally{yield w2(t.cancel())}})}class Gee extends L5{static assemble(...e){const t=e=>e.flatMap(e=>Array.isArray(e)?t(e):e instanceof Y9?e.data.children:e.data),n=new Gee;return n.visitMany(t(e)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof U7)return this.visitMany(e.data),this;const{type:t}=e;if(!K4.isDictionary(t)){const{length:n}=e;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(K4.isUnion(t))this.nodes.push(new fee(n,0));else{const{nullCount:i}=e;K4.isNull(t)||qee.call(this,i<=0?new Uint8Array(0):d7(e.offset,n,e.nullBitmap)),this.nodes.push(new fee(n,i))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function qee(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new hee(this._byteLength,t)),this._byteLength+=t,this}function Yee(e){return qee.call(this,e.values.subarray(0,e.length*e.stride))}function Xee(e){const{length:t,values:n,valueOffsets:i}=e,r=m4(i[0]),o=m4(i[t]),s=Math.min(o-r,n.byteLength-r);return qee.call(this,J2(-r,t+1,i)),qee.call(this,n.subarray(r,r+s)),this}function Kee(e){const{length:t,valueOffsets:n}=e;if(n){const{0:i,[t]:r}=n;return qee.call(this,J2(-i,t+1,n)),this.visit(e.children[0].slice(i,r-i))}return this.visit(e.children[0])}function Zee(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Gee.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?qee.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?qee.call(this,d7(e.offset,e.length,t)):qee.call(this,h7(e.values))},Gee.prototype.visitInt=Yee,Gee.prototype.visitFloat=Yee,Gee.prototype.visitUtf8=Xee,Gee.prototype.visitLargeUtf8=Xee,Gee.prototype.visitBinary=Xee,Gee.prototype.visitLargeBinary=Xee,Gee.prototype.visitFixedSizeBinary=Yee,Gee.prototype.visitDate=Yee,Gee.prototype.visitTimestamp=Yee,Gee.prototype.visitTime=Yee,Gee.prototype.visitDecimal=Yee,Gee.prototype.visitList=Kee,Gee.prototype.visitStruct=Zee,Gee.prototype.visitUnion=function(e){var t;const{type:n,length:i,typeIds:r,valueOffsets:o}=e;if(qee.call(this,r),n.mode===s3.Sparse)return Zee.call(this,e);if(n.mode===s3.Dense){if(e.offset<=0)return qee.call(this,o),Zee.call(this,e);{const s=new Int32Array(i),a=Object.create(null),l=Object.create(null);for(let e,n,c=-1;++c<i;)void 0!==(e=r[c])&&(void 0===(n=a[e])&&(n=a[e]=o[c]),s[c]=o[c]-n,l[e]=(null!==(t=l[e])&&void 0!==t?t:0)+1);qee.call(this,s),this.visitMany(e.children.map((e,t)=>{const r=n.typeIds[t],o=a[r],s=l[r];return e.slice(o,Math.min(i,s))}))}}return this},Gee.prototype.visitInterval=Yee,Gee.prototype.visitDuration=Yee,Gee.prototype.visitFixedSizeList=Kee,Gee.prototype.visitMap=Kee;class Qee extends d8{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new f8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,R2(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return O2(e)?e.then(e=>this.writeAll(e)):D2(e)?nte(this,e):tte(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){var n;return e===this._sink||e instanceof f8?this._sink=e:(this._sink=new f8,e&&R2(n=e)&&L2(n.abort)&&L2(n.getWriter)&&!U2(n)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&(e=>R2(e)&&L2(e.end)&&L2(e.write)&&P2(e.writable)&&!U2(e))(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,t&&F9(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==e)return this.finish()&&void 0;if(e instanceof G9&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof Y9&&!(t=e.schema))return this.finish()&&void 0;if(t&&!F9(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof Y9?e instanceof Z9||this._writeRecordBatch(e):e instanceof G9?this.writeAll(e.batches):M2(e)&&this.writeAll(e)}_writeMessage(e,t=8){const n=t-1,i=cee.encode(e),r=i.byteLength,o=this._writeLegacyIpcFormat?4:8,s=r+o+n&~n,a=s-r-o;return e.headerType===c4.RecordBatch?this._recordBatchBlocks.push(new l8(s,e.bodyLength,this._position)):e.headerType===c4.DictionaryBatch&&this._dictionaryBlocks.push(new l8(s,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(s-o)),r>0&&this._write(i),this._writePadding(a)}_write(e){if(this._started){const t=X2(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(cee.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(kee)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:n,bufferRegions:i,buffers:r}=Gee.assemble(e),o=new uee(e.numRows,n,i),s=cee.from(o,t);return this._writeDictionaries(e)._writeMessage(s)._writeBodyBuffers(r)}_writeDictionaryBatch(e,t,n=!1){const{byteLength:i,nodes:r,bufferRegions:o,buffers:s}=Gee.assemble(new U7([e])),a=new uee(e.length,r,o),l=new dee(a,t,n),c=cee.from(l,i);return this._writeMessage(c)._writeBodyBuffers(s)}_writeBodyBuffers(e){let t,n,i;for(let r=-1,o=e.length;++r<o;)(t=e[r])&&(n=t.byteLength)>0&&(this._write(t),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(e){var t,n;for(const[i,r]of e.dictionaries){const e=null!==(t=null==r?void 0:r.data)&&void 0!==t?t:[],o=this._seenDictionaries.get(i),s=null!==(n=this._dictionaryDeltaOffsets.get(i))&&void 0!==n?n:0;if(o&&o.data[0]===e[0]){if(s<e.length)for(const t of e.slice(s))this._writeDictionaryBatch(t,i,!0)}else for(const[t,n]of e.entries())this._writeDictionaryBatch(n,i,t>0);this._seenDictionaries.set(i,r),this._dictionaryDeltaOffsets.set(i,e.length)}return this}}class Jee extends Qee{static writeAll(e,t){const n=new Jee(t);return O2(e)?e.then(e=>n.writeAll(e)):D2(e)?nte(n,e):tte(n,e)}}class ete extends Qee{static writeAll(e){const t=new ete;return O2(e)?e.then(e=>t.writeAll(e)):D2(e)?nte(t,e):tte(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,t,n=!1){if(!n&&this._seenDictionaries.has(t))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,t,n)}_writeFooter(e){const t=s8.encode(new s8(e,r3.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function tte(e,t){let n=t;t instanceof G9&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function nte(e,t){return x2(this,void 0,void 0,function*(){var n,i,r,o,s,a,l;try{for(n=!0,i=C2(t);!(o=(r=yield i.next()).done);n=!0){l=r.value,n=!1;const t=l;e.write(t)}}catch(c){s={error:c}}finally{try{n||o||!(a=i.return)||(yield a.call(i))}finally{if(s)throw s.error}}return e.finish()})}function ite(e){const t=Ree.from(e);return O2(t)?t.then(e=>ite(e)):t.isAsync()?t.readAll().then(e=>new G9(e)):new G9(t.readAll())}function rte(e,t="stream"){return("stream"===t?Jee:ete).writeAll(e).toUint8Array(!0)}var ote,ste=Object.create,ate=Object.defineProperty,lte=Object.getOwnPropertyDescriptor,cte=Object.getOwnPropertyNames,ute=Object.getPrototypeOf,dte=Object.prototype.hasOwnProperty,hte=((e,t)=>()=>(t||((t={exports:{}}).exports=Worker),t.exports))(),fte=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(fte||{}),pte=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(pte||{}),mte=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(mte||{}),gte=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(gte||{}),_te=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(_te||{}),yte=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(yte||{}),vte=class{log(e){}},bte=class{constructor(e=2){this.level=e}log(e){e.level,this.level}},xte=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",e[e.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",e))(xte||{}),wte=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=Ree.from(t);return new G9(n)}async send(e,t=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let n=await this._bindings.startPendingQuery(this._conn,e,t);for(;null==n;)n=await this._bindings.pollPendingQuery(this._conn);let i=new Ste(this._bindings,this._conn,n);return await Ree.from(i)}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new Ete(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=rte(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Ste=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(null!=this._inFlight&&(e=await this._inFlight,this._inFlight=null);null==e;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=0==e.length,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},Ete=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=Ree.from(t);return new G9(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new Ste(this.bindings,this.connectionId,t);return await Ree.from(n)}},Cte=((ote=Cte||{}).CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",ote.CLOSE_PREPARED="CLOSE_PREPARED",ote.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",ote.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",ote.CONNECT="CONNECT",ote.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",ote.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",ote.CREATE_PREPARED="CREATE_PREPARED",ote.DISCONNECT="DISCONNECT",ote.DROP_FILE="DROP_FILE",ote.DROP_FILES="DROP_FILES",ote.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",ote.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",ote.FLUSH_FILES="FLUSH_FILES",ote.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",ote.GET_TABLE_NAMES="GET_TABLE_NAMES",ote.GET_VERSION="GET_VERSION",ote.GLOB_FILE_INFOS="GLOB_FILE_INFOS",ote.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",ote.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",ote.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",ote.INSTANTIATE="INSTANTIATE",ote.OPEN="OPEN",ote.PING="PING",ote.POLL_PENDING_QUERY="POLL_PENDING_QUERY",ote.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",ote.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",ote.REGISTER_FILE_URL="REGISTER_FILE_URL",ote.RESET="RESET",ote.RUN_PREPARED="RUN_PREPARED",ote.RUN_QUERY="RUN_QUERY",ote.SEND_PREPARED="SEND_PREPARED",ote.START_PENDING_QUERY="START_PENDING_QUERY",ote.TOKENIZE="TOKENIZE",ote),Tte=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.PROGRESS_UPDATE="PROGRESS_UPDATE",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(Tte||{}),kte=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((e,t)=>{this.promiseResolver=e,this.promiseRejecter=t})}};function Ate(e){switch(e.typeId){case d4.Binary:return{sqlType:"binary"};case d4.Bool:return{sqlType:"bool"};case d4.Date:return{sqlType:"date"};case d4.DateDay:return{sqlType:"date32[d]"};case d4.DateMillisecond:return{sqlType:"date64[ms]"};case d4.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case d4.Float:return{sqlType:"float"};case d4.Float16:return{sqlType:"float16"};case d4.Float32:return{sqlType:"float32"};case d4.Float64:return{sqlType:"float64"};case d4.Int:return{sqlType:"int32"};case d4.Int16:return{sqlType:"int16"};case d4.Int32:return{sqlType:"int32"};case d4.Int64:return{sqlType:"int64"};case d4.Uint16:return{sqlType:"uint16"};case d4.Uint32:return{sqlType:"uint32"};case d4.Uint64:return{sqlType:"uint64"};case d4.Uint8:return{sqlType:"uint8"};case d4.IntervalDayTime:return{sqlType:"interval[dt]"};case d4.IntervalYearMonth:return{sqlType:"interval[m]"};case d4.List:return{sqlType:"list",valueType:Ate(e.valueType)};case d4.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case d4.Null:return{sqlType:"null"};case d4.Utf8:return{sqlType:"utf8"};case d4.Struct:return{sqlType:"struct",fields:e.children.map(e=>Ite(e.name,e.type))};case d4.Map:{let t=e;return{sqlType:"map",keyType:Ate(t.keyType),valueType:Ate(t.valueType)}}case d4.Time:return{sqlType:"time[s]"};case d4.TimeMicrosecond:return{sqlType:"time[us]"};case d4.TimeMillisecond:return{sqlType:"time[ms]"};case d4.TimeNanosecond:return{sqlType:"time[ns]"};case d4.TimeSecond:return{sqlType:"time[s]"};case d4.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case d4.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case d4.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case d4.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case d4.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Ite(e,t){let n=Ate(t);return n.name=e,n}var Pte=new TextEncoder,Lte=class{constructor(e,t=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),null!=t&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker)return;let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"PROGRESS_UPDATE":for(let e of this._onExecutionProgress)e(n.data);return;case"LOG":return void this._logger.log(n.data);case"INSTANTIATE_PROGRESS":for(let e of this._onInstantiationProgress)e(n.data);return}let i=this._pendingRequests.get(n.requestId);if(i){if(this._pendingRequests.delete(n.requestId),"ERROR"==n.type){let e=new Error(n.data.message);return e.name=n.data.name,null!=(t=Object.getOwnPropertyDescriptor(e,"stack"))&&t.writable&&(e.stack=n.data.stack),void i.promiseRejecter(e)}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if("OK"==n.type)return void i.promiseResolver(n.data);break;case"INSTANTIATE":if(this._onInstantiationProgress=[],"OK"==n.type)return void i.promiseResolver(n.data);break;case"GLOB_FILE_INFOS":if("FILE_INFOS"==n.type)return void i.promiseResolver(n.data);break;case"GET_VERSION":if("VERSION_STRING"==n.type)return void i.promiseResolver(n.data);break;case"GET_FEATURE_FLAGS":if("FEATURE_FLAGS"==n.type)return void i.promiseResolver(n.data);break;case"GET_TABLE_NAMES":if("TABLE_NAMES"==n.type)return void i.promiseResolver(n.data);break;case"TOKENIZE":if("SCRIPT_TOKENS"==n.type)return void i.promiseResolver(n.data);break;case"COPY_FILE_TO_BUFFER":if("FILE_BUFFER"==n.type)return void i.promiseResolver(n.data);break;case"EXPORT_FILE_STATISTICS":if("FILE_STATISTICS"==n.type)return void i.promiseResolver(n.data);break;case"CONNECT":if("CONNECTION_INFO"==n.type)return void i.promiseResolver(n.data);break;case"RUN_PREPARED":case"RUN_QUERY":if("QUERY_RESULT"==n.type)return void i.promiseResolver(n.data);break;case"SEND_PREPARED":if("QUERY_RESULT_HEADER"==n.type)return void i.promiseResolver(n.data);break;case"START_PENDING_QUERY":case"POLL_PENDING_QUERY":if("QUERY_RESULT_HEADER_OR_NULL"==n.type)return void i.promiseResolver(n.data);break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],"SUCCESS"==n.type)return void i.promiseResolver(n.data);break;case"FETCH_QUERY_RESULTS":if("QUERY_RESULT_CHUNK"==n.type)return void i.promiseResolver(n.data);break;case"CREATE_PREPARED":if("PREPARED_STATEMENT_ID"==n.type)return void i.promiseResolver(n.data)}i.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}}onError(e){this._pendingRequests.clear()}onClose(){this._workerShutdownResolver(null),0==this._pendingRequests.size&&this._pendingRequests.clear()}async reset(){let e=new kte("RESET",null);return await this.postTask(e)}async ping(){let e=new kte("PING",null);await this.postTask(e)}async dropFile(e){let t=new kte("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new kte("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new kte("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=e=>{}){this._onInstantiationProgress.push(n);let i=new kte("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new kte("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new kte("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new kte("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new kte("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new kte("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new wte(this,e)}async disconnect(e){let t=new kte("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new kte("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t,n=!1){let i=new kte("START_PENDING_QUERY",[e,t,n]);return await this.postTask(i)}async pollPendingQuery(e){let t=new kte("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new kte("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new kte("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new kte("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new kte("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new kte("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new kte("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new kte("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new kte("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=Pte.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){void 0===t&&(t=e);let r=new kte("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new kte("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new kte("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async registerOPFSFileName(e){let t=new kte("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(t,[])}async collectFileStatistics(e,t){let n=new kte("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new kte("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new kte("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new kte("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(0==t.length)return;let i=new kte("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(void 0!==n.columns){let e=[];for(let t in n.columns){let i=n.columns[t];e.push(Ite(t,i))}n.columnsFlat=e,delete n.columns}let i=new kte("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(void 0!==n.columns){let e=[];for(let t in n.columns){let i=n.columns[t];e.push(Ite(t,i))}n.columnsFlat=e,delete n.columns}let i=new kte("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}};new TextDecoder;var Rte=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(Rte||{}),Ote={name:"@duckdb/duckdb-wasm",version:"1.30.0"},Mte=Ote.name,Dte=Ote.version,Nte=Ote.version.split(".");Nte[0],Nte[1],Nte[2];var Fte=null,Bte=null,zte=null,Ute=null,jte=null;((e,t,n)=>{n=null!=e?ste(ute(e)):{},((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of cte(t))!dte.call(e,r)&&undefined!==r&&ate(e,r,{get:()=>t[r],enumerable:!(i=lte(t,r))||i.enumerable})})(e&&e.__esModule?n:ate(n,"default",{value:e,enumerable:!0}),e)})(hte());class Vte{constructor(e={}){s(this,"_ipc"),s(this,"_options"),s(this,"_db"),s(this,"_con"),s(this,"_config"),s(this,"_loadPromise");const{ipc:t,duckdb:n,connection:i,config:r,...o}=e;this._ipc=t,this._options=o,this._db=n,this._con=i,this._config=r}async getDuckDB(){return this._db||await Hte(this),this._db}async getConnection(){return this._con||await Hte(this),this._con}async query(e){const{type:t,sql:n}=e,i=await this.getConnection(),r=await function(e,t){return new Promise((n,i)=>{e.useUnsafe(async(e,r)=>{try{const i=await e.runQuery(r,t);n(i)}catch(o){i(o)}})})}(i,n);return"exec"===t?void 0:"arrow"===t?$Q(r,this._ipc):$Q(r).toArray()}}function Hte(e){return e._loadPromise||(e._loadPromise=(e._db?Promise.resolve(e._db):async function({log:e=!1}={}){const t=function(){let e="https://cdn.jsdelivr.net/npm/".concat(Mte,"@").concat(Dte,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}(),n=await async function(e){let t=await async function(){return null==Fte&&(Fte=typeof BigInt64Array<"u"),null==Bte&&(Bte=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])))()),null==zte&&(zte=await(async e=>{try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(t){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))),null==Ute&&(Ute=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))()),null==jte&&(jte=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])))()),{bigInt64Array:Fte,crossOriginIsolated:typeof navigator>"u"||globalThis.crossOriginIsolated||!1,wasmExceptions:Bte,wasmSIMD:Ute,wasmThreads:zte,wasmBulkMemory:jte}}();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}(t),i=URL.createObjectURL(new Blob([`importScripts("${n.mainWorker}");`],{type:"text/javascript"})),r=new Worker(i),o=e?new bte:new vte,s=new Lte(o,r);return await s.instantiate(n.mainModule,n.pthreadWorker),URL.revokeObjectURL(i),s}(e._options).then(t=>e._db=t)).then(t=>null!=e._config?t.open(e._config).then(()=>t):t).then(e=>e.connect()).then(t=>e._con=t)),e._loadPromise}const Wte=(e,t,n="info")=>{if(window.cosmographDisableLogging)return;let i,r;switch(n){case"ok":i="#54AE47",r=" ";break;case"info":i="#4196f8",r=" ";break;case"warn":i="#FFA500",r=" ";break;case"util":i="#666666",r=" ";break;case"error":i="#FF0000",r=" "}};var $te={};const Gte=(e,t,n=new Set)=>{if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(n.has(e))return!0;n.add(e);for(let i=0;i<e.length;i++)if(!Gte(e[i],t[i],n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(e===t)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;if(n.has(e))return!0;n.add(e);for(const i in e)if(!Gte(e[i],t[i],n))return!1;return!0}return e===t},qte=e=>{if(!e)return[];const t=e.numRows,n=e.schema.fields,i=new Array(t);for(let r=0;r<t;r++){const t={};for(let i=0;i<n.length;i++){const o=e.getChildAt(i);o&&(t[n[i].name]=o.get(r))}i[r]=t}return i},Yte=()=>{let e;try{e=!!$te.DEBUG}catch(t){e=!1}return e},Xte=(e,t)=>[Math.round(e),Math.round(t)],Kte=e=>`'${String(e).replace(/'/g,"''")}'`,Zte=e=>2===(null==e?void 0:e.typeId)||3===(null==e?void 0:e.typeId)||7===(null==e?void 0:e.typeId),Qte=e=>5===(null==e?void 0:e.typeId),Jte=e=>6===(null==e?void 0:e.typeId)||20===(null==e?void 0:e.typeId),ene=e=>12===(null==e?void 0:e.typeId)||13===(null==e?void 0:e.typeId),tne=e=>"string"==typeof e?/(\[\]|list)/i.test(e):ene(e??void 0),nne=()=>Math.random().toString(36).substring(2,9);var ine=Object.create,rne=Object.defineProperty,one=Object.getOwnPropertyDescriptor,sne=Object.getOwnPropertyNames,ane=Object.getPrototypeOf,lne=Object.prototype.hasOwnProperty,cne=((e,t)=>()=>(t||((t={exports:{}}).exports=Worker),t.exports))(),une=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(une||{}),dne=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(dne||{}),hne=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(hne||{}),fne=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(fne||{}),pne=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(pne||{}),mne=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(mne||{}),gne=class{log(e){}},_ne=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",e[e.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",e))(_ne||{}),yne=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=Ree.from(t);return new G9(n)}async send(e,t=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let n=await this._bindings.startPendingQuery(this._conn,e,t);for(;null==n;)n=await this._bindings.pollPendingQuery(this._conn);let i=new vne(this._bindings,this._conn,n);return await Ree.from(i)}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new bne(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=rte(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},vne=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(null!=this._inFlight&&(e=await this._inFlight,this._inFlight=null);null==e;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=0==e.length,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},bne=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=Ree.from(t);return new G9(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new vne(this.bindings,this.connectionId,t);return await Ree.from(n)}},xne=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(xne||{}),wne=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.PROGRESS_UPDATE="PROGRESS_UPDATE",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(wne||{}),Sne=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((e,t)=>{this.promiseResolver=e,this.promiseRejecter=t})}};function Ene(e){switch(e.typeId){case d4.Binary:return{sqlType:"binary"};case d4.Bool:return{sqlType:"bool"};case d4.Date:return{sqlType:"date"};case d4.DateDay:return{sqlType:"date32[d]"};case d4.DateMillisecond:return{sqlType:"date64[ms]"};case d4.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case d4.Float:return{sqlType:"float"};case d4.Float16:return{sqlType:"float16"};case d4.Float32:return{sqlType:"float32"};case d4.Float64:return{sqlType:"float64"};case d4.Int:return{sqlType:"int32"};case d4.Int16:return{sqlType:"int16"};case d4.Int32:return{sqlType:"int32"};case d4.Int64:return{sqlType:"int64"};case d4.Uint16:return{sqlType:"uint16"};case d4.Uint32:return{sqlType:"uint32"};case d4.Uint64:return{sqlType:"uint64"};case d4.Uint8:return{sqlType:"uint8"};case d4.IntervalDayTime:return{sqlType:"interval[dt]"};case d4.IntervalYearMonth:return{sqlType:"interval[m]"};case d4.List:return{sqlType:"list",valueType:Ene(e.valueType)};case d4.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case d4.Null:return{sqlType:"null"};case d4.Utf8:return{sqlType:"utf8"};case d4.Struct:return{sqlType:"struct",fields:e.children.map(e=>Cne(e.name,e.type))};case d4.Map:{let t=e;return{sqlType:"map",keyType:Ene(t.keyType),valueType:Ene(t.valueType)}}case d4.Time:return{sqlType:"time[s]"};case d4.TimeMicrosecond:return{sqlType:"time[us]"};case d4.TimeMillisecond:return{sqlType:"time[ms]"};case d4.TimeNanosecond:return{sqlType:"time[ns]"};case d4.TimeSecond:return{sqlType:"time[s]"};case d4.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case d4.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case d4.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case d4.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case d4.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Cne(e,t){let n=Ene(t);return n.name=e,n}var Tne=new TextEncoder,kne=class{constructor(e,t=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),null!=t&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker)return;let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"PROGRESS_UPDATE":for(let e of this._onExecutionProgress)e(n.data);return;case"LOG":return void this._logger.log(n.data);case"INSTANTIATE_PROGRESS":for(let e of this._onInstantiationProgress)e(n.data);return}let i=this._pendingRequests.get(n.requestId);if(i){if(this._pendingRequests.delete(n.requestId),"ERROR"==n.type){let e=new Error(n.data.message);return e.name=n.data.name,null!=(t=Object.getOwnPropertyDescriptor(e,"stack"))&&t.writable&&(e.stack=n.data.stack),void i.promiseRejecter(e)}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if("OK"==n.type)return void i.promiseResolver(n.data);break;case"INSTANTIATE":if(this._onInstantiationProgress=[],"OK"==n.type)return void i.promiseResolver(n.data);break;case"GLOB_FILE_INFOS":if("FILE_INFOS"==n.type)return void i.promiseResolver(n.data);break;case"GET_VERSION":if("VERSION_STRING"==n.type)return void i.promiseResolver(n.data);break;case"GET_FEATURE_FLAGS":if("FEATURE_FLAGS"==n.type)return void i.promiseResolver(n.data);break;case"GET_TABLE_NAMES":if("TABLE_NAMES"==n.type)return void i.promiseResolver(n.data);break;case"TOKENIZE":if("SCRIPT_TOKENS"==n.type)return void i.promiseResolver(n.data);break;case"COPY_FILE_TO_BUFFER":if("FILE_BUFFER"==n.type)return void i.promiseResolver(n.data);break;case"EXPORT_FILE_STATISTICS":if("FILE_STATISTICS"==n.type)return void i.promiseResolver(n.data);break;case"CONNECT":if("CONNECTION_INFO"==n.type)return void i.promiseResolver(n.data);break;case"RUN_PREPARED":case"RUN_QUERY":if("QUERY_RESULT"==n.type)return void i.promiseResolver(n.data);break;case"SEND_PREPARED":if("QUERY_RESULT_HEADER"==n.type)return void i.promiseResolver(n.data);break;case"START_PENDING_QUERY":case"POLL_PENDING_QUERY":if("QUERY_RESULT_HEADER_OR_NULL"==n.type)return void i.promiseResolver(n.data);break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],"SUCCESS"==n.type)return void i.promiseResolver(n.data);break;case"FETCH_QUERY_RESULTS":if("QUERY_RESULT_CHUNK"==n.type)return void i.promiseResolver(n.data);break;case"CREATE_PREPARED":if("PREPARED_STATEMENT_ID"==n.type)return void i.promiseResolver(n.data)}i.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}}onError(e){this._pendingRequests.clear()}onClose(){this._workerShutdownResolver(null),0==this._pendingRequests.size&&this._pendingRequests.clear()}async reset(){let e=new Sne("RESET",null);return await this.postTask(e)}async ping(){let e=new Sne("PING",null);await this.postTask(e)}async dropFile(e){let t=new Sne("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new Sne("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Sne("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=e=>{}){this._onInstantiationProgress.push(n);let i=new Sne("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new Sne("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Sne("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new Sne("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new Sne("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new Sne("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new yne(this,e)}async disconnect(e){let t=new Sne("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new Sne("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t,n=!1){let i=new Sne("START_PENDING_QUERY",[e,t,n]);return await this.postTask(i)}async pollPendingQuery(e){let t=new Sne("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new Sne("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new Sne("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new Sne("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new Sne("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new Sne("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new Sne("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new Sne("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new Sne("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=Tne.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){void 0===t&&(t=e);let r=new Sne("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new Sne("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new Sne("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async registerOPFSFileName(e){let t=new Sne("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(t,[])}async collectFileStatistics(e,t){let n=new Sne("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new Sne("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new Sne("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new Sne("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(0==t.length)return;let i=new Sne("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(void 0!==n.columns){let e=[];for(let t in n.columns){let i=n.columns[t];e.push(Cne(t,i))}n.columnsFlat=e,delete n.columns}let i=new Sne("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(void 0!==n.columns){let e=[];for(let t in n.columns){let i=n.columns[t];e.push(Cne(t,i))}n.columnsFlat=e,delete n.columns}let i=new Sne("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}};new TextDecoder;var Ane=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(Ane||{}),Ine={name:"@duckdb/duckdb-wasm",version:"1.29.1-dev260.0"},Pne=Ine.name,Lne=Ine.version,Rne=Ine.version.split(".");Rne[0],Rne[1],Rne[2];var One,Mne,Dne,Nne=null,Fne=null,Bne=null,zne=null,Une=null;((e,t,n)=>{n=null!=e?ine(ane(e)):{},((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of sne(t))!lne.call(e,r)&&undefined!==r&&rne(e,r,{get:()=>t[r],enumerable:!(i=one(t,r))||i.enumerable})})(e&&e.__esModule?n:rne(n,"default",{value:e,enumerable:!0}),e)})(cne()),function(e){e.RawPoints="temp_cosmograph_raw_points",e.RawLinks="temp_cosmograph_raw_links",e.PreparedPoints="temp_cosmograph_prepared_points",e.PreparedLinks="temp_cosmograph_prepared_links",e.Points="cosmograph_points",e.Links="cosmograph_links"}(One||(One={})),function(e){e.Id="id",e.Idx="idx",e.Sequence="points_idx_seq",e.Source="source",e.SourceIdx="sourceidx",e.Target="target",e.TargetIdx="targetidx"}(Mne||(Mne={})),function(e){e.Parquet="parquet",e.Arrow="arrow",e.CSV="csv",e.JSON="json"}(Dne||(Dne={}));const jne=Yte(),Vne=function(){let e="https://cdn.jsdelivr.net/npm/".concat(Pne,"@").concat(Lne,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}();let Hne=(e=class{constructor(){s(this,"_db"),s(this,"_connection"),s(this,"logTable",async(e,t=!1)=>{var n;if(!jne)return;const i=`SELECT COUNT(*) as count FROM ${e}`,r=await this.query(i);if(!r)return;null==(n=r.getChild("count"))||n.get(0);const o=`SELECT * FROM ${e} ${t?"":"LIMIT 10"}`,s=await this.query(o);s&&qte(s)})}static async getInstance(){return e._initPromise=(async()=>{const t=new e;return await t._init(),t})(),e._instance=await e._initPromise,e._instance}async _init(){const e=await async function(e){let t=await async function(){return null==Nne&&(Nne=typeof BigInt64Array<"u"),null==Fne&&(Fne=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])))()),null==Bne&&(Bne=await(async e=>{try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(t){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))),null==zne&&(zne=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))()),null==Une&&(Une=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])))()),{bigInt64Array:Nne,crossOriginIsolated:typeof navigator>"u"||globalThis.crossOriginIsolated||!1,wasmExceptions:Fne,wasmSIMD:zne,wasmThreads:Bne,wasmBulkMemory:Une}}();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}(Vne),t=URL.createObjectURL(new Blob([`importScripts("${e.mainWorker}");`],{type:"text/javascript"})),n=new Worker(t),i=new gne;this._db=new kne(i,n),await this._db.instantiate(e.mainModule,e.pthreadWorker),this._connection=await this._db.connect(),await this._connection.query("\n      SET max_expression_depth TO 20000000;\n      SET memory_limit = '10GB';\n    ".trim()),URL.revokeObjectURL(t)}get connection(){if(!this._connection)throw new Error("Cosmograph: DuckDB-Wasm connection is not initialized");return this._connection}get db(){if(!this._db)throw new Error("Cosmograph: DuckDB-Wasm is not initialized");return this._db}async destroy(){await this.connection.close(),await this.db.terminate(),e._instance=void 0,e._initPromise=void 0}async dropTable(e){await this.query(`DROP TABLE IF EXISTS "${e}"`)}async query(e){let t;jne&&(t=performance.now());try{return await this.connection.query(e)}catch(n){globalThis.__lastDuckdbError=String(n)}finally{jne&&void 0!==t&&performance.now()}}async exec(e){await this.query(e)}async send(e,t){try{const n=await this.connection.send(e);let i;for(;!(i=await n.next()).done;){const e=i.value;for(let n=0;n<e.numRows;n++){const i=e.getChildAt(n);t&&t(i)}}}catch(n){}}async uploadData(e,t,n=!1,i,r){if(Array.isArray(e)&&e.length>0&&e[0]&&"object"==typeof e[0])return await this.uploadObject(e,t,n);if(e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof G9)return await this._uploadArrow(e,t,n);if("string"==typeof e||e instanceof File){const s=(o=e instanceof File?e.name:e).endsWith(".arrow")?Dne.Arrow:o.endsWith(".parquet")||o.endsWith(".pq")?Dne.Parquet:o.endsWith(".csv")||o.endsWith(".tsv")?Dne.CSV:o.endsWith(".json")?Dne.JSON:"unknown";try{switch(s){case Dne.Arrow:return await this._uploadArrow(e,t,n);case Dne.Parquet:return await this._uploadParquet(e,t,n);case Dne.CSV:return await this._uploadCSV(e,t,n,i,r);case Dne.JSON:return await this._uploadJSON(e,t,n);default:throw new Error("Unsupported file type")}}catch(o){return{error:o}}}var o;return{error:"Could not upload data"}}async uploadArrow(e,t){return await this._uploadArrow(e,t)}async exportTableToArrow(e){try{const t=[],n=await this.connection.send(`SELECT * FROM ${e}`);let i;for(;!(i=await n.next()).done;){const e=i.value;e&&e.numRows&&t.push(e)}return t.length?new G9(t):void 0}catch(qe){throw qe}}async exportTableToArrowBuffer(e){const t=await this.exportTableToArrow(e);return t?rte(t):void 0}async exportTableToPq(e){var t,n;const i=`${e}.${Dne.Parquet}`;try{return await this.connection.query(`COPY ${e} TO '${i}' (FORMAT PARQUET)`),await(null==(t=this._db)?void 0:t.copyFileToBuffer(i))}catch(Ye){}finally{await(null==(n=this._db)?void 0:n.registerEmptyFileBuffer(i))}}async exportTableToCSV(e){var t,n;const i=`${e}.${Dne.CSV}`;try{return await this.connection.query(`COPY ${e} TO '${i}' (HEADER, DELIMITER ',')`),await(null==(t=this._db)?void 0:t.copyFileToBuffer(i))}catch(Ye){}finally{await(null==(n=this._db)?void 0:n.registerEmptyFileBuffer(i))}}async uploadObject(e,t,n=!1){if(0===e.length)return{};try{const i=`t_${t}`;await this.query(`DROP TABLE IF EXISTS "${i}"`);const r=function(e){const t=z9(e),n=new Y9(new e8(t.type.children),t.data[0]);return new G9(n)}(e);return await this.connection.insertArrowTable(r,{name:i}),await this._handleTableInsertion(i,t,n),await this.logTable(t),{}}catch(i){throw new Error(`Failed to upload Object: ${i}`)}}async _uploadCSV(e,t,n=!1,i,r){const o=`t_${t}`;let s=null;try{let a;if(e instanceof File){const t=await e.text();s=e.name,await this.db.registerFileText(s,t),a=s}else a=e;const l=`\n        CREATE TABLE ${o} AS SELECT * FROM read_csv_auto(\n          '${a}',\n          SAMPLE_SIZE=-1,\n          allow_quoted_nulls=true,\n          ignore_errors=true\n          ${i?`, timestampformat='${i}'`:""}\n          ${r?`, types=${JSON.stringify(r)}`:""}\n        )`.trim();return await this.query(l),await this._handleTableInsertion(o,t,n),await this.logTable(t),{}}catch(a){throw new Error(`Failed to upload CSV: ${a}`)}finally{s&&await this.db.dropFile(s)}}async _uploadParquet(e,t,n=!1){const i=`t_${t}`;let r=null;try{let o;e instanceof File?(r=e.name,await this.db.registerFileHandle(r,e,Ane.BROWSER_FILEREADER,!0),o=r):o=e;const s=`CREATE TABLE ${i} AS SELECT * FROM read_parquet('${o}')`;return await this.query(s),await this._handleTableInsertion(i,t,n),await this.logTable(t),{}}catch(o){const e=o instanceof Error?o.message:String(o);throw new Error(`Failed to upload Parquet: ${e}`)}finally{r&&await this.db.dropFile(r)}}async _uploadArrow(e,t,n=!1){try{let i;const r=`t_${t}`;if(await this.query(`DROP TABLE IF EXISTS "${r}"`),e instanceof File)i=await e.arrayBuffer(),i=new Uint8Array(i);else if("string"==typeof e){const t=await fetch(e);t.ok,i=await t.arrayBuffer(),i=new Uint8Array(i)}else i=e;const o=e instanceof G9?e:ite(i);return await this.connection.insertArrowTable(o,{name:r}),await this._handleTableInsertion(r,t,n),await this.logTable(t),{}}catch(i){const e=i instanceof Error?i.message:String(i);throw new Error(`Failed to upload Arrow: ${e}`)}}async _uploadJSON(e,t,n=!1){const i=`t_${t}`;await this.query(`DROP TABLE IF EXISTS "${i}"`);try{if(e instanceof File){const t=await e.text();await this.db.registerFileText("json",t)}else{const t=await fetch(e);t.ok;const n=await t.text();await this.db.registerFileText("json",n)}return await this.connection.insertJSONFromPath("json",{name:i}),await this._handleTableInsertion(i,t,n),await this.logTable(t),{}}catch(r){const e=r instanceof Error?r.message:String(r);throw new Error(`Failed to upload JSON: ${e}`)}finally{await this.db.dropFile("json")}}async _handleTableInsertion(e,t,n){n?(await this.query(`INSERT INTO "${t}" SELECT * FROM "${e}"`),await this.query(`DROP TABLE IF EXISTS "${e}"`)):(await this.query(`DROP TABLE IF EXISTS "${t}"`),await this.query(`ALTER TABLE "${e}" RENAME TO "${t}"`))}},s(e,"_instance"),s(e,"_initPromise"),e);const Wne=Yte();let $ne=class e{constructor(e,t){if(s(this,"_coordinator"),s(this,"_internalDB"),!e)return;const n=new d2;n.databaseConnector(e),Wne?n.manager.logQueries(!0):n.logger(null),this._coordinator=n,this._internalDB=t}static async create(t){let n,i;try{if(t)"string"==typeof t?(n=new b2({uri:t}),Wte(0,0,"ok")):(n=new Vte(t),Wte(0,0,"ok"));else{const e=Date.now();i=await Hne.getInstance(),n=new Vte({duckdb:i.db,connection:i.connection});const t=Date.now();Wte((t-e).toFixed(),0,"ok")}}catch(r){return void Wte(0,0,"error")}return new e(n,i)}get internalDB(){return this._internalDB}connect(e){var t,n;(null==(t=this._coordinator)?void 0:t.clients.has(e))||null==(n=this._coordinator)||n.connect(e)}disconnect(e){var t,n;(null==(t=this._coordinator)?void 0:t.clients.has(e))&&(null==(n=this._coordinator)||n.disconnect(e))}clearCache(){var e;null==(e=this._coordinator)||e.clear({cache:!0,clients:!1})}async destroy(){var e;null==(e=this._coordinator)||e.clear(),this._coordinator=void 0}query(e,t={}){const{cache:n=!1,...i}=t;return this._coordinator.query(e,{cache:n,...i})}};var Gne="http://www.w3.org/1999/xhtml";const qne={svg:"http://www.w3.org/2000/svg",xhtml:Gne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yne(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),qne.hasOwnProperty(t)?{space:qne[t],local:e}:e}function Xne(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Gne&&t.documentElement.namespaceURI===Gne?t.createElement(e):t.createElementNS(n,e)}}function Kne(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zne(e){var t=Yne(e);return(t.local?Kne:Xne)(t)}function Qne(){}function Jne(e){return null==e?Qne:function(){return this.querySelector(e)}}function eie(){return[]}function tie(e){return null==e?eie:function(){return this.querySelectorAll(e)}}function nie(e){return function(){return this.matches(e)}}function iie(e){return function(t){return t.matches(e)}}var rie=Array.prototype.find;function oie(){return this.firstElementChild}var sie=Array.prototype.filter;function aie(){return Array.from(this.children)}function lie(e){return new Array(e.length)}function cie(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function uie(e,t,n,i,r,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new cie(e,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function die(e,t,n,i,r,o,s){var a,l,c,u=new Map,d=t.length,h=o.length,f=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?r[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(i[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new cie(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function hie(e){return e.__data__}function fie(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function pie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mie(e){return function(){this.removeAttribute(e)}}function gie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _ie(e,t){return function(){this.setAttribute(e,t)}}function yie(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vie(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function bie(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xie(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wie(e){return function(){this.style.removeProperty(e)}}function Sie(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Eie(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Cie(e,t){return e.style.getPropertyValue(t)||xie(e).getComputedStyle(e,null).getPropertyValue(t)}function Tie(e){return function(){delete this[e]}}function kie(e,t){return function(){this[e]=t}}function Aie(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Iie(e){return e.trim().split(/^|\s+/)}function Pie(e){return e.classList||new Lie(e)}function Lie(e){this._node=e,this._names=Iie(e.getAttribute("class")||"")}function Rie(e,t){for(var n=Pie(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Oie(e,t){for(var n=Pie(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Mie(e){return function(){Rie(this,e)}}function Die(e){return function(){Oie(this,e)}}function Nie(e,t){return function(){(t.apply(this,arguments)?Rie:Oie)(this,e)}}function Fie(){this.textContent=""}function Bie(e){return function(){this.textContent=e}}function zie(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Uie(){this.innerHTML=""}function jie(e){return function(){this.innerHTML=e}}function Vie(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Hie(){this.nextSibling&&this.parentNode.appendChild(this)}function Wie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $ie(){return null}function Gie(){var e=this.parentNode;e&&e.removeChild(this)}function qie(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yie(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xie(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Kie(e,t,n){return function(){var i,r=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=t);this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Zie(e,t,n){var i=xie(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Qie(e,t){return function(){return Zie(this,e,t)}}function Jie(e,t){return function(){return Zie(this,e,t.apply(this,arguments))}}cie.prototype={constructor:cie,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Lie.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ere=[null];function tre(e,t){this._groups=e,this._parents=t}function nre(){return new tre([[document.documentElement]],ere)}function ire(e){return"string"==typeof e?new tre([[document.querySelector(e)]],[document.documentElement]):new tre([[e]],ere)}function rre(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}tre.prototype=nre.prototype={constructor:tre,select:function(e){"function"!=typeof e&&(e=Jne(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=t[r],l=a.length,c=i[r]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new tre(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):tie(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(i.push(e.call(s,s.__data__,c,a)),r.push(s));return new tre(i,r)},selectChild:function(e){return this.select(null==e?oie:function(e){return function(){return rie.call(this.children,e)}}("function"==typeof e?e:iie(e)))},selectChildren:function(e){return this.selectAll(null==e?aie:function(e){return function(){return sie.call(this.children,e)}}("function"==typeof e?e:iie(e)))},filter:function(e){"function"!=typeof e&&(e=nie(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s=t[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new tre(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,hie);var n,i=t?die:uie,r=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=r[u],h=o[u],f=h.length,p=fie(e.call(d,d&&d.__data__,u,r)),m=p.length,g=l[u]=new Array(m),_=a[u]=new Array(m);i(d,h,g,_,c[u]=new Array(f),p,t);for(var y,v,b=0,x=0;b<m;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(v=_[x])&&++x<m;);y._next=v||null}}return(a=new tre(a,r))._enter=l,a._exit=c,a},enter:function(){return new tre(this._enter||this._groups.map(lie),this._parents)},exit:function(){return new tre(this._exit||this._groups.map(lie),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c,u=n[l],d=i[l],h=u.length,f=a[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<r;++l)a[l]=n[l];return new tre(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=pie);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new tre(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],s=0,a=o.length;s<a;++s)(r=o[s])&&e.call(r,r.__data__,s,o);return this},attr:function(e,t){var n=Yne(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?gie:mie:"function"==typeof t?n.local?bie:vie:n.local?yie:_ie)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?wie:"function"==typeof t?Eie:Sie)(e,t,null==n?"":n)):Cie(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Tie:"function"==typeof t?Aie:kie)(e,t)):this.node()[e]},classed:function(e,t){var n=Iie(e+"");if(arguments.length<2){for(var i=Pie(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?Nie:t?Mie:Die)(n,t))},text:function(e){return arguments.length?this.each(null==e?Fie:("function"==typeof e?zie:Bie)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Uie:("function"==typeof e?Vie:jie)(e)):this.node().innerHTML},raise:function(){return this.each(Hie)},lower:function(){return this.each(Wie)},append:function(e){var t="function"==typeof e?e:Zne(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Zne(e),i=null==t?$ie:"function"==typeof t?t:Jne(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Gie)},clone:function(e){return this.select(e?Yie:qie)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?Kie:Xie,i=0;i<s;++i)this.each(a(o[i],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(i=0,l=a[c];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Jie:Qie)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};var ore={value:()=>{}};function sre(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new are(i)}function are(e){this._=e}function lre(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function cre(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=ore,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}are.prototype=sre.prototype={constructor:are,on:function(e,t){var n,i,r=this._,o=(i=r,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=o[s]).type)r[n]=cre(r[n],e.name,t);else if(null==t)for(n in r)r[n]=cre(r[n],e.name,null);return this}for(;++s<a;)if((n=(e=o[s]).type)&&(n=lre(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new are(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(i=this._[e]).length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};var ure,dre,hre=0,fre=0,pre=0,mre=0,gre=0,_re=0,yre="object"==typeof performance&&performance.now?performance:Date,vre="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bre(){return gre||(vre(xre),gre=yre.now()+_re)}function xre(){gre=0}function wre(){this._call=this._time=this._next=null}function Sre(e,t,n){var i=new wre;return i.restart(e,t,n),i}function Ere(){gre=(mre=yre.now())+_re,hre=fre=0;try{!function(){bre(),++hre;for(var e,t=ure;t;)(e=gre-t._time)>=0&&t._call.call(void 0,e),t=t._next;--hre}()}finally{hre=0,function(){for(var e,t,n=ure,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ure=t);dre=e,Tre(i)}(),gre=0}}function Cre(){var e=yre.now(),t=e-mre;t>1e3&&(_re-=t,mre=e)}function Tre(e){hre||(fre&&(fre=clearTimeout(fre)),e-gre>24?(e<1/0&&(fre=setTimeout(Ere,e-yre.now()-_re)),pre&&(pre=clearInterval(pre))):(pre||(mre=yre.now(),pre=setInterval(Cre,1e3)),hre=1,vre(Ere)))}function kre(e,t,n){var i=new wre;return t=null==t?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,n),i}wre.prototype=Sre.prototype={constructor:wre,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?bre():+n)+(null==t?0:+t),this._next||dre===this||(dre?dre._next=this:ure=this,dre=this),this._call=e,this._time=n,Tre()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tre())}};var Are=sre("start","end","cancel","interrupt"),Ire=[];function Pre(e,t,n,i,r,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function o(l){var c,u,d,h;if(1!==n.state)return a();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return kre(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(kre(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Sre(function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:r,on:Are,tween:Ire,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Lre(e,t){var n=Ore(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Rre(e,t){var n=Ore(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Ore(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mre(e,t){var n,i,r,o=e.__transition,s=!0;if(o){for(r in t=null==t?null:t+"",o)(n=o[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete e.__transition}}function Dre(e,t){var n,i;return function(){var r=Rre(this,e),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function Nre(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Rre(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function Fre(e,t,n){var i=e._id;return e.each(function(){var e=Rre(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Ore(e,i).value[t]}}function Bre(e,t){var n;return("number"==typeof t?pb:t instanceof Rv?ub:(n=Rv(t))?(t=n,ub):yb)(e,t)}function zre(e){return function(){this.removeAttribute(e)}}function Ure(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jre(e,t,n){var i,r,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===i?r:r=t(i=s,n)}}function Vre(e,t,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?r:r=t(i=s,n)}}function Hre(e,t,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=t(i=s,l));this.removeAttribute(e)}}function Wre(e,t,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=t(i=s,l));this.removeAttributeNS(e.space,e.local)}}function $re(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Gre(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function qre(e,t){return function(){Lre(this,e).delay=+t.apply(this,arguments)}}function Yre(e,t){return t=+t,function(){Lre(this,e).delay=t}}function Xre(e,t){return function(){Rre(this,e).duration=+t.apply(this,arguments)}}function Kre(e,t){return t=+t,function(){Rre(this,e).duration=t}}var Zre=nre.prototype.constructor;function Qre(e){return function(){this.style.removeProperty(e)}}var Jre=0;function eoe(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function toe(){return++Jre}var noe=nre.prototype;eoe.prototype={constructor:eoe,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Jne(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,c=i[s],u=c.length,d=o[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=e.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,Pre(d[h],t,n,h,d,Ore(a,n)));return new eoe(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tie(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,c=i[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=Ore(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&Pre(h,t,n,m,f,p);o.push(f),s.push(l)}return new eoe(o,s,t,n)},selectChild:noe.selectChild,selectChildren:noe.selectChildren,filter:function(e){"function"!=typeof e&&(e=nie(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s=t[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new eoe(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,c=t[a],u=n[a],d=c.length,h=s[a]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;a<i;++a)s[a]=t[a];return new eoe(s,this._parents,this._name,this._id)},selection:function(){return new Zre(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=toe(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=Ore(s,t);Pre(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new eoe(i,this._parents,e,n)},call:noe.call,nodes:noe.nodes,node:noe.node,size:noe.size,empty:noe.empty,each:noe.each,on:function(e,t){var n=this._id;return arguments.length<2?Ore(this.node(),n).on.on(e):this.each(function(e,t,n){var i,r,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Lre:Rre;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}(n,e,t))},attr:function(e,t){var n=Yne(e),i="transform"===n?kb:Bre;return this.attrTween(e,"function"==typeof t?(n.local?Wre:Hre)(n,i,Fre(this,"attr."+e,t)):null==t?(n.local?Ure:zre)(n):(n.local?Vre:jre)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=Yne(e);return this.tween(n,(i.local?$re:Gre)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?Tb:Bre;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var o=Cie(this,e),s=(this.style.removeProperty(e),Cie(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}(e,i)).on("end.style."+e,Qre(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,o;return function(){var s=Cie(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=Cie(this,e)),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}(e,i,Fre(this,"style."+e,t))).each(function(e,t){var n,i,r,o,s="style."+t,a="end."+s;return function(){var l=Rre(this,e),c=l.on,u=null==l.value[s]?o||(o=Qre(t)):void 0;c===n&&r===u||(i=(n=c).copy()).on(a,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,o=n+"";return function(){var s=Cie(this,e);return s===o?null:s===i?r:r=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,r;function o(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,o,n)),i}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Fre(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=Ore(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?Dre:Nre)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?qre:Yre)(t,e)):Ore(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Xre:Kre)(t,e)):Ore(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Rre(this,e).ease=t}}(t,e)):Ore(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Rre(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0===--r&&o()}};n.each(function(){var n=Rre(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t}),0===r&&o()})},[Symbol.iterator]:noe[Symbol.iterator]};var ioe={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function roe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}nre.prototype.interrupt=function(e){return this.each(function(){Mre(this,e)})},nre.prototype.transition=function(e){var t,n;e instanceof eoe?(t=e._id,e=e._name):(t=toe(),(n=ioe).time=bre(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)(s=a[c])&&Pre(s,e,t,c,a,n||roe(s,t));return new eoe(i,this._parents,e,t)};var ooe,soe,aoe=[],loe=function(){return aoe.some(function(e){return e.activeTargets.length>0})},coe="ResizeObserver loop completed with undelivered notifications.";(soe=ooe||(ooe={})).BORDER_BOX="border-box",soe.CONTENT_BOX="content-box",soe.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var uoe,doe=function(e){return Object.freeze(e)},hoe=function(){return function(e,t){this.inlineSize=e,this.blockSize=t,doe(this)}}(),foe=function(){function e(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,doe(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),poe=function(e){return e instanceof SVGElement&&"getBBox"in e},moe=function(e){if(poe(e)){var t=e.getBBox(),n=t.width,i=t.height;return!n&&!i}var r=e,o=r.offsetWidth,s=r.offsetHeight;return!(o||s||e.getClientRects().length)},goe=function(e){var t;if(e instanceof Element)return!0;var n=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},_oe="undefined"!=typeof window?window:{},yoe=new WeakMap,voe=/auto|scroll/,boe=/^tb|vertical/,xoe=/msie|trident/i.test(_oe.navigator&&_oe.navigator.userAgent),woe=function(e){return parseFloat(e||"0")},Soe=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new hoe((n?t:e)||0,(n?e:t)||0)},Eoe=doe({devicePixelContentBoxSize:Soe(),borderBoxSize:Soe(),contentBoxSize:Soe(),contentRect:new foe(0,0,0,0)}),Coe=function(e,t){if(void 0===t&&(t=!1),yoe.has(e)&&!t)return yoe.get(e);if(moe(e))return yoe.set(e,Eoe),Eoe;var n=getComputedStyle(e),i=poe(e)&&e.ownerSVGElement&&e.getBBox(),r=!xoe&&"border-box"===n.boxSizing,o=boe.test(n.writingMode||""),s=!i&&voe.test(n.overflowY||""),a=!i&&voe.test(n.overflowX||""),l=i?0:woe(n.paddingTop),c=i?0:woe(n.paddingRight),u=i?0:woe(n.paddingBottom),d=i?0:woe(n.paddingLeft),h=i?0:woe(n.borderTopWidth),f=i?0:woe(n.borderRightWidth),p=i?0:woe(n.borderBottomWidth),m=d+c,g=l+u,_=(i?0:woe(n.borderLeftWidth))+f,y=h+p,v=a?e.offsetHeight-y-e.clientHeight:0,b=s?e.offsetWidth-_-e.clientWidth:0,x=r?m+_:0,w=r?g+y:0,S=i?i.width:woe(n.width)-x-b,E=i?i.height:woe(n.height)-w-v,C=S+m+b+_,T=E+g+v+y,k=doe({devicePixelContentBoxSize:Soe(Math.round(S*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:Soe(C,T,o),contentBoxSize:Soe(S,E,o),contentRect:new foe(d,l,S,E)});return yoe.set(e,k),k},Toe=function(e,t,n){var i=Coe(e,n),r=i.borderBoxSize,o=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(t){case ooe.DEVICE_PIXEL_CONTENT_BOX:return s;case ooe.BORDER_BOX:return r;default:return o}},koe=function(){return function(e){var t=Coe(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=doe([t.borderBoxSize]),this.contentBoxSize=doe([t.contentBoxSize]),this.devicePixelContentBoxSize=doe([t.devicePixelContentBoxSize])}}(),Aoe=function(e){if(moe(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Ioe=function(){var e=1/0,t=[];aoe.forEach(function(n){if(0!==n.activeTargets.length){var i=[];n.activeTargets.forEach(function(t){var n=new koe(t.target),r=Aoe(t.target);i.push(n),t.lastReportedSize=Toe(t.target,t.observedBox),r<e&&(e=r)}),t.push(function(){n.callback.call(n.observer,i,n.observer)}),n.activeTargets.splice(0,n.activeTargets.length)}});for(var n=0,i=t;n<i.length;n++)(0,i[n])();return e},Poe=function(e){aoe.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(n){n.isActive()&&(Aoe(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))})})},Loe=[],Roe=0,Ooe={attributes:!0,characterData:!0,childList:!0,subtree:!0},Moe=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Doe=function(e){return void 0===e&&(e=0),Date.now()+e},Noe=!1,Foe=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Noe){Noe=!0;var n,i=Doe(e);n=function(){var n=!1;try{n=function(){var e,t=0;for(Poe(t);loe();)t=Ioe(),Poe(t);return aoe.some(function(e){return e.skippedTargets.length>0})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:coe}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=coe),window.dispatchEvent(e)),t>0}()}finally{if(Noe=!1,e=i-Doe(),!Roe)return;n?t.run(1e3):e>0?t.run(e):t.start()}},function(e){if(!uoe){var t=0,n=document.createTextNode("");new MutationObserver(function(){return Loe.splice(0).forEach(function(e){return e()})}).observe(n,{characterData:!0}),uoe=function(){n.textContent="".concat(t?t--:t++)}}Loe.push(e),uoe()}(function(){requestAnimationFrame(n)})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Ooe)};document.body?t():_oe.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Moe.forEach(function(t){return _oe.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Moe.forEach(function(t){return _oe.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}()),Boe=function(e){!Roe&&e>0&&Foe.start(),!(Roe+=e)&&Foe.stop()},zoe=function(){function e(e,t){this.target=e,this.observedBox=t||ooe.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Toe(this.target,this.observedBox,!0);return e=this.target,poe(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Uoe=function(){return function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}}(),joe=new WeakMap,Voe=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Hoe=function(){function e(){}return e.connect=function(e,t){var n=new Uoe(e,t);joe.set(e,n)},e.observe=function(e,t,n){var i=joe.get(e),r=0===i.observationTargets.length;Voe(i.observationTargets,t)<0&&(r&&aoe.push(i),i.observationTargets.push(new zoe(t,n&&n.box)),Boe(1),Foe.schedule())},e.unobserve=function(e,t){var n=joe.get(e),i=Voe(n.observationTargets,t),r=1===n.observationTargets.length;i>=0&&(r&&aoe.splice(aoe.indexOf(n),1),n.observationTargets.splice(i,1),Boe(-1))},e.disconnect=function(e){var t=this,n=joe.get(e);n.observationTargets.slice().forEach(function(n){return t.unobserve(e,n.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Woe=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Hoe.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!goe(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Hoe.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!goe(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Hoe.unobserve(this,e)},e.prototype.disconnect=function(){Hoe.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function $oe(e){return e}var Goe=1e-6;function qoe(e){return"translate("+e+",0)"}function Yoe(e){return t=>+e(t)}function Xoe(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Koe(){return!this.__axis}function Zoe(e,t){var n=[],i=null,r=null,o=6,s=6,a=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=qoe;function u(e){var u=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,d=null==r?t.tickFormat?t.tickFormat.apply(t,n):$oe:r,h=Math.max(o,0)+a,f=t.range(),p=+f[0]+l,m=+f[f.length-1]+l,g=(t.bandwidth?Xoe:Yoe)(t.copy(),l),_=e.selection?e.selection():e,y=_.selectAll(".domain").data([null]),v=_.selectAll(".tick").data(u,t).order(),b=v.exit(),x=v.enter().append("g").attr("class","tick"),w=v.select("line"),S=v.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(x),w=w.merge(x.append("line").attr("stroke","currentColor").attr("y2",1*o)),S=S.merge(x.append("text").attr("fill","currentColor").attr("y",1*h).attr("dy","0.71em")),e!==_&&(y=y.transition(e),v=v.transition(e),w=w.transition(e),S=S.transition(e),b=b.transition(e).attr("opacity",Goe).attr("transform",function(e){return isFinite(e=g(e))?c(e+l):this.getAttribute("transform")}),x.attr("opacity",Goe).attr("transform",function(e){var t=this.parentNode.__axis;return c((t&&isFinite(t=t(e))?t:g(e))+l)})),b.remove(),y.attr("d",s?"M"+p+","+1*s+"V"+l+"H"+m+"V"+1*s:"M"+p+","+l+"H"+m),v.attr("opacity",1).attr("transform",function(e){return c(g(e)+l)}),w.attr("y2",1*o),S.attr("y",1*h).text(d),_.filter(Koe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),_.each(function(){this.__axis=g})}return u.scale=function(e){return arguments.length?(t=e,u):t},u.ticks=function(){return n=Array.from(arguments),u},u.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),u):n.slice()},u.tickValues=function(e){return arguments.length?(i=null==e?null:Array.from(e),u):i&&i.slice()},u.tickFormat=function(e){return arguments.length?(r=e,u):r},u.tickSize=function(e){return arguments.length?(o=s=+e,u):o},u.tickSizeInner=function(e){return arguments.length?(o=+e,u):o},u.tickSizeOuter=function(e){return arguments.length?(s=+e,u):s},u.tickPadding=function(e){return arguments.length?(a=+e,u):a},u.offset=function(e){return arguments.length?(l=+e,u):l},u}function Qoe(e){return Zoe(0,e)}const Joe={capture:!0,passive:!1};function ese(e){e.preventDefault(),e.stopImmediatePropagation()}const tse=e=>()=>e;function nse(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function ise(e){e.preventDefault(),e.stopImmediatePropagation()}var rse={name:"drag"},ose={name:"space"},sse={name:"handle"},ase={name:"center"};const{abs:lse,max:cse,min:use}=Math;function dse(e){return[+e[0],+e[1]]}function hse(e){return[dse(e[0]),dse(e[1])]}var fse={name:"x",handles:["w","e"].map(xse),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},pse={},mse={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(xse),input:function(e){return null==e?null:hse(e)},output:function(e){return e}},gse={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_se={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yse={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},vse={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},bse={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function xse(e){return{type:e}}function wse(e){return!e.ctrlKey&&!e.button}function Sse(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ese(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cse(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Tse(){return kse(fse)}function kse(e){var t,n=Sse,i=wse,r=Ese,o=!0,s=sre("start","brush","end"),a=6;function l(t){var n=t.property("__brush",m).selectAll(".overlay").data([xse("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gse.overlay).merge(n).each(function(){var e=Cse(this).extent;ire(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([xse("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gse.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(e){return e.type});i.exit().remove(),i.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return gse[e.type]}),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=ire(this),t=Cse(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-a/2:t[0][0]-a/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-a/2:t[0][1]-a/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+a:a}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+a:a})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t,n){var i=e.__brush.emitter;return!i||n&&i.clean?new d(e,t,n):i}function d(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function h(n){if((!t||n.touches)&&i.apply(this,arguments)){var r,s,a,l,d,h,f,p,m,g,_,y=this,v=n.target.__data__.type,b="selection"===(o&&n.metaKey?v="overlay":v)?rse:o&&n.altKey?ase:sse,x=e===pse?null:vse[v],w=e===fse?null:bse[v],S=Cse(y),E=S.extent,C=S.selection,T=E[0][0],k=E[0][1],A=E[1][0],I=E[1][1],P=0,L=0,R=x&&w&&o&&n.shiftKey,O=Array.from(n.touches||[n],e=>{const t=e.identifier;return(e=rre(e,y)).point0=e.slice(),e.identifier=t,e});Mre(y);var M=u(y,arguments,!0).beforestart();if("overlay"===v){C&&(m=!0);const t=[O[0],O[1]||O[0]];S.selection=C=[[r=e===pse?T:use(t[0][0],t[1][0]),a=e===fse?k:use(t[0][1],t[1][1])],[d=e===pse?A:cse(t[0][0],t[1][0]),f=e===fse?I:cse(t[0][1],t[1][1])]],O.length>1&&z(n)}else r=C[0][0],a=C[0][1],d=C[1][0],f=C[1][1];s=r,l=a,h=d,p=f;var D=ire(y).attr("pointer-events","none"),N=D.selectAll(".overlay").attr("cursor",gse[v]);if(n.touches)M.moved=B,M.ended=U;else{var F=ire(n.view).on("mousemove.brush",B,!0).on("mouseup.brush",U,!0);o&&F.on("keydown.brush",function(e){switch(e.keyCode){case 16:R=x&&w;break;case 18:b===sse&&(x&&(d=h-P*x,r=s+P*x),w&&(f=p-L*w,a=l+L*w),b=ase,z(e));break;case 32:b!==sse&&b!==ase||(x<0?d=h-P:x>0&&(r=s-P),w<0?f=p-L:w>0&&(a=l-L),b=ose,N.attr("cursor",gse.selection),z(e));break;default:return}ise(e)},!0).on("keyup.brush",function(e){switch(e.keyCode){case 16:R&&(g=_=R=!1,z(e));break;case 18:b===ase&&(x<0?d=h:x>0&&(r=s),w<0?f=p:w>0&&(a=l),b=sse,z(e));break;case 32:b===ose&&(e.altKey?(x&&(d=h-P*x,r=s+P*x),w&&(f=p-L*w,a=l+L*w),b=ase):(x<0?d=h:x>0&&(r=s),w<0?f=p:w>0&&(a=l),b=sse),N.attr("cursor",gse[v]),z(e));break;default:return}ise(e)},!0),function(e){var t=e.document.documentElement,n=ire(e).on("dragstart.drag",ese,Joe);"onselectstart"in t?n.on("selectstart.drag",ese,Joe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(n.view)}c.call(y),M.start(n,b.name)}function B(e){for(const t of e.changedTouches||[e])for(const e of O)e.identifier===t.identifier&&(e.cur=rre(t,y));if(R&&!g&&!_&&1===O.length){const e=O[0];lse(e.cur[0]-e[0])>lse(e.cur[1]-e[1])?_=!0:g=!0}for(const t of O)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,ise(e),z(e)}function z(e){const t=O[0],n=t.point0;var i;switch(P=t[0]-n[0],L=t[1]-n[1],b){case ose:case rse:x&&(P=cse(T-r,use(A-d,P)),s=r+P,h=d+P),w&&(L=cse(k-a,use(I-f,L)),l=a+L,p=f+L);break;case sse:O[1]?(x&&(s=cse(T,use(A,O[0][0])),h=cse(T,use(A,O[1][0])),x=1),w&&(l=cse(k,use(I,O[0][1])),p=cse(k,use(I,O[1][1])),w=1)):(x<0?(P=cse(T-r,use(A-r,P)),s=r+P,h=d):x>0&&(P=cse(T-d,use(A-d,P)),s=r,h=d+P),w<0?(L=cse(k-a,use(I-a,L)),l=a+L,p=f):w>0&&(L=cse(k-f,use(I-f,L)),l=a,p=f+L));break;case ase:x&&(s=cse(T,use(A,r-P*x)),h=cse(T,use(A,d+P*x))),w&&(l=cse(k,use(I,a-L*w)),p=cse(k,use(I,f+L*w)))}h<s&&(x*=-1,i=r,r=d,d=i,i=s,s=h,h=i,v in _se&&N.attr("cursor",gse[v=_se[v]])),p<l&&(w*=-1,i=a,a=f,f=i,i=l,l=p,p=i,v in yse&&N.attr("cursor",gse[v=yse[v]])),S.selection&&(C=S.selection),g&&(s=C[0][0],h=C[1][0]),_&&(l=C[0][1],p=C[1][1]),C[0][0]===s&&C[0][1]===l&&C[1][0]===h&&C[1][1]===p||(S.selection=[[s,l],[h,p]],c.call(y),M.brush(e,b.name))}function U(e){if(function(e){e.stopImmediatePropagation()}(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout(function(){t=null},500)}else!function(e,t){var n=e.document.documentElement,i=ire(e).on("dragstart.drag",null);t&&(i.on("click.drag",ese,Joe),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,m),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),N.attr("cursor",gse.overlay),S.selection&&(C=S.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(C)&&(S.selection=null,c.call(y)),M.end(e,b.name)}}function f(e){u(this,arguments).moved(e)}function p(e){u(this,arguments).ended(e)}function m(){var t=this.__brush||{selection:null};return t.extent=hse(n.apply(this,arguments)),t.dim=e,t}return l.move=function(t,n,i){t.tween?t.on("start.brush",function(e){u(this,arguments).beforestart().start(e)}).on("interrupt.brush end.brush",function(e){u(this,arguments).end(e)}).tween("brush",function(){var t=this,i=t.__brush,r=u(t,arguments),o=i.selection,s=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),a=vb(o,s);function l(e){i.selection=1===e&&null===s?null:a(e),c.call(t),r.brush()}return null!==o&&null!==s?l:l(1)}):t.each(function(){var t=this,r=arguments,o=t.__brush,s=e.input("function"==typeof n?n.apply(t,r):n,o.extent),a=u(t,r).beforestart();Mre(t),o.selection=null===s?null:s,c.call(t),a.start(i).brush(i).end(i)})},l.clear=function(e,t){l.move(e,null,t)},d.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0===--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,i){var r=ire(this.that).datum();s.call(t,this.that,new nse(t,{sourceEvent:n,target:l,selection:e.output(this.state.selection),mode:i,dispatch:s}),r)}},l.extent=function(e){return arguments.length?(n="function"==typeof e?e:tse(hse(e)),l):n},l.filter=function(e){return arguments.length?(i="function"==typeof e?e:tse(!!e),l):i},l.touchable=function(e){return arguments.length?(r="function"==typeof e?e:tse(!!e),l):r},l.handleSize=function(e){return arguments.length?(a=+e,l):a},l.keyModifiers=function(e){return arguments.length?(o=!!e,l):o},l.on=function(){var e=s.on.apply(s,arguments);return e===s?l:e},l}const Ase={allowSelection:!0,showAnimationControls:!1,animationSpeed:50,padding:{top:1,left:5,bottom:1,right:5},axisTickHeight:16,selectionRadius:3,selectionPadding:8,barCount:250,barRadius:1,barPadding:.1,barTopMargin:20,minBarHeight:1,dataStep:void 0,tickStep:void 0,stickySelection:!0,formatter:void 0,onBrush:void 0,onBarHover:void 0,onAnimationPlay:void 0,onAnimationPause:void 0,onAnimationTick:void 0,noDataMessage:"No timeline data",loadingMessage:"Data loading..."},Ise=e=>"Function"!==e.constructor.name&&"Object"!==e.constructor.name,Pse=e=>(e=>e instanceof Object)(e)&&!(e=>Array.isArray(e))(e)&&!(e=>"function"==typeof e)(e)&&!Ise(e),Lse=(e,t=new Map)=>{if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const n=[];t.set(e,n);for(const i of e)n.push(t.has(i)?t.get(i):Lse(i,t));return e}if(Ise(e))return e;if(e instanceof Object){const n={};t.set(e,n);const i=e;return Object.keys(e).reduce((e,n)=>(e[n]=t.has(i[n])?t.get(i[n]):Lse(i[n],t),e),n),n}return e},Rse=(e,t,n=new Map)=>{const i=Ise(e)?e:Lse(e);return e===t?e:n.has(t)?n.get(t):(n.set(t,i),Object.keys(t).forEach(r=>{Pse(e[r])&&Pse(t[r])?i[r]=Rse(e[r],t[r],n):Ise(t)?i[r]=t:i[r]=Lse(t[r])}),i)},Ose=(e,t="",n,i)=>{if(!e)return"0";let r,o;n?(r=e,o=n):Math.abs(e)>=7e11?(r=e/1e12,o="T"):Math.abs(e)>=2e8?(r=e/1e9,o="B"):Math.abs(e)>=1e6?(r=e/1e6,o="M"):Math.abs(e)>=1e3?(r=e/1e3,o="K"):(r=e,o="");const s=Math.abs(r);void 0===i&&(i=Number.isInteger(s)?0:s<.1?3:s<1?2:s<10?1:0);let a=s>0&&s<.5/Math.pow(10,i);if(a){let e=i;for(;a&&e<8;)e++,a=s<.5/Math.pow(10,e);if(a)return`~${t??""}0`;i=e}let l=e<0?"-":"";return t&&(l+=t),`${l}${Kb(`.${i}~f`)(s)}${o}`};function Mse(e,t,n){if(!e)return[];const[i,r]=e,o=Math.abs(+r-+i),s=Number.isFinite(o)&&t>1?o/(t-1):1,a=n??s;if(0===a)return[];const l=Array.from({length:t},(e,t)=>+i+t*a);return l[t-1]=+r,l}function Dse(e,t,n,i=!1,r=!0){const o=Array.from({length:t.length-1},(e,n)=>[t[n],t[n+1]]),s=n&&i?o.filter(([e,t])=>{const[i,r]=n;return!(e<+i||t>=+r&&!(t>+i&&e<+r))}):o,a=function(e,t,n=t,i=[]){if(!e.length||!t.length||!n.length)return new Array(t.length).fill(0);const r=new Array(t.length).fill(0),o=new Map;for(const[l,c]of n){o.has(l)||o.set(l,new Map);for(let e=0;e<t.length;e++){const[n,i]=t[e];if(l===n&&c===i){o.get(l).set(c,e);break}}}const s=i.length>0?i[i.length-1]:t[t.length-1][1],a=[...n].sort((e,t)=>e[0]-t[0]);for(const l of e){let e=0,t=a.length-1;for(;e<=t;){const n=Math.floor((e+t)/2),[i,c]=a[n];if(l>=i&&(c===s?l<=c:l<c)){const e=o.get(i);if(e){const t=e.get(c);void 0!==t&&r[t]++}break}l<i?t=n-1:e=n+1}}return r}(e,o,s,t);return o.map(([e,t],n)=>({rangeStart:r?e:new Date(e),rangeEnd:r?t:new Date(t),count:a[n]??0}))}const Nse=mw(".%L"),Fse=mw(":%S"),Bse=mw("%I:%M"),zse=mw("%I %p"),Use=mw("%a %d"),jse=mw("%d %b"),Vse=mw("%b %Y"),Hse=mw("%Y"),Wse=36e5,$se=24*Wse,Gse=7*$se,qse=30*$se,Yse=365*$se,Xse=(e,t=null,n=!1)=>{if(n)return Ose(e);const i=new Date(e),r=null!==t?t:Date.now()-i.getTime();return(r<1e3?Nse:r<6e4?Fse:r<Wse?Bse:r<$se?zse:r<qse?r<Gse?Use:jse:r>20*Yse?Hse:Vse)(i)};!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Kse=Object.defineProperty,Zse=(e,t,n)=>((e,t,n)=>t in e?Kse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Qse={noDataMessage:"No data",loadingMessage:"Data loading...",disableStateMessages:!1,allowPointerEvents:!1};let Jse=class{constructor(e,t){Zse(this,"_displayStateDiv"),Zse(this,"_displayStateTimeout",null),Zse(this,"_displayStateConfig"),Zse(this,"_displayStateContainerNode"),this._displayStateContainerNode=e,this._displayStateConfig={...Qse,...t},"static"===getComputedStyle(e).position&&(e.style.position="relative"),this._displayStateDiv=this._createDisplayStateElement(),this._displayStateContainerNode.appendChild(this._displayStateDiv)}static extractConfig(e,t){return{noDataMessage:e.noDataMessage??t.noDataMessage,loadingMessage:e.loadingMessage??t.loadingMessage,disableStateMessages:e.disableStateMessages??t.disableStateMessages,allowPointerEvents:e.allowPointerEvents??t.allowPointerEvents}}_createDisplayStateElement(){const e=document.createElement("div");return e.classList.add("style_module_displayState__6ae19b84"),!1===this._displayStateConfig.allowPointerEvents&&(!1===this._displayStateConfig.noDataMessage?this._displayStateContainerNode.style.pointerEvents="none":this._displayStateContainerNode.style.pointerEvents=""),!this._displayStateConfig.disableStateMessages&&!1!==this._displayStateConfig.noDataMessage&&(e.textContent="string"==typeof this._displayStateConfig.noDataMessage?this._displayStateConfig.noDataMessage:Qse.noDataMessage),e}setLoadingState(){this._displayStateConfig.disableStateMessages||!1===this._displayStateConfig.loadingMessage?this._displayStateDiv.textContent="":this._displayStateDiv.textContent="string"==typeof this._displayStateConfig.loadingMessage?this._displayStateConfig.loadingMessage:Qse.loadingMessage}showState(e){this._resetDisplayStateTimeout(),this._displayStateConfig.disableStateMessages?this._displayStateDiv.textContent="":e?this._displayStateDiv.textContent=e:!1!==this._displayStateConfig.noDataMessage?this._displayStateDiv.textContent="string"==typeof this._displayStateConfig.noDataMessage?this._displayStateConfig.noDataMessage:Qse.noDataMessage:this._displayStateDiv.textContent="",!1===this._displayStateConfig.allowPointerEvents&&(this._displayStateContainerNode.style.pointerEvents="none"),"flex"!==this._displayStateDiv.style.display&&(this._displayStateTimeout=setTimeout(()=>{this._displayStateDiv.style.display="flex"},150))}hideState(){this._resetDisplayStateTimeout(),this._displayStateDiv.style.display="none",this._displayStateContainerNode.style.pointerEvents=""}setDisplayStateConfig(e){this._displayStateConfig={...this._displayStateConfig,...e}}_resetDisplayStateTimeout(){this._displayStateTimeout&&(clearTimeout(this._displayStateTimeout),this._displayStateTimeout=null)}destroy(){var e,t;this._resetDisplayStateTimeout(),null==(t=null==(e=this._displayStateDiv)?void 0:e.parentNode)||t.removeChild(this._displayStateDiv)}};const eae="style_module_bar__114fa79f",tae="style_module_bars__097b45e0",nae="style_module_hidden__a73fe81a",iae="style_module_disabled__eb988570",rae="style_module_highlightedBar__c2fc9bdc",oae="style_module_playAnimation__c1180703",sae="style_module_pauseAnimation__d6cfd97b";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var aae=Object.defineProperty,lae=(e,t,n)=>((e,t,n)=>t in e?aae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class cae extends Jse{constructor(e,t){const n=Rse(Ase,t??{});super(e,Jse.extractConfig(n,Ase)),lae(this,"_config"),lae(this,"_animationInterval"),lae(this,"_isAnimationRunning",!1),lae(this,"_svgParser",new DOMParser),lae(this,"_svg"),lae(this,"_animationControlDiv"),lae(this,"_playButtonSvg"),lae(this,"_pauseButtonSvg"),lae(this,"_containerNode"),lae(this,"_axisGroup"),lae(this,"_barsGroup"),lae(this,"_brushGroup"),lae(this,"_highlightedBarsGroup"),lae(this,"_resizeObserver"),lae(this,"_height",0),lae(this,"_width",0),lae(this,"_timelineWidth",0),lae(this,"_timelineHeight",0),lae(this,"_barWidth",0),lae(this,"_maxCount",0),lae(this,"_barsData",[]),lae(this,"_highlightedBarsData",[]),lae(this,"_highlightedData"),lae(this,"_timeData"),lae(this,"_extent"),lae(this,"_bandIntervals",[]),lae(this,"_currentSelection"),lae(this,"_currentSelectionInPixels"),lae(this,"_isNumericTimeline",!1),lae(this,"_firstRender",!0),lae(this,"_yScale",px()),lae(this,"_timeScale",FS()),lae(this,"_numScale",nx()),lae(this,"_activeAxisScale",this._timeScale),lae(this,"_timeAxis",Qoe(this._timeScale)),lae(this,"_numAxis",Qoe(this._numScale)),lae(this,"_brushInstance"),lae(this,"_toggleAnimation",e=>{e.preventDefault(),this._isAnimationRunning?this.pauseAnimation():this.playAnimation()}),lae(this,"_disableAnimation",()=>{var e,t;this.pauseAnimation(),null==(e=this._animationControlDiv)||e.removeEventListener("click",this._toggleAnimation),null==(t=this._animationControlDiv)||t.remove()}),lae(this,"playAnimation",()=>{var e,t,n,i;clearInterval(this._animationInterval),this._currentSelectionInPixels&&(this._animationInterval=setInterval(this._animateSelection,this._config.animationSpeed??0),this._isAnimationRunning=!0,null==(t=(e=this._config).onAnimationPlay)||t.call(e,this._isAnimationRunning,this._currentSelection),null==(n=this._pauseButtonSvg)||n.classList.remove(nae),null==(i=this._playButtonSvg)||i.classList.add(nae))}),lae(this,"pauseAnimation",()=>{var e,t,n,i;clearInterval(this._animationInterval),this._isAnimationRunning=!1,null==(t=(e=this._config).onAnimationPause)||t.call(e,this._isAnimationRunning,this._currentSelection),null==(n=this._pauseButtonSvg)||n.classList.add(nae),null==(i=this._playButtonSvg)||i.classList.remove(nae)}),lae(this,"stopAnimation",()=>{var e,t;this.pauseAnimation(),this.setSelection(void 0),null==(t=(e=this._config).onBrush)||t.call(e,void 0)}),lae(this,"_animateSelection",()=>{var e,t,n,i;const r=this._currentSelectionInPixels;r&&void 0!==r[0]&&void 0!==r[1]&&(this._setSelectionInPixels([r[0]+this._barWidth,r[1]+this._barWidth]),null==(t=(e=this._config).onAnimationTick)||t.call(e,this._currentSelection),(r[1]===(null==(n=this._currentSelectionInPixels)?void 0:n[1])||void 0===(null==(i=this._currentSelectionInPixels)?void 0:i[1]))&&this.stopAnimation())}),lae(this,"destroy",()=>{super.destroy(),this._resizeObserver.disconnect(),this._containerNode.innerHTML="",clearInterval(this._animationInterval)}),this._config=n,this._containerNode=e,this._containerNode.classList.add("style_module_timeline__736434f7"),this._animationControlDiv=document.createElement("div"),this._animationControlDiv.classList.add("style_module_animationControl__ee52cd66"),this._containerNode.appendChild(this._animationControlDiv),this._initializeSVG(),this._initializeGroups(),this._initAnimationControls(),this._resizeObserver=new Woe(()=>{this.resize()}),this._resizeObserver.observe(this._containerNode)}_initializeSVG(){this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.classList.add("style_module_timelineSvg__b916ad04"),this._containerNode.appendChild(this._svg)}async _initAnimationControls(){await(async()=>{var e,t;if(!this._animationControlDiv.firstChild){const n=this._svgParser.parseFromString('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg>',"image/svg+xml").firstChild,i=this._svgParser.parseFromString('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"/></svg>',"image/svg+xml").firstChild;this._pauseButtonSvg=null==(e=this._animationControlDiv)?void 0:e.appendChild(i),this._playButtonSvg=null==(t=this._animationControlDiv)?void 0:t.appendChild(n)}})().then(()=>{var e,t,n,i,r;this._isAnimationRunning?(null==(n=this._playButtonSvg)||n.classList.add(oae,nae),null==(i=this._pauseButtonSvg)||i.classList.add(sae)):(null==(e=this._playButtonSvg)||e.classList.add(oae),null==(t=this._pauseButtonSvg)||t.classList.add(sae,nae)),this._currentSelection||null==(r=this._animationControlDiv)||r.classList.add(iae),this._animationControlDiv.addEventListener("click",this._toggleAnimation)})}setLoadingState(){super.setLoadingState()}_initializeGroups(){this._axisGroup=ire(this._svg).append("g").attr("class","style_module_axis__5ff3086c"),this._barsGroup=ire(this._svg).append("g").attr("class",tae),this._highlightedBarsGroup=ire(this._svg).append("g").attr("class",tae),this._brushGroup=ire(this._svg).append("g").attr("class","style_module_brush__39277182")}get _barPadding(){return this._barWidth*(this._config.barPadding??0)}getCurrentSelection(){return this._currentSelection}getCurrentSelectionInPixels(){return this._currentSelectionInPixels}getBarWidth(){return this._barWidth-this._barPadding}getConfig(){return this._config}getIsAnimationRunning(){return this._isAnimationRunning}setConfig(e){var t,n,i,r;const o=JSON.parse(JSON.stringify(this._config));this._config=Rse(Ase,e??{}),this.setDisplayStateConfig(Jse.extractConfig(this._config,Ase)),o.formatter!==this._config.formatter&&this._checkFormatter(),null!=(t=this._config)&&t.showAnimationControls?null!=(n=this._animationControlDiv)&&n.isConnected||this._initAnimationControls():this._animationControlDiv&&this._disableAnimation(),this._config.allowSelection||this._disableBrush(),((null==(i=this._config)?void 0:i.dataStep)!==o.dataStep||(null==(r=this._config)?void 0:r.barCount)!==o.barCount)&&(this._updateTimelineData(this._timeData),this._updateTimelineData(this._highlightedData,!0)),this.resize()}_checkFormatter(){this._config.formatter?(this._timeAxis.tickFormat(e=>this._config.formatter(e)),this._numAxis.tickFormat(e=>this._config.formatter(e))):this._extent&&(this._timeAxis.tickFormat(e=>Xse(e,+this._extent[1]-+this._extent[0],this._isNumericTimeline)),this._numAxis.tickFormat(e=>Xse(e,+this._extent[1]-+this._extent[0],this._isNumericTimeline)))}_parseData(e){if(null==e||!e.length)return[];const t=new Float64Array(e.length);let n=0;for(let i=0;i<e.length;i++){const r=e[i];let o;o=r instanceof Date?r.getTime():r,o&&!isNaN(o)&&(t[n++]=this._normalizeTimeToMilliseconds(o))}return Array.from(t.subarray(0,n))}setTimeData(e,t){if(this._highlightedBarsData=[],this._timeData=[],this._currentSelection=void 0,t&&t[1]<=t[0])return;if(this._brushCurrentSelection(),e&&e.length>1){const t=e[0],n=t instanceof Date&&!isNaN(t.getTime()),i="number"==typeof t&&new Date(t).getFullYear()>1970;this._isNumericTimeline=!n&&!i}const n=this._parseData(e),i=t||Hy(n),r=i[0]<i[1]&&n.length>1;ire(this._animationControlDiv).style("display",r?"flex":"none"),r?(this.hideState(),this._timeData=n,this._extent=i,this._firstRender=!0):(this.showState("Empty or invalid timeline data"),this.render()),this._updateTimelineData(this._timeData),this._updateScales(),this.render()}setHighlightedData(e){this._highlightedBarsData=[],this._timeData&&(this._highlightedData=this._parseData(e),this._updateTimelineData(this._highlightedData,!0),this._updateBars(!0))}_updateTimelineData(e=[],t=!1){const n=t?"_highlightedBarsData":"_barsData";if(!this._extent)return void(this[n]=[]);if(!e.length)return void(this[n]=Dse([],this._bandIntervals,this._currentSelection,t));t||this._generateBandIntervals();const i=Dse(e,this._bandIntervals,this._currentSelection,t);this[n]=i,t||(this._maxCount=Math.max(...i.map(e=>e.count)))}_generateBandIntervals(){if(!this._extent)return;const{barCount:e=30,dataStep:t}=this._config;this._bandIntervals=Mse(this._extent,e,t)}setSelection(e,t=!1){var n,i,r,o,s,a,l;const c=this._currentSelection;if(e&&this._extent){const t=[Math.max(+this._extent[0],Math.min(+e[0],+this._extent[1])),Math.min(+this._extent[1],Math.max(+e[1],+this._extent[0]))];if(t[0]<t[1]){if(this._config.stickySelection){const e=t.map(this._activeAxisScale);this._mapSelection(e)}else this._currentSelection=t;null==(n=this._animationControlDiv)||n.classList.remove(iae)}else this._currentSelection=void 0,null==(i=this._animationControlDiv)||i.classList.add(iae)}else this._currentSelection=void 0,null==(r=this._animationControlDiv)||r.classList.add(iae);!t&&((null==c?void 0:c[0])!==(null==(o=this._currentSelection)?void 0:o[0])||(null==c?void 0:c[1])!==(null==(s=this._currentSelection)?void 0:s[1]))&&(null==(l=(a=this._config).onBrush)||l.call(a,this._currentSelection,!0)),this._brushCurrentSelection()}_setSelectionInPixels(e){var t,n,i,r,o;if(e){const i=[Math.max(0,Math.min(e[0],this._timelineWidth)),Math.min(this._timelineWidth,Math.max(e[1],0))];i[0]<i[1]?(this._currentSelection=i.map(e=>this._activeAxisScale.invert(e)),null==(t=this._animationControlDiv)||t.classList.remove(iae)):(this._currentSelection=void 0,null==(n=this._animationControlDiv)||n.classList.add(iae))}else this._currentSelection=void 0,null==(i=this._animationControlDiv)||i.classList.add(iae);null==(o=(r=this._config).onBrush)||o.call(r,this._currentSelection),this._brushCurrentSelection()}updateDimensions(){var e,t,n,i;const{height:r,width:o}=(e=>{const t=getComputedStyle(e);let n=e.clientWidth,i=e.clientHeight;return i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),{height:i,width:n}})(this._containerNode),{offsetWidth:s}=this._animationControlDiv;this._width=o,this._height=r,this._timelineWidth=this._width-((null==(e=this._config.padding)?void 0:e.left)??0)-((null==(t=this._config.padding)?void 0:t.right)??0)-s,this._timelineHeight=this._height-((null==(n=this._config.padding)?void 0:n.top)??0)-((null==(i=this._config.padding)?void 0:i.bottom)??0)}resize(){var e,t;this.updateDimensions();const n=(null==(e=this._config.padding)?void 0:e.top)??0,i=(null==(t=this._config.padding)?void 0:t.bottom)??0;this._timelineHeight>n+i&&(this._updateScales(),this._checkLastTickPosition(),this._currentSelection&&this.setSelection(this._currentSelection,!0),this.render())}render(){this._timelineHeight<=0||this._timelineWidth<=0?this._axisGroup.style("display","none"):(this._firstRender&&(this.updateDimensions(),this._updateScales(),this._checkLastTickPosition()),this._updateBrush(),this._updateBars(),this._updateBars(!0),this._updateAxis(),this._firstRender&&(this._firstRender=!1))}_updateAxis(){if(!this._timeData||!this._timeData.length)return void this._axisGroup.style("display","none");const{padding:e,axisTickHeight:t,selectionPadding:n}=this._config;this._axisGroup.style("transform",`translate(${((null==e?void 0:e.left)??0)+1}px, ${((null==e?void 0:e.top)??0)+(t??0)+1+(n??0)/2}px)`).call(this._isNumericTimeline?this._numAxis:this._timeAxis).call(e=>e.select(".domain").remove()),this._axisGroup.selectAll(".tick").select("text").attr("class","style_module_axisTick__5865631d").attr("y",0).attr("dy",-(t??0)).attr("dx","5px"),this._axisGroup.selectAll("line").attr("class","style_module_axisLine__992b502d").attr("y2",-(t??0))}_updateBrush(){if(!this._config.allowSelection||this._timelineHeight<0||this._timelineWidth<0)return void this._brushGroup.selectAll("*").remove();const{selectionPadding:e,padding:t,selectionRadius:n}=this._config,i=this._timelineHeight-(e??0),r=[[0,(e??0)/2],[this._timelineWidth,i+(e??0)/2]];this._brushInstance=Tse().extent(r),this._brushInstance.on("end",({selection:e,sourceEvent:t})=>{var n,i,r,o,s,a;t&&(e?(this._config.stickySelection?this._mapSelection(e):this._currentSelection=e.map(e=>this._activeAxisScale.invert(e)),null==(n=this._animationControlDiv)||n.classList.remove(iae),null==(r=(i=this._config).onBrush)||r.call(i,this._currentSelection)):(this._currentSelection=void 0,null==(s=(o=this._config).onBrush)||s.call(o,void 0),null==(a=this._animationControlDiv)||a.classList.add(iae)),this._brushCurrentSelection())}),this._brushGroup.style("transform",`translate(${(null==t?void 0:t.left)??0}px, ${(null==t?void 0:t.top)??0}px)`).call(this._brushInstance).call(this._brushInstance.move,this._currentSelectionInPixels||null),this._brushGroup.select("rect.selection").classed("style_module_selection__ebee57f8",!0).attr("rx",n??0).attr("ry",n??0)}_updateBars(e=!1){const{padding:t,selectionPadding:n}=this._config,i=e?this._highlightedBarsGroup:this._barsGroup;if(!this._timeData||!this._timeData.length)return void i.selectAll("rect").remove();i.style("transform",`translate(${(null==t?void 0:t.left)??0}px, ${((null==t?void 0:t.top)??0)-(n??0)/2}px)`);const r=e?.5:1,o=this._createBars(i,e);!e&&this._config.onBarHover&&o.on("mouseover",e=>{var t,n;return null==(n=(t=this._config).onBarHover)?void 0:n.call(t,e)}),this._animateBars(o,e,r)}_createBars(e,t){return this._activeAxisScale&&this._yScale&&this._barsData.length?e.selectAll(`.${t?rae:eae}`).data(t?this._highlightedBarsData:this._barsData).join("rect").attr("class",t?rae:eae).attr("x",e=>this._activeAxisScale(e.rangeStart)+this._barPadding/2).attr("width",this.getBarWidth()).attr("rx",this._config.barRadius??0).attr("ry",this._config.barRadius??0).attr("y",-this._timelineHeight):(e.selectAll("rect").remove(),e.selectAll("rect"))}_animateBars(e,t,n){e.transition().duration(this._isAnimationRunning?0:300).attr("height",e=>t&&0===e.count?0:this._yScale(e.count)).style("opacity",e=>this._yScale(e.count)===(this._config.minBarHeight??0)?.4:n)}_updateScales(){if(!this._extent||!this._barsData.length||this._timelineHeight<0||this._timelineWidth<0)return void this._axisGroup.style("display","none");this._checkFormatter(),this._axisGroup.style("display","inherit");const e=this._barsData[this._barsData.length-1],t=Math.floor(this._timelineWidth/100),n=this._barsData.map(e=>e.rangeStart);let i;if(n.length>t){const e=Math.ceil(n.length/t);i=n.filter((t,n)=>n%e===0)}else i=n;(this._isNumericTimeline?this._numAxis:this._timeAxis).tickValues(i);const r=Math.max(0,this._maxCount),o=Math.max(0,this._config.minBarHeight??0),s=Math.max(0,this._timelineHeight-(this._config.barTopMargin??0)-(this._config.selectionPadding??0));this._yScale.range([o,s]).domain([0,r]).clamp(!0);const a=[this._extent[0],e.rangeEnd],l=[0,this._timelineWidth],c=this._isNumericTimeline?this._numScale:this._timeScale;c.domain(a),c.range(l),c.clamp(!0),this._activeAxisScale=c;const u=this._barsData[0],d=this._activeAxisScale(u.rangeEnd)-this._activeAxisScale(u.rangeStart);this._barWidth=d}_disableBrush(){var e,t;null==(e=this._brushInstance)||e.clear(this._brushGroup),this._currentSelectionInPixels=void 0,this._currentSelection=void 0,this.pauseAnimation(),this._brushGroup.selectAll("*").remove(),this._config.showAnimationControls&&(null==(t=this._animationControlDiv)||t.classList.add(iae))}_mapSelection(e){if(!this._barsData.length)return;const t=this._activeAxisScale.invert(e[0]),n=this._activeAxisScale.invert(e[1]),i=this._getClosestRange(+t),r=this._getClosestRange(+n,!0);i&&r&&i.rangeStart<=r.rangeEnd&&e[1]-e[0]>this.getBarWidth()/2?this._currentSelection=[i.rangeStart,r.rangeEnd]:this._currentSelection=void 0}_getClosestRange(e,t){return this._barsData.reduce((n,i)=>{const r=t?n.rangeEnd:n.rangeStart,o=t?i.rangeEnd:i.rangeStart;return Math.abs(+o-+e)<Math.abs(+r-+e)?i:n})}_checkLastTickPosition(){var e;const t=this._axisGroup.selectAll(".tick:last-of-type").nodes();if(null!=t&&t.length){const n=t[0],i=null==n?void 0:n.getBoundingClientRect().right,r=null==(e=this._svg)?void 0:e.getBoundingClientRect().right;n.style.display=i>=r?"none":"inherit"}}_brushCurrentSelection(){var e;this._currentSelection?(this._currentSelectionInPixels=this._currentSelection.map(this._activeAxisScale),this._brushInstance&&!this._firstRender&&this._brushGroup.call(this._brushInstance.move,this._currentSelectionInPixels)):(this._currentSelectionInPixels=void 0,null==(e=this._brushInstance)||e.clear(this._brushGroup))}_normalizeTimeToMilliseconds(e){if(e<1e13)return e;const t=10**(Math.floor(Math.log10(e))-12);return Math.round(e/t*1e3)/1e3}}const uae={debounceTime:300,suggestionsLimit:50,maxVisibleItems:10,minSearchLength:2,highlightMatch:!0,disabled:!1,openListUpwards:!1,placeholderRenderer:"Search...",suggestionRenderer:e=>String(e),selectedSuggestionRenderer:e=>String(e),inputClassName:void 0,suggestionListClassName:void 0,searchFn:async()=>[],onEnter:()=>{},onInput:()=>{},onSelect:()=>{},onClear:()=>{},noResultsText:"No results found",footerComponent:void 0},dae="style_module_visible__5be7493d",hae="style_module_hidden__acfb8431",fae="style_module_disabled__62c35dc5",pae="style_module_upwards__e0b4831b";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();const mae="style_module_scrollbar__f1516254";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var gae=Object.defineProperty,_ae=(e,t,n)=>((e,t,n)=>t in e?gae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let yae=class{constructor(e,t){_ae(this,"_container"),_ae(this,"_inputElement"),_ae(this,"_suggestionList"),_ae(this,"_dropdownContainer"),_ae(this,"_footerContainer",null),_ae(this,"_clearButton"),_ae(this,"_config"),_ae(this,"_debounceTimeout"),_ae(this,"_placeholderElement",null),_ae(this,"_handleFocus"),_ae(this,"_handleBlur"),_ae(this,"_handleClearClick"),_ae(this,"_handleMouseDown"),this._container=e,this._container.classList.add(mae),this._config=Rse(uae,t??{});const n=document.createElement("div");n.className="style_module_searchInputWrapper__1edbcb22",this._container.appendChild(n),this._inputElement=document.createElement("input"),this._inputElement.className=this._config.inputClassName??"style_module_searchInput__d7830601",n.appendChild(this._inputElement),this._createPlaceholderElement(),this._handleFocus=()=>this._updatePlaceholderVisibility(),this._handleBlur=()=>this._updatePlaceholderVisibility(),this._handleClearClick=()=>this.clearInput(),this._inputElement.addEventListener("focus",this._handleFocus),this._inputElement.addEventListener("blur",this._handleBlur),this._clearButton=document.createElement("button"),this._clearButton.className="style_module_clearButton__5ebb41de",this._clearButton.innerHTML="",this._clearButton.addEventListener("click",this._handleClearClick),n.appendChild(this._clearButton),this._dropdownContainer=document.createElement("div"),this._dropdownContainer.className="style_module_dropdownContainer__d98287da",this._config.openListUpwards&&this._dropdownContainer.classList.add(pae),n.appendChild(this._dropdownContainer),this._suggestionList=document.createElement("ul"),this._suggestionList.classList.add(this._config.suggestionListClassName??"style_module_searchSuggestions__b0d3f71e"),this._dropdownContainer.appendChild(this._suggestionList),this._footerContainer=document.createElement("div"),this._footerContainer.className="style_module_footerContainer__73e7a066",this._dropdownContainer.appendChild(this._footerContainer),this._handleKeyDown=this._handleKeyDown.bind(this),this._handleInput=this._handleInput.bind(this),this._inputElement.addEventListener("input",this._handleInput),this._inputElement.addEventListener("keydown",this._handleKeyDown),this._config.disabled&&this.setDisabled(!0)}get suggestionList(){return this._suggestionList}get dropdownContainer(){return this._dropdownContainer}_handleInput(e){if(this._config.disabled)return;const t=this._inputElement.value;t?this._clearButton.classList.add(dae):this._clearButton.classList.remove(dae),this._updatePlaceholderVisibility(),this._debounceTimeout&&window.clearTimeout(this._debounceTimeout),t.length>=(this._config.minSearchLength??0)&&this._renderLoading(),this._debounceTimeout=window.setTimeout(async()=>{const n=await this._performSearch(t);this._config.onInput&&this._config.onInput(t,n,e),this._renderSuggestions(n)},this._config.debounceTime??300)}async _handleKeyDown(e){if(!this._config.disabled&&"Enter"===e.key){const e=this._inputElement.value;this._renderLoading();const t=await this._performSearch(e);this._config.onEnter&&this._config.onEnter(e,t),this._renderSuggestions(t)}}_createPlaceholderElement(){var e;if(this._config.placeholderRenderer){const t=this._config.placeholderRenderer;t instanceof HTMLElement?(this._placeholderElement=document.createElement("div"),this._placeholderElement.className="style_module_placeholderWrapper__72d5eb0e",this._handleMouseDown=e=>{if(this._config.disabled)return void e.preventDefault();let t=e.target;for(;t&&t!==this._placeholderElement;){if("true"===t.dataset.ignoreFocus)return void e.preventDefault();t=t.parentElement}},this._placeholderElement.addEventListener("mousedown",this._handleMouseDown),this._placeholderElement.appendChild(t),null==(e=this._inputElement.parentNode)||e.insertBefore(this._placeholderElement,this._inputElement)):this._inputElement.placeholder=t}this._updatePlaceholderVisibility()}_updatePlaceholderVisibility(){this._placeholderElement&&(this._inputElement.value||document.activeElement===this._inputElement?this._placeholderElement.classList.add(hae):this._placeholderElement.classList.remove(hae))}_createSuggestionElement(e){var t,n;const i=document.createElement("li"),r=document.createElement("div"),o=(null==(n=(t=this._config).suggestionRenderer)?void 0:n.call(t,e,this._inputElement.value))??String(e);return"string"==typeof o?(r.title=o,r.innerHTML=this._config.highlightMatch?this.getHighlightedMatch(o):o):r.appendChild(o),i.appendChild(r),i}_renderSuggestions(e){this._suggestionList.innerHTML="";const t=this._config.maxVisibleItems&&e.length>this._config.maxVisibleItems;if(this._suggestionList.style.overflowY=t?"auto":"",e.length>0){const t=this._createSuggestionElement(e[0]);this._suggestionList.appendChild(t);const n=t.offsetHeight;if(this._suggestionList.removeChild(t),this._config.maxVisibleItems&&n>0){const e=n*this._config.maxVisibleItems,t=.6*window.innerHeight;this._suggestionList.style.maxHeight=`${Math.min(e,t)}px`}}const n=this._inputElement.value.length>=(this._config.minSearchLength??0);if(e.forEach(e=>{const t=this._createSuggestionElement(e);t.addEventListener("click",()=>this._handleSuggestionClick(e)),this._suggestionList.appendChild(t)}),0===e.length&&this._config.noResultsText&&n){const e=document.createElement("li");e.className="style_module_noResults__363397c3",e.textContent=this._config.noResultsText,this._suggestionList.appendChild(e)}this._footerContainer&&(this._footerContainer.innerHTML="",this._config.footerComponent&&n&&e.length>0&&this._footerContainer.appendChild(this._config.footerComponent)),e.length>0||this._config.noResultsText&&n?this._dropdownContainer.classList.add(dae):this._dropdownContainer.classList.remove(dae)}_renderLoading(){if(!(this._inputElement.value.length>=(this._config.minSearchLength??0)))return;this._suggestionList.innerHTML="";const e=document.createElement("li");e.className="style_module_loading__296e0212",e.textContent="Searching",this._suggestionList.appendChild(e),this._footerContainer&&(this._footerContainer.innerHTML=""),this._dropdownContainer.classList.add(dae)}_handleSuggestionClick(e){var t,n;this._config.disabled||(this._config.onSelect&&this._config.onSelect(e),this._inputElement.value=(null==(n=(t=this._config).selectedSuggestionRenderer)?void 0:n.call(t,e,this._inputElement.value))??String(e),this._updatePlaceholderVisibility(),this._clearButton.classList.add(dae),this._suggestionList.innerHTML="",this._footerContainer&&(this._footerContainer.innerHTML=""),this._dropdownContainer.classList.remove(dae))}async _performSearch(e){let t=[];return this._config.searchFn&&e.length>=(this._config.minSearchLength??0)&&(t=await this._config.searchFn(e,this._config.suggestionsLimit)),t}getHighlightedMatch(e){if(!this._config.highlightMatch||!this._inputElement.value)return e;const t=this._inputElement.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`(${t})`,"gi");return e.replace(n,"<mark>$1</mark>")}setDisabled(e){var t;e?(this._inputElement.disabled=!0,this._inputElement.value="",null==(t=this._placeholderElement)||t.classList.remove(hae),this._clearButton.classList.remove(dae),this._container.classList.add(fae),this._dropdownContainer.classList.remove(dae)):(this._inputElement.disabled=!1,this._container.classList.remove(fae)),this._config.disabled=e}isDisabled(){return!!this._config.disabled}setConfig(e){const t=this._config.openListUpwards;this._config=Rse(uae,e??{}),this.setDisabled(!!this._config.disabled),t!==this._config.openListUpwards&&(this._config.openListUpwards?this._dropdownContainer.classList.add(pae):this._dropdownContainer.classList.remove(pae))}destroy(){var e;this._inputElement.removeEventListener("input",this._handleInput),this._inputElement.removeEventListener("keydown",this._handleKeyDown),this._inputElement.removeEventListener("focus",this._handleFocus),this._inputElement.removeEventListener("blur",this._handleBlur),this._clearButton.removeEventListener("click",this._handleClearClick),this._placeholderElement&&this._handleMouseDown&&(null==(e=this._placeholderElement)||e.removeEventListener("mousedown",this._handleMouseDown)),this._container.innerHTML=""}clearInput(){if(this._config.disabled)return;const e=!!this._inputElement.value;this._inputElement.value="",this._suggestionList.innerHTML="",this._footerContainer&&(this._footerContainer.innerHTML=""),this._dropdownContainer.classList.remove(dae),this._clearButton.classList.remove(dae),this._updatePlaceholderVisibility(),e&&this._config.onClear&&this._config.onClear()}hideSuggestions(){this._suggestionList.innerHTML="",this._footerContainer&&(this._footerContainer.innerHTML=""),this._dropdownContainer.classList.remove(dae)}focus(){this._inputElement.focus()}blur(){this._inputElement.blur()}};const vae=30,bae={padding:{top:5,left:5,bottom:1,right:5},barPadding:.1,minBarHeight:2,selectionRadius:3,selectionPadding:8,barCount:vae,dataStep:void 0,barRadius:1,barTopMargin:7,labelSideMargin:3,formatter:Ose,allowSelection:!0,stickySelection:!0,onBrush:void 0,onBarHover:void 0,noDataMessage:"No histogram data",loadingMessage:"Data loading..."},xae="style_module_bar__3c9ab488",wae="style_module_highlightedBar__b193a8de",Sae="style_module_bars__cf3a511f";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Eae=Object.defineProperty,Cae=(e,t,n)=>((e,t,n)=>t in e?Eae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let Tae=class extends Jse{constructor(e,t){const n=Rse(bae,t??{});super(e,Jse.extractConfig(n,bae)),Cae(this,"_config"),Cae(this,"_containerNode"),Cae(this,"_resizeObserver"),Cae(this,"_svg"),Cae(this,"_axisGroup"),Cae(this,"_barsGroup"),Cae(this,"_highlightedBarsGroup"),Cae(this,"_brushGroup"),Cae(this,"_firstRender",!0),Cae(this,"_height"),Cae(this,"_width"),Cae(this,"_histogramWidth"),Cae(this,"_histogramHeight"),Cae(this,"_barWidth",0),Cae(this,"_maxCount",0),Cae(this,"_extent"),Cae(this,"_barsData",[]),Cae(this,"_highlightedBarsData",[]),Cae(this,"_histogramData"),Cae(this,"_highlightedData"),Cae(this,"_bandIntervals",[]),Cae(this,"_currentSelection"),Cae(this,"_currentSelectionInPixels"),Cae(this,"_yScale",px()),Cae(this,"_xScale",nx()),Cae(this,"_axis",Qoe(this._xScale)),Cae(this,"_brushInstance"),this._config=n,this._containerNode=e,this._containerNode.classList.add("style_module_histogram__9d8a77ea"),this._width=e.offsetWidth,this._height=e.offsetHeight,this._histogramWidth=this._width-this._config.padding.left-this._config.padding.right,this._histogramHeight=this._height-this._config.padding.top-this._config.padding.bottom,this._initializeSVG(),this._initializeGroups(),this._resizeObserver=new Woe(()=>this.resize()),this._resizeObserver.observe(this._containerNode)}_initializeSVG(){this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.classList.add("style_module_histogramSvg__ccccb628"),this._containerNode.appendChild(this._svg)}setLoadingState(){super.setLoadingState()}_initializeGroups(){this._axisGroup=ire(this._svg).append("g").attr("class","style_module_axis__e37d2f53"),this._barsGroup=ire(this._svg).append("g").attr("class",Sae),this._highlightedBarsGroup=ire(this._svg).append("g").attr("class",Sae),this._brushGroup=ire(this._svg).append("g").attr("class","style_module_brush__5a0c1368")}get _barPadding(){return this._barWidth*(this._config.barPadding??0)}get _formatter(){return this._config.formatter??Ose}getCurrentSelection(){return this._currentSelection}getCurrentSelectionInPixels(){return this._currentSelectionInPixels??[]}getBarWidth(){return this._barWidth-this._barPadding}getConfig(){return this._config}setConfig(e){const t=JSON.parse(JSON.stringify(this._config));this._config=Rse(bae,e??{}),this.setDisplayStateConfig(Jse.extractConfig(this._config,bae)),this._config.allowSelection||this._disableBrush(),(this._config.dataStep!==t.dataStep||this._config.barCount!==t.barCount)&&(this._updateHistogramData(this._histogramData),this._updateHistogramData(this._highlightedData,!0)),this._axis.tickFormat(e=>this._formatter(e)),this.resize()}setSelection(e,t=!1){var n,i,r,o;const s=this._currentSelection;if(e&&this._extent){const t=[Math.max(this._extent[0],Math.min(e[0],this._extent[1])),Math.min(this._extent[1],Math.max(e[1],this._extent[0]))];if(t[0]<t[1])if(this._config.stickySelection){const e=t.map(this._xScale);this._mapSelection(e)}else this._currentSelection=t;else this._currentSelection=void 0}else this._currentSelection=void 0;!t&&((null==s?void 0:s[0])!==(null==(n=this._currentSelection)?void 0:n[0])||(null==s?void 0:s[1])!==(null==(i=this._currentSelection)?void 0:i[1]))&&(null==(o=(r=this._config).onBrush)||o.call(r,this._currentSelection,!0)),this._brushCurrentSelection()}resize(){const{offsetWidth:e,offsetHeight:t}=this._containerNode;this._width=e,this._height=t,this._histogramWidth=this._width-this._config.padding.left-this._config.padding.right,this._histogramHeight=this._height-this._config.padding.top-this._config.padding.bottom,this._histogramHeight>this._config.padding.top+this._config.padding.bottom&&(this._updateScales(),this._currentSelection&&this.setSelection(this._currentSelection,!0),this._firstRender||this.render())}render(){this._updateBrush(),this._updateBars(),this._updateBars(!0),this._updateAxis(),this._firstRender&&(this._firstRender=!1)}destroy(){super.destroy(),this._resizeObserver.disconnect(),this._containerNode.innerHTML=""}_parseData(e){if(null==e||!e.length)return[];const t=new Float64Array(e.length);let n=0;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r&&!isNaN(r)&&(t[n++]=r)}return Array.from(t.subarray(0,n))}setHistogramData(e,t){if(t&&t[1]<=t[0])return;this._histogramData=[],this._highlightedBarsData=[],this._currentSelection=void 0,this._brushCurrentSelection();const n=this._parseData(e),i=t||Hy(n),r=i[0]<i[1];r&&n.length>1?(this.hideState(),this._histogramData=n,this._extent=i,this._firstRender=!0):this.showState(r?void 0:"Empty or invalid histogram data"),this._updateHistogramData(this._histogramData),this._updateScales(),this.render()}setHighlightedData(e){this._histogramData&&(this._highlightedData=this._parseData(e),this._highlightedBarsData=[],this._updateHistogramData(this._highlightedData,!0),this._updateBars(!0))}_updateAxis(){this._histogramData&&this._histogramData.length?(this._axisGroup.style("transform",`translate(${this._config.padding.left}px, ${this._config.padding.top-(this._config.selectionPadding??0)/2+1}px)`).call(this._axis).call(e=>e.select(".domain").remove()),this._axisGroup.selectAll(".tick").select("text").attr("class","style_module_axisTick__898e1f39").attr("y",0).attr("dy",-2).attr("dx",this._config.labelSideMargin??0),this._axisGroup.selectAll(".tick:last-of-type text").attr("dx",-(this._config.labelSideMargin??0)).style("text-anchor","end"),this._axisGroup.selectAll("line").attr("y2",this._histogramHeight).attr("y1",0).attr("opacity",.1)):this._axisGroup.style("display","none")}_updateBrush(){if(!this._config.allowSelection||this._histogramHeight<0||this._histogramWidth<0)return void this._brushGroup.selectAll("*").remove();const e=this._config.selectionPadding??0,t=this._histogramHeight-e,n=[[0,e/2],[this._histogramWidth,t+e/2]];this._brushInstance=Tse().extent(n),this._brushInstance.on("end",({selection:e,sourceEvent:t})=>{var n,i,r,o;t&&(e?(this._config.stickySelection?this._mapSelection(e):this._currentSelection=e.map(e=>this._xScale.invert(e)),null==(i=(n=this._config).onBrush)||i.call(n,this._currentSelection)):(this._currentSelection=void 0,null==(o=(r=this._config).onBrush)||o.call(r,void 0)),this._brushCurrentSelection())}),this._brushGroup.style("transform",`translate(${this._config.padding.left}px, ${this._config.padding.top}px)`).call(this._brushInstance).call(this._brushInstance.move,this._currentSelectionInPixels||null),this._brushGroup.select("rect.selection").classed("style_module_selection__7db96137",!0).attr("rx",this._config.selectionRadius??0).attr("ry",this._config.selectionRadius??0)}_updateBars(e=!1){const t=e?this._highlightedBarsGroup:this._barsGroup;if(!this._histogramData||!this._histogramData.length)return void t.selectAll("rect").remove();t.style("transform",`translate(${this._config.padding.left}px, ${this._config.padding.top-(this._config.selectionPadding??0)/2}px)`);const n=e?.5:1,i=this._createBars(t,e);!e&&this._config.onBarHover&&i.on("mouseover",this._config.onBarHover),this._animateBars(i,e,n)}_createBars(e,t){return e.selectAll(`.${t?wae:xae}`).data(t?this._highlightedBarsData:this._barsData).join("rect").attr("class",t?wae:xae).attr("x",e=>this._xScale(e.rangeStart)+this._barPadding/2).attr("width",this.getBarWidth()).attr("rx",this._config.barRadius??0).attr("ry",this._config.barRadius??0).attr("y",-this._histogramHeight)}_animateBars(e,t,n){e.transition().duration(300).attr("height",e=>t&&0===e.count?0:this._yScale(e.count)).style("opacity",e=>this._yScale(e.count)===this._config.minBarHeight?.4:n)}_updateScales(){if(!this._extent||!this._barsData.length||this._histogramHeight<0||this._histogramWidth<0)this._axisGroup.style("display","none");else{this._axisGroup.style("display","inherit");const e=this._barsData[this._barsData.length-1],t=this._config.dataStep?[this._extent[0],e.rangeEnd]:this._extent;this._xScale.domain(t).range([0,this._histogramWidth]).clamp(!0),this._yScale.range([this._config.minBarHeight??0,this._histogramHeight-(this._config.barTopMargin??0)-(this._config.selectionPadding??0)]).domain([0,this._maxCount]).clamp(!0),this._axis.tickValues(t),this._barWidth=this._xScale(e.rangeEnd)-this._xScale(e.rangeStart)}}_updateHistogramData(e,t=!1){const n=t?"_highlightedBarsData":"_barsData";if(!this._extent)return void(this[n]=[]);if(null==e||!e.length)return void(this[n]=Dse([],this._bandIntervals,this._currentSelection,t));t||this._generateBandIntervals();const i=Dse(e,this._bandIntervals,this._currentSelection,t);this[n]=i,t||(this._maxCount=Math.max(...i.map(e=>e.count)))}_generateBandIntervals(){if(!this._extent)return;const{barCount:e=vae,dataStep:t}=this._config;this._bandIntervals=Mse(this._extent,e,t)}_disableBrush(){this._currentSelection=void 0,this._brushCurrentSelection(),this._brushGroup.selectAll("*").remove()}_mapSelection(e){if(!this._barsData.length)return;const t=this._xScale.invert(e[0]),n=this._xScale.invert(e[1]),i=this._getClosestRange(t),r=this._getClosestRange(n,!0);i&&r&&i.rangeStart<=r.rangeEnd&&e[1]-e[0]>this.getBarWidth()/2?this._currentSelection=[i.rangeStart,r.rangeEnd]:this._currentSelection=void 0}_getClosestRange(e,t){return this._barsData.reduce((n,i)=>{const r=t?n.rangeEnd:n.rangeStart,o=t?i.rangeEnd:i.rangeStart;return Math.abs(o-e)<Math.abs(r-e)?i:n})}_brushCurrentSelection(){var e;this._currentSelection?(this._currentSelectionInPixels=this._currentSelection.map(this._xScale),this._brushInstance&&!this._firstRender&&this._brushGroup.call(this._brushInstance.move,this._currentSelectionInPixels)):(this._currentSelectionInPixels=void 0,null==(e=this._brushInstance)||e.clear(this._brushGroup))}};const kae={maxDisplayedItems:10,showSortingBlock:!0,showSearch:!0,sort:"count",sortAscending:!1,showTotalWhenFiltered:!1,countFormatter:Ose,expanded:!1,onClick:void 0,onBarHover:void 0,noDataMessage:"No bars data",loadingMessage:"Data loading...",allowPointerEvents:!0};!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Aae=Object.defineProperty,Iae=(e,t,n)=>((e,t,n)=>t in e?Aae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let Pae=class extends Jse{constructor(e,t){const n=Rse(kae,t??{});super(e,Jse.extractConfig(n,kae)),Iae(this,"_data",[]),Iae(this,"_originalData",[]),Iae(this,"_config"),Iae(this,"_container"),Iae(this,"_searchContainer"),Iae(this,"_searchInput"),Iae(this,"_clearButton"),Iae(this,"_scrollContainer"),Iae(this,"_barsContainer"),Iae(this,"_highlightedBarsContainer"),Iae(this,"_showMoreButton"),Iae(this,"_showMoreCount"),Iae(this,"_sortingBlock"),Iae(this,"_uniqueValues",new Set),Iae(this,"_countMap",new Int32Array(0)),Iae(this,"_visibleItemsCount",0),Iae(this,"_hiddenItemsSum",0),Iae(this,"_itemHeight",0),Iae(this,"_itemMargin",0),Iae(this,"_startIndex",0),Iae(this,"_endIndex",0),Iae(this,"_maxCount",0),Iae(this,"_selectedItem"),Iae(this,"_isExpanded",!1),Iae(this,"_sortingHandlers"),Iae(this,"_highlightedCounts"),Iae(this,"_isFilteringActive",!1),Iae(this,"_updateVisibleItems",()=>{const e=this._itemHeight+this._itemMargin;this._startIndex=Math.floor(this._scrollContainer.scrollTop/e),this._endIndex=Math.min(this._startIndex+this._visibleItemsCount+1,this._data.length),this._renderItems()}),Iae(this,"_handleShowMoreCount",()=>{var e,t,n,i,r,o;const s=this._data.length-this._maxDisplayedItems,a=(null==(t=(e=this._config).countFormatter)?void 0:t.call(e,this._hiddenItemsSum))??this._hiddenItemsSum.toString();if(this._isFilteringActive&&this._config.showTotalWhenFiltered){const e=this._data.slice(this._maxDisplayedItems).reduce((e,t)=>e+t.count,0),t=(null==(i=(n=this._config).countFormatter)?void 0:i.call(n,e))??e.toString();this._showMoreCount.textContent=`${a} / ${t}`}else this._showMoreCount.textContent=a;this._showMoreButton.firstChild.textContent=`${(null==(o=(r=this._config).countFormatter)?void 0:o.call(r,s))??s.toString()} more`}),Iae(this,"_handleScroll",()=>{this._updateVisibleItems()}),Iae(this,"_handleSort",()=>{"alphabetical"===this._config.sort?this.sortAlphabetically(this._config.sortAscending):this.sortByCount(this._config.sortAscending)}),Iae(this,"_handleSearch",()=>{const e=this._searchInput.value.toLowerCase();this._clearButton.classList[e?"add":"remove"]("visible"),this._data=this._originalData.filter(t=>String(t.label).toLowerCase().includes(e)),this._handleSort()}),Iae(this,"_clearSearch",()=>{this._searchInput.value="",this._handleSearch()}),Iae(this,"_handleShowMore",()=>{this._isExpanded=!this._isExpanded,this._isExpanded?(this._scrollContainer.style.overflowY="auto",this._showMoreButton.firstChild.textContent="show less",this._showMoreCount.textContent=""):(this._scrollContainer.style.overflowY="hidden",this._scrollContainer.scrollTop=0,this._handleShowMoreCount())}),this._config=n,this._container=e,this._container.classList.add("style_module_bars__25497ded"),this._container.classList.add(mae),this._scrollContainer=document.createElement("div"),this._scrollContainer.classList.add("scroll-container"),this._barsContainer=document.createElement("div"),this._barsContainer.classList.add("bars-container"),this._highlightedBarsContainer=document.createElement("div"),this._highlightedBarsContainer.classList.add("bars-container","highlighted-bars-container"),this._scrollContainer.appendChild(this._barsContainer),this._scrollContainer.appendChild(this._highlightedBarsContainer),this._showMoreButton=this._createShowMoreButton(),this._sortingBlock=this._createSortingBlock(),this._searchContainer=this._createSearch(),this._container.appendChild(this._searchContainer),this._container.appendChild(this._scrollContainer),this._container.appendChild(this._showMoreButton),this._container.appendChild(this._sortingBlock),this._scrollContainer.addEventListener("scroll",this._handleScroll,{passive:!0})}get _maxDisplayedItems(){return this._config.maxDisplayedItems??10}_createSearch(){const e=document.createElement("div");return e.classList.add("search-container"),this._clearButton=document.createElement("button"),this._clearButton.classList.add("clear-button"),this._clearButton.innerHTML="",this._clearButton.addEventListener("click",this._clearSearch),this._searchInput=document.createElement("input"),this._searchInput.classList.add("search-input"),this._searchInput.placeholder="Search...",this._searchInput.addEventListener("input",this._handleSearch),e.appendChild(this._searchInput),e.appendChild(this._clearButton),e}_updateButtonState(e,t){e.classList.add("selected"),e.classList.remove("unselected"),t.classList.add("unselected"),t.classList.remove("selected")}_updateArrowText(e,t,n){e.textContent=`${t?"":""}${n}`}_createSortingHandlers(e,t,n,i){return{alpha:()=>{"alphabetical"===this._config.sort&&(n=!n,this._updateArrowText(e,n,"ABC")),this._config.sort="alphabetical",this._config.sortAscending=n,this._updateButtonState(e,t),this._handleSort()},numeric:()=>{"count"===this._config.sort&&(i=!i,this._updateArrowText(t,i,"123")),this._config.sort="count",this._config.sortAscending=i,this._updateButtonState(t,e),this._handleSort()},reset:()=>{var e,t;null==(t=(e=this._config).onClick)||t.call(e,void 0),this.setSelectedItem(void 0)}}}_createSortingBlock(){const e=document.createElement("div"),t=document.createElement("div"),[n,i]=[document.createElement("div"),document.createElement("div")],r=document.createElement("div");e.classList.add("sorting-block"),t.classList.add("buttons-container"),r.classList.add("reset-text","unselected");const o="alphabetical"!==this._config.sort||this._config.sortAscending,s="count"!==this._config.sort||this._config.sortAscending;return this._updateArrowText(n,o??!1,"ABC"),this._updateArrowText(i,s??!1,"123"),r.textContent="reset selection",this._config.sort&&this._updateButtonState("alphabetical"===this._config.sort?n:i,"alphabetical"===this._config.sort?i:n),this._sortingHandlers=this._createSortingHandlers(n,i,o??!1,s??!1),n.addEventListener("click",this._sortingHandlers.alpha),i.addEventListener("click",this._sortingHandlers.numeric),r.addEventListener("click",this._sortingHandlers.reset),t.append(n,i),e.append(t,r),e}_createShowMoreButton(){const e=document.createElement("div");e.classList.add("show-more"),e.addEventListener("click",this._handleShowMore);const t=document.createElement("span");return this._showMoreCount=document.createElement("span"),this._showMoreCount.classList.add("show-more-count"),e.appendChild(t),e.appendChild(this._showMoreCount),e}_calculateVisibleItems(){const e=this._itemHeight+this._itemMargin;this._visibleItemsCount=Math.ceil(this._scrollContainer.clientHeight/e)}_createBarElement(e,t=!1,n){var i,r,o,s,a,l,c;if(t){const t=document.createElement("div");t.classList.add("bar-highlighted"),t.dataset.label=e.label,t.style.position="absolute";const i=n/e.count*(e.count/this._maxCount)*100;return t.style.width=`${i}%`,t}const u=document.createElement("div");if(u.classList.add("row"),u.style.position="absolute",null!=(i=this._config)&&i.onClick&&(u.style.cursor="pointer",u.addEventListener("click",()=>{var t,n;return null==(n=(t=this._config).onClick)?void 0:n.call(t,e)})),this._selectedItem){const t=this._container.querySelector(".reset-text");null==t||t.classList.remove("unselected"),null==t||t.classList.add("selected"),u.classList.add(this._selectedItem.label===e.label?"selected":"unselected")}const d=e.count/this._maxCount*100,h=document.createElement("div");h.classList.add("bar"),h.style.width=`${d}%`;const f=document.createElement("div");f.classList.add("info");const p=document.createElement("div");p.classList.add("label"),p.textContent=e.label,p.title=e.label;const m=document.createElement("div");if(m.classList.add("count"),this._isFilteringActive&&void 0!==n){const t=(null==(o=(r=this._config).countFormatter)?void 0:o.call(r,n))??n.toString();if(this._config.showTotalWhenFiltered){const n=(null==(a=(s=this._config).countFormatter)?void 0:a.call(s,e.count))??e.count.toString();m.textContent=`${t} / ${n}`}else m.textContent=t}else m.textContent=(null==(c=(l=this._config).countFormatter)?void 0:c.call(l,e.count))??e.count.toString();return f.append(p,m),u.append(h,f),u}_renderItems(){this._renderItemsToContainer(this._barsContainer,!1),this._renderItemsToContainer(this._highlightedBarsContainer,!0)}_renderItemsToContainer(e,t){var n;const i=this._itemHeight+this._itemMargin;if(t){if(!this._highlightedCounts)return void e.replaceChildren();const t=new Map;for(const i of Array.from(e.children)){const e=i;e.classList.contains("bar-highlighted")&&e.dataset.label&&t.set(e.dataset.label,e)}const n=new Set;for(let r=this._startIndex;r<this._endIndex;r++){const o=this._data[r];if(!o)continue;const s=this._highlightedCounts.get(o.label)||0;if(s>0){n.add(o.label);const a=t.get(o.label);if(a){const e=s/o.count*(o.count/this._maxCount)*100;a.style.width=`${e}%`,a.style.top=r*i+"px"}else{const t=this._createBarElement(o,!0,s);t.style.top=r*i+"px",t.style.height=`${this._itemHeight}px`,e.appendChild(t)}}}for(const[e,i]of t)n.has(e)||i.remove()}else{const t=document.createDocumentFragment();for(let e=this._startIndex;e<this._endIndex;e++){const r=this._data[e];if(!r)continue;const o=(null==(n=this._highlightedCounts)?void 0:n.get(r.label))||0,s=this._createBarElement(r,!1,o);s.style.top=e*i+"px",s.style.height=`${this._itemHeight}px`,t.appendChild(s)}e.replaceChildren(t)}}_updateContainerHeights(e){const t=Math.min(this._originalData.length,this._maxDisplayedItems)*e;this._scrollContainer.style.height=`${t}px`;const n=this._data.length*e+"px";this._barsContainer.style.height=n,this._highlightedBarsContainer.style.height=n}_updateShowMoreButton(){if(this._originalData.length>this._maxDisplayedItems){const e=this._data.length>this._maxDisplayedItems;this._showMoreButton.style.visibility=e?"visible":"hidden",this._showMoreButton.style.display="flex"}else this._showMoreButton.style.display="none"}_updateUIElements(e=kae.showSortingBlock,t=kae.showSearch){this._originalData.length?this._data.length?(this._sortingBlock.style.visibility=e?"visible":"hidden",this._searchContainer.style.display=t?"block":"none",this.hideState(),this._scrollContainer.style.visibility="visible"):(this._sortingBlock.style.visibility=e?"visible":"hidden",this._searchContainer.style.display=t?"block":"none",this._scrollContainer.style.visibility="visible",this.showState(this._searchInput.value.length?"No results found":void 0)):(this._sortingBlock.style.visibility="hidden",this._searchContainer.style.display="none",this._scrollContainer.style.visibility="hidden",this._showMoreButton.style.display="none",this.showState())}_render(){this._maxCount=Math.max(...this._data.map(e=>e.count),1),this._calculateItemDimensions();const{showSortingBlock:e,showSearch:t}=this._config,n=this._itemHeight+this._itemMargin;this._updateContainerHeights(n),this._updateShowMoreButton(),this._updateUIElements(e,t),this._calculateVisibleItems(),this._updateVisibleItems()}_calculateItemDimensions(){if(!this._data.length)return;const e=this._createBarElement(this._data[0]);this._barsContainer.appendChild(e);const t=window.getComputedStyle(e);this._itemHeight=e.offsetHeight,this._itemMargin=parseFloat(t.marginTop)+parseFloat(t.marginBottom),this._barsContainer.removeChild(e)}_calcHiddenSum(){if(this._data.length>this._maxDisplayedItems){const e=this._data.slice(this._maxDisplayedItems);this._isFilteringActive?this._hiddenItemsSum=e.reduce((e,t)=>{var n;return e+((null==(n=this._highlightedCounts)?void 0:n.get(t.label))||0)},0):this._hiddenItemsSum=e.reduce((e,t)=>e+t.count,0)}else this._hiddenItemsSum=0;this._handleShowMoreCount()}getConfig(){return this._config}setConfig(e){this._config=Rse(kae,e??{}),this.setDisplayStateConfig(Jse.extractConfig(this._config,kae)),this._isExpanded=(null==e?void 0:e.expanded)??!1,this._calcHiddenSum(),this._render()}setData(e=[]){var t,n;this._clearSearch(),this._uniqueValues=new Set(e),this._countMap=new Int32Array(this._uniqueValues.size);const i=new Map([...this._uniqueValues].map((e,t)=>[e,t]));e.forEach(e=>{const t=i.get(e);void 0!==t&&this._countMap[t]++}),this._data=[...this._uniqueValues].map((e,t)=>({label:e,count:this._countMap[t]||0})),this._originalData=[...this._data],!this._originalData.length&&this._selectedItem&&(this.setSelectedItem(void 0),null==(n=(t=this._config).onClick)||n.call(t,void 0)),this._searchContainer.style.display=this._originalData.length?"block":"none",this._handleSort()}sortByCount(e=!1){this._data.sort((t,n)=>e?t.count-n.count:n.count-t.count),this._calcHiddenSum(),this._render()}sortAlphabetically(e=!0){this._data.sort((t,n)=>e?t.label.toString().localeCompare(n.label):n.label.toString().localeCompare(t.label)),this._calcHiddenSum(),this._render()}destroy(){this._scrollContainer.removeEventListener("scroll",this._handleScroll),this._searchInput.removeEventListener("input",this._handleSearch),this._clearButton.removeEventListener("click",this._clearSearch),this._showMoreButton.removeEventListener("click",this._handleShowMore);const e=this._sortingBlock.querySelector("div:first-child"),t=this._sortingBlock.querySelector("div:nth-child(2)"),n=this._sortingBlock.querySelector(".reset-text");null==e||e.removeEventListener("click",this._sortingHandlers.alpha),null==t||t.removeEventListener("click",this._sortingHandlers.numeric),null==n||n.removeEventListener("click",this._sortingHandlers.reset),this._container.innerHTML="",this._data=[],this._originalData=[],this._uniqueValues.clear(),this._countMap=new Int32Array(0),this._hiddenItemsSum=0,this._highlightedCounts=void 0,this._isFilteringActive=!1,super.destroy()}resetList(){this._scrollContainer.scrollTop=0,this._searchInput.value="",this._selectedItem=void 0,this._highlightedCounts=void 0,this._isFilteringActive=!1,this._data=[...this._originalData],this._updateVisibleItems()}getSelectedItem(){return this._selectedItem}setSelectedItem(e){if(!e){const e=this._container.querySelector(".reset-text");null==e||e.classList.remove("selected"),null==e||e.classList.add("unselected")}this._selectedItem=e,this._updateVisibleItems()}setHighlightedData(e){if(null==e)this._highlightedCounts=void 0,this._isFilteringActive=!1;else{this._highlightedCounts=new Map;for(const n of e)this._highlightedCounts.set(n,(this._highlightedCounts.get(n)||0)+1);const t=this._originalData.reduce((e,t)=>e+t.count,0);this._isFilteringActive=e.length<t}this._calcHiddenSum(),this._renderItems()}setLoadingState(){super.setLoadingState()}};const Lae={hidden:!1,label:void 0,labelFormatter:Ose,extent:void 0,extentLabels:void 0,enableEvents:!0,form:"point",showSublabels:!1,minSubLabel:"min",maxSubLabel:"max",sizeMultiplier:void 0,onClick:void 0,onMinClick:void 0,onMaxClick:void 0,onHover:void 0,noDataMessage:"No legend data",loadingMessage:"Data loading..."},Rae="style_module_enabled__91eae57a",Oae="style_module_disabled__d51f7a10";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Mae=Object.defineProperty,Dae=(e,t,n)=>((e,t,n)=>t in e?Mae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let Nae=class extends Jse{constructor(e,t){const n=Rse(Lae,t??{});super(e,Jse.extractConfig(n,Lae)),Dae(this,"_config"),Dae(this,"_containerNode"),Dae(this,"_legend"),Dae(this,"_sizeElements",null),Dae(this,"_isHidden",!1),Dae(this,"_handleClick",e=>{var t,n;this._config.enableEvents&&(null==(n=(t=this._config).onClick)||n.call(t,e))}),Dae(this,"_handleHover",e=>{var t,n;this._config.enableEvents&&(null==(n=(t=this._config).onHover)||n.call(t,e))}),Dae(this,"_handleSizeElementHover",e=>{var t,n,i,r;if(!this._config.enableEvents||!this._config.extent||!this._sizeElements)return;const o=e.currentTarget;if(!o)return;const s=o.classList.contains("min")?"min":"max",a="mouseenter"===e.type,l="min"===s?0:this._config.extent.length-1,c=null==(t=this._config.extent)?void 0:t[l],u=null==(n=this._config.extentLabels)?void 0:n[l];o.classList.toggle("style_module_hovered__1206707f",a),null==(r=(i=this._config).onHover)||r.call(i,{target:o,type:s,size:c,value:u})}),Dae(this,"_handleSizeElementClick",e=>{var t,n;if(!this._config.enableEvents)return;const i=e.currentTarget.className.includes("min")?"min":"max",r="min"===i?this._config.onMinClick:this._config.onMaxClick;if(r){const o=(null==(t=this._config.extent)?void 0:t["min"===i?0:1])??void 0;r(o,(null==(n=this._config.extentLabels)?void 0:n["min"===i?0:1])??o,e)}}),this._config=n,this._containerNode=e,this._containerNode.classList.add("style_module_container__d2889234"),this._createElements()}hide(){this._isHidden||(this._isHidden=!0,this._containerNode.classList.remove(Rae),this._containerNode.classList.add(Oae))}show(){this._isHidden&&(this._isHidden=!1,this._containerNode.classList.remove(Oae),this._containerNode.classList.add(Rae))}setConfig(e){this._config=Rse(Lae,e??{}),this.setDisplayStateConfig(Jse.extractConfig(this._config,Lae)),this._updateLegend()}setLoadingState(){super.setLoadingState()}destroy(){this._legend&&(this._legend.removeEventListener("click",this._handleClick),this._legend.removeEventListener("mouseover",this._handleHover),this._sizeElements&&["min","max"].forEach(e=>{const t=this._sizeElements[e];t.removeEventListener("click",this._handleSizeElementClick),t.removeEventListener("mouseenter",this._handleSizeElementHover),t.removeEventListener("mouseleave",this._handleSizeElementHover)}),this._containerNode.removeChild(this._legend),super.destroy())}get sizeElements(){return this._sizeElements}get config(){return this._config}get isHidden(){return this._isHidden}_createElements(){this._legend=this._createLegendElement(),this._containerNode.appendChild(this._legend),this._isHidden||this.show()}_createLegendElement(){const e=document.createElement("div");e.classList.add("style_module_legend__75c167f2");const t=document.createElement("div");t.className="legend-content",this._sizeElements={min:this._createSizeElement("min"),max:this._createSizeElement("max")},t.appendChild(this._sizeElements.min),t.appendChild(this._sizeElements.max),e.appendChild(t);const n=document.createElement("div");return n.className="name",e.appendChild(n),e}_createSizeElement(e){const t=document.createElement("div");t.classList.add(e);const n=document.createElement("div");t.appendChild(n);const i=document.createElement("div");return i.className="label",t.appendChild(i),t.addEventListener("click",this._handleSizeElementClick),t.addEventListener("mouseenter",this._handleSizeElementHover),t.addEventListener("mouseleave",this._handleSizeElementHover),t}_updateLegend(){const{extent:e,extentLabels:t}=this._config,{noDataMessage:n,loadingMessage:i}=this._displayStateConfig,r=!e&&!1===n&&!1===i;if(this._config.hidden||r?this.hide():this.show(),null!=e&&e.every(Number.isFinite)&&null!=t&&t.every(Number.isFinite)){this.hideState();const e=this._legend.querySelector(".name");e&&(e.textContent=this._config.label??""),this._sizeElements&&(t[0]===t[1]?(this._updateSizeElement("min"),this._sizeElements.min.style.display="block",this._sizeElements.max.style.display="none"):(this._updateSizeElement("min"),this._updateSizeElement("max"),this._sizeElements.min.style.display="block",this._sizeElements.max.style.display="block")),this._legend.classList.remove(Oae),this._legend.classList.add(Rae)}else this.showState(),this._legend.classList.remove(Rae),this._legend.classList.add(Oae)}_updateSizeElement(e){var t,n;if(!this._sizeElements)return;const i=this._sizeElements[e];i.style.pointerEvents=this._config.enableEvents?"auto":"none";const r=(null==(t=this._config.extent)?void 0:t["min"===e?0:1])??1,o=(null==(n=this._config.extentLabels)?void 0:n["min"===e?0:1])??r,s=i.querySelector("div");"point"===this._config.form?(s.classList.remove("line"),s.classList.add("circle"),s.style.height=s.style.width=r*(this._config.sizeMultiplier??1)+"px"):(s.style.width="",s.classList.remove("circle"),s.classList.add("line"),s.style.height=r*(this._config.sizeMultiplier??1)+"px"),i.querySelector(".label").textContent=this._formatLabel(o),this._updateSublabel(i,e)}_updateSublabel(e,t){let n=e.querySelector(".sublabel");this._config.showSublabels?(n||(n=document.createElement("div"),n.className="sublabel",e.appendChild(n)),n.textContent="min"===t?this._config.minSubLabel??"min":this._config.maxSubLabel??"max"):n&&n.remove()}_formatLabel(e){return this._config.labelFormatter?this._config.labelFormatter(e):e.toString()}};const Fae={hidden:!1,label:void 0,labelFormatter:Ose,extent:void 0,extentLabels:void 0,enableEvents:!0,showSublabels:!1,minSubLabel:"min",maxSubLabel:"max",discreteColors:!1,onClick:void 0,onHover:void 0,onMaxClick:void 0,onMinClick:void 0,noDataMessage:"No legend data",loadingMessage:"Data loading..."},Bae="style_module_enabled__b3120e27",zae="style_module_disabled__c2dc158c";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Uae=Object.defineProperty,jae=(e,t,n)=>((e,t,n)=>t in e?Uae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let Vae=class extends Jse{constructor(e,t){const n=Rse(Fae,t??{});super(e,Jse.extractConfig(n,Fae)),jae(this,"_config"),jae(this,"_containerNode"),jae(this,"_legend"),jae(this,"_legendElements"),jae(this,"_gradientElement"),jae(this,"_extentElements",null),jae(this,"_isHidden",!1),jae(this,"_handleClick",e=>{var t,n;this._config.enableEvents&&(null==(n=(t=this._config).onClick)||n.call(t,e))}),jae(this,"_handleHover",e=>{var t,n;this._config.enableEvents&&(null==(n=(t=this._config).onHover)||n.call(t,e))}),jae(this,"_handleColorElementClick",e=>{var t,n;if(!this._config.enableEvents)return;const i=e.currentTarget.className.includes("min")?"min":"max",r="min"===i?this._config.onMinClick:this._config.onMaxClick;if(r){const o="min"===i?0:1;r(null==(t=this._config.extent)?void 0:t["min"===i?0:this._config.extent.length-1],null==(n=this._config.extentLabels)?void 0:n[o],e)}}),jae(this,"_handleColorElementHover",e=>{var t,n,i,r;if(!this._config.enableEvents||!this._config.extent)return;const o=e.currentTarget;if(!o)return;const s=o.classList.contains("min")?"min":"max",a="mouseenter"===e.type,l="min"===s?0:this._config.extent.length-1,c=null==(t=this._config.extent)?void 0:t[l],u=null==(n=this._config.extentLabels)?void 0:n[l];o.classList.toggle("style_module_hovered__dfd7bb2c",a),null==(r=(i=this._config).onHover)||r.call(i,{target:o,type:s,color:c,value:u})}),this._config=n,this._containerNode=e,this._containerNode.classList.add("style_module_container__05cc807d"),this._createElements()}get extentElements(){return this._extentElements}get config(){return this._config}hide(){this._isHidden||(this._isHidden=!0,this._containerNode.classList.remove(Bae),this._containerNode.classList.add(zae))}show(){this._isHidden&&(this._isHidden=!1,this._containerNode.classList.remove(zae),this._containerNode.classList.add(Bae))}setConfig(e){this._config=Rse(Fae,e??{}),this.setDisplayStateConfig(Jse.extractConfig(this._config,Fae)),this._updateLegend()}destroy(){this._legend&&(this._legend.removeEventListener("click",this._handleClick),this._legend.removeEventListener("mouseover",this._handleHover),this._extentElements&&["min","max"].forEach(e=>{const t=this._extentElements[e];t.removeEventListener("click",this._handleColorElementClick),t.removeEventListener("mouseenter",this._handleColorElementHover),t.removeEventListener("mouseleave",this._handleColorElementHover)}),this._containerNode.removeChild(this._legend),super.destroy())}setLoadingState(){super.setLoadingState()}_createElements(){this._legend=document.createElement("div"),this._legend.classList.add("style_module_legend__a3e235e4"),this._legendElements=this._createLegend(),this._gradientElement=this._createGradientElement(),this._legend.appendChild(this._legendElements),this._legend.appendChild(this._gradientElement),this._containerNode.appendChild(this._legend),this._isHidden||this.show()}_createLegend(){const e=document.createElement("div");e.classList.add("legend-content");const t=document.createElement("div");return t.classList.add("name"),this._extentElements={min:this._createLabelExtent("min"),max:this._createLabelExtent("max")},e.appendChild(this._extentElements.min),e.appendChild(t),e.appendChild(this._extentElements.max),e}_createLabelExtent(e){const t=document.createElement("div");t.classList.add("extent"),t.classList.add(e);const n=document.createElement("div");return n.classList.add("label"),t.appendChild(n),t.addEventListener("click",this._handleColorElementClick),t.addEventListener("mouseenter",this._handleColorElementHover),t.addEventListener("mouseleave",this._handleColorElementHover),t}_createGradientElement(){const e=document.createElement("div");return e.classList.add("gradient"),e}_updateLegend(){var e,t,n;const{noDataMessage:i,loadingMessage:r}=this._displayStateConfig,o=!this._config.extent&&!1===i&&!1===r;if(this._config.hidden||o?this.hide():this.show(),this._config.extent){this.hideState();const i=this._legendElements.querySelector(".name");i&&(i.textContent=this._config.label??"");const r=(null==(e=this._config.extentLabels)?void 0:e[0])===(null==(t=this._config.extentLabels)?void 0:t[1]);if(this._extentElements)if(r){if(this._extentElements.min.style.display="none",this._extentElements.max.style.display="none",i&&void 0!==(null==(n=this._config.extentLabels)?void 0:n[0])){const e=this._formatLabel(this._config.extentLabels[0]),t=i.textContent?`${e}\n${i.textContent}`:e;i.textContent=t}}else this._updateLabelWrapper("min"),this._updateLabelWrapper("max"),this._extentElements.min.style.display="block",this._extentElements.max.style.display="block";this._updateGradient(),this._legend.classList.remove(zae),this._legend.classList.add(Bae)}else this.showState(),this._legend.classList.remove(Bae),this._legend.classList.add(zae)}_updateGradient(){if(!this._config.extent)return;const e=this._config.extent.map(e=>this._getColor(e)).filter((e,t,n)=>0===t||e!==n[t-1]);if(1===e.length)return this._gradientElement.style.backgroundImage="none",void(this._gradientElement.style.backgroundColor=e[0]);if(this._config.discreteColors){const t=100/e.length,n=e.map((e,n)=>`${e} ${n*t}% ${(n+1)*t}%`);this._gradientElement.style.backgroundImage=`linear-gradient(to right, ${n.join(", ")})`}else{const e=this._config.extent.map((e,t)=>`${this._getColor(e)} ${t/(this._config.extent.length-1)*100}%`).join(", ");this._gradientElement.style.backgroundImage=`linear-gradient(to right, ${e})`}}_updateLabelWrapper(e){var t;const n=this._legendElements.querySelector(".extent:"+("min"===e?"first-child":"last-child"));if(!n)return;const i="min"===e?0:1,r=null==(t=this._config.extentLabels)?void 0:t[i],o=n.querySelector(".label");o&&void 0!==r&&(o.textContent=this._formatLabel(r)),this._updateSublabel(n,e)}_updateSublabel(e,t){let n=e.querySelector(".sublabel");this._config.showSublabels?(n||(n=document.createElement("div"),n.classList.add("sublabel"),e.appendChild(n)),n.textContent="min"===t?this._config.minSubLabel??"min":this._config.maxSubLabel??"max"):n&&n.remove()}_formatLabel(e){return"string"==typeof e?e:this._config.labelFormatter?this._config.labelFormatter(e):e.toString()}_getColor(e){return Array.isArray(e)?`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`:e}};const Hae=15,Wae={hidden:!1,label:void 0,items:[],labelFormatter:void 0,enableEvents:!0,expanded:!1,maxDisplayedItems:15,alignRight:!1,onClick:void 0,onHover:void 0,noDataMessage:"No legend data",loadingMessage:"Data loading..."},$ae="style_module_enabled__277b2403",Gae="style_module_disabled__7a587f96",qae="style_module_hovered__c0993502";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Yae=Object.defineProperty,Xae=(e,t,n)=>((e,t,n)=>t in e?Yae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Kae extends Jse{constructor(e,t){const n=Rse(Wae,t??{});super(e,Jse.extractConfig(n,Wae)),Xae(this,"_containerNode"),Xae(this,"_config"),Xae(this,"_scrollContainer"),Xae(this,"_legendItems"),Xae(this,"_showMoreButton"),Xae(this,"_wrapper"),Xae(this,"_itemHeight",0),Xae(this,"_itemMargin",0),Xae(this,"_visibleItemsCount",0),Xae(this,"_startIndex",0),Xae(this,"_endIndex",0),Xae(this,"_listItems",[]),Xae(this,"_selectedItem"),Xae(this,"_isExpanded",!1),Xae(this,"_isHidden",!1),Xae(this,"_calculatedWidth",0),Xae(this,"_maxMeasuredWidth",0),Xae(this,"_maxMeasuredCharLength",0),Xae(this,"_label"),Xae(this,"_handleShowMore",()=>{var e,t;this._isExpanded=!this._isExpanded,this._isExpanded?(this._containerNode.style.pointerEvents="all",this._scrollContainer.style.overflowY="auto",this._showMoreButton.firstChild.textContent="show less"):(this._containerNode.style.pointerEvents="none",this._scrollContainer.style.overflowY="hidden",this._scrollContainer.scrollTop=0,this._handleShowMoreCount()),null==(t=(e=this._config).onShowMoreClick)||t.call(e,this._isExpanded),this._calculateOptimalWidth(),this._updateVisibleItems()}),Xae(this,"_handleShowMoreCount",()=>{const{maxDisplayedItems:e=Hae}=this._config,t=this._listItems.length-e;this._showMoreButton.firstChild.textContent=`${t} more...`}),Xae(this,"_handleScroll",()=>{requestAnimationFrame(()=>{this._updateVisibleItems()})}),this._config=n,this._containerNode=e,this._containerNode.classList.add("style_module_typeLegend__15bf4b2f"),this._containerNode.classList.add(mae),this._createElements()}get config(){return this._config}get legendItems(){return this._legendItems}get isExpanded(){return this._isExpanded}setConfig(e){const t=this._isExpanded;this._config=Rse(Wae,e??{}),this.setDisplayStateConfig(Jse.extractConfig(this._config,Wae)),this._isExpanded=(null==e?void 0:e.expanded)??t,this._updateLegend()}setSelectedItem(e){this._selectedItem=e,this._updateVisibleItems()}resetList(){this._scrollContainer.scrollTop=0,this._selectedItem=void 0,this._updateVisibleItems()}getConfig(){return this._config}show(){this._isHidden&&(this._isHidden=!1,this._containerNode.classList.remove(Gae),this._containerNode.classList.add($ae))}hide(){this._isHidden||(this._isHidden=!0,this._containerNode.classList.remove($ae),this._containerNode.classList.add(Gae))}destroy(){this._scrollContainer.removeEventListener("scroll",this._handleScroll),this._containerNode.innerHTML="",super.destroy()}setLoadingState(){super.setLoadingState()}_updateLegend(){const{maxDisplayedItems:e=Hae,items:t}=this._config,{noDataMessage:n,loadingMessage:i}=this._displayStateConfig,r=!(null!=t&&t.length)&&!1===n&&!1===i;if(this._config.hidden||r?this.hide():this.show(),null!=t&&t.length){this.hideState(),this._wrapper.classList.remove(Gae),this._wrapper.classList.add($ae);const n=this._config.label;this._label.textContent=n??"",this._label.title=n??"",n?this._label.classList.remove("hidden"):this._label.classList.add("hidden"),this._listItems=t;const i=this._listItems.length;this._calculateItemDimensions(),this._calculateOptimalWidth(),this._visibleItemsCount=e>i?i:e;const r=this._itemHeight+this._itemMargin,o=Math.ceil(this._visibleItemsCount*r-this._itemMargin);this._scrollContainer.style.height=`${o}px`,this._legendItems.style.height=`${Math.ceil(this._listItems.length*r)}px`,this._scrollContainer.style.overflowY=this._isExpanded?"auto":"hidden",this._containerNode.style.pointerEvents=this._isExpanded?"all":"none",this._updateVisibleItems(),this._showMoreButton.style.display=this._listItems.length>e?"block":"none"}else this.showState(),this._wrapper.classList.remove($ae),this._wrapper.classList.add(Gae)}_updateVisibleItems(){const e=this._itemHeight+this._itemMargin,t=this._scrollContainer.scrollTop;this._startIndex=Math.max(0,Math.floor(t/e)-3);const n=this._isExpanded?Math.ceil(this._scrollContainer.clientHeight/e+6):this._visibleItemsCount;this._endIndex=Math.min(this._startIndex+n,this._listItems.length);const i=document.createDocumentFragment();for(let r=this._startIndex;r<this._endIndex;r++){const t=this._listItems[r];if(t){const n=this._createLegendItem(t);n.style.position="absolute",n.style.top=r*e+"px",i.appendChild(n)}}this._legendItems.innerHTML="",this._legendItems.appendChild(i),this._updateShowMoreButton()}_createElements(){this._wrapper=document.createElement("div"),this._wrapper.classList.add("style_module_wrapper__ea8ca7f4"),this._label=document.createElement("div"),this._label.classList.add("name"),this._wrapper.appendChild(this._label),this._scrollContainer=document.createElement("div"),this._scrollContainer.classList.add("scroll-container"),this._scrollContainer.addEventListener("scroll",this._handleScroll,{passive:!0}),this._legendItems=document.createElement("div"),this._legendItems.className="legend-items",this._scrollContainer.appendChild(this._legendItems),this._showMoreButton=this._createShowMoreButton(),this._wrapper.appendChild(this._scrollContainer),this._wrapper.appendChild(this._showMoreButton),this._containerNode.appendChild(this._wrapper),this._isHidden||this.show()}_createShowMoreButton(){const e=document.createElement("div");e.classList.add("show-more"),e.addEventListener("click",this._handleShowMore);const t=document.createElement("span");return e.appendChild(t),e}_updateShowMoreButton(){this._isExpanded?this._showMoreButton.firstChild.textContent="show less":this._handleShowMoreCount()}_calculateItemDimensions(){const e=this._createLegendItem({label:"Sample",color:"#000000"});e.style.visibility="hidden",e.style.position="absolute",this._legendItems.appendChild(e);const t=window.getComputedStyle(e);this._itemHeight=e.offsetHeight,this._itemMargin=parseFloat(t.marginTop)+parseFloat(t.marginBottom),this._legendItems.removeChild(e)}_createLegendItem(e){const t=document.createElement("div");t.classList.add("legend-item"),t.title=e.label,this._config.alignRight&&t.classList.add("reverted"),this._selectedItem&&t.classList.add(this._selectedItem.label===e.label?"style_module_selected__36e1dd81":"style_module_unselected__4826cfb7"),this._config.enableEvents&&(this._config.onClick&&(t.style.cursor="pointer",t.addEventListener("click",t=>this._config.onClick(t,e))),this._config.onHover&&(t.addEventListener("mouseenter",n=>{t.classList.add(qae),this._config.onHover(n,e)}),t.addEventListener("mouseleave",n=>{t.classList.remove(qae),this._config.onHover(n,e)})));const n=document.createElement("div");n.className="bullet",n.style.backgroundColor=e.color;const i=document.createElement("div");return i.className="label",i.style.whiteSpace="nowrap",i.textContent=e.label,t.appendChild(n),t.appendChild(i),t}_calculateOptimalWidth(){var e;if(!this._listItems.length)return;let t=0;for(const c of this._listItems)c.label&&c.label.length>t&&(t=c.label.length);if(this._listItems.length>(this._config.maxDisplayedItems||Hae)){const e=this._listItems.length-(this._config.maxDisplayedItems||Hae);t=Math.max(t,`${e} more...`.length,9)}if(t<=this._maxMeasuredCharLength)return void(this._maxMeasuredWidth&&this._applyCalculatedWidth(this._maxMeasuredWidth));this._maxMeasuredCharLength=t;const n=getComputedStyle(this._containerNode).getPropertyValue("--cosmograph-color-legend-type-font-size")||"11px",i=getComputedStyle(this._containerNode).getPropertyValue("--cosmograph-color-legend-type-font-family")||"inherit",r=document.createElement("canvas").getContext("2d");r.font=`300 ${n} ${i}`;let o=0;if(this._listItems.forEach(e=>{const t=r.measureText(e.label).width;t>o&&(o=t)}),this._listItems.length>(this._config.maxDisplayedItems||Hae)){const e=this._listItems.length-(this._config.maxDisplayedItems||Hae);o=Math.max(o,r.measureText(`${e} more...`).width,r.measureText("show less").width)}const s=13+o+10,a=(null==(e=this._containerNode.parentElement)?void 0:e.offsetWidth)||0,l=a>0?Math.min(a-20,s):s;this._calculatedWidth=Math.max(100,l),this._maxMeasuredWidth=this._calculatedWidth,this._applyCalculatedWidth(this._calculatedWidth)}_applyCalculatedWidth(e){this._containerNode.style.minWidth=`${e}px`,this._wrapper.style.minWidth=`${e}px`}}const Zae={onClick:void 0,iconSvg:void 0,description:void 0};!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@keyframes style_module_fadeIn__ffac87fd{0%{opacity:0}to{opacity:.2}}.style_module_displayState__6ae19b84{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--cosmograph-ui-text);display:flex;justify-content:center;align-items:center;min-width:100px;opacity:.2;font-size:calc(var(--cosmograph-ui-font-size) + 1px);letter-spacing:-.02em;font-weight:200;user-select:none;-webkit-user-select:none;animation:style_module_fadeIn__ffac87fd .3s ease-in-out}:root{--cosmograph-timeline-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-timeline-selection-opacity: .5;--cosmograph-timeline-bar-color: var(--cosmograph-ui-element-color);--cosmograph-timeline-highlighted-bar-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-timeline-font-family: var(--cosmograph-ui-font-family);--cosmograph-timeline-font-size: var(--cosmograph-ui-tick-font-size);--cosmograph-timeline-background: var(--cosmograph-ui-background);--cosmograph-timeline-text-color: var(--cosmograph-ui-text);--cosmograph-timeline-axis-color: var(--cosmograph-ui-text)}.style_module_timeline__736434f7{position:relative;display:flex;background:var(--cosmograph-timeline-background);width:100%;min-height:25px;overflow:hidden}.style_module_timelineSvg__b916ad04{position:relative;width:100%;height:100%}.style_module_selection__ebee57f8{fill:var(--cosmograph-timeline-selection-color);fill-opacity:var(--cosmograph-timeline-selection-opacity);stroke:none}.style_module_axisTick__5865631d{color:var(--cosmograph-timeline-axis-color);font:var(--cosmograph-timeline-font-family);font-size:var(--cosmograph-timeline-font-size);user-select:none;-webkit-user-select:none;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum";alignment-baseline:text-before-edge}.style_module_axisLine__992b502d{opacity:.2;color:var(--cosmograph-timeline-axis-color)}.style_module_bar__114fa79f{fill:var(--cosmograph-timeline-bar-color);transform:scaleY(-1);opacity:0}.style_module_animationControl__ee52cd66{color:var(--cosmograph-timeline-axis-color);width:6%;max-width:30px;min-width:20px;cursor:pointer;display:none;align-items:center;user-select:none;-webkit-user-select:none;opacity:.5;position:relative;justify-content:center}.style_module_animationControl__ee52cd66>svg{width:50%;max-height:20px;padding-right:2px}.style_module_hidden__a73fe81a{display:none}.style_module_disabled__eb988570{opacity:.2;pointer-events:none}.style_module_highlightedBar__c2fc9bdc{fill:var(--cosmograph-timeline-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-search-font-family: var(--cosmograph-ui-font-family);--cosmograph-search-font-size: 14px;--cosmograph-search-list-font-size: 13.5px;--cosmograph-search-text-color: var(--cosmograph-ui-text);--cosmograph-search-background: transparent;--cosmograph-search-list-background: rgba(0, 0, 0, .2);--cosmograph-search-list-match-background: rgba(255, 255, 255, .2);--cosmograph-search-list-match-color: var(--cosmograph-ui-text)}.style_module_searchInput__d7830601:hover{filter:brightness(1.2) contrast(1)}.style_module_searchInput__d7830601{width:100%;background:transparent;color:var(--cosmograph-search-text-color);border:none;border-bottom:.5px solid var(--cosmograph-search-text-color);padding:4px 20px 5px 2px;font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .2s ease-out}.style_module_searchInput__d7830601::selection{background:var(--cosmograph-search-list-match-background)}.style_module_searchInput__d7830601:focus{outline:none}.style_module_searchSuggestions__b0d3f71e{color:#fff;width:100%;padding:0;margin:0;background:transparent;overflow-y:auto;flex:1;min-height:0}.style_module_searchSuggestions__b0d3f71e li{padding:5px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;display:block;font-weight:500;font-size:var(--cosmograph-search-list-font-size);max-width:100%;overflow:hidden}.style_module_searchSuggestions__b0d3f71e li>div{white-space:nowrap;font-weight:200;overflow:hidden;text-overflow:ellipsis;width:100%}.style_module_searchSuggestions__b0d3f71e li:hover{background:#ffffff1a}.style_module_searchSuggestions__b0d3f71e mark{background:var(--cosmograph-search-list-match-background);color:var(--cosmograph-search-list-match-color);border-radius:2px}.style_module_clearButton__5ebb41de{position:absolute;right:0;top:0;height:100%;background:none;border:none;color:var(--cosmograph-search-text-color);font-weight:300;cursor:pointer;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_clearButton__5ebb41de.style_module_visible__5be7493d{opacity:.7}.style_module_placeholderWrapper__72d5eb0e{z-index:1;color:var(--cosmograph-search-text-color);font-family:var(--cosmograph-search-font-family);font-size:var(--cosmograph-search-font-size);position:absolute;top:0;left:0;width:100%;bottom:0;display:flex;line-height:1.25;align-items:center;transition:transform .3s ease-out,opacity .3s ease-out}.style_module_placeholderWrapper__72d5eb0e.style_module_hidden__acfb8431{transform:translate(-30px);pointer-events:none;opacity:0}.style_module_searchInput__d7830601:disabled,.style_module_searchInput__d7830601.style_module_disabled__62c35dc5{opacity:.2;cursor:not-allowed;pointer-events:none}.style_module_disabled__62c35dc5 .style_module_clearButton__5ebb41de{display:none}.style_module_disabled__62c35dc5 .style_module_placeholderWrapper__72d5eb0e{opacity:.3;cursor:not-allowed}.style_module_searchInputWrapper__1edbcb22{position:relative;display:flex;width:100%}.style_module_noResults__363397c3{opacity:.3!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none}.style_module_noResults__363397c3:hover{background:none}.style_module_loading__296e0212{opacity:.7!important;cursor:default;font-weight:300!important;padding:6px!important;text-align:center;pointer-events:none;-webkit-user-select:none;user-select:none}.style_module_dropdownContainer__d98287da{position:absolute;top:100%;left:0;width:100%;background:var(--cosmograph-search-list-background);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;pointer-events:none;overflow:hidden;z-index:10;display:flex;flex-direction:column;padding-bottom:2px}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b{top:auto;bottom:100%;transform:translateY(10px)}.style_module_dropdownContainer__d98287da.style_module_visible__5be7493d{opacity:1;transform:translateY(0);pointer-events:auto}.style_module_dropdownContainer__d98287da.style_module_upwards__e0b4831b.style_module_visible__5be7493d{opacity:1;transform:translateY(-2px);pointer-events:auto}.style_module_footerContainer__73e7a066{flex-shrink:0}:root{--cosmograph-scrollbar-background: rgba(255, 255, 255, .1);--cosmograph-ui-background: rgb(45, 49, 58);--cosmograph-ui-text: #ffffffc7;--cosmograph-ui-tick-font-size: 11px;--cosmograph-ui-font-size: 12px;--cosmograph-ui-font-family: inherit;--cosmograph-ui-element-color: #5C616A;--cosmograph-ui-highlighted-element-color: white;--cosmograph-ui-selection-control-color: #8d949ea8;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important}.style_module_cosmograph-ui__5acb97f1{background:var(--cosmograph-ui-background);color:var(--cosmograph-ui-text)}.style_module_scrollbar__f1516254 *::-webkit-scrollbar{width:5px;height:5px;border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-track{border-radius:.3rem}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-corner{background:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-button{display:none!important}.style_module_scrollbar__f1516254 *::-webkit-scrollbar-thumb{background-color:var(--cosmograph-scrollbar-background);transition:background-color .5s;border-radius:20px;border:3px solid var(--cosmograph-scrollbar-background)}@-moz-document url-prefix(){.style_module_scrollbar__f1516254 *{scrollbar-width:thin;scrollbar-color:var(--cosmograph-scrollbar-background) transparent;scrollbar-track-color:transparent;scrollbar-face-color:var(--cosmograph-scrollbar-background)}}:root{--cosmograph-histogram-background: var(--cosmograph-ui-background);--cosmograph-histogram-text-color: var(--cosmograph-ui-text);--cosmograph-histogram-axis-color: var(--cosmograph-ui-text);--cosmograph-histogram-selection-color: var(--cosmograph-ui-selection-control-color);--cosmograph-histogram-selection-opacity: .5;--cosmograph-histogram-bar-color: var(--cosmograph-ui-element-color);--cosmograph-histogram-highlighted-bar-color: var( --cosmograph-ui-highlighted-element-color);--cosmograph-histogram-font-family: var(--cosmograph-ui-font-family);--cosmograph-histogram-font-size: var(--cosmograph-ui-tick-font-size)}.style_module_histogram__9d8a77ea{position:relative;display:flex;min-height:25px;background:var(--cosmograph-histogram-background);width:100%}.style_module_histogramSvg__ccccb628{position:relative;width:100%;height:100%}.style_module_selection__7db96137{fill:var(--cosmograph-histogram-selection-color);fill-opacity:var(--cosmograph-histogram-selection-opacity);stroke:none}.style_module_axisTick__898e1f39{color:var(--cosmograph-histogram-axis-color);font-family:var(--cosmograph-histogram-font-family);font-size:var(--cosmograph-histogram-font-size);user-select:none;-webkit-user-select:none;alignment-baseline:text-before-edge;opacity:1;font-weight:300;text-anchor:initial;font-feature-settings:"tnum"}.style_module_bar__3c9ab488{fill:var(--cosmograph-histogram-bar-color);transform:scaleY(-1)}.style_module_highlightedBar__b193a8de{fill:var(--cosmograph-histogram-highlighted-bar-color);transform:scaleY(-1);pointer-events:none}:root{--cosmograph-bars-font-color: var(--cosmograph-ui-text);--cosmograph-bars-font-family: var(--cosmograph-ui-font-family);--cosmograph-bars-font-size: var(--cosmograph-ui-font-size);--cosmograph-bars-ui-font-size: 11.5px;--cosmograph-bars-background: var(--cosmograph-ui-element-color);--cosmograph-bars-bar-height: 20px;--cosmograph-bars-bar-bottom-margin: 2px;--cosmograph-bars-highlighted-color: var( --cosmograph-ui-highlighted-element-color)}.style_module_bars__25497ded{position:relative;width:100%;min-height:100px;user-select:none;flex-direction:column;-webkit-user-select:none}.style_module_bars__25497ded .scroll-container{position:relative;width:100%;overflow-y:hidden;overflow-x:hidden}.style_module_bars__25497ded .bars-container{position:relative;width:calc(100% - 1px);font-family:var(--cosmograph-bars-font-family)}.style_module_bars__25497ded .highlighted-bars-container{position:absolute;top:0;left:0;pointer-events:none}.style_module_bars__25497ded .row{height:var(--cosmograph-bars-bar-height);display:flex;align-items:center;margin-bottom:var(--cosmograph-bars-bar-bottom-margin);width:100%;transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row:hover{filter:brightness(1.15) contrast(1.05);transition:opacity .1s linear,filter .1s linear}.style_module_bars__25497ded .row.unselected:hover{filter:brightness(.95) contrast(1.15);transition:filter .05s linear}.style_module_bars__25497ded .unselected{opacity:.85;filter:brightness(.8) contrast(1.1)}.style_module_bars__25497ded .selected{filter:brightness(1.05) contrast(1.05)}.style_module_bars__25497ded .selected>.info>.label{font-weight:600;filter:brightness(1.1) contrast(1.05)}.style_module_bars__25497ded .unselected>.info>.label{font-weight:300}.style_module_bars__25497ded .bar{height:100%;background-color:var(--cosmograph-bars-background);opacity:.8;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .bar-highlighted{height:100%;background-color:var(--cosmograph-bars-highlighted-color);opacity:.2;transition:opacity .3s ease,width .3s ease}.style_module_bars__25497ded .info{display:flex;justify-content:space-between;width:100%;padding:0 4px;position:absolute;font-size:var(--cosmograph-bars-font-size);font-feature-settings:"tnum";color:var(--cosmograph-bars-font-color);gap:2px}.style_module_bars__25497ded .label{min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:opacity .05s linear}.style_module_bars__25497ded .count{flex-shrink:0;font-weight:300;opacity:.8;transition:opacity .05s linear}.style_module_bars__25497ded .show-more{cursor:pointer;padding-top:2px;display:flex;font-weight:300;color:var(--cosmograph-bars-font-color);font-size:11px;justify-content:space-between;opacity:.6;font-size:var(--cosmograph-bars-ui-font-size);pointer-events:none;transition:opacity .1s linear}.style_module_bars__25497ded .show-more:hover{opacity:1;text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .show-more>span{pointer-events:all}.style_module_bars__25497ded .show-more-count{padding-right:5px;pointer-events:all;font-feature-settings:"tnum"}.style_module_bars__25497ded .unselected>.info>.label,.style_module_bars__25497ded .unselected>.info>.count{opacity:.5}.style_module_bars__25497ded .unselected:hover>.info>.label,.style_module_bars__25497ded .unselected:hover>.info>.count{opacity:1}.style_module_bars__25497ded .search-input{background:transparent;border:none;border-bottom:1px solid rgba(255,255,255,.3);font-size:13px!important;color:var(--cosmograph-bars-font-color);line-height:1.5;padding:2px;width:100%;position:relative;transition:border-bottom-color .2s}.style_module_bars__25497ded .search-input::placeholder{color:var(--cosmograph-bars-font-color)!important;opacity:.4;font-weight:300;font-family:inherit}.style_module_bars__25497ded .search-container{position:relative;width:100%;margin-bottom:4px;display:none;z-index:1}.style_module_bars__25497ded .clear-button{position:absolute;right:0;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--cosmograph-bars-font-color);font-weight:300;font-size:16px;padding:0 4px;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-out}.style_module_bars__25497ded .clear-button.visible:hover{transition:opacity .1s ease-in-out;opacity:1}.style_module_bars__25497ded .clear-button.visible{opacity:.7}.style_module_bars__25497ded .clear-button svg{width:10px;height:10px;fill:currentColor}.style_module_bars__25497ded .sorting-block{visibility:hidden;margin-top:1px;display:flex;justify-content:space-between}.style_module_bars__25497ded .buttons-container{margin-top:4px;font-size:var(--cosmograph-bars-ui-font-size);display:flex;gap:4px;line-height:1.25}.style_module_bars__25497ded .buttons-container>div{transition:opacity .05s linear,filter .05s linear;padding:1px 5px;background:var(--cosmograph-bars-background);border-radius:4px;opacity:.9;display:flex;cursor:pointer;align-items:center}.style_module_bars__25497ded .buttons-container>div:hover{filter:brightness(1.2)}.style_module_bars__25497ded .reset-text{transition:opacity .05s linear,filter .05s linear;display:flex;font-size:var(--cosmograph-bars-ui-font-size);align-items:end;padding-right:4px;cursor:pointer;font-weight:300}.style_module_bars__25497ded .reset-text:hover{text-decoration:underline;text-underline-offset:1.5px;text-decoration-thickness:.25px}.style_module_bars__25497ded .reset-text.unselected{pointer-events:none;cursor:default;opacity:.7}.style_module_bars__25497ded :scope.reset-text:hover:not(.unselected){filter:brightness(1.5);opacity:1}:root{--cosmograph-size-legend-form-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-color: var(--cosmograph-ui-text);--cosmograph-size-legend-font-family: inherit;--cosmograph-size-legend-font-size: var(--cosmograph-ui-font-size);--cosmograph-size-legend-sublabel-font-size: 10px;--cosmograph-size-legend-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-size-legend-line-radius: 2px;--cosmograph-size-legend-line-width: 30px;--cosmograph-size-legend-hide-transform: translateY(100%);--cosmograph-size-legend-show-transform: translateX(0)}.style_module_container__d2889234{display:flex;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;overflow:hidden;min-height:25px}.style_module_legend__75c167f2{width:auto;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-size-legend-font-size);font-family:var(--cosmograph-size-legend-font-family);user-select:none;-webkit-user-select:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.04em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__91eae57a{opacity:1;transform:var(--cosmograph-size-legend-show-transform)}.style_module_disabled__d51f7a10{opacity:0;transform:var(--cosmograph-size-legend-hide-transform);pointer-events:none;display:none!important;min-height:0}@starting-style{.style_module_container__d2889234.style_module_enabled__91eae57a,.style_module_legend__75c167f2.style_module_enabled__91eae57a{opacity:0;transform:var(--cosmograph-size-legend-hide-transform)}}.style_module_legend__75c167f2 .circle{background-color:var(--cosmograph-size-legend-form-color);border-radius:50%;transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2 .line{background-color:var(--cosmograph-size-legend-form-color);border-radius:var(--cosmograph-size-legend-line-radius);width:var(--cosmograph-size-legend-line-width);transition:background-color .15s ease-in-out;display:inline-block}.style_module_legend__75c167f2.style_module_events__894316a8{pointer-events:auto;cursor:pointer}.style_module_legend__75c167f2 .legend-content{display:flex;align-items:end;justify-content:center;gap:.75rem}.style_module_legend__75c167f2 .legend-content>div{transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__75c167f2 .labels-wrapper{white-space:nowrap}.style_module_legend__75c167f2 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-size-legend-items-margin)}.style_module_legend__75c167f2 .name{align-items:center;text-align:center;justify-content:center;display:flex;color:var(--cosmograph-size-legend-font-color);overflow:hidden;width:100%;margin-top:3px;word-break:break-all;white-space:pre-line;transition:color .15s ease-in-out;letter-spacing:-.02em}.style_module_legend__75c167f2 .label{color:var(--cosmograph-size-legend-font-color);overflow:hidden;transition:color .15s ease-in-out;text-overflow:ellipsis;font-feature-settings:"tnum"}.style_module_legend__75c167f2 .sublabel{padding-top:1px;font-size:var(--cosmograph-size-legend-sublabel-font-size);opacity:.5;line-height:1;min-width:10px;transition:color .15s ease-in-out}.style_module_hovered__1206707f .label,.style_module_hovered__1206707f .sublabel{color:var(--cosmograph-size-legend-hover-color);cursor:pointer}.style_module_hovered__1206707f .circle,.style_module_hovered__1206707f .line{background-color:var(--cosmograph-size-legend-hover-color);cursor:pointer}:root{--cosmograph-color-legend-range-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-range-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-range-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-label-font-size: var(--cosmograph-ui-font-size);--cosmograph-color-legend-range-sublabel-font-size: 10px;--cosmograph-color-legend-range-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-range-gradient-height: 6px;--cosmograph-color-legend-range-gradient-radius: 8px;--cosmograph-color-legend-range-gradient-top-margin: 6px;--cosmograph-color-legend-hide-transform: translateY(100%);--cosmograph-color-legend-show-transform: translateX(0)}.style_module_container__05cc807d{display:flex;min-width:150px;min-height:25px;width:100%;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_legend__a3e235e4{width:100%;font-weight:300;letter-spacing:-.04em;display:flex;flex-direction:column;font-size:var(--cosmograph-color-legend-range-font-size);font-family:var(--cosmograph-color-legend-range-font-family);user-select:none;-webkit-user-select:none;pointer-events:none;cursor:default;text-align:center;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_enabled__b3120e27{opacity:1;transform:var(--cosmograph-color-legend-show-transform);pointer-events:auto}.style_module_disabled__c2dc158c{opacity:0;transform:var(--cosmograph-color-legend-hide-transform);pointer-events:none;display:none;min-height:0}@starting-style{.style_module_container__05cc807d.style_module_enabled__b3120e27,.style_module_legend__a3e235e4.style_module_enabled__b3120e27{opacity:0;transform:var(--cosmograph-color-legend-hide-transform)}}.style_module_legend__a3e235e4 .legend-content{display:flex;align-items:end;justify-content:space-between}.style_module_hovered__dfd7bb2c .label,.style_module_hovered__dfd7bb2c .sublabel{color:var(--cosmograph-size-legend-hover-color)!important;cursor:pointer}.style_module_legend__a3e235e4 .extent{white-space:nowrap;transition:filter .1s ease-in-out,opacity .1s ease-in-out}.style_module_legend__a3e235e4 .gradient{width:100%;margin-top:var(--cosmograph-color-legend-range-gradient-top-margin);height:var(--cosmograph-color-legend-range-gradient-height);border-radius:var(--cosmograph-color-legend-range-gradient-radius)}.style_module_legend__a3e235e4 .legend-item{display:flex;align-items:center;margin-top:var(--cosmograph-color-legend-range-items-margin)}.style_module_legend__a3e235e4 .name{align-items:center;text-align:center;justify-content:space-around;display:flex;color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;width:100%;word-break:break-word;text-wrap:balance;white-space:pre-line;transition:color .15s ease-in-out;margin:0 4px;letter-spacing:-.02em;line-height:1.25}.style_module_legend__a3e235e4 .label{color:var(--cosmograph-color-legend-range-font-color);overflow:hidden;max-width:150px;text-overflow:ellipsis;font-size:var(--cosmograph-color-legend-range-label-font-size);transition:color .15s ease-in-out;line-height:1;font-feature-settings:"tnum"}.style_module_legend__a3e235e4 .sublabel{padding-top:1px;color:var(--cosmograph-color-legend-range-font-color);opacity:.55;font-size:var(--cosmograph-color-legend-range-sublabel-font-size);line-height:1;transition:color .15s ease-in-out}:root{--cosmograph-color-legend-type-font-color: var(--cosmograph-ui-text);--cosmograph-color-legend-type-font-family: var(--cosmograph-ui-font-family);--cosmograph-color-legend-type-font-size: 11px;--cosmograph-color-legend-type-hover-color: var(--cosmograph-ui-highlighted-element-color);--cosmograph-color-legend-type-others-color: #bab0ab;--cosmograph-color-legend-type-bullet-size: 8px;--cosmograph-color-legend-type-bullet-radius: 1rem;--cosmograph-color-legend-type-items-margin: 4px;--cosmograph-color-legend-type-hide-transform: translateY(125%);--cosmograph-color-legend-type-show-transform: translateX(0)}.style_module_enabled__277b2403{opacity:1;transform:var(--cosmograph-color-legend-type-show-transform)}.style_module_disabled__7a587f96{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform);display:none!important;min-height:0}.style_module_wrapper__ea8ca7f4{position:relative;max-width:100%;width:fit-content;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out}.style_module_typeLegend__15bf4b2f{position:relative;width:fit-content;max-width:100%;min-height:25px;transition:opacity .3s ease-in-out,transform .3s ease-in-out,display .3s allow-discrete,min-height .3s ease-in-out;font-weight:300;letter-spacing:-.015em;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased}.style_module_typeLegend__15bf4b2f .reverted{flex-direction:row-reverse}.style_module_typeLegend__15bf4b2f .scroll-container{width:100%;display:flex;flex-direction:column;position:relative;font-size:var(--cosmograph-color-legend-type-font-size);font-family:var(--cosmograph-color-legend-type-font-family);user-select:none;-webkit-user-select:none;line-height:normal;overflow-x:hidden;overflow-y:auto;will-change:transform}@starting-style{.style_module_typeLegend__15bf4b2f.style_module_enabled__277b2403,.style_module_wrapper__ea8ca7f4.style_module_enabled__277b2403{opacity:0;transform:var(--cosmograph-color-legend-type-hide-transform)}}.style_module_typeLegend__15bf4b2f .legend-item{display:flex;align-items:center;position:absolute;margin-bottom:var(--cosmograph-color-legend-type-items-margin);pointer-events:none;width:100%;padding-left:1px;font-weight:300;transition:filter .1s ease-in-out,opacity .1s ease-in-out;min-height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px + var(--cosmograph-color-legend-type-items-margin));height:calc(var(--cosmograph-color-legend-type-bullet-size) + 2px);box-sizing:border-box}.style_module_typeLegend__15bf4b2f .unknown{background-color:var(--cosmograph-color-legend-type-unknown-color)}.style_module_typeLegend__15bf4b2f .others{background-color:var(--cosmograph-color-legend-type-others-color)}.style_module_typeLegend__15bf4b2f .bullet{height:var(--cosmograph-color-legend-type-bullet-size);width:var(--cosmograph-color-legend-type-bullet-size);min-height:var(--cosmograph-color-legend-type-bullet-size);min-width:var(--cosmograph-color-legend-type-bullet-size);border-radius:var(--cosmograph-color-legend-type-bullet-radius);pointer-events:all;margin-right:5px}.style_module_typeLegend__15bf4b2f .label{color:var(--cosmograph-color-legend-type-font-color);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - var(--cosmograph-color-legend-type-bullet-size) - 5px);pointer-events:all;transition:.05s linear color}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.bullet{margin-right:0}.style_module_typeLegend__15bf4b2f .legend-item.reverted>.label{margin-right:5px}.style_module_typeLegend__15bf4b2f .show-more{cursor:pointer;padding-top:4px;display:none;font-weight:300;color:var(--cosmograph-color-legend-type-font-color);font-size:11px;opacity:.6;pointer-events:all;justify-content:space-between;transition:opacity .1s linear;font-feature-settings:"tnum"}.style_module_typeLegend__15bf4b2f .show-more:hover{opacity:1}.style_module_hovered__c0993502 .label,.style_module_hovered__c0993502 .sublabel{color:var(--cosmograph-color-legend-type-hover-color)!important;cursor:pointer}.style_module_selected__36e1dd81{filter:brightness(1)}.style_module_selected__36e1dd81>.style_module_label__afecc7a3{filter:brightness(1.2)}.style_module_unselected__4826cfb7{filter:brightness(.5)}.style_module_typeLegend__15bf4b2f .name{font-size:calc(var(--cosmograph-color-legend-type-font-size) + 1px);font-family:var(--cosmograph-color-legend-type-font-family);color:var(--cosmograph-color-legend-type-font-color);transition:color .15s ease-in-out,opacity .3s ease-in-out,max-height .3s ease-in-out,transform .3s ease-in-out;margin-bottom:4px;margin-top:2px;margin-left:1px;letter-spacing:-.02em;line-height:1.25;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis;pointer-events:all;-webkit-user-select:none!important;user-select:none!important;max-height:100px;opacity:1;transform:translateY(0)}.style_module_typeLegend__15bf4b2f .name.hidden{opacity:0;max-height:0;margin-bottom:0;margin-top:0;transform:translateY(-10px)}:root{--cosmograph-button-color: var(--cosmograph-ui-text);--cosmograph-button-background: var(--cosmograph-ui-element-color);--cosmograph-button-border-radius: 2px}.style_module_button__e95a1138{background:var(--cosmograph-button-background);color:var(--cosmograph-button-color);border-radius:var(--cosmograph-button-border-radius);display:none;align-items:center;justify-content:center;width:25px;height:25px;margin:3px;padding:5px;cursor:pointer;filter:brightness(.95) contrast(.9);transition:filter .1s}.style_module_button__e95a1138:hover{filter:brightness(1.2) contrast(1)}')),document.head.appendChild(e)}}catch(Yn){}}();var Qae=Object.defineProperty,Jae=(e,t,n)=>((e,t,n)=>t in e?Qae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let ele=class{constructor(e,t){Jae(this,"_container"),Jae(this,"config"),Jae(this,"_handleClick",()=>{var e,t;null==(t=(e=this.config).onClick)||t.call(e)}),this._container=e,this._container.classList.add("style_module_button__e95a1138"),this.setConfig(t??{}),this._container.addEventListener("click",this._handleClick)}get element(){return this._container}setConfig(e){this.config=Rse(Zae,e),this._container.title=this.config.description??"",this._container.innerHTML=this.config.iconSvg??""}show(){this._container.style.display="block"}hide(){this._container.style.display="none"}destroy(){this._container.removeEventListener("click",this._handleClick),this._container.innerHTML=""}};const tle={PointColor:"pointColorBy",PointColorMap:"pointColorByMap",PointColorFn:"pointColorByFn",PointColorPalette:"pointColorPalette",PointColorStrategy:"pointColorStrategy",PointSize:"pointSizeBy",PointSizeStrategy:"pointSizeStrategy",PointSizeRange:"pointSizeRange",PointSizeFn:"pointSizeByFn",PointLabel:"pointLabelBy",PointLabelWeight:"pointLabelWeightBy",PointX:"pointXBy",PointY:"pointYBy",PointCluster:"pointClusterBy",PointClusterFn:"pointClusterByFn",PointClusterStrength:"pointClusterStrengthBy",PointIncludeColumns:"pointIncludeColumns"},nle={LinkColor:"linkColorBy",LinkColorFn:"linkColorByFn",LinkColorPalette:"linkColorPalette",LinkColorStrategy:"linkColorStrategy",LinkWidth:"linkWidthBy",LinkWidthRange:"linkWidthRange",LinkWidthFn:"linkWidthByFn",LinkWidthStrategy:"linkWidthStrategy",LinkArrow:"linkArrowBy",LinkArrowFn:"linkArrowByFn",LinkStrength:"linkStrengthBy",LinkStrengthFn:"linkStrengthByFn",LinkStrengthRange:"linkStrengthRange",LinkIncludeColumns:"linkIncludeColumns"},ile=Object.values(tle),rle=Object.values(nle),ole=Object.values({ClusterPositionsMap:"clusterPositionsMap"}),sle=Object.values({Points:"points",PointId:"pointIdBy",PointIndex:"pointIndexBy"}),ale=Object.values({Links:"links",LinkSource:"linkSourceBy",LinkSourceIndex:"linkSourceIndexBy",LinkTarget:"linkTargetBy",LinkTargetIndex:"linkTargetIndexBy"}),lle=[...rle].filter(e=>e!==nle.LinkIncludeColumns).concat("linkDefaultColor","linkDefaultWidth"),cle=[...ile].filter(e=>e!==tle.PointLabel&&e!==tle.PointLabelWeight&&e!==tle.PointIncludeColumns).concat("pointDefaultColor","pointDefaultSize"),ule=[...Object.values({ShowLabels:"showLabels",ShowDynamicLabels:"showDynamicLabels",ShowTopLabels:"showTopLabels",ShowTopLabelsLimit:"showTopLabelsLimit",ShowLabelsFor:"showLabelsFor",ShowClusterLabels:"showClusterLabels",PointLabelClassName:"pointLabelClassName",PointLabelFn:"pointLabelFn",PointLabelWeightFn:"pointLabelWeightFn",PointLabelColor:"pointLabelColor",PointLabelFontSize:"pointLabelFontSize",ClusterLabelFontSize:"clusterLabelFontSize",ClusterLabelClassName:"clusterLabelClassName",ScaleClusterLabels:"scaleClusterLabels",UsePointColorStrategyForClusterLabels:"usePointColorStrategyForClusterLabels",StaticLabelWeight:"staticLabelWeight",DynamicLabelWeight:"dynamicLabelWeight",LabelMargin:"labelMargin",LabelPadding:"labelPadding",CustomLabels:"customLabels"}),tle.PointLabel,tle.PointLabelWeight],dle=.95,hle=.05,fle=[2,9],ple=[1,9],mle=["rgba(43, 85, 168, 0.85)","rgba(153, 82, 213, 0.85)","rgba(240, 105, 180, 0.85)","rgba(255, 149, 131, 0.85)","rgba(254, 224, 139, 0.85)"],gle=["#206176","#38657e","#506987","#686d90","#807098","#9874a1","#af78a9","#c77cb2","#df7fba","#f783c3","#FFB4D3","#f6c0d8"],_le="rgb(45, 49, 58)",yle="rgba(205, 207, 213, 0.9)",vle=yle,ble=16,xle={showLabels:!0,showTopLabels:!0,showDynamicLabels:!0,showHoveredPointLabel:!1,scaleClusterLabels:!0,usePointColorStrategyForClusterLabels:!1,showTopLabelsLimit:30,staticLabelWeight:.8,dynamicLabelWeight:.7,pointGreyoutOpacity:.3,labelMargin:5,pointSamplingDistance:170,labelPadding:[6.5,4.5,6.5,4.5],preservePointPositionsOnDataUpdate:!1,backgroundColor:_le,hoveredPointLabelClassName:"color: white; background: #333841;",pointLabelFontSize:13,clusterLabelFontSize:16,clusterLabelClassName:"background: none; font-weight: 300; opacity: 0.9;",pointSizeRange:fle,linkWidthRange:ple,linkStrengthRange:[.2,1],pointColorPalette:mle,linkColorPalette:gle,pointDefaultColor:vle,linkDefaultColor:yle,unknownColor:yle,hoveredLinkWidthIncrease:0,simulationRepulsion:.5,simulationFriction:.5,simulationLinkSpring:.4,simulationLinkDistance:20,resetSelectionOnEmptyCanvasClick:!0},wle=e=>e===tle.PointLabel?"":e===tle.PointLabelWeight||e===tle.PointX||e===tle.PointY||e===tle.PointCluster?0:e===tle.PointClusterStrength?1:(e===nle.LinkStrength||e!==nle.LinkArrow)&&0,Sle=async(e,t)=>{const n=await e.query("SHOW ALL TABLES"),i=null==n?void 0:n.toArray();if(!(null==i?void 0:i.length))return!1;const[r,o]=t.includes(".")?t.split("."):["main",t];return void 0!==i.find(e=>e.name===o&&e.schema===r)},Ele=async(e,t)=>{const n=await e.query(`PRAGMA table_info(${t})`);return n?n.toArray().map(({name:e,type:t})=>({name:e,type:t})):[]},Cle=async(e,t)=>await Sle(e,t)?(await e.query(`SUMMARIZE ${t}`)).toArray():[],Tle=async(e,t)=>{const n=await Ele(e,t);return n?n.map(e=>e.name):[]},kle=async(e,t,n,i)=>{const r=await Tle(e,t);if(!r.length)return null==i||i.push(...n),!1;const o=new Set(r),s=n.filter(e=>!o.has(e));return null==i||i.push(...s),0===s.length},Ale=(e,t,n=4)=>{if(e.size>=t.length/n)return new Float32Array(0);const i=new Float32Array(t.length-e.size*n);let r=0;for(let o=0;o<t.length;o+=n)e.has(o/n)||(i.set(t.subarray(o,o+n),r),r+=n);return i},Ile=e=>{const t=new Map;for(const n of e)t.set(n,(t.get(n)||0)+1);return Array.from(t.entries()).sort((e,t)=>t[1]-e[1]).map(e=>e[0])},Ple=(e,t,n)=>e.length?e.reduce((e,i,r)=>(n(i,t)&&e.push(r),e),[]):[],Lle=(e,t)=>{const n=sv(e,hle),i=sv(e,dle);if(n===i){const[n,i]=Hy(e);return t?t(n,i):[n,i]}return t?t(n,i):[n,i]},Rle=(e,t,n)=>{if(!e.length)return n;const i=t?Lle(e):Hy(e);if(void 0===i[0]||void 0===i[1])return n;if(!n)return i;if(!t)return n;const[r,o]=n,[s,a]=i,l=Math.max(r,s),c=Math.min(o,a);return!Number.isFinite(l)||!Number.isFinite(c)||l>=c?n:[l,c]},Ole=async(e,t,n)=>await e.query(`SELECT ${(null==n?void 0:n.map(e=>`"${e}"`).join(", "))??"*"} FROM ${t}`),Mle=async(e,t,n,i)=>{var r;const o=i.map(e=>"string"==typeof e?`${Kte(e)}`:e),s=`SELECT "${n.pointIndexBy}" FROM ${t} WHERE "${n.pointIdBy}" IN (${o})`,a=await e.query(s);return a?(null==(r=a.getChildAt(0))?void 0:r.toArray())??[]:void 0},Dle=async(e,t,n,i)=>{var r;const o=i.join(", "),s=`SELECT "${n.pointIdBy}" FROM ${t} WHERE "${n.pointIndexBy}" IN (${o})`,a=await e.query(s);return a?(null==(r=a.getChildAt(0))?void 0:r.toArray())??[]:void 0},Nle=(e,t=8192,n=t/2,i=t/8)=>Array.from({length:2*e},()=>{const e=n+i*Math.sqrt(-2*Math.log(Math.random()))*Math.cos(2*Math.PI*Math.random());return Math.max(1,Math.min(t-1,e))}),Fle=async(e,t)=>{var n,i;const r=await e.query(t);if(!r)return;const o=(null==(n=r.getChildAt(0))?void 0:n.toArray())??[],s=(null==(i=r.getChildAt(1))?void 0:i.toArray())??[];return[...new Set([...o,...s])]},Ble=async(e,t,n)=>await e.query(`SELECT ${(null==n?void 0:n.map(e=>`"${e}"`).join(", "))??"*"} FROM ${t}`),zle=[null,void 0,"null","","undefined","nan"],Ule=e=>zle.includes("string"==typeof e?e.toLowerCase():e),jle=e=>{const t=sv(e,hle),n=sv(e,dle),[i,r]=Hy(e),o=t===n?i:t,s=t===n?r:n;return o===s?[o,s+1e-6]:[o,s]},Vle=(e,t,n)=>{const i=new Set(e);for(const o of i)Ule(o)&&i.delete(o);const r=dv().domain(Array.from(i)).range(t);return e=>Ule(e)?n:r(e)},Hle=(e,t,n,i=!0)=>{const r=i?jle(e):Hy(e);return US(Pb(Ib.gamma(1.5),t)).domain(r).unknown(n).clamp(!0)},Wle=(e,t,n,i=!0)=>{const r=i?jle(e):Hy(e);return xx().domain(r).range(t).unknown(n)},$le=(e,t)=>{if(!e)return t;if("string"==typeof e)return e;const[n,i,r]=e.map(e=>Math.round(255*e));return`rgb(${n}, ${i}, ${r})`},Gle=(e,t,n=!1)=>{let i;if(n){const t=sv(e,hle),n=sv(e,dle);i=t===n?Hy(e):[t,n]}else i=Hy(e);return i[0]===i[1]&&(i[1]=i[1]+1e-6),px().range(t).domain(i).clamp(!0)};let qle=class{constructor(){s(this,"_colorStore"),this._colorStore=new Map}getColor(e){if(this._colorStore.has(e))return this._colorStore.get(e);{const t=Nv(e),n=[t.r/255,t.g/255,t.b/255,t.opacity];return this._colorStore.set(e,n),n}}clearCache(){this._colorStore.clear()}};const Yle=(e,t,n)=>{const i=new Float32Array(e.length);for(let r=0;r<e.length;r++){const o=e.get(r);i[r]=n?n(o,r):o??t}return i},Xle=(e,t,n)=>{const i=new Float32Array(4*e.length),r=new qle;for(let o=0;o<e.length;o++){const s=e.get(o),a=n?n(s,o):s??t;let[l,c,u,d]=Array.isArray(a)?a:r.getColor(a);(isNaN(l)||isNaN(c)||isNaN(u)||isNaN(d))&&([l,c,u,d]=Array.isArray(t)?t:r.getColor(t));const h=4*o;i[h]=l,i[h+1]=c,i[h+2]=u,i[h+3]=d}return r.clearCache(),i};var Kle;!function(e){e.Categorical="categorical",e.Continuous="continuous",e.Map="map",e.Degree="degree",e.PreciseDegree="preciseDegree",e.LinkDirection="linkDirection",e.Direct="direct",e.Single="single"}(Kle||(Kle={}));const Zle=(e,t,n,i)=>{const r=$le(t.unknownColor,yle),o=t.pointColorPalette??mle;return{[Kle.Degree]:()=>Hle(n,o,r),[Kle.PreciseDegree]:()=>Hle(n,o,r,!1),[Kle.LinkDirection]:()=>Wle(n,o,r,!1),[Kle.Map]:()=>e=>t.pointColorByMap?t.pointColorByMap[e]??r:r,[Kle.Categorical]:()=>{let e;if(Zte(i)&&(e=Wle(n,o,r)),Qte(i)||Jte(i)){const t=Ile(n);e=Vle(t,o,r)}return e},[Kle.Continuous]:()=>{let e;if(Zte(i)&&(e=Hle(n,o,r)),Qte(i)||Jte(i)){e=((e,t,n)=>{const i=Array.from(new Set(e)),r=function(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}(Pb(Ib.gamma(2.2),t),i.length);return Vle(i,r.reverse(),n)})(Ile(n),o,r)}return e},[Kle.Direct]:()=>t.pointColorByFn,[Kle.Single]:()=>()=>t.pointDefaultColor}[e]()};var Qle;!function(e){e.Sum="sum",e.Average="average",e.Count="count",e.Categorical="categorical",e.Direct="direct",e.Single="single"}(Qle||(Qle={}));const Jle=(e,t,n,i)=>{const r=$le(t.unknownColor,yle),o=t.linkColorPalette??gle;return{[Qle.Sum]:()=>Hle(n,o,r),[Qle.Average]:()=>Hle(n,o,r),[Qle.Count]:()=>Hle(n,o,r),[Qle.Categorical]:()=>{let e;if(Zte(i)&&(e=Wle(n,o,r)),Qte(i)||Jte(i)){const t=Ile(n);e=Vle(t,o,r)}return e},[Qle.Direct]:()=>t.linkColorByFn,[Qle.Single]:()=>()=>t.linkDefaultColor}[e]()};var ece;!function(e){e.Degree="degree",e.PreciseDegree="preciseDegree",e.Auto="auto",e.Direct="direct",e.Single="single"}(ece||(ece={}));const tce=(e,t,n)=>({[ece.Degree]:()=>Gle(n,t.pointSizeRange??fle,!0),[ece.PreciseDegree]:()=>Gle(n,t.pointSizeRange??fle),[ece.Auto]:()=>Gle(n,t.pointSizeRange??fle,!0),[ece.Direct]:()=>t.pointSizeByFn,[ece.Single]:()=>()=>t.pointDefaultSize}[e]());var nce;!function(e){e.Sum="sum",e.Average="average",e.Count="count",e.Direct="direct",e.Single="single"}(nce||(nce={}));const ice=(e,t,n)=>{const i=()=>Gle(n,t.linkWidthRange??ple,!0);return{[nce.Sum]:i,[nce.Average]:i,[nce.Count]:i,[nce.Direct]:()=>t.linkWidthByFn??i(),[nce.Single]:()=>()=>t.linkDefaultWidth}[e]()};class rce{constructor(e){s(this,"_"),s(this,"config",xle),s(this,"_rawConfig",{}),s(this,"_cosmosConfig",{}),s(this,"_configUpdatePromise",null),s(this,"_cosmosInitPromise",null),s(this,"_cosmosInitResolved",null),s(this,"_currentPointColorStrategy",Kle.Direct),s(this,"_currentLinkColorStrategy",Qle.Direct),s(this,"_currentPointSizeStrategy",ece.Direct),s(this,"_currentLinkWidthStrategy",nce.Direct),s(this,"_currentPointColorFn"),s(this,"_currentPointSizeFn"),s(this,"_currentLinkColorFn"),s(this,"_currentLinkWidthFn"),s(this,"_clusterMapping",new Map),s(this,"_clusterIndexToNameMapping",new Map),s(this,"_preservedPointPositions",new Map),s(this,"resetCosmographConfig",()=>{this.config=xle}),s(this,"_checkPointEvents",()=>!(void 0===this.config.onClick&&!this.config.selectPointOnClick&&!this.config.focusPointOnClick)),this._=e,this._cosmosInitPromise=new Promise(e=>{this._cosmosInitResolved=e})}get activePointColorStrategy(){return this._currentPointColorStrategy}get activeLinkColorStrategy(){return this._currentLinkColorStrategy}get activePointSizeStrategy(){return this._currentPointSizeStrategy}get activeLinkWidthStrategy(){return this._currentLinkWidthStrategy}get activePointColorFn(){return this._currentPointColorFn}get activePointSizeFn(){return this._currentPointSizeFn}get activeLinkColorFn(){return this._currentLinkColorFn}get activeLinkWidthFn(){return this._currentLinkWidthFn}get clusterMapping(){return this._clusterMapping}get clusterIndexToNameMapping(){return this._clusterIndexToNameMapping}get cosmosConfig(){return this._cosmosConfig}async configUpdated(){await this._configUpdatePromise}async cosmosInitialized(){await this._cosmosInitPromise}setConfig(e){this._configUpdatePromise=(async()=>{var t,n,i;try{await this._.dbReady();const n=this.config;if(n.points&&!(null==e?void 0:e.points)&&!this._.public.stats.pointsCount)return void this._.public.reset();this.config=Rse(xle,e??{}),this._rawConfig=e??{},this._controlBackgroundColor(n,this.config),this._.rectangularSelection.updateSelectionClassName(),window.cosmographDisableLogging=this.config.disableLogging??!1,this._cosmosConfig=this._createCosmosConfig(),null==(t=this._.cosmos)||t.setConfig(this._cosmosConfig),await this._processConfigUpdate(n),this._handleScaleChangeEvents(n,this.config)}finally{this._configUpdatePromise=null,null==(i=(n=this.config).onConfigUpdated)||i.call(n)}})()}async _processConfigUpdate(e){var t,n;const i=this._detectPointsChanged(e),r=this._detectLinksChanged(e),o=this._detectVisualLinkChanges(e),s=this._detectVisualPointChanges(e),a=this._detectClusterChanges(e),l=this._detectLabelChanges(e);if((i||r)&&await this._.dataManager.updateGraphData(i,r))return await this._rebuildGraph(!i&&r,r),void(this._cosmosInitResolved&&(this._cosmosInitResolved(),this._cosmosInitResolved=null));(o||s||a)&&this._.cosmos&&(await this._updateGraphProperties(e,s,this._.public.stats.linksCount>0&&o),this._.cosmos.render((null==(t=this._.cosmos)?void 0:t.isSimulationRunning)?void 0:0)),l&&(null==(n=this._.labels)||n.update()),!this.config.preservePointPositionsOnDataUpdate&&this._preservedPointPositions.size&&this._preservedPointPositions.clear()}async _rebuildGraph(e,t){var n,i,r;try{e?await this._updateGraphProperties(void 0,!1):(this._.dispatchEvent(new CustomEvent("reset")),await this._.initializeCosmos(),this._.initializeLabels(),await this._updateGraphProperties(void 0,!0,t)),this._.updateMessage(null);const o=!this._.public.isSimulationAvailable||!this._.pointsHaveLayout;null==(n=this._.cosmos)||n.render(o?void 0:0),this._.updateStats(),this._.dispatchEvent(new CustomEvent("graphRebuilt")),null==(r=(i=this.config).onGraphRebuilt)||r.call(i,this._.public.stats),this.config.points&&Wte((this._.public.stats.pointsCount,this._.public.stats.linksCount))}catch(o){Wte(0,0,"error"),this._.updateMessage(` ${o}`)}}async _updateGraphProperties(e,t=!0,n=!0){n&&await this.updateLinkProperties(e),t&&await this.updatePointProperties(e),this._updateClusterProperties(e)}async updatePointProperties(e,t=!1){var n,i,r;const{_:{dbCoordinator:o,config:s,public:{pointsTableName:a}}}=this,l=[s.pointXBy,s.pointYBy,s.pointColorBy,s.pointSizeBy,s.pointClusterBy,s.pointIndexBy,s.pointClusterStrengthBy].filter(Boolean),c=await Tle(o,a),u=new Set(c),d=l.filter(e=>u.has(e)),h=await Ole(o,a,d);let f=!1;(null==h?void 0:h.numRows)?(f=await this._handlePointPositions(e,h,t),f&&(null==(n=this._.cosmos)||n.graph.update()),this._handlePointColors(e,h),this._handlePointSizes(e,h),await this._handlePointClusterProps(e,h),f?null==(i=this._.labels)||i.update():null==(r=this._.labels)||r.render()):await this._.public.reset(!1)}async updateLinkProperties(e){const{dbCoordinator:t,cosmos:n,config:i,public:{linksTableName:r,stats:o}}=this._;if(!o.linksCount&&!(await Sle(t,r)))return;const s=[i.linkColorBy,i.linkWidthBy,i.linkStrengthBy,i.linkArrowBy,i.linkSourceIndexBy,i.linkTargetIndexBy].filter(Boolean),a=await Tle(t,r),l=new Set(a),c=s.filter(e=>l.has(e)),u=await Ble(t,r,c);if(u){if(u.numRows!==(null==n?void 0:n.graph.linksNumber)){const e=((e,t)=>{if(!t.linkSourceIndexBy||!t.linkTargetIndexBy)return new Float32Array(0);const n=e.getChild(t.linkSourceIndexBy),i=e.getChild(t.linkTargetIndexBy),r=e.numRows,o=new Float32Array(2*r);for(let s=0,a=0;s<r;s++,a+=2)o[a]=(null==n?void 0:n.get(s))??0,o[a+1]=(null==i?void 0:i.get(s))??0;return o})(u,this.config);null==n||n.setLinks(e),this._.linkAggregationManager.buildCountCache(u),this._.linkAggregationManager.clearColorSumCache(),this._.linkAggregationManager.clearWidthSumCache()}this._handleLinkColors(e,u),this._handleLinkWidths(e,u),this._handleLinkStrengths(e,u),this._handleLinkArrows(e,u)}}_updateClusterProperties(e){const{config:t,_:{cosmos:n}}=this;if(!e||(null==e?void 0:e.clusterPositionsMap)!==t.clusterPositionsMap)if(t.clusterPositionsMap&&this._clusterMapping.size>0){const e=((e,t)=>{const n=[];return t.forEach((t,i)=>{if(e&&t in e){const r=e[t];if(r){const[e,t]=r;n[2*i]=e,n[2*i+1]=t}else n[2*i]=void 0,n[2*i+1]=void 0}else n[2*i]=void 0,n[2*i+1]=void 0}),n})(t.clusterPositionsMap,Array.from(this._clusterMapping.keys()));null==n||n.setClusterPositions(e)}else null==n||n.setClusterPositions([])}async _handlePointPositions(e,t,n=!1){const{config:i,_:{cosmos:r}}=this;if((null==r?void 0:r.graph.pointsNumber)&&e&&e.pointXBy===i.pointXBy&&e.pointYBy===i.pointYBy)return!1;let o=[];if(i.pointXBy||i.pointYBy){if(!(await this._.dataValidator.validatePointPositions()))return!1;o=((e,t)=>{if(!(null==t?void 0:t.pointXBy)||!(null==t?void 0:t.pointYBy))return[];const n=e.getChild(t.pointXBy),i=e.getChild(t.pointYBy),r=e.numRows,o=new Array(2*r);for(let s=0;s<r;s++)o[2*s]=null==n?void 0:n.get(s),o[2*s+1]=null==i?void 0:i.get(s);return o})(t,i)}else o=n?((e,t)=>{const n=null==e?void 0:e.getPointPositions(),i=e.getScaleX(),r=e.getScaleY();if(null==n?void 0:n.length){const o=t-n.length/2;let s=Nle(o,e.config.spaceSize);return i&&r&&(s=s.map((e,t)=>t%2==0?i(e):r(e))),n.concat(s)}return Nle(t,e.config.spaceSize)})(r,t.numRows):Nle(t.numRows,i.spaceSize);return i.preservePointPositionsOnDataUpdate&&this._preservedPointPositions.size>0&&((e,t)=>{const n=e.length/2;for(let i=0;i<n;i++){const n=t.get(i);n&&(e[2*i]=n[0],e[2*i+1]=n[1])}t.clear()})(o,this._preservedPointPositions),null==r||r.setPointPositions(new Float32Array(o),!n&&void 0),!0}_handlePointColors(e,t){const{config:n,_:{cosmos:i}}=this,r=[tle.PointColor,tle.PointColorStrategy,tle.PointColorPalette,tle.PointColorFn,tle.PointColorMap,"pointDefaultColor"];if(e&&!this._hasConfigChanged(e,n,r))return;let o=new Float32Array;const s=n.pointColorBy?t.getChild(n.pointColorBy):void 0;if(this._currentPointColorStrategy=function(e={},t){const{pointColorStrategy:n,pointColorBy:i,pointColorByFn:r,pointColorByMap:o,linkSourceBy:s,linkTargetBy:a}=e;if(n&&Object.values(Kle).includes(n))return n;if(r)return Kle.Direct;if(i){if(o)return Kle.Map;if(Zte(t))return Kle.Continuous;if(Qte(t)||Jte(t))return Kle.Categorical}return!i&&s&&a?Kle.Degree:Kle.Single}(this._rawConfig,null==s?void 0:s.type),this._currentPointColorFn=void 0,this._currentPointColorStrategy===Kle.Degree||this._currentPointColorStrategy===Kle.PreciseDegree){const e=this._.public.pointDegrees;e&&(this._currentPointColorFn=Zle(this._currentPointColorStrategy,n,e),o=Xle(z9(e),n.unknownColor,this._currentPointColorFn))}else if(this._currentPointColorStrategy===Kle.LinkDirection){const e=this._.public.pointDirections;e&&(this._currentPointColorFn=Zle(this._currentPointColorStrategy,n,e),o=Xle(z9(e),n.unknownColor,this._currentPointColorFn))}else s?(this._currentPointColorFn=Zle(this._currentPointColorStrategy,n,s.toArray(),null==s?void 0:s.type),o=Xle(s,n.unknownColor,this._currentPointColorFn)):n.pointColorBy&&Wte(n.pointColorBy,0,"warn");null==i||i.setPointColors(o),this._.dispatchEvent(new CustomEvent("pointColorUpdated"))}_handlePointSizes(e,t){const{config:n,_:{cosmos:i}}=this,r=[tle.PointSize,tle.PointSizeStrategy,tle.PointSizeRange,tle.PointSizeFn,"pointDefaultSize"];if(e&&!this._hasConfigChanged(e,n,r))return;let o=new Float32Array;const s=n.pointSizeBy?t.getChild(n.pointSizeBy):void 0;if(this._currentPointSizeStrategy=function(e,t){const{pointSizeStrategy:n,pointSizeBy:i,pointDefaultSize:r,pointSizeByFn:o,linkSourceBy:s,linkTargetBy:a}=e;return n&&Object.values(ece).includes(n)?n:o?ece.Direct:i&&Zte(t)?ece.Auto:!r&&!i&&s&&a?ece.Degree:ece.Single}(this._rawConfig,null==s?void 0:s.type),this._currentPointSizeFn=void 0,this._currentPointSizeStrategy===ece.Degree||this._currentPointSizeStrategy===ece.PreciseDegree){const e=null==i?void 0:i.graph.degree;e&&(this._currentPointSizeFn=tce(this._currentPointSizeStrategy,n,e),o=Yle(z9(e),n.pointDefaultSize,this._currentPointSizeFn))}else s?(this._currentPointSizeFn=tce(this._currentPointSizeStrategy,n,s.toArray()),o=Yle(s,n.pointDefaultSize,this._currentPointSizeFn)):n.pointSizeBy&&Wte(n.pointSizeBy,0,"warn");null==i||i.setPointSizes(o),this._.dispatchEvent(new CustomEvent("pointSizeUpdated"))}async _handlePointClusterProps(e,t){const{config:n,_:{cosmos:i}}=this;if(!e||e.pointClusterStrengthBy!==n.pointClusterStrengthBy){const e=n.pointClusterStrengthBy?t.getChild(n.pointClusterStrengthBy):void 0;let r=new Float32Array;e&&(r=Yle(e,wle(tle.PointClusterStrength))),null==i||i.setPointClusterStrength(r)}const r=[tle.PointCluster,tle.PointClusterFn];if(e&&!this._hasConfigChanged(e,n,r))return;const o=n.pointClusterBy?t.getChild(n.pointClusterBy):void 0;if(o){let e=Array.from(o.toArray());n.pointClusterByFn&&(e=e.map(n.pointClusterByFn));const t=new Map;for(const n of e){const e=String(n);t.set(e,(t.get(e)??0)+1)}this._clusterMapping.clear(),this._clusterIndexToNameMapping.clear();let r=0;for(const n of t.keys()){const e=t.get(n);this._clusterMapping.set(n,{index:r,count:e}),this._clusterIndexToNameMapping.set(r,{name:n,count:e}),r++}const s=e.map(e=>{var t;return void 0===e||null==(t=this._clusterMapping.get(String(e)))?void 0:t.index});null==i||i.setPointClusters(s)}else this._clusterMapping.clear(),this._clusterIndexToNameMapping.clear(),null==i||i.setPointClusters([]);this._.dispatchEvent(new CustomEvent("clustersUpdated"))}_handleLinkColors(e,t){const{config:n,_:{cosmos:i}}=this,r=[nle.LinkColor,nle.LinkColorStrategy,nle.LinkColorPalette,nle.LinkColorFn,"linkDefaultColor"];if(e&&e.linkColorBy!==n.linkColorBy&&this._.linkAggregationManager.clearColorSumCache(),e&&!this._hasConfigChanged(e,n,r))return;let o=new Float32Array;const s=n.linkColorBy?t.getChild(n.linkColorBy)??void 0:void 0;if(this._currentLinkColorStrategy=function(e={},t){const{linkColorStrategy:n,linkColorBy:i,linkColorByFn:r,linkSourceBy:o,linkTargetBy:s}=e;if(n&&Object.values(Qle).includes(n))return n;if(r)return Qle.Direct;if(i){if(Zte(t))return Qle.Sum;if(Qte(t)||Jte(t))return Qle.Categorical}return!i&&o&&s?Qle.Count:Qle.Single}(this._rawConfig,null==s?void 0:s.type),this._currentLinkColorFn=void 0,this._currentLinkColorStrategy!==Qle.Sum&&this._currentLinkColorStrategy!==Qle.Average||!s||this._.linkAggregationManager.colorSumCache||this._.linkAggregationManager.buildColorSumCache(t,s),[Qle.Count,Qle.Sum,Qle.Average].includes(this._currentLinkColorStrategy)){const e=this._.linkAggregationManager.aggregateFromCache(t,this._currentLinkColorStrategy,!0);e&&(this._currentLinkColorFn=Jle(this._currentLinkColorStrategy,n,e),o=Xle(z9(e),n.unknownColor,this._currentLinkColorFn))}else s?(this._currentLinkColorFn=Jle(this._currentLinkColorStrategy,n,s.toArray(),null==s?void 0:s.type),o=Xle(s,n.unknownColor,this._currentLinkColorFn)):n.linkColorBy&&Wte(n.linkColorBy,0,"warn");null==i||i.setLinkColors(o),this._.dispatchEvent(new CustomEvent("linkColorUpdated"))}_handleLinkWidths(e,t){const{config:n,_:{cosmos:i}}=this,r=[nle.LinkWidth,nle.LinkWidthRange,nle.LinkWidthStrategy,nle.LinkWidthFn,"linkDefaultWidth"];if(e&&e.linkWidthBy!==n.linkWidthBy&&this._.linkAggregationManager.clearWidthSumCache(),e&&!this._hasConfigChanged(e,n,r))return;let o=new Float32Array;const s=n.linkWidthBy?t.getChild(n.linkWidthBy):void 0;if(this._currentLinkWidthStrategy=function(e,t){const{linkWidthStrategy:n,linkWidthBy:i,linkWidthByFn:r,linkSourceBy:o,linkTargetBy:s}=e;return n&&Object.values(nce).includes(n)?n:r?nce.Direct:i&&Zte(t)?nce.Sum:!i&&o&&s?nce.Count:nce.Single}(this._rawConfig,null==s?void 0:s.type),this._currentLinkWidthFn=void 0,this._currentLinkWidthStrategy!==nce.Sum&&this._currentLinkWidthStrategy!==nce.Average||!s||this._.linkAggregationManager.widthSumCache||this._.linkAggregationManager.buildWidthSumCache(t,s),[nce.Count,nce.Sum,nce.Average].includes(this._currentLinkWidthStrategy)){const e=this._.linkAggregationManager.aggregateFromCache(t,this._currentLinkWidthStrategy,!1);e&&(this._currentLinkWidthFn=ice(this._currentLinkWidthStrategy,this.config,e),o=Yle(z9(e),this.config.linkDefaultWidth,this._currentLinkWidthFn))}else s?(this._currentLinkWidthFn=ice(this._currentLinkWidthStrategy,this.config,s.toArray()),o=Yle(s,n.linkDefaultWidth,this._currentLinkWidthFn)):n.linkWidthBy&&Wte(n.linkWidthBy,0,"warn");null==i||i.setLinkWidths(o),this._.dispatchEvent(new CustomEvent("linkWidthUpdated"))}_handleLinkStrengths(e,t){const{config:n,_:{cosmos:i}}=this,r=[nle.LinkStrength,nle.LinkStrengthRange,nle.LinkStrengthFn];if(e&&!this._hasConfigChanged(e,n,r))return;let o=new Float32Array;const s=n.linkStrengthBy?t.getChild(n.linkStrengthBy):void 0;if(s){const e=n.linkStrengthByFn??Gle(s.toArray(),n.linkStrengthRange);o=Yle(s,wle(nle.LinkStrength),e)}else n.linkStrengthBy&&Wte(n.linkStrengthBy,0,"warn");null==i||i.setLinkStrength(o)}_handleLinkArrows(e,t){const{config:n,_:{cosmos:i}}=this,r=[nle.LinkArrow,nle.LinkArrowFn,"linkDefaultArrows"];if(e&&!this._hasConfigChanged(e,n,r))return;let o=[];const s=n.linkArrowBy?t.getChild(n.linkArrowBy):void 0;s?o=((e,t,n)=>{const i=new Array(e.length);for(let r=0;r<e.length;r++){const o=e.get(r);i[r]=n?n(o,r):o??t}return i})(s,n.linkDefaultArrows,n.linkArrowByFn):n.linkArrowBy&&Wte(n.linkArrowBy,0,"warn"),null==i||i.setLinkArrows(o)}_handleScaleChangeEvents(e,t){(null==e?void 0:e.pointSizeScale)===t.pointSizeScale&&(null==e?void 0:e.scalePointsOnZoom)===t.scalePointsOnZoom||this._.dispatchEvent(new CustomEvent("pointSizeScaleUpdated")),(null==e?void 0:e.linkWidthScale)===t.linkWidthScale&&(null==e?void 0:e.scaleLinksOnZoom)===t.scaleLinksOnZoom||this._.dispatchEvent(new CustomEvent("linkWidthScaleUpdated"))}_hasConfigChanged(e,t,n){return n.some(n=>!Gte(e[n],t[n]))}_detectPointsChanged(e){return this._hasConfigChanged(e,this.config,sle)}_detectLinksChanged(e){return this._hasConfigChanged(e,this.config,ale)}_detectLabelChanges(e){return this._hasConfigChanged(e,this.config,ule)}_detectVisualLinkChanges(e){return this._hasConfigChanged(e,this.config,lle)}_detectVisualPointChanges(e){return this._hasConfigChanged(e,this.config,cle)}_detectClusterChanges(e){return this._hasConfigChanged(e,this.config,ole)}_controlBackgroundColor(e,t){var n,i;if((null==e?void 0:e.backgroundColor)===t.backgroundColor)return;const r=(e=>{var t,n;if(!e)return;if("string"==typeof e)return null==(t=Rv(e))?void 0:t.formatHex();const[i,r,o,s]=e;return null==(n=Rv(`rgba(${i}, ${r}, ${o}, ${s})`))?void 0:n.formatHex()})(t.backgroundColor),o=r&&(e=>{const t=(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt((t[1]||0).toString(),16),g:parseInt((t[2]||0).toString(),16),b:parseInt((t[3]||0).toString(),16)}:{r:0,g:0,b:0}})(e);return(.2126*t.r+.7152*t.g+.0722*t.b)/255})(r)>.65?"#000000":"#ffffff";null==(n=this._.containerElement)||n.style.setProperty("--cosmograph-text-color",o),null==(i=this._.cosmosElement)||i.style.setProperty("backgroundColor",r??_le)}_createCosmosConfig(){var e;const t={...this.config,hoveredPointCursor:this._checkPointEvents()?(null==(e=this.config)?void 0:e.hoveredPointCursor)??"pointer":"auto"};return delete t.enableSimulation,delete t.attribution,this._.eventManager.attachCosmosEvents(t),t}updatePreservedPointPositions(e){this._preservedPointPositions=e}clearCosmosBuffers(e){const{_:{cosmos:t}}=this;e||(null==t||t.setPointPositions(new Float32Array),null==t||t.setPointColors(new Float32Array),null==t||t.setPointSizes(new Float32Array),null==t||t.setPointClusters([]),null==t||t.setPointClusterStrength(new Float32Array),null==t||t.setClusterPositions([])),null==t||t.setLinks(new Float32Array),null==t||t.setLinkColors(new Float32Array),null==t||t.setLinkWidths(new Float32Array),null==t||t.setLinkStrength(new Float32Array),null==t||t.setLinkArrows([])}}let oce=class{constructor(e){s(this,"_"),s(this,"_linksSelection",y2.crossfilter()),s(this,"_pointsSelection",y2.crossfilter()),s(this,"_onLinksFiltered"),s(this,"_onPointsFiltered"),s(this,"_crossfilter",{links:new Set,points:new Set,intersection:new Set}),this._=e,this._onLinksFiltered=e=>this._handleCrossfiltering(e,"links"),this._onPointsFiltered=e=>this._handleCrossfiltering(e,"points")}get filtered(){return this._crossfilter}get pointsSelection(){return this._pointsSelection}get linksSelection(){return this._linksSelection}get onLinksFiltered(){return this._onLinksFiltered}get onPointsFiltered(){return this._onPointsFiltered}get isFilteringActive(){return this._linksSelection.clauses.length>0||this._pointsSelection.clauses.length>0}_handleCrossfiltering(e,t){var n,i;const{config:r,cosmos:o,labels:s}=this._;this._getSetForCrossfilter(e,t),this._getIntersection(),this.isFilteringActive?null==o||o.selectPointsByIndices(Array.from(this._crossfilter.intersection)):null==o||o.unselectPoints();const a=this._.public.getSelectedLinkIndices(),l=null==o?void 0:o.getSelectedIndices();"points"===t&&(null==(n=r.onPointsFiltered)||n.call(r,e,l,a)),"links"===t&&(null==(i=r.onLinksFiltered)||i.call(r,e,l,a)),null==s||s.update(),this._.dispatchEvent(new CustomEvent("dataFiltered"))}_getSetForCrossfilter(e,t){var n;const{config:i}=this._;let r;if("links"===t)r=((e,t)=>{if(!t.linkSourceIndexBy||!t.linkTargetIndexBy)return new Set;const n=e.getChild(t.linkSourceIndexBy),i=e.getChild(t.linkTargetIndexBy);if(!n||!i)return new Set;const r=new Set;for(let o=0;o<n.length;o++)r.add(n.get(o)),r.add(i.get(o));return r})(e,i);else{const t=null==(n=e.getChild(i.pointIndexBy))?void 0:n.toArray();r=new Set(t)}this._crossfilter[t]=r}_getIntersection(){const{links:e,points:t}=this._crossfilter,n=t.values();let i=new Set;if(this._linksSelection.clauses.length&&this._pointsSelection.clauses.length)for(const r of n)e.has(r)&&i.add(r);else i=this._linksSelection.clauses.length?e:t;this._crossfilter.intersection=i}},sce=class{constructor(e){s(this,"_"),s(this,"_dataUploadPromise",null),this._=e}get dataUploadPromise(){return this._dataUploadPromise}async dataReady(){var e;await this._.dbReady(),(null==(e=this._.dbCoordinator)?void 0:e.internalDB)&&this._dataUploadPromise&&await this._dataUploadPromise}async updateGraphData(e,t){let n=!1;return this._dataUploadPromise&&(Wte(0,0,"info"),await this._dataUploadPromise),!!this._.dbCoordinator&&(this._dataUploadPromise=(async()=>{var i,r,o,s,a;(null==(i=this._.cosmos)?void 0:i.isSimulationRunning)&&(null==(r=this._.cosmos)||r.stop()),null==(o=this._.dbCoordinator)||o.clearCache();try{if(e){const{pointsOk:e}=await this._uploadAndValidateGraphData(t);n=e}else if(t){const{linksOk:t}=await this._uploadAndValidateLinksData();n=e?n&&t:t}}finally{this._dataUploadPromise=null,this._.dispatchEvent(new CustomEvent("dataUploaded")),null==(a=null==(s=this._.config)?void 0:s.onGraphDataUpdated)||a.call(s)}})(),await this._dataUploadPromise,n)}async _addPreparedData(e,t){var n;const{_:{dbCoordinator:i,public:{linksTableName:r,isSimulationRunning:o,activePointColorStrategy:s,activePointSizeStrategy:a}}}=this;if(i&&(null==i?void 0:i.internalDB)){if(e&&(await this._uploadPoints(e,!0),await this._.configManager.updatePointProperties(void 0,!0)),t){const e=await Sle(i,r);await this._uploadLinks(t,e),await this._.configManager.updateLinkProperties(void 0),s!==Kle.Degree&&s!==Kle.LinkDirection&&a!==ece.Degree||await this._.configManager.updatePointProperties(void 0,!0)}null==(n=this._.cosmos)||n.render(o?this._.config.simulationImpulse:0),this._triggerGraphUpdated()}}async addPoints(e){const{_:{dbCoordinator:t,public:{stats:n}}}=this,{pointIndexBy:i,pointIdBy:r}=this._.config;if(t&&(null==t?void 0:t.internalDB)){const o=n.pointsCount,s=await Tle(t,One.Points),a=[];for(const t of e){if(void 0===t.id)continue;const e={};for(const n of s)if(n===i)e[n]=BigInt(o+a.length);else if(n===r)e[n]=t.id;else if(void 0!==t[n])e[n]=t[n];else{const t=Object.values(tle).find(e=>this._.config[e]===n);e[n]=t?wle(t):null}a.push(e)}this._preservePointPositionsIfEnabled(),a.length&&await this._addPreparedData(a,void 0)}}async addLinks(e){const{_:{dbCoordinator:t,config:n}}=this;if(!(null==t?void 0:t.internalDB))return;const{linkSourceBy:i,linkTargetBy:r,linkSourceIndexBy:o,linkTargetIndexBy:s}=n;if(!(i&&r&&o&&s))return;const a=e.filter(e=>null!=e.source&&null!=e.target),l=[...new Set(a.flatMap(e=>[e.source,e.target]).map(String))];if(!l.length)return;const c=await Mle(t,One.Points,n,l);if(!c)return;const u=new Map(l.map((e,t)=>[e,c[t]]));let d=await Sle(t,One.Links)?await Tle(t,One.Links):[];d.length||(d=[i,r,o,s,...n.linkColorBy?[n.linkColorBy]:[],...n.linkWidthBy?[n.linkWidthBy]:[],...n.linkArrowBy?[n.linkArrowBy]:[],...n.linkStrengthBy?[n.linkStrengthBy]:[],...Array.isArray(n.linkIncludeColumns)?n.linkIncludeColumns:[]]);const h=[];for(const f of a){const e=String(f.source),t=String(f.target),a=u.get(e),l=u.get(t);if(void 0===a||void 0===l)continue;const c={};for(const u of d)if(u===i)c[u]=f.source;else if(u===r)c[u]=f.target;else if(u===o)c[u]=BigInt(a);else if(u===s)c[u]=BigInt(l);else if(u in f&&void 0!==f[u])c[u]=f[u];else{const e=Object.values(nle).find(e=>n[e]===u);c[u]=e?wle(e):null}h.push(c)}h.length&&await this._addPreparedData(void 0,h)}async removePointsByIndices(e,t=!0){var n;const{_:{dbCoordinator:i,public:{pointsTableName:r,linksTableName:o,stats:s,isSimulationRunning:a}}}=this;if(!i||s.pointsCount<=1)return;const l=[...new Set(e)];if(!(l.length>=s.pointsCount)&&(null==i?void 0:i.internalDB)){const e=`${l.join(", ")}`;await i.internalDB.query(`DELETE FROM ${r} WHERE "${this._.config.pointIndexBy}" IN (${e})`),this._removePointsInCosmos(l),t&&s.linksCount&&(await i.internalDB.query(`DELETE FROM ${o} WHERE "${this._.config.linkSourceIndexBy}" IN (${e})\n          OR "${this._.config.linkTargetIndexBy}" IN (${e})`),await this._.configManager.updateLinkProperties(void 0)),null==(n=this._.cosmos)||n.render(a?this._.config.simulationImpulse:0),this._triggerGraphUpdated()}}async removePointsByIds(e){const t=await Mle(this._.dbCoordinator,this._.public.pointsTableName,this._.config,e);t&&await this.removePointsByIndices(t)}async removeLinksByPointIdPairs(e){await this._removeLinks(e,!1)}async removeLinksByPointIndicesPairs(e){await this._removeLinks(e,!0)}async _uploadData(e,t){let n={pointsError:!1,linksError:!1};if(!this._.dbCoordinator||!this._.dbCoordinator.internalDB)return n;try{n=await this._executeUpload(e,t)}catch(i){Wte(0,0,"error")}return n}async _uploadPoints(e,t=!1){var n,i;const r=await(null==(i=null==(n=this._.dbCoordinator)?void 0:n.internalDB)?void 0:i.uploadData(e,One.Points,t));return!!(null==r?void 0:r.error)}async _uploadLinks(e,t=!1){var n,i;const r=await(null==(i=null==(n=this._.dbCoordinator)?void 0:n.internalDB)?void 0:i.uploadData(e,One.Links,t));return!!(null==r?void 0:r.error)}async _executeUpload(e,t){Wte();const n={pointsError:!1,linksError:!1};return await this._.dbReady(),this._.updateMessage(" Loading data..."),e&&(n.pointsError=await this._uploadPoints(e)),t&&(n.linksError=await this._uploadLinks(t)),this._.updateMessage(n.pointsError?" Points data is empty or invalid.":null),n}_preservePointPositionsIfEnabled(){var e;const{config:t,public:{stats:n}}=this._;if(t.pointIdBy&&n.pointsCount&&t.preservePointPositionsOnDataUpdate){const t=null==(e=this._.cosmos)?void 0:e.getPointPositions();if(t&&t.length){const e=((e,t)=>new Map(Array.from({length:t},(t,n)=>[n,[e[2*n],e[2*n+1]]])))(t,n.pointsCount);this._.configManager.updatePreservedPointPositions(e)}}}async _uploadAndValidateGraphData(e){const{_:{config:t}}=this;if(!t.points){await this._.public.reset(!1);const e="Points source data is not provided in `points`.";return Wte(0,0,"error"),this._.updateMessage(` ${e}`),{pointsOk:!1,linksOk:!1}}this._preservePointPositionsIfEnabled();const{pointsError:n,linksError:i}=await this._uploadData(t.points,t.links);if(await this._.updateSummary(),n){const e="Failed to upload points data: The data is invalid or empty.";return Wte(0,0,"error"),this._.updateMessage(` ${e}`),{pointsOk:!1,linksOk:!1}}try{const r=!n&&await this._.dataValidator.validatePoints();if(!r)return{pointsOk:r,linksOk:!1};const o=e&&!i&&await this._.dataValidator.validateLinks();return t.links&&!o&&Wte(0,0,"warn"),{pointsOk:r,linksOk:o}}catch(r){return Wte(0,0,"error"),{pointsOk:!1,linksOk:!1}}}async _uploadAndValidateLinksData(){let e=!1;if(0===this._.public.stats.pointsCount)return{linksOk:e};if(this._.configManager.clearCosmosBuffers(!0),!this._.config.links)return await this._.dropLocalTables(!0),{linksOk:e};const{linksError:t}=await this._uploadData(void 0,this._.config.links);return await this._.updateSummary(),e=!t&&await this._.dataValidator.validateLinks(),e||await this._.dropLocalTables(!0),{linksOk:e}}_removePointsInCosmos(e){var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,_,y,v,b;if(!e.length)return;const x=new Set(e);if(null==(n=null==(t=this._.cosmos)?void 0:t.graph.pointPositions)?void 0:n.length){const e=Ale(x,null==(i=this._.cosmos)?void 0:i.graph.pointPositions,2);null==(r=this._.cosmos)||r.setPointPositions(e,!1)}if(null==(s=null==(o=this._.cosmos)?void 0:o.graph.pointColors)?void 0:s.length){const e=Ale(x,null==(a=this._.cosmos)?void 0:a.graph.pointColors,4);null==(l=this._.cosmos)||l.setPointColors(e)}if(null==(u=null==(c=this._.cosmos)?void 0:c.graph.pointSizes)?void 0:u.length){const e=Ale(x,null==(d=this._.cosmos)?void 0:d.graph.pointSizes,1);null==(h=this._.cosmos)||h.setPointSizes(e)}if(null==(p=null==(f=this._.cosmos)?void 0:f.graph.pointClusters)?void 0:p.length){const e=null==(m=this._.cosmos)?void 0:m.graph.pointClusters.filter((e,t)=>!x.has(t));null==(g=this._.cosmos)||g.setPointClusters(e)}if(null==(y=null==(_=this._.cosmos)?void 0:_.graph.clusterStrength)?void 0:y.length){const e=Ale(x,null==(v=this._.cosmos)?void 0:v.graph.clusterStrength,1);null==(b=this._.cosmos)||b.setPointClusterStrength(e)}}async _removeLinks(e,t){var n;const{_:{dbCoordinator:i,public:{linksTableName:r,stats:o,isSimulationRunning:s,activePointColorStrategy:a,activePointSizeStrategy:l}}}=this;if(!(null==i?void 0:i.internalDB)||!o.linksCount)return;const c=t?this._.config.linkSourceIndexBy:this._.config.linkSourceBy,u=t?this._.config.linkTargetIndexBy:this._.config.linkTargetBy,d=e=>t?e.toString():`'${e}'`,h=`\n      DELETE FROM ${r}\n      WHERE ${e.map(([e,t])=>`((${c} = ${d(e)} AND ${u} = ${d(t)}) OR\n        (${c} = ${d(t)} AND ${u} = ${d(e)}))`).join(" OR ")}\n    `;await i.internalDB.query(h),await this._.configManager.updateLinkProperties(void 0),a!==Kle.Degree&&a!==Kle.LinkDirection&&l!==ece.Degree||await this._.configManager.updatePointProperties(void 0,!0),null==(n=this._.cosmos)||n.render(s?this._.config.simulationImpulse:0),this._triggerGraphUpdated()}_triggerGraphUpdated(){var e,t;this._.dbCoordinator.clearCache(),this._.updateStats(),null==(t=(e=this._.config).onGraphRebuilt)||t.call(e,this._.public.stats),this._.dispatchEvent(new CustomEvent("dataUploaded")),this._.dispatchEvent(new CustomEvent("graphRebuilt"))}};const ace=()=>globalThis.__lastDuckdbError;let lce=class{constructor(e){s(this,"_"),this._=e}async validatePoints(){const{config:e,dbCoordinator:t,public:{pointsTableName:n}}=this._,i=sle.slice(1),r=e=>{throw Wte(0,0,"error"),this._.updateMessage(` ${e}`),new Error(e)};if(!(await Sle(t,n))){const e=ace();return r(e?`Failed to get points data: ${e}`:`Failed to get points data. Table "${n}" does not exist`)}const o=this._getMissingProperties(e,i);if(o.length)return r(`Failed to get points data.\n\nMissing required properties: ${this._formatMissingProps(o)}.`);const{exists:s,missingColumns:a}=await this._validateColumns(e,n,i);if(!s)return r(`Failed to get points data.\n\nMissing provided columns for required properties: ${this._formatMissingColumns(a,i)}.`);const l=(await Ele(t,n)).find(t=>t.name===e.pointIndexBy);return"VARCHAR"!==(null==l?void 0:l.type)||r(`The column specified for \`pointIndexBy\` (${e.pointIndexBy}) cannot be of type VARCHAR. Please use an integer-based column.`)}async validateLinks(){const{config:e,dbCoordinator:t,public:{linksTableName:n}}=this._,i=ale.slice(1),r=e=>{throw Wte(0,0,"error"),this._.updateMessage(` ${e}`),new Error(e)};if(!e.links){const e="Found links-related properties but links data is not provided. Rendering points only.";return Wte(0,0,"warn"),this._.updateMessage(` ${e}`),!1}if(!(await Sle(t,n))){const e=ace();if(e)return r(`Failed to get links data: ${e}`);const t=`Failed to get links data. Table "${n}" does not exist`;return Wte(0,0,"error"),this._.updateMessage(` ${t}`),!1}const o=this._getMissingProperties(e,i);if(o.length)return r(`Failed to get links data. \n\nMissing required properties: ${this._formatMissingProps(o)}.`);const{exists:s,missingColumns:a}=await this._validateColumns(e,n,i);return!!s||r(`Failed to get links data. \n\nMissing provided columns for required properties: ${this._formatMissingColumns(a,i)}.`)}async validatePointPositions(){const{config:e,config:{pointXBy:t,pointYBy:n},public:{pointsTableName:i}}=this._;if(Boolean(t)!==Boolean(n)){const e=`Couldn't render points: Only one of \`${tle.PointX}\` or \`${tle.PointY}\` provided.`;throw Wte(0,0,"error"),this._.updateMessage(` ${e}`),new Error(e)}if(t&&n){const{exists:t,missingColumns:n}=await this._validateColumns(e,i,[tle.PointX,tle.PointY]);if(!t){const e=`Couldn't render points: Failed to get provided point positions, missing columns for positions: ${this._formatMissingProps(n)}.`;throw Wte(0,0,"error"),this._.updateMessage(` ${e}`),new Error(e)}}return!0}async _validateColumns(e,t,n){const i=n.map(t=>e[t]),r=[];return{exists:await kle(this._.dbCoordinator,t,i,r),missingColumns:r}}_getMissingProperties(e,t){return t.filter(t=>void 0===e[t])}_formatMissingProps(e){return e.map(e=>`"${e}"`).join(", ")}_formatMissingColumns(e,t){return e.map(n=>`"${n}" (${t[e.indexOf(n)]})`).join(", ")}},cce=class{constructor(e){s(this,"_"),s(this,"_hoveredPointIndex"),this._=e}attachCosmosEvents(e={}){e.onSimulationStart=this.onSimulationStart.bind(this),e.onSimulationTick=this.onSimulationTick.bind(this),e.onSimulationEnd=this.onSimulationEnd.bind(this),e.onSimulationPause=this.onSimulationPause.bind(this),e.onSimulationUnpause=this.onSimulationUnpause.bind(this),e.onClick=this.onClick.bind(this),e.onPointMouseOver=this.onPointMouseOver.bind(this),e.onPointMouseOut=this.onPointMouseOut.bind(this),e.onMouseMove=this.onMouseMove.bind(this),e.onZoomStart=this.onZoomStart.bind(this),e.onZoom=this.onZoom.bind(this),e.onZoomEnd=this.onZoomEnd.bind(this),e.onDrag=this.onDrag.bind(this),e.onDragEnd=this.onDragEnd.bind(this),e.onLinkClick=this.onLinkClick.bind(this),e.onLinkMouseOver=this.onLinkMouseOver.bind(this),e.onLinkMouseOut=this.onLinkMouseOut.bind(this)}getLabelEvents(){return{onLabelClick:this.onLabelClick.bind(this),onHoveredLabelClick:this.onHoveredLabelClick.bind(this)}}onClick(...e){var t;const{config:n}=this._;n.selectPointOnClick?this._handlePointClick(e[0],e[2]):e[0]||this._.public.selectPoint(void 0),null==(t=n.onClick)||t.call(n,...e)}async onLabelClick(e,t){var n,i,r;const{public:{pointsTableName:o},config:s,dbCoordinator:a,configManager:l}=this._;if("string"==typeof t.id&&t.id.startsWith("cluster-")){const r=t.id.slice(8),o=Number(r);if(!Number.isNaN(o)){const r=(null==(n=l.clusterIndexToNameMapping.get(o))?void 0:n.name)??t.id;s.selectClusterOnLabelClick&&await this._handleClusterClick(r,e),null==(i=s.onClusterLabelClick)||i.call(s,o,r,e)}return}if(!a)return;const c=await Mle(a,o,s,[t.id]);c&&void 0!==c[0]&&(s.selectPointOnLabelClick&&this._handlePointClick(c[0],e,s.selectPointOnLabelClick,!0),null==(r=s.onLabelClick)||r.call(s,c[0],t.id,e))}async onHoveredLabelClick(e){var t;const{public:{pointsTableName:n},config:i,dbCoordinator:r}=this._;if(void 0===this._hoveredPointIndex||!r)return;const o=await Dle(r,n,i,[this._hoveredPointIndex]);o&&o[0]&&(i.selectPointOnLabelClick&&this._handlePointClick(this._hoveredPointIndex,e,i.selectPointOnLabelClick,!0),null==(t=i.onLabelClick)||t.call(i,this._hoveredPointIndex,o[0],e))}onRectSelect(e,t=!1,n=!0){var i,r;n?this._.public.unselectPointsInRect(e):this._.public.selectPointsInRect(e,t),null==(r=(i=this._.config).onRectSelected)||r.call(i,e),this._.dispatchEvent(new CustomEvent("rectSelected"))}onPolygonSelect(e,t=!1,n=!0){var i,r;n?this._.public.unselectPointsInPolygon(e):this._.public.selectPointsInPolygon(e,t),null==(r=(i=this._.config).onPolygonSelected)||r.call(i,e),this._.dispatchEvent(new CustomEvent("polygonSelected"))}onPointMouseOver(...e){var t,n;const[i]=e;null==(n=(t=this._.config).onPointMouseOver)||n.call(t,...e),this._hoveredPointIndex=i,this._renderCurrentHoveredLabel()}onPointMouseOut(...e){var t,n;null==(n=(t=this._.config).onPointMouseOut)||n.call(t,...e),this._hoveredPointIndex=void 0,this._renderCurrentHoveredLabel()}onLinkMouseOver(...e){var t,n;null==(n=(t=this._.config).onLinkMouseOver)||n.call(t,...e)}onLinkMouseOut(...e){var t,n;null==(n=(t=this._.config).onLinkMouseOut)||n.call(t,...e)}onLinkClick(...e){var t,n;null==(n=(t=this._.config).onLinkClick)||n.call(t,...e)}onMouseMove(...e){var t,n;null==(n=(t=this._.config).onMouseMove)||n.call(t,...e)}onZoomStart(...e){var t,n,i;null==(n=(t=this._.config).onZoomStart)||n.call(t,...e),null==(i=this._.labels)||i.render()}onDrag(...e){var t,n,i;null==(n=(t=this._.config).onDrag)||n.call(t,...e),null==(i=this._.labels)||i.updatePositions(),this._renderCurrentHoveredLabel(),this._.dispatchEvent(new CustomEvent("onDrag"))}onDragEnd(...e){var t,n,i;null==(n=(t=this._.config).onDragEnd)||n.call(t,...e),null==(i=this._.labels)||i.update(),this._renderCurrentHoveredLabel()}async onZoom(...e){var t,n,i,r;null==(n=(t=this._.config).onZoom)||n.call(t,...e),null==(i=this._.labels)||i.setZooming(!0,!!e[0].sourceEvent),await(null==(r=this._.labels)?void 0:r.render()),this._renderCurrentHoveredLabel(),this._.dispatchEvent(new CustomEvent("onZoom")),this._.dispatchEvent(new CustomEvent("pointSizeScaleUpdated")),this._.dispatchEvent(new CustomEvent("linkWidthScaleUpdated"))}onZoomEnd(...e){var t,n,i;null==(n=(t=this._.config).onZoomEnd)||n.call(t,...e),null==(i=this._.labels)||i.setZooming(!1,!!e[0].sourceEvent),this._.dispatchEvent(new CustomEvent("zoomEnded"))}onSimulationStart(...e){var t,n;null==(n=(t=this._.config).onSimulationStart)||n.call(t,...e)}onSimulationTick(...e){var t,n,i;null==(n=(t=this._.config).onSimulationTick)||n.call(t,...e),null==(i=this._.labels)||i.updatePositions(),this._.dispatchEvent(new CustomEvent("onSimulationTick"))}onSimulationEnd(...e){var t,n;null==(n=(t=this._.config).onSimulationEnd)||n.call(t,...e),this._.dispatchEvent(new CustomEvent("onSimulationEnd"))}onSimulationPause(...e){var t,n,i;null==(n=(t=this._.config).onSimulationPause)||n.call(t,...e),null==(i=this._.labels)||i.render()}onSimulationUnpause(...e){var t,n,i,r;null==(n=(t=this._.config).onSimulationUnpause)||n.call(t,...e),null==(r=(i=this._.config).onSimulationRestart)||r.call(i,...e)}_handlePointClick(e,t,n,i=!1){const{config:r}=this._,{shiftKey:o,altKey:s}=t;if(s)this._.public.unselectPoint(e);else{const t=!0===n||"single"!==n&&void 0;this._.public.selectPoint(e,o,t)}(i?r.focusPointOnLabelClick??r.selectPointOnLabelClick:r.focusPointOnClick??r.selectPointOnClick)&&!s&&this._.public.setFocusedPoint(e)}async _handleClusterClick(e,t){const{config:n}=this._,{pointClusterBy:i}=n;if(!i)return;const r=await this._.public.getPointIndicesByExactValues(i,[e]);if(!r||!r.length)return;const{shiftKey:o,altKey:s}=t;s?this._.public.unselectPointsByIndices(r):this._.public.selectPoints(r,o)}_renderCurrentHoveredLabel(){var e,t,n;if(void 0===this._hoveredPointIndex)return void(null==(e=this._.labels)||e.renderHoveredLabel());const i=this._.public.getPointPositionByIndex(this._hoveredPointIndex);i?null==(t=this._.labels)||t.renderHoveredLabel(this._hoveredPointIndex,i):null==(n=this._.labels)||n.renderHoveredLabel()}};const uce=(e,t)=>0x100000000n*BigInt(e)+BigInt(t),dce=e=>{const t=Number(e%0x100000000n);return{sourceIdx:Number(e/0x100000000n),targetIdx:t}};let hce=class{constructor(e){s(this,"_"),s(this,"_countCache",null),s(this,"_colorSumCache",null),s(this,"_widthSumCache",null),s(this,"_colorSumCacheColumn",null),s(this,"_widthSumCacheColumn",null),this._=e}get countCache(){return this._countCache}get colorSumCache(){return this._colorSumCache}get widthSumCache(){return this._widthSumCache}buildCountCache(e){const t=this._getIndexColumns(e);if(!t)return void(this._countCache=null);const{sourceIdxColumn:n,targetIdxColumn:i,numRows:r}=t,o=new Map;for(let s=0;s<r;s++){const e=n.get(s),t=i.get(s),r=uce(e,t);o.set(r,(o.get(r)??0)+1)}this._countCache=o}buildColorSumCache(e,t){const{config:n}=this._;this._buildSumCacheForType(e,t,n.linkColorBy,!0)}buildWidthSumCache(e,t){const{config:n}=this._;this._buildSumCacheForType(e,t,n.linkWidthBy,!1)}_buildSumCacheForType(e,t,n,i){const r=n??null;if(!r)return void(i?(this._colorSumCache=null,this._colorSumCacheColumn=null):(this._widthSumCache=null,this._widthSumCacheColumn=null));const o=i?this._widthSumCache:this._colorSumCache;if(r===(i?this._widthSumCacheColumn:this._colorSumCacheColumn)&&o)return void(i?(this._colorSumCache=o,this._colorSumCacheColumn=r):(this._widthSumCache=o,this._widthSumCacheColumn=r));const s=i?this._colorSumCache:this._widthSumCache;if(r===(i?this._colorSumCacheColumn:this._widthSumCacheColumn)&&s)return;const a=this._buildSumCache(e,t);i?(this._colorSumCache=a,this._colorSumCacheColumn=a?r:null):(this._widthSumCache=a,this._widthSumCacheColumn=a?r:null)}_buildSumCache(e,t){if(!t)return null;const n=this._getIndexColumns(e);if(!n)return null;const{sourceIdxColumn:i,targetIdxColumn:r,numRows:o}=n,s=new Map;for(let a=0;a<o;a++){const e=i.get(a),n=r.get(a),o=uce(e,n),l=t.get(a);s.set(o,(s.get(o)??0)+l)}return s}_getIndexColumns(e){const{config:t}=this._;if(!t.linkSourceIndexBy||!t.linkTargetIndexBy)return null;const n=e.getChild(t.linkSourceIndexBy),i=e.getChild(t.linkTargetIndexBy);return n&&i?{sourceIdxColumn:n,targetIdxColumn:i,numRows:e.numRows}:null}aggregateFromCache(e,t,n=!0){const{config:i}=this._;if(!i.linkSourceIndexBy||!i.linkTargetIndexBy)return;const r=e.getChild(i.linkSourceIndexBy),o=e.getChild(i.linkTargetIndexBy);if(!r||!o)return;if(!this._countCache)return;const s=n?this._colorSumCache:this._widthSumCache,a=e.numRows,l=new Array(a);for(let c=0;c<a;c++){const e=r.get(c),n=o.get(c),i=uce(e,n),a=this._countCache.get(i)??0;if("count"===t)l[c]=a;else if("sum"===t)l[c]=(null==s?void 0:s.get(i))??0;else{const e=(null==s?void 0:s.get(i))??0;l[c]=a>0?e/a:0}}return l}getKeysByValueCondition(e,t){if(!e)return[];const n=[];for(const[i,r]of e)t(r)&&n.push(i);return n}getIndicesSetFromKeys(e){if(!e)return[];const t=new Set;for(const n of e){const{sourceIdx:e,targetIdx:i}=dce(n);t.add(e),t.add(i)}return Array.from(t)}getIndicesByValueCondition(e,t){const n=this.getKeysByValueCondition(e,t);return this.getIndicesSetFromKeys(n)}getIndicesByAverageCondition(e,t,n){if(!e||!t)return[];const i=[];for(const[r,o]of e){const e=t.get(r)??0;n(o>0?e/o:0)&&i.push(r)}return this.getIndicesSetFromKeys(i)}clear(){this._countCache=null,this._colorSumCache=null,this._widthSumCache=null,this._colorSumCacheColumn=null,this._widthSumCacheColumn=null}clearColorSumCache(){this._colorSumCache=null,this._colorSumCacheColumn=null}clearWidthSumCache(){this._widthSumCache=null,this._widthSumCacheColumn=null}};const fce="css-label--labels-container",pce="css-label--labels-container-hidden",mce="css-label--label",gce="css-label--hidden",_ce=`\n  :root {\n    --css-label-background-color: #1e2428;\n    --css-label-brightness: brightness(150%);\n  }\n\n  .${fce} {\n    transition: opacity 100ms;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    top: 0%;\n    pointer-events: none;\n    opacity: 1;\n  }\n\n  .${pce} {\n    opacity: 0;\n\n    div {\n      pointer-events: none;\n    }\n  }\n`,yce=`\n  .${mce} {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    cursor: pointer;\n    \n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n\n    filter: var(--css-label-brightness);\n    pointer-events: none;\n    background-color: var(--css-label-background-color);\n    font-weight: 700;\n    border-radius: 6px;\n    \n    transition: opacity 600ms;\n    opacity: 1;\n  }\n\n  /* We use "important" here because the users may pass their own label class, overriding the opacity */\n  .${gce} {\n    opacity: 0 !important;\n  }\n`,vce=e=>{const t=document.createElement("style");t.innerHTML=e;const n=document.head.getElementsByTagName("style")[0];return n?document.head.insertBefore(t,n):document.head.appendChild(t),t};let bce,xce;class wce{constructor(e,t,n){this.element=document.createElement("div"),this.fontWidthHeightRatio=.6,this._x=0,this._y=0,this._estimatedWidth=0,this._estimatedHeight=0,this._visible=!1,this._prevVisible=!1,this._weight=0,this._needsMeasureUpdate=!0,this._customFontSize=14,this._customColor=void 0,this._customOpacity=void 0,this._shouldBeShown=!1,this._text="",this._customPadding={left:9,top:6,right:9,bottom:6},n||bce||(bce=vce(yce)),this._container=e,this._updateClasses(),t&&this.setText(t),this.resetFontSize(),this.resetPadding()}setText(e){this._text!==e&&(this._text=e,this.element.innerHTML=e,this._needsMeasureUpdate=!0)}setPosition(e,t){this._x=e,this._y=t}setStyle(e){if(this._customStyle!==e&&(this._customStyle=e,this.element.style.cssText=this._customStyle,this._customColor&&(this.element.style.color=this._customColor),this._customOpacity&&(this.element.style.opacity=String(this._customOpacity)),this._customPointerEvents&&(this.element.style.pointerEvents=this._customPointerEvents),this._customFontSize&&(this.element.style.fontSize=`${this._customFontSize}px`),this._customPadding)){const{top:e,right:t,bottom:n,left:i}=this._customPadding;this.element.style.padding=`${e}px ${t}px ${n}px ${i}px`}}setClassName(e){this._customClassName!==e&&(this._customClassName=e,this._updateClasses())}setFontSize(e=14){this._customFontSize!==e&&(this.element.style.fontSize=`${e}px`,this._customFontSize=e,this._needsMeasureUpdate=!0)}resetFontSize(){14!==this._customFontSize&&(this.element.style.fontSize="14px",this._customFontSize=14,this._needsMeasureUpdate=!0)}setColor(e){this._customColor!==e&&(this.element.style.color=e,this._customColor=e)}resetColor(){this.element.style.removeProperty("color"),this._customColor=void 0}setOpacity(e){this._customOpacity!==e&&(this.element.style.opacity=String(e),this._customOpacity=e)}resetOpacity(){this.element.style.removeProperty("opacity"),this._customOpacity=void 0}setPointerEvents(e){this._customPointerEvents!==e&&(this.element.style.pointerEvents=`${e}`,this._customPointerEvents=e)}resetPointerEvents(){this.element.style.removeProperty("pointer-events"),this._customPointerEvents=void 0}setPadding(e={left:9,top:6,right:9,bottom:6}){this._customPadding.left===e.left&&this._customPadding.top===e.top&&this._customPadding.right===e.right&&this._customPadding.bottom===e.bottom||(this._customPadding=e,this.element.style.padding=`${e.top}px ${e.right}px ${e.bottom}px ${e.left}px`,this._needsMeasureUpdate=!0)}resetPadding(){if(9===this._customPadding.left&&6===this._customPadding.top&&9===this._customPadding.right&&6===this._customPadding.bottom)return;const e={left:9,top:6,right:9,bottom:6};this.element.style.padding=`${e.top}px ${e.right}px ${e.bottom}px ${e.left}px`,this._customPadding=e,this._needsMeasureUpdate=!0}setForceShow(e){this._shouldBeShown=e}getForceShow(){return this._shouldBeShown}draw(){const e=this.getVisibility();e!==this._prevVisible&&(!1===this._prevVisible?this._container.appendChild(this.element):this._container.removeChild(this.element),this._updateClasses(),this._prevVisible=e),e&&(this.element.style.transform=`\n        translate(-50%, -100%)\n        translate3d(${this._x}px, ${this._y}px, 0)\n      `)}overlaps(e){return this._measureText(),e._measureText(),function(e,t){const[n,i,r,o]=[e.x,e.y+e.height,e.x+e.width,e.y],[s,a,l,c]=[t.x,t.y+t.height,t.x+t.width,t.y];return!(i<c||a<o||r<s||l<n)}({height:this._estimatedHeight,width:this._estimatedWidth,x:this._x,y:this._y},{height:e._estimatedHeight,width:e._estimatedWidth,x:e._x,y:e._y})}setVisibility(e=!0){this._visible=e}getVisibility(){return this._visible}isOnScreen(){return this._x>0&&this._y>0&&this._x<this._container.offsetWidth&&this._y<this._container.offsetHeight}setWeight(e){this._weight=e}getWeight(){return this._weight}raise(){this._container.appendChild(this.element)}destroy(){this.element.remove()}_updateClasses(){this.getVisibility()?window.requestAnimationFrame(()=>{this.element.className=`${mce} ${this._customClassName||""}`}):this.element.className=`${mce} ${this._customClassName||""} ${gce}`}_measureText(){if(this._needsMeasureUpdate){const{left:e,top:t,right:n,bottom:i}=this._customPadding;this._estimatedWidth=this._customFontSize*this.fontWidthHeightRatio*this.element.innerHTML.length+e+n,this._estimatedHeight=this._customFontSize+t+i,this._needsMeasureUpdate=!1}}}class Sce{constructor(e,t){this._cssLabels=new Map,this._elementToData=new Map,(null==t?void 0:t.dontInjectStyles)||xce||(xce=vce(_ce)),this._container=e,e.addEventListener("click",this._onClick.bind(this)),this._container.className=fce,(null==t?void 0:t.onLabelClick)&&(this._onClickCallback=t.onLabelClick),(null==t?void 0:t.pointerEvents)&&(this._pointerEvents=t.pointerEvents),(null==t?void 0:t.dontInjectStyles)&&(this._dontInjectStyles=t.dontInjectStyles),(null==t?void 0:t.padding)&&(this._padding=t.padding),(null==t?void 0:t.fontSize)&&(this._fontSize=t.fontSize),(null==t?void 0:t.dispatchWheelEventElement)&&(this._dispatchWheelEventElement=t.dispatchWheelEventElement,this._container.addEventListener("wheel",this._onWheel.bind(this)))}setLabels(e){const t=new Map(this._cssLabels);e.forEach(e=>{const{x:n,y:i,fontSize:r,color:o,text:s,weight:a,opacity:l,shouldBeShown:c,style:u,className:d,padding:h}=e;if(this._cssLabels.get(e.id))t.delete(e.id);else{const t=new wce(this._container,e.text,this._dontInjectStyles);this._cssLabels.set(e.id,t),this._elementToData.set(t.element,e)}const f=this._cssLabels.get(e.id);f&&(f.setText(s),f.setPosition(n,i),void 0!==u&&f.setStyle(u),void 0!==a&&f.setWeight(a),void 0!==o&&f.setColor(o),void 0!==r?f.setFontSize(r):void 0!==this._fontSize?f.setFontSize(this._fontSize):f.resetFontSize(),void 0!==h?f.setPadding(h):void 0!==this._padding?f.setPadding(this._padding):f.resetPadding(),void 0!==this._pointerEvents&&f.setPointerEvents(this._pointerEvents),void 0!==l&&f.setOpacity(l),void 0!==c&&f.setForceShow(c),void 0!==d&&f.setClassName(d))});for(const[n]of t){const e=this._cssLabels.get(n);e&&(this._elementToData.delete(e.element),e.destroy()),this._cssLabels.delete(n)}}draw(e=!0){e&&this._intersectLabels(),this._cssLabels.forEach(e=>e.draw())}show(){this._container.className=fce}hide(){this._container.className=`${fce} ${pce}`}destroy(){this._container.removeEventListener("click",this._onClick.bind(this)),this._container.removeEventListener("wheel",this._onWheel.bind(this)),this._cssLabels.forEach(e=>e.destroy())}_onClick(e){var t;const n=this._elementToData.get(e.target);n&&(null===(t=this._onClickCallback)||void 0===t||t.call(this,e,n))}_onWheel(e){var t;e.preventDefault();const n=new WheelEvent("wheel",e);null===(t=this._dispatchWheelEventElement)||void 0===t||t.dispatchEvent(n)}_intersectLabels(){const e=Array.from(this._cssLabels.values());e.forEach(e=>e.setVisibility(e.isOnScreen()));for(let t=0;t<e.length;t+=1){const n=e[t];if(n.getVisibility())for(let i=t+1;i<e.length;i+=1){const t=e[i];t.getVisibility()&&(n.overlaps(t)&&(t.getWeight()>n.getWeight()?n.setVisibility(!t.getForceShow()&&n.getForceShow()):t.setVisibility(!n.getForceShow()&&t.getForceShow())))}}}}const Ece=async(e,t,n,i,r)=>{if(!n.pointIdBy||!n.pointIndexBy||!n.pointLabelBy)return{indices:null,ids:null,labels:null,weights:null};let o=`SELECT ${[...new Set([n.pointLabelBy,n.pointIndexBy,n.pointIdBy,...r?[r]:[]])].map(e=>`"${e}"`).join(", ")} FROM ${t}`;i&&(o+=` ${i}`),r&&(o+=` ORDER BY "${r}" DESC`),o+=` LIMIT ${n.showTopLabelsLimit}`;const s=await e.query(o,{cache:!0});if(!s)return{indices:null,ids:null,labels:null,weights:null};const a=s.getChild(n.pointIdBy),l=s.getChild(n.pointIndexBy);let c=s.getChild(n.pointLabelBy),u=null;r&&(u=s.getChild(r));const d=n.pointLabelFn,h=n.pointLabelWeightFn,f=Boolean(c)&&"function"==typeof d,p=Boolean(u)&&"function"==typeof h;if(n.pointLabelFn&&!f&&Wte(0,0,"warn"),n.pointLabelWeightFn&&!p&&Wte(0,0,"warn"),f||p){const e=f?c.toArray():null,t=p?u.toArray():null,n=Math.max((null==e?void 0:e.length)??0,(null==t?void 0:t.length)??0);for(let i=0;i<n;i++){const n=null==l?void 0:l.get(i);f&&e&&d&&(e[i]=d(e[i],n)),p&&t&&h&&(t[i]=h(t[i],n))}e&&(c=z9(e)),t&&(u=z9(t))}return{indices:l,ids:a,labels:c,weights:u}},Cce=async(e,t,n,i,r)=>Ece(e,t,n,`WHERE ${n.pointIndexBy} IN (${i.join(", ")})`,r);var Tce=[],kce=[];function Ace(e,t){if(e&&"undefined"!=typeof document){var n,i=!0===t.prepend?"prepend":"append",r=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(r){var s=Tce.indexOf(o);-1===s&&(s=Tce.push(o)-1,kce[s]={}),n=kce[s]&&kce[s][i]?kce[s][i]:kce[s][i]=a()}else n=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),r=0;r<n.length;r++)e.setAttribute(n[r],t.attributes[n[r]]);var s="prepend"===i?"afterbegin":"beforeend";return o.insertAdjacentElement(s,e),e}}var Ice={cosmographStaticLabel:"style_module_cosmographStaticLabel__2e27a4a3",cosmographDynamicLabel:"style_module_cosmographDynamicLabel__2e27a4a3",cosmographLabel:"style_module_cosmographLabel__2e27a4a3 style_module_cosmographLabelBase__2e27a4a3",cosmographLabelHovered:"style_module_cosmographLabelHovered__2e27a4a3 style_module_cosmographLabelBase__2e27a4a3",cosmographLabelInteractive:"style_module_cosmographLabelInteractive__2e27a4a3",cosmographLabelHidden:"style_module_cosmographLabelHidden__2e27a4a3 style_module_cosmographLabelBase__2e27a4a3",cosmographCustomLabel:"style_module_cosmographCustomLabel__2e27a4a3 style_module_cosmographLabelBase__2e27a4a3",cosmographClusterLabel:"style_module_cosmographClusterLabel__2e27a4a3 style_module_cosmographLabelBase__2e27a4a3"};Ace(".style_module_cosmographDynamicLabel__2e27a4a3,.style_module_cosmographStaticLabel__2e27a4a3{opacity:1}.style_module_cosmographLabelBase__2e27a4a3{-webkit-font-smoothing:antialiased!important;background-color:#24272fe0;cursor:default;font-weight:400!important;line-height:1!important;max-width:350px;overflow:hidden;text-overflow:ellipsis;text-rendering:optimizeLegibility!important;transition:opacity .25s;white-space:nowrap}.style_module_cosmographLabelHovered__2e27a4a3{z-index:1}.style_module_cosmographLabelInteractive__2e27a4a3{cursor:pointer;pointer-events:all}.style_module_cosmographLabelHidden__2e27a4a3{opacity:.1}.style_module_cosmographClusterLabel__2e27a4a3{background:#3f4562a1;font-weight:500!important;opacity:.9;text-shadow:-1px -1px 0 #3f4562a1,-1px -1px 5px #00000026,1px -1px 0 #3f4562a1,1px -1px 5px #00000026,-1px 1px 0 #3f4562a1,-1px 1px 5px #00000026,1px 1px 0 #3f4562a1,1px 1px 5px #00000026}",{});let Pce=class{constructor(e,t){var n;s(this,"_"),s(this,"_onHoveredLabelClick"),s(this,"_hoveredCssLabel"),s(this,"_cssLabelsRenderer"),s(this,"_focusedLabel"),s(this,"_staticLabelsMap",new Map),s(this,"_dynamicLabelsMap",new Map),s(this,"_validLabelAccessor",!1),s(this,"_validLabelWeightAccessor",!1),s(this,"_labelDataMap",new Map),s(this,"_customLabelsMap",new Map),s(this,"_columnNames",""),s(this,"_cachedTrackedPointsPositions"),s(this,"_lastTrackedPointsQueryTime",0),s(this,"_isZooming",!1),s(this,"_isManualZooming",!1),s(this,"_clustersFontScale"),s(this,"_clustersWeightScale"),s(this,"_updateClustersFontScaleHandler"),s(this,"_minDegree"),s(this,"_maxDegree"),s(this,"_degreeRange"),s(this,"_degreeSummaryCalculated",!1),s(this,"labelsContainer",document.createElement("div")),s(this,"_checkLabelEvents",()=>this._hasPointLabelEvents()?"all":"none"),this._=e;const i=this._.eventManager.getLabelEvents();null==(n=e.containerElement)||n.appendChild(this.labelsContainer),this._cssLabelsRenderer=new Sce(this.labelsContainer,{dispatchWheelEventElement:t,onLabelClick:i.onLabelClick}),this._onHoveredLabelClick=i.onHoveredLabelClick,this._hoveredCssLabel=new wce(this.labelsContainer),this._hoveredCssLabel.setPointerEvents(this._checkLabelEvents()),this._hoveredCssLabel.element.addEventListener("click",this._onHoveredLabelClick,{passive:!0}),this._updateClustersFontScaleHandler=()=>this._updateClustersFontScale(),this._.addEventListener("clustersUpdated",this._updateClustersFontScaleHandler)}get _labelWeightAccessor(){const{pointLabelWeightBy:e,pointSizeBy:t}=this._.config;return e||t}async render(){const{customLabels:e,showClusterLabels:t}=this._.config;this._.cosmos&&this._.config&&((this._validLabelAccessor||e||t)&&!this._isZooming?await this._updateLabels():this._isZooming&&this._populateLabelDataMap(this._isManualZooming),this._renderLabels())}async update(){if(this._degreeSummaryCalculated=!1,!this._.cosmos||!this._.dbCoordinator)return;const{config:e,public:{pointsTableName:t}}=this._,{pointLabelBy:n,customLabels:i,showClusterLabels:r}=e;await this._.configManager.configUpdated();const o=this._columnNames;this._columnNames=`${n||""}-${this._labelWeightAccessor||""}`,this.setCustomLabels(i);let s=!1;if(n){if(o!==this._columnNames){const e=[];await kle(this._.dbCoordinator,t,[n,this._labelWeightAccessor].filter(Boolean),e),this._validLabelAccessor=!e.includes(n),this._validLabelWeightAccessor=!!this._labelWeightAccessor&&!e.includes(this._labelWeightAccessor),this._validLabelAccessor&&!this._validLabelWeightAccessor&&(s=!0)}this._validLabelAccessor?(s&&this._calculateDegreeSummary(),await this._updateStaticLabels(),await this.render()):(Wte(0,0,"warn"),this.clear())}else this._customLabelsMap.size>0||r?await this.render():this.clear()}updatePositions(){var e,t;const n=null==(e=this._.cosmos)?void 0:e.getPointPositions(),i=null==(t=this._.cosmos)?void 0:t.getClusterPositions();n&&this._labelDataMap.forEach(e=>{const t=e.index,i=n[2*t],r=n[2*t+1];void 0!==i&&void 0!==r&&(e.position=[i,r])}),i&&this._labelDataMap.forEach((e,t)=>{var n;if(null==(n=t.startsWith)?void 0:n.call(t,"cluster-")){const t=e.index,n=i[2*t],r=i[2*t+1];void 0!==n&&void 0!==r&&(e.position=[n,r])}}),this._renderLabels()}async _updateLabels(){var e,t,n,i;const{config:r,cosmosInitialized:o,dbCoordinator:s,public:{pointsTableName:a,focusedPointIndex:l}}=this._,{showDynamicLabels:c,pointLabelBy:u,showLabels:d}=r;if(this._dynamicLabelsMap.clear(),this._validLabelAccessor&&u&&d&&s)if(c&&await this._updateDynamicLabels(),l){if(!this._focusedLabel||this._focusedLabel&&this._focusedLabel[0]!==l){const c=await Cce(s,a,r,[l]);if(this._focusedLabel=[null==(e=c.indices)?void 0:e.get(0),null==(t=c.ids)?void 0:t.get(0),null==(n=c.labels)?void 0:n.get(0)],o){const e=Array.from(this._staticLabelsMap.keys()).concat(l);null==(i=this._.cosmos)||i.trackPointPositionsByIndices(e)}}}else this._focusedLabel=void 0;this._populateLabelDataMap()}async _updateDynamicLabels(){const{config:e,dbCoordinator:t,public:{pointsTableName:n}}=this._,i=this._.public.getSampledPointPositionsMap();if(!(null==i?void 0:i.size))return;const r=Array.from(i.keys()),o=await Cce(t,n,e,r);this._setLabels(this._dynamicLabelsMap,o)}async _updateStaticLabels(){var e;const{config:t,dbCoordinator:n,public:{pointsTableName:i,focusedPointIndex:r}}=this._,{pointLabelBy:o,showTopLabels:s,showLabelsFor:a,showLabels:l}=t;if(this._staticLabelsMap.clear(),!l||!n||!o)return;const c=[];(null==a?void 0:a.length)&&c.push((async(e,t,n,i)=>{const r=(n.showLabelsFor??[]).map(e=>`'${e}'`).join(", ");return Ece(e,t,n,`WHERE ${n.pointIdBy} IN (${r})`,i)})(n,i,t,this._validLabelWeightAccessor?this._labelWeightAccessor:void 0).then(e=>this._setLabels(this._staticLabelsMap,e))),s&&c.push(this._getTopLabels().then(e=>this._setLabels(this._staticLabelsMap,e))),c.length&&await Promise.all(c);const u=Array.from(this._staticLabelsMap.keys());r&&u.push(r),u.length&&(null==(e=this._.cosmos)||e.trackPointPositionsByIndices(u))}async _getTopLabels(){const{config:e,dbCoordinator:t,public:{pointsTableName:n}}=this._;if(!t)return;const i=this._.public.getSelectedPointIndices();if(null==i?void 0:i.length)return await Cce(t,n,e,i,this._validLabelWeightAccessor?this._labelWeightAccessor:void 0);if(this._labelWeightAccessor&&this._validLabelWeightAccessor)return await(async(e,t,n)=>Ece(e,t,n))(t,n,e);this._labelWeightAccessor&&!this._validLabelWeightAccessor&&Wte(this._labelWeightAccessor,0,"warn");const r=this._findTopIndicesByDegree();return r.length?await Cce(t,n,e,r,this._validLabelWeightAccessor?this._labelWeightAccessor:void 0):void 0}_setLabels(e,t){var n;if(!(null==t?void 0:t.indices)||!t.labels||!t.ids)return;const i=t.indices.length;for(let r=0;r<i;r++)e.set(t.indices.get(r),[t.ids.get(r),t.labels.get(r),null==(n=t.weights)?void 0:n.get(r)])}_findTopIndicesByDegree(){const{showTopLabelsLimit:e=100}=this._.config,{pointDegrees:t}=this._.public;if(!t)return[];const n=new Set(this._.public.getSelectedPointIndices()),i=[];if(n.size>0){const r=Array.from(n).sort((e,n)=>(t[n]||0)-(t[e]||0)).slice(0,e);i.push(...r)}if(i.length<e){const r=e-i.length,o=[];for(let e=0;e<t.length;e++)!n.has(e)&&t[e]&&(o.length<r?(o.push({index:e,degree:t[e]??0}),o.length===r&&o.sort((e,t)=>t.degree-e.degree)):t[e]>o[r-1].degree&&(o[r-1]={index:e,degree:t[e]},o.sort((e,t)=>t.degree-e.degree)));i.push(...o.map(e=>e.index))}return i}_populateLabelDataMap(e=!1){const{showLabels:t,staticLabelWeight:n,dynamicLabelWeight:i,showDynamicLabels:r,showTopLabels:o,showLabelsFor:s,pointLabelBy:a}=this._.config;if(e&&t||this._labelDataMap.clear(),!t)return;const l=this._.crossfilter.isFilteringActive;if((!this._.config.showClusterLabels||l)&&this._validLabelAccessor&&a&&t){const t=this._getTrackedPositions(e);if(t&&((o||(null==s?void 0:s.length))&&this._addLabelsToDataMap(this._staticLabelsMap,t,Ice.cosmographStaticLabel,n),this._addFocusedLabelToDataMap(t)),!e&&r){const e=this._.public.getSampledPointPositionsMap();e&&this._addLabelsToDataMap(this._dynamicLabelsMap,e,Ice.cosmographDynamicLabel,i)}}this._addClusterLabelsToDataMap(),this._addCustomLabelsToDataMap()}_getTrackedPositions(e){var t;const n=Date.now();if(e&&this._cachedTrackedPointsPositions&&n-this._lastTrackedPointsQueryTime<1e3)return this._cachedTrackedPointsPositions;const i=null==(t=this._.cosmos)?void 0:t.getTrackedPointPositionsMap();return this._cachedTrackedPointsPositions=i,this._lastTrackedPointsQueryTime=n,i}_addLabelsToDataMap(e,t,n,i){e.size&&t.forEach((t,r)=>{const o=e.get(r);if(o){const[e,s,a]=o;this._labelDataMap.set(e,{index:r,text:s,position:t,className:n,weight:a??i})}})}_updateClustersFontScale(){const{config:e}=this._;if(!e.pointClusterBy)return;const t=Hy(Array.from(this._.configManager.clusterIndexToNameMapping.values()).map(({count:e})=>e)),n=e.clusterLabelFontSize??ble,i=Math.max(10,Math.floor(.7*n)),r=Math.ceil(1.5*n);this._clustersFontScale=nx().domain(t).range([i,r]),this._clustersWeightScale=nx().domain(t).range([1100,1e4])}_addClusterLabelsToDataMap(){var e,t,n,i,r;const{config:{showClusterLabels:o,clusterLabelFontSize:s=ble,scaleClusterLabels:a,usePointColorStrategyForClusterLabels:l,pointDefaultColor:c}}=this._;if(!o||this._.crossfilter.isFilteringActive)return;const u=null==(e=this._.cosmos)?void 0:e.getClusterPositions();if(u)for(let d=0;d<u.length;d+=2){const e=Number(u[d]),o=Number(u[d+1]),h=d/2,f=this._.configManager.clusterIndexToNameMapping.get(h);if(!f)continue;const p=a?null==(t=this._clustersFontScale)?void 0:t.call(this,(null==f?void 0:f.count)??0):s,m=$le(c,vle),g=l?null==(i=(n=this._.configManager).activePointColorFn)?void 0:i.call(n,null==f?void 0:f.name):void 0,_=g?"string"==typeof g?g:$le(g,m):void 0,{text:y,maxWidth:v}=this._getClusterLabelText((null==f?void 0:f.name)??`Cluster ${h}`,p);this._labelDataMap.set(`cluster-${h}`,{text:y,position:[e,o],className:Ice.cosmographClusterLabel,index:h,fontSize:p,color:l?_:"white",weight:(null==(r=this._clustersWeightScale)?void 0:r.call(this,(null==f?void 0:f.count)??0))??5e3,padding:this._getClusterPadding(p),maxWidth:v})}}_addCustomLabelsToDataMap(){const{staticLabelWeight:e,pointLabelColor:t}=this._.config;this._customLabelsMap.forEach((n,i)=>{this._labelDataMap.set(i,{index:0,text:n.text,position:n.position,className:n.className??Ice.cosmographCustomLabel,color:t??(n.className?void 0:"white"),weight:e})})}_addFocusedLabelToDataMap(e){if(!this._focusedLabel)return;const[t,n,i]=this._focusedLabel,r=e.get(t);r&&this._labelDataMap.set(n,{index:t,text:i,position:r,className:Ice.cosmographStaticLabel,weight:1e4})}_normalizeWeight(e,t,n){var i,r;if(n)return 1e3;if(this._validLabelWeightAccessor&&void 0!==e){const t=null==(r=null==(i=this._.summary)?void 0:i.pointsSummary)?void 0:r.find(e=>e.column_name===this._labelWeightAccessor);if(t){const{min:n,max:i}=t,r=i-n;return r>0?(e-n)/r*100:50}}const o=this._.public.pointDegrees;if(this._degreeSummaryCalculated&&o&&void 0!==o[t]){const e=o[t]??this._minDegree??0;return(this._degreeRange??0)>0?(e-(this._minDegree??0))/this._degreeRange*100:50}return 1}_calculateDegreeSummary(){const e=this._.public.pointDegrees;if(e&&!this._degreeSummaryCalculated){this._minDegree=1/0,this._maxDegree=-1/0;for(let t=0;t<e.length;t++){const n=e[t];void 0!==n&&(this._maxDegree=Math.max(this._maxDegree,n),this._minDegree=Math.min(this._minDegree,n))}this._minDegree===1/0&&(this._minDegree=0),this._maxDegree===-1/0&&(this._maxDegree=this._minDegree),this._degreeRange=this._maxDegree-this._minDegree,this._degreeSummaryCalculated=!0}}_renderLabels(){var e,t;const{public:{crossfilter:n}}=this._,{pointLabelClassName:i,clusterLabelClassName:r,labelMargin:o,pointLabelColor:s,pointLabelFontSize:a,clusterLabelFontSize:l=ble,labelPadding:c}=this._.config,u=n.intersection,d=this._.crossfilter.isFilteringActive,h=Ice.cosmographLabelHidden,f=Array.from(this._labelDataMap.entries()).map(([e,t])=>{var n;const{index:f,text:p,position:m,className:g,weight:_,color:y,fontSize:v,padding:b,maxWidth:x}=t,w=e.startsWith("custom-"),S=e.startsWith("cluster-"),E=S?Ice.cosmographClusterLabel:Ice.cosmographLabel,[C,T]=this._.public.spaceToScreenPosition(m),k=this._.public.getPointScreenRadiusByIndex(f),A=(null==(n=this._focusedLabel)?void 0:n[0])===f,I=!!d&&u.has(f),P=!d||I,L=S?r:i;let R;if(R="function"==typeof L?L(p,f,e)??"":L??"",S&&x){const e=`max-width: ${x}px;`;R=R.includes(":")?`${R} ${e}`:e}const O=R.includes(":");let M,D=O?`${P?E:h} ${g}`:`${P?E:h} ${R} ${g}`;return(S?this._hasClusterLabelEvents():this._hasPointLabelEvents())&&(D+=` ${Ice.cosmographLabelInteractive}`),M=w?T:S?T+l/2+o:T-k/2-o,{id:e,text:p,x:C,y:M,padding:S?b:this._getPaddingObject(c),weight:S?_:this._normalizeWeight(_,f,I),shouldBeShown:A,fontSize:v??a,color:w?y:y??(void 0!==i?void 0:s??this._getLabelColorByIndex(f)),style:O?R:"",className:D}});null==(e=this._cssLabelsRenderer)||e.setLabels(f),null==(t=this._cssLabelsRenderer)||t.draw(!0)}async renderHoveredLabel(e,t){var n,i;if(!this._.cosmos)return;const{config:r,dbCoordinator:o,public:{pointsTableName:s}}=this._,{pointLabelBy:a,showHoveredPointLabel:l,hoveredPointLabelClassName:c,labelMargin:u,pointLabelFontSize:d,labelPadding:h}=r;if(this._hoveredCssLabel.setPointerEvents(this._checkLabelEvents()),!(o&&l&&a&&void 0!==e&&t&&this._validLabelAccessor))return this._hoveredCssLabel.setVisibility(!1),void this._hoveredCssLabel.draw();const f=await Cce(o,s,r,[e]);if(!f)return;const p=null==(n=f.ids)?void 0:n.get(0),m=(null==(i=f.labels)?void 0:i.get(0))??"",[g,_]=this._.public.spaceToScreenPosition(t),y=this._.public.getPointScreenRadiusByIndex(e);let v,b;v="function"==typeof c?c(m,e,p)??"":c??"";const x=v.includes(":");b=x?Ice.cosmographLabelHovered:[Ice.cosmographLabelHovered,v].join(" "),"all"===this._checkLabelEvents()&&(b+=` ${Ice.cosmographLabelInteractive}`),this._hoveredCssLabel.setText(m),this._hoveredCssLabel.setVisibility(!0),this._hoveredCssLabel.setPosition(g,_-y/2-u),this._hoveredCssLabel.setClassName(b),this._hoveredCssLabel.setStyle(x?v:""),this._hoveredCssLabel.setFontSize(d),this._hoveredCssLabel.setPadding(this._getPaddingObject(h)),c||this._hoveredCssLabel.setColor(this._getLabelColorByIndex(e)),this._hoveredCssLabel.draw()}setCustomLabels(e){const{rescaleXFn:t,rescaleYFn:n}=this._.public;this._customLabelsMap.clear(),e&&e.forEach((e,i)=>{const r={...e};t&&n&&void 0!==r.position[0]&&void 0!==r.position[1]&&(r.position=[t(r.position[0]),n(r.position[1])]),this._customLabelsMap.set(`custom-${i}`,r)})}setZooming(e,t=!0){const n=this._isZooming;this._isZooming=e,this._isManualZooming=t,n&&!e&&this.render().catch(console.error)}destroy(){var e,t,n,i;this.clear(),null==(e=this._hoveredCssLabel)||e.element.removeEventListener("click",this._onHoveredLabelClick,{passive:!0}),null==(t=this._hoveredCssLabel)||t.destroy(),null==(n=this._cssLabelsRenderer)||n.destroy(),null==(i=this._.containerElement)||i.removeChild(this.labelsContainer)}clear(){var e,t,n;this._cachedTrackedPointsPositions=void 0,this._lastTrackedPointsQueryTime=0,this._isZooming=!1,this._degreeSummaryCalculated=!1,this._minDegree=void 0,this._maxDegree=void 0,this._degreeRange=void 0,this._labelDataMap.size&&(this._customLabelsMap.clear(),this._staticLabelsMap.clear(),this._dynamicLabelsMap.clear(),this._labelDataMap.clear(),null==(e=this._cssLabelsRenderer)||e.setLabels([]),null==(t=this._cssLabelsRenderer)||t.draw(),null==(n=this._hoveredCssLabel)||n.destroy())}_getLabelColorByIndex(e){var t;const n=((e,t)=>e?[e[4*t]??0,e[4*t+1]??0,e[4*t+2]??0,e[4*t+3]??0]:void 0)(null==(t=this._.cosmos)?void 0:t.graph.pointColors,e)??this._.config.pointDefaultColor,i=$le(this._.config.pointDefaultColor,vle);return $le(n,i)}_hasPointLabelEvents(){const{onLabelClick:e,selectPointOnLabelClick:t,focusPointOnLabelClick:n}=this._.config;return void 0!==e||Boolean(t)||Boolean(n)}_hasClusterLabelEvents(){const{onClusterLabelClick:e,selectClusterOnLabelClick:t}=this._.config;return void 0!==e||Boolean(t)}_getPaddingObject(e){if(e&&!(e.length<4))return{left:e[0]??0,top:e[1]??0,right:e[2]??0,bottom:e[3]??0}}_getClusterPadding(e){const{scaleClusterLabels:t,clusterLabelFontSize:n=ble}=this._.config,i=this._getPaddingObject(this._.config.labelPadding);if(!t||!e)return i;const r=e/n;return{left:i.left*r,top:i.top*r,right:i.right*r,bottom:i.bottom*r}}_getClusterLabelText(e,t){const{scaleClusterLabels:n,clusterLabelFontSize:i=ble}=this._.config;if(!n||!t)return{text:e,maxWidth:350};const r=t/i,o=Math.max(350,Math.min(900,500*r)),s=.6*t,a=Math.floor(o/s);return e.length*s>o?{text:`${e.substring(0,Math.max(3,a-3))}...`,maxWidth:o}:{text:e,maxWidth:o}}};Ace(".style_module_rectSelect__6c3b1fe5{height:100%;left:0;position:absolute;top:0;width:100%}",{});let Lce=class{constructor(e){var t;s(this,"_"),s(this,"_svg"),s(this,"_onSelectCallback"),s(this,"_brush",kse(mse).keyModifiers(!1).on("end",e=>{var t;if(!e.sourceEvent)return;const{shiftKey:n,altKey:i}=e.sourceEvent,r=e.selection;null==(t=this._onSelectCallback)||t.call(this,r,n,i)})),this._=e,this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.classList.add("style_module_rectSelect__6c3b1fe5"),null==(t=this._.containerElement)||t.appendChild(this._svg),this._onSelectCallback=this._.eventManager.onRectSelect,ire(this._svg).select(".brush-group").remove(),this._brush.extent([[0,0],[this._svg.clientWidth,this._svg.clientHeight]]),ire(this._svg).append("g").attr("class","brush-group").call(this._brush),this.updateSelectionClassName(),ire(this._svg).style("display","none")}updateSelectionClassName(){const e=`selection ${this._.config.rectangularSelectorClassName??""}`;ire(this._svg).select(".brush-group").selectAll(".selection").attr("class",e)}enable(){ire(this._svg).style("display",null),this._brush.extent([[0,0],[this._svg.clientWidth,this._svg.clientHeight]]),ire(this._svg).select(".brush-group").call(this._brush)}disable(){ire(this._svg).style("display","none"),ire(this._svg).select(".brush-group").call(this._brush.clear)}destroy(){ire(this._svg).select(".brush-group").remove(),this._svg.remove()}};Ace(".style_module_polygonalSelect__f21ae84d{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}",{});let Rce=class{constructor(e){s(this,"_"),s(this,"_canvas"),s(this,"_ctx"),s(this,"_isDrawing",!1),s(this,"_points",[]),s(this,"_onSelectCallback"),s(this,"_resizeObserver"),s(this,"_startDrawing",e=>{this._isDrawing=!0,this._points=[];const t=this._canvas.getBoundingClientRect();this._points.push({x:e.clientX-t.left,y:e.clientY-t.top});const n=window.devicePixelRatio||1;this._ctx.clearRect(0,0,this._canvas.width/n,this._canvas.height/n)}),s(this,"_draw",e=>{if(!this._isDrawing)return;const t=this._canvas.getBoundingClientRect();this._points.push({x:e.clientX-t.left,y:e.clientY-t.top});const n=window.devicePixelRatio||1;this._ctx.clearRect(0,0,this._canvas.width/n,this._canvas.height/n),this._ctx.beginPath(),this._points.length>0&&this._points[0]&&this._ctx.moveTo(this._points[0].x,this._points[0].y);for(let i=1;i<this._points.length;i++){const e=this._points[i];e&&this._ctx.lineTo(e.x,e.y)}this._ctx.strokeStyle=this._.config.polygonalSelectorStrokeColor||"#ffffff",this._ctx.lineWidth=this._.config.polygonalSelectorLineWidth||2,this._ctx.stroke()}),s(this,"_stopDrawing",e=>{var t;if(!this._isDrawing)return;if(this._isDrawing=!1,this._points.length>2){this._ctx.closePath(),this._ctx.stroke();const n=this._points.map(e=>[e.x,e.y]),i=n[0],r=n[n.length-1];i&&r&&(i[0]!==r[0]||i[1]!==r[1])&&n.push(i),null==(t=this._onSelectCallback)||t.call(this,n,e.shiftKey,e.altKey)}const n=window.devicePixelRatio||1;this._ctx.clearRect(0,0,this._canvas.width/n,this._canvas.height/n)}),this._=e,this._onSelectCallback=this._.eventManager.onPolygonSelect,this._initializeCanvas(),this._resizeObserver=new ResizeObserver(()=>this._resizeCanvas()),this._resizeObserver.observe(this._.containerElement)}_initializeCanvas(){const e=this._.containerElement;if(!e)return;this._canvas=document.createElement("canvas"),this._canvas.classList.add("style_module_polygonalSelect__f21ae84d"),e.appendChild(this._canvas);const t=this._canvas.getContext("2d");if(!t)return;this._ctx=t;const n=window.devicePixelRatio||1;this._canvas.width=e.clientWidth*n,this._canvas.height=e.clientHeight*n,this._canvas.style.width=`${e.clientWidth}px`,this._canvas.style.height=`${e.clientHeight}px`,this._ctx.scale(n,n)}enable(){this._canvas.style.display="block",this._canvas.style.pointerEvents="auto",this._canvas.style.cursor="crosshair",this._canvas.addEventListener("mousedown",this._startDrawing),this._canvas.addEventListener("mousemove",this._draw),this._canvas.addEventListener("mouseup",this._stopDrawing)}disable(){if(this._canvas.style.display="none",this._canvas.style.pointerEvents="none",this._canvas.style.cursor="default",this._canvas.removeEventListener("mousedown",this._startDrawing),this._canvas.removeEventListener("mousemove",this._draw),this._canvas.removeEventListener("mouseup",this._stopDrawing),this._ctx){const e=window.devicePixelRatio||1;this._ctx.clearRect(0,0,this._canvas.width/e,this._canvas.height/e)}}destroy(){var e;null==(e=this._resizeObserver)||e.disconnect(),this.disable(),this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}_resizeCanvas(){const{width:e,height:t}=this._.containerElement.getBoundingClientRect(),n=window.devicePixelRatio||1;this._canvas.width=e*n,this._canvas.height=t*n,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`,this._ctx.scale(n,n)}};const Oce=new WeakMap;function Mce(e){return Oce.get(e)}let Dce=(t=class{constructor(e){s(this,"_id"),s(this,"_isActive",!0),s(this,"_client"),s(this,"_selection"),s(this,"_config"),s(this,"_currentData"),s(this,"_isArrayColumn",!1),this._config=e,this._client=this._createClient();const t=`${this.fieldsToQuery.join(",")}-${nne()}`;this._id=e.id?`${e.id}-${t}`:t}static getOrCreateClient(e){if(e.id){const n=t._clientRegistry.get(e.id);if(n)return n._config=e,n._isArrayColumn=!1,n._currentData&&n._detectArrayColumn(),n}const n=new t(e);return e.id&&t._clientRegistry.set(e.id,n),n}get selection(){return this._selection}get tableName(){return this._config.getTableName()}get accessor(){return this._config.getAccessor()}get id(){return this._id}get active(){return this._client.enabled}get currentData(){return this._currentData}get fieldsToQuery(){const e=this._config.includeFields?this._config.includeFields():[];return this._isActive?[...new Set([...this.accessor?[u0(this.accessor)]:[],...e].filter(Boolean))]:["*"]}setActive(e){this._isActive=e}async getCurrentData(){const e=await this._config.coordinator.query(F0.from(this.tableName).select(this.fieldsToQuery));return this._currentData=e,this._detectArrayColumn(),e}_detectArrayColumn(){var e;try{const t=this.accessor,n=t?null==(e=this._currentData)?void 0:e.getChild(t):void 0;this._isArrayColumn=!(!n||!(ene(n.type)||n.length>0&&Array.isArray(n.get(0))))}catch{this._isArrayColumn=!1}}applyFilter(e){var t;null==(t=this.selection)||t.update({source:this,predicate:e??null,value:e??null})}applyRangeFilter(e){this.accessor&&this.applyFilter(e?d1(u0(this.accessor),e):void 0)}applyExactFilter(e){if(void 0===e)return void this.applyFilter(void 0);if("null"===e)return void this.applyFilter((t=u0(this.accessor),t1("IS NULL",t)));var t;const n=this._isArrayColumn?f1`list_contains(${u0(this.accessor)}, ${h0(e)})`:n1("=",u0(this.accessor),h0(e));this.applyFilter(n)}applyInFilter(e){if(this.accessor)if(e&&e.length>0){const t=(Array.isArray(e)?e:Array.from(e)).map(e=>h0(e));this.applyFilter(h1(u0(this.accessor),t))}else this.applyFilter(void 0)}applyLessOrEqFilter(e){this.accessor&&this.applyFilter(void 0!==e?c1(u0(this.accessor),h0(e)):void 0)}applyGreaterOrEqFilter(e){this.accessor&&this.applyFilter(void 0!==e?u1(u0(this.accessor),h0(e)):void 0)}resetFilter(){var e,t;this.selection&&(null==(t=null==(e=this.selection)?void 0:e.clauses)?void 0:t.filter(e=>e.source.id===this.id).length)>0&&this.selection.update({source:this,predicate:null,value:null})}update(){this._client.update()}destroy(){this.resetFilter(),this._client.destroy(),this._config.id&&t._clientRegistry.delete(this._config.id)}regenerateClient(){this.destroy(),this._client=this._createClient()}_createClient(){return this._selection=this._config.getSelection(),function(e){const{coordinator:t=u2(),...n}=e,i=new h2(n);return t.connect(i),i}({coordinator:this._config.coordinator,selection:this.selection,query:e=>{var t;return this._isActive&&(null==(t=this.selection)?void 0:t.clauses.active)?F0.from(this.tableName).select(this.fieldsToQuery).where(e??[]):null},queryResult:e=>{var t,n;const i=e;this._currentData=i,null==(n=(t=this._config).onFiltered)||n.call(t,i)}})}reset(){this.resetFilter()}},s(t,"_clientRegistry",new Map),t),Nce=class{constructor(e,t,n){s(this,"_dataUpdatedHandler"),s(this,"_dataFilteredHandler"),s(this,"_resetSelectionsHandler"),s(this,"_internalApi"),s(this,"_isValidAccessor",!1),s(this,"_currentData"),s(this,"_client"),s(this,"_uiComponent"),s(this,"_config"),s(this,"_targetElement"),s(this,"_abortController",new AbortController),s(this,"_readyPromise"),s(this,"_isInitialLoad",!0),this._internalApi=Mce(e),this._targetElement=t,this._config=this._mergeWithDefaultConfig(n),this._dataUpdatedHandler=async()=>await this.fetchData(),this._dataFilteredHandler=()=>this.onDataFiltered(),this._resetSelectionsHandler=()=>this._onResetSelections(),this._internalApi.addEventListener("dataUploaded",this._dataUpdatedHandler),this._internalApi.addEventListener("dataFiltered",this._dataFilteredHandler),this._internalApi.addEventListener("resetSelections",this._resetSelectionsHandler),this._readyPromise=this._initialize()}onInitialize(){}onResetClientSelections(){}getCurrentData(){return null}async shouldUpdateComponentData(){return!1}get useLinksData(){return this._config.useLinksData??!1}get pointAccessors(){const{pointIdBy:e,pointIndexBy:t}=this._internalApi.config;return e&&t?[e,t]:[]}get linkAccessors(){const{linkSourceIndexBy:e,linkTargetIndexBy:t}=this._internalApi.config;return e&&t?[e,t]:[]}get selection(){return this.useLinksData?this._internalApi.crossfilter.linksSelection:this._internalApi.crossfilter.pointsSelection}get tableName(){return this.useLinksData?this._internalApi.public.linksTableName:this._internalApi.public.pointsTableName}async _initialize(){await((e,t)=>{const{signal:n}=t;return e.reduce((e,t)=>e.then(async()=>{var e;if(!n.aborted)try{await t()}catch(i){(e=i)&&(e.message||String(e)),n.aborted}}),Promise.resolve()).then(()=>{})})([async()=>{await this._internalApi.dbReady();const e=await this._getGlobalDisplayStateSettings(this._config);this._config={...this._config,...e}},async()=>{this._uiComponent=this.createUIComponent(this._targetElement),await this._internalApi.configManager.cosmosInitialized()},()=>this._createClient(),()=>this.fetchData(),()=>this.setConfig(this._config),()=>this.onConfigUpdate(),()=>Promise.resolve(this.onInitialize())],this._abortController)}async _getGlobalDisplayStateSettings(e){await this._internalApi.dbReady();const{componentsDisplayStateMode:t}=this._internalApi.config;let{disableStateMessages:n,noDataMessage:i}=e;return!1===t?n=!0:"loading"===t&&(i=!1),{disableStateMessages:n,noDataMessage:i,loadingMessage:e.loadingMessage}}async setConfig(e){var t;const n=this._config,i=this.accessor;this._config=this._mergeWithDefaultConfig(e),this._config={...this._config,...await this._getGlobalDisplayStateSettings(this._config)};const r=await this.shouldUpdateComponentData();this._config.useLinksData!==n.useLinksData&&(null==(t=this._client)||t.regenerateClient()),(r||this._config.useLinksData!==n.useLinksData||this._config.useQuantiles!==n.useQuantiles||this.accessor!==i)&&(await this.fetchData(),this.onResetClientSelections()),await this.onConfigUpdate(n)}async fetchData(){var e,t,n,i,r;const{dbCoordinator:o,dataManager:s}=this._internalApi;if(!o||!this.accessor)return;await s.dataReady(),null==(t=null==(e=this._uiComponent)?void 0:e.setLoadingState)||t.call(e);const a=!this.accessor||await Sle(o,this.tableName);if(this._isValidAccessor=!this.accessor||a&&await kle(o,this.tableName,[this.accessor]),this._isInitialLoad||null==(n=this._client)||n.resetFilter(),null==(i=this._client)||i.setActive(this._isValidAccessor),this._isValidAccessor){const e=await this.getCurrentData();this._currentData=null!==e?e:await(null==(r=this._client)?void 0:r.getCurrentData())}else this._currentData=void 0;this._isInitialLoad&&(this._isInitialLoad=!1)}ready(){return this._readyPromise}checkReady(e){return!!this._uiComponent||(this.ready().then(e),!1)}async _createClient(){if(await this._internalApi.dbReady(),!this._internalApi.dbCoordinator)return;const e={coordinator:this._internalApi.dbCoordinator,getTableName:()=>this.tableName,getSelection:()=>this.selection,getAccessor:()=>this.accessor,includeFields:()=>this.useLinksData?this.linkAccessors:this.pointAccessors,onFiltered:this._handleSelectionUpdate.bind(this),id:this._config.id||this.constructor.name+this.accessor+nne()};this._client=Dce.getOrCreateClient(e)}_handleSelectionUpdate(e){var t,n,i,r;if(!this.accessor)return;const o=this._internalApi.crossfilter;if(this.useLinksData){const i=o.linksSelection.active;(null==(t=null==i?void 0:i.source)?void 0:t.id)===(null==(n=this._client)?void 0:n.id)&&o.onLinksFiltered(e)}else{const t=o.pointsSelection.active;(null==(i=null==t?void 0:t.source)?void 0:i.id)===(null==(r=this._client)?void 0:r.id)&&o.onPointsFiltered(e)}}_onResetSelections(){var e;null==(e=this._client)||e.resetFilter(),this.onResetClientSelections()}_mergeWithDefaultConfig(e){return Rse(this.defaultConfig,e??{})}remove(){var e,t;this._abortController.abort(),null==(e=this._uiComponent)||e.destroy(),this._config.preserveSelectionOnUnmount||null==(t=this._client)||t.resetFilter(),this._internalApi.removeEventListener("dataUploaded",this._dataUpdatedHandler),this._internalApi.removeEventListener("dataFiltered",this._dataFilteredHandler),this._internalApi.removeEventListener("resetSelections",this._resetSelectionsHandler),this._isInitialLoad=!0}},Fce=(n=class extends Nce{static isInclusiveComponent(e){return n._inclusiveComponentIds.has(e)}static register(e){n._inclusiveComponentIds.add(e)}static unregister(e){n._inclusiveComponentIds.delete(e)}onInitialize(){var e;(null==(e=this._client)?void 0:e.id)&&n.register(this._client.id)}onDataFiltered(){var e;const{pointsSelection:t,linksSelection:i}=this._internalApi.crossfilter,r=t.active,o=i.active,s=!((null==r?void 0:r.predicate)||t.clauses.length||(null==o?void 0:o.predicate)||i.clauses.length),a=e=>{var t,i,r;return void 0!==(null==e?void 0:e.predicate)&&(null==(t=null==e?void 0:e.source)?void 0:t.id)===(null==(i=this._client)?void 0:i.id)&&!n.isInclusiveComponent(null==(r=null==e?void 0:e.source)?void 0:r.id)};(a(r)||a(o)||s)&&(null==(e=this._client)||e.resetFilter(),this.onResetClientSelections()),this.updateCrossfilteredData()}updateCrossfilteredData(){var e,t;const{crossfilter:n}=this._internalApi;if(!this._currentData||!this._isValidAccessor||!this.accessor)return;const i=n.filtered.intersection;if(n.isFilteringActive){const e=this._filterByIdx(this._currentData,i);this.updateHighlightedData(e)}else{const n=null==(t=null==(e=this._currentData)?void 0:e.getChild(this.accessor))?void 0:t.toArray();this.updateHighlightedData(n)}}_filterByIdx(e,t){var n,i;const{config:r}=this._internalApi;if(!this.accessor||!t.size)return[];const o=e.getChild(this.accessor);if(!o)return[];const s=this.useLinksData?r.linkSourceIndexBy:r.pointIndexBy,a=null==(n=e.getChild(s))?void 0:n.toArray();if(!a)return[];const l=this.useLinksData?null==(i=e.getChild(r.linkTargetIndexBy))?void 0:i.toArray():void 0,c=o.toArray(),u=t,d=[];for(let h=0,f=c.length;h<f;++h){const e=a[h];if(u.has(e)||void 0!==l&&u.has(l[h])){const e=c[h];Array.isArray(e)?d.push(...e):d.push(e)}}return d}remove(){var e;(null==(e=this._client)?void 0:e.id)&&n.unregister(this._client.id),super.remove()}},s(n,"_inclusiveComponentIds",new Set),n),Bce=class{constructor(e){s(this,"_internalApi"),s(this,"_pointSelectionClient"),this._internalApi=e;const t={coordinator:this._internalApi.dbCoordinator,getSelection:()=>this._internalApi.crossfilter.pointsSelection,getTableName:()=>this._internalApi.public.pointsTableName,getAccessor:()=>this._internalApi.config.pointIndexBy,onFiltered:e=>this._onPointsFiltered(e),id:"pointsSelectionClient"};this._pointSelectionClient=new Dce(t),this._pointSelectionClient.setActive(!0),Fce.register(this._pointSelectionClient.id)}_onPointsFiltered(e){this._internalApi.crossfilter.onPointsFiltered(e)}selectPoints(e){void 0===e?this._pointSelectionClient.resetFilter():this._pointSelectionClient.applyInFilter(e)}get id(){return this._pointSelectionClient.id}destroy(){Fce.unregister(this._pointSelectionClient.id)}};var zce=Array.prototype.slice;function Uce(e,t){return e-t}const jce=e=>()=>e;function Vce(e,t){for(var n,i=-1,r=t.length;++i<r;)if(n=Hce(e,t[i]))return n;return 0}function Hce(e,t){for(var n=t[0],i=t[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],c=l[0],u=l[1],d=e[a],h=d[0],f=d[1];if(Wce(l,d,t))return 0;u>i!=f>i&&n<(h-c)*(i-u)/(f-u)+c&&(r=-r)}return r}function Wce(e,t,n){var i;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[i=+(e[0]===t[0])],n[i],t[i])}function $ce(){}var Gce=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function qce(){var e=1,t=1,n=tv,i=a;function r(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(Uce);else{const n=Hy(e,Yce);for(t=Qy(...function(e,t,n){let i;for(;;){const r=Jy(e,t,n);if(r===i||0===r||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}(n[0],n[1],t),t);t[t.length-1]>=n[1];)t.pop();for(;t[1]<n[0];)t.shift()}return t.map(t=>o(e,t))}function o(n,r){const o=null==r?NaN:+r;if(isNaN(o))throw new Error(`invalid value: ${r}`);var a=[],l=[];return function(n,i,r){var o,a,l,c,u,d,h=new Array,f=new Array;for(o=a=-1,c=Xce(n[0],i),Gce[c<<1].forEach(p);++o<e-1;)l=c,c=Xce(n[o+1],i),Gce[l|c<<1].forEach(p);for(Gce[0|c].forEach(p);++a<t-1;){for(o=-1,c=Xce(n[a*e+e],i),u=Xce(n[a*e],i),Gce[c<<1|u<<2].forEach(p);++o<e-1;)l=c,c=Xce(n[a*e+e+o+1],i),d=u,u=Xce(n[a*e+o+1],i),Gce[l|c<<1|u<<2|d<<3].forEach(p);Gce[c|u<<3].forEach(p)}for(o=-1,u=n[a*e]>=i,Gce[u<<2].forEach(p);++o<e-1;)d=u,u=Xce(n[a*e+o+1],i),Gce[u<<2|d<<3].forEach(p);function p(e){var t,n,i=[e[0][0]+o,e[0][1]+a],l=[e[1][0]+o,e[1][1]+a],c=s(i),u=s(l);(t=f[c])?(n=h[u])?(delete f[t.end],delete h[n.start],t===n?(t.ring.push(l),r(t.ring)):h[t.start]=f[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete f[t.end],t.ring.push(l),f[t.end=u]=t):(t=h[u])?(n=f[c])?(delete h[t.start],delete f[n.end],t===n?(t.ring.push(l),r(t.ring)):h[n.start]=f[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(i),h[t.start=c]=t):h[c]=f[u]={start:c,end:u,ring:[i,l]}}Gce[u<<3].forEach(p)}(n,o,function(e){i(e,n,o),function(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(e)>0?a.push([e]):l.push(e)}),l.forEach(function(e){for(var t,n=0,i=a.length;n<i;++n)if(-1!==Vce((t=a[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:r,coordinates:a}}function s(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,i,r){n.forEach(function(n){var o=n[0],s=n[1],a=0|o,l=0|s,c=Kce(i[l*e+a]);o>0&&o<e&&a===o&&(n[0]=Zce(o,Kce(i[l*e+a-1]),c,r)),s>0&&s<t&&l===s&&(n[1]=Zce(s,Kce(i[(l-1)*e+a]),c,r))})}return r.contour=o,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);if(!(i>=0&&o>=0))throw new Error("invalid size");return e=i,t=o,r},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?jce(zce.call(e)):jce(e),r):n},r.smooth=function(e){return arguments.length?(i=e?a:$ce,r):i===a},r}function Yce(e){return isFinite(e)?e:NaN}function Xce(e,t){return null!=e&&+e>=t}function Kce(e){return null==e||isNaN(e=+e)?-1/0:e}function Zce(e,t,n,i){const r=i-t,o=n-t,s=isFinite(r)||isFinite(o)?r/o:Math.sign(r)/Math.sign(o);return isNaN(s)?e:e+s-.5}function Qce(e){return e[0]}function Jce(e){return e[1]}function eue(){return 1}function tue(){var e=Qce,t=Jce,n=eue,i=960,r=500,o=20,s=2,a=3*o,l=i+2*a>>s,c=r+2*a>>s,u=jce(20);function d(i){var r=new Float32Array(l*c),u=Math.pow(2,-s),d=-1;for(const o of i){var h=(e(o,++d,i)+a)*u,f=(t(o,d,i)+a)*u,p=+n(o,d,i);if(p&&h>=0&&h<l&&f>=0&&f<c){var m=Math.floor(h),g=Math.floor(f),_=h-m-.5,y=f-g-.5;r[m+g*l]+=(1-_)*(1-y)*p,r[m+1+g*l]+=_*(1-y)*p,r[m+1+(g+1)*l]+=_*y*p,r[m+(g+1)*l]+=(1-_)*y*p}}return zy({data:r,width:l,height:c},o*u),r}function h(e){var t=d(e),n=u(t),i=Math.pow(2,2*s);return Array.isArray(n)||(n=Qy(Number.MIN_VALUE,nv(t)/i,n)),qce().size([l,c]).thresholds(n.map(e=>e*i))(t).map((e,t)=>(e.value=+n[t],f(e)))}function f(e){return e.coordinates.forEach(p),e}function p(e){e.forEach(m)}function m(e){e.forEach(g)}function g(e){e[0]=e[0]*Math.pow(2,s)-a,e[1]=e[1]*Math.pow(2,s)-a}function _(){return l=i+2*(a=3*o)>>s,c=r+2*a>>s,h}return h.contours=function(e){var t=d(e),n=qce().size([l,c]),i=Math.pow(2,2*s),r=e=>{e=+e;var r=f(n.contour(t,e*i));return r.value=e,r};return Object.defineProperty(r,"max",{get:()=>nv(t)/i}),r},h.x=function(t){return arguments.length?(e="function"==typeof t?t:jce(+t),h):e},h.y=function(e){return arguments.length?(t="function"==typeof e?e:jce(+e),h):t},h.weight=function(e){return arguments.length?(n="function"==typeof e?e:jce(+e),h):n},h.size=function(e){if(!arguments.length)return[i,r];var t=+e[0],n=+e[1];if(!(t>=0&&n>=0))throw new Error("invalid size");return i=t,r=n,_()},h.cellSize=function(e){if(!arguments.length)return 1<<s;if(!((e=+e)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(e)/Math.LN2),_()},h.thresholds=function(e){return arguments.length?(u="function"==typeof e?e:Array.isArray(e)?jce(zce.call(e)):jce(e),h):u},h.bandwidth=function(e){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*e*e+1)-1)/2,_()},h}function nue(e,t,n){this.k=e,this.x=t,this.y=n}nue.prototype={constructor:nue,scale:function(e){return 1===e?this:new nue(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new nue(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},nue.prototype;const iue=oue(e=>{const t=rue(e);return e=>null==e?"":"number"==typeof e?t(e):e instanceof Date?function(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(+e))return t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${s=e.getUTCFullYear(),s<0?`-${sue(-s,6)}`:s>9999?`+${sue(s,6)}`:sue(s,4)}-${sue(e.getUTCMonth()+1,2)}-${sue(e.getUTCDate(),2)}${n||i||r||o?`T${sue(n,2)}:${sue(i,2)}${r||o?`:${sue(r,2)}${o?`.${sue(o,3)}`:""}`:""}Z`:""}`;var s}(e,"Invalid Date"):`${e}`}),rue=oue(e=>t=>0===t?"0":t.toLocaleString(e));function oue(e){let t,n=null;return(i="en")=>i===n?t:t=e(n=i)}function sue(e,t){return`${e}`.padStart(t,"0")}iue(),rue();let aue=class{constructor(e){s(this,"_id"),s(this,"_component"),s(this,"_container"),s(this,"_isDestroyed",!1),s(this,"_errorMessage"),s(this,"_internalApi"),s(this,"_marks",[]),this._id=e.id||`mosaic-component-${nne()}`,this._internalApi=e.internalApi}get id(){return this._id}get errorMessage(){return this._errorMessage}async mount(e,t){if(this._isDestroyed)return this._errorMessage=`Cannot mount component: component ${this._id} has been destroyed`,void Wte(this._id,0,"warn");this._component&&(Wte(this._id,0,"warn"),await this._unmount()),this._errorMessage=void 0;try{const n=await this._resolveElement(e);if(!n)return this._errorMessage="Component did not resolve to an HTMLElement",void Wte((this._id,this._errorMessage),0,"warn");const i=null==n?void 0:n.value;if(i&&!(await this._validatePlot(i)))return this._abortMount(t,this._errorMessage||"Chart references columns not available in dataset");i&&(this._attachErrorInterceptors(i,t),this._connectPlot(i),this._marks=i.marks?[...i.marks]:[]),this._component=e,this._container=t,t.innerHTML="",t.appendChild(n)}catch(n){this._abortMount(t,n instanceof Error?n.message:String(n))}}_abortMount(e,t){this._errorMessage=t,this._marks=[],this._showError(e),Wte(this._id,0,"warn")}async _resolveElement(e){if(e instanceof HTMLElement)return e}async _validatePlot(e){var t,n;if(!this._internalApi.dbCoordinator||!(null==(t=null==e?void 0:e.marks)?void 0:t.length))return!0;for(const i of e.marks){const e=i.sourceTable(),t=null==(n=i.channels)?void 0:n.map(e=>{var t;return null==(t=null==e?void 0:e.field)?void 0:t.column}).filter(e=>"string"==typeof e);if(!e||!(null==t?void 0:t.length))continue;const r=[];if(!(await kle(this._internalApi.dbCoordinator,e,t,r)))return this._errorMessage=`Missing columns for table "${e}"${r.length?`: ${[...new Set(r)].join(", ")}`:""}`,!1}return!0}_attachErrorInterceptors(e,t){var n,i;if(null==(n=null==e?void 0:e.marks)?void 0:n.length)for(const r of e.marks){if(!r)continue;const n=null==(i=r.queryError)?void 0:i.bind(r);r.queryError=i=>this._handleQueryError(i,e,t)?r:(null==n?void 0:n(i))??r}}_connectPlot(e){var t,n;if((null==(t=null==e?void 0:e.marks)?void 0:t.length)&&this._internalApi.dbCoordinator)for(const r of e.marks)if(r&&r.coordinator!==this._internalApi.dbCoordinator)try{null==(n=r.coordinator)||n.disconnect(r),this._internalApi.dbCoordinator.connect(r),r.queryPending()}catch(i){Wte(this._id,0,"warn")}}_handleQueryError(e,t,n){var i;const r=e instanceof Error?e.message:String(e);return!!/no such column|cannot find column/i.test(r)&&(this._errorMessage="Mosaic query failed because required columns are missing.",this._cleanupSelections(),null==(i=null==t?void 0:t.marks)||i.forEach(e=>{var t,n;e&&(e.enabled=!1,null==(n=null==(t=e.coordinator)?void 0:t.disconnect)||n.call(t,e))}),this._component=void 0,this._marks=[],this._showError(n),Wte(this._id,0,"warn"),!0)}_cleanupSelections(){if(!this._marks.length)return;const e=new Set(this._marks.flatMap(e=>{var t;return(null==(t=null==e?void 0:e.plot)?void 0:t.interactors)||[]}).filter(e=>(null==e?void 0:e.mark)&&this._marks.includes(e.mark)));e.size&&[this._internalApi.crossfilter.pointsSelection,this._internalApi.crossfilter.linksSelection].filter(Boolean).forEach(t=>{t.clauses.filter(t=>e.has(null==t?void 0:t.source)).forEach(e=>{t.update({source:e.source,predicate:null,value:null})})})}async _unmount(){this._container&&(this._cleanupSelections(),this._container.innerHTML="",this._component=void 0,this._container=void 0,this._errorMessage=void 0,this._marks=[],Wte(this._id,0,"ok"))}async destroy(){this._isDestroyed||(await this._unmount(),this._isDestroyed=!0,Wte(this._id,0,"ok"))}_showError(e){e&&(e.innerHTML=`\n      <div style="padding: 15px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 4px; color: #856404; font-size: 13px;">\n        <strong>Chart Error: ${this._id}</strong>\n        <p style="margin: 5px 0 0 0;">This chart cannot be displayed. Check configuration, it may reference columns that don't exist in your data.</p>\n      </div>\n    `)}};"function"==typeof u2&&u2({connect:()=>{},disconnect:()=>{}});let lue=class{constructor(e){s(this,"_internalApi"),s(this,"_components",new Map),this._internalApi=e}get components(){return this._components}async addComponent(e,t,n){const i=new aue({...n,internalApi:this._internalApi});if(this._components.has(i.id)){const e=this._components.get(i.id);Wte(i.id,0,"warn"),await e.destroy()}return await i.mount(e,t),this._components.set(i.id,i),i.errorMessage?Wte((i.id,i.errorMessage),0,"warn"):Wte(i.id,0,"ok"),i}async removeComponent(e){const t=this._components.get(e);return!!t&&(await t.destroy(),this._components.delete(e),!0)}async destroyAll(){const e=Array.from(this._components.values()).map(e=>e.destroy());await Promise.all(e),this._components.clear()}};var cue="style_module_messageError__8ee622df",uue="style_module_spinner__8ee622df";Ace(".style_module_cosmograph__8ee622df{--cosmograph-text-color:#fff;-webkit-font-smoothing:antialiased!important;display:flex;height:100%;overflow:hidden;position:relative;text-rendering:optimizeLegibility!important;width:100%}.style_module_popupContainer__8ee622df{height:100%;pointer-events:none;position:absolute;width:100%;z-index:1}.style_module_attribution__8ee622df{bottom:0;color:var(--cosmograph-text-color);cursor:pointer;line-height:0;margin:0 .6rem .6rem 0;opacity:.7;position:absolute;right:0;user-select:none;-webkit-user-select:none;z-index:1}.style_module_message__8ee622df{color:var(--cosmograph-text-color);font-size:14px;font-weight:300;left:50%;max-width:300px;opacity:.6;position:absolute;text-align:center;top:50%;transform:translate(-50%,-50%);z-index:1000}.style_module_messageError__8ee622df{max-width:min(800px,90vw);text-align:left}.style_module_messagePre__8ee622df{white-space:pre-wrap}.style_module_message__8ee622df>br{display:none}@keyframes style_module_spin__8ee622df{to{transform:rotate(1turn)}}@keyframes style_module_fadeIn__8ee622df{0%{opacity:0}to{opacity:1}}.style_module_spinner__8ee622df{animation:style_module_fadeIn__8ee622df .3s ease forwards,style_module_spin__8ee622df 1s linear infinite;border:4px solid hsla(0,0%,100%,.3);border-radius:50%;border-top:4px solid var(--cosmograph-text-color);display:block;height:30px;margin:0 auto;opacity:0;width:30px}",{});class due{constructor(e,t,n){s(this,"_internalApi"),s(this,"_eventTarget",new EventTarget),s(this,"_dbReadinessPromise",null),s(this,"_labels"),s(this,"_cosmos"),s(this,"_cosmosInitialized",!1),s(this,"_dbCoordinator"),s(this,"_dataValidator"),s(this,"_configManager"),s(this,"_dataManager"),s(this,"_eventManager"),s(this,"_crossfilter"),s(this,"_linkAggregationManager"),s(this,"_rectangularSelection"),s(this,"_polygonalSelection"),s(this,"_pointSelectionClient"),s(this,"_mosaicComponentManager"),s(this,"_containerElement"),s(this,"_popupElement"),s(this,"_attributionDivElement"),s(this,"_cosmosElement"),s(this,"_messageDivElement"),s(this,"_focusedPointIndex"),s(this,"_enableSimulation",!0),s(this,"_pointsHaveLayout",!1),s(this,"_isDestroyed",!1),s(this,"_summary",{}),s(this,"_stats",{pointsCount:0,linksCount:0,pointsSummary:void 0,linksSummary:void 0}),s(this,"_initializeLabels",()=>{this._labels&&this._labels.destroy();const e=this._cosmosElement.querySelector("canvas");e&&(this._labels=new Pce(this._internalApi,e))}),s(this,"_initializeClients",async()=>{this._pointSelectionClient=new Bce(this._internalApi),this._mosaicComponentManager=new lue(this._internalApi)}),s(this,"_dropLocalTables",async e=>{var t,n;this._dbCoordinator&&(e||await(null==(t=this._dbCoordinator.internalDB)?void 0:t.dropTable(One.Points)),await(null==(n=this._dbCoordinator.internalDB)?void 0:n.dropTable(One.Links)))}),window.cosmographDisableLogging=t.disableLogging??!1,this._containerElement=e,this._internalApi=this._initializeInternalApi(this),function(e,t){Oce.set(e,t)}(this,this._internalApi),Wte(),this._initializeDB(n),this._dataValidator=new lce(this._internalApi),this._eventManager=new cce(this._internalApi),this._linkAggregationManager=new hce(this._internalApi),this._configManager=new rce(this._internalApi),this._dataManager=new sce(this._internalApi),this._crossfilter=new oce(this._internalApi),this._rectangularSelection=new Lce(this._internalApi),this._polygonalSelection=new Rce(this._internalApi),void 0!==t.statusIndicatorMode&&(this._configManager.config.statusIndicatorMode=t.statusIndicatorMode),this._initializeHTMLElements(),this.setConfig(t)}_initializeInternalApi(e){return{get public(){return e},get labels(){return e._labels},get cosmos(){return e._cosmos},get summary(){return e._summary},get eventManager(){return e._eventManager},get configManager(){return e._configManager},get dataManager(){return e._dataManager},get dataValidator(){return e._dataValidator},get linkAggregationManager(){return e._linkAggregationManager},get rectangularSelection(){return e._rectangularSelection},get polygonalSelection(){return e._polygonalSelection},get crossfilter(){return e._crossfilter},get selectionClient(){return e._pointSelectionClient},get dbCoordinator(){return e._dbCoordinator},get containerElement(){return e._containerElement},get cosmosElement(){return e._cosmosElement},get popupElement(){return e._popupElement},get config(){return e._configManager.config},get cosmosInitialized(){return e._cosmosInitialized},get pointsHaveLayout(){return e._pointsHaveLayout},dropLocalTables:async t=>await e._dropLocalTables(t),updateMessage:t=>e._updateMessage(t),initializeLabels:()=>e._initializeLabels(),initializeCosmos:()=>e._initializeCosmos(),updateStats:()=>e._updateStats(),updateSummary:async()=>e._updateSummary(),dbReady:async()=>e._dbReady(),addEventListener:(t,n)=>{e._eventTarget.addEventListener(t,n,{passive:!0})},removeEventListener:(t,n)=>{e._eventTarget.removeEventListener(t,n,{passive:!0})},dispatchEvent:t=>e._eventTarget.dispatchEvent(t)}}_initializeDB(e){this._dbReadinessPromise=$ne.create(e).then(async t=>{if(this._ensureAlive())if(this._dbCoordinator=t,t)this._updateMessage(" Cosmograph is ready, load your data!",!0),await this._initializeClients();else{const t=e?" Couldn't create coordinator for specified DuckDB connection. Please check your external DuckDB instance configuration and try to initialize Cosmograph again.":" Failed to fetch DuckDB-Wasm bundles. Please try to initialize Cosmograph again.";this._updateMessage(t)}else this.destroy()}).catch(e=>{throw this._isDestroyed||Wte(0,0,"error"),e})}_initializeHTMLElements(){var e,t;this._containerElement.classList.add("style_module_cosmograph__8ee622df"),null==(e=this._containerElement)||e.style.setProperty("--cosmograph-text-color","#ffffff"),this._popupElement=document.createElement("div"),this._popupElement.classList.add("style_module_popupContainer__8ee622df"),this._cosmosElement=document.createElement("div"),this._cosmosElement.style.width="100%",this._cosmosElement.style.height="100%",null==(t=this._cosmosElement)||t.style.setProperty("backgroundColor",_le),this._containerElement.appendChild(this._cosmosElement),this._containerElement.appendChild(this._popupElement),this._addAttribution(),this._addMessageElement()}_addAttribution(){var e;this._attributionDivElement=document.createElement("div"),this._attributionDivElement.classList.add("style_module_attribution__8ee622df"),this._attributionDivElement.onclick=()=>{var e;return null==(e=window.open("https://cosmograph.app/","_blank"))?void 0:e.focus()};const t=(new DOMParser).parseFromString('<svg fill="currentColor" height="11" viewBox="0 0 163 11" width="163" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m2.45674 8-1.925002-5.379h.924002l1.617 4.73h.154l1.617-4.73h.924l-1.925 5.379z"/><path d="m7.02243 8v-5.379h.869v5.379zm.44-6.215c-.19067 0-.352-.06233-.484-.187-.12467-.12467-.187-.28233-.187-.473 0-.198.06233-.359333.187-.484.132-.124667.29333-.187.484-.187.19066 0 .34833.062333.473.187.12466.124667.187.286.187.484 0 .19067-.06234.34833-.187.473-.12467.12467-.28234.187-.473.187z"/><path d="m11.8857 8.154c-.6673 0-1.232-.154-1.694-.462-.45465-.308-.72965-.79567-.82499-1.463l.82499-.187c.0587.352.1687.63067.33.836.1613.198.3593.341.594.429.242.08067.4987.121.77.121.4033 0 .7223-.08067.957-.242s.352-.37767.352-.649c0-.27867-.1137-.473-.341-.583-.22-.11733-.5243-.21267-.913-.286l-.451-.077c-.3447-.05867-.66-.15033-.946-.275s-.5133-.29333-.68199-.506c-.16866-.21267-.25299-.48033-.25299-.803 0-.484.18699-.86167.56098-1.133.374-.27133.869-.407 1.485-.407.6087 0 1.1.13933 1.474.418.3813.27133.627.65633.737 1.155l-.814.209c-.066-.38867-.2237-.66-.473-.814-.2493-.16133-.5573-.242-.924-.242s-.6563.06967-.869.209c-.2127.132-.319.33-.319.594 0 .25667.099.44733.297.572.2053.11733.4767.20533.814.264l.451.077c.3813.066.7223.15767 1.023.275.308.11.55.27133.726.484.1833.21267.275.49133.275.836 0 .528-.198.935-.594 1.221-.3887.286-.913.429-1.573.429z"/><path d="m17.5765 8.099c-.3887 0-.748-.08433-1.078-.253-.3227-.16867-.5793-.418-.77-.748-.1833-.33733-.275-.74433-.275-1.221v-3.256h.869v3.19c0 .53533.132.924.396 1.166.2713.242.6343.363 1.089.363.5133 0 .935-.16867 1.265-.506s.495-.83967.495-1.507v-2.706h.869v5.379h-.847v-.913h-.154c-.1173.25667-.319.49133-.605.704-.286.20533-.704.308-1.254.308z"/><path d="m23.9048 8.154c-.374 0-.715-.066-1.023-.198s-.55-.32267-.726-.572-.264-.55367-.264-.913c0-.36667.088-.66733.264-.902.176-.242.418-.42167.726-.539.308-.12467.6527-.187 1.034-.187h1.815v-.396c0-.38133-.1136-.682-.341-.902-.22-.22-.55-.33-.99-.33-.4326 0-.77.10633-1.012.319-.242.20533-.407.484-.495.836l-.814-.264c.088-.30067.2274-.572.418-.814.1907-.24933.4437-.44733.759-.594.3227-.154.7077-.231 1.155-.231.6894 0 1.2247.17967 1.606.539.3814.352.572.85067.572 1.496v2.431c0 .22.1027.33.308.33h.495v.737h-.759c-.242 0-.4363-.066-.583-.198-.1466-.13933-.22-.32267-.22-.55v-.055h-.132c-.0806.13933-.1906.286-.33.44-.132.14667-.3153.26767-.55.363-.2346.10267-.539.154-.913.154zm.099-.748c.5134 0 .9277-.15033 1.243-.451.3227-.308.484-.737.484-1.287v-.121h-1.782c-.3446 0-.6306.077-.858.231-.22.14667-.33.37033-.33.671s.1137.53533.341.704c.2347.16867.5354.253.902.253z"/><path d="m28.582 8v-7.7h.869v7.7z"/><path d="m31.2783 8v-5.379h.869v5.379zm.44-6.215c-.1907 0-.352-.06233-.484-.187-.1247-.12467-.187-.28233-.187-.473 0-.198.0623-.359333.187-.484.132-.124667.2933-.187.484-.187s.3483.062333.473.187.187.286.187.484c0 .19067-.0623.34833-.187.473s-.2823.187-.473.187z"/><path d="m33.7326 8v-1.122l3.421-3.377v-.121h-3.311v-.759h4.224v1.122l-3.432 3.377v.132h3.52v.748z"/><path d="m41.9601 8.154c-.5427 0-1.0194-.11367-1.43-.341-.4107-.23467-.7297-.561-.957-.979-.2274-.418-.341-.902-.341-1.452v-.132c0-.55733.1136-1.045.341-1.463.2273-.418.5426-.74067.946-.968.4033-.23467.8653-.352 1.386-.352.506 0 .9533.11 1.342.33.3886.21267.693.52067.913.924s.33.87633.33 1.419v.396h-4.389c.022.57933.209 1.034.561 1.364.352.32267.792.484 1.32.484.462 0 .8176-.10633 1.067-.319.2493-.21267.44-.46567.572-.759l.748.363c-.11.22733-.264.45467-.462.682-.1907.22733-.4437.418-.759.572-.308.154-.704.231-1.188.231zm-1.848-3.333h3.498c-.0294-.49867-.2017-.88733-.517-1.166-.308-.27867-.704-.418-1.188-.418-.4914 0-.8947.13933-1.21.418-.3154.27867-.5097.66733-.583 1.166z"/><path d="m48.2828 8.154c-.462 0-.8873-.11-1.276-.33-.3886-.22-.6966-.539-.924-.957-.2273-.418-.341-.913-.341-1.485v-.143c0-.572.1137-1.06333.341-1.474.2274-.418.5317-.737.913-.957.3887-.22733.8177-.341 1.287-.341.374 0 .6894.05133.946.154.264.09533.4767.22.638.374.1614.14667.286.30433.374.473h.154v-3.168h.869v7.7h-.847v-.891h-.154c-.1466.27133-.374.51333-.682.726s-.7406.319-1.298.319zm.231-.77c.5574 0 1.0084-.176 1.353-.528.352-.35933.528-.858.528-1.496v-.099c0-.638-.176-1.133-.528-1.485-.3446-.35933-.7956-.539-1.353-.539-.55 0-1.0046.17967-1.364.539-.352.352-.528.847-.528 1.485v.099c0 .638.176 1.13667.528 1.496.3594.352.814.528 1.364.528z"/><path d="m58.8911 8.154c-.5573 0-.9936-.10633-1.309-.319-.308-.21267-.5316-.45467-.671-.726h-.154v.891h-.847v-7.7h.869v3.168h.154c.088-.16867.2127-.32633.374-.473.1614-.154.3704-.27867.627-.374.264-.10267.583-.154.957-.154.4694 0 .8947.11367 1.276.341.3887.22.6967.539.924.957.2274.41067.341.902.341 1.474v.143c0 .572-.1173 1.067-.352 1.485-.2273.418-.5353.737-.924.957-.3813.22-.803.33-1.265.33zm-.231-.77c.5574 0 1.0084-.176 1.353-.528.352-.35933.528-.858.528-1.496v-.099c0-.638-.176-1.133-.528-1.485-.3446-.35933-.7956-.539-1.353-.539-.55 0-1.0046.17967-1.364.539-.352.352-.528.847-.528 1.485v.099c0 .638.176 1.13667.528 1.496.3594.352.814.528 1.364.528z"/><path d="m63.6382 10.2v-.77h3.08c.2127 0 .319-.11.319-.33v-1.958h-.154c-.0733.154-.187.308-.341.462-.1466.14667-.341.26767-.583.363-.242.088-.5463.132-.913.132-.3886 0-.748-.08433-1.078-.253-.3226-.16867-.5793-.418-.77-.748-.1833-.33-.275-.73333-.275-1.21v-3.267h.869v3.201c0 .528.132.913.396 1.155.2714.242.6344.363 1.089.363.5134 0 .935-.16867 1.265-.506s.495-.83967.495-1.507v-2.706h.869v6.633c0 .29333-.0843.52433-.253.693-.1613.1687-.3996.253-.715.253z"/><path d="m75.2998 8.154c-.9167 0-1.6464-.264-2.189-.792-.5427-.53533-.814-1.31267-.814-2.332v-1.76c0-1.01933.2713-1.793.814-2.321.5426-.535333 1.2723-.803 2.189-.803.9093 0 1.606.253 2.09.759.4913.506.737 1.199.737 2.079v.055h-.913v-.088c0-.57933-.1577-1.05233-.473-1.419-.308-.374-.7884-.561-1.441-.561-.6527 0-1.1624.20167-1.529.605-.3667.396-.55.95333-.55 1.672v1.804c0 .71867.1833 1.27967.55 1.683.3666.396.8763.594 1.529.594.6526 0 1.133-.18333 1.441-.55.3153-.374.473-.85067.473-1.43v-.176h.913v.143c0 .88-.2457 1.573-.737 2.079-.484.506-1.1807.759-2.09.759z"/><path d="m82.0934 8.154c-.5427 0-1.023-.11367-1.441-.341-.4107-.22733-.7333-.54633-.968-.957-.2273-.418-.341-.90933-.341-1.474v-.143c0-.55733.1137-1.045.341-1.463.2347-.418.5573-.74067.968-.968.418-.22733.8983-.341 1.441-.341s1.0193.11367 1.43.341c.418.22733.7407.55.968.968.2347.418.352.90567.352 1.463v.143c0 .56467-.1173 1.056-.352 1.474-.2273.41067-.55.72967-.968.957-.4107.22733-.8873.341-1.43.341zm0-.781c.572 0 1.0267-.17967 1.364-.539.3447-.36667.517-.858.517-1.474v-.099c0-.616-.1723-1.10367-.517-1.463-.3373-.36667-.792-.55-1.364-.55-.5647 0-1.0193.18333-1.364.55-.3447.35933-.517.847-.517 1.463v.099c0 .616.1723 1.10733.517 1.474.3447.35933.7993.539 1.364.539z"/><path d="m88.5742 8.154c-.6673 0-1.232-.154-1.694-.462-.4547-.308-.7297-.79567-.825-1.463l.825-.187c.0587.352.1687.63067.33.836.1613.198.3593.341.594.429.242.08067.4987.121.77.121.4033 0 .7223-.08067.957-.242s.352-.37767.352-.649c0-.27867-.1137-.473-.341-.583-.22-.11733-.5243-.21267-.913-.286l-.451-.077c-.3447-.05867-.66-.15033-.946-.275s-.5133-.29333-.682-.506-.253-.48033-.253-.803c0-.484.187-.86167.561-1.133s.869-.407 1.485-.407c.6087 0 1.1.13933 1.474.418.3813.27133.627.65633.737 1.155l-.814.209c-.066-.38867-.2237-.66-.473-.814-.2493-.16133-.5573-.242-.924-.242s-.6563.06967-.869.209c-.2127.132-.319.33-.319.594 0 .25667.099.44733.297.572.2053.11733.4767.20533.814.264l.451.077c.3813.066.7223.15767 1.023.275.308.11.55.27133.726.484.1833.21267.275.49133.275.836 0 .528-.198.935-.594 1.221-.3887.286-.913.429-1.573.429z"/><path d="m92.208 8v-5.379h.847v.671h.154c.1026-.19067.2713-.36667.506-.528.2346-.16133.5646-.242.99-.242.418 0 .7553.09167 1.012.275.264.18333.4546.407.572.671h.154c.1246-.264.3116-.48767.561-.671.2566-.18333.6123-.275 1.067-.275.3593 0 .6746.07333.946.22.2713.14667.484.35933.638.638.1613.27133.242.59767.242.979v3.641h-.869v-3.564c0-.35933-.1064-.64167-.319-.847-.2054-.21267-.495-.319-.869-.319-.396 0-.7224.12833-.979.385-.2494.25667-.374.627-.374 1.111v3.234h-.869v-3.564c0-.35933-.1064-.64167-.319-.847-.2054-.21267-.495-.319-.869-.319-.396 0-.7224.12833-.979.385-.2494.25667-.374.627-.374 1.111v3.234z"/><path d="m104.158 8.154c-.543 0-1.023-.11367-1.441-.341-.411-.22733-.733-.54633-.968-.957-.227-.418-.341-.90933-.341-1.474v-.143c0-.55733.114-1.045.341-1.463.235-.418.557-.74067.968-.968.418-.22733.898-.341 1.441-.341s1.019.11367 1.43.341c.418.22733.741.55.968.968.235.418.352.90567.352 1.463v.143c0 .56467-.117 1.056-.352 1.474-.227.41067-.55.72967-.968.957-.411.22733-.887.341-1.43.341zm0-.781c.572 0 1.027-.17967 1.364-.539.345-.36667.517-.858.517-1.474v-.099c0-.616-.172-1.10367-.517-1.463-.337-.36667-.792-.55-1.364-.55-.565 0-1.019.18333-1.364.55-.345.35933-.517.847-.517 1.463v.099c0 .616.172 1.10733.517 1.474.345.35933.799.539 1.364.539z"/><path d="m108.208 5.338v-.154c0-.56467.113-1.04867.341-1.452.227-.40333.535-.715.924-.935.388-.22.814-.33 1.276-.33.564 0 .997.11 1.298.33.308.21267.535.451.682.715h.154v-.891h.825v6.633c0 .29333-.081.52433-.242.693-.162.1687-.396.253-.704.253h-3.652v-.77h3.421c.22 0 .33-.11.33-.33v-2.046h-.154c-.088.16133-.213.319-.374.473-.162.154-.371.28233-.627.385-.257.09533-.576.143-.957.143-.462 0-.888-.11-1.276-.33-.389-.22-.697-.53167-.924-.935-.228-.41067-.341-.89467-.341-1.452zm2.772 1.947c.557 0 1.008-.176 1.353-.528.352-.352.528-.836.528-1.452v-.088c0-.62333-.176-1.10733-.528-1.452-.345-.352-.796-.528-1.353-.528-.55 0-1.005.176-1.364.528-.352.34467-.528.82867-.528 1.452v.088c0 .616.176 1.1.528 1.452.359.352.814.528 1.364.528z"/><path d="m115.529 8v-5.379h.847v.66h.154c.096-.23467.242-.407.44-.517s.459-.165.781-.165h.638v.792h-.693c-.388 0-.704.11-.946.33-.234.21267-.352.54633-.352 1.001v3.278z"/><path d="m121.143 8.154c-.374 0-.715-.066-1.023-.198s-.55-.32267-.726-.572-.264-.55367-.264-.913c0-.36667.088-.66733.264-.902.176-.242.418-.42167.726-.539.308-.12467.653-.187 1.034-.187h1.815v-.396c0-.38133-.114-.682-.341-.902-.22-.22-.55-.33-.99-.33-.433 0-.77.10633-1.012.319-.242.20533-.407.484-.495.836l-.814-.264c.088-.30067.227-.572.418-.814.191-.24933.444-.44733.759-.594.323-.154.708-.231 1.155-.231.689 0 1.225.17967 1.606.539.381.352.572.85067.572 1.496v2.431c0 .22.103.33.308.33h.495v.737h-.759c-.242 0-.436-.066-.583-.198-.147-.13933-.22-.32267-.22-.55v-.055h-.132c-.081.13933-.191.286-.33.44-.132.14667-.315.26767-.55.363-.235.10267-.539.154-.913.154zm.099-.748c.513 0 .928-.15033 1.243-.451.323-.308.484-.737.484-1.287v-.121h-1.782c-.345 0-.631.077-.858.231-.22.14667-.33.37033-.33.671s.114.53533.341.704c.235.16867.535.253.902.253z"/><path d="m125.82 10.2v-7.579h.847v.891h.154c.14-.27133.363-.51333.671-.726.316-.21267.752-.319 1.309-.319.462 0 .884.11367 1.265.341.389.22.697.53533.924.946.235.41067.352.90567.352 1.485v.143c0 .572-.113 1.067-.341 1.485-.227.418-.535.737-.924.957-.381.22-.806.33-1.276.33-.374 0-.693-.05133-.957-.154-.256-.09533-.465-.22-.627-.374-.161-.154-.286-.31167-.374-.473h-.154v3.047zm2.75-2.816c.558 0 1.009-.176 1.353-.528.352-.35933.528-.858.528-1.496v-.099c0-.638-.176-1.133-.528-1.485-.344-.35933-.795-.539-1.353-.539-.55 0-1.004.17967-1.364.539-.352.352-.528.847-.528 1.485v.099c0 .638.176 1.13667.528 1.496.36.352.814.528 1.364.528z"/><path d="m132.899 8v-7.7h.869v3.179h.154c.074-.16133.184-.31167.33-.451.154-.14667.349-.26767.583-.363.242-.09533.547-.143.913-.143.404 0 .763.088 1.078.264.323.16867.58.418.77.748.191.32267.286.726.286 1.21v3.256h-.869v-3.19c0-.53533-.135-.924-.407-1.166-.264-.242-.623-.363-1.078-.363-.52 0-.946.16867-1.276.506-.322.33733-.484.83967-.484 1.507v2.706z"/><path d="m140.118 8.154c-.212 0-.392-.06967-.539-.209-.139-.13933-.209-.319-.209-.539s.07-.39967.209-.539c.147-.13933.327-.209.539-.209.22 0 .4.06967.539.209.14.13933.209.319.209.539s-.069.39967-.209.539c-.139.13933-.319.209-.539.209z"/><path d="m144.078 8.154c-.374 0-.715-.066-1.023-.198s-.55-.32267-.726-.572-.264-.55367-.264-.913c0-.36667.088-.66733.264-.902.176-.242.418-.42167.726-.539.308-.12467.652-.187 1.034-.187h1.815v-.396c0-.38133-.114-.682-.341-.902-.22-.22-.55-.33-.99-.33-.433 0-.77.10633-1.012.319-.242.20533-.407.484-.495.836l-.814-.264c.088-.30067.227-.572.418-.814.19-.24933.443-.44733.759-.594.322-.154.707-.231 1.155-.231.689 0 1.224.17967 1.606.539.381.352.572.85067.572 1.496v2.431c0 .22.102.33.308.33h.495v.737h-.759c-.242 0-.437-.066-.583-.198-.147-.13933-.22-.32267-.22-.55v-.055h-.132c-.081.13933-.191.286-.33.44-.132.14667-.316.26767-.55.363-.235.10267-.539.154-.913.154zm.099-.748c.513 0 .927-.15033 1.243-.451.322-.308.484-.737.484-1.287v-.121h-1.782c-.345 0-.631.077-.858.231-.22.14667-.33.37033-.33.671s.113.53533.341.704c.234.16867.535.253.902.253z"/><path d="m148.755 10.2v-7.579h.847v.891h.154c.139-.27133.363-.51333.671-.726.315-.21267.752-.319 1.309-.319.462 0 .884.11367 1.265.341.389.22.697.53533.924.946.235.41067.352.90567.352 1.485v.143c0 .572-.114 1.067-.341 1.485s-.535.737-.924.957c-.381.22-.807.33-1.276.33-.374 0-.693-.05133-.957-.154-.257-.09533-.466-.22-.627-.374s-.286-.31167-.374-.473h-.154v3.047zm2.75-2.816c.557 0 1.008-.176 1.353-.528.352-.35933.528-.858.528-1.496v-.099c0-.638-.176-1.133-.528-1.485-.345-.35933-.796-.539-1.353-.539-.55 0-1.005.17967-1.364.539-.352.352-.528.847-.528 1.485v.099c0 .638.176 1.13667.528 1.496.359.352.814.528 1.364.528z"/><path d="m155.834 10.2v-7.579h.847v.891h.154c.139-.27133.363-.51333.671-.726.315-.21267.752-.319 1.309-.319.462 0 .884.11367 1.265.341.389.22.697.53533.924.946.235.41067.352.90567.352 1.485v.143c0 .572-.114 1.067-.341 1.485s-.535.737-.924.957c-.381.22-.807.33-1.276.33-.374 0-.693-.05133-.957-.154-.257-.09533-.466-.22-.627-.374s-.286-.31167-.374-.473h-.154v3.047zm2.75-2.816c.557 0 1.008-.176 1.353-.528.352-.35933.528-.858.528-1.496v-.099c0-.638-.176-1.133-.528-1.485-.345-.35933-.796-.539-1.353-.539-.55 0-1.005.17967-1.364.539-.352.352-.528.847-.528 1.485v.099c0 .638.176 1.13667.528 1.496.359.352.814.528 1.364.528z"/><path d="m71.6368 9.375h90.3682v.55h-90.3682z"/></g></svg>',"image/svg+xml").firstChild;null==(e=this._attributionDivElement)||e.appendChild(t),this._containerElement.appendChild(this._attributionDivElement)}_addMessageElement(){this._messageDivElement=document.createElement("div"),this._messageDivElement.classList.add("style_module_message__8ee622df"),this._containerElement.appendChild(this._messageDivElement),this._updateMessage(" Initializing Cosmograph...")}async _initializeCosmos(){const{_config:e}=this;this._cosmos&&(this._cosmos.destroy(),this._cosmosInitialized=!1),this._pointsHaveLayout=await(async(e,t,n)=>{if(!(null==n?void 0:n.pointXBy)||!(null==n?void 0:n.pointYBy))return!1;const i=await Tle(e,t);return i.includes(n.pointXBy)&&i.includes(n.pointYBy)})(this._dbCoordinator,this.pointsTableName,e),this._enableSimulation=e.enableSimulation??(!!e.links||!this._pointsHaveLayout),this._configManager.cosmosConfig.enableSimulation=this._enableSimulation,this._cosmos=new TK(this._cosmosElement,this._configManager.cosmosConfig),this._cosmosInitialized=!0}_ensureAlive(){return!this._isDestroyed&&!!this._containerElement.isConnected}_updateMessage(e,t){if(!this._messageDivElement)return;const n=this._configManager.config.statusIndicatorMode??"spinner";if(!1===n||"spinner"===n&&t||null===e)this._messageDivElement.style.display="none";else if(this._messageDivElement.style.display="block","spinner"===n){const t=e.startsWith("");if(this._messageDivElement.classList.toggle(cue,t),t){if(this._messageDivElement.innerText!==e||this._messageDivElement.querySelector(`.${uue}`)){this._messageDivElement.innerHTML="";const t=document.createElement("div");t.classList.add("style_module_messagePre__8ee622df"),t.innerText=e,this._messageDivElement.appendChild(t)}}else if(!this._messageDivElement.querySelector(`.${uue}`)){this._messageDivElement.innerHTML="";const e=document.createElement("div");e.classList.add(uue),this._messageDivElement.appendChild(e)}}else this._messageDivElement.classList.remove(cue),(this._messageDivElement.textContent!==e||this._messageDivElement.querySelector(`.${uue}`))&&(this._messageDivElement.innerHTML="",this._messageDivElement.innerText=e)}async _updateSummary(){this._dbCoordinator&&(this._summary={pointsSummary:await Cle(this._dbCoordinator,this.pointsTableName),linksSummary:this._config.links?await Cle(this._dbCoordinator,this.linksTableName):void 0})}_updateStats(){var e,t;const{pointsSummary:n,linksSummary:i}=this._summary;this._stats={pointsCount:(null==(e=this._cosmos)?void 0:e.graph.pointsNumber)??0,linksCount:(null==(t=this._cosmos)?void 0:t.graph.linksNumber)??0,pointsSummary:n,linksSummary:i}}async _dbReady(){return this._dbReadinessPromise?await this._dbReadinessPromise:new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Cosmograph: Database initialization timeout"))},3e4),i=()=>{this._dbReadinessPromise?(clearTimeout(n),this._dbReadinessPromise.then(e).catch(t)):setTimeout(i,10)};i()})}async dataUploaded(){return await this._dataManager.dataReady()}get _config(){return this._configManager.config}get stats(){return this._stats}get crossfilter(){return this._crossfilter.filtered}get maxPointSize(){var e;return(null==(e=this._cosmos)?void 0:e.maxPointSize)??0}get progress(){var e;return null==(e=this._cosmos)?void 0:e.progress}get isSimulationRunning(){var e;return null==(e=this._cosmos)?void 0:e.isSimulationRunning}get isSimulationAvailable(){return this._enableSimulation}get pointDegrees(){var e;return null==(e=this._cosmos)?void 0:e.graph.degree}get pointDirections(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.graph.inDegree)?void 0:t.map((e,t)=>{var n,i;const r=null==(i=null==(n=this._cosmos)?void 0:n.graph.outDegree)?void 0:i[t],o=null!==e&&0!==e,s=null!==r&&0!==r;return o&&s?1:s?0:o?2:3})}get rescaleXFn(){var e;return null==(e=this._cosmos)?void 0:e.getScaleX()}get rescaleYFn(){var e;return null==(e=this._cosmos)?void 0:e.getScaleY()}get focusedPointIndex(){return this._config.focusedPointIndex??this._focusedPointIndex}get clusterMapping(){return this._configManager.clusterMapping}get activePointColorStrategy(){return this._configManager.activePointColorStrategy}get activePointSizeStrategy(){return this._configManager.activePointSizeStrategy}get activeLinkColorStrategy(){return this._configManager.activeLinkColorStrategy}get activeLinkWidthStrategy(){return this._configManager.activeLinkWidthStrategy}get linksTableName(){var e;return(null==(e=this._dbCoordinator)?void 0:e.internalDB)||"string"!=typeof this._config.links?One.Links:this._config.links}get pointsTableName(){var e;return(null==(e=this._dbCoordinator)?void 0:e.internalDB)||"string"!=typeof this._config.points?One.Points:this._config.points}async getConfig(){return await this._configManager.configUpdated(),this._configManager.config}async getActivePointColorFn(){return await this._configManager.configUpdated(),this._configManager.activePointColorFn}async getActivePointSizeFn(){return await this._configManager.configUpdated(),this._configManager.activePointSizeFn}async getActiveLinkColorFn(){return await this._configManager.configUpdated(),this._configManager.activeLinkColorFn}async getActiveLinkWidthFn(){return await this._configManager.configUpdated(),this._configManager.activeLinkWidthFn}setConfig(e){return this._configManager.setConfig(e),this._configManager.configUpdated()}captureScreenshot(e="cosmograph-screenshot.png"){var t;const n=null==(t=this._cosmosElement)?void 0:t.querySelector("canvas");if(!n)return;const i=document.createElement("a");i.download=e,i.href=n.toDataURL("image/png"),i.click()}getPointPositions(){var e;return null==(e=this._cosmos)?void 0:e.getPointPositions()}getClusterPositions(){var e;return null==(e=this._cosmos)?void 0:e.getClusterPositions()}getPointColors(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getPointColors)?void 0:t.call(e)}getPointSizes(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getPointSizes)?void 0:t.call(e)}getLinkColors(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getLinkColors)?void 0:t.call(e)}getLinkWidths(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getLinkWidths)?void 0:t.call(e)}setPointShapes(e){var t;null==(t=this._cosmos)||t.setPointShapes(new Float32Array(e))}setPointImageIndices(e){var t;null==(t=this._cosmos)||t.setPointImageIndices(new Float32Array(e))}setPointImageSizes(e){var t;null==(t=this._cosmos)||t.setPointImageSizes(new Float32Array(e))}setImageData(e){var t;null==(t=this._cosmos)||t.setImageData([e])}getPointPositionByIndex(e){var t;const n=null==(t=this._cosmos)?void 0:t.getPointPositions();if(!n||!n.length)return;const i=n[2*e],r=n[2*e+1];return null==i||null==r?void 0:[i,r]}activateRectSelection(){this._rectangularSelection.enable(),this._polygonalSelection.disable()}deactivateRectSelection(){this._rectangularSelection.disable()}activatePolygonalSelection(){this._polygonalSelection.enable(),this._rectangularSelection.disable()}deactivatePolygonalSelection(){this._polygonalSelection.disable()}getSelectedPointIndices(){var e;return(null==(e=this._cosmos)?void 0:e.getSelectedIndices())??void 0}getSelectedLinkIndices(){var e,t;const n=null==(e=this._cosmos)?void 0:e.getSelectedIndices();if(!n||0===n.length)return;const i=null==(t=this._cosmos)?void 0:t.graph.sourceIndexToTargetIndices;if(!i)return;const r=new Set(n),o=new Set;for(let s=0;s<n.length;s++){const e=i[n[s]];if(e)for(let t=0;t<e.length;t++){const[n,i]=e[t];r.has(n)&&o.add(i)}}return o.size?Array.from(o):void 0}selectPointsInRect(e,t=!1){if(!this._cosmos||!e)return;const n=this._cosmos.getPointsInRect(e);this.selectPoints(Array.from(n),t)}selectPointsInPolygon(e,t=!1){if(!this._cosmos||!e.length)return;const n=this._cosmos.getPointsInPolygon(e);this.selectPoints(Array.from(n),t)}unselectPointsInRect(e){if(!this._cosmos||!e)return;const t=this._cosmos.getPointsInRect(e);this.unselectPointsByIndices(Array.from(t))}unselectPointsInPolygon(e){if(!this._cosmos||!e.length)return;const t=this._cosmos.getPointsInPolygon(e);this.unselectPointsByIndices(Array.from(t))}selectPoints(e,t=!1){var n,i;this._cosmos&&((null==e?void 0:e.length)?(t&&(e=[...this._cosmos.getSelectedIndices()||[],...e]),null==(n=this._pointSelectionClient)||n.selectPoints(e)):null==(i=this._pointSelectionClient)||i.selectPoints(void 0))}selectPoint(e,t=!1,n=!0===this._config.selectPointOnClick){var i,r;if(this._cosmos&&(void 0!==e||!t))if(void 0!==e){let r=[e];if(t&&(r=[...this._cosmos.getSelectedIndices()||[],e]),n){const t=this._cosmos.getAdjacentIndices(e);r=[...r,...t]}null==(i=this._pointSelectionClient)||i.selectPoints(r)}else this._config.resetSelectionOnEmptyCanvasClick&&(null==(r=this._pointSelectionClient)||r.selectPoints(void 0))}unselectPoint(e,t=!0===this._config.selectPointOnClick){var n;if(!this._cosmos||void 0===e)return;const i=this._cosmos.getSelectedIndices()||[];if(0===i.length||!i.includes(e))return;let r=i.filter(t=>t!==e);if(t){const t=this._cosmos.getAdjacentIndices(e);r=r.filter(e=>!t.includes(e))}this._focusedPointIndex&&!r.includes(this._focusedPointIndex)&&this.setFocusedPoint(void 0),null==(n=this._pointSelectionClient)||n.selectPoints(r.length?r:void 0)}unselectPointsByIndices(e){var t;if(!this._cosmos)return;const n=this._cosmos.getSelectedIndices()||[];if(0===n.length)return;const i=n.filter(t=>!e.includes(t));this._focusedPointIndex&&!i.includes(this._focusedPointIndex)&&this.setFocusedPoint(void 0),null==(t=this._pointSelectionClient)||t.selectPoints(i.length?i:void 0)}unselectAllPoints(){var e;this._cosmos&&(this.focusedPointIndex&&this.setFocusedPoint(void 0),null==(e=this._pointSelectionClient)||e.selectPoints(void 0),this._internalApi.dispatchEvent(new CustomEvent("resetSelections")))}setFocusedPoint(e){var t,n;this._focusedPointIndex=this._config.focusedPointIndex??e,this._cosmos&&!this._config.focusedPointIndex&&(null==(t=this._cosmos)||t.setConfig({focusedPointIndex:this._focusedPointIndex}),null==(n=this._labels)||n.render())}setPinnedPoints(e){var t;null==(t=this._cosmos)||t.setPinnedPoints(e)}start(e){var t;!1!==this._enableSimulation&&this._cosmos&&(null==(t=this._cosmos)||t.start(e),this._internalApi.dispatchEvent(new CustomEvent("onSimulationStart")))}pause(){var e;!1!==this._enableSimulation&&this._cosmos&&(null==(e=this._cosmos)||e.pause(),this._internalApi.dispatchEvent(new CustomEvent("onSimulationPause")))}unpause(){var e;!1!==this._enableSimulation&&this._cosmos&&(null==(e=this._cosmos)||e.unpause(),this._internalApi.dispatchEvent(new CustomEvent("onSimulationStart")))}restart(){this.unpause()}stop(){var e;!1!==this._enableSimulation&&this._cosmos&&(null==(e=this._cosmos)||e.stop(),this._internalApi.dispatchEvent(new CustomEvent("onSimulationPause")))}step(){var e;null==(e=this._cosmos)||e.step()}setZoomLevel(e,t=0){var n;null==(n=this._cosmos)||n.setZoomLevel(e,t)}getZoomLevel(){var e;return null==(e=this._cosmos)?void 0:e.getZoomLevel()}zoomToPoint(e,t=this._config.fitViewDuration,n,i){var r;null==(r=this._cosmos)||r.zoomToPointByIndex(e,t,n,i)}fitView(e=this._config.fitViewDuration,t=this._config.fitViewPadding){var n;null==(n=this._cosmos)||n.fitView(e,t)}fitViewByIndices(e,t=this._config.fitViewDuration,n=this._config.fitViewPadding){var i;null==(i=this._cosmos)||i.fitViewByPointIndices(e,t,n)}fitViewByCoordinates(e,t=this._config.fitViewDuration,n=this._config.fitViewPadding){var i;null==(i=this._cosmos)||i.fitViewByPointPositions(e,t,n)}getConnectedPointIndices(e){var t;return null==(t=this._cosmos)?void 0:t.getAdjacentIndices(e)}getPointDegrees(e){var t,n;if(this._cosmos)return{inDegree:(null==(t=this._cosmos.graph.inDegree)?void 0:t[e])??0,outDegree:(null==(n=this._cosmos.graph.outDegree)?void 0:n[e])??0}}spaceToScreenPosition(e){var t;return null==(t=this._cosmos)?void 0:t.spaceToScreenPosition(e)}screenToSpacePosition(e){var t;return null==(t=this._cosmos)?void 0:t.spaceToScreenPosition(e)}spaceToScreenRadius(e){var t;return null==(t=this._cosmos)?void 0:t.spaceToScreenRadius(e)}getPointRadiusByIndex(e){var t;return null==(t=this._cosmos)?void 0:t.getPointRadiusByIndex(e)}getPointScreenRadiusByIndex(e){var t,n;const i=(null==(t=this._cosmos)?void 0:t.config.pointSizeScale)??1,r=null==(n=this._cosmos)?void 0:n.getPointRadiusByIndex(e);if(!r)return 0;const o=r*i,{scalePointsOnZoom:s}=this._config,a=this.getZoomLevel(),l=this.maxPointSize;return s?Math.min(o*a,l):o}trackPointPositionsByIndices(e){var t;null==(t=this._cosmos)||t.trackPointPositionsByIndices(e)}getTrackedPointPositionsArray(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getTrackedPointPositionsArray)?void 0:t.call(e)}getTrackedPointPositionsMap(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getTrackedPointPositionsMap)?void 0:t.call(e)}getSampledPoints(){var e,t;return null==(t=null==(e=this._cosmos)?void 0:e.getSampledPoints)?void 0:t.call(e)}getSampledPointPositionsMap(){var e;if(this._cosmosInitialized)return null==(e=this._cosmos)?void 0:e.getSampledPointPositionsMap()}getActiveSelectionSourceId(){const e=this._crossfilter.pointsSelection.active,t=null==e?void 0:e.source;return null==t?void 0:t.id}get pointsSelection(){return this._crossfilter.pointsSelection}get linksSelection(){return this._crossfilter.linksSelection}async getPointIndicesByIds(e){if(this._dbCoordinator&&this.stats.pointsCount&&e.length)return await Mle(this._dbCoordinator,this.pointsTableName,this._config,e)}async getPointIdsByIndices(e){if(this._dbCoordinator&&this.stats.pointsCount&&e.length)return await Dle(this._dbCoordinator,this.pointsTableName,this._config,e)}async getPointsByIndices(e){if(this._dbCoordinator&&this.stats.pointsCount&&e.length)return await(async(e,t,n,i)=>{const r=i.join(", ");return await e.query(`SELECT * FROM ${t} WHERE "${n}" IN (${r})`)})(this._dbCoordinator,this.pointsTableName,this._config.pointIndexBy,e)}async getPointIndicesByExactValues(e,t){if(this._dbCoordinator&&this.stats.pointsCount)return t.length?await(async(e,t,n,i,r)=>{var o;const s=r.map(e=>"string"==typeof e?`${Kte(e)}`:e),a=`SELECT "${n.pointIndexBy}" FROM ${t} WHERE "${i}" IN (${s.join(", ")})`,l=await e.query(a);return l?(null==(o=l.getChildAt(0))?void 0:o.toArray())??[]:void 0})(this._dbCoordinator,this.pointsTableName,this._config,e,t):[]}async getPointIndicesByNumericValue(e,t,n){if(this._dbCoordinator&&this.stats.pointsCount)return t?await(async(e,t,n,i,r,o)=>{var s;const a=o?">=":"<=",l=`SELECT "${n.pointIndexBy}" FROM ${t} WHERE "${i}" ${a} ${r}`,c=await e.query(l);if(c)return(null==(s=c.getChildAt(0))?void 0:s.toArray())??[]})(this._dbCoordinator,this.pointsTableName,this._config,e,t,n):[]}async getPointIndicesByLinksExactValues(e,t){if(this._dbCoordinator&&this.stats.linksCount)return t.length?await(async(e,t,n,i,r)=>{const o=r.map(e=>"string"==typeof e?`${Kte(e)}`:e),s=`SELECT "${n.linkSourceIndexBy}", "${n.linkTargetIndexBy}" FROM ${t} WHERE "${i}" IN (${o.join(", ")})`;return Fle(e,s)})(this._dbCoordinator,this.linksTableName,this._config,e,t):[]}async getPointIndicesByLinksNumericValue(e,t,n){if(this._dbCoordinator&&this.stats.linksCount)return t?await(async(e,t,n,i,r,o)=>{const s=o?">=":"<=",a=`SELECT "${n.linkSourceIndexBy}", "${n.linkTargetIndexBy}" FROM ${t} WHERE "${i}" ${s} ${r}`;return Fle(e,a)})(this._dbCoordinator,this.linksTableName,this._config,e,t,n):[]}async getLinksByPointIds(e){if(this._dbCoordinator&&this.stats.linksCount&&e.length)return await(async(e,t,n,i)=>{const r=i.map(e=>"string"==typeof e?`${Kte(e)}`:e);return await e.query(`SELECT * FROM ${t} WHERE "${n.linkSourceBy}" IN (${r}) OR "${n.linkTargetBy}" IN (${r})`)})(this._dbCoordinator,this.pointsTableName,this._config,e)}async getLinksByPointIndices(e){if(this._dbCoordinator&&this.stats.linksCount&&e.length)return await(async(e,t,n,i)=>{const r=i.join(", ");return await e.query(`SELECT * FROM ${t} WHERE "${n.linkSourceIndexBy}" IN (${r}) OR "${n.linkTargetIndexBy}" IN (${r})`)})(this._dbCoordinator,this.pointsTableName,this._config,e)}async getLinksData(){if(this._dbCoordinator&&this.stats.linksCount)return await Ble(this._dbCoordinator,this.linksTableName)}async getPointsData(){if(this._dbCoordinator&&this.stats.pointsCount)return await Ole(this._dbCoordinator,this.pointsTableName)}convertCosmographDataToObject(e){return qte(e)}flattenPositions(e){var t;return null==(t=this._cosmos)?void 0:t.flatten(e)}pair(e){var t;return null==(t=this._cosmos)?void 0:t.pair(e)}async addPoints(e){await this._dataManager.addPoints(e)}async addLinks(e){await this._dataManager.addLinks(e)}async removePointsByIndices(e,t=!0){await this._dataManager.removePointsByIndices(e,t)}async removePointsByIds(e){await this._dataManager.removePointsByIds(e)}async removeLinksByPointIdPairs(e){await this._dataManager.removeLinksByPointIdPairs(e)}async removeLinksByPointIndicesPairs(e){await this._dataManager.removeLinksByPointIndicesPairs(e)}async addMosaicComponent(e,t,n){if(await this._dataManager.dataReady(),this._ensureAlive()){if(this._mosaicComponentManager)return await this._mosaicComponentManager.addComponent(e,t,n);Wte(0,0,"error")}}async removeMosaicComponent(e){return this._mosaicComponentManager?await this._mosaicComponentManager.removeComponent(e):(Wte(0,0,"error"),!1)}getMosaicComponents(){var e;return null==(e=this._mosaicComponentManager)?void 0:e.components}async reset(e=!0){var t,n,i,r,o;e&&(this._configManager.resetCosmographConfig(),this._messageDivElement.innerText=" Cosmograph is ready, load your data!",this._messageDivElement.style.display="block"),null==(t=this._labels)||t.clear(),this._configManager.clearCosmosBuffers(),null==(n=this._cosmos)||n.render(),await this._dropLocalTables(),null==(i=this._dbCoordinator)||i.clearCache(),this._linkAggregationManager.clear(),this._stats={pointsCount:0,linksCount:0,pointsSummary:void 0,linksSummary:void 0},await(null==(r=this._mosaicComponentManager)?void 0:r.destroyAll()),null==(o=this._pointSelectionClient)||o.destroy(),this._pointSelectionClient=void 0,this._internalApi.dispatchEvent(new CustomEvent("reset")),this._internalApi.dispatchEvent(new CustomEvent("dataUploaded"))}async destroy(){var e,t,n,i,r;Wte(0,0,"warn"),this._isDestroyed?Wte(0,0,"warn"):(this._isDestroyed=!0,this._internalApi.dispatchEvent(new CustomEvent("reset")),null==(e=this._labels)||e.destroy(),null==(t=this._cosmos)||t.destroy(),this._cosmos=void 0,await this._dropLocalTables(),await(null==(n=this._dbCoordinator)?void 0:n.destroy()),this._dbCoordinator=void 0,this._linkAggregationManager.clear(),this._containerElement.innerHTML="",this._rectangularSelection.destroy(),this._polygonalSelection.destroy(),await(null==(i=this._mosaicComponentManager)?void 0:i.destroyAll()),this._mosaicComponentManager=void 0,null==(r=this._pointSelectionClient)||r.destroy(),this._pointSelectionClient=void 0,delete window.cosmographDisableLogging)}}const hue=Yte(),fue=async(e,t)=>{const n=await e.query(`DESCRIBE ${t}`);return new Map((null==n?void 0:n.toArray().map(e=>[e.column_name,e.column_type]))??[])},pue=(e,t)=>({existing:[...new Set(e.filter(e=>t.has(e.name)).map(e=>e.name))],missing:e.filter(e=>!t.has(e.name))}),mue=async(e,t)=>{var n,i,r,o;const s=await fue(e,One.RawPoints),{missing:a}=pue((e=>{const{pointIdBy:t,linkSourceBy:n,linkTargetsBy:i}=e;return t?[{prop:"pointIdBy",name:t}]:n&&i?[{prop:"linkSourceBy",name:n},...i.map(e=>({prop:"linkTargetBy",name:e}))]:[{prop:"pointIdBy",name:t??"undefined"}]})(t),s);if(a.length>0)return{missingRequiredColumns:a,missingOptionalColumns:[],processedFully:!0,pointsAdded:!1};const{existing:l,missing:c}=pue((e=>{const{pointSizeBy:t,pointColorBy:n,pointClusterBy:i,pointClusterStrengthBy:r,pointLabelBy:o,pointLabelWeightBy:s,pointXBy:a,pointYBy:l,pointIncludeColumns:c=[]}=e;return[...t?[{prop:"pointSizeBy",name:t}]:[],...n?[{prop:"pointColorBy",name:n}]:[],...i?[{prop:"pointClusterBy",name:i}]:[],...r?[{prop:"pointClusterStrengthBy",name:r}]:[],...o?[{prop:"pointLabelBy",name:o}]:[],...s?[{prop:"pointLabelWeightBy",name:s}]:[],...[...new Set(c)].map(e=>({prop:"pointIncludeColumns",name:e})),...a&&l?[{prop:"pointXBy",name:a},{prop:"pointYBy",name:l}]:[]]})(t),s),u=l.filter(e=>e!==Mne.Id);if(await e.exec(`\n    BEGIN;\n    DROP SEQUENCE IF EXISTS ${Mne.Sequence} CASCADE;\n    CREATE SEQUENCE ${Mne.Sequence} MINVALUE 0;\n    CREATE TABLE ${One.PreparedPoints} (\n      ${Mne.Id} VARCHAR,\n      ${Mne.Idx} INT DEFAULT nextval('${Mne.Sequence}')\n    );\n    COMMIT;\n  `),u.length>0){const t=u.map(e=>`ALTER TABLE ${One.PreparedPoints} ADD COLUMN IF NOT EXISTS "${e}" ${s.get(e)};`).join("\n");await e.exec(t)}const{pointIdBy:d,linkSourceBy:h,linkTargetsBy:f}=t,p=h&&f?[h,...f]:[d],m=null==(i=null==(n=await e.query(`SELECT COUNT(*) as cnt FROM ${One.RawPoints}`))?void 0:n.getChild("cnt"))?void 0:i.get(0);let g=!0;if(1===p.length&&m>25e4)try{await(async(e,t,n,i)=>{let r=0;for(;r<i;)await e.exec(`\n      CREATE TEMP TABLE chunk_temp AS \n      SELECT "${t}" AS ${Mne.Id}, ${n.map(e=>`"${e}"`).join(", ")}\n      FROM ${One.RawPoints}\n      WHERE "${t}" IS NOT NULL\n      LIMIT 250000\n    `),await e.exec(`INSERT INTO ${One.PreparedPoints} (${[`"${Mne.Id}"`,...n.map(e=>`"${e}"`)].join(", ")}) SELECT * FROM chunk_temp`),await e.exec(`DELETE FROM ${One.RawPoints} WHERE "${t}" IN (SELECT ${Mne.Id} FROM chunk_temp)`),await e.exec("DROP TABLE chunk_temp"),r+=25e4})(e,p[0],u,m),(null==(o=null==(r=await e.query(`SELECT COUNT(*) as cnt FROM ${One.RawPoints}`))?void 0:r.getChild("cnt"))?void 0:o.get(0))>0&&(g=!1)}catch(qn){g=!1}else{const t=`\n      INSERT INTO ${One.PreparedPoints} (${[Mne.Id,...u].map(e=>`"${e}"`).join(", ")})\n      SELECT DISTINCT ON (${Mne.Id}) combined_points.*\n      FROM (\n        ${p.map(e=>`\n          SELECT "${e}" AS ${Mne.Id}${u.length>0?`, ${u.map(e=>`"${e}"`).join(", ")}`:""}\n          FROM ${One.RawPoints}\n          WHERE "${e}" IS NOT NULL\n        `).join(" UNION ALL ")}\n      ) AS combined_points\n    `;await e.exec(t)}return hue&&await e.logTable(One.PreparedPoints),{missingRequiredColumns:[],missingOptionalColumns:c,processedFully:g,pointsAdded:!1}},gue=async(e,t)=>{var n;const{linkSourceBy:i=Mne.Source,linkTargetsBy:r=[Mne.Target],linkIncludeColumns:o=[],linkColorBy:s,linkWidthBy:a,linkArrowBy:l,linkStrengthBy:c}=t;if(!(null==r?void 0:r.length))return{missingRequiredColumns:[],missingOptionalColumns:[],processedFully:!0,pointsAdded:!1};const u=await fue(e,One.RawLinks),d=[{prop:"linkSourceBy",name:i},...r.map(e=>({prop:"linkTargetsBy",name:e}))],{missing:h}=pue(d,u);if(h.length>0)return{missingRequiredColumns:h,missingOptionalColumns:[],processedFully:!0,pointsAdded:!1};const f=[...s?[{prop:"linkColorBy",name:s}]:[],...a?[{prop:"linkWidthBy",name:a}]:[],...l?[{prop:"linkArrowBy",name:l}]:[],...c?[{prop:"linkStrengthBy",name:c}]:[],...o.map(e=>({prop:"linkIncludeColumns",name:e}))],{existing:p,missing:m}=pue(f,u),g=[Mne.SourceIdx,Mne.TargetIdx,Mne.Source,Mne.Target],_=p.filter(e=>!g.includes(e));if(await e.exec(`\n    CREATE TABLE IF NOT EXISTS ${One.PreparedLinks} (\n      ${Mne.SourceIdx} INTEGER,\n      ${Mne.TargetIdx} INTEGER,\n      ${Mne.Source} VARCHAR,\n      ${Mne.Target} VARCHAR\n    );\n  `.trim()),_.length>0){const t=_.map(e=>`ALTER TABLE ${One.PreparedLinks} ADD COLUMN IF NOT EXISTS "${e}" ${u.get(e)||"VARCHAR"};`).join("\n");await e.exec(t)}await e.exec(`\n    CREATE TEMP TABLE temp_points AS\n    SELECT ${Mne.Id}, ${Mne.Idx}\n    FROM ${One.PreparedPoints}\n  `.trim());let y=!1;if(t.createMissingPoints){const t=[i,...r].map(e=>`\n    SELECT DISTINCT "${e}"::text as ${Mne.Id}\n    FROM ${One.RawLinks}\n    WHERE "${e}" IS NOT NULL\n  `).join(" UNION "),o=await e.query(`\n    SELECT COUNT(*) as cnt\n    FROM (${t}) all_ids\n    WHERE ${Mne.Id} NOT IN (SELECT ${Mne.Id} FROM temp_points)\n  `.trim()),s=(null==(n=null==o?void 0:o.getChild("cnt"))?void 0:n.get(0))||0;y=s>0,s>0&&(await e.exec(`\n      CREATE TEMP TABLE missing_ids AS\n      SELECT DISTINCT ${Mne.Id}\n      FROM (${t}) all_ids\n      WHERE ${Mne.Id} NOT IN (SELECT ${Mne.Id} FROM temp_points)\n    `.trim()),await e.exec(`\n      CREATE TEMP TABLE missing_ids_with_idx AS\n      SELECT ${Mne.Id},\n             ROW_NUMBER() OVER (ORDER BY ${Mne.Id}) + (SELECT COALESCE(MAX(${Mne.Idx}), 0) FROM ${One.PreparedPoints}) as ${Mne.Idx}\n      FROM missing_ids\n    `.trim()),await e.exec(`\n      INSERT INTO ${One.PreparedPoints} (${Mne.Id}, ${Mne.Idx})\n      SELECT ${Mne.Id}, ${Mne.Idx} FROM missing_ids_with_idx\n    `.trim()),await e.exec("DROP TABLE temp_points"),await e.exec(`\n      CREATE TEMP TABLE temp_points AS\n      SELECT ${Mne.Id}, ${Mne.Idx}\n      FROM ${One.PreparedPoints}\n    `.trim()),await e.exec("DROP TABLE missing_ids"),await e.exec("DROP TABLE missing_ids_with_idx"))}const v=[Mne.SourceIdx,Mne.TargetIdx,Mne.Source,Mne.Target,..._];for(const b of r){const t=`\n      INSERT INTO ${One.PreparedLinks} (${v.map(e=>`"${e}"`).join(", ")})\n      SELECT DISTINCT\n        sp.${Mne.Idx} AS ${Mne.SourceIdx},\n        tp.${Mne.Idx} AS ${Mne.TargetIdx},\n        d."${i}" AS ${Mne.Source},\n        d."${b}" AS ${Mne.Target}\n        ${_.length>0?`, ${_.map(e=>`d."${e}"`).join(", ")}`:""}\n      FROM ${One.RawLinks} d\n      INNER JOIN temp_points sp ON sp.${Mne.Id} = d."${i}"::text\n      INNER JOIN temp_points tp ON tp.${Mne.Id} = d."${b}"::text\n    `;await e.exec(t.trim())}return await e.exec("DROP TABLE temp_points"),hue&&await(null==e?void 0:e.logTable(One.PreparedLinks)),{missingRequiredColumns:[],missingOptionalColumns:m,processedFully:!0,pointsAdded:y}};let _ue,yue=null;const vue=async(e,t,n=!1)=>{switch(e){case Dne.Parquet:return await _ue.exportTableToPq(t)??new Uint8Array;case Dne.Arrow:return n?await _ue.exportTableToArrow(t)??new G9:await _ue.exportTableToArrowBuffer(t)??new Uint8Array;case Dne.CSV:return await _ue.exportTableToCSV(t)??new Uint8Array;default:throw new Error(`Unsupported format: ${e}`)}},bue=async(e,t,n,i,r,o,s,a=!1)=>{const{ok:l,processedFully:c,pointsAdded:u}=await(async(e,t,n,i)=>{try{let r;if(r=Array.isArray(e)?await _ue.uploadObject(e,t):await _ue.uploadData(e,t,!1,i.csvParseTimeFormat,i.csvColumnTypesMap),null==r?void 0:r.error)return Wte(r.error,0,"error"),{ok:!1,processedFully:!0,pointsAdded:!1};"pointIdBy"in i&&(void 0!==i.pointIdBy||i.linkSourceBy||i.linkTargetsBy||(Wte(0,0,"warn"),await _ue.query(`ALTER TABLE ${t} ADD COLUMN ${Mne.Id} INTEGER; UPDATE ${t} SET ${Mne.Id} = rowid;`),await _ue.logTable(t),i.pointIdBy=Mne.Id));const{missingRequiredColumns:o,missingOptionalColumns:s,processedFully:a,pointsAdded:l}=await n(_ue,i);return o.length>0?(Wte(o.map(e=>`'${e.name}' (\`${e.prop}\`)`).join(", "),0,"error"),{ok:!1,processedFully:a,pointsAdded:l??!1}):s.length>0?(Wte(s.map(e=>`'${e.name}' (\`${e.prop}\`)`).join(", "),0,"warn"),{ok:!0,processedFully:a,pointsAdded:l??!1}):{ok:!0,processedFully:a,pointsAdded:l??!1}}catch(r){return{ok:!1,processedFully:!0,pointsAdded:!1}}})(e,t,i,r);if(!l)return void Wte(0,0,"error");await _ue.dropTable(t);const d=await vue(o,n,a),h=await _ue.query(`SUMMARIZE ${n}`);return d instanceof Uint8Array&&d.length||d instanceof G9&&d.numRows?{data:s(d),summary:null==h?void 0:h.toArray(),processedFully:c,pointsAdded:u}:void Wte(d instanceof Uint8Array?d.length:d instanceof G9&&d.numRows,0,"warn")},xue=async(e,t,n)=>(async e=>yue||(Wte(0,0,"util"),yue=(async()=>{try{const t=await e();return t&&Wte(0,0,"util"),t}catch(t){return void Wte(0,0,"error")}finally{yue=null}})(),yue))(()=>(async(t,n,i,r,o,s=!1)=>{let a,l;await(async()=>{_ue=await Hne.getInstance()})(),await _ue.query(`DROP TABLE IF EXISTS ${One.PreparedPoints}`),await _ue.query(`DROP TABLE IF EXISTS ${One.PreparedLinks}`);let c=!0,u=!0;try{if(!t.points||void 0!==t.points.pointIdBy&&(void 0!==t.points.linkSourceBy||void 0!==t.points.linkTargetsBy))return void Wte(0,0,"error");const d=await bue(n,One.RawPoints,One.PreparedPoints,mue,t.points,r,o,s);if(!d)return void Wte(0,0,"error");let h=d.data;a=d.summary,c=d.processedFully;const f={...t};let p;if(i&&t.links)if(t.links.linkSourceBy&&t.links.linkTargetsBy)try{const e=await bue(i,One.RawLinks,One.PreparedLinks,gue,t.links,r,o,s);if(e){if(p=e.data,l=e.summary,u=e.processedFully,e.pointsAdded){const e=await vue(r,One.PreparedPoints,s),t=await _ue.query(`SUMMARIZE ${One.PreparedPoints}`);(e instanceof Uint8Array&&e.length||e instanceof G9&&e.numRows)&&(h=o(e),a=null==t?void 0:t.toArray())}}else Wte(0,0,"error")}catch(e){Wte(0,0,"error")}else Wte(0,0,"error");!p&&t.links&&(f.links=void 0,Wte(0,0,"warn"));const m=(e=>{const t={...Object.fromEntries(Object.entries(e.points).filter(([e,t])=>"outputFilename"!==e&&"linkTargetsBy"!==e&&"linkSourceBy"!==e&&void 0!==t)),pointIdBy:Mne.Id,pointIndexBy:Mne.Idx};return e.links?{...t,...Object.fromEntries(Object.entries(e.links).filter(([e,t])=>"linkTargetsBy"!==e&&"outputFilename"!==e&&void 0!==t)),linkSourceBy:Mne.Source,linkSourceIndexBy:Mne.SourceIdx,linkTargetBy:Mne.Target,linkTargetIndexBy:Mne.TargetIdx}:t})(f);return{points:h,links:p,pointsSummary:a,linksSummary:l,cosmographConfig:m,pointsProcessedFully:c,linksProcessedFully:u}}catch(e){return}finally{await _ue.destroy()}})(e,t,n,Dne.Arrow,e=>e,!0)),wue={highlightSelectedData:!0,showAnimationControls:!0,useLinksData:!1,useQuantiles:!1},Sue={highlightSelectedData:!0,useLinksData:!1,useQuantiles:!1};let Eue=(i=class extends Nce{constructor(){super(...arguments),s(this,"selected")}checkCurrentSelection(){this.selected&&this.setSelectedItem(this.selected)}onSelect(e){var t,n,r;this.compareSelectedItem(e)?(null==(t=this._client)||t.resetFilter(),this.onResetClientSelections(),i._activeComponentId=null):(i._activeComponentId!==(null==(n=this._client)?void 0:n.id)&&(this._internalApi.public.unselectAllPoints(),this._internalApi.dispatchEvent(new CustomEvent("resetSelections"))),i._activeComponentId=(null==(r=this._client)?void 0:r.id)||null,this.selected=e,this.setSelectedItem(e),this.accessor&&this.applyFilter(e))}onResetClientSelections(){this.selected=void 0,this.setSelectedItem(void 0)}onDataFiltered(){var e,t;(null==(e=this._client)?void 0:e.id)!==i._activeComponentId&&(this.selected=void 0,this.setSelectedItem(void 0),null==(t=this._client)||t.resetFilter())}},s(i,"_activeComponentId",null),i);const Cue={suggestionsLimit:50,placeholderText:"Search...",showAccessorsMenu:!0,suggestionTruncationLength:50,accessor:"id",suggestionFieldsPalette:["#fbb4aebf","#b3cde3bf","#ccebc5bf","#decbe4bf","#fed9a6bf","#ffffccbf","#e5d8bdbf","#fddaecbf"],showFooter:!1};var Tue="style_module_searchContainer__1bed75df",kue="style_module_accessorButton__1bed75df",Aue="style_module_upwards__1bed75df",Iue="style_module_visible__1bed75df",Pue="style_module_placeholderInput__1bed75df",Lue="style_module_disabled__1bed75df",Rue="style_module_separator__1bed75df";Ace(".style_module_searchContainer__1bed75df{align-items:center;display:flex;gap:6px;position:relative;width:100%}.style_module_accessorButton__1bed75df{align-items:center;backdrop-filter:blur(8px);background:var(--cosmograph-search-accessors-background);border-radius:4px;cursor:pointer;display:flex;flex-shrink:0;font-size:13px;font-weight:300;line-height:1;max-width:100px;overflow:hidden;padding:2.5px 5px;text-overflow:ellipsis;white-space:nowrap}.style_module_accessorsMenuPlaceholder__1bed75df{font-size:11.5px;font-weight:600;letter-spacing:.07em;line-height:2;opacity:.9;padding-bottom:0;padding-left:10px;padding-top:4px;pointer-events:none;text-transform:uppercase;user-select:none}.style_module_accessorsMenu__1bed75df{backdrop-filter:blur(8px);background:var(--cosmograph-search-list-background);border-radius:4px;color:#fff;left:0;margin:2px 0 0;min-width:100%;opacity:0;overflow:hidden;padding:0 0 2px;pointer-events:none;position:absolute;right:0;top:100%;transform:translateY(-10px);transition:opacity .2s ease-out,transform .2s ease-out;width:100%}.style_module_accessorsMenu__1bed75df.style_module_upwards__1bed75df{bottom:100%;top:auto;transform:translateY(10px)}.style_module_accessorsMenu__1bed75df.style_module_visible__1bed75df{opacity:1;pointer-events:auto;transform:translateY(0)}.style_module_accessorsMenu__1bed75df.style_module_upwards__1bed75df.style_module_visible__1bed75df{opacity:1;pointer-events:auto;transform:translateY(-7px)}.style_module_accessorsMenu__1bed75df li{cursor:pointer;display:block;font-size:var(--cosmograph-search-list-font-size,13.5px);font-weight:500;line-height:normal;max-width:100%;opacity:0;padding:5px 10px;transform:translateY(5px);transition:opacity .2s ease-out,transform .2s ease-out;user-select:none}.style_module_accessorsMenu__1bed75df.style_module_visible__1bed75df li{opacity:1;transform:translateY(0)}.style_module_accessorsMenu__1bed75df li:hover{background:hsla(0,0%,100%,.1)}.style_module_accessorsMenu__1bed75df li>div{font-weight:200;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.style_module_placeholderInput__1bed75df{align-items:center;cursor:text;display:flex;font-weight:300;min-width:0;opacity:.7;width:100%}.style_module_placeholderInput__1bed75df.style_module_disabled__1bed75df{cursor:not-allowed;opacity:.5;pointer-events:none}.style_module_searchResult__1bed75df{align-items:center;display:flex;flex-wrap:wrap}.style_module_searchResultMultiField__1bed75df{text-wrap:initial;align-items:center;color:hsla(0,0%,100%,.8);display:inline-block;font-size:var(--cosmograph-search-list-font-size,13.5px);font-weight:300;line-height:normal;margin-right:8px;max-width:100%;overflow-wrap:anywhere;word-break:normal}.style_module_searchResultMultiField__1bed75df span{text-wrap:balance;display:inline;font-size:calc(var(--cosmograph-search-list-font-size)*.95);hyphens:auto;line-height:1.25;overflow-wrap:anywhere;white-space:normal;word-break:break-all}.style_module_searchResultMultiField__1bed75df .style_module_separator__1bed75df{display:inline;opacity:.5}.style_module_searchResultMultiField__1bed75df b{font-size:calc(var(--cosmograph-search-list-font-size)*.9);font-weight:600;letter-spacing:.015em;opacity:.7;text-transform:uppercase;white-space:pre}.style_module_selectAllContainer__1bed75df{align-items:center;display:flex;gap:4px;justify-content:start;line-height:1;margin:.25rem .5rem .15rem;padding:.2rem 0;width:100%}.style_module_selectAllButton__1bed75df{align-items:center;backdrop-filter:blur(4px);background:var(--cosmograph-search-select-all-background,hsla(0,0%,100%,.1));border:none;border-radius:4px;color:var(--cosmograph-search-select-all-color,hsla(0,0%,100%,.75));cursor:pointer;font-size:var(--cosmograph-search-list-font-size,13.5px);font-weight:300;margin:0!important;padding:2px 8px;text-align:center;transition:background-color .2s ease,border-color .2s ease}.style_module_selectAllButton__1bed75df:hover{background:var(--cosmograph-search-select-all-hover-background,hsla(0,0%,100%,.15))}.style_module_resultsCounter__1bed75df{color:hsla(0,0%,100%,.4);font-size:12px;font-weight:400;user-select:none;white-space:nowrap}.style_module_selectAllContainer__1bed75df .style_module_separator__1bed75df{color:hsla(0,0%,100%,.4);opacity:.7;user-select:none}",{}),Ace(":root{--cosmograph-search-accessors-background:#8791a159}",{});let Oue=(r=class extends Eue{constructor(){super(...arguments),s(this,"_isDataFetched",!1),s(this,"_accessorsMenu",null),s(this,"_placeholderElement",null),s(this,"_accessorButton",null),s(this,"_clickOutsideHandler",e=>this._handleClickOutside(e)),s(this,"_enterFilterActive",!1),s(this,"_currentSearchInput",""),s(this,"_currentSearchResults",[]),s(this,"_totalResultsCount",0),s(this,"_resultsCounter",null),s(this,"_arrayColumnsCache",new Set),s(this,"_selectedSearchField",Cue.accessor)}get defaultConfig(){return Cue}get accessor(){return this._config.accessor??Cue.accessor}_isAllFieldsSelected(){return this._selectedSearchField===r.ALL_FIELDS_TOKEN}_getSelectedFieldLabel(){return this._isAllFieldsSelected()?r.ALL_FIELDS_LABEL:this.accessor}_syncSelectedSearchFieldWithConfig(){this._isAllFieldsSelected()||(this._selectedSearchField=this.accessor)}_getAutoSuggestionFields(){const{config:e}=this._internalApi,t=this._internalApi.summary.pointsSummary;if(!t||0===t.length)return;const n={};for(const i of t){const t=String(i.column_name);t!==e.pointIndexBy&&(n[t]=t)}if(this._config.suggestionFields)for(const[i,r]of Object.entries(this._config.suggestionFields))void 0!==n[i]&&(n[i]=r);return n}_getEffectiveSuggestionFields(){return this._isAllFieldsSelected()?this._getAutoSuggestionFields():this._config.suggestionFields}_getAllFields(){return Object.keys(this._getAutoSuggestionFields()??{})}_valueAccessor(e,t=this.accessor){const n=e[t];return null==n?"null":String(n)}_indexAccessor(e){const{config:t}=this._internalApi;return Number(e[t.pointIndexBy])}_calculateDisabledState(){return!this._isDataFetched||("boolean"==typeof this._config.disabled?this._config.disabled:!this._isDataFetched)}async fetchData(){if(!this._internalApi.dbCoordinator)return;await this._internalApi.dataManager.dataReady(),this._isDataFetched=!0,this._syncSelectedSearchFieldWithConfig();const e=this._calculateDisabledState();this._uiComponent.setDisabled(e),this._findPlaceholderElement(),this._updatePlaceholderDisabledState(),this._config.showAccessorsMenu&&(await this._updateAccessorsMenu(),this._updateAccessorButton()),this._detectArrayColumns(),this._client&&this.accessor&&await this._client.getCurrentData()}_detectArrayColumns(){this._arrayColumnsCache.clear();for(const e of this._internalApi.summary.pointsSummary??[])tne(String(e.column_type??""))&&this._arrayColumnsCache.add(String(e.column_name))}_isArrayColumn(e){return this._arrayColumnsCache.has(e)}applyFilter(e){var t,n,i;const{config:r}=this._internalApi;if(e)if(this._getEffectiveSuggestionFields()){const n=this._indexAccessor(e);null==(t=this._client)||t.applyFilter(h1(u0(r.pointIndexBy),[n])),this._internalApi.public.zoomToPoint(n),(r.focusPointOnClick??r.selectPointOnClick)&&this._internalApi.public.setFocusedPoint(n)}else null==(n=this._client)||n.applyExactFilter(this._valueAccessor(e));else null==(i=this._client)||i.resetFilter()}setSelectedItem(e){e||this._uiComponent.clearInput()}compareSelectedItem(e){var t;return!(e||!this.selected)||(null==(t=this.selected)?void 0:t.id)===(null==e?void 0:e.id)}createUIComponent(e){return new yae(e,this.createComponentConfig({...this._config}))}onResetClientSelections(){this._uiComponent.clearInput()}async onConfigUpdate(){const e=this._config.openListUpwards;this._uiComponent.setConfig(this.createComponentConfig({...this._config})),this._updatePlaceholderDisabledState(),this._syncSelectedSearchFieldWithConfig(),this._config.showAccessorsMenu&&this._accessorsMenu&&e!==this._config.openListUpwards&&(this._config.openListUpwards?this._accessorsMenu.classList.add(Aue):this._accessorsMenu.classList.remove(Aue)),this._config.showAccessorsMenu&&this._updateAccessorButton(),this._uiComponent.clearInput(),this.onResetClientSelections()}async _getSuggestions(e){if(this._internalApi.dbCoordinator)return await this._internalApi.dataManager.dataReady(),this._syncSelectedSearchFieldWithConfig(),this._isAllFieldsSelected()?this._getAllFieldsSuggestions(e):this._getSingleFieldSuggestions(e)}async _executeQuery(e){var t;return await(null==(t=this._internalApi.dbCoordinator)?void 0:t.query(e))}_buildOrderByClause(e,t){return this._isNullSearch(t)?`"${this.accessor}"`:`\n      CASE WHEN ${e} = LOWER('${t}') THEN 0 ELSE 1 END,\n      CASE WHEN ${e} LIKE LOWER('${t}%') THEN 0 ELSE 1 END,\n      STRPOS(${e}, LOWER('${t}'))\n    `}_isNullSearch(e){return"null"===e.toLowerCase().trim()}_buildFieldUtilities(e){const t=e=>this._isArrayColumn(e)?`LOWER(array_to_string("${e}", ', '))`:`LOWER(CAST("${e}" AS VARCHAR))`;return{fieldCast:t,fieldMatchCondition:n=>this._isNullSearch(e)?`"${n}" IS NULL`:this._isArrayColumn(n)?`EXISTS(\n          SELECT 1 FROM UNNEST("${n}") AS element\n          WHERE LOWER(CAST(element AS VARCHAR)) LIKE LOWER('%${e}%')\n        )`:`${t(n)} LIKE LOWER('%${e}%')`}}_buildSingleFieldWhereCondition(e){const{fieldMatchCondition:t}=this._buildFieldUtilities(e);return t(this.accessor)}_buildAllFieldsWhereCondition(e){const t=this._getAllFields();if(0===t.length)return this._buildSingleFieldWhereCondition(e);const{fieldMatchCondition:n}=this._buildFieldUtilities(e);return t.map(n).join(" OR ")}_truncateAroundMatch(e,t,n){if(0===n||e.length<=n)return e;const i=e.toLowerCase(),r=t.toLowerCase(),o=i.indexOf(r);if(-1===o)return e.length>n?`${e.substring(0,n)}...`:e;const s=o+t.length,a=Math.floor(n/2);let l=Math.max(0,o-a),c=Math.min(e.length,s+a);0===l?c=Math.min(e.length,l+n):c===e.length&&(l=Math.max(0,c-n));let u=e.substring(l,c);return l>0&&(u=`...${u}`),c<e.length&&(u=`${u}...`),u}async _getSingleFieldSuggestions(e){const{fieldCast:t}=this._buildFieldUtilities(e),n=this._config.suggestionsLimit??Cue.suggestionsLimit,i=this._buildSingleFieldWhereCondition(e);if(!this._getEffectiveSuggestionFields()){if(this._isNullSearch(e)){const e=`\n          SELECT 'null' AS "${this.accessor}",\n                 'null' AS id,\n                 1 AS total_count\n          FROM (SELECT 1) AS dummy\n          WHERE EXISTS (\n            SELECT 1 FROM ${this.tableName}\n            WHERE "${this.accessor}" IS NULL\n            LIMIT 1\n          )\n          LIMIT 1\n        `;return this._executeQuery(e)}if(this._isArrayColumn(this.accessor)){const t=`\n          WITH values AS (\n            SELECT DISTINCT CAST(u.value AS VARCHAR) AS value\n            FROM ${this.tableName} t,\n                 UNNEST(t."${this.accessor}") AS u(value)\n            WHERE LOWER(CAST(u.value AS VARCHAR)) LIKE LOWER('%${e}%')\n          ),\n          ranked AS (\n            SELECT value,\n                   LOWER(value) AS lower_value,\n                   COUNT(*) OVER() AS total_count\n            FROM values\n          )\n          SELECT value AS "${this.accessor}",\n                 value AS id,\n                 total_count\n          FROM ranked\n          ORDER BY ${this._buildOrderByClause("lower_value",e)},\n                   value\n          LIMIT ${n}\n        `;return this._executeQuery(t)}const t=`\n        WITH values AS (\n          SELECT DISTINCT CAST("${this.accessor}" AS VARCHAR) AS value\n          FROM ${this.tableName}\n          WHERE ${i}\n        ),\n        ranked AS (\n          SELECT value,\n                 LOWER(value) AS lower_value,\n                 COUNT(*) OVER() AS total_count\n          FROM values\n        )\n        SELECT value AS "${this.accessor}",\n               value AS id,\n               total_count\n        FROM ranked\n        ORDER BY ${this._buildOrderByClause("lower_value",e)},\n                 value\n        LIMIT ${n}\n      `;return this._executeQuery(t)}if(this._isNullSearch(e)){const t=`\n        SELECT *,\n               COUNT(*) OVER() AS total_count\n        FROM ${this.tableName}\n        WHERE ${i}\n        ORDER BY ${this._buildOrderByClause("",e)}\n        LIMIT ${n}\n      `;return this._executeQuery(t)}const r=`\n      SELECT *,\n             COUNT(*) OVER() AS total_count\n      FROM (\n        SELECT *,\n               ${t(this.accessor)} AS lower_value\n        FROM ${this.tableName}\n        WHERE ${i}\n      ) t\n      ORDER BY ${this._buildOrderByClause("lower_value",e)}\n      LIMIT ${n}\n    `;return this._executeQuery(r)}async _getAllFieldsSuggestions(e){const t=this._getAllFields(),n=this._config.suggestionsLimit??Cue.suggestionsLimit,i=this._buildAllFieldsWhereCondition(e),{fieldCast:r,fieldMatchCondition:o}=this._buildFieldUtilities(e);if(0===t.length)return this._getSingleFieldSuggestions(e);const s=t.map(e=>`WHEN ${o(e)} THEN '${e}'`).join(" ");if(this._isNullSearch(e)){const e=`\n        SELECT *,\n               COUNT(*) OVER() AS total_count,\n               'null' AS matched_value,\n               CASE ${s} END AS matched_field\n        FROM ${this.tableName}\n        WHERE ${i}\n        ORDER BY "${this.accessor}"\n        LIMIT ${n}\n      `;return this._executeQuery(e)}const a=`\n      SELECT *,\n             COUNT(*) OVER() AS total_count\n      FROM (\n        SELECT *,\n               CASE ${s} END AS matched_field,\n               CASE ${t.map(e=>`WHEN ${o(e)} THEN ${r(e)}`).join(" ")} END AS matched_value\n        FROM ${this.tableName}\n        WHERE ${i}\n      ) t\n      ORDER BY ${this._buildOrderByClause("matched_value",e)}\n      LIMIT ${n}\n    `;return this._executeQuery(a)}async _getSearchItems(e){var t,n;if(!this._isDataFetched||0===(null==(t=this._internalApi.summary.pointsSummary)?void 0:t.length))return this._currentSearchResults=[],this._totalResultsCount=0,this._updateResultsCounter(),[];const i=await this._getSuggestions(e),r=(null==i?void 0:i.toArray())??[];this._currentSearchResults=r;const o=null==(n=r[0])?void 0:n.total_count;return this._totalResultsCount="number"==typeof o?o:r.length,this._updateResultsCounter(),this._currentSearchResults}_createAccessorButton(){const e=document.createElement("div");return e.classList.add(kue),e.dataset.ignoreFocus="true",e.textContent=this._getSelectedFieldLabel(),e.onclick=()=>{this._accessorsMenu&&(this._accessorsMenu.classList.contains(Iue)?this._accessorsMenu.classList.remove(Iue):this._accessorsMenu.classList.add(Iue))},e}_createFooter(){const e=document.createElement("div");e.classList.add("style_module_selectAllContainer__1bed75df");const t=document.createElement("button");t.classList.add("style_module_selectAllButton__1bed75df"),t.textContent="select found results",t.onclick=async e=>{e.stopPropagation(),await this._handleSelectAllClick()},this._resultsCounter=document.createElement("span"),this._resultsCounter.classList.add("style_module_resultsCounter__1bed75df"),this._resultsCounter.textContent=this._getResultsCountText(),e.appendChild(t);const n=document.createElement("span");return n.classList.add(Rue),n.textContent="  ",e.appendChild(n),e.appendChild(this._resultsCounter),e}_getResultsCountText(){const e=this._totalResultsCount,t=this._currentSearchResults.length,n=(e,t,n=`${t}s`)=>1===e?t:n;return e===t?`${Ose(e)} ${n(e,"result")} found`:`${Ose(t)} of ${Ose(e)} ${n(e,"result")} shown`}_updateResultsCounter(){this._resultsCounter&&(this._resultsCounter.textContent=this._getResultsCountText())}async _handleSelectAllClick(){var e,t,n;if(0!==this._currentSearchResults.length&&this._currentSearchInput)try{const{config:i}=this._internalApi,r=i.pointIndexBy,o=this._isAllFieldsSelected()?this._buildAllFieldsWhereCondition(this._currentSearchInput):this._buildSingleFieldWhereCondition(this._currentSearchInput),s=`\n        SELECT DISTINCT "${r}" as point_index\n        FROM ${this.tableName}\n        WHERE ${o}\n      `,a=await this._executeQuery(s),l=((null==a?void 0:a.toArray())??[]).map(e=>e.point_index);null==(e=this._client)||e.applyFilter(h1(u0(this._internalApi.config.pointIndexBy),l)),this._enterFilterActive=!0,null==(n=(t=this._config).onSelectAll)||n.call(t,l),this._uiComponent.hideSuggestions()}catch(qe){this._uiComponent.hideSuggestions()}}_createAccessorsMenu(){const e=document.createElement("ul");return e.dataset.ignoreFocus="true",e.classList.add("style_module_accessorsMenu__1bed75df"),this._config.openListUpwards&&e.classList.add(Aue),e}_handleClickOutside(e){var t;this._accessorsMenu&&this._accessorsMenu.classList.contains(Iue)&&!(null==(t=this._accessorButton)?void 0:t.contains(e.target))&&!this._accessorsMenu.contains(e.target)&&this._accessorsMenu.classList.remove(Iue)}_createPlaceholderElement(){if(!this._placeholderElement){this._placeholderElement=document.createElement("div"),this._placeholderElement.classList.add(Tue),this._config.showAccessorsMenu&&(this._accessorsMenu=this._createAccessorsMenu(),this._accessorButton=this._createAccessorButton(),this._placeholderElement.appendChild(this._accessorButton),this._placeholderElement.appendChild(this._accessorsMenu),document.addEventListener("click",this._clickOutsideHandler));const e=document.createElement("div");e.classList.add(Pue),e.innerHTML=this._config.placeholderText??"Search...",this._calculateDisabledState()&&e.classList.add(Lue),e.onclick=()=>{this._calculateDisabledState()||this._uiComponent.focus()},this._placeholderElement.appendChild(e)}return this._placeholderElement}_updateAccessorButton(){if(this._accessorButton){const e=this._getSelectedFieldLabel();this._accessorButton.textContent=e,this._accessorButton.title=e}}_findPlaceholderElement(){if(!this._placeholderElement){const e=`.${Tue}`,t=document.querySelector(e);if(!t)return;this._placeholderElement=t,this._accessorButton=t.querySelector(`.${kue}`),this._config.showAccessorsMenu&&!this._accessorsMenu&&(this._accessorsMenu=this._createAccessorsMenu(),this._placeholderElement.appendChild(this._accessorsMenu))}}_updatePlaceholderDisabledState(){if(!this._placeholderElement)return;const e=this._placeholderElement.querySelector(`.${Pue}`);e&&(this._calculateDisabledState()?e.classList.add(Lue):e.classList.remove(Lue))}async _updateAccessorsMenu(){var e;if(!this._config.showAccessorsMenu||!this._accessorsMenu)return;const{config:t}=this._internalApi;if(!this._internalApi.summary.pointsSummary)return;this._config.openListUpwards?this._accessorsMenu.classList.add(Aue):this._accessorsMenu.classList.remove(Aue);const n=null==(e=this._internalApi.summary.pointsSummary)?void 0:e.map(e=>String(e.column_name)).filter(e=>e!==t.pointIndexBy);this._accessorsMenu.innerHTML="";const i=document.createElement("div");i.classList.add("style_module_accessorsMenuPlaceholder__1bed75df"),i.textContent="Select field to search",this._accessorsMenu.appendChild(i),this._accessorsMenu.appendChild(this._createAccessorItem(r.ALL_FIELDS_TOKEN,r.ALL_FIELDS_LABEL)),n.forEach(e=>{const t=this._createAccessorItem(e);this._accessorsMenu.appendChild(t)})}_createAccessorItem(e,t){const n=document.createElement("li"),i=document.createElement("div"),r=t??e;return i.textContent=r,i.title=r,i.onclick=t=>this._handleAccessorClick(e,t),n.onclick=t=>this._handleAccessorClick(e,t),n.appendChild(i),n}async _handleAccessorClick(e,t){t.stopPropagation(),e===r.ALL_FIELDS_TOKEN?this._isAllFieldsSelected()||(this._selectedSearchField=r.ALL_FIELDS_TOKEN,this._updateAccessorButton(),this._uiComponent.clearInput(),await this.onConfigUpdate()):(this._config.accessor!==e||this._isAllFieldsSelected())&&(this._selectedSearchField=e,this._config.accessor=e,this._updateAccessorButton(),this._uiComponent.clearInput(),await this.onConfigUpdate(),this._client&&await this._client.getCurrentData()),this._accessorsMenu&&this._accessorsMenu.classList.remove(Iue)}_renderSuggestionField(e,t,n,i,r){const o=void 0!==t[n]&&null!==t[n],s=(null===t[n]||void 0===t[n])&&this._isNullSearch(this._currentSearchInput);if(o||s){const o=r[n];let s=this._valueAccessor(t,n);const a=this._config.suggestionTruncationLength??Cue.suggestionTruncationLength;if(a>0&&this._currentSearchInput&&s.length>a&&(s=this._truncateAroundMatch(s,this._currentSearchInput,a)),i>0){const t=document.createElement("div");t.classList.add(Rue),t.innerHTML="  ",e.appendChild(t)}const l=document.createElement("span"),c=document.createElement("b");c.textContent=`${o}: `,l.appendChild(c);const u=document.createElement("span");let d;if(i>0&&this._config.suggestionFieldsPalette&&this._config.suggestionFieldsPalette.length>0){const e=(i-1)%this._config.suggestionFieldsPalette.length;d=this._config.suggestionFieldsPalette[e],l.style.color=d??"inherit"}if(this._isAllFieldsSelected()?this._currentSearchInput&&(this._isNullSearch(this._currentSearchInput)?"null"===s.toLowerCase():s.toLowerCase().includes(this._currentSearchInput.toLowerCase())):n===this.accessor){const e=this._uiComponent.getHighlightedMatch(s);u.innerHTML=d?e.replace(/<mark[^>]*>/g,`<mark style="color: ${d}">`):e}else u.textContent=s;l.appendChild(u),e.appendChild(l)}}_renderSuggestion(e){const t=this._getEffectiveSuggestionFields();if(!t){let t=this._valueAccessor(e);const n=this._config.suggestionTruncationLength??Cue.suggestionTruncationLength;return n>0&&this._currentSearchInput&&t.length>n&&(t=this._truncateAroundMatch(t,this._currentSearchInput,n)),t}const n=document.createElement("div");n.classList.add("style_module_searchResult__1bed75df");const i={...t};let r=Object.keys(i);i[this.accessor]?r[0]!==this.accessor&&(r=r.filter(e=>e!==this.accessor),r.unshift(this.accessor)):(i[this.accessor]=this.accessor,r.unshift(this.accessor));const o=document.createElement("span");return o.classList.add("style_module_searchResultMultiField__1bed75df"),r.forEach((t,n)=>{this._renderSuggestionField(o,e,t,n,i)}),n.appendChild(o),n}createComponentConfig(e){return{...e,onEnter:async(...e)=>{var t,n,i;const[,r]=e;Array.isArray(r)&&r.length>0?await this._handleSelectAllClick():(null==(t=this._client)||t.resetFilter(),this._enterFilterActive=!1),this._uiComponent.hideSuggestions(),Array.isArray(r)&&r.splice(0,r.length),null==(i=(n=this._config).onEnter)||i.call(n,...e)},onInput:(...e)=>{var t,n;const[i]=e;this._currentSearchInput=i,null==(n=(t=this._config).onInput)||n.call(t,...e)},onSelect:(...e)=>{var t,n;this._enterFilterActive=!1,this.onSelect(e[0]),null==(n=(t=this._config).onSelect)||n.call(t,e[0])},onClear:()=>{var e,t;this._enterFilterActive=!1,this.onSelect(void 0),null==(t=(e=this._config).onClear)||t.call(e)},disabled:this._calculateDisabledState(),searchFn:async(...e)=>await this._getSearchItems(e[0]),suggestionRenderer:e=>this._renderSuggestion(e),selectedSuggestionRenderer:e=>{let t=this._valueAccessor(e);const n=this._config.suggestionTruncationLength??Cue.suggestionTruncationLength;return n>0&&this._currentSearchInput&&t.length>n&&(t=this._truncateAroundMatch(t,this._currentSearchInput,n)),t},placeholderRenderer:this._createPlaceholderElement(),footerComponent:this._config.showFooter?this._createFooter():void 0}}remove(){document.removeEventListener("click",this._clickOutsideHandler),this._accessorButton&&(this._accessorButton.onclick=null),this._uiComponent.destroy(),this._accessorsMenu=null,this._placeholderElement=null,this._accessorButton=null,this._resultsCounter=null,this._currentSearchResults=[],this._totalResultsCount=0,super.remove()}onDataFiltered(){this._enterFilterActive||super.onDataFiltered()}hideSuggestions(){this.checkReady(()=>this.hideSuggestions())&&this._uiComponent.hideSuggestions()}clearInput(){this.checkReady(()=>this.clearInput())&&this._uiComponent.clearInput()}focus(){this.checkReady(()=>this.focus())&&this._uiComponent.focus()}blur(){this.checkReady(()=>this.blur())&&this._uiComponent.blur()}},s(r,"ALL_FIELDS_TOKEN","__all_fields__"),s(r,"ALL_FIELDS_LABEL","all fields"),r);const Mue={useLinksData:!1,selectOnClick:!0,highlightSelectedData:!0},{entries:Due,setPrototypeOf:Nue,isFrozen:Fue,getPrototypeOf:Bue,getOwnPropertyDescriptor:zue}=Object;let{freeze:Uue,seal:jue,create:Vue}=Object,{apply:Hue,construct:Wue}="undefined"!=typeof Reflect&&Reflect;Uue||(Uue=function(e){return e}),jue||(jue=function(e){return e}),Hue||(Hue=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.apply(t,i)}),Wue||(Wue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new e(...n)});const $ue=sde(Array.prototype.forEach),Gue=sde(Array.prototype.lastIndexOf),que=sde(Array.prototype.pop),Yue=sde(Array.prototype.push),Xue=sde(Array.prototype.splice),Kue=sde(String.prototype.toLowerCase),Zue=sde(String.prototype.toString),Que=sde(String.prototype.match),Jue=sde(String.prototype.replace),ede=sde(String.prototype.indexOf),tde=sde(String.prototype.trim),nde=sde(Object.prototype.hasOwnProperty),ide=sde(RegExp.prototype.test),rde=(ode=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Wue(ode,t)});var ode;function sde(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Hue(e,t,i)}}function ade(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kue;Nue&&Nue(e,null);let i=t.length;for(;i--;){let r=t[i];if("string"==typeof r){const e=n(r);e!==r&&(Fue(t)||(t[i]=e),r=e)}e[r]=!0}return e}function lde(e){for(let t=0;t<e.length;t++)nde(e,t)||(e[t]=null);return e}function cde(e){const t=Vue(null);for(const[n,i]of Due(e))nde(e,n)&&(Array.isArray(i)?t[n]=lde(i):i&&"object"==typeof i&&i.constructor===Object?t[n]=cde(i):t[n]=i);return t}function ude(e,t){for(;null!==e;){const n=zue(e,t);if(n){if(n.get)return sde(n.get);if("function"==typeof n.value)return sde(n.value)}e=Bue(e)}return function(){return null}}const dde=Uue(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hde=Uue(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fde=Uue(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pde=Uue(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mde=Uue(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),gde=Uue(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_de=Uue(["#text"]),yde=Uue(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vde=Uue(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bde=Uue(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xde=Uue(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wde=jue(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Sde=jue(/<%[\w\W]*|[\w\W]*%>/gm),Ede=jue(/\$\{[\w\W]*/gm),Cde=jue(/^data-[\-\w.\u00B7-\uFFFF]+$/),Tde=jue(/^aria-[\-\w]+$/),kde=jue(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ade=jue(/^(?:\w+script|data):/i),Ide=jue(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Pde=jue(/^html$/i),Lde=jue(/^[a-z][.\w]*(-[.\w]+)+$/i);var Rde=Object.freeze({__proto__:null,ARIA_ATTR:Tde,ATTR_WHITESPACE:Ide,CUSTOM_ELEMENT:Lde,DATA_ATTR:Cde,DOCTYPE_NAME:Pde,ERB_EXPR:Sde,IS_ALLOWED_URI:kde,IS_SCRIPT_OR_DATA:Ade,MUSTACHE_EXPR:wde,TMPLIT_EXPR:Ede});var Ode=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.3.1",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:i}=t;const r=i,o=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:p}=t,m=c.prototype,g=ude(m,"cloneNode"),_=ude(m,"remove"),y=ude(m,"nextSibling"),v=ude(m,"childNodes"),b=ude(m,"parentNode");if("function"==typeof a){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let x,w="";const{implementation:S,createNodeIterator:E,createDocumentFragment:C,getElementsByTagName:T}=i,{importNode:k}=r;let A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof Due&&"function"==typeof b&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:P,TMPLIT_EXPR:L,DATA_ATTR:R,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:N}=Rde;let{IS_ALLOWED_URI:F}=Rde,B=null;const z=ade({},[...dde,...hde,...fde,...mde,..._de]);let U=null;const j=ade({},[...yde,...vde,...bde,...xde]);let V=Object.seal(Vue(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,W=null;const $=Object.seal(Vue(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let G=!0,q=!0,Y=!1,X=!0,K=!1,Z=!0,Q=!1,J=!1,ee=!1,te=!1,ne=!1,ie=!1,re=!0,oe=!1,se=!0,ae=!1,le={},ce=null;const ue=ade({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const he=ade({},["audio","video","img","source","image","track"]);let fe=null;const pe=ade({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",ge="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let ye=_e,ve=!1,be=null;const xe=ade({},[me,ge,_e],Zue);let we=ade({},["mi","mo","mn","ms","mtext"]),Se=ade({},["annotation-xml"]);const Ee=ade({},["title","style","font","a","script"]);let Ce=null;const Te=["application/xhtml+xml","text/html"];let ke=null,Ae=null;const Ie=i.createElement("form"),Pe=function(e){return e instanceof RegExp||e instanceof Function},Le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ae||Ae!==e){if(e&&"object"==typeof e||(e={}),e=cde(e),Ce=-1===Te.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ke="application/xhtml+xml"===Ce?Zue:Kue,B=nde(e,"ALLOWED_TAGS")?ade({},e.ALLOWED_TAGS,ke):z,U=nde(e,"ALLOWED_ATTR")?ade({},e.ALLOWED_ATTR,ke):j,be=nde(e,"ALLOWED_NAMESPACES")?ade({},e.ALLOWED_NAMESPACES,Zue):xe,fe=nde(e,"ADD_URI_SAFE_ATTR")?ade(cde(pe),e.ADD_URI_SAFE_ATTR,ke):pe,de=nde(e,"ADD_DATA_URI_TAGS")?ade(cde(he),e.ADD_DATA_URI_TAGS,ke):he,ce=nde(e,"FORBID_CONTENTS")?ade({},e.FORBID_CONTENTS,ke):ue,H=nde(e,"FORBID_TAGS")?ade({},e.FORBID_TAGS,ke):cde({}),W=nde(e,"FORBID_ATTR")?ade({},e.FORBID_ATTR,ke):cde({}),le=!!nde(e,"USE_PROFILES")&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,Y=e.ALLOW_UNKNOWN_PROTOCOLS||!1,X=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,Z=!1!==e.SAFE_FOR_XML,Q=e.WHOLE_DOCUMENT||!1,te=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,ie=e.RETURN_TRUSTED_TYPE||!1,ee=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,oe=e.SANITIZE_NAMED_PROPS||!1,se=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||kde,ye=e.NAMESPACE||_e,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,Se=e.HTML_INTEGRATION_POINTS||Se,V=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Pe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Pe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(q=!1),ne&&(te=!0),le&&(B=ade({},_de),U=[],!0===le.html&&(ade(B,dde),ade(U,yde)),!0===le.svg&&(ade(B,hde),ade(U,vde),ade(U,xde)),!0===le.svgFilters&&(ade(B,fde),ade(U,vde),ade(U,xde)),!0===le.mathMl&&(ade(B,mde),ade(U,bde),ade(U,xde))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?$.tagCheck=e.ADD_TAGS:(B===z&&(B=cde(B)),ade(B,e.ADD_TAGS,ke))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?$.attributeCheck=e.ADD_ATTR:(U===j&&(U=cde(U)),ade(U,e.ADD_ATTR,ke))),e.ADD_URI_SAFE_ATTR&&ade(fe,e.ADD_URI_SAFE_ATTR,ke),e.FORBID_CONTENTS&&(ce===ue&&(ce=cde(ce)),ade(ce,e.FORBID_CONTENTS,ke)),e.ADD_FORBID_CONTENTS&&(ce===ue&&(ce=cde(ce)),ade(ce,e.ADD_FORBID_CONTENTS,ke)),se&&(B["#text"]=!0),Q&&ade(B,["html","head","body"]),B.table&&(ade(B,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw rde('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw rde('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=e.TRUSTED_TYPES_POLICY,w=x.createHTML("")}else void 0===x&&(x=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(o){return null}}(p,o)),null!==x&&"string"==typeof w&&(w=x.createHTML(""));Uue&&Uue(e),Ae=e}},Re=ade({},[...hde,...fde,...pde]),Oe=ade({},[...mde,...gde]),Me=function(e){Yue(n.removed,{element:e});try{b(e).removeChild(e)}catch(t){_(e)}},De=function(e,t){try{Yue(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(i){Yue(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(te||ne)try{Me(t)}catch(i){}else try{t.setAttribute(e,"")}catch(i){}},Ne=function(e){let t=null,n=null;if(ee)e="<remove></remove>"+e;else{const t=Que(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ce&&ye===_e&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=x?x.createHTML(e):e;if(ye===_e)try{t=(new f).parseFromString(r,Ce)}catch(s){}if(!t||!t.documentElement){t=S.createDocument(ye,"template",null);try{t.documentElement.innerHTML=ve?w:r}catch(s){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),ye===_e?T.call(t,Q?"html":"body")[0]:Q?t.documentElement:o},Fe=function(e){return E.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Be=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},ze=function(e){return"function"==typeof l&&e instanceof l};function Ue(e,t,i){$ue(e,e=>{e.call(n,t,i,Ae)})}const je=function(e){let t=null;if(Ue(A.beforeSanitizeElements,e,null),Be(e))return Me(e),!0;const i=ke(e.nodeName);if(Ue(A.uponSanitizeElement,e,{tagName:i,allowedTags:B}),Z&&e.hasChildNodes()&&!ze(e.firstElementChild)&&ide(/<[/\w!]/g,e.innerHTML)&&ide(/<[/\w!]/g,e.textContent))return Me(e),!0;if(7===e.nodeType)return Me(e),!0;if(Z&&8===e.nodeType&&ide(/<[/\w]/g,e.data))return Me(e),!0;if(!($.tagCheck instanceof Function&&$.tagCheck(i))&&(!B[i]||H[i])){if(!H[i]&&He(i)){if(V.tagNameCheck instanceof RegExp&&ide(V.tagNameCheck,i))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(i))return!1}if(se&&!ce[i]){const t=b(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i){const r=g(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,y(e))}}return Me(e),!0}return e instanceof c&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:ye,tagName:"template"});const n=Kue(e.tagName),i=Kue(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===ge?t.namespaceURI===_e?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===i||we[i]):Boolean(Re[n]):e.namespaceURI===me?t.namespaceURI===_e?"math"===n:t.namespaceURI===ge?"math"===n&&Se[i]:Boolean(Oe[n]):e.namespaceURI===_e?!(t.namespaceURI===ge&&!Se[i])&&!(t.namespaceURI===me&&!we[i])&&!Oe[n]&&(Ee[n]||!Re[n]):!("application/xhtml+xml"!==Ce||!be[e.namespaceURI]))}(e)?(Me(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!ide(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&3===e.nodeType&&(t=e.textContent,$ue([I,P,L],e=>{t=Jue(t,e," ")}),e.textContent!==t&&(Yue(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ue(A.afterSanitizeElements,e,null),!1):(Me(e),!0)},Ve=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in i||n in Ie))return!1;if(q&&!W[t]&&ide(R,t));else if(G&&ide(O,t));else if($.attributeCheck instanceof Function&&$.attributeCheck(t,e));else if(!U[t]||W[t]){if(!(He(e)&&(V.tagNameCheck instanceof RegExp&&ide(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&ide(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t,e))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&ide(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(fe[t]);else if(ide(F,Jue(n,D,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==ede(n,"data:")||!de[e])if(Y&&!ide(M,Jue(n,D,"")));else if(n)return!1;return!0},He=function(e){return"annotation-xml"!==e&&Que(e,N)},We=function(e){Ue(A.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Be(e))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let r=t.length;for(;r--;){const s=t[r],{name:a,namespaceURI:l,value:c}=s,u=ke(a),d=c;let h="value"===a?d:tde(d);if(i.attrName=u,i.attrValue=h,i.keepAttr=!0,i.forceKeepAttr=void 0,Ue(A.uponSanitizeAttribute,e,i),h=i.attrValue,!oe||"id"!==u&&"name"!==u||(De(a,e),h="user-content-"+h),Z&&ide(/((--!?|])>)|<\/(style|title|textarea)/i,h)){De(a,e);continue}if("attributename"===u&&Que(h,"href")){De(a,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){De(a,e);continue}if(!X&&ide(/\/>/i,h)){De(a,e);continue}K&&$ue([I,P,L],e=>{h=Jue(h,e," ")});const f=ke(e.nodeName);if(Ve(f,u,h)){if(x&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(l);else switch(p.getAttributeType(f,u)){case"TrustedHTML":h=x.createHTML(h);break;case"TrustedScriptURL":h=x.createScriptURL(h)}if(h!==d)try{l?e.setAttributeNS(l,a,h):e.setAttribute(a,h),Be(e)?Me(e):que(n.removed)}catch(o){De(a,e)}}else De(a,e)}Ue(A.afterSanitizeAttributes,e,null)},$e=function e(t){let n=null;const i=Fe(t);for(Ue(A.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)Ue(A.uponSanitizeShadowNode,n,null),je(n),We(n),n.content instanceof s&&e(n.content);Ue(A.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,a=null,c=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ze(e)){if("function"!=typeof e.toString)throw rde("toString is not a function");if("string"!=typeof(e=e.toString()))throw rde("dirty is not a string, aborting")}if(!n.isSupported)return e;if(J||Le(t),n.removed=[],"string"==typeof e&&(ae=!1),ae){if(e.nodeName){const t=ke(e.nodeName);if(!B[t]||H[t])throw rde("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)i=Ne("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!te&&!K&&!Q&&-1===e.indexOf("<"))return x&&ie?x.createHTML(e):e;if(i=Ne(e),!i)return te?null:ie?w:""}i&&ee&&Me(i.firstChild);const u=Fe(ae?e:i);for(;a=u.nextNode();)je(a),We(a),a.content instanceof s&&$e(a.content);if(ae)return e;if(te){if(ne)for(c=C.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(U.shadowroot||U.shadowrootmode)&&(c=k.call(r,c,!0)),c}let d=Q?i.outerHTML:i.innerHTML;return Q&&B["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&ide(Pde,i.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+d),K&&$ue([I,P,L],e=>{d=Jue(d,e," ")}),x&&ie?x.createHTML(d):d},n.setConfig=function(){Le(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),J=!0},n.clearConfig=function(){Ae=null,J=!1},n.isValidAttribute=function(e,t,n){Ae||Le({});const i=ke(e),r=ke(t);return Ve(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&Yue(A[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=Gue(A[e],t);return-1===n?void 0:Xue(A[e],n,1)[0]}return que(A[e])},n.removeHooks=function(e){A[e]=[]},n.removeAllHooks=function(){A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const Mde={content:"",bindTo:void 0,placement:"top",offset:[0,8],hidden:!0};var Dde="style_module_visible__d19738e9";Ace(".style_module_popup__d19738e9{box-shadow:0 2px 8px rgba(0,0,0,.15);opacity:0;pointer-events:auto;position:absolute;transition:opacity .15s ease,visibility .15s ease;visibility:hidden;z-index:1}.style_module_visible__d19738e9{opacity:1;transition:opacity .4s ease,visibility .4s ease;visibility:visible}",{});let Nde=class{constructor(e,t){s(this,"_internalApi"),s(this,"_config"),s(this,"_popupContent"),s(this,"_popupElement"),s(this,"_isVisible",!1),s(this,"_lastBindId"),s(this,"_lastBindIndex"),s(this,"_initialize",()=>{this._popupElement=this._internalApi.popupElement,this._initializePopupContent(),requestAnimationFrame(()=>this.setConfig(this._config)),this._internalApi.addEventListener("onSimulationTick",this._render),this._internalApi.addEventListener("onZoom",this._render),this._internalApi.addEventListener("onDrag",this._render),this._internalApi.addEventListener("reset",this._reset),this._internalApi.addEventListener("graphRebuilt",this._reset)}),s(this,"_initializePopupContent",()=>{this._popupContent||(this._popupContent=document.createElement("div"),this._popupContent.classList.add("style_module_popup__d19738e9"),this._popupElement.appendChild(this._popupContent))}),s(this,"_updatePosition",()=>{const{bindTo:e}=this._config;this._internalApi.cosmosInitialized&&void 0!==e&&("number"==typeof e?this._showOnPointIndex(e):"string"==typeof e?this._showOnPointId(e):Array.isArray(e)&&this._showAt(e))}),s(this,"_render",()=>{this._isVisible&&this._updatePosition()}),s(this,"_removePopupContent",()=>{var e;this._isVisible=!1,null==(e=this._popupContent)||e.remove(),this._popupContent=void 0}),s(this,"_reset",()=>{this._lastBindId=void 0,this._lastBindIndex=void 0,this._render()}),s(this,"remove",()=>{this._lastBindId=void 0,this._lastBindIndex=void 0,this._internalApi.removeEventListener("onSimulationTick",this._render),this._internalApi.removeEventListener("onZoom",this._render),this._internalApi.removeEventListener("onDrag",this._render),this._internalApi.removeEventListener("reset",this._reset),this._internalApi.removeEventListener("graphRebuilt",this._reset),this.hide(),this._popupContent&&this._popupContent.addEventListener("transitionend",()=>this._removePopupContent(),{once:!0})}),this._internalApi=Mce(e),this._config={...Mde,...t},this._initialize()}_showAt(e){var t,n;const i=Ode.sanitize(this._config.content??"",{USE_PROFILES:{html:!0}});if(!this._popupContent)return;this._popupContent.innerHTML=i,this._popupContent.style.display="block";const{placement:r="bottom",offset:o=[0,8]}=this._config,s=null==(t=this._popupContent)?void 0:t.offsetWidth,a=null==(n=this._popupContent)?void 0:n.offsetHeight,l=this._internalApi.public.spaceToScreenPosition(e);if(!l)return this._removePopupContent();const[c,u]=l,d=c-s/2+o[0],h="bottom"===r?u+o[1]:u-a-o[1];this._popupContent.style.left=`${d}px`,this._popupContent.style.top=`${h}px`,this._popupContent.style.display="block"}_showOnPointIndex(e){const{placement:t}=this._config;this._internalApi.configManager.configUpdated().then(async()=>{const n=this._internalApi.public.getPointPositionByIndex(e);if(!n)return this._removePopupContent();const[i,r]=n;if(null==i||null==r)return this._removePopupContent();const o=this._internalApi.public.getPointScreenRadiusByIndex(e)/2/this._internalApi.public.getZoomLevel(),s=r+("bottom"===t?-o:o);this._showAt([i,s])})}_showOnPointId(e){this._lastBindId!==e||void 0===this._lastBindIndex?this._internalApi.configManager.cosmosInitialized().then(async()=>{const t=await this._internalApi.public.getPointIndicesByIds([e]);if(!t||void 0===t[0])return this._removePopupContent();const n=t[0];this._lastBindId=e,this._lastBindIndex=n,this._showOnPointIndex(n)}):this._showOnPointIndex(this._lastBindIndex)}setConfig(e){this._config={...this._config,...e},this._config.hidden||this._updatePosition(),void 0!==(null==e?void 0:e.hidden)&&(this._config.hidden?this.hide():this._config.hidden||this.show())}hide(){var e;this._isVisible&&(this._isVisible=!1,null==(e=this._popupContent)||e.classList.remove(Dde))}show(){var e;this._isVisible||(this._isVisible=!0,null==(e=this._popupContent)||e.classList.add(Dde))}};const Fde={useLinksData:!1,hideWhenSizeMoreThan:120,selectOnClick:!0,useQuantiles:!0,minSubLabel:"and less",maxSubLabel:"and more"};var Bde="style_module_selected__91af67ac",zde="style_module_unselected__91af67ac";Ace(".style_module_selected__91af67ac{filter:brightness(1.2)}.style_module_unselected__91af67ac{filter:brightness(.5);opacity:.7}",{});const Ude={useLinksData:!1,selectOnClick:!0,steps:10,overrideColors:void 0,useQuantiles:!0,useDiscreteColors:!1,minSubLabel:"and less",maxSubLabel:"and more"};var jde="style_module_selected__12a865d0",Vde="style_module_unselected__12a865d0";Ace(".style_module_selected__12a865d0{filter:brightness(1.2)}.style_module_unselected__12a865d0{filter:brightness(.5);opacity:.7}",{});const Hde={0:"source",1:"source+target",2:"target",3:"not linked"},Wde=Object.fromEntries(Object.entries(Hde).map(([e,t])=>[t,e])),$de={useLinksData:!1,selectOnClick:!0,hideUnknown:!0,resetSelectionOnCollapse:!0,showLabel:!1},Gde={onClick:void 0,iconSvg:'\n<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n  <path d="m21 21-6-6m6 6v-4.8m0 4.8h-4.8"/>\n  <path d="M3 16.2V21m0 0h4.8M3 21l6-6"/>\n  <path d="M21 7.8V3m0 0h-4.8M21 3l-6 6"/>\n  <path d="M3 7.8V3m0 0h4.8M3 3l6 6"/>\n</svg>\n',duration:250,padding:.1,description:"Fit view"},qde='\n<svg width="100%" height="100%" viewBox="0 0 15 18" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M15 9L-8.15666e-07 17.6603L-5.85621e-08 0.339745L15 9Z"/>\n</svg>',Yde={onClick:void 0,iconSvg:qde,description:"Play/Pause"},Xde={onClick:void 0,iconSvg:'\n<svg width="100%" height="100%" viewBox="0 0 96 96" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:2;">\n    <style type="text/css">\n        .st0{fill:none;fill-rule:nonzero;stroke:currentColor;stroke-width:8px;}\n    </style>\n    <g>\n        <path d="M92.8,71.003L92.8,83.2L75.058,83.2" class="st0"/>\n        <path d="M65.014,83.2L34.968,83.2" class="st0"/>\n        <path d="M24.994,83.2L4,83.2L4,71.003" class="st0"/>\n        <path d="M4,60.954L4,35.036" class="st0"/>\n        <path d="M4,25.06L4,11.8L24.994,11.8" class="st0"/>\n        <path d="M34.968,11.8L65.014,11.8" class="st0"/>\n        <path d="M75.058,11.8L92.8,11.8L92.8,25.06" class="st0"/>\n        <path d="M92.8,35.036L92.8,60.954" class="st0"/>\n    </g>\n</svg>\n',description:"Rectangle selection"},Kde={onClick:void 0,iconSvg:'\n<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" transform="scale(1.15)"><path fill="currentColor" fill-rule="evenodd" d="M21.72.226a1 1 0 0 1 .587.936l-.336 13.583a1 1 0 0 1-.685.924l-8.893 2.948a2.6 2.6 0 0 1-.028.692a2.93 2.93 0 0 1 1.429 1.495c.342.792.33 1.645.198 2.267a1 1 0 0 1-1.956-.417c.07-.328.06-.739-.078-1.056c-.098-.226-.27-.444-.655-.565l-.064.05c-.667.512-1.545.8-2.475.8s-1.808-.288-2.476-.8c-.668-.511-1.165-1.289-1.165-2.224s.497-1.712 1.165-2.224q.232-.178.495-.318L1.782 5.237a1 1 0 0 1 1.092-1.394l11.694 2.146L20.63.402a1 1 0 0 1 1.09-.176m-1.73 13.766l-8.53 2.828a3 3 0 0 0-.22-.185c-.668-.511-1.546-.799-2.476-.799H8.76L4.39 6.154l10.308 1.892a1 1 0 0 0 .859-.248l4.692-4.326zm-12.485 4.23c-.288.22-.382.455-.382.637s.094.416.382.637c.288.22.73.386 1.259.386s.97-.165 1.259-.386c.288-.22.382-.455.382-.637s-.094-.416-.382-.637c-.289-.22-.73-.386-1.26-.386s-.97.165-1.258.386" clip-rule="evenodd"/></svg>\n',description:"Polygonal selection"},Zde={onZoomInClick:void 0,onZoomOutClick:void 0,zoomInIconSvg:'\n<svg width="100%" height="100%" viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 12H20M12 4V20" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',zoomOutIconSvg:'\n<svg width="100%" height="100%" viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 12H20" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',duration:250,zoomIncrement:1.4};var Qde="style_module_zoomButton__738b35dc";Ace(".style_module_zoomButtons__738b35dc{height:50px;margin:3px;width:25px}.style_module_zoomButton__738b35dc{height:50%;margin:0;width:100%}.style_module_zoomInButton__738b35dc{border-radius:2px 2px 0 0}.style_module_zoomOutButton__738b35dc{border-radius:0 0 2px 2px}",{});const Jde=w.memo(w.forwardRef(function({style:e,className:t,onMount:n,duckDBConnection:i,...r},o){const s=rB(),a=x.useRef(null),l=x.useRef(),c=x.useRef(!1),u=x.useRef(!1),[d,h]=x.useState(!1);return c.current&&(u.current=!0),x.useEffect(()=>{if(!c.current&&a.current){const e=new due(a.current,r,i);l.current=e,c.current=!0,null==s||s.initCosmograph(l.current),h(!0),n&&n(l.current)}return()=>{var e;u.current&&(null==(e=l.current)||e.destroy(),h(!1))}},[]),x.useEffect(()=>{(async()=>{l.current&&d&&await l.current.setConfig(r)})()},[r,d]),x.useImperativeHandle(o,()=>l.current,[d]),w.createElement("div",{style:e,className:t,ref:a})})),ehe={display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",opacity:.25,fontSize:12,fontWeight:300,whiteSpace:"pre-wrap"},the=(e,t,n=new Set)=>{if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(n.has(e))return!0;n.add(e);for(let i=0;i<e.length;i++)if(!the(e[i],t[i],n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if("function"==typeof e&&"function"==typeof t)return e.toString()===t.toString();if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(e===t)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;if(n.has(e))return!0;n.add(e);for(const i in e)if(!the(e[i],t[i],n))return!1;return!0}return e===t};function nhe(e){const t=e.name,n=w.forwardRef((n,i)=>{const r=rB(),o=x.useRef(null),s=x.useRef(),a=x.useRef({}),[l,c]=x.useState(!1);return x.useEffect(()=>{if(o.current&&(null==r?void 0:r.cosmograph)){const{style:t,className:i,...l}=n;s.current=new e(r.cosmograph,o.current,l),a.current=n,c(!0)}return()=>{var e,t;null==(t=null==(e=s.current)?void 0:e.remove)||t.call(e)}},[null==r?void 0:r.cosmograph]),x.useEffect(()=>{var e,t;if(!the(n,a.current)){const{style:i,className:r,...o}=n;null==(t=null==(e=s.current)?void 0:e.setConfig)||t.call(e,o),a.current=n}},[n]),x.useImperativeHandle(i,()=>s.current,[l]),r?w.createElement("div",{id:t,style:n.style,className:n.className,ref:o}):w.createElement("div",{style:n.style,className:n.className},w.createElement("div",{style:ehe}," ",w.createElement("b",null,t)," should be used under ",w.createElement("b",null,"CosmographProvider")))});return n.displayName=t,w.memo(n)}nhe(Oue),nhe(class extends Fce{constructor(){super(...arguments),s(this,"_dataExtent"),s(this,"_visualExtent")}getCurrentSelection(){if(this.checkReady(()=>this.getCurrentSelection()))return this._uiComponent.getCurrentSelection()}getCurrentSelectionInPixels(){if(this.checkReady(()=>this.getCurrentSelectionInPixels()))return this._uiComponent.getCurrentSelectionInPixels()}getBarWidth(){if(this.checkReady(()=>this.getBarWidth()))return this._uiComponent.getBarWidth()}setSelection(e){var t,n,i;this.checkReady(()=>this.setSelection(e))&&(this._uiComponent.setSelection(e,!0),null==(t=this._client)||t.applyRangeFilter(e),null==(i=(n=this._config).onSelection)||i.call(n,e,!0))}getIsAnimationRunning(){return!!this.checkReady(()=>this.getIsAnimationRunning())&&this._uiComponent.getIsAnimationRunning()}playAnimation(){this.checkReady(()=>this.playAnimation())&&this._uiComponent.playAnimation()}pauseAnimation(){this.checkReady(()=>this.pauseAnimation())&&this._uiComponent.pauseAnimation()}stopAnimation(){this.checkReady(()=>this.stopAnimation())&&this._uiComponent.stopAnimation()}get defaultConfig(){return wue}get accessor(){return this._config.accessor??wue.accessor}async fetchData(){var e,t;if(await super.fetchData(),this._currentData){const n=null==(t=null==(e=this._currentData)?void 0:e.getChild(this.accessor))?void 0:t.toArray(),i=null==n?void 0:n.map(e=>e instanceof Date?e.getTime():e);this._dataExtent=(null==i?void 0:i.length)?Hy(i):void 0;const r=Rle(i??[],this._config.useQuantiles,this._config.customExtent);this._visualExtent=r,this._uiComponent.setTimeData(n,r),this.updateCrossfilteredData()}else this._uiComponent.setTimeData(void 0),this.updateHighlightedData(void 0);this._uiComponent.pauseAnimation()}createUIComponent(e){return new cae(e,this.createComponentConfig(this._config))}createComponentConfig(e){return{...e,formatter:t=>{const n="number"==typeof t?t:t.getTime(),i=((null==e?void 0:e.formatter)??Ose)(n);if(!this._config.useQuantiles||!this._dataExtent||!this._visualExtent)return i;const[r,o]=this._visualExtent,[s,a]=this._dataExtent;return n===r&&r>s?`< ${i}`:n===o&&o<a?`> ${i}`:i},onBrush:(e,t)=>{var n,i,r,o;let s=e;if(e&&this._config.useQuantiles&&this._visualExtent&&this._dataExtent){const t=e.map(e=>e instanceof Date?e.getTime():e),[n,i]=t,[r,o]=this._visualExtent,[a,l]=this._dataExtent,c=n===r?a:n,u=i===o?l:i;s=e[0]instanceof Date?[new Date(c),new Date(u)]:[c,u]}const a=null==(n=this._currentData)?void 0:n.getChild(this.accessor),l=s?Zte(null==a?void 0:a.type)?null==s?void 0:s.map(e=>+e):s.map(e=>new Date(e)):void 0;null==(i=this._client)||i.applyRangeFilter(l),null==(o=(r=this._config).onSelection)||o.call(r,s,t)},onBarHover:e=>{var t,n;null==(n=(t=this._config).onBarHover)||n.call(t,e)},onAnimationPlay:(e,t)=>{var n,i;null==(i=(n=this._config).onAnimationPlay)||i.call(n,e,t)},onAnimationPause:(e,t)=>{var n,i;null==(i=(n=this._config).onAnimationPause)||i.call(n,e,t)},onAnimationTick:e=>{var t,n;null==(n=(t=this._config).onAnimationTick)||n.call(t,e)}}}onResetClientSelections(){this.setSelection()}updateHighlightedData(e){const{highlightSelectedData:t}=this._config;t&&this._uiComponent.setHighlightedData(e)}async onConfigUpdate(){this._uiComponent.setConfig(this.createComponentConfig(this._config))}}),nhe(class extends Fce{constructor(){super(...arguments),s(this,"_dataExtent"),s(this,"_visualExtent")}getCurrentSelection(){if(this.checkReady(()=>this.getCurrentSelection()))return this._uiComponent.getCurrentSelection()}getCurrentSelectionInPixels(){if(this.checkReady(()=>this.getCurrentSelectionInPixels()))return this._uiComponent.getCurrentSelectionInPixels()}getBarWidth(){if(this.checkReady(()=>this.getBarWidth()))return this._uiComponent.getBarWidth()}setSelection(e){var t,n,i;this.checkReady(()=>this.setSelection(e))&&(this._uiComponent.setSelection(e,!0),null==(t=this._client)||t.applyRangeFilter(e),null==(i=(n=this._config).onSelection)||i.call(n,e,!0))}get defaultConfig(){return Sue}get accessor(){return this._config.accessor??Sue.accessor}async fetchData(){var e,t;if(await super.fetchData(),this._currentData){const n=null==(t=null==(e=this._currentData)?void 0:e.getChild(this.accessor))?void 0:t.toArray();this._dataExtent=(null==n?void 0:n.length)?Hy(n):void 0;const i=Rle(n??[],this._config.useQuantiles,this._config.customExtent);this._visualExtent=i,this._uiComponent.setHistogramData(n,i),this.updateCrossfilteredData()}else this._uiComponent.setHistogramData(void 0),this.updateHighlightedData(void 0)}createUIComponent(e){return new Tae(e,this.createComponentConfig(this._config))}createComponentConfig(e){return{...e,formatter:t=>{const n=((null==e?void 0:e.formatter)??Ose)(t);if(!this._config.useQuantiles||!this._dataExtent||!this._visualExtent)return n;const[i,r]=this._visualExtent,[o,s]=this._dataExtent;return t===i&&i>o?`< ${n}`:t===r&&r<s?`> ${n}`:n},onBrush:(e,t)=>{var n,i,r;let o=e;if(e&&this._config.useQuantiles&&this._visualExtent&&this._dataExtent){const[t,n]=e,[i,r]=this._visualExtent,[s,a]=this._dataExtent;o=[t===i?s:t,n===r?a:n]}null==(n=this._client)||n.applyRangeFilter(o),null==(r=(i=this._config).onSelection)||r.call(i,o,t)},onBarHover:e=>{var t,n;null==(n=(t=this._config).onBarHover)||n.call(t,e)}}}updateHighlightedData(e){const{highlightSelectedData:t}=this._config;t&&this._uiComponent.setHighlightedData(e)}onResetClientSelections(){this.setSelection()}async onConfigUpdate(){this._uiComponent.setConfig(this.createComponentConfig(this._config))}}),nhe(class extends Fce{setSelectedItem(e){var t;this.checkReady(()=>this.setSelectedItem(e))&&(this._uiComponent.setSelectedItem(e),e||null==(t=this._client)||t.resetFilter())}get defaultConfig(){return Mue}get accessor(){return this._config.accessor}onResetClientSelections(){this.setSelectedItem(void 0)}async fetchData(){var e,t;if(await super.fetchData(),this._currentData){this._uiComponent.resetList();const n=this.accessor?((e,t)=>{if(!(null==e?void 0:e.length))return[];const n=[],i=t;for(let r=0;r<e.length;r++){const t=e[r];if(Array.isArray(t))for(let e=0;e<t.length;e++){const r=t[e];null!=r&&n.push(i?i(r):r)}else null!=t&&n.push(i?i(t):t)}return n})(null==(t=null==(e=this._currentData)?void 0:e.getChild(this.accessor))?void 0:t.toArray(),String):[];this._uiComponent.setData(n),this.updateCrossfilteredData()}else this._uiComponent.setData(void 0),this.updateHighlightedData(void 0)}createUIComponent(e){return new Pae(e,this.createComponentConfig(this._config))}createComponentConfig(e){return{...e,onClick:e=>{var t,n,i,r,o,s,a,l,c;const u=this._uiComponent.getSelectedItem();e&&(null==u?void 0:u.label)===e.label?(null==(t=this._client)||t.resetFilter(),this.setSelectedItem(void 0),null==(i=(n=this._config).onClick)||i.call(n,void 0)):e?(null==(r=this._client)||r.applyExactFilter(e.label),this.setSelectedItem(e),null==(s=(o=this._config).onClick)||s.call(o,e)):(null==(a=this._client)||a.resetFilter(),this.setSelectedItem(void 0),null==(c=(l=this._config).onClick)||c.call(l,void 0))},onBarHover:e=>{var t,n;null==(n=(t=this._config).onBarHover)||n.call(t,e)}}}async onConfigUpdate(){this._uiComponent.setConfig(this.createComponentConfig(this._config))}updateHighlightedData(e){const{highlightSelectedData:t}=this._config;if(t)if(this._internalApi.crossfilter.isFilteringActive)if(e&&e.length>0){const t=e.map(e=>String(e));this._uiComponent.setHighlightedData(t)}else this._uiComponent.setHighlightedData([]);else this._uiComponent.setHighlightedData(void 0)}});const ihe=w.forwardRef((e,t)=>{const n=rB(),i=x.useRef(),r=x.useRef(e),[o,s]=x.useState(!1);return x.useEffect(()=>((null==n?void 0:n.cosmograph)&&(i.current=new Nde(n.cosmograph,e),r.current=e,s(!0)),()=>{var e;null==(e=i.current)||e.remove()}),[null==n?void 0:n.cosmograph]),x.useEffect(()=>{var t;the(e,r.current)||(null==(t=i.current)||t.setConfig(e),r.current=e)},[e]),x.useImperativeHandle(t,()=>i.current,[o]),n?null:w.createElement("div",{style:ehe}," ",w.createElement("b",null,"CosmographPopup")," should be used under ",w.createElement("b",null,"CosmographProvider"))});ihe.displayName="CosmographPopup",w.memo(ihe),nhe(class extends Eue{constructor(){super(...arguments),s(this,"_uiComponentConfig",{}),s(this,"_extent"),s(this,"_manuallyHidden",!1),s(this,"_originalMaxValue",0),s(this,"_pointSizeScaleUpdateHandler"),s(this,"_linkWidthScaleUpdateHandler"),s(this,"_pointSizeUpdateHandler"),s(this,"_linkWidthUpdateHandler"),s(this,"_currentSizeAccessor"),s(this,"_currentExtent"),s(this,"_remapValues",async e=>{const t=await this._getMappingFunction();return t?e.map(e=>+t(e)):e}),s(this,"_getExtentAndRange",async()=>{const e=await this._calculateExtent();return!e||isNaN(null==e?void 0:e[0])||isNaN(null==e?void 0:e[1])?{extent:void 0,range:void 0}:{extent:e,range:await this._calculateRange(e)}}),s(this,"_onSizeScaleUpdated",async()=>{await this._updateLegend()}),s(this,"_onSizeUpdated",async()=>{var e;await this._internalApi.configManager.configUpdated(),this._currentExtent=this._uiComponentConfig.extentLabels,this._currentSizeAccessor!==this.accessor?await this.fetchData():await this._updateExtents(),await this._updateLegend(),Gte(this._currentExtent,this._uiComponentConfig.extentLabels)||(null==(e=this._client)||e.resetFilter(),this.onResetClientSelections())})}get _isLinkAggregateStrategy(){const e=this._internalApi.public.activeLinkWidthStrategy;return!!this._config.useLinksData&&[nce.Count,nce.Sum,nce.Average].includes(e)}get _isPointDegreeStrategy(){const e=this._internalApi.public.activePointSizeStrategy;return!this._config.useLinksData&&[ece.Degree,ece.PreciseDegree].includes(e)}get domain(){var e;const t=null==(e=this._currentData)?void 0:e.toArray()[0];return this._currentData?[t.min,t.max]:void 0}get defaultConfig(){return Fde}get accessor(){const{linkWidthBy:e,pointSizeBy:t,pointIndexBy:n}=this._internalApi.config,i=this._isPointDegreeStrategy?n:t,r=e;return this._config.useLinksData?r:i}get _hasClickableEvents(){const{onClick:e,onMaxClick:t,onMinClick:n,overrideExtent:i}=this._config;return!i||void 0!==e||void 0!==t||void 0!==n}onInitialize(){this._pointSizeScaleUpdateHandler=async()=>{this._config.useLinksData||await this._onSizeScaleUpdated()},this._linkWidthScaleUpdateHandler=async()=>{this._config.useLinksData&&await this._onSizeScaleUpdated()},this._pointSizeUpdateHandler=async()=>{this._config.useLinksData||await this._onSizeUpdated()},this._linkWidthUpdateHandler=async()=>{this._config.useLinksData&&await this._onSizeUpdated()},this._internalApi.addEventListener("pointSizeScaleUpdated",this._pointSizeScaleUpdateHandler),this._internalApi.addEventListener("linkWidthScaleUpdated",this._linkWidthScaleUpdateHandler),this._internalApi.addEventListener("pointSizeUpdated",this._pointSizeUpdateHandler),this._internalApi.addEventListener("linkWidthUpdated",this._linkWidthUpdateHandler)}createUIComponent(e){return new Nae(e,this.createComponentConfig(this._config))}createComponentConfig(e){return{...e,onClick:e=>{var t,n;null==(n=(t=this._config).onClick)||n.call(t,e)},onHover:e=>{var t,n;null==(n=(t=this._config).onHover)||n.call(t,e)},onMaxClick:(e,t,n)=>{var i,r;null==(r=(i=this._config).onMaxClick)||r.call(i,e,t,n),this._hasClickableEvents&&this.onSelect("max")},onMinClick:(e,t,n)=>{var i,r;null==(r=(i=this._config).onMinClick)||r.call(i,e,t,n),this._hasClickableEvents&&this.onSelect("min")}}}compareSelectedItem(e){return this.selected===e}setSelectedItem(e){var t;if(null==(t=this._uiComponent)?void 0:t.sizeElements)if(e){const t=e,n="min"===e?"max":"min";this._uiComponent.sizeElements[t].classList.remove(zde),this._uiComponent.sizeElements[t].classList.add(Bde),this._uiComponent.sizeElements[n].classList.remove(Bde),this._uiComponent.sizeElements[n].classList.add(zde)}else this._uiComponent.sizeElements.min.classList.remove(Bde,zde),this._uiComponent.sizeElements.max.classList.remove(Bde,zde)}_filterPointsByDegree(e,t){if(!this._isPointDegreeStrategy)return;const{public:{pointDegrees:n}}=this._internalApi;return void 0!==e&&(null==n?void 0:n.length)?Ple(n,e,t):void 0}applyFilter(e){var t,n,i,r,o,s,a,l,c,u,d,h;if("min"===e)if(this._isPointDegreeStrategy){const e=this._filterPointsByDegree(null==(t=this._extent)?void 0:t[0],(e,t)=>e<=t);null==(n=this._client)||n.applyInFilter(e)}else if(this._isLinkAggregateStrategy){const e=this._createLinkAggregatePredicate(null==(i=this._extent)?void 0:i[0],"min");null==(r=this._client)||r.applyFilter(e)}else null==(s=this._client)||s.applyLessOrEqFilter(null==(o=this._extent)?void 0:o[0]);else if(this._isPointDegreeStrategy){const e=this._filterPointsByDegree(null==(a=this._extent)?void 0:a[1],(e,t)=>e>=t);null==(l=this._client)||l.applyInFilter(e)}else if(this._isLinkAggregateStrategy){const e=this._createLinkAggregatePredicate(null==(c=this._extent)?void 0:c[1],"max");null==(u=this._client)||u.applyFilter(e)}else null==(h=this._client)||h.applyGreaterOrEqFilter(null==(d=this._extent)?void 0:d[1])}async getCurrentData(){await this._internalApi.configManager.configUpdated();const{summary:{linksSummary:e,pointsSummary:t}}=this._internalApi,n=this._config.useLinksData?e:t,i=null==n?void 0:n.find(e=>e.column_name===this.accessor);if(i)return this._config.useQuantiles?await this._getQuantiledExtentDataForColumn():q9({min:[Number(i.min)],max:[Number(i.max)]})}async fetchData(){var e;this._currentSizeAccessor=this.accessor,this.onResetClientSelections();const{public:{activeLinkWidthStrategy:t}}=this._internalApi;this._config.useLinksData&&t===nce.Count?(this._isValidAccessor=!0,this._currentData=void 0,null==(e=this._client)||e.setActive(!0)):await super.fetchData(),await this._updateExtents(),void 0===this._uiComponentConfig.extent&&this._uiComponent.showState()}async onConfigUpdate(){this._manuallyHidden=!!this._config.hidden,await this._updateLegend()}async shouldUpdateComponentData(){return!this._currentSizeAccessor||(await this._internalApi.configManager.configUpdated(),this._currentSizeAccessor!==this.accessor)}_getPointsDegreeExtent(){const{public:{activePointSizeStrategy:e,pointDegrees:t}}=this._internalApi;if(!(null==t?void 0:t.length))return[0,0];if(e===ece.Degree)return Lle(t,Xte);const[n,i]=Hy(t);return Xte(n,i)}async _getQuantiledExtentDataForColumn(){const e=`\n        SELECT \n          quantile("${this.accessor}", 0.05) as min,\n          quantile("${this.accessor}", 0.95) as max\n        FROM ${this.tableName}\n      `;return await this._internalApi.dbCoordinator.query(e)}_calculateExtent(){const{public:{activeLinkWidthStrategy:e}}=this._internalApi,t=e===nce.Count;if(!this._config.useLinksData)return this._isPointDegreeStrategy?this._getPointsDegreeExtent():this.domain;if(this._isLinkAggregateStrategy){if(!t&&!this.accessor)return;const{linkAggregationManager:{countCache:n,widthSumCache:i}}=this._internalApi;if(!n||0===n.size)return this.domain;const r=Array.from(n.entries(),([n,r])=>{if(t)return r;if(e===nce.Sum)return(null==i?void 0:i.get(n))??0;{const e=(null==i?void 0:i.get(n))??0;return r>0?e/r:0}});return Lle(r,t?Xte:void 0)}return this.domain}async _calculateRange(e){const{config:t,public:{activePointSizeStrategy:n}}=this._internalApi;return this._config.useLinksData||t.pointSizeByFn&&n!==ece.Auto&&!this._isPointDegreeStrategy?await this._remapValues(e):n===ece.Direct?e:t.pointSizeRange||fle}async _updateExtents(){const{public:{activePointSizeStrategy:e,activeLinkWidthStrategy:t}}=this._internalApi;if(!this._isValidAccessor||!this.useLinksData&&e===ece.Single||this.useLinksData&&t===nce.Single)this._uiComponentConfig.extent=void 0;else if(this._config.overrideExtent)this._uiComponentConfig.extent=this._config.overrideExtent,this._uiComponentConfig.extentLabels=this._config.overrideExtent;else{const{extent:e,range:t}=await this._getExtentAndRange();(e||e&&this._isPointDegreeStrategy&&(0!==e[0]||0!==e[1]))&&t?(this._originalMaxValue=e[1],this._extent=e,this._uiComponentConfig.extent=t[0]<0?[0,t[1]]:t,this._uiComponentConfig.extentLabels=this._config.extentLabels??[e[0],e[1]]):this._uiComponentConfig.extent=void 0}}async _updateLegend(){await this._updateSizeMultiplier(),this._updateLegendVisibility(),this._checkEvents(),this._updateLabels(),this._uiComponentConfig.form=this._config.useLinksData?"line":"point",this._uiComponent.setConfig(this.createComponentConfig({...this._config,...this._uiComponentConfig}))}_updateLabels(){const{showSublabels:e,useQuantiles:t}=this._config,{public:{activePointSizeStrategy:n}}=this._internalApi,i=this._getLabelValue();this._uiComponentConfig.label=i,this._uiComponentConfig.showSublabels=e??(this._isPointDegreeStrategy?n===ece.Degree:t)}_checkEvents(){const{enableEvents:e,overrideExtent:t,onHover:n}=this._config;let i=e??!0;t&&(i=e??(this._hasClickableEvents||void 0!==n)),this._uiComponentConfig.enableEvents=i}_updateLegendVisibility(){const{extent:e,sizeMultiplier:t}=this._uiComponentConfig,{hideWhenSizeMoreThan:n}=this._config;let i=this._manuallyHidden;if(!i&&e){const r=t?t*e[1]:e[1];n&&n<r&&(i=!0)}this._uiComponentConfig.hidden=i}async _updateSizeMultiplier(){const{config:e}=this._internalApi,t=this._internalApi.public.getZoomLevel()??1,n=this._config.useLinksData?e.scaleLinksOnZoom:e.scalePointsOnZoom,i=this._config.useLinksData?e.linkWidthScale??1:e.pointSizeScale??1;this._uiComponentConfig.sizeMultiplier=n?i*t:i,n&&await this._updateMaxLabel()}async _updateMaxLabel(){const{config:e,public:{maxPointSize:t}}=this._internalApi,{extentLabels:n,sizeMultiplier:i}=this._uiComponentConfig;if(e.pointSizeByFn&&n&&!this._uiComponent.isHidden&&i){const e=await this._calcVisibleMaxLabel(t/i,n[0],this._originalMaxValue);this._uiComponentConfig.extentLabels=[n[0],e]}}async _calcVisibleMaxLabel(e,t,n){const i=await this._getMappingFunction();if(i){const r=e/i(1),o=Math.min(Math.abs(n),Math.max(Math.abs(t),Math.abs(r))),s=Math.sign(n)*o;let a=0;const l=Math.abs(s);return l>0&&(a=l<.001?6:l<.01?4:l<.1?3:l<1?2:l<10?1:0),Number(s.toFixed(a))}return 0}_getLabelValue(){const{useLinksData:e,overrideExtent:t}=this._config,{public:{activeLinkWidthStrategy:n}}=this._internalApi;if(this._isLinkAggregateStrategy)return n===nce.Count?"count":n===nce.Sum?`sum by ${this.accessor}`:n===nce.Average?`average by ${this.accessor}`:this.accessor;if(!t&&!e&&this._isPointDegreeStrategy)return"connections count";const i=this._config.labelResolver;return i&&"function"==typeof i?i(this.accessor):i??this.accessor}async _getMappingFunction(){return this._config.useLinksData?await this._internalApi.public.getActiveLinkWidthFn():await this._internalApi.public.getActivePointSizeFn()}_createLinkAggregatePredicate(e,t){if(void 0===e)return;const{public:{activeLinkWidthStrategy:n}}=this._internalApi,{linkSourceIndexBy:i,linkTargetIndexBy:r,linkWidthBy:o}=this._internalApi.config;if(!i||!r)return;let s,a;switch(n){case nce.Count:s=$0();break;case nce.Sum:if(!o)return;s=G0(o);break;case nce.Average:if(!o)return;s=W0(o);break;default:return}a="min"===t?c1(s,h0(e)):u1(s,h0(e));const l=F0.from(this.tableName).select(i,r).groupby(i,r).having(a);return f1`(${u0(i)}, ${u0(r)}) IN (${l})`}hide(){this._manuallyHidden=!0,this.checkReady(()=>this.hide())&&this._uiComponent.hide()}show(){this._manuallyHidden=!1,this.checkReady(()=>this.show())&&this._uiComponent.show()}remove(){this._internalApi.removeEventListener("pointSizeScaleUpdated",this._pointSizeScaleUpdateHandler),this._internalApi.removeEventListener("linkWidthScaleUpdated",this._linkWidthScaleUpdateHandler),this._internalApi.removeEventListener("pointSizeUpdated",this._pointSizeUpdateHandler),this._internalApi.removeEventListener("linkWidthUpdated",this._linkWidthUpdateHandler),super.remove()}}),nhe(class extends Eue{constructor(){super(...arguments),s(this,"_uiComponentConfig",{}),s(this,"_linkColorUpdateHandler"),s(this,"_pointColorUpdateHandler"),s(this,"_extent"),s(this,"_currentColorAccessor"),s(this,"_currentExtent"),s(this,"_remapValues",async e=>{if(!e)return;const[t,n]=e,i=await this._getMappingFunction();return i?Array.from({length:this._config.steps},(e,r)=>{const o=t+r/(this._config.steps-1)*(n-t);return i(o)}):void 0}),s(this,"_getExtentAndRange",async()=>{const e=await this._calculateExtent();return!e||isNaN(null==e?void 0:e[0])||isNaN(null==e?void 0:e[1])?{extent:void 0,range:void 0}:{extent:e,range:await this._calculateRange(e)}})}get _isLinkAggregateStrategy(){const e=this._internalApi.public.activeLinkColorStrategy;return!!this._config.useLinksData&&[Qle.Count,Qle.Sum,Qle.Average].includes(e)}get _isPointDegreeStrategy(){const e=this._internalApi.public.activePointColorStrategy;return!this._config.useLinksData&&[Kle.Degree,Kle.PreciseDegree].includes(e)}get domain(){var e;const t=null==(e=this._currentData)?void 0:e.toArray()[0];return this._currentData?[t.min,t.max]:void 0}get defaultConfig(){return Ude}get accessor(){const{linkColorBy:e,pointColorBy:t,pointIndexBy:n}=this._internalApi.config,i=this._isPointDegreeStrategy?n:t,r=e;return this._config.useLinksData?r:i}get _hasClickableEvents(){const{onClick:e,onMaxClick:t,onMinClick:n,overrideColors:i}=this._config;return!i||void 0!==e||void 0!==t||void 0!==n}onInitialize(){this._linkColorUpdateHandler=async()=>{this._config.useLinksData&&await this._onColorUpdated()},this._pointColorUpdateHandler=async()=>{this._config.useLinksData||await this._onColorUpdated()},this._internalApi.addEventListener("pointColorUpdated",this._pointColorUpdateHandler),this._internalApi.addEventListener("linkColorUpdated",this._linkColorUpdateHandler)}createUIComponent(e){return new Vae(e,this.createComponentConfig(this._config))}createComponentConfig(e){return{...e,onClick:e=>{var t,n;null==(n=(t=this._config).onClick)||n.call(t,e)},onHover:e=>{var t,n;null==(n=(t=this._config).onHover)||n.call(t,e)},onMaxClick:(e,t,n)=>{var i,r;null==(r=(i=this._config).onMaxClick)||r.call(i,e,t,n),this._hasClickableEvents&&this.onSelect("max")},onMinClick:(e,t,n)=>{var i,r;null==(r=(i=this._config).onMinClick)||r.call(i,e,t,n),this._hasClickableEvents&&this.onSelect("min")}}}compareSelectedItem(e){return this.selected===e}setSelectedItem(e){var t,n,i,r,o,s;if(e){const o=e,s="min"===e?"max":"min";null==(t=this._uiComponent.extentElements)||t[o].classList.remove(Vde),null==(n=this._uiComponent.extentElements)||n[o].classList.add(jde),null==(i=this._uiComponent.extentElements)||i[s].classList.remove(jde),null==(r=this._uiComponent.extentElements)||r[s].classList.add(Vde)}else null==(o=this._uiComponent.extentElements)||o.min.classList.remove(jde,Vde),null==(s=this._uiComponent.extentElements)||s.max.classList.remove(jde,Vde)}_filterPointsByDegree(e,t){if(!this._isPointDegreeStrategy)return;const{public:{pointDegrees:n}}=this._internalApi;return void 0!==e&&(null==n?void 0:n.length)?Ple(n,e,t):void 0}applyFilter(e){var t,n,i,r,o,s,a,l,c,u,d,h;if("min"===e)if(this._isPointDegreeStrategy){const e=this._filterPointsByDegree(null==(t=this._extent)?void 0:t[0],(e,t)=>e<=t);null==(n=this._client)||n.applyInFilter(e)}else if(this._isLinkAggregateStrategy){const e=this._createLinkAggregatePredicate(null==(i=this._extent)?void 0:i[0],"min");null==(r=this._client)||r.applyFilter(e)}else null==(s=this._client)||s.applyLessOrEqFilter(null==(o=this._extent)?void 0:o[0]);else if(this._isPointDegreeStrategy){const e=this._filterPointsByDegree(null==(a=this._extent)?void 0:a[1],(e,t)=>e>=t);null==(l=this._client)||l.applyInFilter(e)}else if(this._isLinkAggregateStrategy){const e=this._createLinkAggregatePredicate(null==(c=this._extent)?void 0:c[1],"max");null==(u=this._client)||u.applyFilter(e)}else null==(h=this._client)||h.applyGreaterOrEqFilter(null==(d=this._extent)?void 0:d[1])}async getCurrentData(){await this._internalApi.configManager.configUpdated();const{summary:{linksSummary:e,pointsSummary:t}}=this._internalApi,n=this._config.useLinksData?e:t,i=null==n?void 0:n.find(e=>e.column_name===this.accessor);if(i)return this._config.useQuantiles?await this._getQuantiledExtentDataForColumn():q9({min:[Number(i.min)],max:[Number(i.max)]})}async fetchData(){var e;this._currentColorAccessor=null==(e=this.accessor)?void 0:e.toString(),this.onResetClientSelections(),await super.fetchData(),await this._updateExtents(),void 0===this._uiComponentConfig.extent&&this._uiComponent.showState()}async onConfigUpdate(){await this._updateLegend()}async shouldUpdateComponentData(){return!this._currentColorAccessor||(await this._internalApi.configManager.configUpdated(),this._currentColorAccessor!==this.accessor)}_createLinkAggregatePredicate(e,t){if(void 0===e)return;const{public:{activeLinkColorStrategy:n}}=this._internalApi,{linkSourceIndexBy:i,linkTargetIndexBy:r,linkColorBy:o}=this._internalApi.config;if(!i||!r)return;let s,a;switch(n){case Qle.Count:s=$0();break;case Qle.Sum:if(!o)return;s=G0(o);break;case Qle.Average:if(!o)return;s=W0(o);break;default:return}a="min"===t?c1(s,h0(e)):u1(s,h0(e));const l=F0.from(this.tableName).select(i,r).groupby(i,r).having(a);return f1`(${u0(i)}, ${u0(r)}) IN (${l})`}async _onColorUpdated(){var e;await this._internalApi.configManager.configUpdated(),this._currentExtent=this._uiComponentConfig.extentLabels,this._currentColorAccessor!==this.accessor?await this.fetchData():await this._updateExtents(),await this._updateLegend(),Gte(this._currentExtent,this._uiComponentConfig.extentLabels)||(null==(e=this._client)||e.resetFilter(),this.onResetClientSelections())}_getPointsDegreeExtent(){const{public:{activePointColorStrategy:e,pointDegrees:t}}=this._internalApi;if(!(null==t?void 0:t.length))return[0,0];if(e===Kle.Degree)return Lle(t,Xte);const[n,i]=Hy(t);return Xte(n,i)}async _getQuantiledExtentDataForColumn(){const e=`\n        SELECT \n          quantile("${this.accessor}", 0.05) as min,\n          quantile("${this.accessor}", 0.95) as max\n        FROM ${this.tableName}\n      `;return await this._internalApi.dbCoordinator.query(e)}_calculateExtent(){const{public:{activeLinkColorStrategy:e}}=this._internalApi,t=e===Qle.Count;if(!this._config.useLinksData)return this._isPointDegreeStrategy?this._getPointsDegreeExtent():this.domain;if(this._isLinkAggregateStrategy){if(!this.accessor)return;const{linkAggregationManager:{countCache:n,colorSumCache:i}}=this._internalApi;if(!n||0===n.size)return this.domain;const r=Array.from(n.entries(),([n,r])=>{if(t)return r;if(e===Qle.Sum)return(null==i?void 0:i.get(n))??0;{const e=(null==i?void 0:i.get(n))??0;return r>0?e/r:0}});return Lle(r,t?Xte:void 0)}return this.domain}async _calculateRange(e){const{public:{activePointColorStrategy:t}}=this._internalApi;if(this._config.useLinksData||t!==Kle.Map&&t!==Kle.LinkDirection)return await this._remapValues(e);this._uiComponent.showState()}async _getMappingFunction(){return this._config.useLinksData?await this._internalApi.public.getActiveLinkColorFn():await this._internalApi.public.getActivePointColorFn()}async _updateExtents(){const{public:{activePointColorStrategy:e,activeLinkColorStrategy:t}}=this._internalApi;if(!this._isValidAccessor||!this.useLinksData&&e===Kle.Single||this.useLinksData&&t===Qle.Single)this._uiComponentConfig.extent=void 0;else if(this._config.overrideColors)this._uiComponentConfig.extent=this._config.overrideColors,this._uiComponentConfig.extentLabels=this._config.extentLabels;else{const{extent:e,range:t}=await this._getExtentAndRange();e||e&&this._isPointDegreeStrategy&&(0!==e[0]||0!==e[1])?(this._extent=e,this._uiComponentConfig.extent=t,this._uiComponentConfig.extentLabels=this._config.extentLabels??[e[0],e[1]]):this._uiComponentConfig.extent=void 0}}_checkEvents(){const{enableEvents:e,overrideColors:t,onHover:n}=this._config;let i=e??!0;t&&(i=e??(this._hasClickableEvents||void 0!==n)),this._uiComponentConfig.enableEvents=i}_updateLabels(){const{showSublabels:e,useQuantiles:t}=this._config,{public:{activePointColorStrategy:n}}=this._internalApi;this._uiComponentConfig.label=this._getLabelValue(),this._uiComponentConfig.showSublabels=e??(this._isPointDegreeStrategy?n===Kle.Degree:t)}async _updateLegend(){const{public:{activePointColorStrategy:e,activeLinkColorStrategy:t}}=this._internalApi,{overrideColors:n,useDiscreteColors:i}=this._config,r=this._config.useLinksData?t===Qle.Categorical:e===Kle.Categorical;this._uiComponentConfig.discreteColors=n?i:r,this._checkEvents(),this._updateLabels(),this._uiComponent.setConfig(this.createComponentConfig({...this._config,...this._uiComponentConfig}))}_getLabelValue(){const{useLinksData:e,overrideColors:t}=this._config,{public:{activeLinkColorStrategy:n}}=this._internalApi;if(this._isLinkAggregateStrategy)return n===Qle.Count?"count":n===Qle.Sum?`sum by ${this.accessor}`:n===Qle.Average?`average by ${this.accessor}`:this.accessor;if(!t&&!e&&this._isPointDegreeStrategy)return"connections count";const i=this._config.labelResolver;return i&&"function"==typeof i?i(this.accessor):i??this.accessor}hide(){this.checkReady(()=>this.hide())&&this._uiComponent.hide()}show(){this.checkReady(()=>this.show())&&this._uiComponent.show()}remove(){this._internalApi.removeEventListener("pointColorUpdated",this._pointColorUpdateHandler),this._internalApi.removeEventListener("linkColorUpdated",this._linkColorUpdateHandler),super.remove()}}),nhe(class extends Eue{constructor(){super(...arguments),s(this,"_uiComponentConfig",{}),s(this,"_linkColorUpdateHandler"),s(this,"_pointColorUpdateHandler"),s(this,"_currentColorAccessor"),s(this,"_fetchDataPromise",null),s(this,"_onColorUpdated",async()=>{this._fetchDataPromise&&await this._fetchDataPromise,await this._internalApi.configManager.configUpdated(),this._currentColorAccessor!==this.accessor?await this.fetchData():await this._updateItems(),await this._updateLegend()})}get _summary(){const{summary:{linksSummary:e,pointsSummary:t}}=this._internalApi;return this._config.useLinksData?e:t}get _isLinkDirectionStrategy(){return!this.useLinksData&&this._internalApi.public.activePointColorStrategy===Kle.LinkDirection}get defaultConfig(){return $de}get accessor(){const{linkColorBy:e,pointColorBy:t,pointIndexBy:n}=this._internalApi.config;return this._config.useLinksData?e:this._isLinkDirectionStrategy?n:t}get _hasClickableEvents(){const{onClick:e,overrideItems:t}=this._config;return!t||void 0!==e}onInitialize(){this._linkColorUpdateHandler=async()=>{this._config.useLinksData&&await this._onColorUpdated()},this._pointColorUpdateHandler=async()=>{this._config.useLinksData||await this._onColorUpdated()},this._internalApi.addEventListener("pointColorUpdated",this._pointColorUpdateHandler),this._internalApi.addEventListener("linkColorUpdated",this._linkColorUpdateHandler)}createUIComponent(e){return new Kae(e,this.createComponentConfig(this._config))}createComponentConfig(e){return{...e,onClick:(e,t)=>{var n,i;null==(i=(n=this._config).onClick)||i.call(n,e,t),this._hasClickableEvents&&this.onSelect(t)},onHover:(e,t)=>{var n,i;null==(i=(n=this._config).onHover)||i.call(n,e,t)},onShowMoreClick:e=>{var t,n;null==(n=(t=this._config).onShowMoreClick)||n.call(t,e),this._config.resetSelectionOnCollapse&&this.selected&&!e&&this.onSelect(void 0)}}}compareSelectedItem(e){var t;return(null==(t=this.selected)?void 0:t.label)===(null==e?void 0:e.label)}setSelectedItem(e){this._uiComponent.setSelectedItem(e)}applyFilter(e){var t,n;if(this._isLinkDirectionStrategy){if(!e)return;const n=Number(Wde[e.label]),i=this._internalApi.public.pointDirections;if(!i)return;const r=Ple(i,n,(e,t)=>e===t);null==(t=this._client)||t.applyInFilter(r)}else null==(n=this._client)||n.applyExactFilter(null==e?void 0:e.label)}async fetchData(){return this._fetchDataPromise&&await this._fetchDataPromise,this._fetchDataPromise=(async()=>{var e;try{this._currentColorAccessor=null==(e=this.accessor)?void 0:e.toString(),await super.fetchData(),await this._updateItems(),this.onResetClientSelections()}finally{this._fetchDataPromise=null}})(),this._fetchDataPromise}async onConfigUpdate(){await this._updateLegend()}async getCurrentData(){var e;if(await this._internalApi.configManager.configUpdated(),(null==(e=this._summary)?void 0:e.find(e=>e.column_name===this.accessor))&&this._summary)return await this._getDistinctValues(this._summary)}async shouldUpdateComponentData(){return!this._currentColorAccessor||(await this._internalApi.configManager.configUpdated(),this._currentColorAccessor!==this.accessor)}async _getDistinctValues(e){var t;const{public:{activePointColorStrategy:n}}=this._internalApi;let i="DESC";!this.useLinksData&&[Kle.Continuous,Kle.Categorical].includes(n)&&(i=this._config.sortOrder??"DESC");const r=`ORDER BY "${this._config.sortBy??"count"}" ${i}`,o=null==(t=e.find(e=>e.column_name===this.accessor))?void 0:t.column_type;return await this._internalApi.dbCoordinator.query((e=>"VARCHAR"===e?`SELECT "${this.accessor}", COUNT(*) as count \n                FROM ${this.tableName}\n                GROUP BY "${this.accessor}"\n                ${r}`:`SELECT DISTINCT "${this.accessor}"\n                FROM ${this.tableName}\n                ORDER BY "${this.accessor}" ${this._config.sortOrder||i}`)(o))}_checkEvents(){const{enableEvents:e,overrideItems:t,onHover:n}=this._config;let i=e??!0;t&&(i=e??(this._hasClickableEvents||void 0!==n)),this._uiComponentConfig.enableEvents=i}async _updateLegend(){this._checkEvents();const e=this.accessor;if(this._config.showLabel){const t=this._config.labelResolver,n="function"==typeof t?t(e):t;this._uiComponentConfig.label=n??e}else this._uiComponentConfig.label=void 0;this._uiComponent.setConfig(this.createComponentConfig({...this._config,...this._uiComponentConfig}))}async _updateItems(){var e,t;const{activePointColorStrategy:n,activeLinkColorStrategy:i}=this._internalApi.public,{overrideItems:r}=this._config;if(r)this._uiComponentConfig.items=r;else{if(!this.useLinksData&&n===Kle.LinkDirection){const e=this._internalApi.public.pointDirections;if(e){const t=Array.from(new Set(e)).map(String);this._uiComponentConfig.items=await this._createLegendItems(t)}return}const r=[Kle.Degree,Kle.PreciseDegree,Kle.Single,Kle.Direct].includes(n),o=[Qle.Direct,Qle.Single].includes(i);if(!this.accessor||!this.useLinksData&&r||this.useLinksData&&o)return this._uiComponentConfig.items=void 0,void this._uiComponent.showState();if(null==(e=this._currentData)?void 0:e.numRows){const e=null==(t=this._currentData.getChildAt(0))?void 0:t.toArray();if(e)return void(this._uiComponentConfig.items=await this._createLegendItems(e))}this._uiComponentConfig.items=void 0}}async _createLegendItems(e){const{public:{activePointColorStrategy:t},config:n}=this._internalApi,i=await this._getMappingFunction();if(i){const r=$le(null==n?void 0:n.unknownColor,yle),o=e=>({color:$le(i(e),r),label:String(e)});if(!this.useLinksData&&t===Kle.LinkDirection)return Array.from(e,e=>({color:$le(i(e),r),label:Hde[e]}));if(this.useLinksData||t!==Kle.Map)return Array.from(e,o);{const t=new Set(Object.keys(n.pointColorByMap??{}));return[...Array.from(e.filter(e=>t.has(e)),o),...this._config.hideUnknown?[]:Array.from(e.filter(e=>!t.has(e)),o)]}}return[]}async _getMappingFunction(){return this._config.useLinksData?await this._internalApi.public.getActiveLinkColorFn():await this._internalApi.public.getActivePointColorFn()}show(){this.checkReady(()=>this.show())&&this._uiComponent.show()}hide(){this.checkReady(()=>this.hide())&&this._uiComponent.hide()}remove(){this._internalApi.removeEventListener("pointColorUpdated",this._pointColorUpdateHandler),this._internalApi.removeEventListener("linkColorUpdated",this._linkColorUpdateHandler),super.remove()}}),nhe(class{constructor(e,t,n={}){s(this,"_button"),this._button=new ele(t,n)}setConfig(e={}){this._button.setConfig(e)}remove(){this._button.destroy()}show(){this._button.show()}hide(){this._button.hide()}}),nhe(class{constructor(e,t,n={}){s(this,"_internalApi"),s(this,"_config"),s(this,"_uiButtonConfig"),s(this,"_fitViewButton"),s(this,"_handleClick",()=>{var e,t;null==(t=(e=this._config).onClick)||t.call(e),this._internalApi.public.fitView(this._config.duration,this._config.padding)}),s(this,"_show",()=>{this._fitViewButton.show()}),this._internalApi=Mce(e),this._fitViewButton=new ele(t),this._internalApi.addEventListener("graphRebuilt",this._show),this.setConfig(n)}setConfig(e={}){this._config=Rse(Gde,e),this._uiButtonConfig={...this._config,onClick:this._handleClick},this._fitViewButton.setConfig(this._uiButtonConfig)}remove(){this._fitViewButton.destroy(),this._internalApi.removeEventListener("graphRebuilt",this._show)}}),nhe(class{constructor(e,t,n={}){s(this,"_internalApi"),s(this,"_config",Yde),s(this,"_playPauseButton"),s(this,"_update",()=>{this._internalApi.cosmos&&(!1===this._internalApi.cosmos.config.enableSimulation?this._playPauseButton.hide():this._playPauseButton.show(),this._config.iconSvg=this._internalApi.public.isSimulationRunning?'\n<svg width="100%" height="100%" viewBox="0 0 14 18" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.91659 0.666656H0.333252V17.3333H4.91659V0.666656ZM13.6666 0.666656H9.08325V17.3333H13.6666V0.666656Z"/>\n</svg>\n':qde,this._playPauseButton.setConfig(this._config))}),this._internalApi=Mce(e),this._playPauseButton=new ele(t,{iconSvg:qde}),this._internalApi.addEventListener("onSimulationEnd",this._update),this._internalApi.addEventListener("onSimulationStart",this._update),this._internalApi.addEventListener("onSimulationPause",this._update),this._internalApi.addEventListener("graphRebuilt",this._update),this.setConfig(n)}setConfig(e={}){this._config=Rse(Yde,e),this._config.onClick=()=>{var t;if(null==(t=null==e?void 0:e.onClick)||t.call(e),0!==this._internalApi.public.progress||this._internalApi.public.isSimulationRunning)if(this._internalApi.public.isSimulationRunning)this._internalApi.public.pause();else{if(1===this._internalApi.public.progress)return void this._internalApi.public.start();this._internalApi.public.unpause()}else this._internalApi.public.start()},this._update()}remove(){this._playPauseButton.destroy(),this._internalApi.removeEventListener("onSimulationEnd",this._update),this._internalApi.removeEventListener("onSimulationStart",this._update),this._internalApi.removeEventListener("onSimulationPause",this._update),this._internalApi.removeEventListener("graphRebuilt",this._update)}}),nhe(class{constructor(e,t,n={}){s(this,"_internalApi"),s(this,"_config"),s(this,"_selectRectButton"),s(this,"_rectSelectedHandler"),s(this,"_show",()=>{this._selectRectButton.show()}),this._internalApi=Mce(e),this._config=Rse(Xde,n),this._config.onClick=()=>{var e;null==(e=null==n?void 0:n.onClick)||e.call(n),this._internalApi.public.activateRectSelection()},this._selectRectButton=new ele(t,this._config),this._rectSelectedHandler=()=>{this._internalApi.public.deactivateRectSelection()},this._internalApi.addEventListener("graphRebuilt",this._show),this._internalApi.addEventListener("rectSelected",this._rectSelectedHandler)}setConfig(e={}){this._config=Rse(Xde,e)}remove(){this._selectRectButton.destroy(),this._internalApi.removeEventListener("graphRebuilt",this._show),this._internalApi.removeEventListener("rectSelected",this._rectSelectedHandler)}}),nhe(class{constructor(e,t,n={}){s(this,"_internalApi"),s(this,"_config"),s(this,"_selectPolygonButton"),s(this,"_polygonSelectedHandler"),s(this,"_show",()=>{this._selectPolygonButton.show()}),this._internalApi=Mce(e),this._config=Rse(Kde,n),this._config.onClick=()=>{var e;null==(e=null==n?void 0:n.onClick)||e.call(n),this._internalApi.public.activatePolygonalSelection()},this._selectPolygonButton=new ele(t,this._config),this._polygonSelectedHandler=()=>{this._internalApi.public.deactivatePolygonalSelection()},this._internalApi.addEventListener("graphRebuilt",this._show),this._internalApi.addEventListener("polygonSelected",this._polygonSelectedHandler)}setConfig(e={}){this._config=Rse(Kde,e)}remove(){this._selectPolygonButton.destroy(),this._internalApi.removeEventListener("graphRebuilt",this._show),this._internalApi.removeEventListener("polygonSelected",this._polygonSelectedHandler)}}),nhe(class{constructor(e,t,n){s(this,"_internalApi"),s(this,"_config"),s(this,"_zoomInButtonConfig"),s(this,"_zoomOutButtonConfig"),s(this,"_zoomInButton"),s(this,"_zoomOutButton"),s(this,"_zoomInButtonDiv"),s(this,"_zoomOutButtonDiv"),s(this,"_show",()=>{this._zoomInButton.show(),this._zoomOutButton.show()}),this._internalApi=Mce(e),t.classList.add("style_module_zoomButtons__738b35dc"),this._zoomInButtonDiv=document.createElement("div"),this._zoomInButtonDiv.classList.add(Qde,"style_module_zoomInButton__738b35dc"),this._zoomOutButtonDiv=document.createElement("div"),this._zoomOutButtonDiv.classList.add(Qde,"style_module_zoomOutButton__738b35dc"),t.appendChild(this._zoomInButtonDiv),t.appendChild(this._zoomOutButtonDiv),this._zoomInButton=new ele(this._zoomInButtonDiv),this._zoomOutButton=new ele(this._zoomOutButtonDiv),this._internalApi.addEventListener("graphRebuilt",this._show),this.setConfig(n??{})}setConfig(e){this._config=Rse(Zde,e??{}),this._zoomInButtonConfig={onClick:()=>{var e,t;const n=this._internalApi.public.getZoomLevel();if(n){const e=this._config.zoomIncrement??Zde.zoomIncrement;this._internalApi.public.setZoomLevel(n*e,this._config.duration)}null==(t=(e=this._config).onZoomInClick)||t.call(e)},iconSvg:this._config.zoomInIconSvg},this._zoomOutButtonConfig={onClick:()=>{var e,t;const n=this._internalApi.public.getZoomLevel();if(n){const e=this._config.zoomIncrement??Zde.zoomIncrement;this._internalApi.public.setZoomLevel(n/e,this._config.duration)}null==(t=(e=this._config).onZoomOutClick)||t.call(e)},iconSvg:this._config.zoomOutIconSvg},this._zoomInButton.setConfig(this._zoomInButtonConfig),this._zoomOutButton.setConfig(this._zoomOutButtonConfig)}remove(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._internalApi.removeEventListener("graphRebuilt",this._show)}});var rhe,ohe={},she={};function ahe(){if(rhe)return she;rhe=1;var e=v();function t(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=Object.prototype.hasOwnProperty,i=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r={},o={};function s(e){return!!n.call(o,e)||!n.call(r,e)&&(i.test(e)?o[e]=!0:(r[e]=!0,!1))}function a(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var l={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){l[e]=new a(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];l[t]=new a(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){l[e]=new a(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){l[e]=new a(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){l[e]=new a(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){l[e]=new a(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){l[e]=new a(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){l[e]=new a(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){l[e]=new a(e,5,!1,e.toLowerCase(),null,!1,!1)});var c=/[\-:]([a-z])/g;function u(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(c,u);l[t]=new a(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(c,u);l[t]=new a(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(c,u);l[t]=new a(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){l[e]=new a(e,1,!1,e.toLowerCase(),null,!1,!1)}),l.xlinkHref=new a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){l[e]=new a(e,1,!1,e.toLowerCase(),null,!0,!0)});var d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h=["Webkit","ms","Moz","O"];Object.keys(d).forEach(function(e){h.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),d[t]=d[e]})});var f=/["'&<>]/;function p(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=f.exec(e);if(t){var n,i="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(i+=e.substring(r,n)),r=n+1,i+=t}e=r!==n?i+e.substring(r,n):i}return e}var m=/([A-Z])/g,g=/^ms-/,_=Array.isArray;function y(e,t){return{insertionMode:e,selectedValue:t}}var b=new Map;function x(e,i,r){if("object"!=typeof r)throw Error(t(62));for(var o in i=!0,r)if(n.call(r,o)){var s=r[o];if(null!=s&&"boolean"!=typeof s&&""!==s){if(0===o.indexOf("--")){var a=p(o);s=p((""+s).trim())}else{a=o;var l=b.get(a);void 0!==l||(l=p(a.replace(m,"-$1").toLowerCase().replace(g,"-ms-")),b.set(a,l)),a=l,s="number"==typeof s?0===s||n.call(d,o)?""+s:s+"px":p((""+s).trim())}i?(i=!1,e.push(' style="',a,":",s)):e.push(";",a,":",s)}}i||e.push('"')}function w(e,t,n,i){switch(n){case"style":return void x(e,t,i);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=l.hasOwnProperty(n)?l[n]:null)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:i&&e.push(" ",n,'=""');break;case 4:!0===i?e.push(" ",n,'=""'):!1!==i&&e.push(" ",n,'="',p(i),'"');break;case 5:isNaN(i)||e.push(" ",n,'="',p(i),'"');break;case 6:!isNaN(i)&&1<=i&&e.push(" ",n,'="',p(i),'"');break;default:t.sanitizeURL&&(i=""+i),e.push(" ",n,'="',p(i),'"')}}else if(s(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',p(i),'"')}}function S(e,n,i){if(null!=n){if(null!=i)throw Error(t(60));if("object"!=typeof n||!("__html"in n))throw Error(t(61));null!=(n=n.__html)&&e.push(""+n)}}function E(e,t,i,r){e.push(k(i));var o,s=i=null;for(o in t)if(n.call(t,o)){var a=t[o];if(null!=a)switch(o){case"children":i=a;break;case"dangerouslySetInnerHTML":s=a;break;default:w(e,r,o,a)}}return e.push(">"),S(e,s,i),"string"==typeof i?(e.push(p(i)),null):i}var C=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,T=new Map;function k(e){var n=T.get(e);if(void 0===n){if(!C.test(e))throw Error(t(65,e));n="<"+e,T.set(e,n)}return n}function A(e,n,i){if(e.push('\x3c!--$?--\x3e<template id="'),null===i)throw Error(t(395));return e.push(i),e.push('"></template>')}var I=/[<\u2028\u2029]/g;function P(e){return JSON.stringify(e).replace(I,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function L(e,t,n,i){return n.generateStaticMarkup?(e.push(p(t)),!1):(""===t?e=i:(i&&e.push("\x3c!-- --\x3e"),e.push(p(t)),e=!0),e)}var R=Object.assign,O=Symbol.for("react.element"),M=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),$=Symbol.for("react.scope"),G=Symbol.for("react.debug_trace_mode"),q=Symbol.for("react.legacy_hidden"),Y=Symbol.for("react.default_value"),X=Symbol.iterator;function K(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case D:return"Fragment";case M:return"Portal";case F:return"Profiler";case N:return"StrictMode";case j:return"Suspense";case V:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case U:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case H:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case W:t=e._payload,e=e._init;try{return K(e(t))}catch(ote){}}return null}var Z={};function Q(e,t){if(!(e=e.contextTypes))return Z;var n,i={};for(n in e)i[n]=t[n];return i}var J=null;function ee(e,n){if(e!==n){e.context._currentValue2=e.parentValue,e=e.parent;var i=n.parent;if(null===e){if(null!==i)throw Error(t(401))}else{if(null===i)throw Error(t(401));ee(e,i)}n.context._currentValue2=n.value}}function te(e){e.context._currentValue2=e.parentValue,null!==(e=e.parent)&&te(e)}function ne(e){var t=e.parent;null!==t&&ne(t),e.context._currentValue2=e.value}function ie(e,n){if(e.context._currentValue2=e.parentValue,null===(e=e.parent))throw Error(t(402));e.depth===n.depth?ee(e,n):ie(e,n)}function re(e,n){var i=n.parent;if(null===i)throw Error(t(402));e.depth===i.depth?ee(e,i):re(e,i),n.context._currentValue2=n.value}function oe(e){var t=J;t!==e&&(null===t?ne(e):null===e?te(t):t.depth===e.depth?ee(t,e):t.depth>e.depth?ie(t,e):re(t,e),J=e)}var se={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function ae(e,t,n,i){var r=void 0!==e.state?e.state:null;e.updater=se,e.props=n,e.state=r;var o={queue:[],replace:!1};e._reactInternals=o;var s=t.contextType;if(e.context="object"==typeof s&&null!==s?s._currentValue2:i,"function"==typeof(s=t.getDerivedStateFromProps)&&(r=null==(s=s(n,r))?r:R({},r,s),e.state=r),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&se.enqueueReplaceState(e,e.state,null),null!==o.queue&&0<o.queue.length)if(t=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&1===t.length)e.state=t[0];else{for(o=s?t[0]:e.state,r=!0,s=s?1:0;s<t.length;s++){var a=t[s];null!=(a="function"==typeof a?a.call(e,o,n,i):a)&&(r?(r=!1,o=R({},o,a)):R(o,a))}e.state=o}else o.queue=null}var le={id:1,overflow:""};function ce(e,t,n){var i=e.id;e=e.overflow;var r=32-ue(i)-1;i&=~(1<<r),n+=1;var o=32-ue(t)+r;if(30<o){var s=r-r%5;return o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,{id:1<<32-ue(t)+r|n<<r|i,overflow:o+e}}return{id:1<<o|n<<r|i,overflow:e}}var ue=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(de(e)/he|0)|0},de=Math.log,he=Math.LN2,fe="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},pe=null,me=null,ge=null,_e=null,ye=!1,ve=!1,be=0,xe=null,we=0;function Se(){if(null===pe)throw Error(t(321));return pe}function Ee(){if(0<we)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Ce(){return null===_e?null===ge?(ye=!1,ge=_e=Ee()):(ye=!0,_e=ge):null===_e.next?(ye=!1,_e=_e.next=Ee()):(ye=!0,_e=_e.next),_e}function Te(){me=pe=null,ve=!1,ge=null,we=0,_e=xe=null}function ke(e,t){return"function"==typeof t?t(e):t}function Ae(e,t,n){if(pe=Se(),_e=Ce(),ye){var i=_e.queue;if(t=i.dispatch,null!==xe&&void 0!==(n=xe.get(i))){xe.delete(i),i=_e.memoizedState;do{i=e(i,n.action),n=n.next}while(null!==n);return _e.memoizedState=i,[i,t]}return[_e.memoizedState,t]}return e=e===ke?"function"==typeof t?t():t:void 0!==n?n(t):t,_e.memoizedState=e,e=(e=_e.queue={last:null,dispatch:null}).dispatch=Pe.bind(null,pe,e),[_e.memoizedState,e]}function Ie(e,t){if(pe=Se(),t=void 0===t?null:t,null!==(_e=Ce())){var n=_e.memoizedState;if(null!==n&&null!==t){var i=n[1];e:if(null===i)i=!1;else{for(var r=0;r<i.length&&r<t.length;r++)if(!fe(t[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return e=e(),_e.memoizedState=[e,t],e}function Pe(e,n,i){if(25<=we)throw Error(t(301));if(e===pe)if(ve=!0,e={action:i,next:null},null===xe&&(xe=new Map),void 0===(i=xe.get(n)))xe.set(n,e);else{for(n=i;null!==n.next;)n=n.next;n.next=e}}function Le(){throw Error(t(394))}function Re(){}var Oe={readContext:function(e){return e._currentValue2},useContext:function(e){return Se(),e._currentValue2},useMemo:Ie,useReducer:Ae,useRef:function(e){pe=Se();var t=(_e=Ce()).memoizedState;return null===t?(e={current:e},_e.memoizedState=e):t},useState:function(e){return Ae(ke,e)},useInsertionEffect:Re,useLayoutEffect:function(){},useCallback:function(e,t){return Ie(function(){return e},t)},useImperativeHandle:Re,useEffect:Re,useDebugValue:Re,useDeferredValue:function(e){return Se(),e},useTransition:function(){return Se(),[!1,Le]},useId:function(){var e=me.treeContext,n=e.overflow;e=((e=e.id)&~(1<<32-ue(e)-1)).toString(32)+n;var i=Me;if(null===i)throw Error(t(404));return n=be++,e=":"+i.idPrefix+"R"+e,0<n&&(e+="H"+n.toString(32)),e+":"},useMutableSource:function(e,t){return Se(),t(e._source)},useSyncExternalStore:function(e,n,i){if(void 0===i)throw Error(t(407));return i()}},Me=null,De=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Ne(e){return null}function Fe(){}function Be(e,t,n,i,r,o,s,a){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&Je(e)},blockedBoundary:n,blockedSegment:i,abortSet:r,legacyContext:o,context:s,treeContext:a};return r.add(l),l}function ze(e,t,n,i,r,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:r,textEmbedded:o}}function Ue(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function je(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Ve(e,t,n,i,r){for(pe={},me=t,be=0,e=n(i,r);ve;)ve=!1,be=0,we+=1,_e=null,e=n(i,r);return Te(),e}function He(e,n,i,r){var o=i.render(),s=r.childContextTypes;if(null!=s){var a=n.legacyContext;if("function"!=typeof i.getChildContext)r=a;else{for(var l in i=i.getChildContext())if(!(l in s))throw Error(t(108,K(r)||"Unknown",l));r=R({},a,i)}n.legacyContext=r,Ge(e,n,o),n.legacyContext=a}else Ge(e,n,o)}function We(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function $e(i,r,o,a,l){if("function"==typeof o)if(o.prototype&&o.prototype.isReactComponent){l=Q(o,r.legacyContext);var c=o.contextType;ae(c=new o(a,"object"==typeof c&&null!==c?c._currentValue2:l),o,a,l),He(i,r,c,o)}else{l=Ve(i,r,o,a,c=Q(o,r.legacyContext));var u=0!==be;if("object"==typeof l&&null!==l&&"function"==typeof l.render&&void 0===l.$$typeof)ae(l,o,a,c),He(i,r,l,o);else if(u){a=r.treeContext,r.treeContext=ce(a,1,0);try{Ge(i,r,l)}finally{r.treeContext=a}}else Ge(i,r,l)}else{if("string"!=typeof o){switch(o){case q:case G:case N:case F:case D:case V:return void Ge(i,r,a.children);case $:throw Error(t(343));case j:e:{o=r.blockedBoundary,l=r.blockedSegment,c=a.fallback,a=a.children;var d={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:u=new Set,errorDigest:null},h=ze(0,l.chunks.length,d,l.formatContext,!1,!1);l.children.push(h),l.lastPushedText=!1;var f=ze(0,0,null,l.formatContext,!1,!1);f.parentFlushed=!0,r.blockedBoundary=d,r.blockedSegment=f;try{if(Ye(i,r,a),i.responseState.generateStaticMarkup||f.lastPushedText&&f.textEmbedded&&f.chunks.push("\x3c!-- --\x3e"),f.status=1,Ze(d,f),0===d.pendingTasks)break e}catch(qn){f.status=4,d.forceClientRender=!0,d.errorDigest=Ue(i,qn)}finally{r.blockedBoundary=o,r.blockedSegment=l}r=Be(i,c,o,h,u,r.legacyContext,r.context,r.treeContext),i.pingedTasks.push(r)}return}if("object"==typeof o&&null!==o)switch(o.$$typeof){case U:if(a=Ve(i,r,o.render,a,l),0!==be){o=r.treeContext,r.treeContext=ce(o,1,0);try{Ge(i,r,a)}finally{r.treeContext=o}}else Ge(i,r,a);return;case H:return void $e(i,r,o=o.type,a=We(o,a),l);case B:if(l=a.children,o=o._context,a=a.value,c=o._currentValue2,o._currentValue2=a,J=a={parent:u=J,depth:null===u?0:u.depth+1,context:o,parentValue:c,value:a},r.context=a,Ge(i,r,l),null===(i=J))throw Error(t(403));return a=i.parentValue,i.context._currentValue2=a===Y?i.context._defaultValue:a,i=J=i.parent,void(r.context=i);case z:return void Ge(i,r,a=(a=a.children)(o._currentValue2));case W:return void $e(i,r,o=(l=o._init)(o._payload),a=We(o,a),void 0)}throw Error(t(130,null==o?o:typeof o,""))}switch(c=function(i,r,o,a,l){switch(r){case"select":i.push(k("select"));var c=null,u=null;for(m in o)if(n.call(o,m)){var d=o[m];if(null!=d)switch(m){case"children":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"defaultValue":case"value":break;default:w(i,a,m,d)}}return i.push(">"),S(i,u,c),c;case"option":u=l.selectedValue,i.push(k("option"));var h=d=null,f=null,m=null;for(c in o)if(n.call(o,c)){var g=o[c];if(null!=g)switch(c){case"children":d=g;break;case"selected":f=g;break;case"dangerouslySetInnerHTML":m=g;break;case"value":h=g;default:w(i,a,c,g)}}if(null!=u)if(o=null!==h?""+h:function(t){var n="";return e.Children.forEach(t,function(e){null!=e&&(n+=e)}),n}(d),_(u)){for(a=0;a<u.length;a++)if(""+u[a]===o){i.push(' selected=""');break}}else""+u===o&&i.push(' selected=""');else f&&i.push(' selected=""');return i.push(">"),S(i,m,d),d;case"textarea":for(d in i.push(k("textarea")),m=u=c=null,o)if(n.call(o,d)&&null!=(h=o[d]))switch(d){case"children":m=h;break;case"value":c=h;break;case"defaultValue":u=h;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:w(i,a,d,h)}if(null===c&&null!==u&&(c=u),i.push(">"),null!=m){if(null!=c)throw Error(t(92));if(_(m)&&1<m.length)throw Error(t(93));c=""+m}return"string"==typeof c&&"\n"===c[0]&&i.push("\n"),null!==c&&i.push(p(""+c)),null;case"input":for(u in i.push(k("input")),h=m=d=c=null,o)if(n.call(o,u)&&null!=(f=o[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"defaultChecked":h=f;break;case"defaultValue":d=f;break;case"checked":m=f;break;case"value":c=f;break;default:w(i,a,u,f)}return null!==m?w(i,a,"checked",m):null!==h&&w(i,a,"checked",h),null!==c?w(i,a,"value",c):null!==d&&w(i,a,"value",d),i.push("/>"),null;case"menuitem":for(var y in i.push(k("menuitem")),o)if(n.call(o,y)&&null!=(c=o[y]))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:w(i,a,y,c)}return i.push(">"),null;case"title":for(g in i.push(k("title")),c=null,o)if(n.call(o,g)&&null!=(u=o[g]))switch(g){case"children":c=u;break;case"dangerouslySetInnerHTML":throw Error(t(434));default:w(i,a,g,u)}return i.push(">"),c;case"listing":case"pre":for(h in i.push(k(r)),u=c=null,o)if(n.call(o,h)&&null!=(d=o[h]))switch(h){case"children":c=d;break;case"dangerouslySetInnerHTML":u=d;break;default:w(i,a,h,d)}if(i.push(">"),null!=u){if(null!=c)throw Error(t(60));if("object"!=typeof u||!("__html"in u))throw Error(t(61));null!=(o=u.__html)&&("string"==typeof o&&0<o.length&&"\n"===o[0]?i.push("\n",o):i.push(""+o))}return"string"==typeof c&&"\n"===c[0]&&i.push("\n"),c;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var v in i.push(k(r)),o)if(n.call(o,v)&&null!=(c=o[v]))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,r));default:w(i,a,v,c)}return i.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return E(i,o,r,a);case"html":return 0===l.insertionMode&&i.push("<!DOCTYPE html>"),E(i,o,r,a);default:if(-1===r.indexOf("-")&&"string"!=typeof o.is)return E(i,o,r,a);for(f in i.push(k(r)),u=c=null,o)if(n.call(o,f)&&null!=(d=o[f]))switch(f){case"children":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"style":x(i,a,d);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:s(f)&&"function"!=typeof d&&"symbol"!=typeof d&&i.push(" ",f,'="',p(d),'"')}return i.push(">"),S(i,u,c),c}}((l=r.blockedSegment).chunks,o,a,i.responseState,l.formatContext),l.lastPushedText=!1,u=l.formatContext,l.formatContext=function(e,t,n){switch(t){case"select":return y(1,null!=n.value?n.value:n.defaultValue);case"svg":return y(2,null);case"math":return y(3,null);case"foreignObject":return y(1,null);case"table":return y(4,null);case"thead":case"tbody":case"tfoot":return y(5,null);case"colgroup":return y(7,null);case"tr":return y(6,null)}return 4<=e.insertionMode||0===e.insertionMode?y(1,null):e}(u,o,a),Ye(i,r,c),l.formatContext=u,o){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push("</",o,">")}l.lastPushedText=!1}}function Ge(e,n,i){if(n.node=i,"object"==typeof i&&null!==i){switch(i.$$typeof){case O:return void $e(e,n,i.type,i.props,i.ref);case M:throw Error(t(257));case W:var r=i._init;return void Ge(e,n,i=r(i._payload))}if(_(i))return void qe(e,n,i);if((r=null===i||"object"!=typeof i?null:"function"==typeof(r=X&&i[X]||i["@@iterator"])?r:null)&&(r=r.call(i))){if(!(i=r.next()).done){var o=[];do{o.push(i.value),i=r.next()}while(!i.done);qe(e,n,o)}return}throw e=Object.prototype.toString.call(i),Error(t(31,"[object Object]"===e?"object with keys {"+Object.keys(i).join(", ")+"}":e))}"string"==typeof i?(r=n.blockedSegment).lastPushedText=L(n.blockedSegment.chunks,i,e.responseState,r.lastPushedText):"number"==typeof i&&((r=n.blockedSegment).lastPushedText=L(n.blockedSegment.chunks,""+i,e.responseState,r.lastPushedText))}function qe(e,t,n){for(var i=n.length,r=0;r<i;r++){var o=t.treeContext;t.treeContext=ce(o,i,r);try{Ye(e,t,n[r])}finally{t.treeContext=o}}}function Ye(e,t,n){var i=t.blockedSegment.formatContext,r=t.legacyContext,o=t.context;try{return Ge(e,t,n)}catch(l){if(Te(),"object"!=typeof l||null===l||"function"!=typeof l.then)throw t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=o,oe(o),l;n=l;var s=t.blockedSegment,a=ze(0,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,e=Be(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=o,oe(o)}}function Xe(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,Qe(this,t,e)}function Ke(e,n,i){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(n.allPendingTasks--,2!==n.status&&(n.status=2,null!==n.destination&&n.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===i?Error(t(432)):i,r.errorDigest=n.onError(e),r.parentFlushed&&n.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(e){return Ke(e,n,i)}),r.fallbackAbortableTasks.clear(),n.allPendingTasks--,0===n.allPendingTasks&&(r=n.onAllReady)())}function Ze(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&Ze(e,n)}else e.completedSegments.push(t)}function Qe(e,n,i){if(null===n){if(i.parentFlushed){if(null!==e.completedRootSegment)throw Error(t(389));e.completedRootSegment=i}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=Fe,(n=e.onShellReady)())}else n.pendingTasks--,n.forceClientRender||(0===n.pendingTasks?(i.parentFlushed&&1===i.status&&Ze(n,i),n.parentFlushed&&e.completedBoundaries.push(n),n.fallbackAbortableTasks.forEach(Xe,e),n.fallbackAbortableTasks.clear()):i.parentFlushed&&1===i.status&&(Ze(n,i),1===n.completedSegments.length&&n.parentFlushed&&e.partialBoundaries.push(n)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function Je(e){if(2!==e.status){var t=J,n=De.current;De.current=Oe;var i=Me;Me=e.responseState;try{var r,o=e.pingedTasks;for(r=0;r<o.length;r++){var s=o[r],a=e,l=s.blockedSegment;if(0===l.status){oe(s.context);try{Ge(a,s,s.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("\x3c!-- --\x3e"),s.abortSet.delete(s),l.status=1,Qe(a,s.blockedBoundary,l)}catch(f){if(Te(),"object"==typeof f&&null!==f&&"function"==typeof f.then){var c=s.ping;f.then(c,c)}else{s.abortSet.delete(s),l.status=4;var u=s.blockedBoundary,d=f,h=Ue(a,d);null===u?je(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,0===a.allPendingTasks&&(0,a.onAllReady)()}}}}o.splice(0,r),null!==e.destination&&ot(e,e.destination)}catch(f){Ue(e,f),je(e,f)}finally{Me=i,De.current=n,n===Oe&&oe(t)}}}function et(e,n,i){switch(i.parentFlushed=!0,i.status){case 0:var r=i.id=e.nextSegmentId++;return i.lastPushedText=!1,i.textEmbedded=!1,e=e.responseState,n.push('<template id="'),n.push(e.placeholderPrefix),e=r.toString(16),n.push(e),n.push('"></template>');case 1:i.status=2;var o=!0;r=i.chunks;var s=0;i=i.children;for(var a=0;a<i.length;a++){for(o=i[a];s<o.index;s++)n.push(r[s]);o=tt(e,n,o)}for(;s<r.length-1;s++)n.push(r[s]);return s<r.length&&(o=n.push(r[s])),o;default:throw Error(t(390))}}function tt(e,n,i){var r=i.boundary;if(null===r)return et(e,n,i);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||(r=r.errorDigest,n.push("\x3c!--$!--\x3e"),n.push("<template"),r&&(n.push(' data-dgst="'),r=p(r),n.push(r),n.push('"')),n.push("></template>")),et(e,n,i),!!e.responseState.generateStaticMarkup||n.push("\x3c!--/$--\x3e");if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var o=e.responseState,s=o.nextSuspenseID++;return o=o.boundaryPrefix+s.toString(16),r=r.id=o,A(n,e.responseState,r),et(e,n,i),n.push("\x3c!--/$--\x3e")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),A(n,e.responseState,r.id),et(e,n,i),n.push("\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||n.push("\x3c!--$--\x3e"),1!==(i=r.completedSegments).length)throw Error(t(391));return tt(e,n,i[0]),!!e.responseState.generateStaticMarkup||n.push("\x3c!--/$--\x3e")}function nt(e,n,i){return function(e,n,i,r){switch(i.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');case 4:return e.push('<table hidden id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(n.segmentPrefix),n=r.toString(16),e.push(n),e.push('">');default:throw Error(t(397))}}(n,e.responseState,i.formatContext,i.id),tt(e,n,i),function(e,n){switch(n.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(t(397))}}(n,i.formatContext)}function it(e,n,i){for(var r=i.completedSegments,o=0;o<r.length;o++)rt(e,n,i,r[o]);if(r.length=0,e=e.responseState,r=i.id,i=i.rootSegmentID,n.push(e.startInlineScript),e.sentCompleteBoundaryFunction?n.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,n.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===r)throw Error(t(395));return i=i.toString(16),n.push(r),n.push('","'),n.push(e.segmentPrefix),n.push(i),n.push('")<\/script>')}function rt(e,n,i,r){if(2===r.status)return!0;var o=r.id;if(-1===o){if(-1===(r.id=i.rootSegmentID))throw Error(t(392));return nt(e,n,r)}return nt(e,n,r),e=e.responseState,n.push(e.startInlineScript),e.sentCompleteSegmentFunction?n.push('$RS("'):(e.sentCompleteSegmentFunction=!0,n.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),n.push(e.segmentPrefix),o=o.toString(16),n.push(o),n.push('","'),n.push(e.placeholderPrefix),n.push(o),n.push('")<\/script>')}function ot(e,n){try{var i=e.completedRootSegment;if(null!==i&&0===e.pendingRootTasks){tt(e,n,i),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(i=0;i<r.length-1;i++)n.push(r[i]);i<r.length&&n.push(r[i])}var o,s=e.clientRenderedBoundaries;for(o=0;o<s.length;o++){var a=s[o];r=n;var l=e.responseState,c=a.id,u=a.errorDigest,d=a.errorMessage,h=a.errorComponentStack;if(r.push(l.startInlineScript),l.sentClientRenderFunction?r.push('$RX("'):(l.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===c)throw Error(t(395));if(r.push(c),r.push('"'),u||d||h){r.push(",");var f=P(u||"");r.push(f)}if(d||h){r.push(",");var p=P(d||"");r.push(p)}if(h){r.push(",");var m=P(h);r.push(m)}if(!r.push(")<\/script>"))return e.destination=null,o++,void s.splice(0,o)}s.splice(0,o);var g=e.completedBoundaries;for(o=0;o<g.length;o++)if(!it(e,n,g[o]))return e.destination=null,o++,void g.splice(0,o);g.splice(0,o);var _=e.partialBoundaries;for(o=0;o<_.length;o++){var y=_[o];e:{s=e,a=n;var v=y.completedSegments;for(l=0;l<v.length;l++)if(!rt(s,a,y,v[l])){l++,v.splice(0,l);var b=!1;break e}v.splice(0,l),b=!0}if(!b)return e.destination=null,o++,void _.splice(0,o)}_.splice(0,o);var x=e.completedBoundaries;for(o=0;o<x.length;o++)if(!it(e,n,x[o]))return e.destination=null,o++,void x.splice(0,o);x.splice(0,o)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&n.push(null)}}function st(e,t){try{var n=e.abortableTasks;n.forEach(function(n){return Ke(n,e,t)}),n.clear(),null!==e.destination&&ot(e,e.destination)}catch(i){Ue(e,i),je(e,i)}}function at(){}function lt(e,n,i,r){var o=!1,s=null,a="",l={push:function(e){return null!==e&&(a+=e),!0},destroy:function(e){o=!0,s=e}},c=!1;if(e=function(e,t,n,i,r,o,s){var a=[],l=new Set;return(n=ze(t={destination:null,responseState:t,progressiveChunkSize:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:l,pingedTasks:a,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===r?Ne:r,onAllReady:Fe,onShellReady:void 0===s?Fe:s,onShellError:Fe,onFatalError:Fe},0,null,n,!1,!1)).parentFlushed=!0,e=Be(t,e,null,n,l,Z,null,le),a.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(i,n?n.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,at,0,function(){c=!0}),Je(e),st(e,r),1===e.status)e.status=2,l.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=l;try{ot(e,l)}catch(u){Ue(e,u),je(e,u)}}if(o)throw s;if(!c)throw Error(t(426));return a}return she.renderToNodeStream=function(){throw Error(t(207))},she.renderToStaticMarkup=function(e,t){return lt(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},she.renderToStaticNodeStream=function(){throw Error(t(208))},she.renderToString=function(e,t){return lt(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},she.version="18.3.1",she}var lhe,che,uhe={};function dhe(){if(lhe)return uhe;lhe=1;var e=v();function t(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=null,i=0;function r(e,t){if(0!==t.length)if(512<t.length)0<i&&(e.enqueue(new Uint8Array(n.buffer,0,i)),n=new Uint8Array(512),i=0),e.enqueue(t);else{var r=n.length-i;r<t.length&&(0===r?e.enqueue(n):(n.set(t.subarray(0,r),i),e.enqueue(n),t=t.subarray(r)),n=new Uint8Array(512),i=0),n.set(t,i),i+=t.length}}function o(e,t){return r(e,t),!0}function s(e){n&&0<i&&(e.enqueue(new Uint8Array(n.buffer,0,i)),n=null,i=0)}var a=new TextEncoder;function l(e){return a.encode(e)}function c(e){return a.encode(e)}function u(e,t){"function"==typeof e.error?e.error(t):e.close()}var d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}function g(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);_[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);_[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);_[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var x={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=["Webkit","ms","Moz","O"];Object.keys(x).forEach(function(e){w.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),x[t]=x[e]})});var S=/["'&<>]/;function E(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=S.exec(e);if(t){var n,i="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(i+=e.substring(r,n)),r=n+1,i+=t}e=r!==n?i+e.substring(r,n):i}return e}var C=/([A-Z])/g,T=/^ms-/,k=Array.isArray,A=c("<script>"),I=c("<\/script>"),P=c('<script src="'),L=c('<script type="module" src="'),R=c('" async=""><\/script>'),O=/(<\/|<)(s)(cript)/gi;function M(e,t,n,i){return t+("s"===n?"\\u0073":"\\u0053")+i}function D(e,t){return{insertionMode:e,selectedValue:t}}var N=c("\x3c!-- --\x3e");function F(e,t,n,i){return""===t?i:(i&&e.push(N),e.push(l(E(t))),!0)}var B=new Map,z=c(' style="'),U=c(":"),j=c(";");function V(e,n,i){if("object"!=typeof i)throw Error(t(62));for(var r in n=!0,i)if(d.call(i,r)){var o=i[r];if(null!=o&&"boolean"!=typeof o&&""!==o){if(0===r.indexOf("--")){var s=l(E(r));o=l(E((""+o).trim()))}else{s=r;var a=B.get(s);void 0!==a||(a=c(E(s.replace(C,"-$1").toLowerCase().replace(T,"-ms-"))),B.set(s,a)),s=a,o="number"==typeof o?0===o||d.call(x,r)?l(""+o):l(o+"px"):l(E((""+o).trim()))}n?(n=!1,e.push(z,s,U,o)):e.push(j,s,U,o)}}n||e.push($)}var H=c(" "),W=c('="'),$=c('"'),G=c('=""');function q(e,t,n,i){switch(n){case"style":return void V(e,t,i);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=_.hasOwnProperty(n)?_[n]:null)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=l(t.attributeName),t.type){case 3:i&&e.push(H,n,G);break;case 4:!0===i?e.push(H,n,G):!1!==i&&e.push(H,n,W,l(E(i)),$);break;case 5:isNaN(i)||e.push(H,n,W,l(E(i)),$);break;case 6:!isNaN(i)&&1<=i&&e.push(H,n,W,l(E(i)),$);break;default:t.sanitizeURL&&(i=""+i),e.push(H,n,W,l(E(i)),$)}}else if(m(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(H,l(n),W,l(E(i)),$)}}var Y=c(">"),X=c("/>");function K(e,n,i){if(null!=n){if(null!=i)throw Error(t(60));if("object"!=typeof n||!("__html"in n))throw Error(t(61));null!=(n=n.__html)&&e.push(l(""+n))}}var Z=c(' selected=""');function Q(e,t,n,i){e.push(ne(n));var r,o=n=null;for(r in t)if(d.call(t,r)){var s=t[r];if(null!=s)switch(r){case"children":n=s;break;case"dangerouslySetInnerHTML":o=s;break;default:q(e,i,r,s)}}return e.push(Y),K(e,o,n),"string"==typeof n?(e.push(l(E(n))),null):n}var J=c("\n"),ee=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,te=new Map;function ne(e){var n=te.get(e);if(void 0===n){if(!ee.test(e))throw Error(t(65,e));n=c("<"+e),te.set(e,n)}return n}var ie=c("<!DOCTYPE html>");var re=c("</"),oe=c(">"),se=c('<template id="'),ae=c('"></template>'),le=c("\x3c!--$--\x3e"),ce=c('\x3c!--$?--\x3e<template id="'),ue=c('"></template>'),de=c("\x3c!--$!--\x3e"),he=c("\x3c!--/$--\x3e"),fe=c("<template"),pe=c('"'),me=c(' data-dgst="');c(' data-msg="'),c(' data-stck="');var ge=c("></template>");function _e(e,n,i){if(r(e,ce),null===i)throw Error(t(395));return r(e,i),o(e,ue)}var ye=c('<div hidden id="'),ve=c('">'),be=c("</div>"),xe=c('<svg aria-hidden="true" style="display:none" id="'),we=c('">'),Se=c("</svg>"),Ee=c('<math aria-hidden="true" style="display:none" id="'),Ce=c('">'),Te=c("</math>"),ke=c('<table hidden id="'),Ae=c('">'),Ie=c("</table>"),Pe=c('<table hidden><tbody id="'),Le=c('">'),Re=c("</tbody></table>"),Oe=c('<table hidden><tr id="'),Me=c('">'),De=c("</tr></table>"),Ne=c('<table hidden><colgroup id="'),Fe=c('">'),Be=c("</colgroup></table>"),ze=c('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Ue=c('$RS("'),je=c('","'),Ve=c('")<\/script>'),He=c('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),We=c('$RC("'),$e=c('","'),Ge=c('")<\/script>'),qe=c('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Ye=c('$RX("'),Xe=c('"'),Ke=c(")<\/script>"),Ze=c(","),Qe=/[<\u2028\u2029]/g;function Je(e){return JSON.stringify(e).replace(Qe,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var et=Object.assign,tt=Symbol.for("react.element"),nt=Symbol.for("react.portal"),it=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),ot=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),at=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),ft=Symbol.for("react.scope"),pt=Symbol.for("react.debug_trace_mode"),mt=Symbol.for("react.legacy_hidden"),gt=Symbol.for("react.default_value"),_t=Symbol.iterator;function yt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case it:return"Fragment";case nt:return"Portal";case ot:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case ut:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case at:return(e.displayName||"Context")+".Consumer";case st:return(e._context.displayName||"Context")+".Provider";case lt:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case dt:return null!==(t=e.displayName||null)?t:yt(e.type)||"Memo";case ht:t=e._payload,e=e._init;try{return yt(e(t))}catch(ote){}}return null}var vt={};function bt(e,t){if(!(e=e.contextTypes))return vt;var n,i={};for(n in e)i[n]=t[n];return i}var xt=null;function wt(e,n){if(e!==n){e.context._currentValue=e.parentValue,e=e.parent;var i=n.parent;if(null===e){if(null!==i)throw Error(t(401))}else{if(null===i)throw Error(t(401));wt(e,i)}n.context._currentValue=n.value}}function St(e){e.context._currentValue=e.parentValue,null!==(e=e.parent)&&St(e)}function Et(e){var t=e.parent;null!==t&&Et(t),e.context._currentValue=e.value}function Ct(e,n){if(e.context._currentValue=e.parentValue,null===(e=e.parent))throw Error(t(402));e.depth===n.depth?wt(e,n):Ct(e,n)}function Tt(e,n){var i=n.parent;if(null===i)throw Error(t(402));e.depth===i.depth?wt(e,i):Tt(e,i),n.context._currentValue=n.value}function kt(e){var t=xt;t!==e&&(null===t?Et(e):null===e?St(t):t.depth===e.depth?wt(t,e):t.depth>e.depth?Ct(t,e):Tt(t,e),xt=e)}var At={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function It(e,t,n,i){var r=void 0!==e.state?e.state:null;e.updater=At,e.props=n,e.state=r;var o={queue:[],replace:!1};e._reactInternals=o;var s=t.contextType;if(e.context="object"==typeof s&&null!==s?s._currentValue:i,"function"==typeof(s=t.getDerivedStateFromProps)&&(r=null==(s=s(n,r))?r:et({},r,s),e.state=r),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&At.enqueueReplaceState(e,e.state,null),null!==o.queue&&0<o.queue.length)if(t=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&1===t.length)e.state=t[0];else{for(o=s?t[0]:e.state,r=!0,s=s?1:0;s<t.length;s++){var a=t[s];null!=(a="function"==typeof a?a.call(e,o,n,i):a)&&(r?(r=!1,o=et({},o,a)):et(o,a))}e.state=o}else o.queue=null}var Pt={id:1,overflow:""};function Lt(e,t,n){var i=e.id;e=e.overflow;var r=32-Rt(i)-1;i&=~(1<<r),n+=1;var o=32-Rt(t)+r;if(30<o){var s=r-r%5;return o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,{id:1<<32-Rt(t)+r|n<<r|i,overflow:o+e}}return{id:1<<o|n<<r|i,overflow:e}}var Rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ot(e)/Mt|0)|0},Ot=Math.log,Mt=Math.LN2,Nt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ft=null,Bt=null,zt=null,Ut=null,jt=!1,Vt=!1,Ht=0,Wt=null,$t=0;function Gt(){if(null===Ft)throw Error(t(321));return Ft}function qt(){if(0<$t)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Yt(){return null===Ut?null===zt?(jt=!1,zt=Ut=qt()):(jt=!0,Ut=zt):null===Ut.next?(jt=!1,Ut=Ut.next=qt()):(jt=!0,Ut=Ut.next),Ut}function Xt(){Bt=Ft=null,Vt=!1,zt=null,$t=0,Ut=Wt=null}function Kt(e,t){return"function"==typeof t?t(e):t}function Zt(e,t,n){if(Ft=Gt(),Ut=Yt(),jt){var i=Ut.queue;if(t=i.dispatch,null!==Wt&&void 0!==(n=Wt.get(i))){Wt.delete(i),i=Ut.memoizedState;do{i=e(i,n.action),n=n.next}while(null!==n);return Ut.memoizedState=i,[i,t]}return[Ut.memoizedState,t]}return e=e===Kt?"function"==typeof t?t():t:void 0!==n?n(t):t,Ut.memoizedState=e,e=(e=Ut.queue={last:null,dispatch:null}).dispatch=Jt.bind(null,Ft,e),[Ut.memoizedState,e]}function Qt(e,t){if(Ft=Gt(),t=void 0===t?null:t,null!==(Ut=Yt())){var n=Ut.memoizedState;if(null!==n&&null!==t){var i=n[1];e:if(null===i)i=!1;else{for(var r=0;r<i.length&&r<t.length;r++)if(!Nt(t[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return e=e(),Ut.memoizedState=[e,t],e}function Jt(e,n,i){if(25<=$t)throw Error(t(301));if(e===Ft)if(Vt=!0,e={action:i,next:null},null===Wt&&(Wt=new Map),void 0===(i=Wt.get(n)))Wt.set(n,e);else{for(n=i;null!==n.next;)n=n.next;n.next=e}}function en(){throw Error(t(394))}function tn(){}var nn={readContext:function(e){return e._currentValue},useContext:function(e){return Gt(),e._currentValue},useMemo:Qt,useReducer:Zt,useRef:function(e){Ft=Gt();var t=(Ut=Yt()).memoizedState;return null===t?(e={current:e},Ut.memoizedState=e):t},useState:function(e){return Zt(Kt,e)},useInsertionEffect:tn,useLayoutEffect:function(){},useCallback:function(e,t){return Qt(function(){return e},t)},useImperativeHandle:tn,useEffect:tn,useDebugValue:tn,useDeferredValue:function(e){return Gt(),e},useTransition:function(){return Gt(),[!1,en]},useId:function(){var e=Bt.treeContext,n=e.overflow;e=((e=e.id)&~(1<<32-Rt(e)-1)).toString(32)+n;var i=rn;if(null===i)throw Error(t(404));return n=Ht++,e=":"+i.idPrefix+"R"+e,0<n&&(e+="H"+n.toString(32)),e+":"},useMutableSource:function(e,t){return Gt(),t(e._source)},useSyncExternalStore:function(e,n,i){if(void 0===i)throw Error(t(407));return i()}},rn=null,on=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function sn(e){return null}function an(){}function ln(e,t,n,i,r,o,s,a){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&Sn(e)},blockedBoundary:n,blockedSegment:i,abortSet:r,legacyContext:o,context:s,treeContext:a};return r.add(l),l}function cn(e,t,n,i,r,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:r,textEmbedded:o}}function un(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function dn(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,u(e.destination,t)):(e.status=1,e.fatalError=t)}function hn(e,t,n,i,r){for(Ft={},Bt=t,Ht=0,e=n(i,r);Vt;)Vt=!1,Ht=0,$t+=1,Ut=null,e=n(i,r);return Xt(),e}function fn(e,n,i,r){var o=i.render(),s=r.childContextTypes;if(null!=s){var a=n.legacyContext;if("function"!=typeof i.getChildContext)r=a;else{for(var l in i=i.getChildContext())if(!(l in s))throw Error(t(108,yt(r)||"Unknown",l));r=et({},a,i)}n.legacyContext=r,gn(e,n,o),n.legacyContext=a}else gn(e,n,o)}function pn(e,t){if(e&&e.defaultProps){for(var n in t=et({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function mn(n,i,r,o,s){if("function"==typeof r)if(r.prototype&&r.prototype.isReactComponent){s=bt(r,i.legacyContext);var a=r.contextType;It(a=new r(o,"object"==typeof a&&null!==a?a._currentValue:s),r,o,s),fn(n,i,a,r)}else{s=hn(n,i,r,o,a=bt(r,i.legacyContext));var c=0!==Ht;if("object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof)It(s,r,o,a),fn(n,i,s,r);else if(c){o=i.treeContext,i.treeContext=Lt(o,1,0);try{gn(n,i,s)}finally{i.treeContext=o}}else gn(n,i,s)}else{if("string"!=typeof r){switch(r){case mt:case pt:case rt:case ot:case it:case ut:return void gn(n,i,o.children);case ft:throw Error(t(343));case ct:e:{r=i.blockedBoundary,s=i.blockedSegment,a=o.fallback,o=o.children;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:c=new Set,errorDigest:null},h=cn(0,s.chunks.length,u,s.formatContext,!1,!1);s.children.push(h),s.lastPushedText=!1;var f=cn(0,0,null,s.formatContext,!1,!1);f.parentFlushed=!0,i.blockedBoundary=u,i.blockedSegment=f;try{if(yn(n,i,o),f.lastPushedText&&f.textEmbedded&&f.chunks.push(N),f.status=1,xn(u,f),0===u.pendingTasks)break e}catch(Dt){f.status=4,u.forceClientRender=!0,u.errorDigest=un(n,Dt)}finally{i.blockedBoundary=r,i.blockedSegment=s}i=ln(n,a,r,h,c,i.legacyContext,i.context,i.treeContext),n.pingedTasks.push(i)}return}if("object"==typeof r&&null!==r)switch(r.$$typeof){case lt:if(o=hn(n,i,r.render,o,s),0!==Ht){r=i.treeContext,i.treeContext=Lt(r,1,0);try{gn(n,i,o)}finally{i.treeContext=r}}else gn(n,i,o);return;case dt:return void mn(n,i,r=r.type,o=pn(r,o),s);case st:if(s=o.children,r=r._context,o=o.value,a=r._currentValue,r._currentValue=o,xt=o={parent:c=xt,depth:null===c?0:c.depth+1,context:r,parentValue:a,value:o},i.context=o,gn(n,i,s),null===(n=xt))throw Error(t(403));return o=n.parentValue,n.context._currentValue=o===gt?n.context._defaultValue:o,n=xt=n.parent,void(i.context=n);case at:return void gn(n,i,o=(o=o.children)(r._currentValue));case ht:return void mn(n,i,r=(s=r._init)(r._payload),o=pn(r,o),void 0)}throw Error(t(130,null==r?r:typeof r,""))}switch(a=function(n,i,r,o,s){switch(i){case"select":n.push(ne("select"));var a=null,c=null;for(p in r)if(d.call(r,p)){var u=r[p];if(null!=u)switch(p){case"children":a=u;break;case"dangerouslySetInnerHTML":c=u;break;case"defaultValue":case"value":break;default:q(n,o,p,u)}}return n.push(Y),K(n,c,a),a;case"option":c=s.selectedValue,n.push(ne("option"));var h=u=null,f=null,p=null;for(a in r)if(d.call(r,a)){var g=r[a];if(null!=g)switch(a){case"children":u=g;break;case"selected":f=g;break;case"dangerouslySetInnerHTML":p=g;break;case"value":h=g;default:q(n,o,a,g)}}if(null!=c)if(r=null!==h?""+h:function(t){var n="";return e.Children.forEach(t,function(e){null!=e&&(n+=e)}),n}(u),k(c)){for(o=0;o<c.length;o++)if(""+c[o]===r){n.push(Z);break}}else""+c===r&&n.push(Z);else f&&n.push(Z);return n.push(Y),K(n,p,u),u;case"textarea":for(u in n.push(ne("textarea")),p=c=a=null,r)if(d.call(r,u)&&null!=(h=r[u]))switch(u){case"children":p=h;break;case"value":a=h;break;case"defaultValue":c=h;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:q(n,o,u,h)}if(null===a&&null!==c&&(a=c),n.push(Y),null!=p){if(null!=a)throw Error(t(92));if(k(p)&&1<p.length)throw Error(t(93));a=""+p}return"string"==typeof a&&"\n"===a[0]&&n.push(J),null!==a&&n.push(l(E(""+a))),null;case"input":for(c in n.push(ne("input")),h=p=u=a=null,r)if(d.call(r,c)&&null!=(f=r[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"defaultChecked":h=f;break;case"defaultValue":u=f;break;case"checked":p=f;break;case"value":a=f;break;default:q(n,o,c,f)}return null!==p?q(n,o,"checked",p):null!==h&&q(n,o,"checked",h),null!==a?q(n,o,"value",a):null!==u&&q(n,o,"value",u),n.push(X),null;case"menuitem":for(var _ in n.push(ne("menuitem")),r)if(d.call(r,_)&&null!=(a=r[_]))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:q(n,o,_,a)}return n.push(Y),null;case"title":for(g in n.push(ne("title")),a=null,r)if(d.call(r,g)&&null!=(c=r[g]))switch(g){case"children":a=c;break;case"dangerouslySetInnerHTML":throw Error(t(434));default:q(n,o,g,c)}return n.push(Y),a;case"listing":case"pre":for(h in n.push(ne(i)),c=a=null,r)if(d.call(r,h)&&null!=(u=r[h]))switch(h){case"children":a=u;break;case"dangerouslySetInnerHTML":c=u;break;default:q(n,o,h,u)}if(n.push(Y),null!=c){if(null!=a)throw Error(t(60));if("object"!=typeof c||!("__html"in c))throw Error(t(61));null!=(r=c.__html)&&("string"==typeof r&&0<r.length&&"\n"===r[0]?n.push(J,l(r)):n.push(l(""+r)))}return"string"==typeof a&&"\n"===a[0]&&n.push(J),a;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var y in n.push(ne(i)),r)if(d.call(r,y)&&null!=(a=r[y]))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,i));default:q(n,o,y,a)}return n.push(X),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Q(n,r,i,o);case"html":return 0===s.insertionMode&&n.push(ie),Q(n,r,i,o);default:if(-1===i.indexOf("-")&&"string"!=typeof r.is)return Q(n,r,i,o);for(f in n.push(ne(i)),c=a=null,r)if(d.call(r,f)&&null!=(u=r[f]))switch(f){case"children":a=u;break;case"dangerouslySetInnerHTML":c=u;break;case"style":V(n,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:m(f)&&"function"!=typeof u&&"symbol"!=typeof u&&n.push(H,l(f),W,l(E(u)),$)}return n.push(Y),K(n,c,a),a}}((s=i.blockedSegment).chunks,r,o,n.responseState,s.formatContext),s.lastPushedText=!1,c=s.formatContext,s.formatContext=function(e,t,n){switch(t){case"select":return D(1,null!=n.value?n.value:n.defaultValue);case"svg":return D(2,null);case"math":return D(3,null);case"foreignObject":return D(1,null);case"table":return D(4,null);case"thead":case"tbody":case"tfoot":return D(5,null);case"colgroup":return D(7,null);case"tr":return D(6,null)}return 4<=e.insertionMode||0===e.insertionMode?D(1,null):e}(c,r,o),yn(n,i,a),s.formatContext=c,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push(re,l(r),oe)}s.lastPushedText=!1}}function gn(e,n,i){if(n.node=i,"object"==typeof i&&null!==i){switch(i.$$typeof){case tt:return void mn(e,n,i.type,i.props,i.ref);case nt:throw Error(t(257));case ht:var r=i._init;return void gn(e,n,i=r(i._payload))}if(k(i))return void _n(e,n,i);if((r=null===i||"object"!=typeof i?null:"function"==typeof(r=_t&&i[_t]||i["@@iterator"])?r:null)&&(r=r.call(i))){if(!(i=r.next()).done){var o=[];do{o.push(i.value),i=r.next()}while(!i.done);_n(e,n,o)}return}throw e=Object.prototype.toString.call(i),Error(t(31,"[object Object]"===e?"object with keys {"+Object.keys(i).join(", ")+"}":e))}"string"==typeof i?(r=n.blockedSegment).lastPushedText=F(n.blockedSegment.chunks,i,e.responseState,r.lastPushedText):"number"==typeof i&&((r=n.blockedSegment).lastPushedText=F(n.blockedSegment.chunks,""+i,e.responseState,r.lastPushedText))}function _n(e,t,n){for(var i=n.length,r=0;r<i;r++){var o=t.treeContext;t.treeContext=Lt(o,i,r);try{yn(e,t,n[r])}finally{t.treeContext=o}}}function yn(e,t,n){var i=t.blockedSegment.formatContext,r=t.legacyContext,o=t.context;try{return gn(e,t,n)}catch(l){if(Xt(),"object"!=typeof l||null===l||"function"!=typeof l.then)throw t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=o,kt(o),l;n=l;var s=t.blockedSegment,a=cn(0,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,e=ln(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=o,kt(o)}}function vn(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,wn(this,t,e)}function bn(e,n,i){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(n.allPendingTasks--,2!==n.status&&(n.status=2,null!==n.destination&&n.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===i?Error(t(432)):i,r.errorDigest=n.onError(e),r.parentFlushed&&n.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(e){return bn(e,n,i)}),r.fallbackAbortableTasks.clear(),n.allPendingTasks--,0===n.allPendingTasks&&(r=n.onAllReady)())}function xn(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&xn(e,n)}else e.completedSegments.push(t)}function wn(e,n,i){if(null===n){if(i.parentFlushed){if(null!==e.completedRootSegment)throw Error(t(389));e.completedRootSegment=i}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=an,(n=e.onShellReady)())}else n.pendingTasks--,n.forceClientRender||(0===n.pendingTasks?(i.parentFlushed&&1===i.status&&xn(n,i),n.parentFlushed&&e.completedBoundaries.push(n),n.fallbackAbortableTasks.forEach(vn,e),n.fallbackAbortableTasks.clear()):i.parentFlushed&&1===i.status&&(xn(n,i),1===n.completedSegments.length&&n.parentFlushed&&e.partialBoundaries.push(n)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function Sn(e){if(2!==e.status){var t=xt,n=on.current;on.current=nn;var i=rn;rn=e.responseState;try{var r,o=e.pingedTasks;for(r=0;r<o.length;r++){var s=o[r],a=e,l=s.blockedSegment;if(0===l.status){kt(s.context);try{gn(a,s,s.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(N),s.abortSet.delete(s),l.status=1,wn(a,s.blockedBoundary,l)}catch(f){if(Xt(),"object"==typeof f&&null!==f&&"function"==typeof f.then){var c=s.ping;f.then(c,c)}else{s.abortSet.delete(s),l.status=4;var u=s.blockedBoundary,d=f,h=un(a,d);null===u?dn(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,0===a.allPendingTasks&&(0,a.onAllReady)()}}}}o.splice(0,r),null!==e.destination&&In(e,e.destination)}catch(f){un(e,f),dn(e,f)}finally{rn=i,on.current=n,n===nn&&kt(t)}}}function En(e,n,i){switch(i.parentFlushed=!0,i.status){case 0:var s=i.id=e.nextSegmentId++;return i.lastPushedText=!1,i.textEmbedded=!1,e=e.responseState,r(n,se),r(n,e.placeholderPrefix),r(n,e=l(s.toString(16))),o(n,ae);case 1:i.status=2;var a=!0;s=i.chunks;var c=0;i=i.children;for(var u=0;u<i.length;u++){for(a=i[u];c<a.index;c++)r(n,s[c]);a=Cn(e,n,a)}for(;c<s.length-1;c++)r(n,s[c]);return c<s.length&&(a=o(n,s[c])),a;default:throw Error(t(390))}}function Cn(e,n,i){var s=i.boundary;if(null===s)return En(e,n,i);if(s.parentFlushed=!0,s.forceClientRender)s=s.errorDigest,o(n,de),r(n,fe),s&&(r(n,me),r(n,l(E(s))),r(n,pe)),o(n,ge),En(e,n,i);else if(0<s.pendingTasks){s.rootSegmentID=e.nextSegmentId++,0<s.completedSegments.length&&e.partialBoundaries.push(s);var a=e.responseState,u=a.nextSuspenseID++;a=c(a.boundaryPrefix+u.toString(16)),s=s.id=a,_e(n,e.responseState,s),En(e,n,i)}else if(s.byteSize>e.progressiveChunkSize)s.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(s),_e(n,e.responseState,s.id),En(e,n,i);else{if(o(n,le),1!==(i=s.completedSegments).length)throw Error(t(391));Cn(e,n,i[0])}return o(n,he)}function Tn(e,n,i){return function(e,n,i,s){switch(i.insertionMode){case 0:case 1:return r(e,ye),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,ve);case 2:return r(e,xe),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,we);case 3:return r(e,Ee),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,Ce);case 4:return r(e,ke),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,Ae);case 5:return r(e,Pe),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,Le);case 6:return r(e,Oe),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,Me);case 7:return r(e,Ne),r(e,n.segmentPrefix),r(e,l(s.toString(16))),o(e,Fe);default:throw Error(t(397))}}(n,e.responseState,i.formatContext,i.id),Cn(e,n,i),function(e,n){switch(n.insertionMode){case 0:case 1:return o(e,be);case 2:return o(e,Se);case 3:return o(e,Te);case 4:return o(e,Ie);case 5:return o(e,Re);case 6:return o(e,De);case 7:return o(e,Be);default:throw Error(t(397))}}(n,i.formatContext)}function kn(e,n,i){for(var s=i.completedSegments,a=0;a<s.length;a++)An(e,n,i,s[a]);if(s.length=0,e=e.responseState,s=i.id,i=i.rootSegmentID,r(n,e.startInlineScript),e.sentCompleteBoundaryFunction?r(n,We):(e.sentCompleteBoundaryFunction=!0,r(n,He)),null===s)throw Error(t(395));return i=l(i.toString(16)),r(n,s),r(n,$e),r(n,e.segmentPrefix),r(n,i),o(n,Ge)}function An(e,n,i,s){if(2===s.status)return!0;var a=s.id;if(-1===a){if(-1===(s.id=i.rootSegmentID))throw Error(t(392));return Tn(e,n,s)}return Tn(e,n,s),r(n,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?r(n,Ue):(e.sentCompleteSegmentFunction=!0,r(n,ze)),r(n,e.segmentPrefix),r(n,a=l(a.toString(16))),r(n,je),r(n,e.placeholderPrefix),r(n,a),o(n,Ve)}function In(e,a){n=new Uint8Array(512),i=0;try{var c=e.completedRootSegment;if(null!==c&&0===e.pendingRootTasks){Cn(e,a,c),e.completedRootSegment=null;var u=e.responseState.bootstrapChunks;for(c=0;c<u.length-1;c++)r(a,u[c]);c<u.length&&o(a,u[c])}var d,h=e.clientRenderedBoundaries;for(d=0;d<h.length;d++){var f=h[d];u=a;var p=e.responseState,m=f.id,g=f.errorDigest,_=f.errorMessage,y=f.errorComponentStack;if(r(u,p.startInlineScript),p.sentClientRenderFunction?r(u,Ye):(p.sentClientRenderFunction=!0,r(u,qe)),null===m)throw Error(t(395));r(u,m),r(u,Xe),(g||_||y)&&(r(u,Ze),r(u,l(Je(g||"")))),(_||y)&&(r(u,Ze),r(u,l(Je(_||"")))),y&&(r(u,Ze),r(u,l(Je(y)))),o(u,Ke)}h.splice(0,d);var v=e.completedBoundaries;for(d=0;d<v.length;d++)kn(e,a,v[d]);v.splice(0,d),s(a),n=new Uint8Array(512),i=0;var b=e.partialBoundaries;for(d=0;d<b.length;d++){var x=b[d];e:{h=e,f=a;var w=x.completedSegments;for(p=0;p<w.length;p++)if(!An(h,f,x,w[p])){p++,w.splice(0,p);var S=!1;break e}w.splice(0,p),S=!0}if(!S)return e.destination=null,d++,void b.splice(0,d)}b.splice(0,d);var E=e.completedBoundaries;for(d=0;d<E.length;d++)kn(e,a,E[d]);E.splice(0,d)}finally{s(a),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&a.close()}}function Pn(e,t){try{var n=e.abortableTasks;n.forEach(function(n){return bn(n,e,t)}),n.clear(),null!==e.destination&&In(e,e.destination)}catch(i){un(e,i),dn(e,i)}}return uhe.renderToReadableStream=function(e,t){return new Promise(function(n,i){var r,o,s=new Promise(function(e,t){o=e,r=t}),a=function(e,t,n,i,r,o,s,a,l){var c=[],u=new Set;return(n=cn(t={destination:null,responseState:t,progressiveChunkSize:void 0===i?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===r?sn:r,onAllReady:void 0===o?an:o,onShellReady:void 0===s?an:s,onShellError:void 0===a?an:a,onFatalError:void 0===l?an:l},0,null,n,!1,!1)).parentFlushed=!0,e=ln(t,e,null,n,u,vt,null,Pt),c.push(e),t}(e,function(e,t,n,i,r){e=void 0===e?"":e,t=void 0===t?A:c('<script nonce="'+E(t)+'">');var o=[];if(void 0!==n&&o.push(t,l((""+n).replace(O,M)),I),void 0!==i)for(n=0;n<i.length;n++)o.push(P,l(E(i[n])),R);if(void 0!==r)for(i=0;i<r.length;i++)o.push(L,l(E(r[i])),R);return{bootstrapChunks:o,startInlineScript:t,placeholderPrefix:c(e+"P:"),segmentPrefix:c(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return D("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,o,function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===a.status)a.status=2,u(e,a.fatalError);else if(2!==a.status&&null===a.destination){a.destination=e;try{In(a,e)}catch(t){un(a,t),dn(a,t)}}},cancel:function(){Pn(a)}},{highWaterMark:0});e.allReady=s,n(e)},function(e){s.catch(function(){}),i(e)},r);if(t&&t.signal){var d=t.signal,h=function(){Pn(a,d.reason),d.removeEventListener("abort",h)};d.addEventListener("abort",h)}Sn(a)})},uhe.version="18.3.1",uhe}!function(){return che||(che=1,e=ahe(),t=dhe(),ohe.version=e.version,ohe.renderToString=e.renderToString,ohe.renderToStaticMarkup=e.renderToStaticMarkup,ohe.renderToNodeStream=e.renderToNodeStream,ohe.renderToStaticNodeStream=e.renderToStaticNodeStream,ohe.renderToReadableStream=t.renderToReadableStream),ohe;var e,t}();export{eV as $,nB as A,ms as B,yM as C,kV as D,jV as E,BV as F,lH as G,bs as H,KV as I,iV as J,qV as K,at as L,EV as M,IV as N,HV as O,Oj as P,ia as Q,zm as R,Rj as S,aP as T,ys as U,Lj as V,rV as W,xa as X,KD as Y,Qj as Z,rH as _,w as a,JV as a0,Zj as a1,ws as b,$ as c,ba as d,F as e,N as f,eF as g,ra as h,KM as i,b as j,jD as k,kD as l,gs as m,vs as n,eB as o,Jde as p,xue as q,x as r,tue as s,Xj as t,wH as u,EH as v,TV as w,va as x,Wt as y,na as z};
