const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-zWarN3Ve.js","assets/vendor-react-C341c8YC.js","assets/vendor-core-WoOfkQwm.js","assets/Dashboard-BIMfl_CK.js","assets/useThemeColors-AeHMyThq.js","assets/PageLayout-CcoYWyzO.js","assets/PacketList-CnSxB7Jy.js","assets/channel-keys-DJWRrSwE.js","assets/SignalIndicator-BLrEkFNb.js","assets/DataBox-CRX76VsB.js","assets/TimeRangeSelector-DGCfekAv.js","assets/link-scoring-BNnTohl3.js","assets/NodeInformationCard-D-IeNCCX.js","assets/Card-BeZKc0xw.js","assets/Grid-BOO-7ObJ.js","assets/Packets-DHxvwdwr.js","assets/Contacts-BcOss4J-.js","assets/ping-BvkXSZG_.js","assets/CollisionExplorerModal-Vkgg9Koo.js","assets/BasemapLayer-S9Ush6Hh.js","assets/ConfirmModal-DlFyryXJ.js","assets/maplibre-gl-B1CfjdFi.css","assets/Statistics-DqgywSJF.js","assets/usePolling-CtRLadGa.js","assets/MeshGraph-CdoFbL_m.js","assets/DeepAnalysisModal-DysenxvY.js","assets/System-Cw2qx9Xo.js","assets/Logs-EKbeyhLl.js","assets/Terminal-BQEu4TKw.js","assets/Configuration-_CjN4yUe.js","assets/font-loader-jlbdh9Fw.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{r as s,j as n,c as a,L as r,d as o,A as i,h as l,m as c,z as u,Q as d,e as h,M as m,y as f,X as g,x as p,C as b,f as y,g as x,i as w,u as v,k,l as S,n as C,o as j,W as T,G as M,F as L,S as N,p as _,q as E,t as P,v as D,w as I,B as F,D as A,E as R,H as z,b as B,I as O,J as $,K as W,N as H,O as U,T as q}from"./vendor-react-C341c8YC.js";import{_ as G}from"./deckgl-DTsmDcfs.js";import{n as J}from"./recharts-6XUQYgRA.js";import"./vendor-core-WoOfkQwm.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Y={surfaces:{glass:{tint:"#252525",light:"#ffffff",dark:"#000000",reflexLight:.15,reflexDark:.8,blur:6,blurElevated:8,brightness:1,opacity:8,opacityElevated:12},card:{radius:"1.125rem",padding:"1.25rem",paddingCompact:"0.75rem"},sidebar:{tint:"rgba(113, 156, 223, 0.06)",width:"16rem",drawerWidth:"85vw"},modal:{radius:"1.125rem",backdropBlur:"8px",backdropColor:"rgba(0, 0, 0, 0.6)"}},colors:{bg:{body:"#171717",surface:"#252525",elevated:"#333233",subtle:"#3F3F3F"},border:{subtle:"#4B4B4B",strong:"#616161"},text:{primary:"#E1E1E1",secondary:"#BFBFBF",muted:"#727272",inverse:"#171717"},accent:{primary:"#719CDF",secondary:"#DFBC72",tertiary:"#6FBCBD",success:"#719872",danger:"#E12672"},signal:{excellent:"#00FF00",good:"#8CE619",fair:"#FFD900",poor:"#FF8C26",critical:"#FF3333",unknown:"#616161"},status:{success:"#719872",warning:"#DFBC72",danger:"#E12672",info:"#6FBCBD",muted:"#616161"},chart:{c1:"#719CDF",c2:"#0074BE",c3:"#6FBCBD",c4:"#DFBC72",c5:"#719872",c6:"#E12672",c7:"#E17899",c8:"#999ABD",grid:"rgba(255, 255, 255, 0.06)",axis:"rgba(255, 255, 255, 0.4)",cursor:"rgba(255, 255, 255, 0.2)"},metric:{received:"#719872",forwarded:"#0074BE",transmitted:"#DFBC72",dropped:"#E12672"},map:{nodeFill:"#3B82F6",nodeStroke:"rgba(255,255,255,0.9)",hub:"#8E4EC6",local:"#FFB224",neighbor:"#46A758",mobile:"#F76B15",room:"#D6409F",edge:"#4B4B4B",edgeHover:"#6FBCBD"}},typography:{font:{title:"'Inter', system-ui, sans-serif",display:"'Inter', system-ui, sans-serif",mono:"'JetBrains Mono', 'SF Mono', Monaco, monospace"},size:{xs:"0.64rem",sm:"0.8rem",base:"1rem",md:"1.125rem",lg:"1.25rem",xl:"1.563rem",xxl:"1.953rem",hero:"3.052rem"},weight:{normal:400,medium:500,semibold:600,bold:700},leading:{tight:1.1,snug:1.25,normal:1.5},tracking:{tight:"-0.02em",normal:"0",wide:"0.05em"}},spacing:{space:{gap:"1.5rem",gapMobile:"0.75rem",page:"1.5rem",pageMobile:"1rem",section:"2rem"},radius:{sm:"0.5rem",md:"0.875rem",lg:"1.125rem",xl:"1.5rem",pill:"9999px"}},motion:{fast:"0.1s",normal:"0.15s",slow:"0.4s",easing:"ease-out"}};function V(e){const t=e.replace("#","");if(6!==t.length&&3!==t.length)return e;let s,n,a;return 3===t.length?(s=parseInt(t[0]+t[0],16)/255,n=parseInt(t[1]+t[1],16)/255,a=parseInt(t[2]+t[2],16)/255):(s=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255),`color(display-p3 ${s.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`}function K(){return"undefined"!=typeof window&&CSS.supports("color","color(display-p3 1 1 1)")}function X(e){return K()?V(e):e}function Q(e,t){const s={...e};for(const n of Object.keys(t)){const a=t[n],r=e[n];void 0!==a&&("object"!=typeof a||null===a||Array.isArray(a)||"object"!=typeof r||null===r||Array.isArray(r)?s[n]=a:s[n]=Q(r,a))}return s}function Z(e){return{meta:e.meta,display:e.display,surfaces:e.surfaces?Q(Y.surfaces,e.surfaces):Y.surfaces,colors:e.colors?Q(Y.colors,e.colors):Y.colors,typography:e.typography?Q(Y.typography,e.typography):Y.typography,spacing:e.spacing?Q(Y.spacing,e.spacing):Y.spacing,motion:e.motion?Q(Y.motion,e.motion):Y.motion}}function ee(e){const t=e.replace("#","");return 6===t.length?`${parseInt(t.slice(0,2),16)}, ${parseInt(t.slice(2,4),16)}, ${parseInt(t.slice(4,6),16)}`:"255, 255, 255"}function te(e){return{id:e.meta.id,colorScheme:{name:e.meta.name,dataTheme:e.meta.dataTheme,previewColor:e.meta.previewColor},background:{src:e.meta.backgroundImage,suggestedBrightness:e.meta.backgroundBrightness},display:{font:e.display.font,color:e.display.color,size:e.display.size,paletteColors:e.display.palette}}}const se="#fafafa",ne="#a1a1aa",ae="#71717a",re="#3f3f46",oe="#27272a",ie="#18181b",le="#09090b",ce="#ef4444",ue="#f97316",de="#f59e0b",he="#eab308",me="#22c55e",fe="#10b981",ge="#06b6d4",pe="#3b82f6",be="#8b5cf6",ye=Z({meta:{id:"",name:"",dataTheme:"",previewColor:pe,backgroundImage:"",backgroundBrightness:100,isDark:!0},display:{font:"Inter, sans-serif",color:ne,size:1,palette:[[pe,me,he,ue,ce],[le,ie,oe,re,se]]},typography:{font:{title:"Inter, sans-serif",display:"Inter, sans-serif",mono:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},weight:{normal:400,medium:500,semibold:600,bold:700,badge:700},tracking:{tight:"-0.02em",normal:"0",wide:"0.025em"},badge:{textTransform:"capitalize"}},surfaces:{glass:{tint:ie,light:re,dark:le,reflexLight:0,reflexDark:0,blur:0,blurElevated:0,brightness:1,opacity:100,opacityElevated:100,catalystMode:!0},sidebar:{tint:`${oe}80`},card:{radius:"0.5rem"},modal:{radius:"0.75rem"}},colors:{bg:{body:le,surface:ie,elevated:oe,subtle:oe},border:{subtle:oe,strong:"#52525b"},text:{primary:"#fff",secondary:ne,muted:ae,inverse:le},accent:{primary:pe,secondary:he,tertiary:ge,success:me,danger:ce},signal:{excellent:me,good:"#84cc16",fair:he,poor:ue,critical:ce,unknown:ae},status:{success:me,warning:de,danger:ce,info:pe,muted:ae},chart:{c1:pe,c2:fe,c3:de,c4:ue,c5:"#f43f5e",c6:be,c7:ge,c8:ae,grid:`${se}0d`,axis:`${se}33`,cursor:`${pe}33`},metric:{received:pe,forwarded:fe,transmitted:ue,dropped:ce},map:{nodeFill:pe,nodeStroke:`${se}e6`,hub:be,local:de,neighbor:fe,mobile:ue,room:"#ec4899",edge:re,edgeHover:pe}}}),xe=ye;te(ye);const we=Z({meta:{id:"",name:"",dataTheme:"",previewColor:"#B39DF3",backgroundImage:"/assets/sand.jpg",backgroundBrightness:80,isDark:!0},display:{font:"'Rubik Mono One', monospace",color:"#4A4A52",size:.8,palette:[["#B49DFF","#F9D26F","#71F8E5","#39D98A","#FF5C7A"],["#4CFFB5","#FF8A5C","#A78BFA","#60A5FA","#F472B6"]]},typography:{font:{title:"'Rubik Mono One', monospace"}},surfaces:{glass:{tint:"#252525",blur:6,blurElevated:8},sidebar:{tint:"rgba(113, 156, 223, 0.06)"}}}),ve=we;te(we);const ke=Z({meta:{id:"",name:"",dataTheme:"",previewColor:"#fabd2f",backgroundImage:"/assets/magma.webp",backgroundBrightness:50,isDark:!0},display:{font:"'Jacquard 12', serif",color:"#fe8019",size:1.75,palette:[["#fabd2f","#fb4934","#8ec07c","#b8bb26","#d3869b"],["#fe8019","#83a598","#d65d0e","#928374","#ebdbb2"]]},typography:{font:{title:"'Jacquard 12', serif"},size:{xxl:"2.344rem"}},surfaces:{glass:{tint:"#282828"},sidebar:{tint:"rgba(250, 189, 47, 0.06)"}},colors:{accent:{primary:"#fabd2f",secondary:"#fb4934",tertiary:"#8ec07c",success:"#b8bb26",danger:"#fb4934"},signal:{excellent:"#b8bb26",good:"#8ec07c",fair:"#fabd2f",poor:"#fe8019",critical:"#fb4934",unknown:"#928374"},status:{success:"#b8bb26",warning:"#fabd2f",danger:"#fb4934",info:"#83a598",muted:"#928374"},chart:{c1:"#fabd2f",c2:"#fe8019",c3:"#fb4934",c4:"#d3869b",c5:"#b8bb26",c6:"#8ec07c",c7:"#83a598",c8:"#d65d0e",grid:"rgba(251, 241, 199, 0.06)",axis:"rgba(251, 241, 199, 0.4)",cursor:"rgba(251, 241, 199, 0.2)"},metric:{received:"#b8bb26",forwarded:"#83a598",transmitted:"#fabd2f",dropped:"#fb4934"},map:{nodeFill:"#3B82F6",nodeStroke:"rgba(255,255,255,0.9)",hub:"#b16286",local:"#fabd2f",neighbor:"#fabd2f",mobile:"#fe8019",room:"#d3869b",edge:"#665c54",edgeHover:"#8ec07c"}}}),Se=ke;te(ke);const Ce=Z({meta:{id:"",name:"",dataTheme:"",previewColor:"#83a598",backgroundImage:"/assets/water.webp",backgroundBrightness:40,isDark:!0},display:{font:"'Cantora One', sans-serif",color:"#83a598",size:1.25,palette:[["#83a598","#a89984","#8ec07c","#d79921","#b16286"],["#fe8019","#cc241d","#7c6f64","#bdae93","#ebdbb2"]]},typography:{font:{title:"'Cantora One', sans-serif"},size:{xxl:"2.148rem"},weight:{semibold:500}},surfaces:{glass:{tint:"#1e1e1e"},sidebar:{tint:"rgba(131, 165, 152, 0.06)"}},colors:{accent:{primary:"#83a598",secondary:"#a89984",tertiary:"#8ec07c",success:"#8ec07c",danger:"#cc241d"},signal:{excellent:"#8ec07c",good:"#b8bb26",fair:"#d79921",poor:"#fe8019",critical:"#cc241d",unknown:"#7c6f64"},status:{success:"#8ec07c",warning:"#d79921",danger:"#cc241d",info:"#83a598",muted:"#7c6f64"},chart:{c1:"#83a598",c2:"#8ec07c",c3:"#d79921",c4:"#b16286",c5:"#fe8019",c6:"#cc241d",c7:"#a89984",c8:"#7c6f64",grid:"rgba(213, 196, 161, 0.06)",axis:"rgba(213, 196, 161, 0.4)",cursor:"rgba(213, 196, 161, 0.2)"},metric:{received:"#8ec07c",forwarded:"#83a598",transmitted:"#d79921",dropped:"#cc241d"},map:{nodeFill:"#3B82F6",nodeStroke:"rgba(255,255,255,0.9)",hub:"#b16286",local:"#d79921",neighbor:"#d79921",mobile:"#fe8019",room:"#b16286",edge:"#504945",edgeHover:"#83a598"}}}),je=Ce;te(Ce);const Te=Z({meta:{id:"",name:"",dataTheme:"",previewColor:"#33859d",backgroundImage:"/assets/stars.jpg",backgroundBrightness:100,isDark:!0},display:{font:"'IBM Plex Mono', monospace",color:"#c23127",size:1.25,palette:[["#33859d","#edb54b","#26a98b","#c23127","#888ca6"],["#195465","#d26939","#99d1ce","#4e5165","#0c1014"]]},typography:{font:{title:"'IBM Plex Mono', monospace"}},surfaces:{glass:{tint:"#0a0e14",blur:1,blurElevated:2},sidebar:{tint:"rgba(51, 133, 157, 0.06)"}},colors:{accent:{primary:"#33859d",secondary:"#edb54b",tertiary:"#26a98b",success:"#26a98b",danger:"#c33027"},signal:{excellent:"#26a98b",good:"#7ec07c",fair:"#edb54b",poor:"#d26939",critical:"#c33027",unknown:"#195465"},status:{success:"#26a98b",warning:"#edb54b",danger:"#c33027",info:"#599caa",muted:"#195465"},chart:{c1:"#33859d",c2:"#edb54b",c3:"#26a98b",c4:"#599caa",c5:"#d26939",c6:"#c33027",c7:"#888ba5",c8:"#195465",grid:"rgba(153, 209, 206, 0.06)",axis:"rgba(153, 209, 206, 0.4)",cursor:"rgba(153, 209, 206, 0.2)"},metric:{received:"#26a98b",forwarded:"#33859d",transmitted:"#edb54b",dropped:"#c33027"},map:{nodeFill:"#3B82F6",nodeStroke:"rgba(255,255,255,0.9)",hub:"#888ba5",local:"#edb54b",neighbor:"#edb54b",mobile:"#d26939",room:"#888ba5",edge:"#245361",edgeHover:"#26a98b"}}}),Me=Te;te(Te);const Le="#2D2D2D",Ne="#4A4A4A",_e="#7A7A7A",Ee=Z({meta:{id:"",name:"",dataTheme:"",previewColor:"#9ed072",backgroundImage:"",backgroundColor:"#F5F5F5",backgroundBrightness:100,isDark:!1},display:{font:"'JetBrains Mono', monospace",color:"#2D2D2D",size:1,palette:[["#9ed072","#fc5d7c","#76cce0","#e7c664","#b39df3"],["#f39660","#7f8490","#e2e2e3","#55575e","#2c2e34"]]},typography:{font:{title:"'JetBrains Mono', 'SF Mono', Monaco, monospace",display:"'Instrument Sans', system-ui, sans-serif",mono:"'JetBrains Mono', 'SF Mono', Monaco, monospace",cardTitle:"'JetBrains Mono', 'SF Mono', Monaco, monospace"},size:{xxl:"1.875rem",cardTitle:"1rem"},weight:{normal:400,medium:500,semibold:600,bold:600,cardTitle:600}},surfaces:{glass:{tint:"#FFFFFF",light:"rgba(255, 255, 255, 1)",dark:"rgba(0, 0, 0, 0.1)",reflexLight:0,reflexDark:0,blur:0,blurElevated:0,brightness:1,opacity:0,opacityElevated:0,ribbonMode:!0,ribbonBorderWidth:2,ribbonBorderColor:_e},sidebar:{tint:"rgba(0, 0, 0, 0.02)"}},colors:{bg:{body:"#F5F5F5",surface:"#FFFFFF",elevated:"#FFFFFF",subtle:"#EBEBEB"},border:{subtle:"#E0E0E0",strong:"#BFBFBF"},text:{primary:Le,secondary:Ne,muted:_e,inverse:"#FFFFFF"},accent:{primary:"#9ed072",secondary:"#e7c664",tertiary:"#76cce0",success:"#9ed072",danger:"#fc5d7c"},signal:{excellent:"#9ed072",good:"#c5d93d",fair:"#e7c664",poor:"#f39660",critical:"#fc5d7c",unknown:"#7f8490"},status:{success:"#9ed072",warning:"#e7c664",danger:"#fc5d7c",info:"#76cce0",muted:"#7f8490"},chart:{c1:"#2E8B57",c2:"#E14D6B",c3:"#D4A832",c4:"#4A9EA0",c5:"#8B6BAE",c6:"#D97A4A",c7:_e,c8:Ne,grid:"rgba(45, 45, 45, 0.08)",axis:"rgba(45, 45, 45, 0.5)",cursor:"rgba(45, 45, 45, 0.15)"},metric:{received:"#9ed072",forwarded:"#76cce0",transmitted:"#e7c664",dropped:"#fc5d7c"},map:{nodeFill:"#3B82F6",nodeStroke:"rgba(255,255,255,0.9)",hub:"#b39df3",local:"#e7c664",neighbor:"#e7c664",mobile:"#f39660",room:"#fc5d7c",edge:_e,edgeHover:"#76cce0"},icon:{pageTitle:Le,cardTitle:Le,widget:Ne,action:Ne,nav:_e,navActive:Le},sidebar:{bg:"rgba(0, 0, 0, 0.02)",navHoverBg:"rgba(0, 0, 0, 0.04)",navActiveBg:"rgba(0, 0, 0, 0.06)",navActiveText:Le}}}),Pe=Ee;te(Ee);const De=Z({meta:{id:"",name:"",dataTheme:"",previewColor:"#7E9CD8",backgroundImage:"/assets/folds.webp",backgroundBrightness:50,isDark:!0},display:{font:"'Inter', sans-serif",color:"#7E9CD8",size:1.25,palette:[["#7E9CD8","#E46876","#7AA89F","#DCA561","#957FB8"],["#7FB4CA","#D27E99","#98BB6C","#727169","#1F1F28"]]},typography:{font:{title:"'Inter', sans-serif"}},surfaces:{glass:{tint:"#1F1F28"},sidebar:{tint:"rgba(126, 156, 216, 0.06)"}},colors:{accent:{primary:"#7E9CD8",secondary:"#E6C384",tertiary:"#7FB4CA",success:"#98BB6C",danger:"#E46876"},signal:{excellent:"#98BB6C",good:"#B8CC5C",fair:"#E6C384",poor:"#FFA066",critical:"#E46876",unknown:"#54546D"},status:{success:"#98BB6C",warning:"#E6C384",danger:"#E46876",info:"#7FB4CA",muted:"#727169"},chart:{c1:"#7E9CD8",c2:"#E6C384",c3:"#98BB6C",c4:"#957FB8",c5:"#7FB4CA",c6:"#E46876",c7:"#FFA066",c8:"#D27E99",grid:"rgba(220, 215, 186, 0.06)",axis:"rgba(220, 215, 186, 0.4)",cursor:"rgba(220, 215, 186, 0.2)"},metric:{received:"#98BB6C",forwarded:"#7E9CD8",transmitted:"#E6C384",dropped:"#E46876"},map:{nodeFill:"#3B82F6",nodeStroke:"rgba(255,255,255,0.9)",hub:"#957FB8",local:"#E6C384",neighbor:"#E6C384",mobile:"#FFA066",room:"#D27E99",edge:"#54546D",edgeHover:"#7AA89F"}}}),Ie=De;te(De);const Fe={"KDE Breeze":xe,Magma:Se,Folds:Ie,Ribbon:Pe,BLKSAND:ve,Waves:je,Stars:Me};function Ae(e,t){const s=e.toLowerCase();return{...t,meta:{...t.meta,id:s,name:e,dataTheme:s}}}const Re=Object.fromEntries(Object.entries(Fe).map(([e,t])=>[e,Ae(e,t)])),ze=Object.fromEntries(Object.entries(Re).map(([e,t])=>[e,te(t)])),Be=Object.values(Re);function Oe(e){return Be.find(t=>t.meta.id===e)}new Map(Object.entries(Re));const $e=Object.values(ze);new Map(Object.entries(ze));const We=Object.entries(ze).map(([e,t])=>function(e,t){return{id:e.id,name:e.colorScheme.name,displayName:t,colorScheme:e.id,backgroundImage:e.background.src,paletteColors:e.display.paletteColors,displayFont:e.display.font,displayColor:e.display.color,displaySize:e.display.size}}(t,e)),He=$e.map(function(e){return{id:e.id,name:e.colorScheme.name,dataTheme:e.colorScheme.dataTheme,previewColor:e.colorScheme.previewColor}}),Ue=$e.map(function(e){return{id:e.id,src:e.background.src,suggestedScheme:e.id,suggestedBrightness:e.background.suggestedBrightness}}),qe=Re["KDE Breeze"];ze["KDE Breeze"];const Ge=qe.meta.id,Je=qe.meta.backgroundImage,Ye=qe.meta.backgroundBrightness,Ve=He,Ke=Ue,Xe=We,Qe={colorScheme:Ge,backgroundImage:Je,brightness:Ye},Ze="pymc-color-scheme",et="pymc-background-image",tt="pymc-bg-brightness",st="pymc-background";function nt(e){(new Image).src=e}const at={50:.97,100:.92,200:.84,300:.73,400:.62,500:.5,600:.4,700:.32,800:.24,900:.16},rt=[50,100,200,300,400,500,600,700,800,900],ot=["red","orange","yellow","green","aqua","blue","purple"];function it(e,t,s){const n=e=>Math.round(Math.max(0,Math.min(255,e))).toString(16).padStart(2,"0");return`#${n(e)}${n(t)}${n(s)}`}function lt(e){const t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ct(e){const t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.round(255*t)}function ut(e,t,s){const n=s*(Math.PI/180),a=t*Math.cos(n),r=t*Math.sin(n),o=e+.3963377774*a+.2158037573*r,i=e-.1055613458*a-.0638541728*r,l=e-.0894841775*a-1.291485548*r,c=o*o*o,u=i*i*i,d=l*l*l,h=-1.2684380046*c+2.6097574011*u-.3413193965*d,m=-.0041960863*c-.7034186147*u+1.707614701*d;return[ct(4.0767416621*c-3.3077115913*u+.2309699292*d),ct(h),ct(m)]}function dt(e){const[t,s,n]=function(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e),[,a,r]=function(e,t,s){const n=lt(e),a=lt(t),r=lt(s),o=.4122214708*n+.5363325363*a+.0514459929*r,i=.2119034982*n+.6806995451*a+.1073969566*r,l=.0883024619*n+.2817188376*a+.6299787005*r,c=Math.cbrt(o),u=Math.cbrt(i),d=Math.cbrt(l),h=.2104542553*c+.793617785*u-.0040720468*d,m=1.9779984951*c-2.428592205*u+.4505937099*d,f=.0259040371*c+.7827717662*u-.808675766*d,g=Math.sqrt(m*m+f*f);let p=Math.atan2(f,m)*(180/Math.PI);return p<0&&(p+=360),[h,g,p]}(t,s,n),o={};for(const i of rt){const e=at[i],t=a*(1-.3*Math.abs(e-.5)),[s,n,l]=ut(e,t,r);o[i]=it(s,n,l)}return o}function ht(e){return"undefined"==typeof window?"":getComputedStyle(document.documentElement).getPropertyValue(e).trim()}function mt(e,t){"undefined"!=typeof document&&document.documentElement.style.setProperty(e,t)}const ft="u-off",gt="u-label",pt="width",bt="height",yt="top",xt="bottom",wt="left",vt="right",kt="#000",St=kt+"0",Ct="mousemove",jt="mousedown",Tt="mouseup",Mt="mouseenter",Lt="mouseleave",Nt="dblclick",_t="change",Et="dppxchange",Pt="--",Dt="undefined"!=typeof window,It=Dt?document:null,Ft=Dt?window:null,At=Dt?navigator:null;let Rt,zt;function Bt(e,t){if(null!=t){let s=e.classList;!s.contains(t)&&s.add(t)}}function Ot(e,t){let s=e.classList;s.contains(t)&&s.remove(t)}function $t(e,t,s){e.style[t]=s+"px"}function Wt(e,t,s,n){let a=It.createElement(e);return null!=t&&Bt(a,t),null!=s&&s.insertBefore(a,n),a}function Ht(e,t){return Wt("div",e,t)}const Ut=new WeakMap;function qt(e,t,s,n,a){let r="translate("+t+"px,"+s+"px)";r!=Ut.get(e)&&(e.style.transform=r,Ut.set(e,r),t<0||s<0||t>n||s>a?Bt(e,ft):Ot(e,ft))}const Gt=new WeakMap;function Jt(e,t,s){let n=t+s;n!=Gt.get(e)&&(Gt.set(e,n),e.style.background=t,e.style.borderColor=s)}const Yt=new WeakMap;function Vt(e,t,s,n){let a=t+""+s;a!=Yt.get(e)&&(Yt.set(e,a),e.style.height=s+"px",e.style.width=t+"px",e.style.marginLeft=n?-t/2+"px":0,e.style.marginTop=n?-s/2+"px":0)}const Kt={passive:!0},Xt={...Kt,capture:!0};function Qt(e,t,s,n){t.addEventListener(e,s,n?Xt:Kt)}function Zt(e,t,s,n){t.removeEventListener(e,s,Kt)}function es(e,t,s,n){let a;s=s||0;let r=(n=n||t.length-1)<=2147483647;for(;n-s>1;)a=r?s+n>>1:xs((s+n)/2),t[a]<e?s=a:n=a;return e-t[s]<=t[n]-e?s:n}function ts(e){return(t,s,n)=>{let a=-1,r=-1;for(let o=s;o<=n;o++)if(e(t[o])){a=o;break}for(let o=n;o>=s;o--)if(e(t[o])){r=o;break}return[a,r]}}Dt&&function e(){let t=devicePixelRatio;Rt!=t&&(Rt=t,zt&&Zt(_t,zt,e),zt=matchMedia(`(min-resolution: ${Rt-.001}dppx) and (max-resolution: ${Rt+.001}dppx)`),Qt(_t,zt,e),Ft.dispatchEvent(new CustomEvent(Et)))}();const ss=e=>null!=e,ns=e=>null!=e&&e>0,as=ts(ss),rs=ts(ns);function os(e,t,s,n){let a=js(e),r=js(t);e==t&&(-1==a?(e*=s,t/=s):(e/=s,t*=s));let o=10==s?Ts:Ms,i=1==r?vs:xs,l=(1==a?xs:vs)(o(ys(e))),c=i(o(ys(t))),u=Cs(s,l),d=Cs(s,c);return 10==s&&(l<0&&(u=Us(u,-l)),c<0&&(d=Us(d,-c))),n||2==s?(e=u*a,t=d*r):(e=Hs(e,u),t=Ws(t,d)),[e,t]}function is(e,t,s,n){let a=os(e,t,s,n);return 0==e&&(a[0]=0),0==t&&(a[1]=0),a}const ls={mode:3,pad:.1},cs={pad:0,soft:null,mode:0},us={min:cs,max:cs};function ds(e,t,s,n){return en(s)?ms(e,t,s):(cs.pad=s,cs.soft=n?0:null,cs.mode=n?3:0,ms(e,t,us))}function hs(e,t){return null==e?t:e}function ms(e,t,s){let n=s.min,a=s.max,r=hs(n.pad,0),o=hs(a.pad,0),i=hs(n.hard,-Ns),l=hs(a.hard,Ns),c=hs(n.soft,Ns),u=hs(a.soft,-Ns),d=hs(n.mode,0),h=hs(a.mode,0),m=t-e,f=Ts(m),g=Ss(ys(e),ys(t)),p=Ts(g),b=ys(p-f);(m<1e-24||b>10)&&(m=0,0!=e&&0!=t||(m=1e-24,2==d&&c!=Ns&&(r=0),2==h&&u!=-Ns&&(o=0)));let y=m||g||1e3,x=Ts(y),w=Cs(10,xs(x)),v=Us(Hs(e-y*(0==m?0==e?.1:1:r),w/10),24),k=e>=c&&(1==d||3==d&&v<=c||2==d&&v>=c)?c:Ns,S=Ss(i,v<k&&e>=k?k:ks(k,v)),C=Us(Ws(t+y*(0==m?0==t?.1:1:o),w/10),24),j=t<=u&&(1==h||3==h&&C>=u||2==h&&C<=u)?u:-Ns,T=ks(l,C>j&&t<=j?j:Ss(j,C));return S==T&&0==S&&(T=100),[S,T]}const fs=new Intl.NumberFormat(Dt?At.language:"en-US"),gs=e=>fs.format(e),ps=Math,bs=ps.PI,ys=ps.abs,xs=ps.floor,ws=ps.round,vs=ps.ceil,ks=ps.min,Ss=ps.max,Cs=ps.pow,js=ps.sign,Ts=ps.log10,Ms=ps.log2,Ls=(e,t=1)=>ps.asinh(e/t),Ns=1/0;function _s(e){return 1+(0|Ts((e^e>>31)-(e>>31)))}function Es(e,t,s){return ks(Ss(e,t),s)}function Ps(e){return"function"==typeof e}function Ds(e){return Ps(e)?e:()=>e}const Is=e=>e,Fs=(e,t)=>t,As=e=>null,Rs=e=>!0,zs=(e,t)=>e==t,Bs=/\.\d*?(?=9{6,}|0{6,})/gm,Os=e=>{if(Qs(e)||qs.has(e))return e;const t=`${e}`,s=t.match(Bs);if(null==s)return e;let n=s[0].length-1;if(-1!=t.indexOf("e-")){let[e,s]=t.split("e");return+`${Os(e)}e${s}`}return Us(e,n)};function $s(e,t){return Os(Us(Os(e/t))*t)}function Ws(e,t){return Os(vs(Os(e/t))*t)}function Hs(e,t){return Os(xs(Os(e/t))*t)}function Us(e,t=0){if(Qs(e))return e;let s=10**t,n=e*s*(1+Number.EPSILON);return ws(n)/s}const qs=new Map;function Gs(e){return((""+e).split(".")[1]||"").length}function Js(e,t,s,n){let a=[],r=n.map(Gs);for(let o=t;o<s;o++){let t=ys(o),s=Us(Cs(e,o),t);for(let i=0;i<n.length;i++){let l=10==e?+`${n[i]}e${o}`:n[i]*s,c=(o>=0?0:t)+(o>=r[i]?0:r[i]),u=10==e?l:Us(l,c);a.push(u),qs.set(u,c)}}return a}const Ys={},Vs=[],Ks=[null,null],Xs=Array.isArray,Qs=Number.isInteger;function Zs(e){return"string"==typeof e}function en(e){let t=!1;if(null!=e){let s=e.constructor;t=null==s||s==Object}return t}function tn(e){return null!=e&&"object"==typeof e}const sn=Object.getPrototypeOf(Uint8Array),nn="__proto__";function an(e,t=en){let s;if(Xs(e)){let n=e.find(e=>null!=e);if(Xs(n)||t(n)){s=Array(e.length);for(let n=0;n<e.length;n++)s[n]=an(e[n],t)}else s=e.slice()}else if(e instanceof sn)s=e.slice();else if(t(e)){s={};for(let n in e)n!=nn&&(s[n]=an(e[n],t))}else s=e;return s}function rn(e){let t=arguments;for(let s=1;s<t.length;s++){let n=t[s];for(let t in n)t!=nn&&(en(e[t])?rn(e[t],an(n[t])):e[t]=an(n[t]))}return e}function on(e,t,s){for(let n,a=0,r=-1;a<t.length;a++){let o=t[a];if(o>r){for(n=o-1;n>=0&&null==e[n];)e[n--]=null;for(n=o+1;n<s&&null==e[n];)e[r=n++]=null}}}const ln="undefined"==typeof queueMicrotask?e=>Promise.resolve().then(e):queueMicrotask,cn=["January","February","March","April","May","June","July","August","September","October","November","December"],un=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function dn(e){return e.slice(0,3)}const hn=un.map(dn),mn=cn.map(dn),fn={MMMM:cn,MMM:mn,WWWW:un,WWW:hn};function gn(e){return(e<10?"0":"")+e}const pn={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>gn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>gn(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>gn(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return 0==t?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>gn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>gn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>{return((t=e.getMilliseconds())<10?"00":t<100?"0":"")+t;var t}};function bn(e,t){t=t||fn;let s,n=[],a=/\{([a-z]+)\}|[^{]+/gi;for(;s=a.exec(e);)n.push("{"==s[0][0]?pn[s[1]]:s[0]);return e=>{let s="";for(let a=0;a<n.length;a++)s+="string"==typeof n[a]?n[a]:n[a](e,t);return s}}const yn=(new Intl.DateTimeFormat).resolvedOptions().timeZone,xn=e=>e%1==0,wn=[1,2,2.5,5],vn=Js(10,-32,0,wn),kn=Js(10,0,32,wn),Sn=kn.filter(xn),Cn=vn.concat(kn),jn="{YYYY}",Tn="\n"+jn,Mn="{M}/{D}",Ln="\n"+Mn,Nn=Ln+"/{YY}",_n="{aa}",En="{h}:{mm}"+_n,Pn="\n"+En,Dn=":{ss}",In=null;function Fn(e){let t=1e3*e,s=60*t,n=60*s,a=24*n,r=30*a,o=365*a;return[(1==e?Js(10,0,3,wn).filter(xn):Js(10,-3,0,wn)).concat([t,5*t,10*t,15*t,30*t,s,5*s,10*s,15*s,30*s,n,2*n,3*n,4*n,6*n,8*n,12*n,a,2*a,3*a,4*a,5*a,6*a,7*a,8*a,9*a,10*a,15*a,r,2*r,3*r,4*r,6*r,o,2*o,5*o,10*o,25*o,50*o,100*o]),[[o,jn,In,In,In,In,In,In,1],[28*a,"{MMM}",Tn,In,In,In,In,In,1],[a,Mn,Tn,In,In,In,In,In,1],[n,"{h}"+_n,Nn,In,Ln,In,In,In,1],[s,En,Nn,In,Ln,In,In,In,1],[t,Dn,Nn+" "+En,In,Ln+" "+En,In,Pn,In,1],[e,Dn+".{fff}",Nn+" "+En,In,Ln+" "+En,In,Pn,In,1]],function(t){return(i,l,c,u,d,h)=>{let m=[],f=d>=o,g=d>=r&&d<o,p=t(c),b=Us(p*e,3),y=Un(p.getFullYear(),f?0:p.getMonth(),g||f?1:p.getDate()),x=Us(y*e,3);if(g||f){let s=g?d/r:0,n=f?d/o:0,a=b==x?b:Us(Un(y.getFullYear()+n,y.getMonth()+s,1)*e,3),i=new Date(ws(a/e)),l=i.getFullYear(),c=i.getMonth();for(let r=0;a<=u;r++){let o=Un(l+n*r,c+s*r,1),i=o-t(Us(o*e,3));a=Us((+o+i)*e,3),a<=u&&m.push(a)}}else{let r=d>=a?a:d,o=x+(xs(c)-xs(b))+Ws(b-x,r);m.push(o);let f=t(o),g=f.getHours()+f.getMinutes()/s+f.getSeconds()/n,p=d/n,y=h/i.axes[l]._space;for(;o=Us(o+d,1==e?0:3),!(o>u);)if(p>1){let e=xs(Us(g+p,6))%24,s=t(o).getHours()-e;s>1&&(s=-1),o-=s*n,g=(g+p)%24,Us((o-m[m.length-1])/d,3)*y>=.7&&m.push(o)}else m.push(o)}return m}}]}const[An,Rn,zn]=Fn(1),[Bn,On,$n]=Fn(.001);function Wn(e,t){return e.map(e=>e.map((s,n)=>0==n||8==n||null==s?s:t(1==n||0==e[8]?s:e[1]+s)))}function Hn(e,t){return(s,n,a,r,o)=>{let i,l,c,u,d,h,m=t.find(e=>o>=e[0])||t[t.length-1];return n.map(t=>{let s=e(t),n=s.getFullYear(),a=s.getMonth(),r=s.getDate(),o=s.getHours(),f=s.getMinutes(),g=s.getSeconds(),p=n!=i&&m[2]||a!=l&&m[3]||r!=c&&m[4]||o!=u&&m[5]||f!=d&&m[6]||g!=h&&m[7]||m[1];return i=n,l=a,c=r,u=o,d=f,h=g,p(s)})}}function Un(e,t,s){return new Date(e,t,s)}function qn(e,t){return t(e)}function Gn(e,t){return(s,n,a,r)=>null==r?Pt:t(e(n))}Js(2,-53,53,[1]);const Jn={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(e,t){let s=e.series[t];return s.width?s.stroke(e,t):s.points.width?s.points.stroke(e,t):null},fill:function(e,t){return e.series[t].fill(e,t)},dash:"solid"},idx:null,idxs:null,values:[]},Yn=[0,0];function Vn(e,t,s,n=!0){return e=>{0==e.button&&(!n||e.target==t)&&s(e)}}function Kn(e,t,s,n=!0){return e=>{(!n||e.target==t)&&s(e)}}const Xn={show:!0,x:!0,y:!0,lock:!1,move:function(e,t,s){return Yn[0]=t,Yn[1]=s,Yn},points:{one:!1,show:function(e,t){let s=e.cursor.points,n=Ht(),a=s.size(e,t);$t(n,pt,a),$t(n,bt,a);let r=a/-2;$t(n,"marginLeft",r),$t(n,"marginTop",r);let o=s.width(e,t,a);return o&&$t(n,"borderWidth",o),n},size:function(e,t){return e.series[t].points.size},width:0,stroke:function(e,t){let s=e.series[t].points;return s._stroke||s._fill},fill:function(e,t){let s=e.series[t].points;return s._fill||s._stroke}},bind:{mousedown:Vn,mouseup:Vn,click:Vn,dblclick:Vn,mousemove:Kn,mouseleave:Kn,mouseenter:Kn},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,t,s,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Qn={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Zn=rn({},Qn,{filter:Fs}),ea=rn({},Zn,{size:10}),ta=rn({},Qn,{show:!1}),sa='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',na="bold "+sa,aa={show:!0,scale:"x",stroke:kt,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:na,side:2,grid:Zn,ticks:ea,border:ta,font:sa,lineGap:1.5,rotate:0},ra={show:!0,scale:"x",auto:!1,sorted:1,min:Ns,max:-Ns,idxs:[]};function oa(e,t,s,n,a){return t.map(e=>null==e?"":gs(e))}function ia(e,t,s,n,a,r,o){let i=[],l=qs.get(a)||0;for(let c=s=o?s:Us(Ws(s,a),l);c<=n;c=Us(c+a,l))i.push(Object.is(c,-0)?0:c);return i}function la(e,t,s,n,a,r,o){const i=[],l=e.scales[e.axes[t].scale].log,c=xs((10==l?Ts:Ms)(s));a=Cs(l,c),10==l&&(a=Cn[es(a,Cn)]);let u=s,d=a*l;10==l&&(d=Cn[es(d,Cn)]);do{i.push(u),u+=a,10!=l||qs.has(u)||(u=Us(u,qs.get(a))),u>=d&&(d=(a=u)*l,10==l&&(d=Cn[es(d,Cn)]))}while(u<=n);return i}function ca(e,t,s,n,a,r,o){let i=e.scales[e.axes[t].scale].asinh,l=n>i?la(e,t,Ss(i,s),n,a):[i],c=n>=0&&s<=0?[0]:[];return(s<-i?la(e,t,Ss(i,-n),-s,a):[i]).reverse().map(e=>-e).concat(c,l)}const ua=/./,da=/[12357]/,ha=/[125]/,ma=/1/,fa=(e,t,s,n)=>e.map((e,a)=>4==t&&0==e||a%n==0&&s.test(e.toExponential()[e<0?1:0])?e:null);function ga(e,t,s,n,a){let r=e.axes[s],o=r.scale,i=e.scales[o],l=e.valToPos,c=r._space,u=l(10,o),d=l(9,o)-u>=c?ua:l(7,o)-u>=c?da:l(5,o)-u>=c?ha:ma;if(d==ma){let e=ys(l(1,o)-u);if(e<c)return fa(t.slice().reverse(),i.distr,d,vs(c/e)).reverse()}return fa(t,i.distr,d,1)}function pa(e,t,s,n,a){let r=e.axes[s],o=r.scale,i=r._space,l=e.valToPos,c=ys(l(1,o)-l(2,o));return c<i?fa(t.slice().reverse(),3,ua,vs(i/c)).reverse():t}function ba(e,t,s,n){return null==n?Pt:null==t?"":gs(t)}const ya={show:!0,scale:"y",stroke:kt,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:na,side:3,grid:Zn,ticks:ea,border:ta,font:sa,lineGap:1.5,rotate:0},xa={scale:null,auto:!0,sorted:0,min:Ns,max:-Ns},wa=(e,t,s,n,a)=>a,va={show:!0,auto:!0,sorted:0,gaps:wa,alpha:1,facets:[rn({},xa,{scale:"x"}),rn({},xa,{scale:"y"})]},ka={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:wa,alpha:1,points:{show:function(e,t){let{scale:s,idxs:n}=e.series[0],a=e._data[0],r=e.valToPos(a[n[0]],s,!0),o=e.valToPos(a[n[1]],s,!0),i=ys(o-r)/(e.series[t].points.space*Rt);return n[1]-n[0]<=i},filter:null},values:null,min:Ns,max:-Ns,idxs:[],path:null,clip:null};function Sa(e,t,s,n,a){return s/10}const Ca={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},ja=rn({},Ca,{time:!1,ori:1}),Ta={};function Ma(e,t){let s=Ta[e];return s||(s={key:e,plots:[],sub(e){s.plots.push(e)},unsub(e){s.plots=s.plots.filter(t=>t!=e)},pub(e,t,n,a,r,o,i){for(let l=0;l<s.plots.length;l++)s.plots[l]!=t&&s.plots[l].pub(e,t,n,a,r,o,i)}},null!=e&&(Ta[e]=s)),s}function La(e,t,s){const n=e.mode,a=e.series[t],r=2==n?e._data[t]:e._data,o=e.scales,i=e.bbox;let l=r[0],c=2==n?r[1]:r[t],u=2==n?o[a.facets[0].scale]:o[e.series[0].scale],d=2==n?o[a.facets[1].scale]:o[a.scale],h=i.left,m=i.top,f=i.width,g=i.height,p=e.valToPosH,b=e.valToPosV;return 0==u.ori?s(a,l,c,u,d,p,b,h,m,f,g,Aa,za,Oa,Wa,Ua):s(a,l,c,u,d,b,p,m,h,g,f,Ra,Ba,$a,Ha,qa)}function Na(e,t){let s=0,n=0,a=hs(e.bands,Vs);for(let r=0;r<a.length;r++){let e=a[r];e.series[0]==t?s=e.dir:e.series[1]==t&&(1==e.dir?n|=1:n|=2)}return[s,1==n?-1:2==n?1:3==n?2:0]}function _a(e,t,s,n,a){let r=e.mode,o=e.series[t],i=2==r?o.facets[1].scale:o.scale,l=e.scales[i];return-1==a?l.min:1==a?l.max:3==l.distr?1==l.dir?l.min:l.max:0}function Ea(e,t,s,n,a,r){return La(e,t,(e,t,o,i,l,c,u,d,h,m,f)=>{let g=e.pxRound;const p=i.dir*(0==i.ori?1:-1),b=0==i.ori?za:Ba;let y,x;1==p?(y=s,x=n):(y=n,x=s);let w=g(c(t[y],i,m,d)),v=g(u(o[y],l,f,h)),k=g(c(t[x],i,m,d)),S=g(u(1==r?l.max:l.min,l,f,h)),C=new Path2D(a);return b(C,k,S),b(C,w,S),b(C,w,v),C})}function Pa(e,t,s,n,a,r){let o=null;if(e.length>0){o=new Path2D;const i=0==t?Oa:$a;let l=s;for(let t=0;t<e.length;t++){let s=e[t];if(s[1]>s[0]){let e=s[0]-l;e>0&&i(o,l,n,e,n+r),l=s[1]}}let c=s+a-l,u=10;c>0&&i(o,l,n-u/2,c,n+r+u)}return o}function Da(e,t,s,n,a,r,o){let i=[],l=e.length;for(let c=1==a?s:n;c>=s&&c<=n;c+=a)if(null===t[c]){let u=c,d=c;if(1==a)for(;++c<=n&&null===t[c];)d=c;else for(;--c>=s&&null===t[c];)d=c;let h=r(e[u]),m=d==u?h:r(e[d]),f=u-a;h=o<=0&&f>=0&&f<l?r(e[f]):h;let g=d+a;m=o>=0&&g>=0&&g<l?r(e[g]):m,m>=h&&i.push([h,m])}return i}function Ia(e){return 0==e?Is:1==e?ws:t=>$s(t,e)}function Fa(e){let t=0==e?Aa:Ra,s=0==e?(e,t,s,n,a,r)=>{e.arcTo(t,s,n,a,r)}:(e,t,s,n,a,r)=>{e.arcTo(s,t,a,n,r)},n=0==e?(e,t,s,n,a)=>{e.rect(t,s,n,a)}:(e,t,s,n,a)=>{e.rect(s,t,a,n)};return(e,a,r,o,i,l=0,c=0)=>{0==l&&0==c?n(e,a,r,o,i):(l=ks(l,o/2,i/2),c=ks(c,o/2,i/2),t(e,a+l,r),s(e,a+o,r,a+o,r+i,l),s(e,a+o,r+i,a,r+i,c),s(e,a,r+i,a,r,c),s(e,a,r,a+o,r,l),e.closePath())}}const Aa=(e,t,s)=>{e.moveTo(t,s)},Ra=(e,t,s)=>{e.moveTo(s,t)},za=(e,t,s)=>{e.lineTo(t,s)},Ba=(e,t,s)=>{e.lineTo(s,t)},Oa=Fa(0),$a=Fa(1),Wa=(e,t,s,n,a,r)=>{e.arc(t,s,n,a,r)},Ha=(e,t,s,n,a,r)=>{e.arc(s,t,n,a,r)},Ua=(e,t,s,n,a,r,o)=>{e.bezierCurveTo(t,s,n,a,r,o)},qa=(e,t,s,n,a,r,o)=>{e.bezierCurveTo(s,t,a,n,o,r)};function Ga(e){return(e,t,s,n,a)=>La(e,t,(t,r,o,i,l,c,u,d,h,m,f)=>{let g,p,{pxRound:b,points:y}=t;0==i.ori?(g=Aa,p=Wa):(g=Ra,p=Ha);const x=Us(y.width*Rt,3);let w=(y.size-y.width)/2*Rt,v=Us(2*w,3),k=new Path2D,S=new Path2D,{left:C,top:j,width:T,height:M}=e.bbox;Oa(S,C-v,j-v,T+2*v,M+2*v);const L=e=>{if(null!=o[e]){let t=b(c(r[e],i,m,d)),s=b(u(o[e],l,f,h));g(k,t+w,s),p(k,t,s,w,0,2*bs)}};if(a)a.forEach(L);else for(let e=s;e<=n;e++)L(e);return{stroke:x>0?k:null,fill:k,clip:S,flags:3}})}function Ja(e){return(t,s,n,a,r,o)=>{n!=a&&(r!=n&&o!=n&&e(t,s,n),r!=a&&o!=a&&e(t,s,a),e(t,s,o))}}const Ya=Ja(za),Va=Ja(Ba);function Ka(e){const t=hs(null==e?void 0:e.alignGaps,0);return(e,s,n,a)=>La(e,s,(r,o,i,l,c,u,d,h,m,f,g)=>{[n,a]=as(i,n,a);let p,b,y=r.pxRound,x=e=>y(u(e,l,f,h)),w=e=>y(d(e,c,g,m));0==l.ori?(p=za,b=Ya):(p=Ba,b=Va);const v=l.dir*(0==l.ori?1:-1),k={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},S=k.stroke;let C=!1;if(a-n>=4*f){let t,s,r,c=t=>e.posToVal(t,l.key,!0),u=null,d=null,h=x(o[1==v?n:a]),m=x(o[n]),f=x(o[a]),g=c(1==v?m+1:f-1);for(let e=1==v?n:a;e>=n&&e<=a;e+=v){let n=o[e],a=(1==v?n<g:n>g)?h:x(n),r=i[e];a==h?null!=r?(s=r,null==u?(p(S,a,w(s)),t=u=d=s):s<u?u=s:s>d&&(d=s)):null===r&&(C=!0):(null!=u&&b(S,h,w(u),w(d),w(t),w(s)),null!=r?(s=r,p(S,a,w(s)),u=d=t=s):(u=d=null,null===r&&(C=!0)),h=a,g=c(h+v))}null!=u&&u!=d&&r!=h&&b(S,h,w(u),w(d),w(t),w(s))}else for(let e=1==v?n:a;e>=n&&e<=a;e+=v){let t=i[e];null===t?C=!0:null!=t&&p(S,x(o[e]),w(t))}let[j,T]=Na(e,s);if(null!=r.fill||0!=j){let t=k.fill=new Path2D(S),i=w(r.fillTo(e,s,r.min,r.max,j)),l=x(o[n]),c=x(o[a]);-1==v&&([c,l]=[l,c]),p(t,c,i),p(t,l,i)}if(!r.spanGaps){let c=[];C&&c.push(...Da(o,i,n,a,v,x,t)),k.gaps=c=r.gaps(e,s,n,a,c),k.clip=Pa(c,l.ori,h,m,f,g)}return 0!=T&&(k.band=2==T?[Ea(e,s,n,a,S,-1),Ea(e,s,n,a,S,1)]:Ea(e,s,n,a,S,T)),k})}function Xa(e,t,s,n,a,r,o=Ns){if(e.length>1){let i=null;for(let l=0,c=1/0;l<e.length;l++)if(void 0!==t[l]){if(null!=i){let t=ys(e[l]-e[i]);t<c&&(c=t,o=ys(s(e[l],n,a,r)-s(e[i],n,a,r)))}i=l}}return o}function Qa(e,t,s,n,a,r){const o=e.length;if(o<2)return null;const i=new Path2D;if(s(i,e[0],t[0]),2==o)n(i,e[1],t[1]);else{let s=Array(o),n=Array(o-1),r=Array(o-1),l=Array(o-1);for(let a=0;a<o-1;a++)r[a]=t[a+1]-t[a],l[a]=e[a+1]-e[a],n[a]=r[a]/l[a];s[0]=n[0];for(let e=1;e<o-1;e++)0===n[e]||0===n[e-1]||n[e-1]>0!=n[e]>0?s[e]=0:(s[e]=3*(l[e-1]+l[e])/((2*l[e]+l[e-1])/n[e-1]+(l[e]+2*l[e-1])/n[e]),isFinite(s[e])||(s[e]=0));s[o-1]=n[o-2];for(let c=0;c<o-1;c++)a(i,e[c]+l[c]/3,t[c]+s[c]*l[c]/3,e[c+1]-l[c]/3,t[c+1]-s[c+1]*l[c]/3,e[c+1],t[c+1])}return i}const Za=new Set;function er(){for(let e of Za)e.syncRect(!0)}Dt&&(Qt("resize",Ft,er),Qt("scroll",Ft,er,!0),Qt(Et,Ft,()=>{fr.pxRatio=Rt}));const tr=Ka(),sr=Ga();function nr(e,t,s,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((e,n)=>ar(e,n,t,s))}function ar(e,t,s,n){return rn({},0==t?s:n,e)}function rr(e,t,s){return null==t?Ks:[t,s]}const or=rr;function ir(e,t,s){return null==t?Ks:ds(t,s,.1,!0)}function lr(e,t,s,n){return null==t?Ks:os(t,s,e.scales[n].log,!1)}const cr=lr;function ur(e,t,s,n){return null==t?Ks:is(t,s,e.scales[n].log,!1)}const dr=ur;function hr(e){let t,s;return[e=e.replace(/(\d+)px/,(e,n)=>(t=ws((s=+n)*Rt))+"px"),t,s]}function mr(e){e.show&&[e.font,e.labelFont].forEach(e=>{let t=Us(e[2]*Rt,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t})}function fr(e,t,s){const n={mode:hs(e.mode,1)},a=n.mode;function r(e,t,s,n){let a=t.valToPct(e);return n+s*(-1==t.dir?1-a:a)}function o(e,t,s,n){let a=t.valToPct(e);return n+s*(-1==t.dir?a:1-a)}function i(e,t,s,n){return 0==t.ori?r(e,t,s,n):o(e,t,s,n)}n.valToPosH=r,n.valToPosV=o;let l=!1;n.status=0;const c=n.root=Ht("uplot");null!=e.id&&(c.id=e.id),Bt(c,e.class),e.title&&(Ht("u-title",c).textContent=e.title);const u=Wt("canvas"),d=n.ctx=u.getContext("2d"),h=Ht("u-wrap",c);Qt("click",h,e=>{e.target===f&&(xs!=us||js!=ms)&&sn.click(n,e)},!0);const m=n.under=Ht("u-under",h);h.appendChild(u);const f=n.over=Ht("u-over",h),g=+hs((e=an(e)).pxAlign,1),p=Ia(g);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const b=e.ms||.001,y=n.series=1==a?nr(e.series||[],ra,ka,!1):(x=e.series||[null],w=va,x.map((e,t)=>0==t?{}:rn({},w,e)));var x,w;const v=n.axes=nr(e.axes||[],aa,ya,!0),k=n.scales={},S=n.bands=e.bands||[];S.forEach(e=>{e.fill=Ds(e.fill||null),e.dir=hs(e.dir,-1)});const C=2==a?y[1].facets[0].scale:y[0].scale,j={axes:function(){for(let e=0;e<v.length;e++){let t=v[e];if(!t.show||!t._show)continue;let s,a,r=t.side,o=r%2,l=t.stroke(n,e),c=0==r||3==r?-1:1,[u,h]=t._found;if(null!=t.label){let i=t.labelGap*c,m=ws((t._lpos+i)*Rt);it(t.labelFont[0],l,"center",2==r?yt:xt),d.save(),1==o?(s=a=0,d.translate(m,ws(pe+ye/2)),d.rotate((3==r?-bs:bs)/2)):(s=ws(ge+be/2),a=m);let f=Ps(t.label)?t.label(n,e,u,h):t.label;d.fillText(f,s,a),d.restore()}if(0==h)continue;let m=k[t.scale],f=0==o?be:ye,g=0==o?ge:pe,b=t._splits,y=2==m.distr?b.map(e=>st[e]):b,x=2==m.distr?st[b[1]]-st[b[0]]:u,w=t.ticks,S=t.border,C=w.show?w.size:0,j=ws(C*Rt),T=ws((2==t.alignTo?t._size-C-t.gap:t.gap)*Rt),M=t._rotate*-bs/180,L=p(t._pos*Rt),N=L+(j+T)*c;a=0==o?N:0,s=1==o?N:0,it(t.font[0],l,1==t.align?wt:2==t.align?vt:M>0?wt:M<0?vt:0==o?"center":3==r?vt:wt,M||1==o?"middle":2==r?yt:xt);let _=t.font[1]*t.lineGap,E=b.map(e=>p(i(e,m,f,g))),P=t._values;for(let e=0;e<P.length;e++){let t=P[e];if(null!=t){0==o?s=E[e]:a=E[e],t=""+t;let n=-1==t.indexOf("\n")?[t]:t.split(/\n/gm);for(let e=0;e<n.length;e++){let t=n[e];M?(d.save(),d.translate(s,a+e*_),d.rotate(M),d.fillText(t,0,0),d.restore()):d.fillText(t,s,a+e*_)}}}w.show&&Dt(E,w.filter(n,y,e,h,x),o,r,L,j,Us(w.width*Rt,3),w.stroke(n,e),w.dash,w.cap);let D=t.grid;D.show&&Dt(E,D.filter(n,y,e,h,x),o,0==o?2:1,0==o?pe:ge,0==o?ye:be,Us(D.width*Rt,3),D.stroke(n,e),D.dash,D.cap),S.show&&Dt([L],[1],0==o?1:0,0==o?1:2,1==o?pe:ge,1==o?ye:be,Us(S.width*Rt,3),S.stroke(n,e),S.dash,S.cap)}na("drawAxes")},series:function(){if(We>0){let e=y.some(e=>e._focus)&&tt!=_e.alpha;e&&(d.globalAlpha=tt=_e.alpha),y.forEach((e,s)=>{if(s>0&&e.show&&(ut(s,!1),ut(s,!0),null==e._paths)){let r=tt;tt!=e.alpha&&(d.globalAlpha=tt=e.alpha);let o=2==a?[0,t[s][0].length-1]:function(e){let t=Es(He-1,0,We-1),s=Es(Ue+1,0,We-1);for(;null==e[t]&&t>0;)t--;for(;null==e[s]&&s<We-1;)s++;return[t,s]}(t[s]);e._paths=e.paths(n,s,o[0],o[1]),tt!=r&&(d.globalAlpha=tt=r)}}),y.forEach((e,t)=>{if(t>0&&e.show){let s=tt;tt!=e.alpha&&(d.globalAlpha=tt=e.alpha),null!=e._paths&&dt(t,!1);{let s=null!=e._paths?e._paths.gaps:null,a=e.points.show(n,t,He,Ue,s),r=e.points.filter(n,t,a,s);(a||r)&&(e.points._paths=e.points.paths(n,t,He,Ue,r),dt(t,!0))}tt!=s&&(d.globalAlpha=tt=s),na("drawSeries",t)}}),e&&(d.globalAlpha=tt=1)}}},T=(e.drawOrder||["axes","series"]).map(e=>j[e]);function M(e){const t=3==e.distr?t=>Ts(t>0?t:e.clamp(n,t,e.min,e.max,e.key)):4==e.distr?t=>Ls(t,e.asinh):100==e.distr?t=>e.fwd(t):e=>e;return s=>{let n=t(s),{_min:a,_max:r}=e;return(n-a)/(r-a)}}function L(t){let s=k[t];if(null==s){let n=(e.scales||Ys)[t]||Ys;if(null!=n.from){L(n.from);let e=rn({},k[n.from],n,{key:t});e.valToPct=M(e),k[t]=e}else{s=k[t]=rn({},t==C?Ca:ja,n),s.key=t;let e=s.time,r=s.range,o=Xs(r);if((t!=C||2==a&&!e)&&(!o||null!=r[0]&&null!=r[1]||(r={min:null==r[0]?ls:{mode:1,hard:r[0],soft:r[0]},max:null==r[1]?ls:{mode:1,hard:r[1],soft:r[1]}},o=!1),!o&&en(r))){let e=r;r=(t,s,n)=>null==s?Ks:ds(s,n,e)}s.range=Ds(r||(e?or:t==C?3==s.distr?cr:4==s.distr?dr:rr:3==s.distr?lr:4==s.distr?ur:ir)),s.auto=Ds(!o&&s.auto),s.clamp=Ds(s.clamp||Sa),s._min=s._max=null,s.valToPct=M(s)}}}L("x"),L("y"),1==a&&y.forEach(e=>{L(e.scale)}),v.forEach(e=>{L(e.scale)});for(let ft in e.scales)L(ft);const N=k[C],_=N.distr;let E,P;0==N.ori?(Bt(c,"u-hz"),E=r,P=o):(Bt(c,"u-vt"),E=o,P=r);const D={};for(let ft in k){let e=k[ft];null==e.min&&null==e.max||(D[ft]={min:e.min,max:e.max},e.min=e.max=null)}const I=e.tzDate||(e=>new Date(ws(e/b))),F=e.fmtDate||bn,A=1==b?zn(I):$n(I),R=Hn(I,Wn(1==b?Rn:On,F)),z=Gn(I,qn("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",F)),B=[],O=n.legend=rn({},Jn,e.legend),$=n.cursor=rn({},Xn,{drag:{y:2==a}},e.cursor),W=O.show,H=$.show,U=O.markers;let q,G,J;O.idxs=B,U.width=Ds(U.width),U.dash=Ds(U.dash),U.stroke=Ds(U.stroke),U.fill=Ds(U.fill);let Y,V=[],K=[],X=!1,Q={};if(O.live){const e=y[1]?y[1].values:null;X=null!=e,Y=X?e(n,1,0):{_:0};for(let t in Y)Q[t]=Pt}if(W)if(q=Wt("table","u-legend",c),J=Wt("tbody",null,q),O.mount(n,q),X){G=Wt("thead",null,q,J);let e=Wt("tr",null,G);for(var Z in Wt("th",null,e),Y)Wt("th",gt,e).textContent=Z}else Bt(q,"u-inline"),O.live&&Bt(q,"u-live");const ee={show:!0},te={show:!1},se=new Map;function ne(e,t,s,a=!0){const r=se.get(t)||{},o=$.bind[e](n,t,s,a);o&&(Qt(e,t,r[e]=o),se.set(t,r))}function ae(e,t,s){const n=se.get(t)||{};for(let a in n)null!=e&&a!=e||(Zt(a,t,n[a]),delete n[a]);null==e&&se.delete(t)}let re=0,oe=0,ie=0,le=0,ce=0,ue=0,de=ce,he=ue,me=ie,fe=le,ge=0,pe=0,be=0,ye=0;n.bbox={};let xe=!1,we=!1,ve=!1,ke=!1,Se=!1,Ce=!1;function je(e,t,s){(s||e!=n.width||t!=n.height)&&Te(e,t),Ut(!1),ve=!0,we=!0,Ws()}function Te(e,t){n.width=re=ie=e,n.height=oe=le=t,ce=ue=0,function(){let e=!1,t=!1,s=!1,n=!1;v.forEach((a,r)=>{if(a.show&&a._show){let{side:r,_size:o}=a,i=r%2,l=o+(null!=a.label?a.labelSize:0);l>0&&(i?(ie-=l,3==r?(ce+=l,n=!0):s=!0):(le-=l,0==r?(ue+=l,e=!0):t=!0))}}),ze[0]=e,ze[1]=s,ze[2]=t,ze[3]=n,ie-=$e[1]+$e[3],ce+=$e[3],le-=$e[2]+$e[0],ue+=$e[0]}(),function(){let e=ce+ie,t=ue+le,s=ce,n=ue;function a(a,r){switch(a){case 1:return e+=r,e-r;case 2:return t+=r,t-r;case 3:return s-=r,s+r;case 0:return n-=r,n+r}}v.forEach((e,t)=>{if(e.show&&e._show){let t=e.side;e._pos=a(t,e._size),null!=e.label&&(e._lpos=a(t,e.labelSize))}})}();let s=n.bbox;ge=s.left=$s(ce*Rt,.5),pe=s.top=$s(ue*Rt,.5),be=s.width=$s(ie*Rt,.5),ye=s.height=$s(le*Rt,.5)}const Me=3;if(n.setSize=function({width:e,height:t}){je(e,t)},null==$.dataIdx){let e=$.hover,s=e.skip=new Set(e.skip??[]);s.add(void 0);let n=e.prox=Ds(e.prox),a=e.bias??(e.bias=0);$.dataIdx=(e,r,o,i)=>{if(0==r)return o;let l=o,c=n(e,r,o,i)??Ns,u=c>=0&&c<Ns,d=0==N.ori?ie:le,h=$.left,m=t[0],f=t[r];if(s.has(f[o])){l=null;let e,t=null,n=null;if(0==a||-1==a)for(e=o;null==t&&e-- >0;)s.has(f[e])||(t=e);if(0==a||1==a)for(e=o;null==n&&e++<f.length;)s.has(f[e])||(n=e);if(null!=t||null!=n)if(u){let e=h-(null==t?-1/0:E(m[t],N,d,0)),s=(null==n?1/0:E(m[n],N,d,0))-h;e<=s?e<=c&&(l=t):s<=c&&(l=n)}else l=null==n?t:null==t?n:o-t<=n-o?t:n}else u&&ys(h-E(m[o],N,d,0))>c&&(l=null);return l}}const Le=e=>{$.event=e};$.idxs=B,$._lock=!1;let Ne=$.points;Ne.show=Ds(Ne.show),Ne.size=Ds(Ne.size),Ne.stroke=Ds(Ne.stroke),Ne.width=Ds(Ne.width),Ne.fill=Ds(Ne.fill);const _e=n.focus=rn({},e.focus||{alpha:.3},$.focus),Ee=_e.prox>=0,Pe=Ee&&Ne.one;let De=[],Ie=[],Fe=[];function Ae(e,t){let s=Ne.show(n,t);if(s instanceof HTMLElement)return Bt(s,"u-cursor-pt"),Bt(s,e.class),qt(s,-10,-10,ie,le),f.insertBefore(s,De[t]),s}function Re(e,t){if(1==a||t>0){let t=1==a&&k[e.scale].time,s=e.value;e.value=t?Zs(s)?Gn(I,qn(s,F)):s||z:s||ba,e.label=e.label||(t?"Time":"Value")}if(Pe||t>0){e.width=null==e.width?1:e.width,e.paths=e.paths||tr||As,e.fillTo=Ds(e.fillTo||_a),e.pxAlign=+hs(e.pxAlign,g),e.pxRound=Ia(e.pxAlign),e.stroke=Ds(e.stroke||null),e.fill=Ds(e.fill||null),e._stroke=e._fill=e._paths=e._focus=null;let t=Us(1*(3+2*(Ss(1,e.width)||1)),3),s=e.points=rn({},{size:t,width:Ss(1,.2*t),stroke:e.stroke,space:2*t,paths:sr,_stroke:null,_fill:null},e.points);s.show=Ds(s.show),s.filter=Ds(s.filter),s.fill=Ds(s.fill),s.stroke=Ds(s.stroke),s.paths=Ds(s.paths),s.pxAlign=e.pxAlign}if(W){let s=function(e,t){if(0==t&&(X||!O.live||2==a))return Ks;let s=[],r=Wt("tr","u-series",J,J.childNodes[t]);Bt(r,e.class),e.show||Bt(r,ft);let o=Wt("th",null,r);if(U.show){let e=Ht("u-marker",o);if(t>0){let s=U.width(n,t);s&&(e.style.border=s+"px "+U.dash(n,t)+" "+U.stroke(n,t)),e.style.background=U.fill(n,t)}}let i=Ht(gt,o);for(var l in e.label instanceof HTMLElement?i.appendChild(e.label):i.textContent=e.label,t>0&&(U.show||(i.style.color=e.width>0?U.stroke(n,t):U.fill(n,t)),ne("click",o,t=>{if($._lock)return;Le(t);let s=y.indexOf(e);if((t.ctrlKey||t.metaKey)!=O.isolate){let e=y.some((e,t)=>t>0&&t!=s&&e.show);y.forEach((t,n)=>{n>0&&mn(n,e?n==s?ee:te:ee,!0,da.setSeries)})}else mn(s,{show:!e.show},!0,da.setSeries)},!1),Ee&&ne(Mt,o,t=>{$._lock||(Le(t),mn(y.indexOf(e),yn,!0,da.setSeries))},!1)),Y){let e=Wt("td","u-value",r);e.textContent="--",s.push(e)}return[r,s]}(e,t);V.splice(t,0,s[0]),K.splice(t,0,s[1]),O.values.push(null)}if(H){B.splice(t,0,null);let s=null;Pe?0==t&&(s=Ae(e,t)):t>0&&(s=Ae(e,t)),De.splice(t,0,s),Ie.splice(t,0,0),Fe.splice(t,0,0)}na("addSeries",t)}n.addSeries=function(e,t){t=null==t?y.length:t,e=1==a?ar(e,t,ra,ka):ar(e,t,{},va),y.splice(t,0,e),Re(y[t],t)},n.delSeries=function(e){if(y.splice(e,1),W){O.values.splice(e,1),K.splice(e,1);let t=V.splice(e,1)[0];ae(null,t.firstChild),t.remove()}H&&(B.splice(e,1),De.splice(e,1)[0].remove(),Ie.splice(e,1),Fe.splice(e,1)),na("delSeries",e)};const ze=[!1,!1,!1,!1];function Be(e,t,s,n){let[a,r,o,i]=s,l=t%2,c=0;return 0==l&&(i||r)&&(c=0==t&&!a||2==t&&!o?ws(aa.size/3):0),1==l&&(a||o)&&(c=1==t&&!r||3==t&&!i?ws(ya.size/2):0),c}const Oe=n.padding=(e.padding||[Be,Be,Be,Be]).map(e=>Ds(hs(e,Be))),$e=n._padding=Oe.map((e,t)=>e(n,t,ze,0));let We,He=null,Ue=null;const qe=1==a?y[0].idxs:null;let Ge,Je,Ye,Ve,Ke,Xe,Qe,Ze,et,tt,st=null,nt=!1;function at(e,s){if(t=null==e?[]:e,n.data=n._data=t,2==a){We=0;for(let e=1;e<y.length;e++)We+=t[e][0].length}else{0==t.length&&(n.data=n._data=t=[[]]),st=t[0],We=st.length;let e=t;if(2==_){e=t.slice();let s=e[0]=Array(We);for(let e=0;e<We;e++)s[e]=e}n._data=t=e}if(Ut(!0),na("setData"),2==_&&(ve=!0),!1!==s){let e=N;e.auto(n,nt)?rt():hn(C,e.min,e.max),ke=ke||$.left>=0,Ce=!0,Ws()}}function rt(){let e,s;nt=!0,1==a&&(We>0?(He=qe[0]=0,Ue=qe[1]=We-1,e=t[0][He],s=t[0][Ue],2==_?(e=He,s=Ue):e==s&&(3==_?[e,s]=os(e,e,N.log,!1):4==_?[e,s]=is(e,e,N.log,!1):N.time?s=e+ws(86400/b):[e,s]=ds(e,s,.1,!0))):(He=qe[0]=e=null,Ue=qe[1]=s=null)),hn(C,e,s)}function ot(e,t,s,n,a,r){e??(e=St),s??(s=Vs),n??(n="butt"),a??(a=St),r??(r="round"),e!=Ge&&(d.strokeStyle=Ge=e),a!=Je&&(d.fillStyle=Je=a),t!=Ye&&(d.lineWidth=Ye=t),r!=Ke&&(d.lineJoin=Ke=r),n!=Xe&&(d.lineCap=Xe=n),s!=Ve&&d.setLineDash(Ve=s)}function it(e,t,s,n){t!=Je&&(d.fillStyle=Je=t),e!=Qe&&(d.font=Qe=e),s!=Ze&&(d.textAlign=Ze=s),n!=et&&(d.textBaseline=et=n)}function lt(e,t,s,a,r=0){if(a.length>0&&e.auto(n,nt)&&(null==t||null==t.min)){let t=hs(He,0),n=hs(Ue,a.length-1),o=null==s.min?function(e,t,s,n=0,a=!1){let r=a?rs:as,o=a?ns:ss;[t,s]=r(e,t,s);let i=e[t],l=e[t];if(t>-1)if(1==n)i=e[t],l=e[s];else if(-1==n)i=e[s],l=e[t];else for(let c=t;c<=s;c++){let t=e[c];o(t)&&(t<i?i=t:t>l&&(l=t))}return[i??Ns,l??-Ns]}(a,t,n,r,3==e.distr):[s.min,s.max];e.min=ks(e.min,s.min=o[0]),e.max=Ss(e.max,s.max=o[1])}}n.setData=at;const ct={min:null,max:null};function ut(e,t){let s=t?y[e].points:y[e];s._stroke=s.stroke(n,e),s._fill=s.fill(n,e)}function dt(e,s){let a=s?y[e].points:y[e],{stroke:r,fill:o,clip:i,flags:l,_stroke:c=a._stroke,_fill:u=a._fill,_width:h=a.width}=a._paths;h=Us(h*Rt,3);let m=null,f=h%2/2;s&&null==u&&(u=h>0?"#fff":c);let g=1==a.pxAlign&&f>0;if(g&&d.translate(f,f),!s){let e=ge-h/2,t=pe-h/2,s=be+h,n=ye+h;m=new Path2D,m.rect(e,t,s,n)}s?mt(c,h,a.dash,a.cap,u,r,o,l,i):function(e,s,a,r,o,i,l,c,u,d,h){let m=!1;0!=u&&S.forEach((f,g)=>{if(f.series[0]==e){let e,p=y[f.series[1]],b=t[f.series[1]],x=(p._paths||Ys).band;Xs(x)&&(x=1==f.dir?x[0]:x[1]);let w=null;p.show&&x&&function(e,t,s){for(t=hs(t,0),s=hs(s,e.length-1);t<=s;){if(null!=e[t])return!0;t++}return!1}(b,He,Ue)?(w=f.fill(n,g)||i,e=p._paths.clip):x=null,mt(s,a,r,o,w,l,c,u,d,h,e,x),m=!0}}),m||mt(s,a,r,o,i,l,c,u,d,h)}(e,c,h,a.dash,a.cap,u,r,o,l,m,i),g&&d.translate(-f,-f)}const ht=3;function mt(e,t,s,n,a,r,o,i,l,c,u,h){ot(e,t,s,n,a),(l||c||h)&&(d.save(),l&&d.clip(l),c&&d.clip(c)),h?(i&ht)==ht?(d.clip(h),u&&d.clip(u),_t(a,o),kt(e,r,t)):2&i?(_t(a,o),d.clip(h),kt(e,r,t)):1&i&&(d.save(),d.clip(h),u&&d.clip(u),_t(a,o),d.restore(),kt(e,r,t)):(_t(a,o),kt(e,r,t)),(l||c||h)&&d.restore()}function kt(e,t,s){s>0&&(t instanceof Map?t.forEach((e,t)=>{d.strokeStyle=Ge=t,d.stroke(e)}):null!=t&&e&&d.stroke(t))}function _t(e,t){t instanceof Map?t.forEach((e,t)=>{d.fillStyle=Je=t,d.fill(e)}):null!=t&&e&&d.fill(t)}function Dt(e,t,s,n,a,r,o,i,l,c){let u=o%2/2;1==g&&d.translate(u,u),ot(i,o,l,c,i),d.beginPath();let h,m,f,p,b=a+(0==n||3==n?-r:r);0==s?(m=a,p=b):(h=a,f=b);for(let g=0;g<e.length;g++)null!=t[g]&&(0==s?h=f=e[g]:m=p=e[g],d.moveTo(h,m),d.lineTo(f,p));d.stroke(),1==g&&d.translate(-u,-u)}function At(e){let t=!0;return v.forEach((s,a)=>{if(!s.show)return;let r=k[s.scale];if(null==r.min)return void(s._show&&(t=!1,s._show=!1,Ut(!1)));s._show||(t=!1,s._show=!0,Ut(!1));let o=s.side,i=o%2,{min:l,max:c}=r,[u,d]=function(e,t,s,a){let r,o=v[e];if(a<=0)r=[0,0];else{let i=o._space=o.space(n,e,t,s,a);r=function(e,t,s,n,a){let r=Ss(_s(e),_s(t)),o=t-e,i=es(a/n*o,s);do{let e=s[i],t=n*e/o;if(t>=a&&r+(e<5?qs.get(e):0)<=17)return[e,t]}while(++i<s.length);return[0,0]}(t,s,o._incrs=o.incrs(n,e,t,s,a,i),a,i)}return o._found=r}(a,l,c,0==i?ie:le);if(0==d)return;let h=2==r.distr,m=s._splits=s.splits(n,a,l,c,u,d,h),f=2==r.distr?m.map(e=>st[e]):m,g=2==r.distr?st[m[1]]-st[m[0]]:u,p=s._values=s.values(n,s.filter(n,f,a,d,g),a,d,g);s._rotate=2==o?s.rotate(n,p,a,d):0;let b=s._size;s._size=vs(s.size(n,p,a,e)),null!=b&&s._size!=b&&(t=!1)}),t}function zt(e){let t=!0;return Oe.forEach((s,a)=>{let r=s(n,a,ze,e);r!=$e[a]&&(t=!1),$e[a]=r}),t}function Ut(e){y.forEach((t,s)=>{s>0&&(t._paths=null,e&&(1==a?(t.min=null,t.max=null):t.facets.forEach(e=>{e.min=null,e.max=null})))})}let Gt,Yt,Kt,Xt,ts,cs,us,ms,fs,gs,xs,js,Ms=!1,Is=!1,Bs=[];function Os(){Is=!1;for(let e=0;e<Bs.length;e++)na(...Bs[e]);Bs.length=0}function Ws(){Ms||(ln(Hs),Ms=!0)}function Hs(){if(xe&&(function(){for(let t in k){let e=k[t];null==D[t]&&(null==e.min||null!=D[C]&&e.auto(n,nt))&&(D[t]=ct)}for(let t in k){let e=k[t];null==D[t]&&null!=e.from&&null!=D[e.from]&&(D[t]=ct)}null!=D[C]&&Ut(!0);let e={};for(let t in D){let s=D[t];if(null!=s){let r=e[t]=an(k[t],tn);if(null!=s.min)rn(r,s);else if(t!=C||2==a)if(0==We&&null==r.from){let e=r.range(n,null,null,t);r.min=e[0],r.max=e[1]}else r.min=Ns,r.max=-Ns}}if(We>0){y.forEach((s,r)=>{if(1==a){let a=s.scale,o=D[a];if(null==o)return;let i=e[a];if(0==r){let e=i.range(n,i.min,i.max,a);i.min=e[0],i.max=e[1],He=es(i.min,t[0]),Ue=es(i.max,t[0]),Ue-He>1&&(t[0][He]<i.min&&He++,t[0][Ue]>i.max&&Ue--),s.min=st[He],s.max=st[Ue]}else s.show&&s.auto&&lt(i,o,s,t[r],s.sorted);s.idxs[0]=He,s.idxs[1]=Ue}else if(r>0&&s.show&&s.auto){let[n,a]=s.facets,o=n.scale,i=a.scale,[l,c]=t[r],u=e[o],d=e[i];null!=u&&lt(u,D[o],n,l,n.sorted),null!=d&&lt(d,D[i],a,c,a.sorted),s.min=a.min,s.max=a.max}});for(let t in e){let s=e[t],a=D[t];if(null==s.from&&(null==a||null==a.min)){let e=s.range(n,s.min==Ns?null:s.min,s.max==-Ns?null:s.max,t);s.min=e[0],s.max=e[1]}}}for(let t in e){let s=e[t];if(null!=s.from){let a=e[s.from];if(null==a.min)s.min=s.max=null;else{let e=s.range(n,a.min,a.max,t);s.min=e[0],s.max=e[1]}}}let s={},r=!1;for(let t in e){let n=e[t],a=k[t];if(a.min!=n.min||a.max!=n.max){a.min=n.min,a.max=n.max;let e=a.distr;a._min=3==e?Ts(a.min):4==e?Ls(a.min,a.asinh):100==e?a.fwd(a.min):a.min,a._max=3==e?Ts(a.max):4==e?Ls(a.max,a.asinh):100==e?a.fwd(a.max):a.max,s[t]=r=!0}}if(r){y.forEach((e,t)=>{2==a?t>0&&s.y&&(e._paths=null):s[e.scale]&&(e._paths=null)});for(let e in s)ve=!0,na("setScale",e);H&&$.left>=0&&(ke=Ce=!0)}for(let t in D)D[t]=null}(),xe=!1),ve&&(function(){let e=!1,t=0;for(;!e;){t++;let s=At(t),a=zt(t);e=t==Me||s&&a,e||(Te(n.width,n.height),we=!0)}}(),ve=!1),we){if($t(m,wt,ce),$t(m,yt,ue),$t(m,pt,ie),$t(m,bt,le),$t(f,wt,ce),$t(f,yt,ue),$t(f,pt,ie),$t(f,bt,le),$t(h,pt,re),$t(h,bt,oe),u.width=ws(re*Rt),u.height=ws(oe*Rt),v.forEach(({_el:e,_show:t,_size:s,_pos:n,side:a})=>{if(null!=e)if(t){let t=a%2==1;$t(e,t?"left":"top",n-(3===a||0===a?s:0)),$t(e,t?"width":"height",s),$t(e,t?"top":"left",t?ue:ce),$t(e,t?"height":"width",t?le:ie),Ot(e,ft)}else Bt(e,ft)}),Ge=Je=Ye=Ke=Xe=Qe=Ze=et=Ve=null,tt=1,_n(!0),ce!=de||ue!=he||ie!=me||le!=fe){Ut(!1);let e=ie/me,t=le/fe;if(H&&!ke&&$.left>=0){$.left*=e,$.top*=t,Kt&&qt(Kt,ws($.left),0,ie,le),Xt&&qt(Xt,0,ws($.top),ie,le);for(let s=0;s<De.length;s++){let n=De[s];null!=n&&(Ie[s]*=e,Fe[s]*=t,qt(n,vs(Ie[s]),vs(Fe[s]),ie,le))}}if(cn.show&&!Se&&cn.left>=0&&cn.width>0){cn.left*=e,cn.width*=e,cn.top*=t,cn.height*=t;for(let e in Dn)$t(un,e,cn[e])}de=ce,he=ue,me=ie,fe=le}na("setSize"),we=!1}re>0&&oe>0&&(d.clearRect(0,0,u.width,u.height),na("drawClear"),T.forEach(e=>e()),na("draw")),cn.show&&Se&&(dn(cn),Se=!1),H&&ke&&(Ln(null,!0,!1),ke=!1),O.show&&O.live&&Ce&&(Tn(),Ce=!1),l||(l=!0,n.status=1,na("ready")),nt=!1,Ms=!1}function Js(e,s){let a=k[e];if(null==a.from){if(0==We){let t=a.range(n,s.min,s.max,e);s.min=t[0],s.max=t[1]}if(s.min>s.max){let e=s.min;s.min=s.max,s.max=e}if(We>1&&null!=s.min&&null!=s.max&&s.max-s.min<1e-16)return;e==C&&2==a.distr&&We>0&&(s.min=es(s.min,t[0]),s.max=es(s.max,t[0]),s.min==s.max&&s.max++),D[e]=s,xe=!0,Ws()}}n.batch=function(e,t=!1){Ms=!0,Is=t,e(n),Hs(),t&&Bs.length>0&&queueMicrotask(Os)},n.redraw=(e,t)=>{ve=t||!1,!1!==e?hn(C,N.min,N.max):Ws()},n.setScale=Js;let Qs=!1;const sn=$.drag;let nn=sn.x,on=sn.y;H&&($.x&&(Gt=Ht("u-cursor-x",f)),$.y&&(Yt=Ht("u-cursor-y",f)),0==N.ori?(Kt=Gt,Xt=Yt):(Kt=Yt,Xt=Gt),xs=$.left,js=$.top);const cn=n.select=rn({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),un=cn.show?Ht("u-select",cn.over?f:m):null;function dn(e,t){if(cn.show){for(let t in e)cn[t]=e[t],t in Dn&&$t(un,t,e[t]);!1!==t&&na("setSelect")}}function hn(e,t,s){Js(e,{min:t,max:s})}function mn(e,t,s,r){null!=t.focus&&function(e){if(e!=pn){let t=null==e,s=1!=_e.alpha;y.forEach((n,r)=>{if(1==a||r>0){let a=t||0==r||r==e;n._focus=t?null:a,s&&function(e,t){y[e].alpha=t,H&&null!=De[e]&&(De[e].style.opacity=t),W&&V[e]&&(V[e].style.opacity=t)}(r,a?1:_e.alpha)}}),pn=e,s&&Ws()}}(e),null!=t.show&&y.forEach((s,n)=>{n>0&&(e==n||null==e)&&(s.show=t.show,function(e){if(y[e].show)W&&Ot(V[e],ft);else if(W&&Bt(V[e],ft),H){let t=Pe?De[0]:De[e];null!=t&&qt(t,-10,-10,ie,le)}}(n),2==a?(hn(s.facets[0].scale,null,null),hn(s.facets[1].scale,null,null)):hn(s.scale,null,null),Ws())}),!1!==s&&na("setSeries",e,t),r&&fa("setSeries",n,e,t)}let fn,gn,pn;n.setSelect=dn,n.setSeries=mn,n.addBand=function(e,t){e.fill=Ds(e.fill||null),e.dir=hs(e.dir,-1),t=null==t?S.length:t,S.splice(t,0,e)},n.setBand=function(e,t){rn(S[e],t)},n.delBand=function(e){null==e?S.length=0:S.splice(e,1)};const yn={focus:!0};function xn(e,t,s){let n=k[t];s&&(e=e/Rt-(1==n.ori?ue:ce));let a=ie;1==n.ori&&(a=le,e=a-e),-1==n.dir&&(e=a-e);let r=n._min,o=r+(n._max-r)*(e/a),i=n.distr;return 3==i?Cs(10,o):4==i?((e,t=1)=>ps.sinh(e)*t)(o,n.asinh):100==i?n.bwd(o):o}function wn(e,t){$t(un,wt,cn.left=e),$t(un,pt,cn.width=t)}function vn(e,t){$t(un,yt,cn.top=e),$t(un,bt,cn.height=t)}W&&Ee&&ne(Lt,q,e=>{$._lock||(Le(e),null!=pn&&mn(null,yn,!0,da.setSeries))}),n.valToIdx=e=>es(e,t[0]),n.posToIdx=function(e,s){return es(xn(e,C,s),t[0],He,Ue)},n.posToVal=xn,n.valToPos=(e,t,s)=>0==k[t].ori?r(e,k[t],s?be:ie,s?ge:0):o(e,k[t],s?ye:le,s?pe:0),n.setCursor=(e,t,s)=>{xs=e.left,js=e.top,Ln(null,t,s)};let kn=0==N.ori?wn:vn,jn=1==N.ori?wn:vn;function Tn(e,t){if(null!=e&&(e.idxs?e.idxs.forEach((e,t)=>{B[t]=e}):void 0!==e.idx&&B.fill(e.idx),O.idx=B[0]),W&&O.live){for(let e=0;e<y.length;e++)(e>0||1==a&&!X)&&Mn(e,B[e]);!function(){if(W&&O.live)for(let e=2==a?1:0;e<y.length;e++){if(0==e&&X)continue;let t=O.values[e],s=0;for(let n in t)K[e][s++].firstChild.nodeValue=t[n]}}()}Ce=!1,!1!==t&&na("setLegend")}function Mn(e,s){let a,r=y[e],o=0==e&&2==_?st:t[e];X?a=r.values(n,e,s)??Q:(a=r.value(n,null==s?null:o[s],e,s),a=null==a?Q:{_:a}),O.values[e]=a}function Ln(e,s,r){let o;fs=xs,gs=js,[xs,js]=$.move(n,xs,js),$.left=xs,$.top=js,H&&(Kt&&qt(Kt,ws(xs),0,ie,le),Xt&&qt(Xt,0,ws(js),ie,le));let i=He>Ue;fn=Ns,gn=null;let l=0==N.ori?ie:le,c=1==N.ori?ie:le;if(xs<0||0==We||i){o=$.idx=null;for(let e=0;e<y.length;e++){let t=De[e];null!=t&&qt(t,-10,-10,ie,le)}Ee&&mn(null,yn,!0,null==e&&da.setSeries),O.live&&(B.fill(o),Ce=!0)}else{let e,s,r;1==a&&(e=0==N.ori?xs:js,s=xn(e,C),o=$.idx=es(s,t[0],He,Ue),r=E(t[0][o],N,l,0));let i=-10,u=-10,d=0,h=0,m=!0,f="",g="";for(let p=2==a?1:0;p<y.length;p++){let e=y[p],b=B[p],x=null==b?null:1==a?t[p][b]:t[p][1][b],w=$.dataIdx(n,p,o,s),v=null==w?null:1==a?t[p][w]:t[p][1][w];if(Ce=Ce||v!=x||w!=b,B[p]=w,p>0&&e.show){let s=null==w?-10:w==o?r:E(1==a?t[0][w]:t[p][0][w],N,l,0),b=null==v?-10:P(v,1==a?k[e.scale]:k[e.facets[1].scale],c,0);if(Ee&&null!=v){let t=1==N.ori?xs:js,s=ys(_e.dist(n,p,w,b,t));if(s<fn){let n=_e.bias;if(0!=n){let a=xn(t,e.scale),r=a>=0?1:-1;r==(v>=0?1:-1)&&(1==r?1==n?v>=a:v<=a:1==n?v<=a:v>=a)&&(fn=s,gn=p)}else fn=s,gn=p}}if(Ce||Pe){let e,t;0==N.ori?(e=s,t=b):(e=b,t=s);let a,r,o,l,c,y,x=!0,w=Ne.bbox;if(null!=w){x=!1;let e=w(n,p);o=e.left,l=e.top,a=e.width,r=e.height}else o=e,l=t,a=r=Ne.size(n,p);if(y=Ne.fill(n,p),c=Ne.stroke(n,p),Pe)p==gn&&fn<=_e.prox&&(i=o,u=l,d=a,h=r,m=x,f=y,g=c);else{let e=De[p];null!=e&&(Ie[p]=o,Fe[p]=l,Vt(e,a,r,x),Jt(e,y,c),qt(e,vs(o),vs(l),ie,le))}}}}if(Pe){let e=_e.prox;if(Ce||(null==pn?fn<=e:fn>e||gn!=pn)){let e=De[0];null!=e&&(Ie[0]=i,Fe[0]=u,Vt(e,d,h,m),Jt(e,f,g),qt(e,vs(i),vs(u),ie,le))}}}if(cn.show&&Qs)if(null!=e){let[t,s]=da.scales,[n,a]=da.match,[r,o]=e.cursor.sync.scales,i=e.cursor.drag;if(nn=i._x,on=i._y,nn||on){let i,u,d,h,m,{left:f,top:g,width:p,height:b}=e.select,y=e.scales[r].ori,x=e.posToVal,w=null!=t&&n(t,r),v=null!=s&&a(s,o);w&&nn?(0==y?(i=f,u=p):(i=g,u=b),d=k[t],h=E(x(i,r),d,l,0),m=E(x(i+u,r),d,l,0),kn(ks(h,m),ys(m-h))):kn(0,l),v&&on?(1==y?(i=f,u=p):(i=g,u=b),d=k[s],h=P(x(i,o),d,c,0),m=P(x(i+u,o),d,c,0),jn(ks(h,m),ys(m-h))):jn(0,c)}else In()}else{let e=ys(fs-ts),t=ys(gs-cs);if(1==N.ori){let s=e;e=t,t=s}nn=sn.x&&e>=sn.dist,on=sn.y&&t>=sn.dist;let s,n,a=sn.uni;null!=a?nn&&on&&(nn=e>=a,on=t>=a,nn||on||(t>e?on=!0:nn=!0)):sn.x&&sn.y&&(nn||on)&&(nn=on=!0),nn&&(0==N.ori?(s=us,n=xs):(s=ms,n=js),kn(ks(s,n),ys(n-s)),on||jn(0,c)),on&&(1==N.ori?(s=us,n=xs):(s=ms,n=js),jn(ks(s,n),ys(n-s)),nn||kn(0,l)),nn||on||(kn(0,0),jn(0,0))}if(sn._x=nn,sn._y=on,null==e){if(r){if(null!=ha){let[e,t]=da.scales;da.values[0]=null!=e?xn(0==N.ori?xs:js,e):null,da.values[1]=null!=t?xn(1==N.ori?xs:js,t):null}fa(Ct,n,xs,js,ie,le,o)}if(Ee){let e=r&&da.setSeries,t=_e.prox;null==pn?fn<=t&&mn(gn,yn,!0,e):fn>t?mn(null,yn,!0,e):gn!=pn&&mn(gn,yn,!0,e)}}Ce&&(O.idx=o,Tn()),!1!==s&&na("setCursor")}n.setLegend=Tn;let Nn=null;function _n(e=!1){e?Nn=null:(Nn=f.getBoundingClientRect(),na("syncRect",Nn))}function En(e,t,s,n,a,r,o){$._lock||Qs&&null!=e&&0==e.movementX&&0==e.movementY||(Pn(e,t,s,n,a,r,0,!1,null!=e),null!=e?Ln(null,!0,!0):Ln(t,!0,!1))}function Pn(e,t,s,a,r,o,l,c,u){if(null==Nn&&_n(!1),Le(e),null!=e)s=e.clientX-Nn.left,a=e.clientY-Nn.top;else{if(s<0||a<0)return xs=-10,void(js=-10);let[e,n]=da.scales,l=t.cursor.sync,[c,u]=l.values,[d,h]=l.scales,[m,f]=da.match,g=t.axes[0].side%2==1,p=0==N.ori?ie:le,b=1==N.ori?ie:le,y=g?o:r,x=g?r:o,w=g?a:s,v=g?s:a;if(s=null!=d?m(e,d)?i(c,k[e],p,0):-10:p*(w/y),a=null!=h?f(n,h)?i(u,k[n],b,0):-10:b*(v/x),1==N.ori){let e=s;s=a,a=e}}!u||null!=t&&t.cursor.event.type!=Ct||((s<=1||s>=ie-1)&&(s=$s(s,ie)),(a<=1||a>=le-1)&&(a=$s(a,le))),c?(ts=s,cs=a,[us,ms]=$.move(n,s,a)):(xs=s,js=a)}Object.defineProperty(n,"rect",{get:()=>(null==Nn&&_n(!1),Nn)});const Dn={width:0,height:0,left:0,top:0};function In(){dn(Dn,!1)}let Fn,Un,Yn,Vn;function Kn(e,t,s,a,r,o,i){Qs=!0,nn=on=sn._x=sn._y=!1,Pn(e,t,s,a,r,o,0,!0,!1),null!=e&&(ne(Tt,It,Qn,!1),fa(jt,n,us,ms,ie,le,null));let{left:l,top:c,width:u,height:d}=cn;Fn=l,Un=c,Yn=u,Vn=d}function Qn(e,t,s,a,r,o,i){Qs=sn._x=sn._y=!1,Pn(e,t,s,a,r,o,0,!1,!0);let{left:l,top:c,width:u,height:d}=cn,h=u>0||d>0,m=Fn!=l||Un!=c||Yn!=u||Vn!=d;if(h&&m&&dn(cn),sn.setScale&&h&&m){let e=l,t=u,s=c,n=d;if(1==N.ori&&(e=c,t=d,s=l,n=u),nn&&hn(C,xn(e,C),xn(e+t,C)),on)for(let a in k){let e=k[a];a!=C&&null==e.from&&e.min!=Ns&&hn(a,xn(s+n,a),xn(s,a))}In()}else $.lock&&($._lock=!$._lock,Ln(t,!0,null!=e));null!=e&&(ae(Tt,It),fa(Tt,n,xs,js,ie,le,null))}function Zn(e,t,s,a,r,o,i){$._lock||(Le(e),rt(),In(),null!=e&&fa(Nt,n,xs,js,ie,le,null))}function ea(){v.forEach(mr),je(n.width,n.height,!0)}Qt(Et,Ft,ea);const ta={};ta.mousedown=Kn,ta.mousemove=En,ta.mouseup=Qn,ta.dblclick=Zn,ta.setSeries=(e,t,s,a)=>{-1!=(s=(0,da.match[2])(n,t,s))&&mn(s,a,!0,!1)},H&&(ne(jt,f,Kn),ne(Ct,f,En),ne(Mt,f,e=>{Le(e),_n(!1)}),ne(Lt,f,function(e,t,s,n,a,r,o){if($._lock)return;Le(e);let i=Qs;if(Qs){let e,t,s=!0,n=!0,a=10;0==N.ori?(e=nn,t=on):(e=on,t=nn),e&&t&&(s=xs<=a||xs>=ie-a,n=js<=a||js>=le-a),e&&s&&(xs=xs<us?0:ie),t&&n&&(js=js<ms?0:le),Ln(null,!0,!0),Qs=!1}xs=-10,js=-10,B.fill(null),Ln(null,!0,!0),i&&(Qs=i)}),ne(Nt,f,Zn),Za.add(n),n.syncRect=_n);const sa=n.hooks=e.hooks||{};function na(e,t,s){Is?Bs.push([e,t,s]):e in sa&&sa[e].forEach(e=>{e.call(null,n,t,s)})}(e.plugins||[]).forEach(e=>{for(let t in e.hooks)sa[t]=(sa[t]||[]).concat(e.hooks[t])});const ua=(e,t,s)=>s,da=rn({key:null,setSeries:!1,filters:{pub:Rs,sub:Rs},scales:[C,y[1]?y[1].scale:null],match:[zs,zs,ua],values:[null,null]},$.sync);2==da.match.length&&da.match.push(ua),$.sync=da;const ha=da.key,ma=Ma(ha);function fa(e,t,s,n,a,r,o){da.filters.pub(e,t,s,n,a,r,o)&&ma.pub(e,t,s,n,a,r,o)}function xa(){na("init",e,t),at(t||e.data,!1),D[C]?Js(C,D[C]):rt(),Se=cn.show&&(cn.width>0||cn.height>0),ke=Ce=!0,je(e.width,e.height)}return ma.sub(n),n.pub=function(e,t,s,n,a,r,o){da.filters.sub(e,t,s,n,a,r,o)&&ta[e](null,t,s,n,a,r,o)},n.destroy=function(){ma.unsub(n),Za.delete(n),se.clear(),Zt(Et,Ft,ea),c.remove(),null==q||q.remove(),na("destroy")},y.forEach(Re),v.forEach(function(e,t){if(e._show=e.show,e.show){let s=e.side%2,a=k[e.scale];null==a&&(e.scale=s?y[1].scale:C,a=k[e.scale]);let r=a.time;e.size=Ds(e.size),e.space=Ds(e.space),e.rotate=Ds(e.rotate),Xs(e.incrs)&&e.incrs.forEach(e=>{!qs.has(e)&&qs.set(e,Gs(e))}),e.incrs=Ds(e.incrs||(2==a.distr?Sn:r?1==b?An:Bn:Cn)),e.splits=Ds(e.splits||(r&&1==a.distr?A:3==a.distr?la:4==a.distr?ca:ia)),e.stroke=Ds(e.stroke),e.grid.stroke=Ds(e.grid.stroke),e.ticks.stroke=Ds(e.ticks.stroke),e.border.stroke=Ds(e.border.stroke);let o=e.values;e.values=Xs(o)&&!Xs(o[0])?Ds(o):r?Xs(o)?Hn(I,Wn(o,F)):Zs(o)?function(e,t){let s=bn(t);return(t,n,a,r,o)=>n.map(t=>s(e(t)))}(I,o):o||R:o||oa,e.filter=Ds(e.filter||(a.distr>=3&&10==a.log?ga:3==a.distr&&2==a.log?pa:Fs)),e.font=hr(e.font),e.labelFont=hr(e.labelFont),e._size=e.size(n,null,t,0),e._space=e._rotate=e._incrs=e._found=e._splits=e._values=null,e._size>0&&(ze[t]=!0,e._el=Ht("u-axis",h))}}),s?s instanceof HTMLElement?(s.appendChild(c),xa()):s(n,xa):xa(),n}fr.assign=rn,fr.fmtNum=gs,fr.rangeNum=ds,fr.rangeLog=os,fr.rangeAsinh=is,fr.orient=La,fr.pxRatio=Rt,fr.join=function(e,t){if(function(e){let t=e[0][0],s=t.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=s)return!1;if(a!=t)for(let e=0;e<s;e++)if(a[e]!=t[e])return!1}return!0}(e)){let t=e[0].slice();for(let s=1;s<e.length;s++)t.push(...e[s].slice(1));return function(e,t=100){const s=e.length;if(s<=1)return!0;let n=0,a=s-1;for(;n<=a&&null==e[n];)n++;for(;a>=n&&null==e[a];)a--;if(a<=n)return!0;const r=Ss(1,xs((a-n+1)/t));for(let o=e[n],i=n+r;i<=a;i+=r){const t=e[i];if(null!=t){if(t<=o)return!1;o=t}}return!0}(t[0])||(t=function(e){let t=e[0],s=t.length,n=Array(s);for(let r=0;r<n.length;r++)n[r]=r;n.sort((e,s)=>t[e]-t[s]);let a=[];for(let r=0;r<e.length;r++){let t=e[r],o=Array(s);for(let e=0;e<s;e++)o[e]=t[n[e]];a.push(o)}return a}(t)),t}let s=new Set;for(let o=0;o<e.length;o++){let t=e[o][0],n=t.length;for(let e=0;e<n;e++)s.add(t[e])}let n=[Array.from(s).sort((e,t)=>e-t)],a=n[0].length,r=new Map;for(let o=0;o<a;o++)r.set(n[0][o],o);for(let o=0;o<e.length;o++){let s=e[o],i=s[0];for(let e=1;e<s.length;e++){let l=s[e],c=Array(a).fill(void 0),u=t?t[o][e]:1,d=[];for(let e=0;e<l.length;e++){let t=l[e],s=r.get(i[e]);null===t?0!=u&&(c[s]=t,2==u&&d.push(s)):c[s]=t}on(c,d,a),n.push(c)}}return n},fr.fmtDate=bn,fr.tzDate=function(e,t){let s;return"UTC"==t||"Etc/UTC"==t?s=new Date(+e+6e4*e.getTimezoneOffset()):t==yn?s=e:(s=new Date(e.toLocaleString("en-US",{timeZone:t})),s.setMilliseconds(e.getMilliseconds())),s},fr.sync=Ma;{fr.addGap=function(e,t,s){let n=e[e.length-1];n&&n[0]==t?n[1]=s:e.push([t,s])},fr.clipGaps=Pa;let e=fr.paths={points:Ga};e.linear=Ka,e.stepped=function(e){const t=hs(e.align,1),s=hs(e.ascDesc,!1),n=hs(e.alignGaps,0),a=hs(e.extend,!1);return(e,r,o,i)=>La(e,r,(l,c,u,d,h,m,f,g,p,b,y)=>{[o,i]=as(u,o,i);let x=l.pxRound,{left:w,width:v}=e.bbox,k=e=>x(m(e,d,b,g)),S=e=>x(f(e,h,y,p)),C=0==d.ori?za:Ba;const j={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},T=j.stroke,M=d.dir*(0==d.ori?1:-1);let L=S(u[1==M?o:i]),N=k(c[1==M?o:i]),_=N,E=N;a&&-1==t&&(E=w,C(T,E,L)),C(T,N,L);for(let e=1==M?o:i;e>=o&&e<=i;e+=M){let s=u[e];if(null==s)continue;let n=k(c[e]),a=S(s);1==t?C(T,n,L):C(T,_,a),C(T,n,a),L=a,_=n}let P=_;a&&1==t&&(P=w+v,C(T,P,L));let[D,I]=Na(e,r);if(null!=l.fill||0!=D){let t=j.fill=new Path2D(T),s=S(l.fillTo(e,r,l.min,l.max,D));C(t,P,s),C(t,E,s)}if(!l.spanGaps){let a=[];a.push(...Da(c,u,o,i,M,k,n));let h=l.width*Rt/2,m=s||1==t?h:-h,f=s||-1==t?-h:h;a.forEach(e=>{e[0]+=m,e[1]+=f}),j.gaps=a=l.gaps(e,r,o,i,a),j.clip=Pa(a,d.ori,g,p,b,y)}return 0!=I&&(j.band=2==I?[Ea(e,r,o,i,T,-1),Ea(e,r,o,i,T,1)]:Ea(e,r,o,i,T,I)),j})},e.bars=function(e){const t=hs((e=e||Ys).size,[.6,Ns,1]),s=e.align||0,n=e.gap||0;let a=e.radius;a=null==a?[0,0]:"number"==typeof a?[a,0]:a;const r=Ds(a),o=1-t[0],i=hs(t[1],Ns),l=hs(t[2],1),c=hs(e.disp,Ys),u=hs(e.each,e=>{}),{fill:d,stroke:h}=c;return(e,t,a,m)=>La(e,t,(f,g,p,b,y,x,w,v,k,S,C)=>{let j,T,M=f.pxRound,L=s,N=n*Rt,_=i*Rt,E=l*Rt;0==b.ori?[j,T]=r(e,t):[T,j]=r(e,t);const P=b.dir*(0==b.ori?1:-1);let D,I,F,A=0==b.ori?Oa:$a,R=0==b.ori?u:(e,t,s,n,a,r,o)=>{u(e,t,s,a,n,o,r)},z=hs(e.bands,Vs).find(e=>e.series[0]==t),B=null!=z?z.dir:0,O=f.fillTo(e,t,f.min,f.max,B),$=M(w(O,y,C,k)),W=S,H=M(f.width*Rt),U=!1,q=null,G=null,J=null,Y=null;null==d||0!=H&&null==h||(U=!0,q=d.values(e,t,a,m),G=new Map,new Set(q).forEach(e=>{null!=e&&G.set(e,new Path2D)}),H>0&&(J=h.values(e,t,a,m),Y=new Map,new Set(J).forEach(e=>{null!=e&&Y.set(e,new Path2D)})));let{x0:V,size:K}=c;if(null!=V&&null!=K){L=1,g=V.values(e,t,a,m),2==V.unit&&(g=g.map(t=>e.posToVal(v+t*S,b.key,!0)));let s=K.values(e,t,a,m);I=2==K.unit?s[0]*S:x(s[0],b,S,v)-x(0,b,S,v),W=Xa(g,p,x,b,S,v,W),F=W-I+N}else W=Xa(g,p,x,b,S,v,W),F=W*o+N,I=W-F;F<1&&(F=0),H>=I/2&&(H=0),F<5&&(M=Is);let X=F>0;I=M(Es(W-F-(X?H:0),E,_)),D=(0==L?I/2:L==P?0:I)-L*P*((0==L?N/2:0)+(X?H/2:0));const Q={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Z=U?null:new Path2D;let ee=null;if(null!=z)ee=e.data[z.series[1]];else{let{y0:s,y1:n}=c;null!=s&&null!=n&&(p=n.values(e,t,a,m),ee=s.values(e,t,a,m))}let te=j*I,se=T*I;for(let s=1==P?a:m;s>=a&&s<=m;s+=P){let n=p[s];if(null==n)continue;if(null!=ee){let e=ee[s]??0;if(n-e==0)continue;$=w(e,y,C,k)}let a=x(2!=b.distr||null!=c?g[s]:s,b,S,v),r=w(hs(n,O),y,C,k),o=M(a-D),i=M(Ss(r,$)),l=M(ks(r,$)),u=i-l;if(null!=n){let a=n<0?se:te,r=n<0?te:se;U?(H>0&&null!=J[s]&&A(Y.get(J[s]),o,l+xs(H/2),I,Ss(0,u-H),a,r),null!=q[s]&&A(G.get(q[s]),o,l+xs(H/2),I,Ss(0,u-H),a,r)):A(Z,o,l+xs(H/2),I,Ss(0,u-H),a,r),R(e,t,s,o-H/2,l,I+H,u)}}return H>0?Q.stroke=U?Y:Z:U||(Q._fill=0==f.width?f._fill:f._stroke??f._fill,Q.width=0),Q.fill=U?G:Z,Q})},e.spline=function(e){return function(e,t){const s=hs(null==t?void 0:t.alignGaps,0);return(t,n,a,r)=>La(t,n,(o,i,l,c,u,d,h,m,f,g,p)=>{[a,r]=as(l,a,r);let b,y,x,w=o.pxRound,v=e=>w(d(e,c,g,m)),k=e=>w(h(e,u,p,f));0==c.ori?(b=Aa,x=za,y=Ua):(b=Ra,x=Ba,y=qa);const S=c.dir*(0==c.ori?1:-1);let C=v(i[1==S?a:r]),j=C,T=[],M=[];for(let e=1==S?a:r;e>=a&&e<=r;e+=S)if(null!=l[e]){let t=v(i[e]);T.push(j=t),M.push(k(l[e]))}const L={stroke:e(T,M,b,x,y,w),fill:null,clip:null,band:null,gaps:null,flags:1},N=L.stroke;let[_,E]=Na(t,n);if(null!=o.fill||0!=_){let e=L.fill=new Path2D(N),s=k(o.fillTo(t,n,o.min,o.max,_));x(e,j,s),x(e,C,s)}if(!o.spanGaps){let e=[];e.push(...Da(i,l,a,r,S,v,s)),L.gaps=e=o.gaps(t,n,a,r,e),L.clip=Pa(e,c.ori,m,f,g,p)}return 0!=E&&(L.band=2==E?[Ea(t,n,a,r,N,-1),Ea(t,n,a,r,N,1)]:Ea(t,n,a,r,N,E)),L})}(Qa,e)}}const gr=new Map;function pr(e){var t;if(!e.startsWith("var("))return e;const s=gr.get(e);if(s)return s;const n=e.match(/var\(([^,)]+)(?:,\s*([^)]+))?\)/);if(!n)return e;const a=n[1].trim(),r=(null==(t=n[2])?void 0:t.trim())||"#888888",o=getComputedStyle(document.documentElement).getPropertyValue(a).trim()||r;return gr.set(e,o),o}const br=s.memo(function({timestamps:e,series:t,onHover:a,highlightedKey:r=null,cursorColor:o="rgba(255,255,255,0.5)"}){const i=s.useRef(null),l=s.useRef(null),c=s.useRef(t),u=s.useRef(r),d=s.useRef(a),h=s.useRef(e.length);s.useLayoutEffect(()=>{c.current=t,u.current=r,d.current=a});const m=s.useMemo(()=>{const t=new Array(e.length).fill(1);return[e,t]},[e]),f=s.useMemo(()=>({hooks:{draw:e=>{!function(e,t,s){if(0===t.length)return;const n=e.ctx,a=e.bbox,r=a.left,o=a.top,i=a.width,l=a.height;if(i<=0||l<=0)return;const c=e.data[0],u=c.length;if(0===u)return;const d=c[0],h=c[u-1]-d||1,m=e=>{const t=c[e];return r+(t-d)/h*i},f=e=>o+l*(1-e);for(let g=0;g<t.length;g++){const e=t[g],a=new Array(u).fill(0),r=new Array(u).fill(0);for(let s=0;s<g;s++){const e=t[s].values;for(let t=0;t<u;t++)r[t]+=e[t]??0}for(let t=0;t<u;t++)a[t]=r[t]+(e.values[t]??0);const o=s&&s!==e.key?.3:1,i=pr(e.color);n.save(),n.globalAlpha=o,n.fillStyle=i,n.beginPath();let l=m(0);const c=f(r[0]);let d=f(a[0]);n.moveTo(l,c),n.lineTo(l,d);for(let t=1;t<u;t++){l=m(t);const e=d;d=f(a[t]),n.lineTo(l,e),n.lineTo(l,d)}for(let t=u-1;t>=0;t--){const e=m(t),s=f(r[t]);if(t===u-1)n.lineTo(e,s);else{const a=m(t+1);n.lineTo(a,s),n.lineTo(e,s)}}n.closePath(),n.fill(),n.restore()}}(e,c.current,u.current),function(e){const t=e.ctx,{left:s,top:n,width:a,height:r}=e.bbox,o=window.devicePixelRatio||1,i=function(){const e=getComputedStyle(document.documentElement);return{fontFamily:e.getPropertyValue("--font-data").trim()||'"JetBrains Mono", ui-monospace, monospace',textPrimary:e.getPropertyValue("--text-primary").trim()||"#FFFFFF"}}();t.save(),t.strokeStyle=i.textPrimary,t.globalAlpha=.15,t.lineWidth=1*o,t.setLineDash([4*o,4*o]);for(const c of[.2,.4,.6,.8]){const e=Math.round(n+r*(1-c))+.5;t.beginPath(),t.moveTo(Math.round(s),e),t.lineTo(Math.round(s+a),e),t.stroke()}t.restore(),t.save(),t.font=`bold ${10*o}px ${i.fontFamily}`,t.fillStyle=i.textPrimary,t.textBaseline="middle",t.textAlign="left";const l=8*o;for(const c of[0,20,40,60,80,100]){const e=n+r*(1-c/100),s=Math.max(n+l,Math.min(n+r-l,e));t.fillText(`${c}%`,0,s)}t.restore()}(e)}}}),[]),g=s.useMemo(()=>({width:400,height:200,padding:[8,0,0,32],cursor:{show:!0,x:!0,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!0},y:{range:[0,1]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1}],hooks:{setCursor:[e=>{var t,s;const n=e.cursor.idx;if(null!=n&&n>=0){const s=e.data[0][n];null==(t=d.current)||t.call(d,n,s)}else null==(s=d.current)||s.call(d,null,null)}]},plugins:[f]}),[f]);s.useEffect(()=>{const t=i.current;if(!t||0===e.length)return;const s=h.current,n=e.length,a=Math.abs(n-s);if(!(!l.current||a>100||s>0&&a/s>.1)&&l.current)return l.current.setData(m),void(h.current=n);l.current&&l.current.destroy();const r=t.getBoundingClientRect(),o=Math.floor(r.width)||400,c=Math.floor(r.height)||200,u=new fr({...g,width:o,height:c},m,t);return l.current=u,h.current=n,()=>{u.destroy(),l.current=null}},[g,m,e.length]),s.useEffect(()=>{const e=i.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!l.current)return;const{width:s,height:n}=t.contentRect;s>0&&n>0&&l.current.setSize({width:Math.floor(s),height:Math.floor(n)})});return t.observe(e),()=>{t.disconnect()}},[]),s.useEffect(()=>{l.current&&l.current.redraw()},[r,t]);const p=s.useCallback(()=>{null==a||a(null,null)},[a]);return 0===e.length?n.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No data available"}):n.jsx("div",{ref:i,className:"w-full h-full rounded-2xl overflow-hidden",onMouseLeave:p})}),yr=s.createContext(null);function xr(e){const t=Oe(e);t&&function(e){if("undefined"==typeof document)return;const t=function(e){var t;const s={},n=e.surfaces.glass;s["--glass-tint"]=n.tint,s["--glass-light"]=n.light,s["--glass-dark"]=n.dark,s["--glass-reflex-light"]=String(n.reflexLight),s["--glass-reflex-dark"]=String(n.reflexDark),s["--glass-blur"]=`${n.blur}px`,s["--glass-blur-elevated"]=`${n.blurElevated}px`,s["--glass-brightness"]=String(n.brightness),s["--glass-bg-opacity"]=`${n.opacity}%`,s["--glass-bg-opacity-elevated"]=`${n.opacityElevated}%`,s["--glass-stroke-only"]=n.strokeOnly?"1":"0",s["--glass-stroke-width"]=n.strokeWidth?`${n.strokeWidth}px`:"0px",s["--glass-stroke-color"]=n.strokeColor||"transparent",s["--glass-ribbon-mode"]=n.ribbonMode?"1":"0",s["--glass-ribbon-border-width"]=n.ribbonBorderWidth?`${n.ribbonBorderWidth}px`:"0px",s["--glass-ribbon-border-color"]=n.ribbonBorderColor||"transparent",s["--sidebar-tint"]=e.surfaces.sidebar.tint,s["--tooltip-bg"]=e.colors.bg.surface,s["--hover-tint"]=`rgba(${ee(e.colors.accent.primary)}, 0.08)`,s["--shadow-tint"]=`rgba(${ee(e.colors.accent.primary)}, 0.35)`,s["--bg-body"]=e.colors.bg.body,s["--bg-surface"]=e.colors.bg.surface,s["--bg-elevated"]=e.colors.bg.elevated,s["--bg-subtle"]=e.colors.bg.subtle,s["--border-subtle"]=e.colors.border.subtle,s["--border-strong"]=e.colors.border.strong,s["--text-primary"]=e.colors.text.primary,s["--text-secondary"]=e.colors.text.secondary,s["--text-muted"]=e.colors.text.muted,s["--text-invert"]=e.colors.text.inverse,s["--accent-primary"]=e.colors.accent.primary,s["--accent-secondary"]=e.colors.accent.secondary,s["--accent-tertiary"]=e.colors.accent.tertiary,s["--accent-success"]=e.colors.accent.success,s["--accent-danger"]=e.colors.accent.danger,s["--signal-excellent"]=e.colors.signal.excellent,s["--signal-good"]=e.colors.signal.good,s["--signal-fair"]=e.colors.signal.fair,s["--signal-poor"]=e.colors.signal.poor,s["--signal-critical"]=e.colors.signal.critical,s["--signal-unknown"]=e.colors.signal.unknown,s["--sparkline-excellent"]=e.colors.signal.excellent,s["--sparkline-good"]=e.colors.signal.good,s["--sparkline-fair"]=e.colors.signal.fair,s["--sparkline-poor"]=e.colors.signal.poor,s["--sparkline-critical"]=e.colors.signal.critical,s["--status-success"]=e.colors.status.success,s["--status-warning"]=e.colors.status.warning,s["--status-danger"]=e.colors.status.danger,s["--status-info"]=e.colors.status.info,s["--status-muted"]=e.colors.status.muted;const a=e.colors.chart;s["--pkt-advert"]=e.colors.accent.secondary,s["--pkt-flood"]=e.colors.accent.tertiary,s["--pkt-txt-msg"]=e.colors.accent.success,s["--pkt-ack"]=a.c8,s["--pkt-trace"]=a.c3,s["--pkt-req"]=a.c2,s["--pkt-response"]=a.c5,s["--pkt-grp-txt"]=e.colors.map.room,s["--pkt-grp-data"]=e.colors.accent.danger,s["--pkt-path"]=a.c3,s["--pkt-anon"]=e.colors.accent.secondary,s["--pkt-unknown"]=e.colors.status.muted,s["--route-flood"]=e.colors.accent.primary,s["--route-direct"]=e.colors.accent.secondary,s["--route-transport"]=a.c8,s["--chart-1"]=a.c1,s["--chart-2"]=a.c2,s["--chart-3"]=a.c3,s["--chart-4"]=a.c4,s["--chart-5"]=a.c5,s["--chart-6"]=a.c6,s["--chart-7"]=a.c7,s["--chart-8"]=a.c8,s["--chart-grid"]=a.grid,s["--chart-axis-tick"]=a.axis,s["--chart-cursor"]=a.cursor,s["--metric-received"]=e.colors.metric.received,s["--metric-forwarded"]=e.colors.metric.forwarded,s["--metric-transmitted"]=e.colors.metric.transmitted,s["--metric-dropped"]=e.colors.metric.dropped,s["--metric-neutral"]=e.colors.text.secondary,s["--log-debug"]=e.colors.status.muted,s["--log-info"]=e.colors.status.info,s["--log-warning"]=e.colors.status.warning,s["--log-error"]=e.colors.accent.danger,s["--log-critical"]=e.colors.accent.danger;const r=e.colors.map;s["--map-node-fill"]="#3B82F6",s["--map-node-stroke"]="rgba(255,255,255,0.9)",s["--map-hub-color"]="#8E4EC6",s["--map-hub-stroke"]="rgba(255,255,255,0.9)",s["--map-gateway-color"]="#5B5BD6",s["--map-gateway-stroke"]="rgba(255,255,255,0.85)",s["--map-local-color"]="#FFB224",s["--map-neighbor-color"]="#FFB224",s["--map-neighbor-stroke"]="rgba(0,0,0,0.4)",s["--map-mobile-color"]="#F76B15",s["--map-room-color"]="#D6409F",s["--map-ghost-color"]="#00A2C7",s["--map-edge-rest"]=r.edge,s["--map-edge-rest-bright"]=e.colors.border.strong,s["--map-edge-rest-dim"]=e.colors.bg.subtle,s["--map-edge-hover-direct"]=r.edgeHover,s["--map-edge-hover-loop"]="#8E4EC6",s["--map-edge-hover-standard"]=e.colors.text.muted,s["--map-edge-hover-neighbor"]="#FFB224",s["--link-strong"]=e.colors.accent.success,s["--link-medium"]=e.colors.accent.secondary,s["--link-weak"]=e.colors.accent.danger,s["--hop-0"]=e.colors.accent.tertiary,s["--hop-1"]=e.colors.accent.success,s["--hop-2"]=a.c3,s["--hop-3"]=e.colors.accent.secondary,s["--hop-distant"]=e.colors.text.muted,s["--hop-hub"]=r.local;const o=e.colors.icon;s["--icon-page-title"]=(null==o?void 0:o.pageTitle)??e.colors.accent.primary,s["--icon-card-title"]=(null==o?void 0:o.cardTitle)??e.colors.accent.primary,s["--icon-widget"]=(null==o?void 0:o.widget)??e.colors.text.secondary,s["--icon-action"]=(null==o?void 0:o.action)??e.colors.text.secondary,s["--icon-nav"]=(null==o?void 0:o.nav)??e.colors.text.muted,s["--icon-nav-active"]=(null==o?void 0:o.navActive)??e.colors.accent.primary,s["--toggle-on"]=e.colors.accent.success,s["--toggle-off"]=e.colors.bg.elevated;const i=e.colors.sidebar;s["--sidebar-bg"]=(null==i?void 0:i.bg)??"transparent",s["--sidebar-nav-hover-bg"]=(null==i?void 0:i.navHoverBg)??"rgba(255, 255, 255, 0.05)",s["--sidebar-nav-active-bg"]=(null==i?void 0:i.navActiveBg)??`color-mix(in srgb, ${e.colors.accent.primary} 15%, transparent)`,s["--sidebar-nav-active-text"]=(null==i?void 0:i.navActiveText)??e.colors.accent.primary;const l=e.meta.isDark;s["--data-box-bg"]=l?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.03)",s["--data-box-border"]=l?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.08)",s["--subtle-fill"]=l?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.03)",s["--subtle-fill-hover"]=l?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.05)",s["--subtle-fill-strong"]=l?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",s["--color-pill-bg"]=l?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)",s["--terminal-bg"]=l?"rgba(0, 0, 0, 0.4)":"rgba(0, 0, 0, 0.03)",s["--terminal-bg-input"]=l?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.05)",s["--terminal-bg-status"]=l?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.02)",s["--terminal-border"]=l?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.08)",s["--terminal-autocomplete-bg"]=l?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.95)",s["--terminal-autocomplete-border"]=l?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.15)",s["--terminal-autocomplete-hover"]=l?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",s["--livedot-idle"]=l?"#666677":"#999999",s["--ctrl-panel-top"]=l?"rgba(30, 30, 30, 0.95)":"rgba(240, 240, 240, 0.95)",s["--ctrl-panel-mid"]=l?"rgba(25, 25, 25, 0.95)":"rgba(235, 235, 235, 0.95)",s["--ctrl-panel-bottom"]=l?"rgba(20, 20, 20, 0.95)":"rgba(230, 230, 230, 0.95)",s["--ctrl-panel-border"]=l?"rgba(60, 60, 60, 1)":"rgba(200, 200, 200, 1)",s["--chart-grid-line"]=l?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.08)",s["--map-control-active-amber"]=l?"rgba(251, 191, 36, 0.15)":"rgba(217, 119, 6, 0.12)",s["--map-control-active-sky"]=l?"rgba(56, 189, 248, 0.15)":"rgba(14, 165, 233, 0.12)",s["--map-control-active-teal"]=l?"rgba(45, 212, 191, 0.15)":"rgba(20, 184, 166, 0.12)",s["--sidebar-action-active-green"]=l?"rgba(10, 26, 10, 1)":"rgba(220, 252, 231, 1)",s["--sidebar-action-active-teal"]=l?"rgba(10, 36, 32, 1)":"rgba(204, 251, 241, 1)",s["--sidebar-action-active-amber"]=l?"rgba(26, 20, 8, 1)":"rgba(254, 243, 199, 1)",s["--thumbnail-brightness"]=l?"1.5":"1.8",s["--font-title"]=e.typography.font.title,s["--font-display"]=e.typography.font.display,s["--font-data"]=e.typography.font.mono,s["--font-card-title"]=e.typography.font.cardTitle??e.typography.font.display,s["--font-badge"]=e.typography.font.badge??e.typography.font.display,s["--font-normal"]=String(e.typography.weight.normal),s["--font-medium"]=String(e.typography.weight.medium),s["--font-semibold"]=String(e.typography.weight.semibold),s["--font-bold"]=String(e.typography.weight.bold),s["--font-card-title-weight"]=String(e.typography.weight.cardTitle??e.typography.weight.semibold),s["--font-badge-weight"]=String(e.typography.weight.badge??e.typography.weight.medium),s["--badge-text-transform"]=(null==(t=e.typography.badge)?void 0:t.textTransform)??"none";const c=e.typography.size;c.xxl&&(s["--text-2xl"]=c.xxl),c.xl&&(s["--text-xl"]=c.xl),c.lg&&(s["--text-lg"]=c.lg),c.md&&(s["--text-md"]=c.md),c.base&&(s["--text-base"]=c.base),c.sm&&(s["--text-sm"]=c.sm),c.xs&&(s["--text-xs"]=c.xs),c.hero&&(s["--text-5xl"]=c.hero),c.cardTitle&&(s["--text-card-title"]=c.cardTitle);const u=e.typography.tracking;return u&&(s["--tracking-tight"]=u.tight,s["--tracking-normal"]=u.normal,s["--tracking-wide"]=u.wide),s["--theme-transition"]=`${e.motion.slow} ${e.motion.easing}`,function(e){if(!K())return e;const t={},s=/^#[0-9A-Fa-f]{3,6}$/;for(const[n,a]of Object.entries(e))t[n]=s.test(a)?V(a):a;return t}(s)}(e),s=document.documentElement;for(const[n,a]of Object.entries(t))s.style.setProperty(n,a);e.surfaces.glass.strokeOnly?s.classList.add("stroke-only"):s.classList.remove("stroke-only"),e.surfaces.glass.ribbonMode?s.classList.add("ribbon-mode"):s.classList.remove("ribbon-mode"),e.surfaces.glass.catalystMode?s.classList.add("catalyst-mode"):s.classList.remove("catalyst-mode")}(t),document.documentElement.dataset.colorScheme=e}function wr({children:e}){const[t,a]=s.useState(()=>function(){if("undefined"==typeof window)return Qe;try{let s=localStorage.getItem(Ze),n=localStorage.getItem(et);const a=localStorage.getItem(tt);if(!s&&!n){const e=localStorage.getItem(st);if(e){const t=Xe.find(t=>t.id===e);t&&(s=t.colorScheme,n=t.backgroundImage,localStorage.setItem(Ze,s),localStorage.setItem(et,n),localStorage.removeItem(st))}}const r=s&&"string"==typeof(t=s)&&Ve.some(e=>e.id===t)?s:Qe.colorScheme;let o=Qe.backgroundImage;""===n?o="":n&&"string"==typeof(e=n)&&Ke.some(t=>t.src===e)&&(o=n);let i=Qe.brightness;if(a){const e=parseInt(a,10);!isNaN(e)&&e>=0&&e<=100&&(i=e)}return{colorScheme:r,backgroundImage:o,brightness:i}}catch{return Qe}var e,t}()),r=s.useRef(!1),o=s.useRef(null),[i,l]=s.useState(null);s.useEffect(()=>{o.current&&(clearTimeout(o.current),o.current=null),r.current&&(l("#808080"),o.current=setTimeout(()=>{l(null),o.current=null},1800)),r.current=!0,xr(t.colorScheme),gr.clear(),requestAnimationFrame(()=>{!function(){if("undefined"==typeof window)return;for(const t of ot){const e=ht(`--palette-${t}-bright`),s=ht(`--palette-${t}`),n=e||s;if(!n)continue;const a=dt(n);for(const r of rt)mt(`--palette-${t}-${r}`,a[r])}const e=ht("--palette-bg-4");if(e){const t=dt(e);for(const e of rt)mt(`--palette-neutral-${e}`,t[e])}}()})},[t.colorScheme]),s.useEffect(()=>{!function(e){if("undefined"!=typeof window)try{localStorage.setItem(Ze,e.colorScheme),localStorage.setItem(et,e.backgroundImage),localStorage.setItem(tt,String(e.brightness))}catch{}}(t)},[t]),s.useEffect(()=>{Ke.forEach(e=>{(new Image).src=e.src})},[]);const c=s.useCallback(e=>{a(t=>({...t,colorScheme:e}))},[]),u=s.useCallback(e=>{const t=Ke.find(t=>t.src===e);a(s=>({...s,backgroundImage:e,brightness:(null==t?void 0:t.suggestedBrightness)??s.brightness}))},[]),d=s.useCallback(e=>{const t=Math.max(0,Math.min(100,Math.round(e)));a(e=>({...e,brightness:t}))},[]),h=s.useCallback(e=>{const t=Xe.find(t=>t.id===e);if(t){const e=!t.backgroundImage,s=e?null:Ke.find(e=>e.src===t.backgroundImage);a(n=>({...n,colorScheme:t.colorScheme,backgroundImage:t.backgroundImage,brightness:e?100:(null==s?void 0:s.suggestedBrightness)??n.brightness}))}},[]),m=s.useMemo(()=>({theme:t,setColorScheme:c,setBackgroundImage:u,setBrightness:d,setThemePreset:h}),[t,c,u,d,h]);return n.jsxs(yr.Provider,{value:m,children:[e,i&&n.jsx("div",{className:"fixed inset-0 pointer-events-none z-[9999]",style:{backgroundColor:i,animation:"theme-crossfade 1.8s ease-out forwards"}},t.colorScheme),n.jsx("style",{children:"\n        @keyframes theme-crossfade {\n          from { opacity: 0.35; }\n          to { opacity: 0; }\n        }\n      "})]})}function vr(){const e=s.useContext(yr);if(!e)throw new Error("useTheme must be used within a ThemeProvider. Wrap your app with <ThemeProvider> in App.tsx.");return e}const kr=s.forwardRef(function(e,t){const{href:s,...o}=e;return s.startsWith("http://")||s.startsWith("https://")||s.startsWith("//")?n.jsx(a,{children:n.jsx("a",{...o,href:s,ref:t})}):n.jsx(a,{children:n.jsx(r,{...o,to:s,ref:t})})}),Sr={0:"REQ",1:"RESPONSE",2:"TXT_MSG",3:"ACK",4:"ADVERT",5:"GRP_TXT",6:"GRP_DATA",7:"ANON_REQ",8:"PATH",9:"TRACE",10:"MULTIPART",15:"RAW_CUSTOM"},Cr={0:"T_FLOOD",1:"FLOOD",2:"DIRECT",3:"T_DIRECT"},jr={REQ:0,RESPONSE:1,TXT_MSG:2,ACK:3,ADVERT:4,GRP_TXT:5,GRP_DATA:6,ANON_REQ:7,PATH:8,TRACE:9,MULTIPART:10,RAW_CUSTOM:15};function Tr(e){return 1===e||0===e}function Mr(e){return null==e?"UNKNOWN":Sr[e]||`TYPE_${e}`}function Lr(e){return null==e?"UNKNOWN":Cr[e]||`ROUTE_${e}`}function Nr(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}function _r(e){const t=function(e){const t=e.replace("#",""),s=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255,r=e=>e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);return.2126*r(s)+.7152*r(n)+.0722*r(a)}(e);return Nr(t,1)>Nr(t,0)?"light":"dark"}function Er(e){return 1===e||!0===e}const Pr=J("inline-flex items-center gap-1","rounded-md px-1.5 py-0.5","text-xs"),Dr={fontFamily:"var(--font-badge)",fontWeight:"var(--font-badge-weight)",textTransform:"var(--badge-text-transform, none)"},Ir={red:"var(--sys-red)",orange:"var(--sys-orange)",amber:"var(--sys-amber)",yellow:"var(--sys-yellow)",lime:"var(--sys-green)",green:"var(--sys-green)",emerald:"var(--sys-green)",teal:"var(--sys-teal)",cyan:"var(--sys-cyan)",sky:"var(--sys-cyan)",blue:"var(--sys-blue)",indigo:"var(--sys-indigo)",violet:"var(--sys-indigo)",purple:"var(--sys-purple)",fuchsia:"var(--sys-pink)",pink:"var(--sys-pink)",rose:"var(--sys-red)",brown:"var(--sys-brown)",zinc:"var(--text-muted)"};function Fr(e){if(!e.startsWith("var("))return e;if("undefined"!=typeof window){const t=e.match(/var\((--[^,)]+)/);if(t){const e=getComputedStyle(document.documentElement).getPropertyValue(t[1]).trim();if(e&&e.startsWith("#"))return e}}return"#666666"}function Ar({color:e="zinc",customColor:t,filled:a=!1,compact:r=!1,className:o,title:i,children:l}){const c=s.useMemo(()=>{const s=t??Ir[e];if(a){if(t){const e=_r(Fr(t));return{backgroundColor:t,color:"light"===e?"rgba(255,255,255,0.95)":"rgba(0,0,0,0.85)"}}return{backgroundColor:s,color:["amber","yellow","lime"].includes(e)?"rgba(0,0,0,0.85)":"rgba(255,255,255,0.95)"}}return{backgroundColor:`color-mix(in srgb, ${s} 15%, transparent)`,color:s}},[e,t,a]);return n.jsx("span",{className:J(Pr,r&&"!px-1 !py-0 !text-[10px]",o),style:{...Dr,...c},title:i,children:l})}const Rr=s.forwardRef(function({color:e="zinc",customColor:t,filled:a=!1,compact:r=!1,className:i,children:l,...c},u){const d=s.useMemo(()=>{const s=t??Ir[e];if(a){if(t){const e=_r(Fr(t));return{backgroundColor:t,color:"light"===e?"rgba(255,255,255,0.95)":"rgba(0,0,0,0.85)"}}return{backgroundColor:s,color:["amber","yellow","lime"].includes(e)?"rgba(0,0,0,0.85)":"rgba(255,255,255,0.95)"}}return{backgroundColor:`color-mix(in srgb, ${s} 15%, transparent)`,color:s}},[e,t,a]),h=J(Pr,r&&"!px-1 !py-0 !text-[10px]","cursor-pointer transition-opacity hover:opacity-80",i);return"href"in c&&void 0!==c.href?n.jsx(kr,{...c,ref:u,className:h,style:{...Dr,...d},children:l}):n.jsx(o,{...c,ref:u,className:h,style:{...Dr,...d},children:l})}),zr=J("relative inline-flex items-center justify-center gap-2","text-sm font-medium whitespace-nowrap","rounded-lg px-3 py-1.5","focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary/50 focus-visible:ring-offset-1 focus-visible:ring-offset-bg-body","disabled:opacity-50 disabled:cursor-not-allowed","transition-all duration-150","[&>[data-slot=icon]]:w-4 [&>[data-slot=icon]]:h-4 [&>[data-slot=icon]]:shrink-0"),Br={primary:J("bg-accent-primary text-white","hover:bg-accent-primary/90","active:bg-accent-primary/80","border border-accent-primary/20"),success:J("bg-accent-success text-white","hover:bg-accent-success/90","active:bg-accent-success/80","border border-accent-success/20"),danger:J("bg-accent-danger text-white","hover:bg-accent-danger/90","active:bg-accent-danger/80","border border-accent-danger/20"),warning:J("bg-accent-secondary text-bg-body","hover:bg-accent-secondary/90","active:bg-accent-secondary/80","border border-accent-secondary/20"),muted:J("bg-bg-elevated text-text-primary","hover:bg-bg-subtle","active:bg-bg-elevated","border border-border-subtle")},Or={primary:J("bg-transparent text-accent-primary","border border-accent-primary/30","hover:bg-accent-primary/10 hover:border-accent-primary/50","active:bg-accent-primary/20"),success:J("bg-transparent text-accent-success","border border-accent-success/30","hover:bg-accent-success/10 hover:border-accent-success/50","active:bg-accent-success/20"),danger:J("bg-transparent text-accent-danger","border border-accent-danger/30","hover:bg-accent-danger/10 hover:border-accent-danger/50","active:bg-accent-danger/20"),warning:J("bg-transparent text-accent-secondary","border border-accent-secondary/30","hover:bg-accent-secondary/10 hover:border-accent-secondary/50","active:bg-accent-secondary/20"),muted:J("bg-transparent text-text-muted","border border-border-subtle","hover:bg-bg-subtle hover:text-text-primary hover:border-border-strong","active:bg-bg-elevated")},$r={primary:J("bg-transparent text-accent-primary border-transparent","hover:bg-accent-primary/10","active:bg-accent-primary/20"),success:J("bg-transparent text-accent-success border-transparent","hover:bg-accent-success/10","active:bg-accent-success/20"),danger:J("bg-transparent text-accent-danger border-transparent","hover:bg-accent-danger/10","active:bg-accent-danger/20"),warning:J("bg-transparent text-accent-secondary border-transparent","hover:bg-accent-secondary/10","active:bg-accent-secondary/20"),muted:J("bg-transparent text-text-muted border-transparent","hover:bg-bg-subtle hover:text-text-primary","active:bg-bg-elevated")},Wr=s.forwardRef(function({color:e="muted",outline:t=!1,plain:s=!1,className:a,children:r,...i},l){const c=J(zr,s?$r[e]:t?Or[e]:Br[e],a);return"href"in i&&void 0!==i.href?n.jsx(kr,{...i,ref:l,className:c,children:r}):n.jsx(o,{...i,ref:l,className:c,children:r})}),Hr={duration:.15,ease:[.4,0,.2,1]},Ur={type:"tween",duration:.25,ease:[.4,0,.2,1]},qr={type:"tween",duration:.3,ease:[.4,0,.2,1]},Gr=s.createContext(!1);function Jr(){return s.useContext(Gr)}const Yr={xs:"sm:max-w-xs",sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","3xl":"sm:max-w-3xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl",full:"sm:max-w-[calc(100vw-2rem)]"};function Vr({open:e,onClose:t,size:a="md",className:r,children:o,bottomSheet:d=!0,motionPlus:h=!1}){const[m,f]=s.useState(!1),g=s.useRef(null);s.useEffect(()=>(g.current&&(clearTimeout(g.current),g.current=null),e?g.current=setTimeout(()=>{f(!0)},350):queueMicrotask(()=>f(!1)),()=>{g.current&&(clearTimeout(g.current),g.current=null)}),[e]);const p=s.useCallback((e,s)=>{(s.offset.y>100||s.velocity.y>500)&&t()},[t]),b=h?qr:Ur,y=h?.98:.99,x=d?8:4;return n.jsx(i,{mode:"wait",children:e&&n.jsxs(l,{static:!0,open:e,onClose:t,className:"relative z-[10010]",children:[n.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Hr,className:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true"}),n.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:n.jsx("div",{className:J("flex min-h-full justify-center",d?"items-end sm:items-center sm:p-4":"items-center p-4"),children:n.jsx(c.div,{drag:!!d&&"y",dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.4},onDragEnd:p,initial:{opacity:0,scale:y,y:x},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.99,y:d?40:4},transition:b,style:{willChange:"transform, opacity"},className:J(d&&"w-full sm:w-auto"),children:n.jsx(u,{className:J("w-full bg-bg-surface shadow-2xl flex flex-col","ring-1 ring-inset ring-white/10",Yr[a],d?"rounded-t-2xl rounded-b-none sm:rounded-2xl pb-safe":"rounded-2xl",r),children:n.jsx(Gr.Provider,{value:m,children:o})})})})})]})})}function Kr({className:e,...t}){return n.jsx(d,{...t,className:J("text-base font-semibold text-text-primary sm:text-lg",e)})}function Xr({icon:e,title:t,onClose:s,className:a}){return n.jsxs("div",{className:J("flex items-center justify-between p-4 border-b border-border-subtle",a),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[e&&n.jsx("div",{className:"p-2 rounded-lg bg-bg-subtle text-icon-card-title",children:e}),n.jsx(Kr,{children:t})]}),s&&n.jsx("button",{onClick:s,className:"p-2 rounded-lg text-text-muted hover:text-text-primary hover:bg-bg-subtle transition-colors","aria-label":"Close",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}function Qr({className:e,...t}){return n.jsx("div",{...t,className:J("p-4",e)})}function Zr({className:e,...t}){return n.jsx("div",{...t,className:J("flex flex-col-reverse gap-3 p-4 pt-0","sm:flex-row sm:justify-end","*:w-full sm:*:w-auto",e)})}const eo={snappy:{type:"spring",stiffness:500,damping:30},smooth:{type:"spring",stiffness:300,damping:30},gentle:{type:"spring",stiffness:200,damping:25}},to={easeIn:[.4,0,1,1],cubicInOut:[.65,0,.35,1]},so={normal:.05};function no({className:e,...t}){return n.jsx("nav",{...t,className:J(e,"flex h-full min-h-0 flex-col")})}function ao({className:e,...t}){return n.jsx("div",{...t,className:J(e,"flex flex-col border-b border-border-subtle p-4","[&>[data-slot=section]+[data-slot=section]]:mt-2.5")})}function ro({className:e,...t}){return n.jsx("div",{...t,className:J(e,"flex flex-1 flex-col overflow-y-auto p-3","[&>[data-slot=section]+[data-slot=section]]:mt-6")})}function oo({className:e,...t}){return n.jsx("div",{...t,className:J(e,"mt-auto flex flex-col border-t border-border-subtle","[&>[data-slot=section]+[data-slot=section]]:mt-2.5")})}function io({className:e,...t}){const a=s.useId();return n.jsx(h,{id:a,children:n.jsx("div",{...t,"data-slot":"section",className:J(e,"flex flex-col gap-0.5")})})}const lo=s.forwardRef(function(e,t){const{current:s,className:a,children:i,...l}=e,u=J("flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-left","min-h-[44px]","text-sm font-medium","[&>svg]:w-5 [&>svg]:h-5 [&>svg]:flex-shrink-0",s?"bg-accent-primary/15 text-accent-primary [&>svg]:text-accent-primary":"text-text-muted hover:text-text-primary hover:bg-subtle-fill [&>svg]:text-text-muted hover:[&>svg]:text-text-primary","transition-all duration-150");return n.jsxs("span",{className:J(a,"relative"),children:[s&&n.jsx(c.span,{layoutId:"sidebar-current-indicator",className:"absolute inset-y-2 -left-3 w-0.5 rounded-full bg-accent-primary"}),"string"==typeof l.href?n.jsx(r,{to:l.href,onClick:l.onClick,onMouseEnter:l.onMouseEnter,onMouseLeave:l.onMouseLeave,className:u,"data-current":s?"true":void 0,ref:t,children:i}):n.jsx(o,{...l,className:J("cursor-default",u),"data-current":s?"true":void 0,ref:t,children:i})]})});function co({className:e,...t}){return n.jsx("span",{...t,className:J(e,"truncate")})}function uo({className:e,variant:t="default",...s}){return n.jsx("span",{...s,className:J("ml-auto flex items-center gap-1 px-1.5 py-0.5 rounded-full","text-xs font-medium",{default:"bg-bg-subtle text-text-muted",accent:"bg-accent-primary/20 text-accent-primary",success:"bg-accent-success/20 text-accent-success",warning:"bg-accent-secondary/20 text-accent-secondary",danger:"bg-accent-danger/20 text-accent-danger"}[t],e)})}const ho=s.createContext(null),mo={type:"spring",visualDuration:.35,bounce:.15};function fo({open:e,onClose:t,children:s}){return n.jsx(i,{children:e&&n.jsxs(l,{static:!0,open:e,onClose:t,className:"lg:hidden relative z-[10002]",children:[n.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25,ease:"easeOut"},className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),n.jsx(c.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:mo,className:"fixed inset-y-0 left-0 w-72 max-w-[85vw] z-[10003]",children:n.jsx(u,{className:"h-full",children:n.jsxs("div",{className:"flex h-full flex-col sidebar-panel",children:[n.jsx("div",{className:"absolute top-4 right-4 z-10",children:n.jsx(f,{className:"p-2 rounded-lg text-text-muted hover:text-text-primary hover:bg-subtle-fill transition-colors","aria-label":"Close navigation",children:n.jsx(g,{className:"w-5 h-5"})})}),s]})})})]})})}function go({sidebar:e,navbar:t,children:a,className:r}){const[o,i]=s.useState(!1),l=()=>i(!0),c=()=>i(!1),u={isOpen:o,open:l,close:c,toggle:()=>i(e=>!e)};return n.jsx(ho.Provider,{value:u,children:n.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-body",children:[n.jsx("aside",{className:"hidden lg:flex flex-col w-64 flex-shrink-0 h-full relative sidebar-panel",children:e}),n.jsx(fo,{open:o,onClose:c,children:e}),n.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[n.jsx("header",{className:"lg:hidden sticky top-0 z-[10001] h-14 mobile-header",children:n.jsxs("div",{className:"flex items-center h-full px-4",children:[n.jsx("button",{onClick:l,className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-subtle-fill active:bg-subtle-fill transition-colors mr-2","aria-label":"Open navigation",children:n.jsx(m,{className:"w-5 h-5 text-text-primary"})}),n.jsx("div",{className:"flex-1 min-w-0",children:t})]})}),n.jsx("main",{className:J("flex-1 overflow-y-auto main-content",r),children:a})]})]})})}function po({className:e,...t}){return n.jsx("nav",{...t,className:J(e,"flex flex-1 items-center gap-3")})}function bo({className:e,...t}){return n.jsx("div",{...t,className:J(e,"flex items-center gap-3")})}function yo({className:e,...t}){return n.jsx("div",{"aria-hidden":"true",...t,className:J(e,"flex-1")})}function xo({defaultOpen:e=!1,className:t,children:s}){return n.jsx(y,{defaultOpen:e,children:n.jsx("div",{className:J("flex flex-col",t),children:s})})}s.forwardRef(function({children:e,elevated:t,compact:s,noPadding:a,className:r,...o},i){return n.jsx("div",{ref:i,className:J("rounded-lg","bg-bg-surface","ring-1 ring-inset ring-border-subtle","h-full flex flex-col",t&&"bg-bg-elevated",!a&&(s?"p-3 sm:p-4":"p-4 sm:p-5"),r),...o,children:e})}),s.forwardRef(function({children:e,className:t,...s},a){return n.jsx("div",{ref:a,className:J("flex items-center justify-between gap-4","pb-4 mb-4","border-b border-border-subtle",t),...s,children:e})}),s.forwardRef(function({children:e,icon:t,className:s,...a},r){return n.jsxs("h3",{ref:r,className:J("flex items-center gap-2","text-base font-semibold text-text-primary",s),...a,children:[t&&n.jsx("span",{className:"text-icon-card-title w-5 h-5 flex-shrink-0",children:t}),e]})}),s.forwardRef(function({children:e,className:t,...s},a){return n.jsx("p",{ref:a,className:J("text-sm text-text-muted",t),...s,children:e})}),s.forwardRef(function({children:e,className:t,...s},a){return n.jsx("div",{ref:a,className:J("flex-1 min-h-0",t),...s,children:e})}),s.forwardRef(function({children:e,className:t,...s},a){return n.jsx("div",{ref:a,className:J("flex items-center justify-end gap-3","pt-4 mt-4","border-t border-border-subtle",t),...s,children:e})}),s.forwardRef(function({children:e,border:t,className:s,...a},r){return n.jsx("div",{ref:r,className:J(t&&"pt-4 mt-4 border-t border-border-subtle",s),...a,children:e})});const wo=s.forwardRef(function({className:e,icon:t,children:s,...a},r){return n.jsx(p,{ref:r,className:J("flex w-full items-center justify-between gap-3","px-3 py-2 rounded-lg","text-sm font-medium text-text-muted","hover:bg-bg-surface hover:text-text-primary","transition-colors duration-150","focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary/50",e),...a,children:({open:e})=>n.jsxs(n.Fragment,{children:[s,n.jsx("span",{className:J("transition-transform duration-200",e?"rotate-180":"rotate-0"),children:t||n.jsx(b,{className:"w-4 h-4"})})]})})});function vo({direction:e="down",className:t,children:s}){const a={hidden:{height:0,opacity:0,y:"up"===e?8:-8},visible:{height:"auto",opacity:1,y:0}};return n.jsx(x,{static:!0,children:({open:r})=>n.jsx(i,{initial:!1,children:r&&n.jsx(c.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:a,transition:{height:{duration:.2,ease:[.4,0,.2,1]},opacity:{duration:.15},y:{duration:.15}},className:J("overflow-hidden",t),children:n.jsx("div",{className:J("up"===e?"pb-2":"pt-2"),children:s})})})})}function ko({label:e,icon:t,defaultOpen:s=!0,direction:a="down",className:r,dataId:o,children:i}){const l=o?{[`data-${o}-disclosure`]:!0}:{};return n.jsx(xo,{defaultOpen:s,className:r,children:"up"===a?n.jsxs(n.Fragment,{children:[n.jsx(vo,{direction:"up",children:i}),n.jsx(wo,{...l,children:n.jsxs("span",{className:"flex items-center gap-3",children:[t,n.jsx("span",{className:"text-xs uppercase tracking-wide",children:e})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(wo,{...l,children:n.jsxs("span",{className:"flex items-center gap-3",children:[t,n.jsx("span",{className:"text-xs uppercase tracking-wide",children:e})]})}),n.jsx(vo,{direction:"down",children:i})]})})}const So="0.9.194",Co="'JetBrains Mono', monospace",jo=s.memo(function({height:e=16,responsive:t=!1,className:s=""}){const a="var(--accent-primary)",r="var(--text-primary)";if(t){const e=145,t=24;return n.jsxs("svg",{className:s,viewBox:`0 0 ${e} ${t}`,preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"pyMC:Console",style:{display:"block",width:"80%",height:"auto"},children:[n.jsx("style",{children:`\n          .logo-text {\n            font-family: ${Co};\n          }\n          .logo-accent {\n            fill: var(--accent-primary, #719CDF);\n          }\n          .logo-main {\n            fill: var(--text-primary, #FFFFFF);\n          }\n        `}),n.jsxs("text",{x:"0",y:"18",className:"logo-text",fontSize:"20",fontWeight:"400",letterSpacing:"-0.02em",children:[n.jsx("tspan",{className:"logo-accent",children:"py"}),n.jsx("tspan",{className:"logo-main",children:"MC"}),n.jsx("tspan",{className:"logo-accent",children:":"}),n.jsx("tspan",{className:"logo-main",children:"Console"})]})]})}const o="string"==typeof e?parseFloat(e):e,i={fontFamily:Co,fontSize:.8*o+"px",fontWeight:400,lineHeight:1,letterSpacing:"-0.02em",whiteSpace:"nowrap"};return n.jsxs("span",{className:s,style:i,role:"img","aria-label":"pyMC:Console",children:[n.jsx("span",{style:{color:a},children:"py"}),n.jsx("span",{style:{color:r},children:"MC"}),n.jsx("span",{style:{color:a},children:":"}),n.jsx("span",{style:{color:r},children:"Console"})]})}),To="pymc_jwt_token",Mo="pymc_client_id",Lo="pymc_remember_me",No=new Set;function _o(e){return No.add(e),()=>No.delete(e)}function Eo(e){for(const s of No)try{s(e)}catch(t){}}function Po(){let e=localStorage.getItem(Mo);return e||(e=`${Date.now()}-${Math.random().toString(36).substring(2,15)}`,localStorage.setItem(Mo,e)),e}function Do(){return"true"===localStorage.getItem(Lo)}function Io(e){e?localStorage.setItem(Lo,"true"):localStorage.removeItem(Lo)}function Fo(){return Do()?localStorage:sessionStorage}function Ao(){return Fo().getItem(To)||localStorage.getItem(To)||sessionStorage.getItem(To)}function Ro(e){Fo().setItem(To,e),Do()?sessionStorage.removeItem(To):localStorage.removeItem(To),Eo(e)}function zo(){localStorage.removeItem(To),sessionStorage.removeItem(To),Eo(null)}function Bo(){return!(!Ao()||$o()&&(zo(),1))}function Oo(e){try{const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch{return null}}function $o(){const e=Ao();if(!e)return!0;const t=Oo(e);return!t||!t.exp||Date.now()>=1e3*t.exp-6e4}function Wo(){const e=Ao();if(!e)return 0;const t=Oo(e);return t&&t.exp?Math.max(0,Math.floor((1e3*t.exp-Date.now())/1e3)):0}function Ho(){const e=Ao();if(!e)return!1;const t=Oo(e);if(!t||!t.exp)return!1;const s=1e3*t.exp-Date.now();return s>0&&s<3e5}function Uo(){const e=Ao();if(!e)return null;const t=Oo(e);return t&&t.sub?t.sub:null}async function qo(e,t,s=!1){Io(s);try{const s=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,client_id:Po()})}),n=s.headers.get("content-type");if(!n||!n.includes("application/json"))return{success:!1,error:`Server error: ${s.status}`};const a=await s.json();return a.success&&a.token?(Ro(a.token),{success:!0}):{success:!1,error:a.error||"Login failed"}}catch(n){return{success:!1,error:"Connection error. Please try again."}}}async function Go(){const e=Ao();if(!e)return!1;const t=Oo(e);(null==t?void 0:t.exp)&&Math.floor((1e3*t.exp-Date.now())/1e3);try{const t=await fetch("/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({client_id:Po()})});if(!t.ok){let e="";try{const s=await t.json();e=s.error||JSON.stringify(s)}catch{e=t.statusText}return!1}const s=await t.json();if(s.success&&s.token){Ro(s.token);const e=Oo(s.token);return(null==e?void 0:e.exp)&&Math.floor((1e3*e.exp-Date.now())/1e3),!0}return!1}catch(s){return!1}}let Jo=null;async function Yo(){const e=Ao();if(!e)return!1;const t=Oo(e);return(null==t?void 0:t.exp)&&Math.floor((1e3*t.exp-Date.now())/1e3),!Ho()||Jo||(Jo=Go().finally(()=>{Jo=null}),Jo)}function Vo(){zo()}let Ko=!1;function Xo(){if(Ko)return;if("undefined"==typeof document)return;const e=async()=>{if("visible"!==document.visibilityState)return;if(!Ao())return;if($o())return zo(),void("undefined"==typeof window||window.location.pathname.includes("/login")||(window.location.href="/login"));const e=Wo();e>0&&e<300&&await Go()};document.addEventListener("visibilitychange",e),Ko=!0,"visible"===document.visibilityState&&e()}const Qo=Object.freeze(Object.defineProperty({__proto__:null,clearToken:zo,getClientId:Po,getRememberMe:Do,getToken:Ao,getTokenTimeRemaining:Wo,getUsername:Uo,isAuthenticated:Bo,isTokenExpired:$o,login:qo,logout:Vo,onTokenChange:_o,parseJWT:Oo,refreshToken:Go,refreshTokenIfNeeded:Yo,setRememberMe:Io,setToken:Ro,shouldRefreshToken:Ho,startVisibilityBasedRefresh:Xo},Symbol.toStringTag,{value:"Module"})),Zo=new Map;let ei=!1;async function ti(e,t,s=!1){const n=function(e,t){return(null==t?void 0:t.method)&&"GET"!==t.method?"":e}(e,t);if(n){const e=Zo.get(n);if(e)return e}const a=`${e}`;!s&&Ho()&&await Go();const r=Ao();if(!r&&!e.includes("/auth/"))throw window.location.href="/login",new Error("Not authenticated");const o=r?{Authorization:`Bearer ${r}`}:{};if(null==t?void 0:t.headers){const e=t.headers;e instanceof Headers?e.forEach((e,t)=>{o[t]=e}):Array.isArray(e)?e.forEach(([e,t])=>{o[e]=t}):Object.assign(o,e)}(null==t?void 0:t.body)&&(o["Content-Type"]="application/json");const i=(async()=>{const n=await fetch(a,{...t,headers:o});if(401===n.status){if(!s&&!ei&&await Go())return ti(e,t,!0);throw ei||(ei=!0,zo(),window.location.replace("/login")),new Error("Session expired. Please log in again.")}if(!n.ok)throw new Error(`API error: ${n.status} ${n.statusText} (${e})`);return n.json()})();return n&&(Zo.set(n,i),i.finally(()=>{Zo.delete(n)})),i}const si={spreadingFactor:7,bandwidthHz:125e3,codingRate:5,preambleLength:8,crcEnabled:!0,explicitHeader:!0};function ni(e){if(e.raw_packet){const t=e.raw_packet;if(/^[0-9a-fA-F]+$/.test(t)&&t.length%2==0)return t.length/2;if(/^[A-Za-z0-9+/=]+$/.test(t)){const e=(t.match(/=+$/)||[""])[0].length;return Math.floor(3*t.length/4)-e}return t.length}if(e.length&&e.length>0)return e.length;if(e.payload_length&&e.payload_length>0)return e.payload_length;if(e.payload){const t=e.payload;return/^[0-9a-fA-F]+$/.test(t)&&t.length%2==0?t.length/2:t.length}return 32}function ai(e,t={}){return void 0!==e.airtime_ms&&e.airtime_ms>0?e.airtime_ms:function(e,t={}){const s=t.spreadingFactor??si.spreadingFactor,n=t.bandwidthHz??si.bandwidthHz,a=t.codingRate??si.codingRate,r=t.preambleLength??si.preambleLength??8,o=t.crcEnabled??si.crcEnabled?1:0,i=t.explicitHeader??si.explicitHeader?0:1,l=s>=11&&n<=125e3?1:0,c=n/1e3,u=Math.pow(2,s)/c,d=(r+4.25)*u,h=Math.max(8*e-4*s+28+16*o-20*i,0),m=4*(s-2*l);return d+(8+Math.ceil(h/m)*a)*u}(ni(e),t)}function ri(e){return e&&"chat node"===e.toLowerCase()?"Companion":e}async function oi(){return function(e){if(e.neighbors)for(const t of Object.values(e.neighbors))t.contact_type=ri(t.contact_type);return e}(await ti("/api/stats"))}async function ii(){return ti("/api/logs")}async function li(e=24){return ti(`/api/noise_floor_history?hours=${e}`)}const ci=new Map;function ui(e=!1){if(e)ci.clear();else for(const[t]of ci)parseInt(t.split("-")[0],10)<=60&&ci.delete(t)}function di(e,t,s,n){const a=60*e/t,r=Math.floor(Date.now()/1e3),o=Math.floor(r/a)*a,i=o-60*e,l=s.filter(e=>e.timestamp>=i&&e.timestamp<=o),c=n?function(e){var t;const s=null==(t=null==e?void 0:e.config)?void 0:t.radio;return{spreadingFactor:(null==s?void 0:s.spreading_factor)??si.spreadingFactor,bandwidthHz:(null==s?void 0:s.bandwidth)??si.bandwidthHz,codingRate:(null==s?void 0:s.coding_rate)??si.codingRate,preambleLength:(null==s?void 0:s.preamble_length)??si.preambleLength,crcEnabled:!0,explicitHeader:!0}}(n):si,u=function(e,t,s,n,a){const r=new Array(t),o=new Array(t),i=new Array(t),l=new Array(t),c=new Array(t),u=new Array(t),d=new Array(t);for(let m=0;m<t;m++){const e=s+m*n,t={bucket:m,start:e,end:e+n,count:0,airtime_ms:0,avg_snr:0,avg_rssi:0};r[m]={...t},o[m]={...t},i[m]={...t},l[m]={...t},c[m]={...t},u[m]={snr:0,rssi:0,count:0},d[m]=new Set}const h=e.length;for(let m=0;m<h;m++){const h=e[m],f=Math.floor((h.timestamp-s)/n);if(f<0||f>=t)continue;const g=ai(h,a),p=h.packet_origin;if("tx_local"===p?(i[f].count++,i[f].airtime_ms+=g):"tx_forward"===p||h.transmitted?(l[f].count++,l[f].airtime_ms+=g):h.drop_reason&&(c[f].count++,c[f].airtime_ms+=g),"tx_local"!==p){r[f].count++,r[f].airtime_ms+=g,u[f].snr+=h.snr||0,u[f].rssi+=h.rssi||0,u[f].count++;const e=h.packet_hash;e&&!d[f].has(e)&&(d[f].add(e),o[f].count++,o[f].airtime_ms+=g)}}for(let m=0;m<t;m++)u[m].count>0&&(r[m].avg_snr=u[m].snr/u[m].count,r[m].avg_rssi=u[m].rssi/u[m].count);return{received:r,unique_received:o,transmitted:i,forwarded:l,dropped:c}}(l,t,i,a,c);return{time_range_minutes:e,bucket_count:t,bucket_duration_seconds:a,start_time:i,end_time:o,...u}}async function hi(){return ti("/api/hardware_stats")}async function mi(){return ti("/api/hardware_processes")}async function fi(e){return ti("/api/update_radio_config",{method:"POST",body:JSON.stringify(e)})}async function gi(){return ti("/api/send_advert",{method:"POST",body:"{}"})}async function pi(e){return ti("/api/set_mode",{method:"POST",body:JSON.stringify({mode:e})})}async function bi(e){return ti("/api/set_duty_cycle",{method:"POST",body:JSON.stringify({enabled:e})})}async function yi(e){try{return await ti("/api/log_level",{method:"POST",body:JSON.stringify({level:e})})}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const xi="pymc-packet-cache",wi="pymc-packet-cache-meta",vi=36e5,ki=2592e5,Si=6048e5,Ci=12096e5,ji=5e3,Ti=5e5,Mi=new class{constructor(){t(this,"packets",new Map),t(this,"sortedPackets",[]),t(this,"sortedDirty",!0),t(this,"meta",{oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,topologyLoadComplete:!1,dataTier:"24h",threeDayLoadComplete:!1,sevenDayLoadComplete:!1,fourteenDayLoadComplete:!1}),t(this,"isLoading",!1),t(this,"isBackgroundLoading",!1),t(this,"isTopologyLoading",!1),t(this,"listeners",new Set),t(this,"loadProgress",null),t(this,"statusMessage",""),this.loadFromStorage()}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{isLoading:this.isLoading,isBackgroundLoading:this.isBackgroundLoading,isTopologyLoading:this.isTopologyLoading,backgroundLoadComplete:this.meta.backgroundLoadComplete,topologyLoadComplete:this.meta.topologyLoadComplete,packetCount:this.packets.size,statusMessage:this.statusMessage,loadProgress:this.loadProgress,dataTier:this.meta.dataTier,threeDayLoadComplete:this.meta.threeDayLoadComplete,sevenDayLoadComplete:this.meta.sevenDayLoadComplete,fourteenDayLoadComplete:this.meta.fourteenDayLoadComplete}}getDataTier(){return this.meta.dataTier}getPackets(){return this.sortedDirty&&(this.sortedPackets=Array.from(this.packets.values()).sort((e,t)=>(e.timestamp??0)-(t.timestamp??0)),this.sortedDirty=!1),this.sortedPackets}isStale(){return 0===this.packets.size||Date.now()-this.meta.lastUpdated>vi}isHeavyLoadInProgress(){return this.isBackgroundLoading||this.isTopologyLoading}async initialLoad(e){if(this.isStale()&&this.packets.size>0&&this.clear(),this.meta.backgroundLoadComplete&&this.packets.size>0)return this.getPackets();this.isLoading=!0;const t=Date.now(),s=Math.floor((t-864e5)/1e3),n=3e4;this.loadProgress={loaded:0,target:n,percent:0},this.statusMessage="Loading 24h history...",this.notifyListeners();try{let t;this.packets.size>0&&(this.packets.clear(),this.sortedPackets=[],this.sortedDirty=!0,this.meta.oldestTimestamp=0,this.meta.newestTimestamp=0);let a=0,r=0,o=0;const i=Math.ceil(100);for(let l=0;l<i;l++){const c=Math.min(99,Math.round(this.packets.size/n*100));this.statusMessage="Loading 24h history...",this.loadProgress={loaded:this.packets.size,target:n,percent:c},this.notifyListeners();const u=await this.fetchChunkWithRetry(t,ji,l,i,s);if(null!==u){if(o=0,!(u.success&&u.data&&u.data.length>0))break;{const n=this.packets.size;this.mergePackets(u.data);const o=this.packets.size-n;a+=o;const i=Math.min(...u.data.map(e=>e.timestamp??1/0));if(i!==1/0&&(void 0===t||i<t)&&(t=i),e&&e(),i!==1/0&&i<=s)break;if(0===o){if(r++,r>=2)break}else r=0;if(u.data.length<ji&&0===o)break;if(this.packets.size>=Ti)break}l<i-1&&await this.delay(300)}else{if(o++,o>=5){this.statusMessage="Connection issues, loaded partial data",this.notifyListeners();break}await this.delay(2e3)}}this.enforceMemoryCap(),this.meta.backgroundLoadComplete=!0,this.meta.dataTier="24h",this.loadProgress={loaded:this.packets.size,target:this.packets.size,percent:100},this.notifyListeners(),this.saveToStorage()}catch(a){this.statusMessage="Load failed"}finally{this.isLoading=!1,this.statusMessage="",this.loadProgress=null,this.notifyListeners()}return this.getPackets()}async quickLoad(){return this.initialLoad()}async backgroundLoad(){await this.initialLoad()}async loadThreeDays(e){this.meta.threeDayLoadComplete||this.isBackgroundLoading||await this.loadExtendedData("3d",ki,e)}async loadSevenDays(e){this.meta.sevenDayLoadComplete||this.isBackgroundLoading||(this.meta.threeDayLoadComplete||await this.loadThreeDays(e),await this.loadExtendedData("7d",Si,e))}async loadFourteenDays(e){this.meta.fourteenDayLoadComplete||this.isBackgroundLoading||(this.meta.sevenDayLoadComplete||await this.loadSevenDays(e),await this.loadExtendedData("14d",Ci,e))}async loadExtendedData(e,t,s){this.isBackgroundLoading=!0;const n=Date.now(),a=Math.floor((n-t)/1e3),r=3e4*("3d"===e?2:"7d"===e?4:7);this.loadProgress={loaded:0,target:r,percent:0},this.statusMessage=`Loading ${e} history...`,this.notifyListeners();try{let t=this.meta.oldestTimestamp||void 0,n=0,o=0,i=0;const l=Math.ceil(100);for(let u=0;u<l;u++){const c=Math.min(99,Math.round(n/r*100));this.statusMessage=`Loading ${e} history...`,this.loadProgress={loaded:n,target:r,percent:c},this.notifyListeners();const d=await this.fetchChunkWithRetry(t,ji,u,l,a);if(null!==d){if(i=0,!(d.success&&d.data&&d.data.length>0))break;{const e=this.packets.size;this.mergePackets(d.data);const r=this.packets.size-e;n+=r;const i=Math.min(...d.data.map(e=>e.timestamp??1/0));if(i!==1/0&&(void 0===t||i<t)&&(t=i),s&&s(),i!==1/0&&i<=a)break;if(0===r){if(o++,o>=2)break}else o=0;if(d.data.length<ji&&0===r)break;if(this.packets.size>=Ti)break}u<l-1&&await this.delay(300)}else{if(i++,i>=5)break;await this.delay(2e3)}}this.enforceMemoryCap();const c=Date.now()-1e3*this.meta.oldestTimestamp;"3d"===e?(this.meta.threeDayLoadComplete=c>=ki,this.meta.threeDayLoadComplete&&(this.meta.dataTier="3d")):"7d"===e?(this.meta.sevenDayLoadComplete=c>=Si,this.meta.sevenDayLoadComplete&&(this.meta.dataTier="7d")):(this.meta.fourteenDayLoadComplete=c>=Ci,this.meta.fourteenDayLoadComplete&&(this.meta.dataTier="14d")),this.loadProgress={loaded:n,target:n,percent:100},this.notifyListeners(),this.saveToStorage()}catch(o){this.statusMessage=`${e} load failed`}finally{this.isBackgroundLoading=!1,this.statusMessage="",this.loadProgress=null,this.notifyListeners()}}isDataTierAvailable(e){switch(e){case"24h":return this.meta.backgroundLoadComplete;case"3d":return this.meta.threeDayLoadComplete;case"7d":return this.meta.sevenDayLoadComplete;case"14d":return this.meta.fourteenDayLoadComplete;default:return!1}}async topologyLoad(){if(!this.meta.topologyLoadComplete&&!this.isTopologyLoading)return this.doTopologyLoad()}async forceTopologyLoad(){if(!this.isTopologyLoading)return this.meta.topologyLoadComplete=!1,this.doTopologyLoad()}async forceDeepLoad(){return this.forceTopologyLoad()}async doTopologyLoad(){this.isTopologyLoading=!0;const e=Date.now(),t=Math.floor((e-Ci)/1e3),s=42e4;this.statusMessage="Loading topology data...",this.loadProgress={loaded:this.packets.size,target:s,percent:0},this.notifyListeners();try{let e=this.meta.oldestTimestamp||void 0,n=0,a=0;const r=Math.ceil(100);for(let o=0;o<r;o++){const i=Math.min(99,Math.round(this.packets.size/s*100));this.statusMessage="Loading topology data...",this.loadProgress={loaded:this.packets.size,target:s,percent:i},this.notifyListeners();const l=await this.fetchChunkWithRetry(e,ji,o,r,t);if(null!==l){if(a=0,!(l.success&&l.data&&l.data.length>0))break;{const s=this.packets.size;this.mergePackets(l.data);const a=this.packets.size-s,r=Math.min(...l.data.map(e=>e.timestamp??1/0));if(r!==1/0&&(void 0===e||r<e)&&(e=r),r!==1/0&&r<=t)break;if(0===a){if(n++,n>=2)break}else n=0;if(this.packets.size>=Ti)break}o<r-1&&await this.delay(300)}else{if(a++,a>=5)break;await this.delay(2e3)}}this.enforceMemoryCap(),this.statusMessage=`Processing ${this.packets.size.toLocaleString()} packets...`,this.loadProgress={loaded:this.packets.size,target:this.packets.size,percent:100},this.notifyListeners(),this.meta.topologyLoadComplete=!0,this.meta.threeDayLoadComplete=!0,this.meta.sevenDayLoadComplete=!0,this.meta.fourteenDayLoadComplete=!0,this.meta.dataTier="14d",this.saveToStorage()}catch(n){this.statusMessage="Load failed"}finally{this.isTopologyLoading=!1,this.statusMessage="",this.loadProgress=null,this.notifyListeners()}}async poll(){try{const e=await this.fetchRecentPackets(100);if(e.success&&e.data){const t=this.packets.size;this.mergePackets(e.data),this.packets.size>t&&(this.saveToStorage(),this.notifyListeners())}}catch(e){}return this.getPackets()}clear(){this.packets.clear(),this.sortedPackets=[],this.sortedDirty=!0,this.meta={oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,topologyLoadComplete:!1,dataTier:"24h",threeDayLoadComplete:!1,sevenDayLoadComplete:!1,fourteenDayLoadComplete:!1},this.clearStorage(),this.notifyListeners()}mergePacketsDirectly(e){const t=this.packets.size;this.mergePackets(e);const s=this.packets.size-t;return s>0&&(this.enforceMemoryCap(),this.saveToStorage(),this.notifyListeners()),s}mergePackets(e){let t=!1;for(const s of e){const e=s.packet_hash;if(!e)continue;const n=s.timestamp??0,a=`${e}:${n}`;this.packets.has(a)||(this.packets.set(a,s),t=!0),(0===this.meta.oldestTimestamp||n<this.meta.oldestTimestamp)&&(this.meta.oldestTimestamp=n),n>this.meta.newestTimestamp&&(this.meta.newestTimestamp=n)}t&&(this.sortedDirty=!0),this.meta.lastUpdated=Date.now(),this.meta.packetCount=this.packets.size}notifyListeners(){const e=this.getState();for(const t of this.listeners)t(e)}delay(e){return new Promise(t=>setTimeout(t,e))}async fetchChunkWithRetry(e,t,s,n,a){for(let o=0;o<3;o++)try{return await this.fetchFilteredPackets(e,t,!1,a)}catch(r){const e=2===o,t=1e3*Math.pow(2,o);r instanceof Error&&r.name,e||(this.statusMessage=`Retry in ${Math.round(t/1e3)}s...`,this.notifyListeners(),await this.delay(t))}return null}enforceMemoryCap(){if(this.packets.size<=Ti)return;const e=this.getPackets(),t=e.length-Ti;for(let s=0;s<t;s++){const t=e[s];t.packet_hash&&this.packets.delete(t.packet_hash)}this.sortedDirty=!0,this.meta.packetCount=this.packets.size,e.length>t&&(this.meta.oldestTimestamp=e[t].timestamp??0)}loadFromStorage(){if("undefined"!=typeof window)try{const e=localStorage.getItem(wi);e&&(this.meta=JSON.parse(e));const t=localStorage.getItem(xi);if(t){const e=JSON.parse(t);for(const t of e)t.packet_hash&&this.packets.set(t.packet_hash,t)}if(this.meta.lastUpdated>0&&Date.now()-this.meta.lastUpdated>vi)return void this.clear();this.meta.backgroundLoadComplete=!1,this.meta.threeDayLoadComplete=!1,this.meta.sevenDayLoadComplete=!1,this.meta.fourteenDayLoadComplete=!1,this.meta.dataTier="24h";const s=37500;this.meta.topologyLoadComplete&&this.packets.size<s&&(this.meta.topologyLoadComplete=!1),"deepLoadComplete"in this.meta&&delete this.meta.deepLoadComplete}catch(e){this.clear()}}saveToStorage(){if("undefined"!=typeof window)try{localStorage.setItem(wi,JSON.stringify(this.meta));const e=this.getPackets(),t=e.length>3e3?e.slice(-3e3):e;localStorage.setItem(xi,JSON.stringify(t))}catch(e){if(e instanceof DOMException&&"QuotaExceededError"===e.name)try{localStorage.removeItem(xi),localStorage.setItem(wi,JSON.stringify(this.meta))}catch{}}}clearStorage(){if("undefined"!=typeof window)try{localStorage.removeItem(xi),localStorage.removeItem(wi)}catch(e){}}async fetchRecentPackets(e=1e3,t=!1){const s=`/api/recent_packets?limit=${e}`,{getToken:n}=await G(async()=>{const{getToken:e}=await Promise.resolve().then(()=>Qo);return{getToken:e}},void 0),a=n(),r={};a&&(r.Authorization=`Bearer ${a}`);const o=await fetch(s,{headers:r});if(401===o.status&&!t){const{refreshToken:t}=await G(async()=>{const{refreshToken:e}=await Promise.resolve().then(()=>Qo);return{refreshToken:e}},void 0);if(await t())return this.fetchRecentPackets(e,!0)}if(!o.ok)throw new Error(`API error: ${o.status}`);return o.json()}async fetchFilteredPackets(e,t=5e3,s=!1,n){const a=new URLSearchParams;a.set("limit",String(t)),void 0!==e&&a.set("end_timestamp",String(e-.001)),void 0!==n&&a.set("start_timestamp",String(n));const r=`/api/filtered_packets?${a}`,{getToken:o}=await G(async()=>{const{getToken:e}=await Promise.resolve().then(()=>Qo);return{getToken:e}},void 0),i=o(),l={};i&&(l.Authorization=`Bearer ${i}`);const c=new AbortController,u=setTimeout(()=>c.abort(),3e4);try{const n=await fetch(r,{headers:l,signal:c.signal});if(401===n.status&&!s){const{refreshToken:s}=await G(async()=>{const{refreshToken:e}=await Promise.resolve().then(()=>Qo);return{refreshToken:e}},void 0);if(await s())return this.fetchFilteredPackets(e,t,!0)}if(!n.ok)throw new Error(`API error: ${n.status}`);return n.json()}finally{clearTimeout(u)}}};function Li(e){return{paths:e.paths,byEndpoints:new Map(e.byEndpointsEntries),canonicalPaths:new Map(e.canonicalPathsEntries),totalObservations:e.totalObservations,uniquePathCount:e.uniquePathCount}}function Ni(){return{paths:[],byEndpoints:new Map,canonicalPaths:new Map,totalObservations:0,uniquePathCount:0}}const _i=new class{constructor(){t(this,"worker",null),t(this,"listeners",new Set),t(this,"currentTopology",{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],gatewayNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:Ni(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0},discoveredNodes:[],viterbiStats:{totalPaths:0,pathsWithGhosts:0,avgPathCost:0,avgPathConfidence:0,observationOverrideCount:0,tracePacketsProcessed:0,pathPacketsProcessed:0,distantEdgesDiscovered:0,duplicateGroupsFound:0,duplicatePathsUnique:0,echolocationEdgesInferred:0},nodeMetrics:new Map,communityCount:0,backboneNodes:[]}),t(this,"isComputing",!1),t(this,"pendingRequest",null),t(this,"debounceTimer",null),t(this,"debounceMs",100),this.initWorker()}initWorker(){if("undefined"!=typeof window)try{this.worker=new Worker(new URL("/assets/topology.worker-B6JO1dmH.js",import.meta.url),{type:"module"}),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{}}catch(e){}}handleWorkerMessage(e){if(this.isComputing=!1,"error"!==e.type){var t;this.currentTopology={edges:(t=e.payload).edges??[],validatedEdges:t.validatedEdges??[],weakEdges:t.weakEdges??[],certainEdges:t.certainEdges??[],uncertainEdges:t.uncertainEdges??[],maxPacketCount:t.maxPacketCount??0,maxCertainCount:t.maxCertainCount??0,localPrefix:t.localPrefix??null,hubNodes:t.hubNodes??[],gatewayNodes:t.gatewayNodes??[],edgeMap:new Map(t.edgeMapEntries??[]),neighborAffinity:new Map(t.neighborAffinityEntries??[]),fullAffinity:new Map(t.fullAffinityEntries??[]),centrality:new Map(t.centralityEntries??[]),loops:t.loops??[],loopEdgeKeys:new Set(t.loopEdgeKeyEntries??[]),txDelayRecommendations:new Map(t.txDelayRecommendationEntries??[]),pathRegistry:t.pathRegistry?Li(t.pathRegistry):Ni(),edgeBetweenness:new Map(t.edgeBetweennessEntries??[]),backboneEdges:t.backboneEdges??[],nodeMobility:new Map(t.nodeMobilityEntries??[]),mobileNodes:t.mobileNodes??[],pathHealth:t.pathHealth??[],lastHopNeighbors:t.lastHopNeighbors??[],disambiguationStats:t.disambiguationStats??{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0},discoveredNodes:t.discoveredNodes??[],viterbiStats:t.viterbiStats??{totalPaths:0,pathsWithGhosts:0,avgPathCost:0,avgPathConfidence:0,observationOverrideCount:0,tracePacketsProcessed:0,pathPacketsProcessed:0,distantEdgesDiscovered:0,duplicateGroupsFound:0,duplicatePathsUnique:0,echolocationEdgesInferred:0},nodeMetrics:new Map(t.nodeMetricsEntries??[]),communityCount:t.communityCount??0,backboneNodes:t.backboneNodes??[]};for(const t of this.listeners)try{t(this.currentTopology,e.computeTimeMs)}catch(s){}if(this.pendingRequest){const e=this.pendingRequest;this.pendingRequest=null,this.computeInternal(e)}}}computeInternal(e){if(!this.worker)return;this.isComputing=!0;const t={type:"compute",payload:e};this.worker.postMessage(t)}compute(e,t,s,n,a,r,o,i){const l={packets:e,neighbors:t,localHash:s,localLat:n,localLon:a,airtimeMs:r,zeroHopNeighbors:o,terrainGrid:i,enableTerrainAware:void 0!==i};this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest=l:this.computeInternal(l)},this.debounceMs)}subscribe(e){return this.listeners.add(e),this.currentTopology.edges.length>0&&e(this.currentTopology,0),()=>{this.listeners.delete(e)}}getTopology(){return this.currentTopology}isWorking(){return this.isComputing}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}},Ei=new class{constructor(){t(this,"worker",null),t(this,"listeners",new Set),t(this,"sparklines",new Map),t(this,"isComputing",!1),t(this,"lastComputeTimeMs",0),t(this,"pendingRequest",null),t(this,"debounceTimer",null),t(this,"debounceMs",150),this.initWorker()}initWorker(){if("undefined"!=typeof window)try{this.worker=new Worker(new URL("/assets/sparkline.worker-CmKhBAy5.js",import.meta.url),{type:"module"}),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{this.isComputing=!1,this.notifyListeners()}}catch(e){}}handleWorkerMessage(e){if(this.isComputing=!1,"error"!==e.type){if(this.sparklines=new Map(e.payload.sparklineEntries),this.lastComputeTimeMs=e.computeTimeMs,this.notifyListeners(),this.pendingRequest){const e=this.pendingRequest;this.pendingRequest=null,this.computeInternal(e.packets,e.nodeHashes)}}else this.notifyListeners()}computeInternal(e,t){if(!this.worker)return;if(0===t.length)return this.isComputing=!1,void this.notifyListeners();this.isComputing=!0,this.notifyListeners();const s={type:"compute",payload:{packets:e,nodeHashes:t}};this.worker.postMessage(s)}notifyListeners(){for(const t of this.listeners)try{t(this.sparklines,this.isComputing)}catch(e){}}compute(e,t){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest={packets:e,nodeHashes:t}:this.computeInternal(e,t)},this.debounceMs)}getSparkline(e){return this.sparklines.get(e)??[]}getAllSparklines(){return this.sparklines}hasSparkline(e){return this.sparklines.has(e)}isWorking(){return this.isComputing}getLastComputeTime(){return this.lastComputeTimeMs}subscribe(e){return this.listeners.add(e),e(this.sparklines,this.isComputing),()=>{this.listeners.delete(e)}}clear(){this.sparklines.clear(),this.notifyListeners()}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}},Pi=new class{constructor(){t(this,"worker",null),t(this,"isInitialized",!1),t(this,"statsListeners",new Set),t(this,"packetsListeners",new Set),t(this,"errorListeners",new Set),t(this,"readyResolve",null),t(this,"readyPromise",null),t(this,"unsubscribeTokenChange",null)}async init(e){if(!this.isInitialized&&"undefined"!=typeof window){this.readyPromise=new Promise(e=>{this.readyResolve=e});try{this.worker=new Worker(new URL("/assets/polling.worker-DFp1Qyu0.js",import.meta.url),{type:"module"}),this.worker.onmessage=this.handleMessage.bind(this),this.worker.onerror=e=>{};const t={type:"init",config:{apiBaseUrl:e.apiBaseUrl,authToken:e.authToken,statsIntervalMs:e.statsIntervalMs??3e3,packetsIntervalMs:e.packetsIntervalMs??3e3}};this.worker.postMessage(t),this.isInitialized=!0,this.unsubscribeTokenChange=_o(e=>{this.setAuthToken(e)}),await this.readyPromise}catch(t){throw t}}}handleMessage(e){var t;const s=e.data;switch(s.type){case"ready":null==(t=this.readyResolve)||t.call(this);break;case"stats":for(const e of this.statsListeners)try{e(s.data,s.timestamp)}catch(n){}break;case"packets":for(const e of this.packetsListeners)try{e(s.newPackets,s.totalCount,s.newestTimestamp)}catch(n){}break;case"packetsReset":for(const e of this.packetsListeners)try{e([],0,s.newestTimestamp)}catch(n){}break;case"error":for(const e of this.errorListeners)try{e(s.source,s.error)}catch(n){}}}onStats(e){return this.statsListeners.add(e),()=>this.statsListeners.delete(e)}onPackets(e){return this.packetsListeners.add(e),()=>this.packetsListeners.delete(e)}onError(e){return this.errorListeners.add(e),()=>this.errorListeners.delete(e)}setAuthToken(e){if(!this.worker)return;const t={type:"setAuth",token:e};this.worker.postMessage(t)}setLiveMode(e){if(!this.worker)return;const t={type:"setLiveMode",enabled:e};this.worker.postMessage(t)}forceRefresh(){this.worker&&this.worker.postMessage({type:"forceRefresh"})}clearCache(){this.worker&&this.worker.postMessage({type:"clearCache"})}setTimeWindow(e){if(!this.worker)return;const t={type:"setTimeWindow",hours:e};this.worker.postMessage(t)}terminate(){if(this.unsubscribeTokenChange&&(this.unsubscribeTokenChange(),this.unsubscribeTokenChange=null),this.worker){const e={type:"stop"};this.worker.postMessage(e),this.worker.terminate(),this.worker=null}this.isInitialized=!1,this.statsListeners.clear(),this.packetsListeners.clear(),this.errorListeners.clear()}isReady(){return this.isInitialized}},Di=new class{constructor(){t(this,"ws",null),t(this,"connectionState","disconnected"),t(this,"reconnectAttempts",0),t(this,"pingIntervalId",null),t(this,"lastPongTime",Date.now()),t(this,"reconnectTimeoutId",null),t(this,"packetListeners",new Set),t(this,"statsListeners",new Set),t(this,"systemStatsListeners",new Set),t(this,"packetStatsListeners",new Set),t(this,"connectionListeners",new Set),t(this,"unsubscribeTokenChange",null),t(this,"wsSupported",!0)}buildWsUrl(){const e=Ao(),t=Po(),s=new URLSearchParams;e&&s.set("token",e),t&&s.set("client_id",t);const n=s.toString()?`?${s.toString()}`:"";return`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws/packets${n}`}connect(){var e,t;if((null==(e=this.ws)?void 0:e.readyState)!==WebSocket.OPEN&&(null==(t=this.ws)?void 0:t.readyState)!==WebSocket.CONNECTING&&this.wsSupported){this.setConnectionState("connecting");try{const e=this.buildWsUrl();this.ws=new WebSocket(e),this.ws.onopen=this.handleOpen.bind(this),this.ws.onmessage=this.handleMessage.bind(this),this.ws.onerror=this.handleError.bind(this),this.ws.onclose=this.handleClose.bind(this),this.unsubscribeTokenChange||(this.unsubscribeTokenChange=_o(e=>{e&&"connected"===this.connectionState&&(this.disconnect(),this.connect())}))}catch(s){this.wsSupported=!1,this.setConnectionState("disconnected")}}}disconnect(){this.clearPingInterval(),this.clearReconnectTimeout(),this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.readyState!==WebSocket.OPEN&&this.ws.readyState!==WebSocket.CONNECTING||this.ws.close(1e3,"Client disconnect"),this.ws=null),this.setConnectionState("disconnected"),this.reconnectAttempts=0}isConnected(){var e;return(null==(e=this.ws)?void 0:e.readyState)===WebSocket.OPEN}getConnectionState(){return this.connectionState}isSupported(){return this.wsSupported}send(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return!1;try{return this.ws.send(JSON.stringify(e)),!0}catch(t){return!1}}onPacket(e){return this.packetListeners.add(e),()=>this.packetListeners.delete(e)}onStats(e){return this.statsListeners.add(e),()=>this.statsListeners.delete(e)}onSystemStats(e){return this.systemStatsListeners.add(e),()=>this.systemStatsListeners.delete(e)}onPacketStats(e){return this.packetStatsListeners.add(e),()=>this.packetStatsListeners.delete(e)}onConnectionChange(e){return this.connectionListeners.add(e),e(this.connectionState,this.reconnectAttempts),()=>this.connectionListeners.delete(e)}handleOpen(){this.setConnectionState("connected"),this.reconnectAttempts=0,this.lastPongTime=Date.now();const e=Ao();e&&this.ws&&this.ws.send(JSON.stringify({type:"auth",token:e})),this.startPingInterval()}handleMessage(e){try{const t=JSON.parse(e.data);switch(t.type){case"packet":this.notifyPacketListeners(t.data);break;case"stats":{const e=t.data;e&&"noise_floor_dbm"in e&&this.notifyStatsListeners(e),(null==e?void 0:e.packet_stats)&&this.notifyPacketStatsListeners(e.packet_stats),(null==e?void 0:e.system_stats)&&this.notifySystemStatsListeners(e.system_stats);break}case"packet_stats":{const e=t.data;this.notifyPacketStatsListeners(e);break}case"system_stats":this.notifySystemStatsListeners(t.data);break;case"ping":this.lastPongTime=Date.now(),this.send({type:"pong"});break;case"pong":this.lastPongTime=Date.now()}}catch(t){}}handleError(e){}handleClose(e){this.clearPingInterval(),1e3!==e.code?(1006===e.code&&this.reconnectAttempts,this.scheduleReconnect()):this.setConnectionState("disconnected")}setConnectionState(e){if(this.connectionState!==e){this.connectionState=e;for(const s of this.connectionListeners)try{s(e,this.reconnectAttempts)}catch(t){}}}notifyPacketListeners(e){for(const s of this.packetListeners)try{s(e)}catch(t){}}notifyStatsListeners(e){for(const s of this.statsListeners)try{s(e)}catch(t){}}notifySystemStatsListeners(e){for(const s of this.systemStatsListeners)try{s(e)}catch(t){}}notifyPacketStatsListeners(e){for(const s of this.packetStatsListeners)try{s(e)}catch(t){}}startPingInterval(){this.clearPingInterval(),this.pingIntervalId=setInterval(()=>{var e;(null==(e=this.ws)?void 0:e.readyState)===WebSocket.OPEN&&(this.send({type:"ping"}),Date.now()-this.lastPongTime>6e4&&(this.disconnect(),this.connect()))},3e4)}clearPingInterval(){this.pingIntervalId&&(clearInterval(this.pingIntervalId),this.pingIntervalId=null)}scheduleReconnect(){if(this.reconnectAttempts>=20)return this.wsSupported=!1,void this.setConnectionState("disconnected");this.setConnectionState("reconnecting");const e=Math.min(1e3*Math.pow(2,Math.min(this.reconnectAttempts,5)),3e4);this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.reconnectTimeoutId=null,this.connect()},e)}clearReconnectTimeout(){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}terminate(){this.disconnect(),this.unsubscribeTokenChange&&(this.unsubscribeTokenChange(),this.unsubscribeTokenChange=null),this.packetListeners.clear(),this.statsListeners.clear(),this.systemStatsListeners.clear(),this.packetStatsListeners.clear(),this.connectionListeners.clear()}},Ii=3e4,Fi=new class{constructor(){t(this,"staged",new Map),t(this,"recentlyConfirmed",new Map),t(this,"listeners",new Set),t(this,"pruneIntervalId",null),this.startPruneInterval()}stage(e){const t=e.packet_hash;if(!t)return;if(this.staged.has(t))return;const s=this.recentlyConfirmed.get(t);s&&Date.now()-s<Ii||(this.staged.size>=100&&this.removeOldest(),this.staged.set(t,{packet:e,stagedAt:Date.now()}),this.notifyListeners())}confirm(e){this.staged.delete(e)&&this.notifyListeners()}confirmBatch(e){let t=!1;const s=Date.now();for(const n of e)this.recentlyConfirmed.set(n,s),this.staged.delete(n)&&(t=!0);if(this.recentlyConfirmed.size>200){const e=s-Ii;for(const[t,s]of this.recentlyConfirmed)s<e&&this.recentlyConfirmed.delete(t)}t&&this.notifyListeners()}getPendingPackets(){return Array.from(this.staged.values()).sort((e,t)=>(t.packet.timestamp??0)-(e.packet.timestamp??0))}isPending(e){return!!e&&this.staged.has(e)}getPendingCount(){return this.staged.size}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}clear(){this.staged.size>0&&(this.staged.clear(),this.notifyListeners())}terminate(){this.stopPruneInterval(),this.staged.clear(),this.listeners.clear()}notifyListeners(){const e=this.getPendingPackets();for(const s of this.listeners)try{s(e)}catch(t){}}pruneExpired(){const e=Date.now();let t=!1;for(const[s,n]of this.staged)e-n.stagedAt>Ii&&(this.staged.delete(s),t=!0);t&&this.notifyListeners()}removeOldest(){let e=null,t=1/0;for(const[s,n]of this.staged)n.stagedAt<t&&(t=n.stagedAt,e=s);e&&this.staged.delete(e)}startPruneInterval(){this.pruneIntervalId||(this.pruneIntervalId=setInterval(()=>this.pruneExpired(),1e4))}stopPruneInterval(){this.pruneIntervalId&&(clearInterval(this.pruneIntervalId),this.pruneIntervalId=null)}},Ai=w(e=>({connectionState:"disconnected",isSupported:!0,reconnectAttempt:0,lastConnected:null,initialize:()=>{Di.onConnectionChange((t,s)=>{e(e=>({connectionState:t,reconnectAttempt:s??0,isSupported:Di.isSupported(),lastConnected:"connected"===t?Date.now():e.lastConnected}))}),Di.connect()}})),Ri=.05,zi=1e3,Bi="terrarium";function Oi(e,t,s){try{return e.queryTerrainElevation({lng:t,lat:s})??0}catch{return 0}}const $i=w((e,t)=>({terrainGrid:null,isLoading:!1,error:null,lastLoadedAt:null,cachedBounds:null,terrainDisambiguationEnabled:!0,loadTerrain:async(s,n)=>{const a=t();if(!(a.isLoading||(r=a.cachedBounds,o=s,r&&r.minLat<=o.minLat&&r.maxLat>=o.maxLat&&r.minLng<=o.minLng&&r.maxLng>=o.maxLng))){var r,o;e({isLoading:!0,error:null});try{n.getTerrain()||(n.getSource(Bi)||(n.addSource(Bi,{type:"raster-dem",tiles:["https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png"],encoding:"terrarium",tileSize:256}),await new Promise((e,t)=>{const s=setTimeout(()=>t(new Error("Terrain source load timeout")),1e4),a=t=>{t.sourceId===Bi&&t.isSourceLoaded&&(clearTimeout(s),n.off("sourcedata",a),e())};n.on("sourcedata",a)})),n.setTerrain({source:Bi}),await new Promise(e=>setTimeout(e,500)));const t=await async function(e,t){const{minLat:s,maxLat:n,minLng:a,maxLng:r}=t;let o=Math.ceil((r-a)/.001),i=Math.ceil((n-s)/.001);o>zi&&(o=zi),i>zi&&(i=zi);const l=(r-a)/o,c=(n-s)/i,u=Math.max(l,c),d=new Float32Array(o*i);let h=0;for(let m=0;m<i;m++){const t=s+(m+.5)*c;for(let s=0;s<o;s++){const n=a+(s+.5)*l;d[h]=Oi(e,n,t),h++,h%100==0&&await new Promise(e=>setTimeout(e,0))}}return{origin:[s,a],cellSize:u,width:o,height:i,elevations:d}}(n,s);e({terrainGrid:t,isLoading:!1,lastLoadedAt:Date.now(),cachedBounds:s})}catch(i){const t=i instanceof Error?i.message:"Unknown error loading terrain";e({isLoading:!1,error:t})}}},preloadFromNodes:async(e,s)=>{const n=function(e){const t=e.filter(e=>void 0!==e.latitude&&void 0!==e.longitude&&(0!==e.latitude||0!==e.longitude));if(0===t.length)return null;let s=1/0,n=-1/0,a=1/0,r=-1/0;for(const o of t)s=Math.min(s,o.latitude),n=Math.max(n,o.latitude),a=Math.min(a,o.longitude),r=Math.max(r,o.longitude);return{minLat:s-Ri,maxLat:n+Ri,minLng:a-Ri,maxLng:r+Ri}}(e);n&&await t().loadTerrain(n,s)},clearTerrain:()=>{e({terrainGrid:null,cachedBounds:null,lastLoadedAt:null,error:null})},setTerrainDisambiguationEnabled:t=>{e({terrainDisambiguationEnabled:t})},getTerrainGridForDisambiguation:()=>{const e=t();return e.terrainDisambiguationEnabled?e.terrainGrid:null}})),Wi="pymc-stealth-location";function Hi(e){if("undefined"!=typeof window)try{localStorage.setItem(Wi,JSON.stringify(e))}catch{}}function Ui(e){return!isNaN(e)&&e>=-90&&e<=90}function qi(e){return!isNaN(e)&&e>=-180&&e<=180}const Gi=function(){if("undefined"==typeof window)return{};try{const e=localStorage.getItem(Wi);if(!e)return{};const t=JSON.parse(e);if("number"==typeof t.latitude&&"number"==typeof t.longitude&&"boolean"==typeof t.enabled&&Ui(t.latitude)&&qi(t.longitude))return t}catch{}return{}}(),Ji=w((e,t)=>({latitude:Gi.latitude??null,longitude:Gi.longitude??null,enabled:Gi.enabled??!1,setLocation:(s,n)=>{Ui(s)&&qi(n)&&(e({latitude:s,longitude:n}),Hi({latitude:s,longitude:n,enabled:t().enabled}))},enable:()=>{const{latitude:s,longitude:n}=t();null!==s&&null!==n&&(e({enabled:!0}),Hi({latitude:s,longitude:n,enabled:!0}))},disable:()=>{e({enabled:!1});const{latitude:s,longitude:n}=t();null!==s&&null!==n&&Hi({latitude:s,longitude:n,enabled:!1})},clear:()=>{e({latitude:null,longitude:null,enabled:!1}),function(){if("undefined"!=typeof window)try{localStorage.removeItem(Wi)}catch{}}()},getEffectiveLocation:()=>{const{latitude:e,longitude:s,enabled:n}=t();return n&&null!==e&&null!==s?{latitude:e,longitude:s}:null},isActive:()=>{const{latitude:e,longitude:s,enabled:n}=t();return n&&null!==e&&null!==s}}));function Yi(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2,4).toUpperCase():e.slice(0,2).toUpperCase()}function Vi(e,t){let s=e.forwarded_path??e.original_path;if("string"==typeof s)try{s=JSON.parse(s)}catch{return null}if(!s||!Array.isArray(s)||0===s.length)return null;const n=s.map(e=>String(e).toUpperCase()),a=t?Yi(t):null,r=n[n.length-1],o=null!==a&&r===a,i=o?n.slice(0,-1):[...n];return{effective:i,original:n,hadLocal:o,effectiveLength:i.length}}function Ki(e,t){const s=e.toUpperCase();return t.startsWith("0x")||t.startsWith("0X")?t.slice(2).toUpperCase().startsWith(s):t.toUpperCase().startsWith(s)}const Xi=[{label:"20m",minutes:20,buckets:80},{label:"1h",minutes:60,buckets:80},{label:"3h",minutes:180,buckets:80},{label:"12h",minutes:720,buckets:80},{label:"24h",minutes:1440,buckets:80},{label:"3d",minutes:4320,buckets:80},{label:"7d",minutes:10080,buckets:80},{label:"14d",minutes:20160,buckets:80}],Qi=[{label:"1h",hours:1},{label:"3h",hours:3},{label:"12h",hours:12},{label:"24h",hours:24},{label:"3d",hours:72},{label:"7d",hours:168},{label:"14d",hours:336}];function Zi(e,t=12){return Math.max(t,Math.round(e/15))}const el={hero:Zi(1200),statsCard:Zi(380)};function tl(e){switch(e){case 1:return 3600;case 3:case 12:return 5400;case 24:return 8640;case 72:case 168:case 336:return 720;default:{const t=3600*e,s=Math.round(t/10);return Math.min(Math.max(360,s),720)}}}const sl="'JetBrains Mono', 'SF Mono', Monaco, monospace",nl={stats:3e3,packets:3e3,charts:3e4,logs:2e3,system:3e3},al={DEBUG:"text-sys-brown",INFO:"text-sys-cyan",WARNING:"text-sys-amber",ERROR:"text-sys-red",CRITICAL:"text-sys-pink"};function rl(e){return al[e]??"text-text-muted border-border-subtle"}const ol="pymc-resource-history",il="pymc-resource-last-fetch",ll="pymc-hidden-contacts",cl="pymc-quick-neighbors",ul="pymc-local-hash",dl="pymc-global-time-range";let hl=null,ml=null;function fl(e,t){const s=t-1e3*e;return s<=6048e5?"active":s<=12096e5?"stale":"expired"}function gl(e){return 4===(e.type??e.payload_type)&&!0!==e.transmitted&&function(e){const t=function(e){if(Array.isArray(e))return e;if("string"==typeof e&&e.startsWith("["))try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}(e.original_path),s=e.route??e.route_type;return 2===(n=s)||3===n?0===t.length:Tr(s)?t.length<=1:0===t.length;var n}(e)}function pl(e,t,s,n){if(!e)return null;let a=e;if(e.length<=4){const n=e.replace(/^0x/i,"").toUpperCase();if(n===t)return null;const r=s.get(n);if(!r)return null;a=r}return n.has(a)?Yi(a)===t?null:a:null}function bl(e,t){e.count++,void 0!==t.rssi&&null!==t.rssi&&(e.rssiSum+=t.rssi,e.rssiCount++),void 0!==t.snr&&null!==t.snr&&(e.snrSum+=t.snr,e.snrCount++);const s=t.timestamp??0;s>e.lastSeen&&(e.lastSeen=s)}function yl(e){return{hash:e,count:0,rssiSum:0,rssiCount:0,snrSum:0,snrCount:0,lastSeen:0}}function xl(e,t){const s=fl(e.lastSeen,t);return"expired"===s?null:{hash:e.hash,prefix:Yi(e.hash),count:e.count,avgRssi:e.rssiCount>0?e.rssiSum/e.rssiCount:null,avgSnr:e.snrCount>0?e.snrSum/e.snrCount:null,lastSeen:e.lastSeen,status:s}}function wl(){if("undefined"==typeof window)return[];try{const e=localStorage.getItem(cl);if(e)return JSON.parse(e)}catch{}return[]}function vl(e){"undefined"!=typeof window&&(ml&&clearTimeout(ml),ml=setTimeout(()=>{try{localStorage.setItem(cl,JSON.stringify(e))}catch{}ml=null},1e3))}function kl(){if("undefined"!=typeof window)try{const e=localStorage.getItem(ul);if(e)return e}catch{}}function Sl(e){if("undefined"!=typeof window)try{localStorage.setItem(ul,e)}catch{}}function Cl(){if("undefined"==typeof window)return[];try{const e=localStorage.getItem(ol);if(e)return JSON.parse(e)}catch{}return[]}function jl(){if("undefined"==typeof window)return new Set;try{const e=localStorage.getItem(ll);if(e)return new Set(JSON.parse(e))}catch{}return new Set}function Tl(){if("undefined"==typeof window)return 0;try{const e=localStorage.getItem(il);if(e)return parseInt(e,10)||0}catch{}return 0}function Ml(){if("undefined"==typeof window)return 4;try{const e=localStorage.getItem(dl);if(e){const t=parseInt(e,10);if(!isNaN(t)&&t>=0&&t<=7)return t}}catch{}return 4}const Ll=w((e,t)=>({stats:null,statsLoading:!1,statsError:null,packets:[],packetsLoading:!1,packetsError:null,lastPacketTimestamp:0,logs:[],logsLoading:!1,liveMode:!0,flashReceived:0,flashAdvert:0,pendingAdvertLocalHash:null,pendingAdvertTimestamp:null,resourceHistory:Cl(),lastResourceFetch:Tl(),hiddenContacts:jl(),quickNeighbors:wl(),cachedLocalHash:kl(),initialized:!1,packetCacheState:Mi.getState(),mutationsInFlight:new Set,globalTimeRangeIndex:Ml(),initializeApp:async()=>{const{initialized:s}=t();if(!s){e({initialized:!0,statsLoading:!0,packetsLoading:!0}),Mi.subscribe(t=>{e({packetCacheState:t})});try{const{hiddenContacts:s}=t(),n=await oi(),a=n.neighbors??{},r=Date.now(),o=[];for(const[e,t]of Object.entries(a)){if(s.has(e))continue;if(!t.zero_hop)continue;const n=fl(t.last_seen??0,r);"expired"!==n&&o.push({hash:e,prefix:Yi(e),count:t.advert_count??0,avgRssi:t.rssi??null,avgSnr:t.snr??null,lastSeen:t.last_seen??0,status:n})}o.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const i=n.local_hash;e({stats:n,statsLoading:!1,quickNeighbors:o,cachedLocalHash:i}),vl(o),i&&Sl(i);const l=()=>{const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>{const s=t.timestamp??0;return s>e?s:e},0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},c=await Mi.initialLoad(l);if(c.length>0){const s=c.reduce((e,t)=>{const s=t.timestamp??0;return s>e?s:e},0);e({packets:[...c],packetsLoading:!1,lastPacketTimestamp:s}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}else e({packetsLoading:!1})}catch(n){e({statsError:n instanceof Error?n.message:"Failed to initialize",statsLoading:!1,packetsLoading:!1})}Ai.getState().initialize(),Di.onPacket(s=>{const{lastPacketTimestamp:n,mutationsInFlight:a}=t();if(a.size>0)return;Fi.stage(s);const r=s.timestamp??0;r>n&&e({flashReceived:t().flashReceived+1,lastPacketTimestamp:r})}),Di.onStats(s=>{const{mutationsInFlight:n,hiddenContacts:a}=t();if(n.size>0)return;const r=s.neighbors??{},o=Date.now(),i=[];for(const[e,t]of Object.entries(r)){if(a.has(e))continue;if(!t.zero_hop)continue;const s=fl(t.last_seen??0,o);"expired"!==s&&i.push({hash:e,prefix:Yi(e),count:t.advert_count??0,avgRssi:t.rssi??null,avgSnr:t.snr??null,lastSeen:t.last_seen??0,status:s})}i.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const l=s.local_hash;e({stats:s,statsLoading:!1,statsError:null,quickNeighbors:i,cachedLocalHash:l}),vl(i),l&&Sl(l)}),Di.onPacketStats(s=>{const{stats:n,mutationsInFlight:a}=t();if(!n||a.size>0)return;const r={...n,rx_count:s.rx_count??n.rx_count,tx_count:s.tx_count??n.tx_count,forwarded_count:s.forwarded_count??n.forwarded_count,dropped_count:s.dropped_count??n.dropped_count};e({stats:r})});try{await Pi.init({apiBaseUrl:"",authToken:Ao()??void 0,statsIntervalMs:nl.stats,packetsIntervalMs:nl.packets}),Pi.onStats((s,n)=>{const{mutationsInFlight:a,hiddenContacts:r}=t();if(a.size>0)return;const o=s.neighbors??{},i=Date.now(),l=[];for(const[e,t]of Object.entries(o)){if(r.has(e))continue;if(!t.zero_hop)continue;const s=fl(t.last_seen??0,i);"expired"!==s&&l.push({hash:e,prefix:Yi(e),count:t.advert_count??0,avgRssi:t.rssi??null,avgSnr:t.snr??null,lastSeen:t.last_seen??0,status:s})}l.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const c=s.local_hash;e({stats:s,statsLoading:!1,statsError:null,quickNeighbors:l,cachedLocalHash:c}),vl(l),c&&Sl(c)}),Pi.onPackets((s,n,a)=>{if(0===s.length)return;const{lastPacketTimestamp:r}=t(),o=s.map(e=>e.packet_hash).filter(e=>!!e);Fi.confirmBatch(o),Mi.mergePacketsDirectly(s);const i=a>r;i&&ui();const l=Mi.getPackets();e({packets:l,packetsLoading:!1,packetsError:null,lastPacketTimestamp:a}),i&&t().triggerTopologyCompute()}),Pi.onError((t,s)=>{e("stats"===t?{statsError:s}:{packetsError:s})}),"undefined"!=typeof document&&document.addEventListener("visibilitychange",()=>{document.hidden||Pi.forceRefresh()})}catch(n){!function(e){setInterval(()=>{e().fetchStats()},nl.stats),setInterval(()=>{e().liveMode&&!Mi.isHeavyLoadInProgress()&&e().fetchPackets()},nl.packets)}(t)}}},prefetchForRoute:e=>{switch(e){case"/logs":ii().catch(()=>{});break;case"/system":hi().catch(()=>{});break;case"/statistics":(async function(e=24){return ti(`/api/packet_type_graph_data?hours=${e}`)})(3).catch(()=>{}),li(3).catch(()=>{});break;case"/settings":(async function(){return ti("/api/radio_presets")})().catch(()=>{})}},fetchStats:async s=>{const{stats:n,mutationsInFlight:a,hiddenContacts:r}=t();if(!(a.size>0)||(null==s?void 0:s.force)){n||e({statsLoading:!0}),e({statsError:null});try{const t=await oi(),s=t.neighbors??{},n=Date.now(),a=[];for(const[e,i]of Object.entries(s)){if(r.has(e))continue;if(!i.zero_hop)continue;const t=fl(i.last_seen??0,n);"expired"!==t&&a.push({hash:e,prefix:Yi(e),count:i.advert_count??0,avgRssi:i.rssi??null,avgSnr:i.snr??null,lastSeen:i.last_seen??0,status:t})}a.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const o=t.local_hash;e({stats:t,statsLoading:!1,quickNeighbors:a,cachedLocalHash:o}),vl(a),o&&Sl(o)}catch(o){e({statsError:o instanceof Error?o.message:"Failed to fetch stats",statsLoading:!1})}}},fetchPackets:async s=>{const{packets:n,lastPacketTimestamp:a}=t();0===n.length&&e({packetsLoading:!0}),e({packetsError:null});try{const s=await Mi.poll(),r=s.length>0?s.reduce((e,t)=>Math.max(e,t.timestamp??0),0):0,o=r>a&&a>0,i=s.length!==n.length||o;o&&(e({flashReceived:t().flashReceived+1}),ui()),e(i?{packets:s,packetsLoading:!1,lastPacketTimestamp:r||a}:{packetsLoading:!1}),o&&t().triggerTopologyCompute()}catch(r){e({packetsError:r instanceof Error?r.message:"Failed to fetch packets",packetsLoading:!1})}},fetchLogs:async()=>{const{logs:s}=t();0===s.length&&e({logsLoading:!0});try{const t=await ii();e({logs:t.logs,logsLoading:!1})}catch{e({logsLoading:!1})}},setLiveMode:t=>{e({liveMode:t}),Pi.isReady()&&Pi.setLiveMode(t)},setMode:async s=>{const n="setMode",{mutationsInFlight:a}=t(),r=new Set(a);r.add(n),e({mutationsInFlight:r});try{if(!(await pi(s)).success)throw new Error("Backend returned unsuccessful response");await t().fetchStats({force:!0})}catch(o){const{mutationsInFlight:s}=t(),a=new Set(s);throw a.delete(n),e({mutationsInFlight:a}),o}},clearModeMutation:()=>{const{mutationsInFlight:s}=t(),n=new Set(s);n.delete("setMode"),e({mutationsInFlight:n})},setDutyCycle:async s=>{const n="setDutyCycle",{mutationsInFlight:a}=t(),r=new Set(a);r.add(n),e({mutationsInFlight:r});try{if(!(await bi(s)).success)throw new Error("Backend returned unsuccessful response");await t().fetchStats({force:!0})}finally{const{mutationsInFlight:s}=t(),a=new Set(s);a.delete(n),e({mutationsInFlight:a})}},setDutyCycleConfig:async s=>{var n;const a="setDutyCycleConfig",{mutationsInFlight:r}=t(),o=new Set(r);o.add(a),e({mutationsInFlight:o});try{const e=await async function(e){return ti("/api/update_duty_cycle_config",{method:"POST",body:JSON.stringify(e)})}(s);if(!e.success&&!(null==(n=e.data)?void 0:n.persisted))throw new Error("Backend returned unsuccessful response");await t().fetchStats({force:!0})}catch(i){const{mutationsInFlight:s}=t(),n=new Set(s);throw n.delete(a),e({mutationsInFlight:n}),i}},clearDutyCycleMutation:()=>{const{mutationsInFlight:s}=t(),n=new Set(s);n.delete("setDutyCycleConfig"),e({mutationsInFlight:n})},startMutation:s=>{const{mutationsInFlight:n}=t(),a=new Set(n);a.add(s),e({mutationsInFlight:a})},clearMutation:s=>{const{mutationsInFlight:n}=t(),a=new Set(n);a.delete(s),e({mutationsInFlight:a})},sendAdvert:async()=>{try{const s=await gi();return s.success?(e({flashAdvert:t().flashAdvert+1}),{success:!0}):{success:!1,error:s.error||"Failed to send advert"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},triggerFlashReceived:()=>{e({flashReceived:t().flashReceived+1})},triggerFlashAdvert:()=>{e({flashAdvert:t().flashAdvert+1})},addResourceDataPoint:(s,n,a)=>{const r=Date.now(),{lastResourceFetch:o,resourceHistory:i}=t();if(r-o<1e3)return;const l=[...i,{timestamp:r,time:new Date(r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),cpu:s,memory:n}],c=l.length>a?l.slice(-a):l;var u,d;e({resourceHistory:c,lastResourceFetch:r}),u=c,d=r,"undefined"!=typeof window&&(hl&&clearTimeout(hl),hl=setTimeout(()=>{try{localStorage.setItem(ol,JSON.stringify(u)),localStorage.setItem(il,d.toString())}catch{}hl=null},1e3))},hideContact:s=>{const{hiddenContacts:n}=t(),a=new Set(n);a.add(s),e({hiddenContacts:a}),function(e){if("undefined"!=typeof window)try{localStorage.setItem(ll,JSON.stringify([...e]))}catch{}}(a)},clearPacketCache:()=>{Mi.clear(),e({packets:[],lastPacketTimestamp:0}),Mi.quickLoad().then(s=>{if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:s,lastPacketTimestamp:n}),t().triggerTopologyCompute()}})},triggerTopologyCompute:()=>{var e,s,n,a;const{packets:r,stats:o,hiddenContacts:i}=t();if(0===r.length||!o)return;const l=o.neighbors??{},c=Object.fromEntries(Object.entries(l).filter(([e])=>!i.has(e))),u=o.local_hash;let d=null==(s=null==(e=o.config)?void 0:e.repeater)?void 0:s.latitude,h=null==(a=null==(n=o.config)?void 0:n.repeater)?void 0:a.longitude;if(!d||!h||0===d&&0===h){const e=Ji.getState().getEffectiveLocation();e&&(d=e.latitude,h=e.longitude)}const m=[];for(const[t,g]of Object.entries(c))g.zero_hop&&m.push({hash:t,advertCount:g.advert_count??1,avgRssi:g.rssi??null,avgSnr:g.snr??null,lastSeen:g.last_seen??0,latitude:g.latitude,longitude:g.longitude});const f=$i.getState().getTerrainGridForDisambiguation();_i.compute(r,c,u,d,h,void 0,m,f??void 0)},triggerDeepAnalysis:async()=>{await Mi.forceDeepLoad();const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:s,lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},updateQuickNeighbors:()=>{const{packets:s,stats:n,hiddenContacts:a}=t();if(0===s.length||!n)return;const r=n.neighbors??{},o=function(e,t,s){if(!s||0===e.length||0===Object.keys(t).length)return[];const n=Date.now(),a=Yi(s),r=new Set(Object.keys(t)),o=function(e){var t,s;const n=new Map;for(const a of Object.keys(e)){const r=Yi(a),o=n.get(r);if(o){const i=null==(t=e[o])?void 0:t.zero_hop;(null==(s=e[a])?void 0:s.zero_hop)&&!i&&n.set(r,a)}else n.set(r,a)}return n}(t),i=new Map;for(const c of e){if(!gl(c))continue;const e=pl(c.src_hash,a,o,r);if(!e)continue;let t=i.get(e);t||(t=yl(e),i.set(e,t)),bl(t,c)}for(const[c,u]of Object.entries(t))Yi(c)!==a&&u.zero_hop&&!i.has(c)&&i.set(c,{hash:c,count:u.advert_count??0,rssiSum:u.rssi??0,rssiCount:void 0!==u.rssi?1:0,snrSum:u.snr??0,snrCount:void 0!==u.snr?1:0,lastSeen:u.last_seen??0});const l=[];for(const c of i.values()){const e=xl(c,n);e&&l.push(e)}return l.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen),l}(s,Object.fromEntries(Object.entries(r).filter(([e])=>!a.has(e))),n.local_hash),i=t().quickNeighbors;(o.length!==i.length||o.some((e,t)=>{var s,n;return e.hash!==(null==(s=i[t])?void 0:s.hash)||e.count!==(null==(n=i[t])?void 0:n.count)}))&&(e({quickNeighbors:o}),vl(o))},triggerSparklineCompute:()=>{const{packets:e,stats:s,hiddenContacts:n}=t();if(0===e.length||!s)return;const a=s.neighbors??{},r=Object.keys(a).filter(e=>!n.has(e));0!==r.length&&Ei.compute(e,r)},requestSevenDayData:async()=>{await Mi.loadSevenDays(()=>{const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}});const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},requestThreeDayData:async()=>{await Mi.loadThreeDays(()=>{const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}});const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},requestFourteenDayData:async()=>{await Mi.loadFourteenDays(()=>{const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}});const s=Mi.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},setGlobalTimeRange:s=>{e({globalTimeRangeIndex:s}),function(e){if("undefined"!=typeof window)try{localStorage.setItem(dl,e.toString())}catch{}}(s);const n={0:1,1:1,2:3,3:12,4:24,5:72,6:168,7:336}[s]??24;Pi.setTimeWindow(n);const{packetCacheState:a,requestThreeDayData:r,requestSevenDayData:o,requestFourteenDayData:i,triggerTopologyCompute:l,triggerSparklineCompute:c}=t();let u=!1;5!==s||a.threeDayLoadComplete||a.isBackgroundLoading||(r(),u=!0),6!==s||a.sevenDayLoadComplete||a.isBackgroundLoading||(o(),u=!0),7!==s||a.fourteenDayLoadComplete||a.isBackgroundLoading||(i(),u=!0),!u&&s>=5&&(l(),c())}})),Nl=Ll,_l=()=>Ll(e=>e.stats),El=()=>Ll(e=>e.statsError),Pl=()=>Ll(e=>e.packets),Dl=()=>Ll(e=>e.packetsLoading),Il=()=>Ll(e=>e.logs),Fl=()=>Ll(e=>e.logsLoading),Al=()=>Ll(e=>e.liveMode),Rl=()=>Ll(e=>e.fetchLogs),zl=()=>Ll(e=>e.setLiveMode),Bl=()=>Ll(e=>e.resourceHistory),Ol=()=>Ll(e=>e.addResourceDataPoint),$l=()=>Ll(e=>e.hiddenContacts),Wl=()=>Ll(e=>e.hideContact),Hl=()=>Ll(e=>e.packetCacheState),Ul=()=>Ll(e=>e.triggerDeepAnalysis),ql=()=>Ll(e=>e.quickNeighbors),Gl=()=>Ll(e=>e.cachedLocalHash),Jl=()=>Ll(e=>e.lastPacketTimestamp),Yl=()=>Ll(e=>e.globalTimeRangeIndex),Vl=()=>Ll(e=>e.setGlobalTimeRange),Kl=()=>Ll(e=>null!==e.stats&&e.packetCacheState.backgroundLoadComplete);function Xl(){const e=Ll(e=>{var t,s,n;return null==(n=null==(s=null==(t=e.stats)?void 0:t.config)?void 0:s.repeater)?void 0:n.latitude}),t=Ll(e=>{var t,s,n;return null==(n=null==(s=null==(t=e.stats)?void 0:t.config)?void 0:s.repeater)?void 0:n.longitude}),s=Ll(e=>{var t,s,n;return(null==(s=null==(t=e.stats)?void 0:t.config)?void 0:s.node_name)||(null==(n=e.stats)?void 0:n.node_name)||"Local Node"}),n=Ji(e=>e.latitude),a=Ji(e=>e.longitude),r=Ji(e=>e.enabled);return e&&t&&(0!==e||0!==t)?{latitude:e,longitude:t,name:s,isStealth:!1}:r&&null!==n&&null!==a?{latitude:n,longitude:a,name:s,isStealth:!0}:null}const Ql={rx:{p3:"color(display-p3 0.2 1 0.4)",fallback:"#00FF66"},tx:{p3:"color(display-p3 1 0.9 0.2)",fallback:"#FFDD00"}};function Zl({showLabel:e=!1,className:t}){var a;const r=Ll(e=>e.flashReceived),o=Ll(e=>e.flashAdvert),i=Ai(e=>"connected"===e.connectionState),[l,c]=s.useState("idle"),u=s.useRef(0),d=s.useRef(0);s.useEffect(()=>{if(r<=0)return;const e=Date.now();if(e-u.current<50)return;u.current=e,c("rx");const t=setTimeout(()=>c("idle"),100);return()=>clearTimeout(t)},[r]),s.useEffect(()=>{if(o<=0)return;const e=Date.now();if(e-d.current<50)return;d.current=e,c("tx");const t=setTimeout(()=>c("idle"),100);return()=>clearTimeout(t)},[o]);const h="rx"===l?Ql.rx:"tx"===l?Ql.tx:null;return n.jsxs("span",{className:J("inline-flex items-center gap-2",t),title:i?"Real-time (WebSocket)":"Database polling",children:[n.jsx("span",{className:"inline-flex rounded-full w-1.5 h-1.5",style:h?{backgroundColor:h.fallback,...(null==(a=CSS.supports)?void 0:a.call(CSS,"color","color(display-p3 1 1 1)"))&&{backgroundColor:h.p3}}:{backgroundColor:"var(--livedot-idle)"}}),e&&n.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:i?"Live":"DB"})]})}function ec({borderRadius:e}){return n.jsx(c.div,{initial:{opacity:0},animate:{opacity:.8,backgroundPosition:["200% 0%","-200% 0%"]},exit:{opacity:0},transition:{opacity:{duration:.2},backgroundPosition:{duration:2,ease:"easeInOut",repeat:1/0}},style:{position:"absolute",inset:0,zIndex:1,pointerEvents:"none",borderRadius:e,padding:2,background:"linear-gradient(\n          90deg,\n          transparent 0%,\n          transparent 25%,\n          var(--accent-primary) 50%,\n          transparent 75%,\n          transparent 100%\n        )",backgroundSize:"200% 100%",mask:"\n          linear-gradient(#fff 0 0) content-box,\n          linear-gradient(#fff 0 0)\n        ",maskComposite:"exclude",WebkitMaskComposite:"xor"}})}function tc({children:e,isLoading:t=!0,className:s,borderRadius:a=12}){return n.jsxs("div",{className:J("relative overflow-hidden",s),style:{borderRadius:a},children:[n.jsx(i,{children:t&&n.jsx(ec,{borderRadius:a})}),n.jsx("div",{className:"relative z-10",children:e})]})}function sc({className:e}){return n.jsx("div",{className:J("relative w-10 h-1 rounded-sm overflow-hidden","bg-bg-elevated",e),children:n.jsx(c.div,{animate:{backgroundPosition:["200% 0%","-200% 0%"]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0},className:"absolute inset-0",style:{background:"linear-gradient(\n            90deg,\n            transparent 0%,\n            var(--accent-primary) 50%,\n            transparent 100%\n          )",backgroundSize:"200% 100%"}})})}const nc=w(e=>({sparklines:new Map,isComputing:!1,lastUpdated:0,nodeCount:0,setSparklines:t=>e({sparklines:t,lastUpdated:Date.now(),nodeCount:t.size,isComputing:!1}),setComputing:t=>e({isComputing:t})}));"undefined"!=typeof window&&setTimeout(()=>{Ei.subscribe((e,t)=>{const s=nc.getState();t&&!s.isComputing?s.setComputing(!0):!t&&e.size>0?s.setSparklines(e):!t&&s.isComputing&&s.setComputing(!1)})},0);const ac=()=>nc(e=>e.isComputing),rc=[],oc=new Map;function ic(e){return nc(t=>{const s=t.sparklines.get(e);if(!s||0===s.length)return rc;const n=oc.get(e);return n===s?n:(oc.set(e,s),s)})}const lc=w(e=>({topology:{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],gatewayNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:Ni(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0},discoveredNodes:[],viterbiStats:{totalPaths:0,pathsWithGhosts:0,avgPathCost:0,avgPathConfidence:0,observationOverrideCount:0,tracePacketsProcessed:0,pathPacketsProcessed:0,distantEdgesDiscovered:0,duplicateGroupsFound:0,duplicatePathsUnique:0,echolocationEdgesInferred:0},nodeMetrics:new Map,communityCount:0,backboneNodes:[]},isComputing:!1,lastComputeTimeMs:0,lastUpdated:0,setTopology:(t,s)=>e({topology:t,lastComputeTimeMs:s,lastUpdated:Date.now(),isComputing:!1}),setComputing:t=>e({isComputing:t})}));"undefined"!=typeof window&&_i.subscribe((e,t)=>{lc.getState().setTopology(e,t)});const cc=()=>lc(e=>e.topology),uc=()=>lc(e=>e.topology.hubNodes),dc=()=>lc(e=>e.topology.centrality),hc=()=>lc(e=>e.topology.fullAffinity);let mc=null,fc=null,gc=null,pc=null;const bc=()=>lc(e=>(e.topology.hubNodes!==fc&&(fc=e.topology.hubNodes,mc=new Set(e.topology.hubNodes)),mc)),yc=()=>lc(e=>e.topology.pathHealth),xc=()=>lc(e=>e.topology.disambiguationStats),wc=()=>lc(e=>e.topology.disambiguationStats.highCollisionPrefixes),vc=()=>lc(e=>e.topology.disambiguationStats.totalPrefixes>0),kc=()=>lc(e=>e.topology.discoveredNodes),Sc=()=>lc(e=>e.topology.viterbiStats),Cc=()=>lc(e=>(e.topology.discoveredNodes!==pc&&(pc=e.topology.discoveredNodes,gc=e.topology.discoveredNodes.filter(e=>e.isLikelyReal)),gc)),jc=()=>lc(e=>e.topology.nodeMetrics);let Tc=null,Mc=null;const Lc=()=>lc(e=>{if(e.topology.nodeMetrics!==Mc){Mc=e.topology.nodeMetrics,Tc={local:0,hub:0,gateway:0,backbone:0,neighbor:0,mobile:0,ghost:0,standard:0};for(const t of e.topology.nodeMetrics.values())Tc[t.nodeClass]++}return Tc});function Nc(e){if(e<60)return`${Math.floor(e)}s`;const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),a=[];return t>0&&a.push(`${t}d`),s>0&&a.push(`${s}h`),(n>0||0===a.length)&&a.push(`${n}m`),a.join(" ")}function _c(e){const t=Date.now()/1e3-e;return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function Ec(e){return new Date(1e3*e).toLocaleString()}function Pc(e){const t=new Date(1e3*e);return`${t.toLocaleString("en-US",{month:"short"})} ${t.getDate()}, ${t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}`}function Dc(e){return new Date(1e3*e).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Ic(e){return`${(e/1e6).toFixed(3)} MHz`}function Fc(e){return`${(e/1e3).toFixed(1)} kHz`}function Ac(e){const t=e>1e12?e:1e3*e,s=Date.now(),n=Math.abs(s-t),a=Math.floor(n/1e3),r=Math.floor(a/60),o=Math.floor(r/60),i=Math.floor(o/24);return i>0?`${i} day${1!==i?"s":""}`:o>0?`${o} hour${1!==o?"s":""}`:r>0?`${r} minute${1!==r?"s":""}`:`${a} second${1!==a?"s":""}`}function Rc(e){e<0&&(e=0);const t=Math.floor(e/1e3),s=Math.floor(t/60),n=Math.floor(s/60);if(n>0){const e=s%60;return e>0?`${n}h ${e}m`:`${n}h`}if(s>0){const e=t%60;return e>0?`${s}m ${e}s`:`${s}m`}if(t>0){const s=e%1e3;return s>0?`${t}.${Math.floor(s/100)}s`:`${t}s`}return`${e}ms`}const zc=[{name:"Dashboard",to:"/",icon:k},{name:"Contacts",to:"/contacts",icon:S},{name:"Packets",to:"/packets",icon:C},{name:"Statistics",to:"/statistics",icon:j},{name:"MeshGraph",to:"/meshgraph",icon:T},{name:"System",to:"/system",icon:M},{name:"Logs",to:"/logs",icon:L},{name:"Terminal",to:"/terminal",icon:N},{name:"Configuration",to:"/configuration",icon:_}],Bc="pymc-controls-expanded",Oc=()=>{if("undefined"==typeof window)return!0;const e=localStorage.getItem(Bc);return null===e||"true"===e};function $c(){var e,t,a,r,o,i;const{pathname:l}=v(),{stats:c,setMode:u,setDutyCycle:d,sendAdvert:h}=Nl(),m=Uo(),f=Ll(e=>e.prefetchForRoute),g=Hl(),p=Ll(e=>e.packetCacheState.dataTier),b=ac(),y=lc(e=>e.isComputing),x=Cc();let w=null;try{w=function(){const e=s.useContext(ho);if(!e)throw new Error("useSidebar must be used within a SidebarLayout");return e}()}catch{}const[k,S]=s.useState(!1),[C,j]=s.useState("idle"),[T,L]=s.useState(null),N=s.useRef(null),_=s.useCallback(e=>{e!==l&&(N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{f(e)},100))},[l,f]),B=s.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null)},[]);s.useEffect(()=>{const e=new MutationObserver(()=>{const e=document.querySelector("[data-controls-disclosure]");if(e){const t="true"===e.getAttribute("aria-expanded");localStorage.setItem(Bc,String(t))}}),t=document.querySelector("[data-controls-disclosure]");return t&&e.observe(t,{attributes:!0,attributeFilter:["aria-expanded"]}),()=>e.disconnect()},[]);const O=null==c?void 0:c.noise_floor_dbm,$=(null==(t=null==(e=null==c?void 0:c.config)?void 0:e.repeater)?void 0:t.mode)??"forward",W=(null==(r=null==(a=null==c?void 0:c.config)?void 0:a.duty_cycle)?void 0:r.enforcement_enabled)??!1,H=(null==(i=null==(o=null==c?void 0:c.config)?void 0:o.duty_cycle)?void 0:i.max_airtime_percent)??10,U=g.isLoading||g.isBackgroundLoading||g.isTopologyLoading,q=U||b||y,G=g.loadProgress,Y=()=>{null==w||w.close()};return n.jsxs(no,{children:[n.jsxs(ao,{className:"px-5 py-6",children:[n.jsx("h1",{className:"sr-only",children:"pyMC Console"}),n.jsx(jo,{responsive:!0,className:"block"}),n.jsxs("p",{className:"type-data-xs text-text-muted mt-1.5",children:["v",So]})]}),n.jsxs(ro,{className:"py-4",children:[n.jsx(io,{children:zc.map(e=>{const t=l===e.to;return n.jsxs(lo,{href:e.to,current:t,onClick:Y,onMouseEnter:()=>_(e.to),onMouseLeave:B,children:[n.jsx(e.icon,{}),n.jsx(co,{children:e.name}),"/contacts"===e.to&&x.length>0&&n.jsxs(uo,{variant:"accent",children:[n.jsx(E,{className:"w-3 h-3"}),n.jsx("span",{children:x.length})]}),"/meshgraph"===e.to&&n.jsx(uo,{variant:"default",children:"Beta"})]},e.name)})}),q&&n.jsx("div",{className:"px-0 py-3",children:n.jsx(tc,{isLoading:U,borderRadius:12,children:n.jsxs("div",{className:"bg-glass-surface/50 rounded-xl p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-1 py-0.5",children:[n.jsxs("div",{className:"relative flex h-2 w-2",children:[n.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-primary opacity-75"}),n.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-primary"})]}),n.jsx("span",{className:"type-data-xs text-text-muted flex-1 truncate",children:g.isLoading&&G?"Loading 24h history...":g.isBackgroundLoading&&G?g.statusMessage||`Loading ${p} history...`:g.isTopologyLoading?"Loading topology data...":b?"Computing sparklines":y?"Building topology":"Analyzing database"}),null!==(null==G?void 0:G.percent)&&void 0!==(null==G?void 0:G.percent)&&U&&n.jsxs("span",{className:"type-data-xs text-text-muted tabular-nums",children:[G.percent,"%"]})]}),n.jsx("div",{className:"mt-1.5 h-1 bg-subtle-fill rounded-full overflow-hidden",children:null!==(null==G?void 0:G.percent)&&void 0!==(null==G?void 0:G.percent)&&U?n.jsx("div",{className:"h-full bg-accent-primary/60 rounded-full transition-all duration-300 ease-out",style:{width:`${G.percent}%`}}):n.jsx("div",{className:"h-full bg-accent-primary/40 rounded-full w-full"})}),!U&&n.jsxs("div",{className:"mt-1.5 flex items-center gap-1.5 px-1",children:[n.jsx("span",{className:"type-micro text-text-muted",children:"Data:"}),n.jsx("span",{className:"type-data-xs text-accent-primary",children:(e=>{switch(e){case"24h":return"24 hours";case"3d":return"3 days";case"7d":return"7 days";case"14d":return"14 days";default:return e}})(p)})]})]})})}),n.jsx("div",{className:"flex-1"}),n.jsx(ko,{label:"Controls",icon:n.jsx(F,{className:"w-5 h-5 text-accent-primary"}),defaultOpen:Oc(),direction:"up",dataId:"controls",children:n.jsxs("div",{className:"flex flex-col gap-2 px-1",children:[n.jsx(Wr,{color:"success"===C?"success":"error"===C?"danger":"primary",onClick:async()=>{S(!0),j("idle"),L(null);const e=await h();S(!1),e.success?(j("success"),setTimeout(()=>j("idle"),1500)):(j("error"),L(e.error||"Failed to send"),setTimeout(()=>{j("idle"),L(null)},3e3))},disabled:k,className:"w-full justify-center",children:k?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{"data-slot":"icon",className:"animate-spin",viewBox:"0 0 24 24",fill:"none",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sending..."]}):"success"===C?n.jsxs(n.Fragment,{children:[n.jsx("svg",{"data-slot":"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:n.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Sent!"]}):"error"===C?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{"data-slot":"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Failed"]}):n.jsxs(n.Fragment,{children:[n.jsx(P,{"data-slot":"icon"}),"Send Advert"]})}),T&&n.jsx("p",{className:"text-accent-danger text-xs text-center",children:T}),n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-xs text-text-muted",children:"Repeat"}),n.jsx("span",{className:J("text-xs font-medium","forward"===$?"text-accent-success":"text-accent-secondary"),children:"forward"===$?"ON":"OFF"})]}),n.jsx(Wr,{color:"forward"===$?"success":"warning",onClick:()=>{u("forward"===$?"monitor":"forward")},className:"w-full justify-center",children:"forward"===$?n.jsxs(n.Fragment,{children:[n.jsx(D,{"data-slot":"icon"}),"Repeating"]}):n.jsxs(n.Fragment,{children:[n.jsx(I,{"data-slot":"icon"}),"Monitor Only"]})}),n.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[n.jsx("span",{className:"text-xs text-text-muted",children:"Duty Cycle"}),n.jsx("span",{className:J("text-xs font-medium tabular-nums",W?"text-accent-secondary":"text-text-muted"),children:W?`${H}%`:"OFF"})]}),n.jsxs(Wr,{color:W?"warning":"muted",onClick:()=>{d(!W)},className:"w-full justify-center",children:[n.jsx(M,{"data-slot":"icon"}),W?`Limited to ${H}%`:"Disabled"]})]})})]}),n.jsxs(oo,{children:[void 0!==(null==c?void 0:c.uptime_seconds)&&n.jsxs("div",{className:"px-6 py-3 flex items-center gap-3",children:[n.jsx(A,{className:"w-5 h-5 text-text-muted flex-shrink-0"}),n.jsxs("span",{className:"type-data-xs text-text-secondary tabular-nums",children:[Nc(c.uptime_seconds)," uptime"]})]}),n.jsx("div",{className:"px-3 pb-3",children:n.jsx("div",{className:"bg-subtle-fill rounded-xl p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(R,{className:"w-4 h-4 text-accent-primary"}),n.jsx("span",{className:"type-data-xs text-text-muted",children:"Noise Floor"})]}),n.jsx("span",{className:"type-data text-text-primary tabular-nums",children:null!=O?`${O.toFixed(0)} dBm`:""})]})})}),n.jsxs("div",{className:"px-6 py-3 flex items-center gap-3 border-t border-border-subtle",children:[n.jsx(Zl,{showLabel:!0}),(null==c?void 0:c.version)&&n.jsxs("span",{className:"type-data-xs text-text-muted truncate max-w-[140px]",title:`v${c.version}`,children:["v",c.version]})]}),n.jsx("div",{className:"px-3 pb-3",children:n.jsxs("button",{onClick:()=>{Vo(),window.location.href="/login"},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-text-muted hover:text-accent-danger hover:bg-accent-danger/10 transition-all duration-150",children:[n.jsx(z,{className:"w-4 h-4"}),n.jsx("span",{className:"type-body-sm",children:"Sign Out"}),m&&n.jsxs("span",{className:"ml-auto type-data-xs text-text-muted",children:["(",m,")"]})]})})]})]})}function Wc(){const e=Hl(),t=e.isLoading||e.isBackgroundLoading||e.isTopologyLoading;return n.jsxs(po,{children:[n.jsxs(bo,{children:[n.jsx("h1",{className:"sr-only",children:"pyMC Console"}),n.jsx(jo,{height:26,className:"block"}),t&&n.jsx(sc,{className:"ml-2"})]}),n.jsx(yo,{}),n.jsxs(bo,{children:[n.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",So]}),n.jsx(Zl,{})]})]})}const Hc=s.memo(function(){const{theme:e}=vr(),{backgroundImage:t,brightness:s,colorScheme:a}=e,r=Oe(a),o=(null==r?void 0:r.meta.backgroundImage)||null==r?void 0:r.meta.backgroundColor,i=(100-s)/100;return n.jsxs(n.Fragment,{children:[t?n.jsx("div",{className:"fixed inset-0 -z-20",style:{contain:"paint"},"aria-hidden":"true",children:n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-300 ease-out",style:{backgroundImage:`url(${t})`}})}):o?n.jsx("div",{className:"fixed inset-0 -z-20 transition-colors duration-300 ease-out",style:{backgroundColor:o,contain:"paint"},"aria-hidden":"true"}):null,n.jsx("div",{className:"fixed inset-0 -z-10 bg-black pointer-events-none transition-opacity duration-200 ease-out",style:{opacity:i,contain:"paint"},"aria-hidden":"true"})]})}),Uc=20,qc=12,Gc=s.createContext(null);function Jc({children:e}){const[t,a]=s.useState({content:null,mouseX:0,mouseY:0,visible:!1}),r=s.useRef(null),[o,i]=s.useState({x:0,y:0}),l=s.useCallback((e,t,s)=>{a({content:e,mouseX:t,mouseY:s,visible:!0})},[]),c=s.useCallback(()=>{a(e=>({...e,visible:!1}))},[]),u=s.useCallback((e,t)=>{a(s=>s.visible?{...s,mouseX:e,mouseY:t}:s)},[]);s.useEffect(()=>{if(!t.visible||!r.current)return;const e=r.current.getBoundingClientRect(),{mouseX:s,mouseY:n}=t,a=window.innerWidth,o=window.innerHeight;let l,c;l=s+Uc+e.width+qc>a?s-Uc-e.width:s+Uc,l=Math.max(qc,Math.min(l,a-e.width-qc)),c=n-Uc-e.height<qc?n+Uc:n-Uc-e.height,c=Math.max(qc,Math.min(c,o-e.height-qc)),i({x:l,y:c})},[t.visible,t.mouseX,t.mouseY]);const d={show:l,hide:c,updatePosition:u};return n.jsxs(Gc.Provider,{value:d,children:[e,B.createPortal(n.jsx("div",{ref:r,role:"tooltip",className:`\n            fixed z-[9999] pointer-events-none\n            px-3 py-2 rounded-lg\n            bg-bg-elevated border border-border-subtle shadow-lg\n            text-xs text-text-primary leading-relaxed\n            transition-opacity duration-150\n            ${t.visible?"opacity-100":"opacity-0"}\n          `,style:{left:o.x,top:o.y,visibility:t.visible?"visible":"hidden"},children:t.content}),document.body)]})}function Yc({content:e,children:t,delay:a=150}){const{show:r,hide:o,updatePosition:i}=function(){const e=s.useContext(Gc);if(!e)throw new Error("useTooltipContext must be used within TooltipProvider");return e}(),l=s.useRef(null),c=s.useRef(null),u=s.useRef(!1),d=()=>{c.current&&(clearTimeout(c.current),c.current=null)},h=s.useCallback(t=>{d(),c.current=setTimeout(()=>{u.current=!0,r(e,t.clientX,t.clientY)},a)},[r,e,a]),m=s.useCallback(e=>{u.current&&i(e.clientX,e.clientY)},[i]),f=s.useCallback(()=>{d(),u.current=!1,o()},[o]),g=s.useCallback(()=>{if(d(),!l.current)return;const t=l.current.getBoundingClientRect();c.current=setTimeout(()=>{u.current=!0,r(e,t.left+t.width/2,t.top)},a)},[r,e,a]),p=s.useCallback(()=>{d(),u.current=!1,o()},[o]);return s.useEffect(()=>()=>{d(),u.current&&(u.current=!1,o())},[o]),s.useEffect(()=>{const e=()=>{u.current&&(d(),u.current=!1,o())};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[o]),n.jsx("span",{ref:l,onMouseEnter:h,onMouseMove:m,onMouseLeave:f,onFocus:g,onBlur:p,className:"contents",children:t})}function Vc({className:e=""}){return n.jsx("div",{className:`bg-white/5 animate-pulse rounded-lg ${e}`,"aria-hidden":"true"})}function Kc(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading dashboard",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Vc,{className:"h-8 w-48"}),n.jsx(Vc,{className:"h-8 w-32"})]}),n.jsx(Vc,{className:"h-72"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:Array.from({length:8}).map((e,t)=>n.jsx(Vc,{className:"h-24"},t))}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>n.jsx(Vc,{className:"h-44"},t))}),n.jsx(Vc,{className:"h-96"})]})}function Xc(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading list",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Vc,{className:"h-8 w-40"}),n.jsx(Vc,{className:"h-8 w-24"})]}),n.jsx(Vc,{className:"h-20"}),n.jsxs("div",{className:"glass-card overflow-hidden",children:[n.jsx(Vc,{className:"h-10 rounded-none"}),n.jsx("div",{className:"divide-y divide-border-subtle/30",children:Array.from({length:10}).map((e,t)=>n.jsx("div",{className:"px-4 py-3",children:n.jsx(Vc,{className:"h-6"})},t))})]})]})}function Qc(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading map",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Vc,{className:"h-8 w-32"}),n.jsx(Vc,{className:"h-6 w-48"})]}),n.jsx(Vc,{className:"h-[500px]"}),n.jsx(Vc,{className:"h-64"})]})}function Zc(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading charts",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Vc,{className:"h-8 w-36"}),n.jsx(Vc,{className:"h-8 w-40"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx(Vc,{className:"h-80"}),n.jsx(Vc,{className:"h-80"})]}),n.jsx(Vc,{className:"h-64"})]})}function eu(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading settings",children:[n.jsx(Vc,{className:"h-8 w-32"}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(Vc,{className:"h-48"}),n.jsx(Vc,{className:"h-64"}),n.jsx(Vc,{className:"h-32"})]})]})}function tu(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading system info",children:[n.jsx(Vc,{className:"h-8 w-28"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>n.jsx(Vc,{className:"h-28"},t))}),n.jsx(Vc,{className:"h-64"}),n.jsx(Vc,{className:"h-48"})]})}const su={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:15}},exit:{opacity:0,scale:.9,transition:{duration:.15}}},nu={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:to.cubicInOut}},exit:{opacity:0,y:-8,transition:{duration:.15,ease:to.easeIn}}};function au({children:e,layoutKey:t}){return O()?n.jsx(n.Fragment,{children:e}):n.jsx(c.div,{initial:"initial",animate:"animate",exit:"exit",variants:nu,children:e},t)}const ru=s.lazy(()=>G(()=>import("./Login-zWarN3Ve.js"),__vite__mapDeps([0,1,2]))),ou=s.lazy(()=>G(()=>import("./Dashboard-BIMfl_CK.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14]))),iu=s.lazy(()=>G(()=>import("./Packets-DHxvwdwr.js"),__vite__mapDeps([15,1,2,6,7,8,9,4,5,13]))),lu=s.lazy(()=>G(()=>import("./Contacts-BcOss4J-.js").then(e=>e.C),__vite__mapDeps([16,1,2,17,5,9,8,18,19,20,21]))),cu=s.lazy(()=>G(()=>import("./Statistics-DqgywSJF.js"),__vite__mapDeps([22,1,2,23,4,10,5,9,18,19,13,14,21]))),uu=s.lazy(()=>G(()=>import("./MeshGraph-CdoFbL_m.js"),__vite__mapDeps([24,1,2,25]))),du=s.lazy(()=>G(()=>import("./System-Cw2qx9Xo.js"),__vite__mapDeps([26,1,2,4,5,14,13]))),hu=s.lazy(()=>G(()=>import("./Logs-EKbeyhLl.js"),__vite__mapDeps([27,1,2,23,5,13]))),mu=s.lazy(()=>G(()=>import("./Terminal-BQEu4TKw.js"),__vite__mapDeps([28,1,2,17,7,5]))),fu=s.lazy(()=>G(()=>import("./Configuration-_CjN4yUe.js"),__vite__mapDeps([29,1,2,20,30,12,5,9,13,14])));function gu({children:e}){const t=v();return Bo()?n.jsx(n.Fragment,{children:e}):n.jsx(H,{to:"/login",state:{from:t},replace:!0})}class pu extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var e;return this.state.hasError?n.jsxs("div",{className:"glass-card p-8 text-center",children:[n.jsx("p",{className:"type-subheading text-accent-red mb-2",children:"Page failed to render"}),n.jsx("p",{className:"type-body text-white/50 mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"Unknown error"}),n.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-accent-primary/20 text-accent-primary rounded-lg hover:bg-accent-primary/30 transition-colors",children:"Try Again"})]}):this.props.children}}function bu(){const e=Ll(e=>e.initializeApp),t=Bo();return s.useEffect(()=>{if(!t)return;e();const s=setInterval(()=>{Yo()},3e4);return Yo(),Xo(),()=>clearInterval(s)},[e,t]),n.jsxs(Jc,{children:[n.jsx(Hc,{}),n.jsxs($,{children:[n.jsx(W,{path:"/login",element:n.jsx(s.Suspense,{fallback:n.jsx("div",{className:"min-h-screen bg-bg-body"}),children:n.jsx(ru,{})})}),n.jsx(W,{path:"/*",element:n.jsx(gu,{children:n.jsx(go,{sidebar:n.jsx($c,{}),navbar:n.jsx(Wc,{}),children:n.jsx("div",{className:"px-4 sm:px-6 lg:px-8 pt-5 pb-4 sm:pb-6 lg:pb-8 max-w-7xl mx-auto",children:n.jsx(pu,{children:n.jsxs($,{children:[n.jsx(W,{path:"/",element:n.jsx(s.Suspense,{fallback:n.jsx(Kc,{}),children:n.jsx(au,{children:n.jsx(ou,{})})})}),n.jsx(W,{path:"/packets",element:n.jsx(s.Suspense,{fallback:n.jsx(Xc,{}),children:n.jsx(au,{children:n.jsx(iu,{})})})}),n.jsx(W,{path:"/contacts",element:n.jsx(s.Suspense,{fallback:n.jsx(Qc,{}),children:n.jsx(au,{children:n.jsx(lu,{})})})}),n.jsx(W,{path:"/statistics",element:n.jsx(s.Suspense,{fallback:n.jsx(Zc,{}),children:n.jsx(au,{children:n.jsx(cu,{})})})}),n.jsx(W,{path:"/meshgraph",element:n.jsx(s.Suspense,{fallback:n.jsx(Zc,{}),children:n.jsx(au,{children:n.jsx(uu,{})})})}),n.jsx(W,{path:"/system",element:n.jsx(s.Suspense,{fallback:n.jsx(tu,{}),children:n.jsx(au,{children:n.jsx(du,{})})})}),n.jsx(W,{path:"/logs",element:n.jsx(s.Suspense,{fallback:n.jsx(Xc,{}),children:n.jsx(au,{children:n.jsx(hu,{})})})}),n.jsx(W,{path:"/terminal",element:n.jsx(s.Suspense,{fallback:n.jsx(Xc,{}),children:n.jsx(au,{children:n.jsx(mu,{})})})}),n.jsx(W,{path:"/configuration",element:n.jsx(s.Suspense,{fallback:n.jsx(eu,{}),children:n.jsx(au,{children:n.jsx(fu,{})})})})]})})})})})})]})]})}const yu=console.warn;console.warn=(...e)=>{const t=e[0];if("string"==typeof t){if(t.includes("width")&&t.includes("height")&&t.includes("chart should be greater than 0"))return;if(t.includes("Unable to load glyph range"))return}yu.apply(console,e)},U.createRoot(document.getElementById("root")).render(n.jsx(s.StrictMode,{children:n.jsx(wr,{children:n.jsx(q,{children:n.jsx(bu,{})})})}));export{ac as $,Dc as A,Ar as B,Mr as C,Xi as D,Lr as E,sl as F,Ki as G,Jr as H,Ec as I,bc as J,hc as K,Zl as L,kc as M,Vr as N,Qr as O,jo as P,Rr as Q,Cr as R,el as S,Yc as T,Rc as U,Pc as V,jr as W,yc as X,Sc as Y,Ac as Z,ic as _,so as a,wc as a0,Nl as a1,Wl as a2,uc as a3,dc as a4,Xl as a5,_c as a6,X as a7,K as a8,Oe as a9,gi as aA,pi as aB,bi as aC,fi as aD,yi as aE,ti as aF,Xe as aG,nt as aH,Ji as aI,Ic as aJ,Fc as aK,Xr as aL,Zr as aM,Mi as aN,Vi as aO,Tr as aP,Gl as aQ,$i as aR,tc as aS,su as aT,fr as aa,ni as ab,ai as ac,br as ad,vr as ae,xc as af,vc as ag,Cc as ah,Qi as ai,tl as aj,Ul as ak,cc as al,jc as am,Lc as an,Bl as ao,Ol as ap,hi as aq,mi as ar,nl as as,Nc as at,Il as au,Fl as av,Rl as aw,rl as ax,So as ay,oi as az,eo as b,Dl as c,Al as d,_l as e,ql as f,Do as g,$l as h,Bo as i,Yl as j,li as k,qo as l,Jl as m,Yi as n,El as o,Kl as p,Vl as q,Hl as r,Io as s,di as t,Pl as u,zl as v,Fi as w,Sr as x,Wr as y,Er as z};
