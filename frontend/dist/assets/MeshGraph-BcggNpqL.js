import{r as e,j as t,m as s,i as a}from"./vendor-react-BKIq8k5U.js";import{c as n,aA as i,aZ as l,a_ as r,j as o,T as c,a$ as d,b0 as u,A as m,m as x,Y as p,aU as h,B as b,R as g,X as v}from"./index-CrU_Ps9k.js";import{M as y,a as j,D as f,s as k}from"./DeepAnalysisModal-DU5K5xVI.js";import{D as w}from"./DataBox-sJHphnZd.js";import{S as C,T as N}from"./target-DsO2pqIH.js";import{S}from"./settings-2-D7yA0852.js";import{L}from"./loader-circle-D6Apotf0.js";import{N as M}from"./network-BfZEswvU.js";import"./deckgl-DTsmDcfs.js";import"./vendor-core-D1aqi_5O.js";import"./config-C7QO3CEB.js";import"./git-branch-CkXjQHb9.js";import"./database-lWroaxsL.js";const z=n("focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),O=n("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),D=!1,F=!0,B=!0,R=!0,P=!0,G=!0;let H=null;function A(){if(H)return H;const e=getComputedStyle(document.documentElement).getPropertyValue("--bg-body").trim();return H=e.startsWith("#")?e:"#171717",H}const T={local:"#FBBF24",hub:"#A78BFA",gateway:"#60A5FA",backbone:"#34D399",neighbor:"#F472B6",mobile:"#FB923C",ghost:"#6B7280",standard:"#9CA3AF"},E=e.memo(function({node:e,onClose:s}){return t.jsxs(x.div,{variants:k,initial:"hidden",animate:"visible",exit:"exit",className:"absolute inset-x-3 bottom-3 z-20 surface-elevated radius-inset shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 border-b border-border-subtle/50",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("span",{className:"size-2 shrink-0 rounded-full",style:{backgroundColor:T[e.nodeClass]}}),t.jsx("code",{className:"text-sm font-semibold text-text-primary shrink-0",children:e.prefix}),e.name&&t.jsx("span",{className:"text-sm text-text-secondary truncate",children:e.name}),t.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.isLocal&&t.jsx(b,{color:"yellow",compact:!0,children:"LOCAL"}),e.isHub&&t.jsx(b,{color:"violet",compact:!0,children:"HUB"}),e.isGateway&&t.jsx(b,{color:"sky",compact:!0,children:"GW"}),e.isBackbone&&t.jsx(b,{color:"emerald",compact:!0,children:"BONE"}),e.isMobile&&t.jsx(b,{color:"orange",compact:!0,children:"MOB"}),e.isZeroHop&&t.jsx(b,{color:"amber",compact:!0,children:"RF"})]})]}),t.jsx(v,{plain:!0,onClick:s,title:"Close",className:"shrink-0",children:t.jsx(p,{className:"size-4"})})]}),t.jsxs("div",{className:"p-3 font-mono text-[11px]",children:[t.jsx(w,{copy:!0,size:"compact",truncate:[10,6],className:"w-full mb-3",children:e.hash}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-text-muted uppercase",children:"Packets"}),t.jsx("div",{className:"text-text-primary tabular-nums",children:e.packetCount.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-text-muted uppercase",children:"Edges"}),t.jsx("div",{className:"text-text-primary tabular-nums",children:e.edgeCount})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-text-muted uppercase",children:"Degree"}),t.jsx("div",{className:"text-text-primary tabular-nums",children:e.degree})]})]})]})]})});function Z(){return t.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 text-center px-8",children:[t.jsx("div",{className:"p-4 radius-pill bg-subtle-fill",children:t.jsx(M,{className:"w-8 h-8 text-text-muted"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"type-subheading text-text-primary",children:"No Topology Data"}),t.jsx("p",{className:"type-body text-text-muted max-w-sm",children:"The mesh topology will appear here once packets are received and processed."})]}),t.jsxs("div",{className:"flex items-center gap-2 type-data-xs text-text-muted",children:[t.jsx(g,{className:"w-4 h-4 animate-pulse"}),t.jsx("span",{children:"Waiting for mesh traffic..."})]})]})}const W=e.memo(function({label:e,value:s,onChange:a,min:n,max:i,step:l}){return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] text-text-muted",children:e}),t.jsx("span",{className:"text-[10px] text-text-secondary tabular-nums",children:s.toFixed(l<1?2:0)})]}),t.jsx("input",{type:"range",min:n,max:i,step:l,value:s,onChange:e=>a(parseFloat(e.target.value)),className:"w-full h-1 bg-white/10 rounded appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer"})]})}),V=e.memo(function({label:e,checked:s,onChange:a}){return t.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[t.jsx("span",{className:"text-[10px] text-text-muted",children:e}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:s,onChange:e=>a(e.target.checked),className:"sr-only"}),t.jsx("div",{className:"w-8 h-4 rounded-full transition-colors "+(s?"bg-accent-primary":"bg-white/20"),children:t.jsx("div",{className:"absolute top-0.5 w-3 h-3 rounded-full bg-white transition-transform "+(s?"translate-x-4":"translate-x-0.5")})})]})]})});function I(){var n;const g=i(),[v,k]=e.useState(!1),[w,M]=e.useState(!1),H=e.useRef(!1);e.useEffect(()=>{g&&!H.current&&(H.current=!0,M(!0))},[g]);const I=e.useCallback(()=>{M(!1),k(!0)},[]),$=l(),_=function(t,s=1e3){const[a,n]=e.useState(t),i=e.useRef(Date.now()),l=e.useRef(null);return e.useEffect(()=>{const e=Date.now(),a=s-(e-i.current);return a<=0?(n(t),i.current=e):(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{n(t),i.current=Date.now()},a)),()=>{l.current&&clearTimeout(l.current)}},[t,s]),a}(r(),2e3),q=o(),[K,U]=e.useState(!0),[J,X]=e.useState(null),[Y,Q]=e.useState(!1),[ee,te]=e.useState(""),[se,ae]=e.useState(!1),[ne,ie]=e.useState(!1),[le,re]=e.useState("simulation"),oe=e.useRef(null),ce=e.useRef(null),[de,ue]=e.useState(null),[me,xe]=e.useState(null),[pe,he]=e.useState({}),[be,ge]=e.useState({simulationDecay:2e4,simulationGravity:.02,simulationCenter:.05,simulationRepulsion:5,simulationRepulsionTheta:.4,simulationLinkSpring:.05,simulationLinkDistance:78,simulationFriction:.72,simulationRepulsionFromMouse:0,pointSizeScale:.4,pointOpacity:1,pointGreyoutOpacity:.1,linkWidthScale:.08,linkOpacity:.85,linkGreyoutOpacity:.1,curvedLinks:D,curvedLinkWeight:.8,linkDefaultArrows:F,linkArrowsSizeScale:1.7,scalePointsOnZoom:B,scaleLinksOnZoom:R,renderLinks:P,renderHoveredPointRing:G,spaceSize:4096}),ve=e.useCallback((e,t)=>{ge(s=>({...s,[e]:t}))},[]),ye=e.useCallback(()=>{ge({simulationDecay:2e4,simulationGravity:.02,simulationCenter:.05,simulationRepulsion:5,simulationRepulsionTheta:.4,simulationLinkSpring:.05,simulationLinkDistance:78,simulationFriction:.72,simulationRepulsionFromMouse:0,pointSizeScale:.4,pointOpacity:1,pointGreyoutOpacity:.1,linkWidthScale:.08,linkOpacity:.85,linkGreyoutOpacity:.1,curvedLinks:D,curvedLinkWeight:.8,linkDefaultArrows:F,linkArrowsSizeScale:1.7,scalePointsOnZoom:B,scaleLinksOnZoom:R,renderLinks:P,renderHoveredPointRing:G,spaceSize:4096})},[]);e.useEffect(()=>()=>{var e;try{null==(e=ce.current)||e.destroy()}catch{}ce.current=null},[]),e.useEffect(()=>{const e=e=>{var t,s;if(!(e.target instanceof HTMLInputElement))switch(e.key.toLowerCase()){case"f":e.metaKey||e.ctrlKey||(e.preventDefault(),null==(t=ce.current)||t.fitView(800));break;case"escape":se?(ae(!1),te("")):J&&(X(null),null==(s=ce.current)||s.unselectAllPoints());break;case"/":se||(e.preventDefault(),ae(!0),setTimeout(()=>{var e;return null==(e=oe.current)?void 0:e.focus()},50));break;case" ":e.preventDefault(),ce.current&&(K?ce.current.pause():ce.current.start(),U(e=>!e))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[se,J,K]);const je=e.useMemo(()=>{var e;if(!_||0===_.size||!v)return[];const t=[],s=(null==q?void 0:q.node_name)??(null==(e=null==q?void 0:q.config)?void 0:e.node_name)??null;for(const a of _.values()){const e=a.packetCount>0?Math.log10(a.packetCount+1):0,n=Math.log10(5001),i=6+18*Math.min(1,e/n),l=a.isLocal?s??a.name:a.name;t.push({id:a.hash,label:l?`${a.prefix} ${l}`:a.prefix,color:T[a.nodeClass],size:i,nodeClass:a.nodeClass,name:l,prefix:a.prefix,packetCount:a.packetCount,isLocal:a.isLocal,isHub:a.isHub,isGateway:a.isGateway,isBackbone:a.isBackbone,isMobile:a.isMobile,isZeroHop:a.isZeroHop,degree:a.degree,activityLevel:a.activityLevel})}return t},[_,v,null==q?void 0:q.node_name,null==(n=null==q?void 0:q.config)?void 0:n.node_name]),fe=e.useMemo(()=>new Set(je.map(e=>e.id)),[je]),ke=e.useMemo(()=>{const e=(null==$?void 0:$.edges)??[];if(!e.length||!v)return[];const t=[],s=Math.max(1,...e.map(e=>e.certainCount));for(const a of e){if(!fe.has(a.fromHash)||!fe.has(a.toHash))continue;const e=a.certainCount>0?Math.log10(a.certainCount+1):0,n=Math.log10(s+1),i=Math.min(1,e/n),l=.5+3*i,r=Math.round(100+155*i).toString(16).padStart(2,"0");t.push({source:a.fromHash,target:a.toHash,color:`#${r}${r}${r}`,width:l,packetCount:a.packetCount,certainCount:a.certainCount})}return t},[null==$?void 0:$.edges,v,fe]),we=e.useMemo(()=>{const e=new Map;for(const t of ke)e.set(t.source,(e.get(t.source)??0)+1),e.set(t.target,(e.get(t.target)??0)+1);return e},[ke]),Ce=e.useMemo(()=>{const e=new Map;for(const t of je)e.set(t.id,t);return e},[je]);e.useEffect(()=>{if(0===je.length)return ue(null),xe(null),void he({});let e=!1;const t=setTimeout(async()=>{try{const t=je.map(e=>({id:e.id,label:e.label,color:e.color,size:e.size})),s=ke.map(e=>({source:e.source,target:e.target,color:e.color,width:e.width})),n={points:{pointIdBy:"id",pointColorBy:"color",pointColorStrategy:"direct",pointDefaultColor:"#9CA3AF",pointLabelBy:"label",pointSizeBy:"size",pointSizeStrategy:"direct",pointDefaultSize:8,pointSizeScale:1,pointGreyoutOpacity:.3},links:{linkSourceBy:"source",linkTargetsBy:["target"],linkColorBy:"color",linkColorStrategy:"direct",linkDefaultColor:"#6B7280",linkWidthBy:"width",linkWidthStrategy:"direct",linkDefaultWidth:1,linkWidthScale:1,linkGreyoutOpacity:.1}},i=await a(n,t,s);if(e||!i)return;ue(i.points??null),xe(i.links??null),he(i.cosmographConfig??{})}catch(t){}},100);return()=>{e=!0,clearTimeout(t)}},[je,ke]);const Ne=e.useCallback(e=>{e&&(ce.current=e,e.start(),setTimeout(()=>{e.fitView(800)},1500))},[]),Se=e.useCallback(()=>{var e;null==(e=ce.current)||e.fitView(800)},[]),Le=e.useCallback(()=>{const e=ce.current;e&&(K?e.pause():e.start(),U(!K))},[K]),Me=e.useCallback(async e=>{const t=ce.current;if(t)try{const s=await t.getPointIndicesByIds([e]);s&&s.length>0&&void 0!==s[0]&&t.zoomToPoint(s[0],400,2.5)}catch{}},[]),ze=e.useCallback(async(e,t,s)=>{var a;if(void 0===e)return X(null),void(null==(a=ce.current)||a.unselectAllPoints());const n=ce.current;if(n)try{const t=await n.getPointIdsByIndices([e]);if(!t||0===t.length)return;const s=t[0],a=Ce.get(s);if(!a)return;n.selectPoint(e,!1,!0),X({hash:s,name:a.name,prefix:a.prefix,nodeClass:a.nodeClass,packetCount:a.packetCount,edgeCount:we.get(s)??0,degree:a.degree,isLocal:a.isLocal,isHub:a.isHub,isGateway:a.isGateway,isBackbone:a.isBackbone,isMobile:a.isMobile,isZeroHop:a.isZeroHop,activityLevel:a.activityLevel})}catch{}},[Ce,we]),Oe=e.useMemo(()=>{if(!se||!ee.trim())return[];const e=ee.toLowerCase();return je.filter(t=>{var s;return t.prefix.toLowerCase().includes(e)||(null==(s=t.name)?void 0:s.toLowerCase().includes(e))||t.id.toLowerCase().includes(e)}).slice(0,8)},[je,ee,se]),De=e.useCallback(e=>{Me(e.id),ae(!1),te(""),X({hash:e.id,name:e.name,prefix:e.prefix,nodeClass:e.nodeClass,packetCount:e.packetCount,edgeCount:we.get(e.id)??0,degree:e.degree,isLocal:e.isLocal,isHub:e.isHub,isGateway:e.isGateway,isBackbone:e.isBackbone,isMobile:e.isMobile,isZeroHop:e.isZeroHop,activityLevel:e.activityLevel})},[Me,we]),Fe=e.useCallback(()=>{Q(e=>!e)},[]),Be=t.jsx("div",{className:"absolute top-0 left-0 z-20 px-4 py-3 pointer-events-none",children:t.jsxs("h1",{className:"type-title text-text-primary flex items-center gap-2 sm:gap-3 pointer-events-auto",children:[t.jsx(h,{className:"w-5 h-5 sm:w-6 sm:h-6 text-icon-page-title"}),t.jsx("span",{children:"MeshGraph"}),t.jsx(b,{color:"sky",compact:!0,children:"Stock"})]})}),Re=t.jsxs("div",{className:"absolute top-12 right-3 z-10 flex items-center gap-1 surface-control radius-inner px-2 py-1.5",children:[t.jsxs("span",{className:"text-[10px] text-text-muted tabular-nums mr-2",children:[je.length," • ",ke.length]}),t.jsx(c,{content:"Search (/)",children:t.jsx("button",{onClick:()=>{ae(!0),setTimeout(()=>{var e;return null==(e=oe.current)?void 0:e.focus()},50)},className:"p-1.5 radius-inner hover:bg-white/10 transition-base",children:t.jsx(C,{className:"w-4 h-4 text-text-secondary"})})}),t.jsx(c,{content:K?"Pause (Space)":"Play (Space)",children:t.jsx("button",{onClick:Le,className:"p-1.5 radius-inner hover:bg-white/10 transition-base",children:K?t.jsx(d,{className:"w-4 h-4 text-accent-success"}):t.jsx(u,{className:"w-4 h-4 text-text-secondary"})})}),t.jsx(c,{content:"Fit view (F)",children:t.jsx("button",{onClick:Se,className:"p-1.5 radius-inner hover:bg-white/10 transition-base",children:t.jsx(z,{className:"w-4 h-4 text-text-secondary"})})}),t.jsx(c,{content:"Settings",children:t.jsx("button",{onClick:()=>ie(e=>!e),className:"p-1.5 radius-inner transition-base "+(ne?"bg-accent-primary/20 text-accent-primary":"hover:bg-white/10 text-text-secondary"),children:t.jsx(S,{className:"w-4 h-4"})})}),t.jsx(c,{content:Y?"Exit fullscreen":"Fullscreen",children:t.jsx("button",{onClick:Fe,className:"p-1.5 radius-inner hover:bg-white/10 transition-base",children:Y?t.jsx(y,{className:"w-4 h-4 text-text-secondary"}):t.jsx(j,{className:"w-4 h-4 text-text-secondary"})})})]}),Pe=t.jsx(m,{children:ne&&t.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.15},className:"absolute top-24 right-3 z-10 w-72 surface-elevated radius-inset shadow-xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border-subtle",children:[t.jsx("span",{className:"text-xs font-medium text-text-primary",children:"Graph Settings"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(c,{content:"Reset to defaults",children:t.jsx("button",{onClick:ye,className:"p-1 radius-badge hover:bg-white/10 transition-base",children:t.jsx(O,{className:"w-3.5 h-3.5 text-text-muted"})})}),t.jsx("button",{onClick:()=>ie(!1),className:"p-1 radius-badge hover:bg-white/10 transition-base",children:t.jsx(p,{className:"w-3.5 h-3.5 text-text-muted"})})]})]}),t.jsx("div",{className:"flex border-b border-border-subtle",children:["simulation","points","links","rendering"].map(e=>t.jsx("button",{onClick:()=>re(e),className:"flex-1 px-2 py-1.5 text-[10px] font-medium capitalize transition-colors "+(le===e?"text-accent-primary border-b-2 border-accent-primary":"text-text-muted hover:text-text-secondary"),children:e},e))}),t.jsxs("div",{className:"p-3 space-y-3 max-h-80 overflow-y-auto",children:["simulation"===le&&t.jsxs(t.Fragment,{children:[t.jsx(W,{label:"Gravity",value:be.simulationGravity,onChange:e=>ve("simulationGravity",e),min:0,max:1,step:.01}),t.jsx(W,{label:"Repulsion",value:be.simulationRepulsion,onChange:e=>ve("simulationRepulsion",e),min:0,max:5,step:.1}),t.jsx(W,{label:"Link Spring",value:be.simulationLinkSpring,onChange:e=>ve("simulationLinkSpring",e),min:0,max:2,step:.05}),t.jsx(W,{label:"Link Distance",value:be.simulationLinkDistance,onChange:e=>ve("simulationLinkDistance",e),min:1,max:100,step:1}),t.jsx(W,{label:"Friction",value:be.simulationFriction,onChange:e=>ve("simulationFriction",e),min:0,max:1,step:.01}),t.jsx(W,{label:"Center Force",value:be.simulationCenter,onChange:e=>ve("simulationCenter",e),min:0,max:1,step:.01}),t.jsx(W,{label:"Decay",value:be.simulationDecay,onChange:e=>ve("simulationDecay",e),min:100,max:2e4,step:100}),t.jsx(W,{label:"Repulsion Theta",value:be.simulationRepulsionTheta,onChange:e=>ve("simulationRepulsionTheta",e),min:.1,max:3,step:.05}),t.jsx(W,{label:"Mouse Repulsion",value:be.simulationRepulsionFromMouse,onChange:e=>ve("simulationRepulsionFromMouse",e),min:0,max:10,step:.5})]}),"points"===le&&t.jsxs(t.Fragment,{children:[t.jsx(W,{label:"Size Scale",value:be.pointSizeScale,onChange:e=>ve("pointSizeScale",e),min:.1,max:5,step:.1}),t.jsx(W,{label:"Opacity",value:be.pointOpacity,onChange:e=>ve("pointOpacity",e),min:0,max:1,step:.05}),t.jsx(W,{label:"Greyout Opacity",value:be.pointGreyoutOpacity,onChange:e=>ve("pointGreyoutOpacity",e),min:0,max:1,step:.05}),t.jsx(V,{label:"Scale on Zoom",checked:be.scalePointsOnZoom,onChange:e=>ve("scalePointsOnZoom",e)}),t.jsx(V,{label:"Hover Ring",checked:be.renderHoveredPointRing,onChange:e=>ve("renderHoveredPointRing",e)})]}),"links"===le&&t.jsxs(t.Fragment,{children:[t.jsx(V,{label:"Show Links",checked:be.renderLinks,onChange:e=>ve("renderLinks",e)}),t.jsx(V,{label:"Curved Links",checked:be.curvedLinks,onChange:e=>ve("curvedLinks",e)}),t.jsx(V,{label:"Show Arrows",checked:be.linkDefaultArrows,onChange:e=>ve("linkDefaultArrows",e)}),t.jsx(W,{label:"Width Scale",value:be.linkWidthScale,onChange:e=>ve("linkWidthScale",e),min:.1,max:5,step:.1}),t.jsx(W,{label:"Opacity",value:be.linkOpacity,onChange:e=>ve("linkOpacity",e),min:0,max:1,step:.05}),t.jsx(W,{label:"Greyout Opacity",value:be.linkGreyoutOpacity,onChange:e=>ve("linkGreyoutOpacity",e),min:0,max:1,step:.05}),be.curvedLinks&&t.jsx(W,{label:"Curve Weight",value:be.curvedLinkWeight,onChange:e=>ve("curvedLinkWeight",e),min:0,max:1,step:.05}),be.linkDefaultArrows&&t.jsx(W,{label:"Arrow Size",value:be.linkArrowsSizeScale,onChange:e=>ve("linkArrowsSizeScale",e),min:.1,max:3,step:.1}),t.jsx(V,{label:"Scale on Zoom",checked:be.scaleLinksOnZoom,onChange:e=>ve("scaleLinksOnZoom",e)})]}),"rendering"===le&&t.jsxs(t.Fragment,{children:[t.jsx(W,{label:"Space Size",value:be.spaceSize,onChange:e=>ve("spaceSize",e),min:1024,max:16384,step:512}),t.jsx("div",{className:"pt-2 border-t border-border-subtle/50",children:t.jsx("p",{className:"text-[9px] text-text-muted",children:"Space size defines the simulation boundary. Larger values allow more spread."})})]})]})]})}),Ge=t.jsx(m,{children:se&&t.jsx(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 w-80",children:t.jsxs("div",{className:"surface-elevated radius-inset shadow-2xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5 border-b border-border-subtle",children:[t.jsx(C,{className:"w-4 h-4 text-text-muted shrink-0"}),t.jsx("input",{ref:oe,type:"text",value:ee,onChange:e=>te(e.target.value),placeholder:"Search by name or prefix...",className:"flex-1 bg-transparent text-sm text-text-primary placeholder:text-text-muted focus:outline-none",onKeyDown:e=>{"Escape"===e.key?(ae(!1),te("")):"Enter"===e.key&&Oe.length>0&&De(Oe[0])}}),ee&&t.jsx("button",{onClick:()=>te(""),className:"p-0.5 radius-badge hover-bg transition-base",children:t.jsx(p,{className:"w-3 h-3 text-text-muted"})})]}),Oe.length>0&&t.jsx("div",{className:"max-h-64 overflow-y-auto",children:Oe.map((e,s)=>t.jsxs("button",{onClick:()=>De(e),className:"w-full flex items-center gap-3 px-3 py-2 text-left hover-bg transition-base "+(0===s?"bg-subtle-fill/50":""),children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:T[e.nodeClass]}}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm text-text-primary truncate",children:e.name||e.prefix}),e.name&&t.jsx("div",{className:"text-[10px] text-text-muted",children:e.prefix})]}),t.jsx(N,{className:"w-3 h-3 text-text-muted shrink-0"})]},e.id))}),ee&&0===Oe.length&&t.jsx("div",{className:"px-3 py-4 text-center text-sm text-text-muted",children:"No nodes found"}),!ee&&t.jsx("div",{className:"px-3 py-2 type-data-xs text-text-muted",children:"Type to search • Enter to select • Esc to close"})]})})});return v?0===je.length?t.jsxs("div",{className:"relative h-[calc(100dvh-56px)] lg:h-dvh min-h-[500px] -mx-4 sm:-mx-6 lg:-mx-8 -mt-5 -mb-4 sm:-mb-6 lg:-mb-8 overflow-hidden",children:[Be,t.jsx("div",{className:"absolute inset-0 bg-bg-body flex items-center justify-center",children:t.jsx(Z,{})})]}):de?Y?t.jsxs("div",{className:"fixed inset-0 z-50 bg-bg-body flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 surface-header z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{className:"w-5 h-5 text-icon-page-title"}),t.jsxs("h1",{className:"type-title text-text-primary flex items-center gap-2",children:["MeshGraph",t.jsx(b,{color:"sky",compact:!0,children:"Stock"})]}),t.jsxs("span",{className:"text-[10px] text-text-muted tabular-nums",children:[je.length," nodes • ",ke.length," edges"]})]}),t.jsx(c,{content:"Exit fullscreen",children:t.jsx("button",{onClick:Fe,className:"p-1.5 radius-inner hover-bg transition-base",children:t.jsx(y,{className:"w-4 h-4 text-text-muted"})})})]}),t.jsxs("div",{className:"flex-1 relative min-h-0 m-2 surface-base radius-inset overflow-hidden border border-border-subtle",children:[t.jsx(s,{className:"absolute inset-0",points:de,links:me,...pe,...be,backgroundColor:A(),fitViewOnInit:!0,fitViewPadding:.15,showLabels:!0,showDynamicLabels:!0,showTopLabels:!0,showTopLabelsLimit:50,showHoveredPointLabel:!0,onClick:ze,onMount:Ne,hoveredPointRingColor:"#FBBF24",hoveredPointCursor:"pointer"}),Ge,Re,Pe,t.jsx(m,{children:J&&t.jsx(E,{node:J,onClose:()=>{var e;X(null),null==(e=ce.current)||e.unselectAllPoints()}})})]})]}):t.jsxs("div",{className:"relative h-[calc(100dvh-56px)] lg:h-dvh min-h-[500px] -mx-4 sm:-mx-6 lg:-mx-8 -mt-5 -mb-4 sm:-mb-6 lg:-mb-8 overflow-hidden",children:[Be,t.jsxs("div",{className:"absolute inset-0",children:[t.jsx(s,{className:"absolute inset-0",points:de,links:me,...pe,...be,backgroundColor:A(),fitViewOnInit:!0,fitViewPadding:.15,showLabels:!0,showDynamicLabels:!0,showTopLabels:!0,showTopLabelsLimit:50,showHoveredPointLabel:!0,onClick:ze,onMount:Ne,hoveredPointRingColor:"#FBBF24",hoveredPointCursor:"pointer"}),Ge,Re,Pe,t.jsxs("div",{className:"absolute bottom-4 right-4 z-10 hidden lg:flex items-center gap-3 type-data-xs text-text-muted/60",children:[t.jsxs("span",{children:[t.jsx("kbd",{className:"px-1 py-0.5 radius-badge bg-subtle-fill/50 font-mono",children:"/"})," Search"]}),t.jsxs("span",{children:[t.jsx("kbd",{className:"px-1 py-0.5 radius-badge bg-subtle-fill/50 font-mono",children:"F"})," Fit"]}),t.jsxs("span",{children:[t.jsx("kbd",{className:"px-1 py-0.5 radius-badge bg-subtle-fill/50 font-mono",children:"Space"})," Pause"]}),t.jsxs("span",{children:[t.jsx("kbd",{className:"px-1 py-0.5 radius-badge bg-subtle-fill/50 font-mono",children:"Esc"})," Clear"]})]}),t.jsx(m,{children:J&&t.jsx(E,{node:J,onClose:()=>{var e;X(null),null==(e=ce.current)||e.unselectAllPoints()}})})]})]}):t.jsxs("div",{className:"relative h-[calc(100dvh-56px)] lg:h-dvh min-h-[500px] -mx-4 sm:-mx-6 lg:-mx-8 -mt-5 -mb-4 sm:-mb-6 lg:-mb-8 overflow-hidden",children:[Be,t.jsxs("div",{className:"absolute inset-0 bg-bg-body flex flex-col items-center justify-center gap-3",children:[t.jsx(L,{className:"w-8 h-8 text-accent-primary animate-spin"}),t.jsx("span",{className:"type-body text-text-muted",children:"Preparing graph..."})]})]}):t.jsxs("div",{className:"relative h-[calc(100dvh-56px)] lg:h-dvh min-h-[500px] -mx-4 sm:-mx-6 lg:-mx-8 -mt-5 -mb-4 sm:-mb-6 lg:-mb-8 overflow-hidden",children:[Be,t.jsxs("div",{className:"absolute inset-0 bg-bg-body flex items-center justify-center",children:[t.jsx(f,{isOpen:w,onClose:I}),!w&&t.jsx(L,{className:"w-8 h-8 text-accent-primary animate-spin"})]})]})}export{I as default};
