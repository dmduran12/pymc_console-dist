const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ContactsMapMapLibre-Ce3kaG3n.js","assets/vendor-react-Co0R0q1H.js","assets/BasemapLayer-DRuifqX0.js","assets/vendor-core-B_fdKJ1g.js","assets/link-scoring-BKUpqWLf.js","assets/index-DyhSk8IB.js","assets/ConfirmModal-pqU7QtcC.js","assets/triangle-alert-RgCY7CW7.js","assets/DeepAnalysisModal-Coy7D1sw.js","assets/geo-utils-BR5NTbzq.js","assets/git-branch-CspTTFhK.js","assets/download-CWFYuItv.js","assets/database-CxKqXhR_.js","assets/TimeRangeStepper-juZ3e1TO.js","assets/chevron-right-DjeiOQnT.js","assets/DelayedAnimateNumber-BSOx2HMN.js","assets/index-plCEoie8.js","assets/refresh-cw-CfmvUTRY.js","assets/target-CggaFr0j.js","assets/sun-Th4QPMdw.js","assets/easing-CO-6R5Ec.js","assets/SignalIndicator-BfcSsJOC.js","assets/signal-scoring-CcBiRcks.js","assets/wifi-DvbQDFDU.js","assets/users-BJLGqM41.js","assets/badge-colors-YAE4qQ7m.js","assets/LightSparkline-DnTPTfQA.js","assets/map-pin-JvuXkIBQ.js","assets/ping-Bigvruf2.js","assets/PageLayout-BpgCKhJp.js","assets/listbox-DVKueDif.js","assets/Card-CFNgk1XP.js","assets/activity-CnKMcPpt.js","assets/DataBox-D1tSvDDH.js","assets/monitor-smartphone-SzhGLeZN.js","assets/circle-check-DOn2EfOm.js","assets/chat-utils-WDGoRf8-.js","assets/CollisionExplorerModal-GEIS_Aij.js","assets/network-U6iSN7Im.js","assets/search-Dscil2Au.js","assets/maplibre-gl-B1CfjdFi.css","assets/index-DBxnQa_d.css","assets/ContactsMapMapLibre-BwWOEply.css"])))=>i.map(i=>d[i]);
import{j as e,r as s,c as t,_ as a}from"./vendor-react-Co0R0q1H.js";import{c as n,aC as l,aD as i,aE as r,aw as c,h as o,$ as d,aF as x,o as m,aG as h,aH as p,H as g,V as u,R as f,j,L as b,aI as N,z as y,aJ as v,aK as w,aL as k,y as C,aM as M,aN as S,aO as L,D as P,W as F,E as R,aP as E,aQ as H,I as $,a7 as T}from"./index-DyhSk8IB.js";import{p as z}from"./ping-Bigvruf2.js";import{C as _,a as O,c as I,M as D,T as U}from"./TimeRangeStepper-juZ3e1TO.js";import{P as A,b as V,B as G}from"./PageLayout-BpgCKhJp.js";import{L as W,a as K}from"./listbox-DVKueDif.js";import{C as q}from"./Card-CFNgk1XP.js";import{T as B}from"./triangle-alert-RgCY7CW7.js";import{G as Z,a as Q}from"./git-branch-CspTTFhK.js";import{b as J,Z as X,C as Y,A as ee,c as se}from"./SignalIndicator-BfcSsJOC.js";import{E as te,S as ae,T as ne}from"./target-CggaFr0j.js";import{A as le}from"./activity-CnKMcPpt.js";import{D as ie}from"./DataBox-D1tSvDDH.js";import{F as re,M as ce}from"./monitor-smartphone-SzhGLeZN.js";import{P as oe,T as de,C as xe}from"./ConfirmModal-pqU7QtcC.js";import{U as me}from"./users-BJLGqM41.js";import{M as he}from"./map-pin-JvuXkIBQ.js";import{C as pe}from"./circle-check-DOn2EfOm.js";import{e as ge,g as ue,a as fe}from"./chat-utils-WDGoRf8-.js";import{C as je,S as be}from"./CollisionExplorerModal-GEIS_Aij.js";import{C as Ne}from"./badge-colors-YAE4qQ7m.js";import{N as ye}from"./network-U6iSN7Im.js";import{S as ve}from"./search-Dscil2Au.js";const we=n("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),ke=n("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Ce=n("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Me=n("file-digit",[["path",{d:"M4 12V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2",key:"jrl274"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 16h2v6",key:"1bxocy"}],["path",{d:"M10 22h4",key:"ceow96"}],["rect",{x:"2",y:"16",width:"4",height:"6",rx:"2",key:"r45zd0"}]]),Se=n("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]),Le=n("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),Pe=n("radio-tower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]),Fe=n("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Re=n("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Ee=n("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),He=n("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);class $e extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var s;return this.state.hasError?e.jsx("div",{className:t("map-container-16-9 flex items-center justify-center rounded-2xl",l),role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"text-center text-fg-muted p-4",children:[e.jsx("p",{className:"text-lg mb-2",children:"Map failed to load"}),e.jsx("p",{className:"text-sm text-fg-muted",children:(null==(s=this.state.error)?void 0:s.message)||"Unknown error"}),e.jsx("p",{className:"text-xs text-fg-muted mt-2",children:"Try refreshing the page or check your browser's WebGL support."})]})}):this.props.children}}const Te=s.lazy(()=>a(()=>import("./ContactsMapMapLibre-Ce3kaG3n.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42])));function ze({neighbors:a,localNode:n,localHash:i,onRemoveNode:r,selectedNodeHash:c,onNodeSelected:o,highlightedEdgeKey:d,highlightedGhost:x}){return e.jsx($e,{children:e.jsx(s.Suspense,{fallback:e.jsx("div",{className:t("map-container-16-9 flex items-center justify-center rounded-2xl",l),role:"status","aria-live":"polite","aria-label":"Loading map",children:e.jsxs("div",{className:"text-fg-muted flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-sys-blue border-t-transparent rounded-full animate-spin","aria-hidden":"true"}),e.jsx("span",{children:"Loading map..."})]})}),children:e.jsx(Te,{neighbors:a,localNode:n,localHash:i,onRemoveNode:r,selectedNodeHash:c,onNodeSelected:o,highlightedEdgeKey:d,highlightedGhost:x})})})}function _e(e){return e>=.7?"text-sys-green":e>=.5?"text-sys-indigo":e>=.3?"text-signal-poor":"text-sys-red"}function Oe(e){return`${Math.round(100*e)}%`}function Ie(e,s){return s.has(e.toUpperCase())}const De=s.memo(function({path:s,isHighlighted:t,onHighlight:a,ghostPrefixes:n}){const l=function(s){return s>.2?{icon:e.jsx(He,{className:"w-3 h-3"}),color:"text-sys-green"}:s<-.2?{icon:e.jsx(Ee,{className:"w-3 h-3"}),color:"text-sys-red"}:{icon:e.jsx(x,{className:"w-3 h-3"}),color:"text-fg-muted"}}(s.observationTrend),i=s.weakestLinkKey&&s.weakestLinkConfidence<.5,r=s.hops.some(e=>Ie(e,n));return e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-md transition-colors cursor-pointer "+(t?"bg-sys-blue/20 border border-sys-blue/40":"hover:bg-subtle-fill"),onClick:()=>a(t?null:s.weakestLinkKey),children:[e.jsx("div",{className:"flex-shrink-0 w-12 text-center py-1 rounded-md "+(c=s.healthScore,c>=.7?"bg-sys-green/10":c>=.5?"bg-sys-indigo/10":c>=.3?"bg-signal-poor/10":"bg-sys-red/10"),children:e.jsx("span",{className:`text-xs font-semibold tabular-nums ${_e(s.healthScore)}`,children:Oe(s.healthScore)})}),e.jsx("div",{className:"flex-1 flex items-center gap-0.5 overflow-x-auto min-w-0",children:s.hops.map((t,a)=>{var l;const r=Ie(t,n),c=i&&(null==(l=s.weakestLinkKey)?void 0:l.includes(t));return e.jsxs("span",{className:"flex items-center",children:[e.jsxs("span",{className:"type-data-xs px-1.5 py-0.5 rounded flex items-center gap-0.5 "+(r?"bg-sys-cyan/20 text-sys-cyan border border-sys-cyan/30":c?"bg-sys-red/20 text-sys-red":"bg-subtle-fill-strong text-fg-secondary"),children:[r&&e.jsx(Z,{className:"w-2.5 h-2.5"}),t]}),a<s.hops.length-1&&e.jsx("span",{className:"text-fg-muted mx-0.5",children:"→"})]},a)})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded "+("direct"===s.routeType?"bg-sys-green/20 text-sys-green":"flood"===s.routeType?"bg-sys-blue/20 text-sys-blue":"bg-subtle-fill-strong text-fg-muted"),children:"direct"===s.routeType?"D":"flood"===s.routeType?"F":"M"}),e.jsxs("div",{className:"flex items-center gap-1 text-fg-muted",title:"Estimated latency",children:[e.jsx(X,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xs tabular-nums",children:[s.estimatedLatencyMs,"ms"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-fg-muted",title:"Observations",children:[e.jsx(le,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs tabular-nums",children:s.observationCount})]}),e.jsx("div",{className:`flex items-center gap-1 ${l.color}`,title:"Usage trend",children:l.icon}),r&&e.jsx("div",{className:"text-sys-cyan",title:"Path includes ghost (unknown) nodes",children:e.jsx(Z,{className:"w-3 h-3"})}),i&&e.jsx("div",{className:"text-sys-red",title:`Weak link: ${s.weakestLinkConfidence.toFixed(0)}% confidence`,children:e.jsx(B,{className:"w-3 h-3"})})]})]});var c}),Ue=s.memo(function({maxPaths:t=10,onHighlightEdge:a,highlightedEdge:n}){const l=i(),x=r(),m=c(),[h,p]=s.useState(!1),g=s.useMemo(()=>new Set(m.map(e=>e.prefix.toUpperCase())),[m]),u=s.useMemo(()=>l.slice(0,t),[l,t]),f=s.useMemo(()=>0===l.length?null:{avgHealth:l.reduce((e,s)=>e+s.healthScore,0)/l.length,declining:l.filter(e=>e.observationTrend<-.2).length,weakLinks:l.filter(e=>e.weakestLinkConfidence<.5).length,pathsWithGhosts:l.filter(e=>e.hops.some(e=>g.has(e.toUpperCase()))).length},[l,g]),j=e=>{null==a||a(e)};return 0===l.length?null:e.jsxs(o,{noPadding:!0,children:[e.jsx(q,{listHeader:!0,icon:e.jsx(Q,{}),title:"Path Health",onClick:()=>p(!h),className:"hover:bg-subtle-fill transition-colors rounded-t-lg",titleExtra:e.jsxs("span",{className:"ml-2 text-xs font-normal text-fg-muted",children:["(",l.length," paths)"]}),actions:e.jsxs("div",{className:"flex items-center gap-3",children:[f&&e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("span",{className:`tabular-nums ${_e(f.avgHealth)}`,children:["Avg: ",Oe(f.avgHealth)]}),f.weakLinks>0&&e.jsxs("span",{className:"text-sys-red flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),f.weakLinks," weak"]}),f.declining>0&&e.jsxs("span",{className:"text-signal-poor flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3"}),f.declining," declining"]}),f.pathsWithGhosts>0&&e.jsxs("span",{className:"text-sys-cyan flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),f.pathsWithGhosts," ghost"]})]}),h?e.jsx(J,{className:"w-4 h-4 text-fg-muted"}):e.jsx(d,{className:"w-4 h-4 text-fg-muted"})]})}),h&&e.jsxs("div",{className:"p-3 pt-0 space-y-1",children:[x.totalPaths>0&&e.jsxs("div",{className:"flex items-center gap-3 text-xs text-fg-muted pb-2 border-b border-edge-subtle",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-3 h-3 text-sys-blue"}),e.jsx("span",{className:"text-fg-secondary",children:x.totalPaths.toLocaleString()})," Viterbi decoded"]}),x.observationOverrideCount>0&&e.jsxs("span",{className:"text-sys-green",children:[Math.round(x.observationOverrideCount/x.totalPaths*100),"% observation override"]}),m.length>0&&e.jsxs("span",{className:"text-sys-cyan flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),m.length," ghost",1!==m.length?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-fg-muted pb-2 border-b border-edge-subtle",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-sys-green"})," Healthy (≥70%)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-sys-indigo"})," Fair (50-70%)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-signal-poor"})," Weak (30-50%)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-sys-red"})," Critical (<30%)"]}),m.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3 text-sys-cyan"})," Ghost"]})]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:u.map(s=>e.jsx(De,{path:s,isHighlighted:n===s.weakestLinkKey,onHighlight:j,ghostPrefixes:g},s.pathKey))}),l.length>t&&e.jsxs("div",{className:"text-center text-xs text-fg-muted pt-2",children:["Showing top ",t," of ",l.length," paths"]})]})]})});function Ae(e){switch(e){case"rf_intersection":return"RF Circle Intersection";case"weighted_centroid":return"Weighted Centroid";case"single_anchor":return"Single Anchor (less reliable)";default:return e}}const Ve={confirmed:{label:"Confirmed",icon:e.jsx(Re,{className:"w-3.5 h-3.5"}),borderClass:"border-sys-green/40",bgClass:"bg-sys-green/10",textClass:"text-sys-green",badgeClass:"bg-sys-green/20 text-sys-green"},likely:{label:"Likely",icon:e.jsx(m,{className:"w-3.5 h-3.5"}),borderClass:"border-sys-cyan/30",bgClass:"bg-sys-cyan/5",textClass:"text-sys-cyan",badgeClass:"bg-sys-cyan/20 text-sys-cyan"},possible:{label:"Possible",icon:e.jsx(_,{className:"w-3.5 h-3.5"}),borderClass:"border-sys-indigo/20",bgClass:"bg-sys-indigo/5",textClass:"text-sys-indigo",badgeClass:"bg-sys-indigo/20 text-sys-indigo"},noise:{label:"Noise",icon:e.jsx(B,{className:"w-3.5 h-3.5"}),borderClass:"border-edge-subtle",bgClass:"bg-surface/30",textClass:"text-fg-muted",badgeClass:"bg-elevated text-fg-muted"}};function Ge({ghost:a,neighbors:n,isExpanded:l,onToggle:i,compact:r}){var c,o;const x=(null==(c=a.classification)?void 0:c.tier)??"noise",m=Ve[x],p="clusterId"in(g=a)&&"temporal"in g;var g;const u=s.useMemo(()=>Array.from(a.commonNeighbors).map(e=>{var s;return{hash:e,name:null==(s=n[e])?void 0:s.name}}),[a.commonNeighbors,n]),f=a.estimatedLocation?a.estimatedLocation.uncertaintyM>=1e3?`±${(a.estimatedLocation.uncertaintyM/1e3).toFixed(1)}km`:`±${Math.round(a.estimatedLocation.uncertaintyM)}m`:null,j=p&&a.temporal?(b=a.temporal.consistency)>=.7?{label:"Steady",color:"text-sys-green"}:b>=.4?{label:"Regular",color:"text-sys-cyan"}:b>=.2?{label:"Sporadic",color:"text-sys-indigo"}:{label:"Bursty",color:"text-signal-poor"}:null;var b;const N=p&&a.collisionCandidates&&a.collisionCandidates.length>0,y=N?a.collisionCandidates[0]:null;return r?e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded bg-elevated/50 text-sm",children:[e.jsx("span",{className:"font-mono font-medium text-fg-secondary",children:a.prefix.toUpperCase()}),e.jsx("span",{className:"text-fg-muted",children:a.observationCount})]}):e.jsxs("div",{className:t("rounded-lg border transition-all duration-150",m.borderClass,m.bgClass),children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-subtle-fill rounded-lg",children:[e.jsx(Z,{className:t("w-5 h-5 flex-shrink-0",m.textClass)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-fg-primary",children:a.prefix.toUpperCase()}),e.jsx("span",{className:t("px-1.5 py-0.5 rounded text-sm font-medium",m.badgeClass),children:m.label})]}),e.jsx("div",{className:t("text-sm mt-0.5",m.textClass),children:(null==(o=a.classification)?void 0:o.reason)??"Unknown"}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-fg-muted mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-3 h-3"}),a.observationCount]}),e.jsxs("span",{children:[(100*a.confidence).toFixed(0),"%"]}),a.commonNeighbors.size>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),a.commonNeighbors.size]}),a.estimatedLocation&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),f]}),j&&e.jsxs("span",{className:t("flex items-center gap-1",j.color),children:[e.jsx(le,{className:"w-3 h-3"}),j.label]}),N&&e.jsxs("span",{className:"flex items-center gap-1 text-signal-poor",children:[e.jsx(ae,{className:"w-3 h-3"}),"Collision?"]})]})]}),l?e.jsx(J,{className:"w-4 h-4 text-fg-muted"}):e.jsx(d,{className:"w-4 h-4 text-fg-muted"})]}),l&&e.jsxs("div",{className:"px-3 pb-3 space-y-3 border-t border-edge-subtle/50 mt-1 pt-3",children:[N&&y&&e.jsx("div",{className:"p-2 rounded bg-signal-poor/10 border border-signal-poor/30",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"w-4 h-4 text-signal-poor flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-signal-poor font-medium",children:"Possible collision with known node"}),e.jsx("div",{className:"text-fg-secondary mt-0.5",children:y.knownNodeName?e.jsxs("span",{children:["May match ",e.jsx("span",{className:"font-medium",children:y.knownNodeName})," ","(",(100*y.collisionProbability).toFixed(0),"% probability)"]}):e.jsxs("span",{children:["May match ",e.jsx(ie,{copy:!0,size:"compact",className:"inline",children:y.knownNodeHash})," ","(",(100*y.collisionProbability).toFixed(0),"% probability)"]})}),y.evidence&&e.jsxs("div",{className:"text-fg-muted mt-1 text-xs",children:[y.evidence.sharedEdgeCount>0&&e.jsxs("span",{className:"mr-2",children:[y.evidence.sharedEdgeCount," shared edges"]}),void 0!==y.evidence.distanceKm&&e.jsxs("span",{className:"mr-2",children:[y.evidence.distanceKm.toFixed(1),"km apart"]}),y.evidence.withinUncertainty&&e.jsx("span",{className:"text-sys-indigo",children:"Within uncertainty radius"})]})]})]})}),a.estimatedLocation?e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-sys-blue mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-fg-primary font-medium",children:[a.estimatedLocation.lat.toFixed(5),", ",a.estimatedLocation.lon.toFixed(5)]}),e.jsxs("div",{className:"text-fg-muted",children:["Uncertainty: ",f]}),p&&a.location&&e.jsxs("div",{className:"mt-1 text-fg-muted",children:[e.jsxs("div",{children:["Method: ",Ae(a.location.method)]}),a.location.anchors&&a.location.anchors.length>0&&e.jsxs("div",{children:[a.location.anchors.length," anchor",1!==a.location.anchors.length?"s":""," used"," · ",(100*a.location.locationConfidence).toFixed(0),"% confidence"]})]})]})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm text-fg-muted",children:[e.jsx(B,{className:"w-4 h-4 text-signal-poor"}),"Location unknown (neighbors lack coordinates)"]}),p&&a.temporal&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-fg-muted mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-fg-primary font-medium",children:["Temporal Pattern: ",e.jsx("span",{className:null==j?void 0:j.color,children:null==j?void 0:j.label})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-0.5 mt-1 text-fg-muted",children:[e.jsxs("span",{children:["Distinct hours: ",a.temporal.distinctHours]}),e.jsxs("span",{children:["Distinct days: ",a.temporal.distinctDays]}),e.jsxs("span",{children:["Burstiness: ",(100*a.temporal.burstiness).toFixed(0),"%"]}),e.jsxs("span",{children:["Consistency: ",(100*a.temporal.consistency).toFixed(0),"%"]}),e.jsxs("span",{children:["Last 24h: ",a.temporal.last24HourCount," obs"]}),e.jsxs("span",{children:["Active hours: ",a.temporal.activeHoursLast24,"/24"]})]})]})]}),!p&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-fg-muted mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-fg-primary",children:["First seen: ",h(a.firstSeen)," ago"]}),e.jsxs("div",{className:"text-fg-muted",children:["Last seen: ",h(a.lastSeen)," ago"]})]})]}),p&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-fg-muted mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-fg-primary",children:["Active period: ",h(a.firstSeen)," – ",h(a.lastSeen)," ago"]}),a.temporal&&e.jsxs("div",{className:"text-fg-muted",children:["Obs/hour avg: ",a.temporal.observationsPerHour.toFixed(1)]})]})]}),u.length>0&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-fg-muted mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-fg-muted mb-1",children:["Adjacent to ",u.length," known node",1!==u.length?"s":"",":"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.slice(0,5).map(({hash:s})=>e.jsx(ie,{copy:!0,size:"compact",children:s},s)),u.length>5&&e.jsxs("span",{className:"text-fg-muted",children:["+",u.length-5," more"]})]})]})]}),p&&a.validationStages&&e.jsxs("div",{className:"pt-2 border-t border-edge-subtle/30",children:[e.jsx("div",{className:"type-micro text-fg-muted mb-1.5",children:"Validation Stages"}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsx(We,{label:"Candidates",passed:a.validationStages.candidateExhaustion}),e.jsx(We,{label:"Temporal",passed:a.validationStages.temporalConsistency}),e.jsx(We,{label:"Topology",passed:a.validationStages.topologicalFit}),e.jsx(We,{label:"Location",passed:a.validationStages.locationPlausible})]})]}),a.classification&&!p&&e.jsx("div",{className:"pt-2 border-t border-edge-subtle/30",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.classification.criteria.hasVeryHighObservations&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-sys-green/20 text-sys-green",children:"200+ obs"}),a.classification.criteria.hasHighObservations&&!a.classification.criteria.hasVeryHighObservations&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-sys-cyan/20 text-sys-cyan",children:"50+ obs"}),a.classification.criteria.hasHighConfidence&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-sys-green/20 text-sys-green",children:"70%+ conf"}),a.classification.criteria.hasCommonNeighbors&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-sys-blue/20 text-sys-blue",children:"2+ neighbors"}),a.classification.criteria.hasGoodLocation&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-sys-blue/20 text-sys-blue",children:"good loc"}),a.classification.criteria.isRecent&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-fg-muted/20 text-fg-muted",children:"recent"})]})}),p&&a.upgradeRequirements&&a.upgradeRequirements.length>0&&"confirmed"!==x&&e.jsxs("div",{className:"pt-2 border-t border-edge-subtle/30",children:[e.jsx("div",{className:"type-micro text-fg-muted mb-1",children:"To upgrade tier:"}),e.jsx("ul",{className:"text-xs text-fg-secondary space-y-0.5",children:a.upgradeRequirements.slice(0,3).map((s,t)=>e.jsxs("li",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sys-cyan",children:"•"})," ",s]},t))})]})]})]})}function We({label:s,passed:a}){return e.jsxs("span",{className:t("inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium",a?"bg-sys-green/20 text-sys-green":"bg-elevated text-fg-muted"),children:[a?e.jsx(pe,{className:"w-2.5 h-2.5"}):e.jsx(Y,{className:"w-2.5 h-2.5"}),s]})}function Ke({neighbors:a,className:n,onGhostSelect:l}){const i=c(),o=r(),[h,p]=s.useState(new Set),[g,u]=s.useState("actionable"),[f,j]=s.useState(!1),[b,N]=s.useState(!0),[y,v]=s.useState(Date.now);s.useEffect(()=>{v(Date.now())},[i]);const w=s.useMemo(()=>i.filter(e=>!function(e,s){return s-1e3*e.lastSeen>6048e5}(e,y)),[i,y]),k=s.useMemo(()=>{const e=Array.from(h);return e.length>0?e[0]:null},[h]),C=s.useMemo(()=>k?w.find(e=>e.prefix===k)??null:null,[k,w]);s.useEffect(()=>{l&&l(C&&!b?{prefix:C.prefix,commonNeighbors:Array.from(C.commonNeighbors),estimatedLocation:C.estimatedLocation}:null)},[C,b,l]),s.useEffect(()=>{b&&p(new Set)},[b]);const{confirmed:M,likely:S,possible:L,noise:P,actionableCount:F}=s.useMemo(()=>{var e;const s=[],t=[],a=[],n=[];for(const i of w)switch((null==(e=i.classification)?void 0:e.tier)??"noise"){case"confirmed":s.push(i);break;case"likely":t.push(i);break;case"possible":a.push(i);break;case"noise":n.push(i)}const l=(e,s)=>s.observationCount-e.observationCount;return s.sort(l),t.sort(l),a.sort(l),n.sort(l),{confirmed:s,likely:t,possible:a,noise:n,actionableCount:s.length+t.length}},[w]);if(0===w.length)return null;const R=e=>{p(s=>s.has(e)?new Set:new Set([e]))},E="all"===g,H=M.length+S.length+(E?L.length:0)+(f?P.length:0);return e.jsxs("div",{className:n,children:[e.jsx(q,{listHeader:!0,icon:e.jsx(Z,{}),title:"Ghost Buster",titleExtra:e.jsxs(e.Fragment,{children:[F>0&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-sys-green/20 text-sys-green",children:[F," actionable"]}),b&&w.length>0&&e.jsxs("span",{className:"text-xs text-fg-muted ml-2",children:["(",w.length," total)"]})]}),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[!b&&e.jsxs("button",{onClick:()=>u(e=>"actionable"===e?"all":"actionable"),className:t("flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-colors","all"===g?"bg-sys-blue/20 text-sys-blue":"bg-elevated text-fg-muted hover:text-fg-secondary"),children:[e.jsx(re,{className:"w-3 h-3"}),"actionable"===g?"Actionable":"All"]}),e.jsx("button",{onClick:()=>N(e=>!e),className:"flex items-center gap-1 px-2 py-1 rounded text-xs bg-elevated text-fg-muted hover:text-fg-secondary transition-colors",title:b?"Expand panel":"Minimize panel",children:b?e.jsx(oe,{className:"w-3 h-3"}):e.jsx(x,{className:"w-3 h-3"})})]})}),b?e.jsxs("div",{className:"px-5 py-3 flex items-center gap-3 text-xs cursor-pointer hover:bg-subtle-fill transition-colors",onClick:()=>N(!1),children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[M.length>0&&e.jsxs("span",{className:"flex items-center gap-1 text-sys-green",children:[e.jsx(Re,{className:"w-3 h-3"}),M.length," confirmed"]}),S.length>0&&e.jsxs("span",{className:"flex items-center gap-1 text-sys-cyan",children:[e.jsx(m,{className:"w-3 h-3"}),S.length," likely"]}),L.length>0&&e.jsxs("span",{className:"text-sys-indigo",children:[L.length," possible"]}),P.length>0&&e.jsxs("span",{className:"text-fg-muted",children:[P.length," noise"]})]}),e.jsx("span",{className:"text-fg-muted ml-auto",children:"Click to expand"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-5 py-2 flex items-center gap-3 text-xs border-b border-edge-subtle/30",children:[e.jsxs("span",{className:"text-fg-muted",children:[o.pathsWithGhosts.toLocaleString()," / ",o.totalPaths.toLocaleString()," paths"]}),e.jsx("span",{className:"text-fg-muted",children:"•"}),e.jsxs("div",{className:"flex items-center gap-2",children:[M.length>0&&e.jsxs("span",{className:"text-sys-green",children:[M.length," confirmed"]}),S.length>0&&e.jsxs("span",{className:"text-sys-cyan",children:[S.length," likely"]}),L.length>0&&e.jsxs("span",{className:"text-sys-indigo",children:[L.length," possible"]}),P.length>0&&e.jsxs("span",{className:"text-fg-muted",children:[P.length," noise"]})]})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4",children:[M.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-sys-green",children:[e.jsx(Re,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"font-medium",children:["Confirmed Repeaters (",M.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:M.map(s=>e.jsx(Ge,{ghost:s,neighbors:a,isExpanded:h.has(s.prefix),onToggle:()=>R(s.prefix)},s.prefix))})]}),S.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-sys-cyan",children:[e.jsx(m,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"font-medium",children:["Likely Repeaters (",S.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:S.map(s=>e.jsx(Ge,{ghost:s,neighbors:a,isExpanded:h.has(s.prefix),onToggle:()=>R(s.prefix)},s.prefix))})]}),E&&L.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-sys-indigo",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"font-medium",children:["Possible (",L.length,")"]})]}),e.jsxs("div",{className:"space-y-2",children:[L.slice(0,10).map(s=>e.jsx(Ge,{ghost:s,neighbors:a,isExpanded:h.has(s.prefix),onToggle:()=>R(s.prefix)},s.prefix)),L.length>10&&e.jsxs("div",{className:"text-xs text-fg-muted text-center py-1",children:["+",L.length-10," more possible nodes"]})]})]}),P.length>0&&"all"===g&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>j(!f),className:"flex items-center gap-2 text-xs text-fg-muted hover:text-fg-secondary transition-colors",children:[f?e.jsx(J,{className:"w-3.5 h-3.5"}):e.jsx(d,{className:"w-3.5 h-3.5"}),e.jsx(B,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Noise (",P.length,")"]})]}),f&&e.jsx("div",{className:"flex flex-wrap gap-1",children:P.map(s=>e.jsx(Ge,{ghost:s,neighbors:a,isExpanded:!1,onToggle:()=>{},compact:!0},s.prefix))})]}),"actionable"===g&&0===F&&e.jsxs("div",{className:"text-center py-6 text-sm text-fg-muted",children:[e.jsx(Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No confirmed or likely repeaters yet."}),e.jsxs("p",{className:"text-xs mt-1",children:[L.length+P.length," prefixes need more evidence."]}),e.jsxs("button",{onClick:()=>u("all"),className:"mt-3 text-sys-blue hover:underline",children:["View all ",w.length," discovered nodes"]})]}),o.observationOverrideCount>0&&H>0&&e.jsxs("div",{className:"pt-2 border-t border-edge-subtle/30 text-xs text-fg-muted",children:[e.jsx("span",{className:"text-sys-blue",children:o.observationOverrideCount})," observation overrides • Avg confidence: ",e.jsxs("span",{className:"text-sys-indigo",children:[(100*o.avgPathConfidence).toFixed(0),"%"]})]})]})]})]})}const qe=s.memo(function({hash:t,className:a="",size:n="sm",collisionInfo:l,isViterbiResolved:i}){const c=p(),o=r(),[d,x]=s.useState(!1),h=s.useMemo(()=>g(t),[t]),u=s.useMemo(()=>void 0!==l?l:h?c.find(e=>e.prefix===h)??null:null,[h,c,l]),f=i??(o.totalPaths>0&&o.avgPathConfidence>=.7),j=s.useCallback(e=>{e.preventDefault(),e.stopPropagation(),x(!0)},[]),b=s.useCallback(()=>{x(!1)},[]);if(!u)return null;const N="sm"===n?"w-3.5 h-3.5":"w-4 h-4",y=f?"text-sys-cyan hover:text-sys-cyan hover:bg-sys-cyan/10 focus:ring-sys-cyan/50":"text-signal-fair hover:text-sys-indigo hover:bg-signal-fair/10 focus:ring-signal-fair/50",v=f?`Prefix conflict resolved by Viterbi HMM (${(100*o.avgPathConfidence).toFixed(0)}% confidence)`:`Prefix conflict: ${u.candidateCount} nodes share prefix "${h}"`;return e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:j,className:`inline-flex items-center justify-center p-0.5 rounded focus:outline-none focus:ring-2 transition-colors cursor-pointer touch-manipulation ${y} ${a}`,title:v,"aria-label":`View prefix conflict for ${h}${f?" (Viterbi resolved)":""}`,children:f?e.jsxs("span",{className:"relative",children:[e.jsx(te,{className:N}),e.jsx(m,{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 text-sys-green"})]}):e.jsx(Me,{className:N})}),e.jsx(je,{isOpen:d,prefix:u.prefix,candidateHashes:u.candidateHashes,onClose:b})]})}),Be=s.memo(function({hash:s,contact:t,isHub:a,isNeighbor:n,distance:l,centrality:i,sparklineData:r,neighborSignal:c,collisionInfo:o,isViterbiResolved:d,isPinging:x,isPingingThis:h,pingResult:p,pingError:g,gatewayInfo:N,lastForwarderPrefix:y,isMobile:v,pathStability:w,onRowClick:k,onPing:C,onRemove:M}){const S=t.latitude&&t.longitude&&0!==t.latitude&&0!==t.longitude,L=t.node_name||t.name||"Unknown",P=n&&c,F=I(t),{isRepeater:R,isCompanion:E,isRoomServer:H,isClient:$,label:T}=F,z=n?`${T} — Direct RF contact (zero-hop neighbor)`:`${T} — Flood routing (multi-hop via mesh)`,O=t.first_seen?u(t.first_seen).replace(/ ago$/i," old"):null;return e.jsxs("div",{className:`contacts-grid-row ${a?"bg-sys-amber/5 border-l-2 border-l-sys-amber":""} ${S?"cursor-pointer hover:bg-subtle-fill":""}`,onClick:()=>k(s),children:[e.jsxs("div",{className:"contacts-col-node flex items-center gap-2 min-w-0",children:[P&&null!==(null==c?void 0:c.avgSnr)?e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 self-center "+(A=c.avgSnr,void 0===A?"bg-[var(--signal-unknown)]":A>=5?"bg-[var(--signal-excellent)]":A>=0?"bg-[var(--signal-good)]":A>=-5?"bg-[var(--signal-fair)]":A>=-10?"bg-[var(--signal-poor)]":"bg-[var(--signal-critical)]")}):e.jsx("div",{className:"w-2 flex-shrink-0"}),e.jsx("div",{className:"w-6 h-6 flex items-center justify-center flex-shrink-0",title:z,children:(()=>{if(H&&R)return e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx(D,{className:"w-5 h-5 absolute inset-0 text-sys-pink"}),e.jsx(be,{className:"w-2.5 h-2.5 absolute -bottom-0.5 -right-0.5 text-sys-teal"})]});if(H)return e.jsx(D,{className:"w-5 h-5 text-sys-pink"});if(R)return e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ring-[1.5px] ring-sys-blue",children:e.jsx(f,{className:"w-3.5 h-3.5 text-sys-blue"})});if((E||$)&&"Unknown"!==L){const{emoji:s,cleanName:t}=ge(L);return e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:ue(t)},children:s?e.jsx("span",{className:"text-sm leading-none",children:s}):e.jsx("span",{className:"text-white text-[9px] font-bold tracking-tighter",children:fe(L)})})}return e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-zinc-500/20",children:e.jsx(_,{className:"w-3.5 h-3.5 text-sys-amber"})})})()}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsx("span",{className:"roster-title truncate",title:L,children:L}),n&&e.jsx(j,{color:Ne.neighbor,compact:!0,className:"flex-shrink-0",children:"NBR"}),a&&e.jsxs(j,{color:Ne.hub,compact:!0,className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx(ye,{className:"w-3 h-3"}),"HUB"]}),R&&e.jsx(j,{color:Ne.repeater,compact:!0,className:"flex-shrink-0",children:"RPT"}),H&&e.jsx(j,{color:Ne.room,compact:!0,className:"flex-shrink-0",children:"ROOM"}),E&&e.jsx(j,{color:Ne.companion,compact:!0,className:"flex-shrink-0",children:"COMP"}),$&&e.jsx(j,{color:Ne.client,compact:!0,className:"flex-shrink-0",children:"CLIENT"}),v&&e.jsxs(j,{color:"cyan",compact:!0,className:"flex items-center gap-0.5 flex-shrink-0",children:[e.jsx(Le,{className:"w-2.5 h-2.5"}),"MOBILE"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx(ie,{copy:!0,size:"compact",truncate:[8,6],children:s}),e.jsx(qe,{hash:s,collisionInfo:o,isViterbiResolved:d}),!n&&N&&e.jsxs(j,{color:"zinc",compact:!0,className:"flex items-center gap-0.5 flex-shrink-0",title:`Via ${N.name||N.prefix} (${N.hopCount} hop${1!==N.hopCount?"s":""})`,children:[e.jsx(ee,{className:"w-2.5 h-2.5"}),e.jsx("span",{className:"font-mono",children:N.prefix}),N.hopCount>1&&e.jsxs("span",{className:"opacity-60",children:["+",N.hopCount-1]})]}),y&&!n&&e.jsxs(j,{color:"zinc",compact:!0,className:"flex items-center gap-0.5 flex-shrink-0",title:`Last forwarded by ${y}`,children:[e.jsx(we,{className:"w-2.5 h-2.5"}),e.jsx("span",{className:"font-mono",children:y})]}),null!=w&&0!==w&&e.jsx(j,{color:w>0?"green":"amber",compact:!0,className:"flex items-center gap-0.5 flex-shrink-0",title:w>0?"Path stability improving":"Path stability declining",children:w>0?e.jsx(He,{className:"w-2.5 h-2.5"}):e.jsx(Ee,{className:"w-2.5 h-2.5"})}),r.length>0&&(()=>{const s=r.reduce((e,s)=>e+s.count,0);if(0===s)return null;const t=s/24;return e.jsxs(j,{color:"zinc",compact:!0,className:"flex items-center gap-0.5 flex-shrink-0",title:`${s} packets in last 24h (~${t.toFixed(1)}/hr)`,children:[e.jsx(Pe,{className:"w-2.5 h-2.5"}),e.jsxs("span",{children:[t<1?"<1":t.toFixed(0),"/hr"]})]})})(),O&&e.jsxs(j,{color:"zinc",compact:!0,className:"flex items-center gap-0.5 flex-shrink-0 opacity-70",title:`First discovered ${O}`,children:[e.jsx(Ce,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:O})]})]})]})]}),e.jsxs("div",{className:"contacts-col-signal flex items-center justify-end gap-2",children:[P&&null!==(null==c?void 0:c.avgRssi)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{rssi:c.avgRssi,className:"w-3.5 h-3.5"}),e.jsx("span",{className:"type-data-xs text-fg-muted",children:Math.round(c.avgRssi)})]}),P&&null!==(null==c?void 0:c.avgSnr)&&e.jsxs("span",{className:"type-data-xs text-fg-muted",children:[c.avgSnr.toFixed(1)," dB"]})]}),e.jsx("div",{className:"contacts-col-distance flex items-center justify-end gap-1 text-fg-muted",children:null!=l&&e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-3 h-3"}),e.jsx("span",{className:"type-data-xs",children:(U=l,U<1e3?`${Math.round(U)}m`:`${(U/1e3).toFixed(1)}km`)})]})}),e.jsx("div",{className:"contacts-col-centrality flex items-center justify-end gap-1",children:i>0&&e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-3 h-3 text-sys-indigo"}),e.jsxs("span",{className:"type-data-xs text-fg-muted",children:[(100*i).toFixed(0),"%"]})]})}),e.jsx("div",{className:"contacts-col-seen flex items-center justify-end",children:e.jsx("span",{className:"type-data-xs text-fg-primary whitespace-nowrap",children:t.last_seen?u(t.last_seen):"—"})}),e.jsxs("div",{className:"contacts-col-actions flex items-center justify-end gap-1",children:[n&&e.jsx(e.Fragment,{children:p?e.jsxs("div",{className:"flex items-center gap-1 text-sys-green",title:`RTT: ${p.rtt_ms.toFixed(0)}ms`,children:[e.jsx(m,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"type-data-xs hidden sm:inline",children:[p.snr_db.toFixed(1),"dB"]})]}):g?e.jsx("span",{className:"text-sys-red text-xs",title:g,children:"✗"}):e.jsx("button",{onClick:e=>C(s,e),disabled:x,className:"p-1 sm:p-1.5 radius-inner text-fg-muted/50 hover:text-sys-blue hover:bg-sys-blue/10 transition-base disabled:opacity-50 disabled:cursor-not-allowed",title:"Ping neighbor for updated signal info",children:h?e.jsx(b,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 animate-spin"}):e.jsx(ne,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),M(s,L)},className:"p-1 sm:p-1.5 radius-inner text-fg-muted/50 hover:text-sys-red hover:bg-sys-red/10 transition-base",title:"Remove contact",children:e.jsx(de,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})]});var U,A}),Ze=[],Qe=[{field:"lastHeard",icon:O,label:"Recent"},{field:"distance",icon:Fe,label:"Distance"},{field:"centrality",icon:le,label:"Centrality"}];function Je(e,s){const{color:a="primary",border:n=!1}=s??{};return t("flex items-center gap-1.5 px-2 py-1.5 text-sm radius-inner transition-base",e?"success"===a?"bg-sys-green/20 text-sys-green":"bg-sys-blue/20 text-sys-blue":"text-fg-muted hover:text-fg-secondary hover-bg",n&&(e?"success"===a?"border border-sys-green/30":"border border-sys-blue/30":"border border-transparent"))}function Xe(e,s,t,a){const n=(t-e)*Math.PI/180,l=(a-s)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3}const Ye=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{stats:a}=N(),n=y(),l=v(),d=w(),x=k(),h=C(),u=c(),j=M(),O=S(),B=i(),Z=L(),Q=P(),J=F(),X=R[Q],Y=p(),ee=r(),se=E(),te=ee.totalPaths>0&&ee.avgPathConfidence>=.7,ae=s.useMemo(()=>{const e=new Map;for(const s of Y)e.set(s.prefix,s);return e},[Y]),[ne,le]=s.useState(null),[ie,re]=s.useState("lastHeard"),[oe,de]=s.useState("desc"),[pe,ge]=s.useState(""),[ue,fe]=s.useState(!1),[je,be]=s.useState(new Set),[Ne,ye]=s.useState(!1),[we,Ce]=s.useState(null),[Me,Le]=s.useState(null),[Pe,Fe]=s.useState(null),[Re,Ee]=s.useState(null),[He,$e]=s.useState(new Map),[Te,_e]=s.useState(new Map),[Oe,Ie]=s.useState(25),[De,Ae]=s.useState(25),Ve=s.useRef(null),Ge=s.useMemo(()=>(null==a?void 0:a.neighbors)??{},[null==a?void 0:a.neighbors]),We=s.useMemo(()=>{const e=Date.now()/1e3-60*X.minutes;return Object.fromEntries(Object.entries(Ge).filter(([s,t])=>!n.has(s)&&(t.last_seen??0)>=e))},[Ge,n,X.minutes]),qe=H(),Ye=null==a?void 0:a.local_hash,es=s.useMemo(()=>{const e=new Map;for(const s of B){const t=s.hops[0];if(t&&0!==s.observationTrend){const a=Object.keys(Ge).find(e=>e.toUpperCase().startsWith(t.toUpperCase()));a&&!e.has(a)&&e.set(a,s.observationTrend)}}return e},[B,Ge]),ss=s.useMemo(()=>{const e=new Map;if(!Ye||0===j.size)return e;for(const[s,t]of j)if(s.endsWith(`→${Ye}`)&&t.hops.length>1){const a=s.split("→")[0],n=t.hops[t.hops.length-1];e.set(a,n)}return e},[j,Ye]),ts=s.useMemo(()=>{const e=new Map;if(!(null==qe?void 0:qe.latitude)||!(null==qe?void 0:qe.longitude))return e;for(const[s,t]of Object.entries(We))t.latitude&&t.longitude&&0!==t.latitude&&0!==t.longitude?e.set(s,Xe(qe.latitude,qe.longitude,t.latitude,t.longitude)):e.set(s,null);return e},[We,qe]),{neighborHashSet:as,neighborSignalMap:ns}=s.useMemo(()=>{const e=new Set,s=new Map;for(const t of h)e.add(t.hash),s.set(t.hash,{avgRssi:t.avgRssi,avgSnr:t.avgSnr});return{neighborHashSet:e,neighborSignalMap:s}},[h]),ls=s.useMemo(()=>{const e=pe.toLowerCase().trim(),s="neighbor"===e||"neighbors"===e,t=ue||s,a=je.size>0;return Object.fromEntries(Object.entries(We).filter(([n,l])=>{if(a){const e=function(e){return function(e){switch(e){case"room_server":return"room";case"repeater":return"repeater";case"companion":case"unknown":return"companion"}}(I(e).type)}(l);if(!je.has(e))return!1}if(t&&!as.has(n))return!1;if(s)return!0;if(!e)return!0;const i=(l.node_name||l.name||"").toLowerCase(),r=g(n).toLowerCase();return i.includes(e)||r.includes(e)||n.toLowerCase().includes(e)}))},[We,pe,ue,as,je]),is=s.useMemo(()=>{const e=Object.entries(ls),s=pe.toLowerCase().trim(),t=2===s.length&&/^[0-9a-f]{2}$/i.test(s);return e.sort(([e,a],[n,l])=>{if(t){const t=g(e).toLowerCase(),a=g(n).toLowerCase(),l=t===s,i=a===s;if(l&&!i)return-1;if(i&&!l)return 1}let i=0;switch(ie){case"lastHeard":i=(a.last_seen||0)-(l.last_seen||0);break;case"distance":{const s=ts.get(e)??null,t=ts.get(n)??null;i=null===s&&null===t?0:null===s?1:null===t?-1:s-t;break}case"centrality":i=(x.get(e)||0)-(x.get(n)||0)}return"desc"===oe?-i:i})},[ls,ie,oe,ts,x,pe]),rs=s.useMemo(()=>{let e=0,s=0,t=0,a=0,n=0;for(const[,l]of is){const i=I(l),r=l.latitude&&l.longitude&&0!==l.latitude&&0!==l.longitude;switch(i.type){case"room_server":t++;break;case"repeater":s++;break;case"companion":e++;break;case"unknown":n++}r&&a++}return{companions:e,repeaters:s,roomServers:t,total:is.length,withLocation:a,unknown:n}},[is]),cs=s.useMemo(()=>new Set(d),[d]),os=s.useMemo(()=>0===Oe?is:is.slice(0,De),[is,De,Oe]);s.useEffect(()=>{Ae(Oe||is.length)},[ie,oe,pe,ue,je,Oe,is.length]),s.useEffect(()=>{const e=e=>{e.target.closest("[data-dropdown]")||ye(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),s.useEffect(()=>{if(0===Oe)return;const e=new IntersectionObserver(e=>{e[0].isIntersecting&&De<is.length&&Ae(e=>Math.min(e+Oe,is.length))},{threshold:.1,rootMargin:"100px"});return Ve.current&&e.observe(Ve.current),()=>e.disconnect()},[Oe,De,is.length]);const ds=s.useCallback(e=>{Ie(e),Ae(e||is.length)},[is.length]),xs=s.useCallback(e=>{ie===e?de(e=>"desc"===e?"asc":"desc"):(re(e),de("desc"))},[ie]),ms=s.useCallback(e=>{const s=We[e];(null==s?void 0:s.latitude)&&(null==s?void 0:s.longitude)&&0!==s.latitude&&0!==s.longitude&&Ce(e)},[We]),hs=s.useCallback(()=>{Ce(null)},[]),ps=s.useCallback((e,s)=>{le({hash:e,name:s})},[]),gs=s.useCallback(async(e,s)=>{if(s.stopPropagation(),!Re){Ee(e),$e(s=>{const t=new Map(s);return t.delete(e),t}),_e(s=>{const t=new Map(s);return t.delete(e),t});try{const s=e.startsWith("0x")?e.slice(0,4):`0x${e.slice(0,2)}`,t=await z(s,30);t.success&&t.data?($e(s=>new Map(s).set(e,t.data)),setTimeout(()=>{$e(s=>{const t=new Map(s);return t.delete(e),t})},1e4)):(_e(s=>new Map(s).set(e,t.error||"Ping failed")),setTimeout(()=>{_e(s=>{const t=new Map(s);return t.delete(e),t})},5e3))}catch(t){const s=t instanceof Error?t.message:"Ping failed";_e(t=>new Map(t).set(e,s)),setTimeout(()=>{_e(s=>{const t=new Map(s);return t.delete(e),t})},5e3)}finally{Ee(null)}}},[Re]);return e.jsxs(A,{children:[e.jsx(V,{title:"Contacts",icon:e.jsx(me,{}),controls:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-5",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-fg-muted",children:"Total:"}),e.jsxs("span",{className:"data-box flex items-center gap-1.5 cursor-default",title:`${rs.total} discovered node${1!==rs.total?"s":""} on the mesh network`,children:[e.jsx(me,{className:"w-3.5 h-3.5 text-fg-secondary"}),e.jsx("span",{children:rs.total})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-fg-muted",children:"Types:"}),rs.repeaters>0&&e.jsxs("span",{className:"data-box flex items-center gap-1.5 cursor-default",title:"Repeaters",children:[e.jsx(f,{className:"w-3.5 h-3.5 text-sys-blue"}),e.jsx("span",{children:rs.repeaters})]}),rs.companions>0&&e.jsxs("span",{className:"data-box flex items-center gap-1.5 cursor-default",title:"Companions",children:[e.jsx(ce,{className:"w-3.5 h-3.5 text-fg-muted"}),e.jsx("span",{children:rs.companions})]}),rs.roomServers>0&&e.jsxs("span",{className:"data-box flex items-center gap-1.5 cursor-default",title:"Room Servers",children:[e.jsx(D,{className:"w-3.5 h-3.5 text-sys-pink"}),e.jsx("span",{children:rs.roomServers})]}),rs.withLocation>0&&e.jsxs("span",{className:"data-box flex items-center gap-1.5 cursor-default",title:"With GPS location",children:[e.jsx(he,{className:"w-3.5 h-3.5 text-sys-green"}),e.jsx("span",{children:rs.withLocation})]}),rs.unknown>0&&e.jsxs("span",{className:"data-box flex items-center gap-1.5 cursor-default",title:"Unknown type",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-sys-amber"}),e.jsx("span",{children:rs.unknown})]})]})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-1.5",children:[e.jsxs("span",{className:"data-box !px-1.5 !py-0.5 !text-[10px] flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3 text-fg-secondary"}),e.jsx("span",{children:rs.total})]}),rs.repeaters>0&&e.jsxs("span",{className:"data-box !px-1.5 !py-0.5 !text-[10px] flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3 text-sys-blue"}),e.jsx("span",{children:rs.repeaters})]}),rs.companions>0&&e.jsxs("span",{className:"data-box !px-1.5 !py-0.5 !text-[10px] flex items-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3 text-fg-muted"}),e.jsx("span",{children:rs.companions})]}),rs.roomServers>0&&e.jsxs("span",{className:"data-box !px-1.5 !py-0.5 !text-[10px] flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3 text-sys-pink"}),e.jsx("span",{children:rs.roomServers})]}),e.jsx(U,{ranges:R,selectedIndex:Q,onSelect:J,size:"sm"})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(U,{ranges:R,selectedIndex:Q,onSelect:J})})]})}),e.jsxs(G,{children:[Z?e.jsx(ze,{neighbors:We,localNode:qe??void 0,localHash:Ye,onRemoveNode:l,selectedNodeHash:we,onNodeSelected:hs,highlightedEdgeKey:Me,highlightedGhost:Pe}):e.jsx("div",{className:"surface-base radius-card aspect-video flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-sys-blue border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-fg-muted",children:"Loading map..."})]})}),e.jsx(Ue,{maxPaths:10,highlightedEdge:Me,onHighlightEdge:Le}),u.length>0&&(Z?e.jsx(o,{noPadding:!0,children:e.jsx(Ke,{neighbors:We,onGhostSelect:Fe})}):e.jsxs("div",{className:"surface-base radius-card",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-edge-subtle",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"w-24 h-4 rounded bg-elevated animate-pulse"})]}),e.jsx("div",{className:"w-6 h-6 rounded bg-elevated animate-pulse"})]}),e.jsx("div",{className:"px-5 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-4 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"w-16 h-4 rounded bg-elevated animate-pulse"})]})})]})),e.jsx(o,{noPadding:!0,children:Z?e.jsxs(e.Fragment,{children:[e.jsx(q,{listHeader:!0,stackActionsOnMobile:!0,stackBreakpoint:"lg",icon:e.jsx(me,{}),title:"Discovered Contacts",titleExtra:e.jsx($,{type:"search",size:"sm",value:pe,onChange:e=>ge(e.target.value),placeholder:"Search...",leadingIcon:e.jsx(ve,{className:"w-3.5 h-3.5"}),trailingIcon:pe?e.jsx("button",{onClick:()=>{ge(""),"neighbor"!==pe.toLowerCase().trim()&&"neighbors"!==pe.toLowerCase().trim()||fe(!1)},className:"text-fg-muted hover:text-fg-secondary",children:e.jsx(T,{className:"w-3 h-3"})}):void 0,className:"w-24 sm:w-32","aria-label":"Search contacts"}),actions:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>ye(!Ne),className:Je(je.size>0,{border:!0}),title:"Filter by contact type",children:[e.jsx(Se,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden lg:inline",children:"Filter"}),je.size>0&&e.jsx("span",{className:"tabular-nums text-xs bg-sys-blue/30 px-1 rounded",children:je.size})]}),Ne&&e.jsxs("div",{className:"absolute left-0 top-full mt-1 z-50 surface-elevated radius-inner py-1 min-w-[140px]",children:[[{key:"repeater",label:"Repeaters"},{key:"companion",label:"Companions"},{key:"room",label:"Rooms"}].map(({key:s,label:a})=>e.jsxs("button",{onClick:()=>{be(e=>{const t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"w-full px-3 py-1.5 text-sm text-left hover-bg transition-base flex items-center gap-2",children:[e.jsx("span",{className:t("w-4 h-4 flex items-center justify-center radius-badge border",je.has(s)?"bg-sys-blue border-sys-blue text-white":"border-edge-subtle"),children:je.has(s)&&e.jsx(m,{className:"w-3 h-3"})}),e.jsx("span",{className:je.has(s)?"text-fg-primary":"text-fg-secondary",children:a})]},s)),je.size>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-edge-subtle my-1"}),e.jsx("button",{onClick:()=>be(new Set),className:"w-full px-3 py-1.5 text-sm text-left text-fg-muted hover:text-fg-secondary hover-bg transition-base",children:"Clear filters"})]})]})]}),as.size>0&&e.jsxs("button",{onClick:()=>fe(!ue),className:Je(ue,{color:"success",border:!0}),title:ue?"Show all contacts":"Show only MeshCore neighbors (direct RF contact)",children:[e.jsx(f,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden lg:inline",children:"Neighbors"}),e.jsx("span",{className:"lg:hidden tabular-nums",children:as.size})]})]}),e.jsx("div",{className:"hidden lg:block h-4 w-px bg-border-subtle"}),e.jsxs("div",{className:"flex items-center gap-1",children:[Qe.map(({field:s,icon:a,label:n})=>e.jsxs("button",{onClick:()=>xs(s),className:Je(ie===s),title:`Sort by ${n.toLowerCase()}`,children:[e.jsx(a,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden lg:inline",children:n}),ie===s&&e.jsx(ke,{className:t("w-3 h-3","asc"===oe&&"rotate-180")})]},s)),e.jsx("div",{className:"h-4 w-px bg-border-subtle"}),e.jsxs(W,{value:Oe,onChange:ds,className:"w-auto min-w-[50px] [&_button]:py-1 [&_button]:px-2 [&_button]:text-xs [&_button]:min-h-0","aria-label":"Items per page",children:[e.jsx(K,{value:25,children:"25"}),e.jsx(K,{value:50,children:"50"}),e.jsx(K,{value:100,children:"100"}),e.jsx(K,{value:0,children:"All"})]})]})]})}),is.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden sm:grid contacts-grid-header border-b border-edge-subtle/50 px-3 py-2 type-micro text-fg-muted",children:[e.jsx("div",{className:"contacts-col-node",children:"Node"}),e.jsx("div",{className:"contacts-col-signal text-right",children:"Signal"}),e.jsx("div",{className:"contacts-col-distance text-right",children:"Distance"}),e.jsx("div",{className:"contacts-col-centrality text-right",children:"Centrality"}),e.jsx("div",{className:"contacts-col-seen text-right",children:"Last Seen"}),e.jsx("div",{className:"contacts-col-actions"})]}),e.jsx("div",{className:"divide-y divide-edge-subtle/30",children:os.map(([s,t])=>{const a=g(s),n=cs.has(s),l=as.has(s),i=ts.get(s)??null,r=x.get(s)||0,c=l?ns.get(s):void 0,o=a?ae.get(a)??null:null,d=se.get(s)??Ze;let m=null;if(!l&&Ye&&j.size>0){const e=`${s}→${Ye}`,t=j.get(e);if(t&&t.hops.length>0){const e=t.hops[0],s=Object.keys(Ge).find(s=>s.toUpperCase().startsWith(e.toUpperCase())),a=s?Ge[s]:null;m={prefix:e,name:(null==a?void 0:a.node_name)??(null==a?void 0:a.name)??null,hopCount:t.hopCount}}}const h=O.has(s),p=es.get(s)??null,u=ss.get(s)??null;return e.jsx(Be,{hash:s,contact:t,isHub:n,isNeighbor:l,distance:i,centrality:r,sparklineData:d,neighborSignal:c,collisionInfo:o,isViterbiResolved:te,isPinging:null!==Re,isPingingThis:Re===s,pingResult:He.get(s),pingError:Te.get(s),gatewayInfo:m,lastForwarderPrefix:u,isMobile:h,pathStability:p,onRowClick:ms,onPing:gs,onRemove:ps},s)})}),Oe>0&&De<is.length&&e.jsxs("div",{ref:Ve,className:"flex items-center justify-center py-4 text-fg-muted",children:[e.jsx(b,{className:"w-4 h-4 animate-spin mr-2"}),e.jsx("span",{className:"text-xs",children:"Loading more..."})]}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-t border-edge-subtle/50 text-xs text-fg-muted",children:[e.jsxs("span",{className:"tabular-nums",children:["Showing ",os.length," of ",is.length]}),Oe>0&&De<is.length&&e.jsx("button",{onClick:()=>Ae(e=>Math.min(e+Oe,is.length)),className:"text-sys-blue hover:text-sys-blue/80 transition-base",children:"Load more"})]})]}):e.jsxs("div",{className:"roster-empty",children:[e.jsx(me,{className:"roster-empty-icon"}),e.jsx("div",{className:"type-label text-fg-secondary",children:"No Contacts Discovered"}),e.jsx("div",{className:"type-data-xs text-fg-muted mt-1",children:"Contacts will appear here as they advertise on the mesh network."})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-edge-subtle",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"w-32 h-4 rounded bg-elevated animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-6 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"w-24 h-6 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"w-16 h-6 rounded bg-elevated animate-pulse"})]})]}),e.jsx("div",{className:"px-3 py-3 space-y-3",children:[...Array(5)].map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded bg-elevated animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"h-3 w-24 rounded bg-elevated animate-pulse"})]}),e.jsx("div",{className:"w-12 h-4 rounded bg-elevated animate-pulse"}),e.jsx("div",{className:"w-16 h-4 rounded bg-elevated animate-pulse"})]},t))})]})})]}),e.jsx(xe,{isOpen:!!ne,title:"Remove Contact",message:`Are you sure you would like to remove ${(null==ne?void 0:ne.name)||"this contact"}?`,confirmLabel:"Remove",cancelLabel:"Cancel",variant:"danger",onConfirm:()=>{ne&&l(ne.hash),le(null)},onCancel:()=>le(null)})]})}},Symbol.toStringTag,{value:"Module"}));export{Ye as C,qe as P,Fe as R};
