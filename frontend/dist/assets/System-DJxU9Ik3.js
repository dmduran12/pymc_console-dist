import{r as e,j as t,c as s}from"./vendor-react-BKIq8k5U.js";import{c as r,a,d as n,b0 as o,b1 as c,b2 as l,b3 as i,b4 as m,b5 as d,aL as x,aD as u,b6 as h,b7 as p}from"./index-B11lY9-1.js";import{a as f,P as g,b as y,B as j}from"./PageLayout-B0w3WDO6.js";import{T as b}from"./triangle-alert-B6zJAu5k.js";import{C as v}from"./Card-CdMkTlw5.js";import{a as w,A as N}from"./arrow-up-CUOun5Cq.js";import{N as M}from"./network-lVajgRAI.js";import{A as k}from"./activity-C2dIShq4.js";import{R}from"./refresh-cw-CiVt2S4S.js";import{R as C,C as S}from"./Grid-BkE6UU8f.js";import"./deckgl-DTsmDcfs.js";import"./vendor-core-D1aqi_5O.js";const F=r("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),_=r("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),T=r("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),B=n.hero;function P(){const e=getComputedStyle(document.documentElement);return{fontFamily:e.getPropertyValue("--font-data").trim()||'"JetBrains Mono", ui-monospace, monospace',textPrimary:e.getPropertyValue("--text-primary").trim()||"#FFFFFF",textMuted:e.getPropertyValue("--text-muted").trim()||"#727272",gridColor:e.getPropertyValue("--chart-grid").trim()||"rgba(255, 255, 255, 0.06)"}}function $(e){const t=Math.max(0,Math.min(1,e)),s=[{pos:0,color:{r:142,g:78,b:198}},{pos:.25,color:{r:91,g:91,b:214}},{pos:.5,color:{r:0,g:162,b:199}},{pos:.75,color:{r:255,g:178,b:36}},{pos:1,color:{r:229,g:72,b:77}}];let r=s[0],a=s[s.length-1];for(let c=0;c<s.length-1;c++)if(t>=s[c].pos&&t<=s[c+1].pos){r=s[c],a=s[c+1];break}const n=a.pos-r.pos,o=n>0?(t-r.pos)/n:0;return function(e,t,s){const r=2.2,a=1/r,n=Math.pow(e.r/255,r),o=Math.pow(e.g/255,r),c=Math.pow(e.b/255,r),l=Math.pow(t.r/255,r),i=Math.pow(t.g/255,r),m=Math.pow(t.b/255,r),d=255*Math.pow(n+s*(l-n),a),x=255*Math.pow(o+s*(i-o),a),u=255*Math.pow(c+s*(m-c),a);return{r:Math.round(Math.max(0,Math.min(255,d))),g:Math.round(Math.max(0,Math.min(255,x))),b:Math.round(Math.max(0,Math.min(255,u)))}}(r.color,a.color,o)}const E=e.memo(function({data:s,cpuColor:r,memoryColor:n}){const c=e.useRef(null),l=e.useRef(null),i=e.useRef([]),m=e.useRef(r),d=e.useRef(n),x=e.useRef(null),u=e.useRef(s.length);e.useLayoutEffect(()=>{m.current=r,d.current=n}),e.useEffect(()=>{x.current=P()},[]);const h=e.useMemo(()=>function(e){const t=[],s=Math.max(0,B-e.length),r=Date.now(),a=o.system;for(let o=0;o<s;o++){const e=r-(B-o)*a,s=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});t.push({timestamp:e/1e3,time:s,cpu:null,memory:null})}const n=e.slice(-B);for(let o=0;o<n.length;o++){const e=n[o],[s,r,a]=e.time.split(":").map(Number),c=new Date;c.setHours(s,r,a||0,0),t.push({timestamp:c.getTime()/1e3,time:e.time.slice(0,5),cpu:e.cpu,memory:e.memory})}return t}(s),[s]);e.useLayoutEffect(()=>{i.current=h},[h]);const p=e.useMemo(()=>[h.map(e=>e.timestamp),new Array(h.length).fill(1)],[h]),f=e.useMemo(()=>({hooks:{draw:e=>{const t=x.current||P();!function(e,t,s,r,a){if(0===t.length)return;const n=e.ctx,{left:o,top:c,width:l,height:i}=e.bbox,m=window.devicePixelRatio||1;if(l<=0||i<=0)return;const d=e.data[0],x=d.length;if(0===x)return;const u=d[0],h=d[x-1]-u||1,p=e=>o+(e-u)/h*l,f=e=>{const t=Math.min(Math.max(e/100,0),1);return c+i*(1-t)};n.save(),n.strokeStyle=a.textPrimary,n.globalAlpha=.1,n.lineWidth=1*m,n.setLineDash([4*m,4*m]);for(const w of[25,50,75]){const e=Math.round(f(w))+.5;n.beginPath(),n.moveTo(Math.round(o),e),n.lineTo(Math.round(o+l),e),n.stroke()}n.restore(),n.save(),n.font=`bold ${10*m}px ${a.fontFamily}`,n.fillStyle=a.textMuted,n.textBaseline="middle",n.textAlign="left";const g=8*m;for(const w of[0,25,50,75,100]){const e=f(w),t=Math.max(c+g,Math.min(c+i-g,e));n.fillText(`${w}%`,4*m,t)}n.restore(),n.save();const y=l/x;for(let w=0;w<x;w++){const e=t[w];if(!e||null===e.cpu)continue;const s=p(d[w])-y/2,r=f(e.cpu),a=c+i-r,o=$(Math.pow(e.cpu/100,.7));n.fillStyle=`rgba(${o.r}, ${o.g}, ${o.b}, 0.85)`,n.fillRect(s,r,y,a)}n.restore(),n.save(),n.lineWidth=2.5*m,n.lineCap="round",n.lineJoin="round",n.strokeStyle=r;let j=!1,b=0;for(let w=0;w<x;w++){const e=t[w];if(!e||null===e.memory){j&&(n.stroke(),n.beginPath(),j=!1);continue}const s=p(d[w]),r=f(e.memory);j?(n.lineTo(s,b),n.lineTo(s,r)):(n.beginPath(),n.moveTo(s,r),j=!0),b=r}j&&n.stroke(),n.restore(),n.save(),n.font=`${10*m}px ${a.fontFamily}`,n.fillStyle=a.textMuted,n.textBaseline="top",n.textAlign="center";const v=Math.floor(x/4);for(let w=0;w<x;w+=v){const e=t[w];if(!e)continue;const s=p(d[w]);n.fillText(e.time,s,c+i+6*m)}if(x>0){const e=t[x-1],s=d[x-1];e&&(n.textAlign="right",n.fillText(e.time,p(s),c+i+6*m))}n.restore()}(e,i.current,m.current,d.current,t)}}}),[]),g=e.useMemo(()=>({width:400,height:240,padding:[8,8,24,36],cursor:{show:!1,x:!1,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!0},y:{range:[0,100]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1}],plugins:[f]}),[f]);return e.useEffect(()=>{const e=c.current;if(!e||0===h.length)return;const t=u.current,r=s.length,n=Math.abs(r-t);if(!(!l.current||n>50||t>0&&n/t>.2)&&l.current)return l.current.setData(p),void(u.current=r);l.current&&l.current.destroy();const o=e.getBoundingClientRect(),i=Math.floor(o.width)||400,m=Math.floor(o.height)||240,d=new a({...g,width:i,height:m},p,e);return l.current=d,u.current=r,()=>{d.destroy(),l.current=null}},[g,p,h.length,s.length]),e.useEffect(()=>{const e=c.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!l.current)return;const{width:s,height:r}=t.contentRect;s>0&&r>0&&l.current.setSize({width:Math.floor(s),height:Math.floor(r)})});return t.observe(e),()=>{t.disconnect()}},[]),e.useEffect(()=>{l.current&&l.current.redraw()},[r,n,h]),0===s.length?t.jsx("div",{className:"h-[240px] flex items-center justify-center text-text-muted",children:"Collecting data..."}):t.jsx("div",{ref:c,className:"w-full h-[240px] rounded-lg overflow-hidden"})});function A(e){const t=Math.max(0,Math.min(1,e)),s=[{pos:0,color:{r:142,g:78,b:198}},{pos:.25,color:{r:91,g:91,b:214}},{pos:.5,color:{r:0,g:162,b:199}},{pos:.75,color:{r:255,g:178,b:36}},{pos:1,color:{r:229,g:72,b:77}}];let r=s[0],a=s[s.length-1];for(let c=0;c<s.length-1;c++)if(t>=s[c].pos&&t<=s[c+1].pos){r=s[c],a=s[c+1];break}const n=a.pos-r.pos,o=n>0?(t-r.pos)/n:0;return function(e,t,s){const r=2.2,a=1/r,n=Math.pow(e.r/255,r),o=Math.pow(e.g/255,r),c=Math.pow(e.b/255,r),l=Math.pow(t.r/255,r),i=Math.pow(t.g/255,r),m=Math.pow(t.b/255,r),d=255*Math.pow(n+s*(l-n),a),x=255*Math.pow(o+s*(i-o),a),u=255*Math.pow(c+s*(m-c),a);return{r:Math.round(Math.max(0,Math.min(255,d))),g:Math.round(Math.max(0,Math.min(255,x))),b:Math.round(Math.max(0,Math.min(255,u)))}}(r.color,a.color,o)}const D=e.memo(function({data:s,color:r,flipped:n=!1,fixedSlots:o}){const c=e.useRef(null),l=e.useRef(null),i=e.useRef(s),m=e.useRef(r),d=e.useRef(n),x=e.useRef(o);e.useLayoutEffect(()=>{i.current=s,m.current=r,d.current=n,x.current=o});const u=e.useMemo(()=>[Array.from({length:o},(e,t)=>t),new Array(o).fill(1)],[o]),h=e.useMemo(()=>({hooks:{draw:e=>{!function(e,t,s,r,a){const n=e.ctx,{left:o,top:c,width:l,height:i}=e.bbox;if(l<=0||i<=0)return;const m=[...Array(Math.max(0,a-t.length)).fill(0),...t.slice(-a)],d=Math.max(...m,1),x=m.length,u=l/x,h=.03*i;n.save();for(let p=0;p<x;p++){const e=m[p],t=o+p*u;if(e<=0)continue;const s=Math.min(e/d,1),a=Math.max(s*i,h),l=Math.min(e/1048576,1),x=A(Math.pow(l,.7));n.fillStyle=`rgb(${x.r}, ${x.g}, ${x.b})`,r?n.fillRect(t,c,u,a):n.fillRect(t,c+i-a,u,a)}n.restore()}(e,i.current,m.current,d.current,x.current)}}}),[]),p=e.useMemo(()=>({width:400,height:40,padding:[0,0,0,0],legend:{show:!1},cursor:{show:!1,x:!1,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!1},y:{range:[0,1]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1,label:""}],plugins:[h]}),[h]);return e.useEffect(()=>{const e=c.current;if(!e)return;l.current&&l.current.destroy();const t=e.getBoundingClientRect(),s=Math.floor(t.width)||400,r=Math.floor(t.height)||40,n=new a({...p,width:s,height:r},u,e);return l.current=n,()=>{n.destroy(),l.current=null}},[p,u]),e.useEffect(()=>{const e=c.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!l.current)return;const{width:s,height:r}=t.contentRect;s>0&&r>0&&l.current.setSize({width:Math.floor(s),height:Math.floor(r)})});return t.observe(e),()=>{t.disconnect()}},[]),e.useEffect(()=>{l.current&&l.current.redraw()},[s,r,n]),t.jsx("div",{ref:c,className:"w-full h-full"})}),L={warning:80,danger:95},z={warning:85,danger:95},U={warning:70,danger:85},H=[{threshold:30,color:"var(--accent-tertiary)"},{threshold:50,color:"var(--accent-primary)"},{threshold:65,color:"var(--accent-secondary)"},{threshold:80,color:"var(--signal-poor)"}];function G(e,t,s){const r=s-t,a={cold:(30-t)/r*100,normal:(50-t)/r*100,warm:(65-t)/r*100,hot:(80-t)/r*100};return`linear-gradient(to right, ${[{pos:0,color:"var(--accent-tertiary)"},{pos:a.cold,color:"var(--accent-tertiary)"},{pos:a.cold,color:"var(--accent-primary)"},{pos:a.normal,color:"var(--accent-primary)"},{pos:a.normal,color:"var(--accent-secondary)"},{pos:a.warm,color:"var(--accent-secondary)"},{pos:a.warm,color:"var(--signal-poor)"},{pos:a.hot,color:"var(--signal-poor)"},{pos:a.hot,color:"var(--accent-danger)"},{pos:100,color:"var(--accent-danger)"}].map(t=>{const s=e>0?t.pos/e*100:0;return`${t.color} ${Math.min(s,100)}%`}).join(", ")})`}function O(e,t){return e>=t.danger?"danger":e>=t.warning?"warning":"none"}function V(e){let t="none";for(const s of Object.values(e)){const e=O(s,U);if("danger"===e)return"danger";"warning"===e&&(t="warning")}return t}function W(e){let t,s,r;return e>=1073741824?(t=e/1073741824,s="GB/s"):e>=1048576?(t=e/1048576,s="MB/s"):e>=1024?(t=e/1024,s="KB/s"):(t=e,s="B/s"),r=t>=100?t.toFixed(0):t.toFixed(1),`${r} ${s}`}function I(e){return e>=1073741824?{value:(e/1073741824).toFixed(1),unit:"GiB"}:e>=1048576?{value:(e/1048576).toFixed(1),unit:"MiB"}:e>=1024?{value:(e/1024).toFixed(1),unit:"KiB"}:{value:String(e),unit:"B"}}const J=e.memo(function({level:e}){return"none"===e?null:t.jsxs("span",{className:s("inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium","danger"===e&&"bg-accent-danger/20 text-accent-danger","warning"===e&&"bg-accent-secondary/20 text-accent-secondary"),children:[t.jsx(b,{className:"w-3 h-3"}),"danger"===e?"High":"Warn"]})}),K=e.memo(function({value:e,max:s=100,width:r=10,color:a="primary"}){const n=Math.min(e/s,1),o=Math.round(n*r),c=r-o,l="■".repeat(o),i="·".repeat(c),m={primary:"text-accent-primary",secondary:"text-accent-secondary",success:"text-accent-success",danger:"text-accent-danger"}[a];return t.jsxs("span",{className:"font-mono text-[10px] tracking-tight",children:[t.jsx("span",{className:m,children:l}),t.jsx("span",{className:"text-text-muted/40",children:i})]})}),X=e.memo(function({index:e,usage:r}){const a=r>90?"danger":r>70?"secondary":"primary";return t.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono",children:[t.jsxs("span",{className:"text-text-muted w-5",children:["C",e]}),t.jsx(K,{value:r,width:8,color:a}),t.jsxs("span",{className:s("w-7 text-right tabular-nums",r>90?"text-accent-danger":r>70?"text-accent-secondary":"text-accent-success"),children:[r.toFixed(0),"%"]})]})}),q=e.memo(function({pid:e,name:r,cpu:a,mem:n,isTopCpu:o=!1,isTopMem:c=!1}){return t.jsxs("div",{className:"flex items-center gap-2 py-1 text-sm font-mono hover:bg-subtle-fill -mx-1 px-1 rounded",children:[t.jsx("span",{className:"text-text-muted w-14 tabular-nums",children:e}),t.jsx("span",{className:"flex-1 truncate text-text-primary",children:r}),t.jsx(K,{value:a,max:100,width:6,color:a>50?"danger":a>20?"secondary":"success"}),t.jsx("span",{className:s("w-12 text-right tabular-nums",o?"text-text-primary":a>50?"text-accent-danger":a>20?"text-accent-secondary":"text-text-muted"),children:a.toFixed(1)}),t.jsx("span",{className:s("w-12 text-right tabular-nums",c?"text-text-primary":n>50?"text-accent-danger":n>20?"text-accent-secondary":"text-text-muted"),children:n.toFixed(1)})]})}),Y=e.memo(function({value:e,label:s,min:r=20,max:a=100}){const n=Math.min(Math.max((e-r)/(a-r)*100,0),100),o=function(e){return e<30?{text:"Cool",color:"text-accent-tertiary"}:e<50?{text:"Normal",color:"text-accent-primary"}:e<65?{text:"Warm",color:"text-accent-secondary"}:e<80?{text:"Hot",color:"text-signal-poor"}:{text:"Danger",color:"text-accent-danger"}}(e),c=a-r;return t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-mono text-text-muted",children:s}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-mono text-text-muted",children:o.text}),t.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded text-sm font-mono tabular-nums",children:[t.jsx("span",{className:o.color,children:e.toFixed(1)}),t.jsx("span",{className:"text-text-primary",children:"°C"})]})]})]}),t.jsxs("div",{className:"relative h-3 bg-subtle-fill overflow-hidden",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 transition-all duration-300 ease-out",style:{background:G(n,r,a),width:`${n}%`}}),t.jsx("div",{className:"absolute inset-0 flex items-center pointer-events-none",children:H.map(({threshold:e,color:s})=>{const a=(e-r)/c*100;return a<0||a>100?null:t.jsx("div",{className:"absolute w-px h-full",style:{left:`${a}%`,backgroundColor:s}},e)})})]})]})});e.memo(function({data:e,color:s,flipped:r=!1,fixedSlots:a}){const n=[...Array(Math.max(0,a-e.length)).fill(0),...e.slice(-a)],o=Math.max(...n,1),c=n.map(e=>0===e?0:Math.max(e/o*100,3));return t.jsx("div",{className:"w-full h-full flex items-end",style:{transform:r?"scaleY(-1)":void 0},children:c.map((e,r)=>t.jsx("div",{className:"flex-1 min-w-0",style:{height:e>0?`${e}%`:"0%",backgroundColor:e>0?s:"transparent"}},r))})});const Z=e.memo(function({networkHistory:e,txRate:s,rxRate:r,totalBytesSent:a,totalBytesRecv:n,cpuColor:o,memoryColor:c,networkSlots:l}){return t.jsxs(f,{className:"flex flex-col",children:[t.jsx(v,{icon:t.jsx(M,{}),title:"Network",largeTitle:!0,actions:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(w,{className:"w-3.5 h-3.5",style:{color:c}}),t.jsx("span",{className:"text-xs font-mono",style:{color:c},children:"TX"}),t.jsx("span",{className:"px-2 py-1 bg-subtle-fill-strong rounded text-sm font-mono tabular-nums text-text-primary",children:W(s)})]})}),t.jsxs("div",{className:"flex flex-col h-[120px]",children:[t.jsx("div",{className:"h-[60px]",children:t.jsx(D,{data:e.map((e,t,s)=>{if(0===t)return 0;const r=(e.timestamp-s[t-1].timestamp)/1e3;return r>0?(e.bytesSent-s[t-1].bytesSent)/r:0}),color:c,fixedSlots:l})}),t.jsx("div",{className:"h-[60px]",children:t.jsx(D,{data:e.map((e,t,s)=>{if(0===t)return 0;const r=(e.timestamp-s[t-1].timestamp)/1e3;return r>0?(e.bytesRecv-s[t-1].bytesRecv)/r:0}),color:o,flipped:!0,fixedSlots:l})})]}),t.jsxs("div",{className:"pt-2 flex justify-between items-center text-sm font-mono",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-text-muted",children:"Total"}),t.jsxs("span",{className:"px-2 py-1 bg-subtle-fill-strong rounded tabular-nums",children:[t.jsx("span",{className:"text-accent-tertiary",children:I(a).value})," ",t.jsx("span",{className:"text-text-muted",children:I(a).unit})]}),t.jsxs("span",{className:"px-2 py-1 bg-subtle-fill-strong rounded tabular-nums",children:[t.jsx("span",{className:"text-accent-primary",children:I(n).value})," ",t.jsx("span",{className:"text-text-muted",children:I(n).unit})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(N,{className:"w-3.5 h-3.5",style:{color:o}}),t.jsx("span",{className:"text-xs font-mono",style:{color:o},children:"RX"}),t.jsx("span",{className:"px-2 py-1 bg-subtle-fill-strong rounded tabular-nums text-text-primary",children:W(r)})]})]})]})}),Q=e.memo(function({temperatures:e}){return t.jsxs(f,{className:"flex flex-col",children:[t.jsx(v,{icon:t.jsx(T,{}),title:"Temperature",largeTitle:!0,actions:e&&t.jsx(J,{level:V(e)})}),t.jsx("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:e&&Object.keys(e).length>0?t.jsxs("div",{className:"space-y-3",children:[void 0!==e.cpu_thermal&&t.jsx(Y,{value:e.cpu_thermal,label:"CPU",min:20,max:100}),Object.entries(e).filter(([e])=>"cpu_thermal"!==e).slice(0,2).map(([e,s])=>t.jsx(Y,{value:s,label:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),min:20,max:100},e))]}):t.jsxs("div",{className:"flex items-center justify-center text-text-muted text-sm",children:[t.jsx(k,{className:"w-4 h-4 mr-2"}),"No sensors"]})})]})}),ee=e.memo(function({usagePercent:e,used:s,available:r,memoryColor:a}){return t.jsxs(f,{className:"flex flex-col",children:[t.jsx(v,{icon:t.jsx(k,{}),title:"Memory",largeTitle:!0,actions:t.jsxs("span",{className:"px-2 py-0.5 bg-subtle-fill-strong rounded text-base font-mono tabular-nums",style:{color:a},children:[e.toFixed(0),"%"]})}),t.jsxs("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:[t.jsxs("div",{className:"flex gap-1 h-12",children:[t.jsx("div",{className:"h-full transition-all duration-300 bg-accent-primary",style:{width:`${e}%`}}),t.jsx("div",{className:"h-full transition-all duration-300 bg-accent-tertiary",style:{width:100-e+"%"}})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs font-mono pt-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-accent-primary"}),t.jsx("span",{className:"text-text-muted",children:"Used"}),t.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-text-primary",children:[(s/1048576).toFixed(0)," MB"]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-accent-tertiary"}),t.jsx("span",{className:"text-text-muted",children:"Avail"}),t.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-text-muted",children:[(r/1048576).toFixed(0)," MB"]})]})]})]})]})}),te=e.memo(function({usagePercent:e,used:s,free:r,cpuColor:a}){return t.jsxs(f,{className:"flex flex-col",children:[t.jsx(v,{icon:t.jsx(_,{}),title:"Disk",largeTitle:!0,actions:t.jsxs("span",{className:"px-2 py-0.5 bg-subtle-fill-strong rounded text-base font-mono tabular-nums",style:{color:a},children:[e.toFixed(0),"%"]})}),t.jsxs("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:[t.jsxs("div",{className:"flex gap-1 h-12",children:[t.jsx("div",{className:"h-full transition-all duration-300 bg-accent-primary",style:{width:`${e}%`}}),t.jsx("div",{className:"h-full transition-all duration-300 bg-accent-tertiary",style:{width:100-e+"%"}})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs font-mono pt-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-accent-primary"}),t.jsx("span",{className:"text-text-muted",children:"Used"}),t.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-text-primary",children:[(s/1073741824).toFixed(1)," GB"]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-accent-tertiary"}),t.jsx("span",{className:"text-text-muted",children:"Free"}),t.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-text-muted",children:[(r/1073741824).toFixed(1)," GB"]})]})]})]})]})}),se=e.memo(function({processes:e}){if(0===e.length)return null;const s=e.slice(0,10),r=Math.max(...s.map(e=>e.cpu_percent)),a=Math.max(...s.map(e=>e.memory_percent));return t.jsx(f,{noPadding:!0,children:t.jsxs("div",{className:"px-4 py-3",children:[t.jsx(v,{icon:t.jsx(k,{}),title:"Processes",largeTitle:!0}),t.jsxs("div",{className:"flex items-center gap-2 py-1.5 text-sm text-text-muted border-b border-border-subtle font-mono",children:[t.jsx("span",{className:"w-14",children:"PID"}),t.jsx("span",{className:"flex-1",children:"Program"}),t.jsx("span",{className:"w-[52px]"}),t.jsx("span",{className:"w-12 text-right",children:"CPU%"}),t.jsx("span",{className:"w-12 text-right",children:"MEM%"})]}),s.map(e=>t.jsx(q,{pid:e.pid,name:e.name,cpu:e.cpu_percent,mem:e.memory_percent,isTopCpu:e.cpu_percent===r&&r>0,isTopMem:e.memory_percent===a&&a>0},e.pid))]})})}),re=n.hero;function ae(){var r;const a=c(),o=l(),b=i(),w=m(),N=d(),[M,_]=e.useState([]),[T,B]=e.useState(!1),[P,$]=e.useState([]),[A,D]=e.useState(0),[U,H]=e.useState(0),G=e.useRef(null),V=x().primary,W=u().amber,I=function(){const[t,s]=e.useState("undefined"!=typeof window&&window.matchMedia("(max-width: 767px)").matches);return e.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)");s(e.matches);const t=e=>s(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),t?n.hero:40}();return e.useEffect(()=>{if(!a)return;const e=Date.now(),t={timestamp:e,bytesRecv:a.network.bytes_recv,bytesSent:a.network.bytes_sent};if(G.current){const s=(e-G.current.timestamp)/1e3;if(s>0){const e=(t.bytesRecv-G.current.bytesRecv)/s,r=(t.bytesSent-G.current.bytesSent)/s;e>=0&&r>=0&&(D(e),H(r))}}G.current=t,$(e=>[...e,t].slice(-re))},[a]),e.useEffect(()=>{let e=!0;const t=async()=>{var t;const s=await p();e&&s.success&&(null==(t=s.data)?void 0:t.processes)&&_(s.data.processes)};t();const s=setInterval(t,5e3);return()=>{e=!1,clearInterval(s)}},[]),t.jsxs(g,{children:[t.jsx(y,{title:"System Stats",icon:t.jsx(F,{}),controls:t.jsxs("button",{onClick:async()=>{var e;B(!0),await w();const t=await p();t.success&&(null==(e=t.data)?void 0:e.processes)&&_(t.data.processes),B(!1)},disabled:T,className:"flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 bg-bg-subtle hover:bg-bg-elevated radius-inner transition-base text-sm text-text-muted hover:text-text-primary self-start sm:self-auto",children:[t.jsx(R,{className:s("w-4 h-4",T&&"animate-spin")}),"Refresh"]})}),t.jsxs(j,{children:[b&&t.jsx(f,{className:"border border-accent-danger/50 bg-accent-danger/10",children:t.jsx("p",{className:"text-accent-danger",children:b})}),o?t.jsx(f,{className:"p-12 text-center",children:t.jsx("div",{className:"animate-pulse text-text-muted",children:"Loading system stats..."})}):a?t.jsxs(t.Fragment,{children:[t.jsx(C,{template:"hero",children:t.jsxs(f,{children:[t.jsx(v,{icon:t.jsx(k,{}),title:"System Resources",largeTitle:!0,actions:t.jsxs("div",{className:"flex items-center gap-4",children:[(null==(r=a.system)?void 0:r.uptime)&&t.jsx("span",{className:"px-2 py-0.5 bg-white/[0.04] rounded text-sm font-mono tabular-nums text-text-primary",children:h(a.system.uptime)}),t.jsx(J,{level:O(a.cpu.usage_percent,L)}),t.jsx(J,{level:O(a.memory.usage_percent,z)}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-mono text-text-muted",children:"CPU"}),t.jsxs("span",{className:"text-base font-mono font-semibold tabular-nums",style:{color:V},children:[a.cpu.usage_percent.toFixed(0),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-mono text-text-muted",children:"MEM"}),t.jsxs("span",{className:"text-base font-mono font-semibold tabular-nums",style:{color:W},children:[a.memory.usage_percent.toFixed(0),"%"]})]})]})}),t.jsx("div",{className:"flex-1 min-h-0 mt-2",children:t.jsx(E,{data:N,cpuColor:V,memoryColor:W})}),a.cpu.per_core_percent&&a.cpu.per_core_percent.length>0&&t.jsx("div",{className:"mt-3 pt-3 border-t border-border-subtle",children:t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-x-3 gap-y-0.5",children:a.cpu.per_core_percent.map((e,s)=>t.jsx(X,{index:s,usage:e},s))})})]})}),t.jsxs(C,{template:"compact",children:[t.jsx(S,{span:12,md:6,children:t.jsx(Z,{networkHistory:P,txRate:U,rxRate:A,totalBytesSent:a.network.bytes_sent,totalBytesRecv:a.network.bytes_recv,cpuColor:V,memoryColor:W,networkSlots:I})}),t.jsx(S,{span:12,md:6,children:t.jsx(Q,{temperatures:a.temperatures})})]}),t.jsxs(C,{template:"compact",children:[t.jsx(S,{span:6,children:t.jsx(ee,{usagePercent:a.memory.usage_percent,used:a.memory.used,available:a.memory.available,memoryColor:W})}),t.jsx(S,{span:6,children:t.jsx(te,{usagePercent:a.disk.usage_percent,used:a.disk.used,free:a.disk.free,cpuColor:V})})]}),t.jsx(C,{template:"auto",children:t.jsx(se,{processes:M})})]}):null]})]})}export{ae as default};
