import{cw as e}from"./index-D3Nm-OxI.js";import{r as a,j as c}from"./vendor-react-j_fHog8x.js";import{b as s,c as n}from"./keycap-sfx-CAsrNe23.js";async function t(a){return e("/api/acl_remove_client",{method:"POST",body:JSON.stringify(a)})}async function d(){return e("/api/acl_stats")}const r={a:"24,3 76,3 83,7 76,11 24,11 17,7",b:"88,22 93,27 93,71 88,76 83,71 83,27",c:"88,106 93,111 93,155 88,160 83,155 83,111",d:"24,171 76,171 83,175 76,179 24,179 17,175",e:"12,106 17,111 17,155 12,160 7,155 7,111",f:"12,22 17,27 17,71 12,76 7,71 7,27",g:"24,86 76,86 83,91 76,96 24,96 17,91"},i=Object.keys(r),o={0:"abcdef",1:"bc",2:"abdeg",3:"abcdg",4:"bcfg",5:"acdfg",6:"acdefg",7:"abc",8:"abcdefg",9:"abcdfg",A:"abcefg",B:"cdefg",C:"adef",D:"bcdeg",E:"adefg",F:"aefg",G:"acdef",H:"bcefg",I:"ef",J:"bcde",L:"def",M:"abcefg",N:"ceg",O:"abcdef",P:"abefg",Q:"abcfg",R:"eg",S:"acdfg",T:"defg",U:"bcdef",V:"cde",Y:"bcdfg",Z:"abdeg",a:"abcefg",b:"cdefg",c:"deg",d:"bcdeg",e:"adefg",f:"aefg",g:"abcdfg",h:"cefg",i:"c",j:"bcde",l:"def",m:"abcef",n:"ceg",o:"cdeg",p:"abefg",r:"eg",s:"acdfg",t:"defg",u:"cde",v:"cde",y:"bcdfg"," ":"",_:"d","-":"g","=":"dg","Â°":"abfg",'"':"bf","'":"f","(":"adef",")":"abcd","[":"adef","]":"abcd","!":"bc",".":"d"};function l(e,a){const c=Array.from(e).map(e=>o[e.toUpperCase()]??o[e]??""),s=Math.max(0,(a??0)-e.length);for(let n=0;n<s;n++)c.push("");return c}function g({text:e,color:s="currentColor",size:n=18,minChars:t,noCycle:d=!1,className:o}){const g=Math.round(n*(100/182)),f="light"===document.documentElement.dataset.mode?.08:.16,[u,b]=a.useState(null);a.useEffect(()=>{if(d)return;const a=l(e,t),c=6+2*(a.length-1);let s,n=0,r=!1;const o=()=>{r||(n++,n>=c?b(null):(b(a.map((e,a)=>n>=6+2*a?e:i.filter(()=>Math.random()>.45).join(""))),s=setTimeout(o,56)))};return o(),()=>{r=!0,clearTimeout(s)}},[e,t,d]);const m=l(e,t),p=u??m;return c.jsxs("span",{className:"seven-seg"+(o?` ${o}`:""),children:[p.map((e,a)=>((e,a)=>c.jsx("svg",{viewBox:"0 0 100 182",width:g,height:n,className:"seven-seg__char","aria-hidden":"true",children:i.map(a=>c.jsx("polygon",{points:r[a],fill:s,stroke:s,strokeWidth:4,strokeLinejoin:"round",opacity:e.includes(a)?1:f},a))},a))(e,`${a}-${e}`)),c.jsx("span",{className:"sr-only",children:e})]})}const f={grey:"/assets/keycap.svg",red:"/assets/keycap-red.svg"};function u({icon:e,variant:t="grey",onClick:d,onPress:r,sentDuration:i=2e3,title:o,disabled:l=!1,className:g,iconColor:u="#000000",iconActiveColor:b="#FFDEB0",indicators:m}){const p=!!r,[h,y]=a.useState("idle"),[k,j]=a.useState(!1),v=a.useRef(),x=p?"held"===h:k,N=p&&("sending"===h||"sent"===h),C=p?"held"===h||"sending"===h:k;a.useEffect(()=>()=>clearTimeout(v.current),[]);const _=a.useCallback(()=>{l||N||(s(),p?y("held"):j(!0))},[l,N,p]),T=a.useCallback(async()=>{if(p){if("held"!==h)return;n(),y("sending");const e=await r();y(e?"sent":"idle"),e&&(v.current=setTimeout(()=>y("idle"),i))}else{if(!k)return;j(!1),n(),null==d||d()}},[p,h,r,i,k,d]),$=a.useCallback(()=>{p?"held"===h&&(n(),y("idle")):(k&&n(),j(!1))},[p,h,k]),S=c.jsx("button",{onMouseDown:_,onMouseUp:T,onMouseLeave:$,onTouchStart:_,onTouchEnd:T,onTouchCancel:$,disabled:l||N,className:`keycap-btn${"red"===t?" keycap-btn--red-cap":""}${C?" keycap-btn--pressed":""}${g&&!m?` ${g}`:""}`,title:o,children:c.jsxs("div",{className:"keycap-wrap",children:[c.jsx("img",{src:f[t],alt:"",className:"keycap-btn__img",draggable:!1}),c.jsx("span",{className:"keycap-icon-overlay",style:{color:x||"sending"===h?b:u},children:e})]})});return(null==m?void 0:m.length)?c.jsxs("div",{className:"keycap-group"+(g?` ${g}`:""),children:[S,c.jsx("div",{className:"indicator-key-pair",children:m.map(e=>{const a=e.trackPress?h:e.active?"active":"idle";return c.jsxs("div",{className:"indicator-key"+("idle"!==a?` indicator-key--${a}`:""),children:[c.jsx("span",{className:"indicator-key__label",children:e.label}),c.jsx("span",{className:"indicator-key__led"})]},e.label)})})]}):S}export{u as K,g as S,d as g,t as r};
