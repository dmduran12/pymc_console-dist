import{c as e}from"./index-C00I5uLb.js";import{c as n,j as a,r}from"./vendor-react-54o2BuWt.js";const t=e("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),s=e("signal-high",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}]]),i=e("signal-low",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}]]),o=e("signal-medium",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}]]),l=e("signal-zero",[["path",{d:"M2 20h.01",key:"4haj6o"}]]),c=e("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),u={ADVERT:"purple",ACK:"emerald",REQ:"sky",RESPONSE:"sky",TXT_MSG:"teal",GRP_TXT:"teal",FLOOD:"sky",GRP_DATA:"indigo",PATH:"amber",MULTIPART:"violet",TRACE:"orange",ANON_REQ:"pink",RAW_CUSTOM:"fuchsia"},d={FLOOD:"sky",T_FLOOD:"sky",DIRECT:"cyan",T_DIRECT:"cyan"},p={rx:"sky",forward:"teal",duplicate:"zinc",tx:"amber",dropped:"rose"},x={neighbor:"amber",hub:"purple",gateway:"indigo",backbone:"purple",repeater:"teal",room:"pink",companion:"blue",client:"indigo",mobile:"orange"},f={hub:"amber",backbone:"purple",relay:"cyan",edge:"brown"},g={high:"green",medium:"amber",low:"orange",insufficient:"brown"},h={direct:"amber",multihop:"brown"},m={5:-2.5,6:-5,7:-7.5,8:-10,9:-12.5,10:-15,11:-17.5,12:-20},y={62500:{5:-123,6:-125,7:-127,8:-130,9:-133,10:-136,11:-138,12:-140},125e3:{5:-120,6:-122,7:-124,8:-127,9:-130,10:-133,11:-135,12:-137},25e4:{5:-117,6:-119,7:-121,8:-124,9:-127,10:-130,11:-132,12:-134},5e5:{5:-114,6:-116,7:-118,8:-121,9:-124,10:-127,11:-129,12:-131}};function M(e,n,a){if(null==e||!Number.isFinite(e))return null;if(null==n||!Number.isFinite(n))return null;const{sf:r,bwHz:t}=a,s=function(e){const n=Math.max(5,Math.min(12,Math.round(e)));return m[n]??m[7]}(r),i=function(e,n){let a=62500;a=e>=375e3?5e5:e>=187500?25e4:e>=93750?125e3:62500;const r=y[a];return r[Math.max(5,Math.min(12,Math.round(n)))]??r[7]}(t,r),o=e-s,l=n-i;return{snrMargin:o,rssiMargin:l,worstMargin:Math.min(o,l)}}const k={EXCELLENT:6,GOOD:3,FAIR:0},b={EXCELLENT:10,GOOD:6,FAIR:2},w=["excellent","good","fair","poor","critical"];function j(e,n){return e>=n.EXCELLENT?"excellent":e>=n.GOOD?"good":e>=n.FAIR?"fair":e>=n.FAIR-3?"poor":"critical"}function N(e,n){if(0===n)return e;const a=w.indexOf(e),r=Math.min(a+n,w.length-1);return w[r]}function v(e,n,a,r){const t=(s=j(e.snrMargin,k),i=j(e.rssiMargin,b),w.indexOf(s)>=w.indexOf(i)?s:i);var s,i;const o=N(t,n);return{baseGrade:t,finalGrade:o,snrMargin:e.snrMargin,rssiMargin:e.rssiMargin,worstMargin:e.worstMargin,nfPenalty:n,wasDowngraded:n>0&&o!==t,confidence:a,isMarginBased:r}}function E(e,n,a,r=0){return a&&null!=e?function(e,n,a,r=0){const t=M(e,n,a);return t?v(t,r,"high",!0):null}(e,n,a,r):null!=e&&null!=n?function(e,n,a=0){const r=function(e,n){return M(e,n,{sf:7,bwHz:62500})}(e,n);return r?v(r,a,"low",!0):null}(e,n,r):function(e,n=0){if(null==e||!Number.isFinite(e))return null;const a=function(e){return e>=-90?"excellent":e>=-100?"good":e>=-110?"fair":e>=-120?"poor":"critical"}(e),r=N(a,n);return{baseGrade:a,finalGrade:r,snrMargin:null,rssiMargin:null,worstMargin:null,nfPenalty:n,wasDowngraded:n>0&&r!==a,confidence:"low",isMarginBased:!1}}(n,r)}const A={excellent:"color(display-p3 0.00 1.00 0.00)",good:"color(display-p3 0.55 0.90 0.15)",fair:"color(display-p3 1.00 0.85 0.00)",weak:"color(display-p3 1.00 0.55 0.15)",poor:"color(display-p3 1.00 0.20 0.20)"},O={excellent:"#4ADE80",good:"#A3E635",fair:"#FACC15",weak:"#FB923C",poor:"#EF4444"};function T(e){return e>=-90?"excellent":e>=-100?"good":e>=-110?"fair":e>=-120?"weak":"poor"}function C(e,n){return n?{backgroundColor:O[e],"--p3-color":A[e]}:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}function R(e){return e?"signal-bar-active":""}function D({rssi:e,className:r="w-4 h-4"}){const t=T(e),u=function(e){switch(e){case"excellent":return"text-signal-excellent";case"good":return"text-signal-good";case"fair":return"text-signal-fair";case"weak":return"text-signal-poor";case"poor":return"text-signal-critical";default:return"text-text-muted"}}(t),d=n(u,r);switch(t){case"excellent":return a.jsx(c,{className:d});case"good":return a.jsx(s,{className:d});case"fair":return a.jsx(o,{className:d});case"weak":return a.jsx(i,{className:d});default:return a.jsx(l,{className:d})}}const F=r.memo(function({rssi:e,snr:r,compact:t=!1,showValues:s=!0,radioConfig:i,nfPenalty:o=0}){const l=void 0!==r?function(e,n,a,r=0){const t=E(n,e,a,r);return t?function(e){switch(e){case"excellent":return"excellent";case"good":return"good";case"fair":return"fair";case"poor":return"weak";case"critical":return"poor"}}(t.finalGrade):T(e)}(e,r,i,o):T(e),c={excellent:4,good:3,fair:2,weak:1,poor:0}[l];return t?a.jsxs("div",{className:"flex items-center gap-1.5",children:[s&&a.jsx("span",{className:"text-[10px] font-mono text-text-secondary tabular-nums w-[32px] text-left",children:e}),a.jsx("div",{className:"flex items-end gap-[2px] h-3 w-[14px]",children:Array.from({length:4}).map((e,r)=>a.jsx("div",{className:n("w-[3px] rounded-[1px] transition-colors",R(r<c)),style:{height:(r+1)/4*100+"%",...C(l,r<c)}},r))})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[s&&a.jsxs("div",{className:"flex flex-col items-start w-[52px]",children:[a.jsxs("span",{className:"text-xs font-mono text-text-secondary leading-tight tabular-nums",children:[e," dBm"]}),void 0!==r&&a.jsxs("span",{className:"text-[10px] font-mono text-text-muted leading-tight tabular-nums",children:[r.toFixed(1)," dB"]})]}),a.jsx("div",{className:"flex items-end gap-[2px] h-3.5 w-[14px]",children:Array.from({length:4}).map((e,r)=>a.jsx("div",{className:n("w-[3px] rounded-[1px] transition-colors",R(r<c)),style:{height:(r+1)/4*100+"%",...C(l,r<c)}},r))})]})});function G(e){const n=T(e);return n.charAt(0).toUpperCase()+n.slice(1)}export{t as C,p as D,h as H,f as N,u as P,d as R,F as S,c as a,x as b,D as c,g as d,G as g,E as s};
