import{c as e,j as s,a0 as a,a1 as t,d as l,a2 as c,a3 as n,a4 as r,o as i,a5 as o,a6 as d}from"./index-BA-LoFOy.js";import{c as m,b as x}from"./recharts-bmHCCfxU.js";import{u as p}from"./usePolling-DMtQdE_y.js";import{P as h,a as u,C as j,b as f}from"./PageLayout-BVrxHani.js";import{C as g}from"./circle-XCBuG0eA.js";import{R as y}from"./refresh-cw-Di1wuK5R.js";import{I as N}from"./info-C4_AIqlt.js";import{L as v}from"./loader-circle-DJ5Po0GD.js";import"./maplibre-gl-CFO9X1Ek.js";const b=e("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function w({className:e,style:a}){return s.jsx("div",{className:m("animate-pulse bg-white/[0.06] rounded",e),style:a})}function k(){return s.jsx("div",{className:"p-3 rounded-lg border border-border-subtle bg-bg-subtle",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(w,{className:"w-14 h-6 rounded shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[s.jsx(w,{className:"h-4 w-full"}),s.jsx(w,{className:"h-4 w-3/4"}),s.jsx(w,{className:"h-3 w-32 mt-1"})]})]})})}function M({count:e=8}){return s.jsx("div",{className:"space-y-2",children:Array.from({length:e}).map((e,a)=>s.jsx(k,{},a))})}const C=x.memo(function({log:e}){const a=d(e.level);return s.jsx("div",{className:"p-3 rounded-2xl bg-white/[0.02] hover:bg-white/[0.04] transition-colors",children:s.jsxs("div",{className:"flex items-baseline gap-3",children:[s.jsx("span",{className:m("type-data-sm w-14 shrink-0",a),children:e.level}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"type-data-sm text-text-primary break-words whitespace-pre-wrap",children:e.message}),s.jsx("p",{className:"type-data-xs text-text-muted mt-1",children:new Date(e.timestamp).toLocaleString()})]})]})})});function F(){const e=a(),[t,l]=x.useState("INFO"),[c,n]=x.useState(!1),[r,i]=x.useState(null);x.useEffect(()=>{if(e.length>0){const s=e.some(e=>"DEBUG"===e.level);l(s?"DEBUG":"INFO")}},[e]);const d=x.useCallback(async e=>{if(e!==t&&!c){n(!0),i(null);try{const s=await o(e);s.success&&s.data?(l(e),i(s.data.message),setTimeout(()=>i(null),5e3)):(i(s.error||"Failed to change log level"),setTimeout(()=>i(null),3e3))}catch{i("Failed to change log level"),setTimeout(()=>i(null),3e3)}finally{n(!1)}}},[t,c]);return s.jsxs("div",{className:"flex items-center gap-2",children:[r&&s.jsx("span",{className:"text-xs text-text-muted animate-pulse",children:r}),s.jsxs("div",{className:"flex bg-white/[0.02] rounded-full p-1",children:[s.jsxs("button",{onClick:()=>d("INFO"),disabled:c,className:m("h-[32px] px-4 rounded-full type-data flex items-center gap-2 transition-colors","INFO"===t?"bg-accent-primary/20 text-accent-primary":"text-text-muted hover:text-text-secondary",c&&"opacity-50 cursor-not-allowed"),children:[s.jsx(N,{className:"w-4 h-4"}),"Info"]}),s.jsxs("button",{onClick:()=>d("DEBUG"),disabled:c,className:m("h-[32px] px-4 rounded-full type-data flex items-center gap-2 transition-colors","DEBUG"===t?"bg-amber-500/20 text-amber-400":"text-text-muted hover:text-text-secondary",c&&"opacity-50 cursor-not-allowed"),children:[c?s.jsx(v,{className:"w-4 h-4 animate-spin"}):s.jsx(b,{className:"w-4 h-4"}),"Debug"]})]})]})}function L(){const e=a(),o=t(),d=l(),x=c(),N=n();return p(x,i.logs,d),s.jsxs(h,{children:[s.jsx(u,{title:"System Logs",icon:s.jsx(r,{}),controls:s.jsxs(s.Fragment,{children:[s.jsx(F,{}),d&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(g,{className:"w-2 h-2 fill-accent-success text-accent-success animate-pulse"}),s.jsx("span",{className:"text-text-muted",children:"Live"})]}),s.jsxs("button",{onClick:()=>N(!d),className:m("h-[32px] px-4 rounded-full type-data transition-colors","flex items-center gap-2",d?"bg-accent-success/20 text-accent-success":"bg-white/[0.02] text-text-muted hover:text-text-secondary"),children:[s.jsx(y,{className:m("w-4 h-4",d&&"animate-spin")}),s.jsx("span",{className:"hidden xs:inline",children:d?"Live":"Paused"})]})]})}),s.jsxs(j,{noPadding:!0,children:[s.jsx(f,{listHeader:!0,icon:s.jsx(r,{className:"icon-sm"}),title:"Log Entries"}),s.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] sm:max-h-[calc(100vh-250px)] overflow-y-auto p-4",children:o&&0===e.length?s.jsx(M,{count:10}):0===e.length?s.jsx("div",{className:"text-center py-12 text-text-muted",children:"No logs available"}):e.map((e,a)=>s.jsx(C,{log:e},`${e.timestamp}-${a}`))})]})]})}export{L as default};
