import{c as e}from"./index-BEGs1H7j.js";import{r as t,j as s,c as n}from"./vendor-react-j_fHog8x.js";const a=e("message-square-text",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]]),l=["#22c55e","#3b82f6","#f59e0b","#ec4899","#8b5cf6","#06b6d4","#f97316","#84cc16"];function r(e){let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return l[Math.abs(t)%l.length]}const i=new RegExp("(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu");function c(e){const t=e.match(i);return t&&t.length>0?{emoji:t[0],cleanName:e.replace(i,"").trim()||e}:{emoji:null,cleanName:e}}function o(e){const{cleanName:t}=c(e),s=t.split(/[\s-_]+/).filter(Boolean);return s.length>=2?((Array.from(s[0])[0]||"")+(Array.from(s[1])[0]||"")).toUpperCase():Array.from(t).slice(0,2).join("").toUpperCase()}function d(e){return new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}function m(e){const s=/@\[([^\]]+)\]/g,n=[];let a,l=0;for(;null!==(a=s.exec(e));)a.index>l&&n.push(e.slice(l,a.index)),n.push(t.createElement("span",{key:a.index,className:"font-extrabold text-white"},a[1])),l=a.index+a[0].length;return l<e.length&&n.push(e.slice(l)),n.length>0?n:e}const x=t.memo(function({senderName:e,text:t,timestamp:a,nameAccessory:l,bubbleAccessory:i,className:x}){const{emoji:u,cleanName:h}=c(e),p=r(h),f=o(e);return s.jsxs("div",{className:n("group flex items-start gap-3 w-full",x),children:[s.jsxs("div",{className:"flex-shrink-0 w-9 flex flex-col items-center gap-1",children:[s.jsx("div",{className:n("w-9 h-9 rounded-full flex items-center justify-center","shadow-md ring-1 ring-border-subtle",u?"text-lg":"text-white text-[13px] font-bold tracking-tight"),style:{backgroundColor:p},children:u||f}),s.jsx("span",{className:"text-[10px] text-text-muted tabular-nums h-4 leading-4",children:d(a)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 h-5 mb-1",children:[s.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:p,lineHeight:"20px"},children:h}),l]}),s.jsxs("div",{className:"flex items-end gap-1.5",children:[s.jsx("div",{className:n("inline-block px-3.5 py-2.5 max-w-full","rounded-2xl rounded-tl-md","bg-[#007AFF]"),children:s.jsx("p",{className:"text-sm text-white leading-relaxed tracking-wide whitespace-pre-wrap break-words",children:m(t)})}),i]})]})]})});function u({text:e}){return s.jsx("div",{className:"flex justify-center my-1",children:s.jsx("span",{className:n("px-3 py-1 rounded-full","bg-subtle-fill text-[11px] text-text-muted/80 font-medium","ring-1 ring-border-subtle"),children:e})})}export{x as C,a as M,u as S,o as a,c as e,m as f,r as g};
