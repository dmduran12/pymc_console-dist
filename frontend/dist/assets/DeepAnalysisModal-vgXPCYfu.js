import{c as e,aq as t,bE as a,ar as s,m as i,bF as n,aC as c}from"./index-W7HOJkA3.js";import{r,j as l,c as m}from"./vendor-react-54o2BuWt.js";import{C as d}from"./DataBox-B3hWOq8z.js";import{G as o}from"./git-branch-vNLafFY9.js";import{D as x}from"./house-BPur0bhT.js";import{L as p}from"./loader-circle-BFq8BFSi.js";const h=e("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),y=e("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),j=e("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),g=e("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);function u({label:e,icon:t,status:a,detail:s}){return l.jsxs("div",{className:m("flex items-center gap-3 py-3 px-4 rounded-xl transition-all duration-300","active"===a&&"bg-accent-primary/10","complete"===a&&"bg-accent-primary/10 ring-2 ring-inset ring-accent-primary","pending"===a&&"opacity-40"),children:[l.jsx("div",{className:m("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-all duration-300","active"===a&&"bg-accent-primary/20","complete"===a&&"bg-accent-primary/20","pending"===a&&"bg-subtle-fill"),children:"complete"===a?l.jsx(d,{className:"w-4 h-4 text-accent-primary"}):"active"===a?l.jsx(p,{className:"w-4 h-4 animate-spin text-accent-primary"}):l.jsx("span",{className:"text-text-muted",children:t})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:m("text-sm font-medium transition-colors","active"===a&&"text-accent-primary","complete"===a&&"text-accent-primary","pending"===a&&"text-text-muted"),children:e}),s&&"pending"!==a&&l.jsx("div",{className:"text-xs text-text-muted mt-0.5 truncate",children:s})]})]})}const f=r.memo(function({isOpen:e,currentStep:r,packetCount:m,onClose:p}){const y="complete"===r,j=e=>{const t=["fetching","analyzing","building","discovering","complete"],a=t.indexOf(r),s=t.indexOf(e);return s<a?"complete":s===a?"active":"pending"},g=p??(()=>{});return l.jsx(t,{open:e,onClose:g,size:"sm",bottomSheet:!1,children:l.jsx(a,{isLoading:!y,borderRadius:16,children:l.jsx(s,{className:"p-6",children:y?l.jsxs("div",{className:"flex flex-col items-center py-6",children:[l.jsx(i.div,{variants:n,initial:"hidden",animate:"visible",className:"w-16 h-16 rounded-full flex items-center justify-center mb-4 bg-accent-primary/20",children:l.jsx(d,{className:"w-8 h-8 text-accent-primary"})}),l.jsx("h3",{className:"text-lg font-semibold text-accent-primary",children:"Ready!"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-accent-primary/15",children:l.jsx(o,{className:"w-5 h-5 text-accent-primary"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-semibold text-text-primary",children:"Deep Analysis"}),l.jsx("p",{className:"text-xs text-text-muted",children:"Building mesh topology"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(u,{label:"Fetching Packets",icon:l.jsx(h,{className:"w-4 h-4"}),status:j("fetching"),detail:m>0?`${m.toLocaleString()} packets`:"Loading database..."}),l.jsx(u,{label:"Analyzing Database",icon:l.jsx(x,{className:"w-4 h-4"}),status:j("analyzing"),detail:"Processing packet paths"}),l.jsx(u,{label:"Building Topology",icon:l.jsx(o,{className:"w-4 h-4"}),status:j("building"),detail:"Computing mesh edges"}),l.jsx(u,{label:"Discovering Nodes",icon:l.jsx(c,{className:"w-4 h-4"}),status:j("discovering"),detail:"Viterbi HMM ghost detection"})]}),l.jsx("p",{className:"text-xs text-text-muted text-center mt-5",children:"This may take a few seconds..."})]})})})})});export{f as D,y as E,g as M,j as a,h as b};
