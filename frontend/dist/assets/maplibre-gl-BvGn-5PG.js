const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-aaDJVzOI.js","assets/maplibre-gl-DsiI67my.js"])))=>i.map(i=>d[i]);
import{b as t,g as o}from"./recharts-CGff6_7g.js";import{_ as n}from"./index-B6-Tf7Us.js";const e=t.createContext(null);function r(){var o;const n=null==(o=t.useContext(e))?void 0:o.maps,r=t.useContext(b);return t.useMemo(()=>({...n,current:null==r?void 0:r.map}),[n,r])}function i(t,o){if(t===o)return!0;if(!t||!o)return!1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],o[n]))return!1;return!0}if(Array.isArray(o))return!1;if("object"==typeof t&&"object"==typeof o){const n=Object.keys(t),e=Object.keys(o);if(n.length!==e.length)return!1;for(const r of n){if(!o.hasOwnProperty(r))return!1;if(!i(t[r],o[r]))return!1}return!0}return!1}function s(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function c(t,o){const n=o.viewState||o,e={};if("longitude"in n&&"latitude"in n&&(n.longitude!==t.center.lng||n.latitude!==t.center.lat)){const o=t.center.constructor;e.center=new o(n.longitude,n.latitude)}return"zoom"in n&&n.zoom!==t.zoom&&(e.zoom=n.zoom),"bearing"in n&&n.bearing!==t.bearing&&(e.bearing=n.bearing),"pitch"in n&&n.pitch!==t.pitch&&(e.pitch=n.pitch),n.padding&&t.padding&&!i(n.padding,t.padding)&&(e.padding=n.padding),e}const u=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function l(t){if(!t)return null;if("string"==typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const o={};for(const e of t.layers)o[e.id]=e;const n=t.layers.map(t=>{let n=null;"interactive"in t&&(n=Object.assign({},t),delete n.interactive);const e=o[t.ref];if(e){n=n||Object.assign({},t),delete n.ref;for(const t of u)t in e&&(n[t]=e[t])}return n||t});return{...t,layers:n}}const a={version:8,sources:{},layers:[]},f={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},d={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},h={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},m=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],p=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class v{constructor(t,o,n){this.t=null,this.o=!1,this.i=null,this.u=null,this.l={},this.h=t=>{const o=this.props[h[t.type]];o?o(t):t.type},this.p=t=>{if(this.o)return;t.viewState=this.u||s(this.t.transform);const o=this.props[d[t.type]];o&&o(t)},this.v=t=>this.o?t:(this.u=s(t),c(t,this.props)),this.L=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this.S(t);const o=this.props[f[t.type]];o&&(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type&&(t.features=this.i||this.M(t.point)),o(t),delete t.features)},this.j=t,this.props=o,this.P(n)}get map(){return this.t}setProps(t){const o=this.props;this.props=t;const n=this.k(t,o),e=this._(t),r=this.Z(t);this.R(t,o),this.C(t),this.T(t,o),(n||e||r&&!this.t.isMoving())&&this.redraw()}static reuse(t,o){const n=v.savedMaps.pop();if(!n)return null;const e=n.map,r=e.getContainer();for(o.className=r.className;r.childNodes.length>0;)o.appendChild(r.childNodes[0]);e.A=o;const i=e.D;i&&(i.disconnect(),i.observe(o)),n.setProps({...t,styleDiffing:!1}),e.resize();const{initialViewState:s}=t;return s&&(s.bounds?e.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):n.Z(s)),e.isStyleLoaded()?e.fire("load"):e.once("style.load",()=>e.fire("load")),e.O(),n}P(t){const{props:o}=this,{mapStyle:n=a}=o,e={...o,...o.initialViewState,container:t,style:l(n)},r=e.initialViewState||e.viewState||e;if(Object.assign(e,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),o.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,o.gl)}const i=new this.j(e);r.padding&&i.setPadding(r.padding),o.cursor&&(i.getCanvas().style.cursor=o.cursor),i.transformCameraUpdate=this.v,i.on("style.load",()=>{var t;this.l={light:i.getLight(),sky:i.getSky(),projection:null==(t=i.getProjection)?void 0:t.call(i),terrain:i.getTerrain()},this.C(this.props)}),i.on("sourcedata",()=>{this.C(this.props)});for(const s in f)i.on(s,this.L);for(const s in d)i.on(s,this.p);for(const s in h)i.on(s,this.h);this.t=i}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");null==t||t.remove(),v.savedMaps.push(this)}destroy(){this.t.remove()}redraw(){const t=this.t;t.style&&(t.I&&(t.I.cancel(),t.I=null),t.H())}_(t){const{viewState:o}=t;if(o){const t=this.t;if(o.width!==t.transform.width||o.height!==t.transform.height)return t.resize(),!0}return!1}Z(t){const o=this.t,n=o.transform;if(!o.isMoving()){const e=c(n,t);if(Object.keys(e).length>0)return this.o=!0,o.jumpTo(e),this.o=!1,!0}return!1}k(t,o){const n=this.t;let e=!1;for(const r of m)if(r in t&&!i(t[r],o[r])){e=!0;const o=n[`set${r[0].toUpperCase()}${r.slice(1)}`];null==o||o.call(n,t[r])}return e}R(t,o){if(t.cursor!==o.cursor&&(this.t.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==o.mapStyle){const{mapStyle:o=a,styleDiffing:n=!0}=t,e={diff:n};"localIdeographFontFamily"in t&&(e.localIdeographFontFamily=t.localIdeographFontFamily),this.t.setStyle(l(o),e)}}C({light:t,projection:o,sky:n,terrain:e}){var r,s;const c=this.t,u=this.l;c.style.B&&(t&&!i(t,u.light)&&(u.light=t,c.setLight(t)),o&&!i(o,u.projection)&&o!==(null==(r=u.projection)?void 0:r.type)&&(u.projection="string"==typeof o?{type:o}:o,null==(s=c.setProjection)||s.call(c,u.projection)),n&&!i(n,u.sky)&&(u.sky=n,c.setSky(n)),void 0===e||i(e,u.terrain)||e&&!c.getSource(e.source)||(u.terrain=e,c.setTerrain(e)))}T(t,o){const n=this.t;for(const e of p){const r=t[e]??!0;i(r,o[e]??!0)||(r?n[e].enable(r):n[e].disable())}}M(t){const o=this.t,{interactiveLayerIds:n=[]}=this.props;try{return o.queryRenderedFeatures(t,{layers:n.filter(o.getLayer.bind(o))})}catch{return[]}}S(t){var o;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=t.type,e=(null==(o=this.i)?void 0:o.length)>0,r=this.M(t.point),i=r.length>0;!i&&e&&(t.type="mouseleave",this.L(t)),this.i=r,i&&!e&&(t.type="mouseenter",this.L(t)),t.type=n}else this.i=null}}v.savedMaps=[];const y=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];const g="undefined"!=typeof document?t.useLayoutEffect:t.useEffect,b=t.createContext(null),w=t.forwardRef(function(o,r){const i=t.useContext(e),[s,c]=t.useState(null),u=t.useRef(),{current:l}=t.useRef({mapLib:null,map:null});t.useEffect(()=>{const t=o.mapLib;let e,r=!0;return Promise.resolve(t||n(()=>import("./maplibre-gl-aaDJVzOI.js").then(t=>t.m),__vite__mapDeps([0,1]))).then(t=>{if(!r)return;if(!t)throw new Error("Invalid mapLib");const n="Map"in t?t:t.default;if(!n.Map)throw new Error("Invalid mapLib");!function(t,o){const{RTLTextPlugin:n,maxParallelImageRequests:e,workerCount:r,workerUrl:i}=o;if(n&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()){const{pluginUrl:o,lazy:e=!0}="string"==typeof n?{pluginUrl:n}:n;t.setRTLTextPlugin(o,t=>{},e)}void 0!==e&&t.setMaxParallelImageRequests(e),void 0!==r&&t.setWorkerCount(r),void 0!==i&&t.setWorkerUrl(i)}(n,o),o.reuseMaps&&(e=v.reuse(o,u.current)),e||(e=new v(n.Map,o,u.current)),l.map=function(t){if(!t)return null;const o=t.map,n={getMap:()=>o};for(const e of function(t){const o=new Set;let n=t;for(;n;){for(const e of Object.getOwnPropertyNames(n))"_"!==e[0]&&"function"==typeof t[e]&&"fire"!==e&&"setEventedParent"!==e&&o.add(e);n=Object.getPrototypeOf(n)}return Array.from(o)}(o))e in n||y.includes(e)||(n[e]=o[e].bind(o));return n}(e),l.mapLib=n,c(e),null==i||i.onMapMount(l.map,o.id)}).catch(t=>{const{onError:n}=o;n&&n({type:"error",target:null,originalEvent:null,error:t})}),()=>{r=!1,e&&(null==i||i.onMapUnmount(o.id),o.reuseMaps?e.recycle():e.destroy())}},[]),g(()=>{s&&s.setProps(o)}),t.useImperativeHandle(r,()=>l.map,[s]);const a=t.useMemo(()=>({position:"relative",width:"100%",height:"100%",...o.style}),[o.style]);return t.createElement("div",{id:o.id,ref:u,style:a},s&&t.createElement(b.Provider,{value:l},t.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},o.children)))}),x=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function L(t,o){if(!t||!o)return;const n=t.style;for(const e in o){const t=o[e];Number.isFinite(t)&&!x.test(e)?n[e]=`${t}px`:n[e]=t}}function S(t,o){if(t===o)return null;const n=M(t),e=M(o),r=[];for(const i of e)n.has(i)||r.push(i);for(const i of n)e.has(i)||r.push(i);return 0===r.length?null:r}function M(t){return new Set(t?t.trim().split(/\s+/):[])}const E=t.memo(t.forwardRef((n,e)=>{const{map:r,mapLib:i}=t.useContext(b),s=t.useRef({props:n}),c=t.useMemo(()=>{let o=!1;t.Children.forEach(n.children,t=>{t&&(o=!0)});const e={...n,element:o?document.createElement("div"):void 0},r=new i.Marker(e);return r.setLngLat([n.longitude,n.latitude]),r.getElement().addEventListener("click",t=>{var o,n;null==(n=(o=s.current.props).onClick)||n.call(o,{type:"click",target:r,originalEvent:t})}),r.on("dragstart",t=>{var o,n;const e=t;e.lngLat=c.getLngLat(),null==(n=(o=s.current.props).onDragStart)||n.call(o,e)}),r.on("drag",t=>{var o,n;const e=t;e.lngLat=c.getLngLat(),null==(n=(o=s.current.props).onDrag)||n.call(o,e)}),r.on("dragend",t=>{var o,n;const e=t;e.lngLat=c.getLngLat(),null==(n=(o=s.current.props).onDragEnd)||n.call(o,e)}),r},[]);t.useEffect(()=>(c.addTo(r.getMap()),()=>{c.remove()}),[]);const{longitude:u,latitude:l,offset:a,style:f,draggable:d=!1,popup:h=null,rotation:m=0,rotationAlignment:p="auto",pitchAlignment:v="auto"}=n;t.useEffect(()=>{L(c.getElement(),f)},[f]),t.useImperativeHandle(e,()=>c,[]);const y=s.current.props;c.getLngLat().lng===u&&c.getLngLat().lat===l||c.setLngLat([u,l]),a&&!function(t,o){const n=Array.isArray(t)?t[0]:t?t.x:0,e=Array.isArray(t)?t[1]:t?t.y:0,r=Array.isArray(o)?o[0]:o?o.x:0,i=Array.isArray(o)?o[1]:o?o.y:0;return n===r&&e===i}(c.getOffset(),a)&&c.setOffset(a),c.isDraggable()!==d&&c.setDraggable(d),c.getRotation()!==m&&c.setRotation(m),c.getRotationAlignment()!==p&&c.setRotationAlignment(p),c.getPitchAlignment()!==v&&c.setPitchAlignment(v),c.getPopup()!==h&&c.setPopup(h);const g=S(y.className,n.className);if(g)for(const t of g)c.toggleClassName(t);return s.current.props=n,o.createPortal(n.children,c.getElement())})),j=t.memo(t.forwardRef((n,e)=>{const{map:r,mapLib:s}=t.useContext(b),c=t.useMemo(()=>document.createElement("div"),[]),u=t.useRef({props:n}),l=t.useMemo(()=>{const t={...n},o=new s.Popup(t);return o.setLngLat([n.longitude,n.latitude]),o.once("open",t=>{var o,n;null==(n=(o=u.current.props).onOpen)||n.call(o,t)}),o},[]);if(t.useEffect(()=>{const t=t=>{var o,n;null==(n=(o=u.current.props).onClose)||n.call(o,t)};return l.on("close",t),l.setDOMContent(c).addTo(r.getMap()),()=>{l.off("close",t),l.isOpen()&&l.remove()}},[]),t.useEffect(()=>{L(l.getElement(),n.style)},[n.style]),t.useImperativeHandle(e,()=>l,[]),l.isOpen()){const t=u.current.props;l.getLngLat().lng===n.longitude&&l.getLngLat().lat===n.latitude||l.setLngLat([n.longitude,n.latitude]),n.offset&&!i(t.offset,n.offset)&&l.setOffset(n.offset),t.anchor===n.anchor&&t.maxWidth===n.maxWidth||(l.options.anchor=n.anchor,l.setMaxWidth(n.maxWidth));const o=S(t.className,n.className);if(o)for(const n of o)l.toggleClassName(n);u.current.props=n}return o.createPortal(n.children,c)}));function z(o,n,e,r){const i=t.useContext(b),s=t.useMemo(()=>o(i),[]);return t.useEffect(()=>{const t=n,o="function"==typeof n?n:null,{map:e}=i;return e.hasControl(s)||e.addControl(s,null==t?void 0:t.position),()=>{o&&o(i),e.hasControl(s)&&e.removeControl(s)}},[]),s}t.memo(function(o){const n=z(({mapLib:t})=>new t.AttributionControl(o),{position:o.position});return t.useEffect(()=>{L(n.A,o.style)},[o.style]),null}),t.memo(function(o){const n=z(({mapLib:t})=>new t.FullscreenControl({container:o.containerId&&document.getElementById(o.containerId)}),{position:o.position});return t.useEffect(()=>{L(n.F,o.style)},[o.style]),null}),t.memo(t.forwardRef(function(o,n){const e=t.useRef({props:o}),r=z(({mapLib:t})=>{const n=new t.GeolocateControl(o),r=n.U;return n.U=()=>{n.A.hasChildNodes()||r()},n.on("geolocate",t=>{var o,n;null==(n=(o=e.current.props).onGeolocate)||n.call(o,t)}),n.on("error",t=>{var o,n;null==(n=(o=e.current.props).onError)||n.call(o,t)}),n.on("outofmaxbounds",t=>{var o,n;null==(n=(o=e.current.props).onOutOfMaxBounds)||n.call(o,t)}),n.on("trackuserlocationstart",t=>{var o,n;null==(n=(o=e.current.props).onTrackUserLocationStart)||n.call(o,t)}),n.on("trackuserlocationend",t=>{var o,n;null==(n=(o=e.current.props).onTrackUserLocationEnd)||n.call(o,t)}),n},{position:o.position});return e.current.props=o,t.useImperativeHandle(n,()=>r,[]),t.useEffect(()=>{L(r.A,o.style)},[o.style]),null}));const P=t.memo(function(o){const n=z(({mapLib:t})=>new t.NavigationControl(o),{position:o.position});return t.useEffect(()=>{L(n.A,o.style)},[o.style]),null}),k=t.memo(function(o){const n=z(({mapLib:t})=>new t.ScaleControl(o),{position:o.position}),e=t.useRef(o),r=e.current;e.current=o;const{style:i}=o;return void 0!==o.maxWidth&&o.maxWidth!==r.maxWidth&&(n.options.maxWidth=o.maxWidth),void 0!==o.unit&&o.unit!==r.unit&&n.setUnit(o.unit),t.useEffect(()=>{L(n.A,i)},[i]),null});function _(t,o){if(!t)throw new Error(o)}t.memo(function(o){const n=z(({mapLib:t})=>new t.TerrainControl(o),{position:o.position});return t.useEffect(()=>{L(n.A,o.style)},[o.style]),null}),t.memo(function(o){const n=z(({mapLib:t})=>new t.LogoControl(o),{position:o.position});return t.useEffect(()=>{L(n.A,o.style)},[o.style]),null});let Z=0;function R(o){const n=t.useContext(b).map.getMap(),e=t.useRef(o),[,r]=t.useState(0),s=t.useMemo(()=>o.id||"jsx-source-"+Z++,[]);t.useEffect(()=>{if(n){const t=()=>setTimeout(()=>r(t=>t+1),0);return n.on("styledata",t),t(),()=>{var o;if(n.off("styledata",t),n.style&&n.style.B&&n.getSource(s)){const t=null==(o=n.getStyle())?void 0:o.layers;if(t)for(const o of t)o.source===s&&n.removeLayer(o.id);n.removeSource(s)}}}},[n]);let c=n&&n.style&&n.getSource(s);return c?function(t,o,n){var e,r,s;_(o.id===n.id,"source id changed"),_(o.type===n.type,"source type changed");let c="",u=0;for(const a in o)"children"===a||"id"===a||i(n[a],o[a])||(c=a,u++);if(!u)return;const l=o.type;if("geojson"===l)t.setData(o.data);else if("image"===l)t.updateImage({url:o.url,coordinates:o.coordinates});else switch(c){case"coordinates":null==(e=t.setCoordinates)||e.call(t,o.coordinates);break;case"url":null==(r=t.setUrl)||r.call(t,o.url);break;case"tiles":null==(s=t.setTiles)||s.call(t,o.tiles)}}(c,o,e.current):c=function(t,o,n){if(t.style&&t.style.B){const e={...n};return delete e.id,delete e.children,t.addSource(o,e),t.getSource(o)}return null}(n,s,o),e.current=o,c&&t.Children.map(o.children,o=>o&&t.cloneElement(o,{source:s}))||null}let C=0;function T(o){const n=t.useContext(b).map.getMap(),e=t.useRef(o),[,r]=t.useState(0),s=t.useMemo(()=>o.id||"jsx-layer-"+C++,[]);if(t.useEffect(()=>{if(n){const t=()=>r(t=>t+1);return n.on("styledata",t),t(),()=>{n.off("styledata",t),n.style&&n.style.B&&n.getLayer(s)&&n.removeLayer(s)}}},[n]),n&&n.style&&n.getLayer(s))try{!function(t,o,n,e){if(_(n.id===e.id,"layer id changed"),_(n.type===e.type,"layer type changed"),"custom"===n.type||"custom"===e.type)return;const{layout:r={},paint:s={},filter:c,minzoom:u,maxzoom:l,beforeId:a}=n;if(a!==e.beforeId&&t.moveLayer(o,a),r!==e.layout){const n=e.layout||{};for(const e in r)i(r[e],n[e])||t.setLayoutProperty(o,e,r[e]);for(const e in n)r.hasOwnProperty(e)||t.setLayoutProperty(o,e,void 0)}if(s!==e.paint){const n=e.paint||{};for(const e in s)i(s[e],n[e])||t.setPaintProperty(o,e,s[e]);for(const e in n)s.hasOwnProperty(e)||t.setPaintProperty(o,e,void 0)}i(c,e.filter)||t.setFilter(o,c),u===e.minzoom&&l===e.maxzoom||t.setLayerZoomRange(o,u,l)}(n,s,o,e.current)}catch(c){}else!function(t,o,n){if(t.style&&t.style.B&&(!("source"in n)||t.getSource(n.source))){const e={...n,id:o};delete e.beforeId,t.addLayer(e,n.beforeId)}}(n,s,o);return e.current=o,null}export{T as L,w as M,P as N,j as P,R as S,E as a,k as b,r as u};
