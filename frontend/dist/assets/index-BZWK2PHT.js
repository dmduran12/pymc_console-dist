const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-AvtQcXEW.js","assets/recharts-bmHCCfxU.js","assets/maplibre-gl-CFO9X1Ek.js","assets/Dashboard-ARH3OKlN.js","assets/TimeRangeSelector-CW1wMo29.js","assets/useThemeColors-Ce0l9xN3.js","assets/PacketDetailModal-D-D0i-0Q.js","assets/SignalIndicator-CDSz2-mX.js","assets/HashBadge-CZ8vi79u.js","assets/triangle-alert-DfwnlOxX.js","assets/map-CJQ1ljMG.js","assets/circle-B9LZY0Po.js","assets/trending-up-A10neNSQ.js","assets/zap-C0KOkzki.js","assets/PageLayout-Dv5CVZvC.js","assets/house-BleCMkE7.js","assets/Grid-07QW3f4D.js","assets/Packets-0UiUORl3.js","assets/usePolling-DMtQdE_y.js","assets/users-bLXcCcrh.js","assets/refresh-cw-47_Z3dGO.js","assets/Contacts-7fB_n0jn.js","assets/activity-C8YorctT.js","assets/Statistics-COP34pvH.js","assets/info-BUB8Q5E3.js","assets/System-CV0EjuAu.js","assets/Logs-DjKBoOHI.js","assets/loader-circle-DD32okC7.js","assets/Terminal-DiURQMW7.js","assets/Settings-BEO6_GQ0.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{r as a,a as n,b as s,R as r,c as o}from"./recharts-bmHCCfxU.js";import"./maplibre-gl-CFO9X1Ek.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i,l,c,u={exports:{}},d={},h=(l||(l=1,u.exports=function(){if(i)return d;i=1;var e=a(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,a,n){var i,l={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==a.key&&(c=""+a.key),void 0!==a.ref&&(u=a.ref),a)s.call(a,i)&&!o.hasOwnProperty(i)&&(l[i]=a[i]);if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===l[i]&&(l[i]=a[i]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:r.current}}return d.Fragment=n,d.jsx=l,d.jsxs=l,d}()),u.exports),p={},m=function(){if(c)return p;c=1;var e=n();return p.createRoot=e.createRoot,p.hydrateRoot=e.hydrateRoot,p}(),f="popstate";function g(e,t){if(!1===e||null==e)throw new Error(t)}function y(e,t){if(!e)try{throw new Error(t)}catch(a){}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t,a=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?w(t):t,state:a,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function v({pathname:e="/",search:t="",hash:a=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),a&&"#"!==a&&(e+="#"===a.charAt(0)?a:"#"+a),e}function w(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function k(e,t,a="/"){return function(e,t,a){let n=I(("string"==typeof t?w(t):t).pathname||"/",a);if(null==n)return null;let s=j(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let r=null;for(let o=0;null==r&&o<s.length;++o){let e=$(n);r=P(s[o],e,false)}return r}(e,t,a)}function j(e,t=[],a=[],n="",s=!1){let r=(e,r,o=s,i)=>{let l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&o)return;g(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length)}let c=B([n,l.relativePath]),u=a.concat(l);e.children&&e.children.length>0&&(g(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),j(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:R(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var a;if(""!==e.path&&(null==(a=e.path)?void 0:a.includes("?")))for(let n of S(e.path))r(e,t,!0,n);else r(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[a,...n]=t,s=a.endsWith("?"),r=a.replace(/\?$/,"");if(0===n.length)return s?[r,""]:[r];let o=S(n.join("/")),i=[];return i.push(...o.map(e=>""===e?r:[r,e].join("/"))),s&&i.push(...o),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var C=/^:[\w-]+$/,N=3,E=2,L=1,M=10,T=-2,_=e=>"*"===e;function R(e,t){let a=e.split("/"),n=a.length;return a.some(_)&&(n+=T),t&&(n+=E),a.filter(e=>!_(e)).reduce((e,t)=>e+(C.test(t)?N:""===t?L:M),n)}function P(e,t,a=!1){let{routesMeta:n}=e,s={},r="/",o=[];for(let i=0;i<n.length;++i){let e=n[i],l=i===n.length-1,c="/"===r?t:t.slice(r.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&a&&!n[n.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:B([r,u.pathname]),pathnameBase:U(B([r,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(r=B([r,u.pathnameBase]))}return o}function A(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=function(e,t=!1,a=!0){y("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(n.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),s=t.match(a);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:a},n)=>{if("*"===t){let e=i[n]||"";o=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const s=i[n];return e[t]=a&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:o,pattern:e}}function $(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&"/"!==n?null:e.slice(a)||"/"}var O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function D(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}function F(e,t,a,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function z(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,a)=>a===t.length-1?e.pathname:e.pathnameBase)}function W(e,t,a,n=!1){let s;"string"==typeof e?s=w(e):(s={...e},g(!s.pathname||!s.pathname.includes("?"),F("?","pathname","search",s)),g(!s.pathname||!s.pathname.includes("#"),F("#","pathname","hash",s)),g(!s.search||!s.search.includes("#"),F("#","search","hash",s)));let r,o=""===e||""===s.pathname,i=o?"/":s.pathname;if(null==i)r=a;else{let e=t.length-1;if(!n&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e,t="/"){let a,{pathname:n,search:s="",hash:r=""}="string"==typeof e?w(e):e;if(n)if(o=n,O.test(o))a=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),y(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${n}`)}a=n.startsWith("/")?D(n.substring(1),"/"):D(n,t)}else a=t;var o;return{pathname:a,search:H(s),hash:q(r)}}(s,r),c=i&&"/"!==i&&i.endsWith("/"),u=(o||"."===i)&&a.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var B=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function J(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var V=["POST","PUT","PATCH","DELETE"];new Set(V);var K=["GET",...V];new Set(K);var G=s.createContext(null);G.displayName="DataRouter";var Y=s.createContext(null);Y.displayName="DataRouterState",s.createContext(!1);var Q=s.createContext({isTransitioning:!1});Q.displayName="ViewTransition",s.createContext(new Map).displayName="Fetchers",s.createContext(null).displayName="Await";var X=s.createContext(null);X.displayName="Navigation";var Z=s.createContext(null);Z.displayName="Location";var ee=s.createContext({outlet:null,matches:[],isDataRoute:!1});ee.displayName="Route";var te=s.createContext(null);function ae(){return null!=s.useContext(Z)}function ne(){return g(ae(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(Z).location}te.displayName="RouteError";var se="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function re(e){s.useContext(X).static||s.useLayoutEffect(e)}function oe(){let{isDataRoute:e}=s.useContext(ee);return e?function(){let{router:e}=function(){let e=s.useContext(G);return g(e,pe("useNavigate")),e}(),t=me("useNavigate"),a=s.useRef(!1);return re(()=>{a.current=!0}),s.useCallback(async(n,s={})=>{y(a.current,se),a.current&&("number"==typeof n?await e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t])}():function(){g(ae(),"useNavigate() may be used only in the context of a <Router> component.");let e=s.useContext(G),{basename:t,navigator:a}=s.useContext(X),{matches:n}=s.useContext(ee),{pathname:r}=ne(),o=JSON.stringify(z(n)),i=s.useRef(!1);return re(()=>{i.current=!0}),s.useCallback((n,s={})=>{if(y(i.current,se),!i.current)return;if("number"==typeof n)return void a.go(n);let l=W(n,JSON.parse(o),r,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:B([t,l.pathname])),(s.replace?a.replace:a.push)(l,s.state,s)},[t,a,o,r,e])}()}function ie(e,{relative:t}={}){let{matches:a}=s.useContext(ee),{pathname:n}=ne(),r=JSON.stringify(z(a));return s.useMemo(()=>W(e,JSON.parse(r),n,"path"===t),[e,r,n,t])}function le(e,t,a,n,r){var o;g(ae(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=s.useContext(X),{matches:l}=s.useContext(ee),c=l[l.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";ge(d,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let m,f=ne();if(t){let e="string"==typeof t?w(t):t;g("/"===h||(null==(o=e.pathname)?void 0:o.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${e.pathname}" was given in the \`location\` prop.`),m=e}else m=f;let x=m.pathname||"/",b=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=k(e,{pathname:b});y(p||null!=v,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),y(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=function(e,t=[],a=null,n=null){if(null==e){if(!a)return null;if(a.errors)e=a.matches;else{if(0!==t.length||a.initialized||!(a.matches.length>0))return null;e=a.matches}}let r=e,o=null==a?void 0:a.errors;if(null!=o){let e=r.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));g(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let i=!1,l=-1;if(a)for(let s=0;s<r.length;s++){let e=r[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=s),e.route.id){let{loaderData:t,errors:n}=a,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){i=!0,r=l>=0?r.slice(0,l+1):[r[0]];break}}}let c=a&&n?(e,t)=>{var s,r;n(e,{location:a.location,params:(null==(r=null==(s=a.matches)?void 0:s[0])?void 0:r.params)??{},unstable_pattern:J(a.matches),errorInfo:t})}:void 0;return r.reduceRight((e,n,u)=>{let d,h=!1,p=null,m=null;a&&(d=o&&n.route.id?o[n.route.id]:void 0,p=n.route.errorElement||ue,i&&(l<0&&0===u?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===u&&(h=!0,m=n.route.hydrateFallbackElement||null)));let f=t.concat(r.slice(0,u+1)),g=()=>{let t;return t=d?p:h?m:n.route.Component?s.createElement(n.route.Component,null):n.route.element?n.route.element:e,s.createElement(he,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=a},children:t})};return a&&(n.route.ErrorBoundary||n.route.errorElement||0===u)?s.createElement(de,{location:a.location,revalidation:a.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):g()},null)}(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:B([h,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:B([h,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,a,n);return t&&j?s.createElement(Z.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},j):j}function ce(){let e=function(){var e;let t=s.useContext(te),a=function(){let e=s.useContext(Y);return g(e,pe("useRouteError")),e}(),n=me("useRouteError");return void 0!==t?t:null==(e=a.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},i=null;return i=s.createElement(s.Fragment,null,s.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:o},"ErrorBoundary")," or"," ",s.createElement("code",{style:o},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),a?s.createElement("pre",{style:r},a):null,i)}s.createContext(null);var ue=s.createElement(ce,null),de=class extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){return void 0!==this.state.error?s.createElement(ee.Provider,{value:this.props.routeContext},s.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function he({routeContext:e,match:t,children:a}){let n=s.useContext(G);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),s.createElement(ee.Provider,{value:e},a)}function pe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function me(e){let t=function(e){let t=s.useContext(ee);return g(t,pe(e)),t}(e),a=t.matches[t.matches.length-1];return g(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}var fe={};function ge(e,t,a){t||fe[e]||(fe[e]=!0,y(!1,a))}function ye({to:e,replace:t,state:a,relative:n}){g(ae(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=s.useContext(X);y(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=s.useContext(ee),{pathname:i}=ne(),l=oe(),c=W(e,z(o),i,"path"===n),u=JSON.stringify(c);return s.useEffect(()=>{l(JSON.parse(u),{replace:t,state:a,relative:n})},[l,u,n,t,a]),null}function xe(e){g(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function be({basename:e="/",children:t=null,location:a,navigationType:n="POP",navigator:r,static:o=!1,unstable_useTransitions:i}){g(!ae(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=s.useMemo(()=>({basename:l,navigator:r,static:o,unstable_useTransitions:i,future:{}}),[l,r,o,i]);"string"==typeof a&&(a=w(a));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=a,f=s.useMemo(()=>{let e=I(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:m},navigationType:n}},[l,u,d,h,p,m,n]);return y(null!=f,`<Router basename="${l}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:s.createElement(X.Provider,{value:c},s.createElement(Z.Provider,{children:t,value:f}))}function ve({children:e,location:t}){return le(we(e),t)}function we(e,t=[]){let a=[];return s.Children.forEach(e,(e,n)=>{if(!s.isValidElement(e))return;let r=[...t,n];if(e.type===s.Fragment)return void a.push.apply(a,we(e.props.children,r));g(e.type===xe,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),g(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,r)),a.push(o)}),a}s.memo(function({routes:e,future:t,state:a,unstable_onError:n}){return le(e,void 0,a,n)});var ke="get",je="application/x-www-form-urlencoded";function Se(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}var Ce=null,Ne=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ee(e){return null==e||Ne.has(e)?e:(y(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${je}"`),null)}function Le(e,t){if(!1===e||null==e)throw new Error(t)}function Me(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Te(e,t,a,n,s,r){let o=(e,t)=>!a[t]||e.route.id!==a[t].route.id,i=(e,t)=>{var n;return a[t].pathname!==e.pathname||(null==(n=a[t].route.path)?void 0:n.endsWith("*"))&&a[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter((e,t)=>o(e,t)||i(e,t)):"data"===r?t.filter((t,r)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,r)||i(t,r))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null==(l=a[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function _e(){let e=s.useContext(G);return Le(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Re=s.createContext(void 0);function Pe(){let e=s.useContext(Re);return Le(e,"You must render this element inside a <HydratedRouter> element"),e}function Ae(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function $e({page:e,...t}){let{router:a}=_e(),n=s.useMemo(()=>k(a.routes,e,a.basename),[a.routes,e,a.basename]);return n?s.createElement(Ie,{page:e,matches:n,...t}):null}function Ie({page:e,matches:t,...a}){let n=ne(),{manifest:r,routeModules:o}=Pe(),{basename:i}=_e(),{loaderData:l,matches:c}=function(){let e=s.useContext(Y);return Le(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),u=s.useMemo(()=>Te(e,t,c,r,n,"data"),[e,t,c,r,n]),d=s.useMemo(()=>Te(e,t,c,r,n,"assets"),[e,t,c,r,n]),h=s.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let a=new Set,s=!1;if(t.forEach(e=>{var t;let n=r.routes[e.route.id];n&&n.hasLoader&&(!u.some(t=>t.route.id===e.route.id)&&e.route.id in l&&(null==(t=o[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?s=!0:a.add(e.route.id))}),0===a.size)return[];let c=function(e,t,a){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${a}`:t&&"/"===I(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}(e,i,"data");return s&&a.size>0&&c.searchParams.set("_routes",t.filter(e=>a.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[i,l,n,r,u,t,e,o]),p=s.useMemo(()=>function(e,t,{includeHydrateFallback:a}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),a&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1),[...new Set(n)];var n}(d,r),[d,r]),m=function(e){let{manifest:t,routeModules:a}=Pe(),[n,r]=s.useState([]);return s.useEffect(()=>{let n=!1;return async function(e,t,a){return function(e){let t=new Set;return new Set(void 0),e.reduce((e,a)=>{let n=JSON.stringify(function(e){let t={},a=Object.keys(e).sort();for(let n of a)t[n]=e[n];return t}(a));return t.has(n)||(t.add(n),e.push({key:n,link:a})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,a);return e.links?e.links():[]}return[]}))).flat(1).filter(Me).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,a).then(e=>{n||r(e)}),()=>{n=!0}},[e,t,a]),n}(d);return s.createElement(s.Fragment,null,h.map(e=>s.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...a})),p.map(e=>s.createElement("link",{key:e,rel:"modulepreload",href:e,...a})),m.map(({key:e,link:t})=>s.createElement("link",{key:e,nonce:a.nonce,...t})))}function Oe(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Re.displayName="FrameworkContext";var De="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{De&&(window.__reactRouterVersion="7.10.1")}catch(ts){}function Fe({basename:e,children:t,unstable_useTransitions:a,window:n}){let r=s.useRef();null==r.current&&(r.current=function(e={}){return function(e,t,a,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,i="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){i="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:i,location:p.location,delta:t})}function h(e){return function(e,t=!1){let a="http://localhost";"undefined"!=typeof window&&(a="null"!==window.location.origin?window.location.origin:window.location.href),g(a,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:v(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=a+n),new URL(n,a)}(e)}null==c&&(c=0,o.replaceState({...o.state,idx:c},""));let p={get action(){return i},get location(){return e(s,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(f,d),l=e,()=>{s.removeEventListener(f,d),l=null}},createHref:e=>t(s,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let a=b(p.location,e,t);c=u()+1;let n=x(a,c),d=p.createHref(a);try{o.pushState(n,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}r&&l&&l({action:i,location:p.location,delta:1})},replace:function(e,t){i="REPLACE";let a=b(p.location,e,t);c=u();let n=x(a,c),s=p.createHref(a);o.replaceState(n,"",s),r&&l&&l({action:i,location:p.location,delta:0})},go:e=>o.go(e)};return p}(function(e,t){let{pathname:a,search:n,hash:s}=e.location;return b("",{pathname:a,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:v(t)},0,e)}({window:n,v5Compat:!0}));let o=r.current,[i,l]=s.useState({action:o.action,location:o.location}),c=s.useCallback(e=>{!1===a?l(e):s.startTransition(()=>l(e))},[a]);return s.useLayoutEffect(()=>o.listen(c),[o,c]),s.createElement(be,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:o,unstable_useTransitions:!0===a})}var ze=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=s.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:n,reloadDocument:r,replace:o,state:i,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},p){let m,{basename:f,unstable_useTransitions:x}=s.useContext(X),b="string"==typeof c&&ze.test(c),w=!1;if("string"==typeof c&&b&&(m=c,De))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),a=I(t.pathname,f);t.origin===e.origin&&null!=a?c=a+t.search+t.hash:w=!0}catch(ts){y(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(e,{relative:t}={}){g(ae(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=s.useContext(X),{hash:r,pathname:o,search:i}=ie(e,{relative:t}),l=o;return"/"!==a&&(l="/"===o?a:B([a,o])),n.createHref({pathname:l,search:i,hash:r})}(c,{relative:n}),[j,S,C]=function(e,t){let a=s.useContext(Re),[n,r]=s.useState(!1),[o,i]=s.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=s.useRef(null);s.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),s.useEffect(()=>{if(n){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[n]);let m=()=>{r(!0)},f=()=>{r(!1),i(!1)};return a?"intent"!==e?[o,p,{}]:[o,p,{onFocus:Ae(l,m),onBlur:Ae(c,f),onMouseEnter:Ae(u,m),onMouseLeave:Ae(d,f),onTouchStart:Ae(h,m)}]:[!1,p,{}]}(a,h),N=function(e,{target:t,replace:a,state:n,preventScrollReset:r,relative:o,viewTransition:i,unstable_useTransitions:l}={}){let c=oe(),u=ne(),d=ie(e,{relative:o});return s.useCallback(h=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(h,t)){h.preventDefault();let t=void 0!==a?a:v(u)===v(d),p=()=>c(e,{replace:t,state:n,preventScrollReset:r,relative:o,viewTransition:i});l?s.startTransition(()=>p()):p()}},[u,c,d,a,n,t,e,r,o,i,l])}(c,{replace:o,state:i,target:l,preventScrollReset:u,relative:n,viewTransition:d,unstable_useTransitions:x}),E=s.createElement("a",{...h,...C,href:m||k,onClick:w||r?e:function(t){e&&e(t),t.defaultPrevented||N(t)},ref:Oe(p,S),target:l,"data-discover":b||"render"!==t?void 0:"true"});return j&&!b?s.createElement(s.Fragment,null,E,s.createElement($e,{page:k})):E});function Be(e){let t=s.useContext(G);return g(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}We.displayName="Link",s.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:n=!1,style:r,to:o,viewTransition:i,children:l,...c},u){let d=ie(o,{relative:c.relative}),h=ne(),p=s.useContext(Y),{navigator:m,basename:f}=s.useContext(X),y=null!=p&&function(e,{relative:t}={}){let a=s.useContext(Q);g(null!=a,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Be("useViewTransitionState"),r=ie(e,{relative:t});if(!a.isTransitioning)return!1;let o=I(a.currentLocation.pathname,n)||a.currentLocation.pathname,i=I(a.nextLocation.pathname,n)||a.nextLocation.pathname;return null!=A(r.pathname,i)||null!=A(r.pathname,o)}(d)&&!0===i,x=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,b=h.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(b=b.toLowerCase(),v=v?v.toLowerCase():null,x=x.toLowerCase()),v&&f&&(v=I(v,f)||v);const w="/"!==x&&x.endsWith("/")?x.length-1:x.length;let k,j=b===x||!n&&b.startsWith(x)&&"/"===b.charAt(w),S=null!=v&&(v===x||!n&&v.startsWith(x)&&"/"===v.charAt(x.length)),C={isActive:j,isPending:S,isTransitioning:y},N=j?e:void 0;k="function"==typeof a?a(C):[a,j?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof r?r(C):r;return s.createElement(We,{...c,"aria-current":N,className:k,ref:u,style:E,to:o,viewTransition:i},"function"==typeof l?l(C):l)}).displayName="NavLink",s.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:n,replace:r,state:o,method:i=ke,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...p},m)=>{let{unstable_useTransitions:f}=s.useContext(X),y=function(){let{router:e}=Be("useSubmit"),{basename:t}=s.useContext(X),a=me("useRouteId"),n=e.fetch,r=e.navigate;return s.useCallback(async(e,s={})=>{let{action:o,method:i,encType:l,formData:c,body:u}=function(e,t){let a,n,s,r,o;if(Se(i=e)&&"form"===i.tagName.toLowerCase()){let o=e.getAttribute("action");n=o?I(o,t):null,a=e.getAttribute("method")||ke,s=Ee(e.getAttribute("enctype"))||je,r=new FormData(e)}else if(function(e){return Se(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Se(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||o.getAttribute("action");if(n=i?I(i,t):null,a=e.getAttribute("formmethod")||o.getAttribute("method")||ke,s=Ee(e.getAttribute("formenctype"))||Ee(o.getAttribute("enctype"))||je,r=new FormData(o,e),!function(){if(null===Ce)try{new FormData(document.createElement("form"),0),Ce=!1}catch(ts){Ce=!0}return Ce}()){let{name:t,type:a,value:n}=e;if("image"===a){let e=t?`${t}.`:"";r.append(`${e}x`,"0"),r.append(`${e}y`,"0")}else t&&r.append(t,n)}}else{if(Se(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=ke,n=null,s=je,o=e}var i;return r&&"text/plain"===s&&(o=r,r=void 0),{action:n,method:a.toLowerCase(),encType:s,formData:r,body:o}}(e,t);if(!1===s.navigate){let e=s.fetcherKey||He();await n(e,a,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||i,formEncType:s.encType||l,flushSync:s.flushSync})}else await r(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||i,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,r,t,a])}(),x=function(e,{relative:t}={}){let{basename:a}=s.useContext(X),n=s.useContext(ee);g(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...ie(e||".",{relative:t})},i=ne();if(null==e){o.search=i.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let a=e.toString();o.search=a?`?${a}`:""}}return e&&"."!==e||!r.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),"/"!==a&&(o.pathname="/"===o.pathname?a:B([a,o.pathname])),v(o)}(l,{relative:u}),b="get"===i.toLowerCase()?"get":"post",w="string"==typeof l&&ze.test(l);return s.createElement("form",{ref:m,method:b,action:x,onSubmit:n?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,l=(null==n?void 0:n.getAttribute("formmethod"))||i,p=()=>y(n||e.currentTarget,{fetcherKey:t,method:l,navigate:a,replace:r,state:o,relative:u,preventScrollReset:d,viewTransition:h});f&&!1!==a?s.startTransition(()=>p()):p()},...p,"data-discover":w||"render"!==e?void 0:"true"})}).displayName="Form";var Ue=0,He=()=>`__${String(++Ue)}__`;const qe=[{id:"default",name:"Shades of Purple",dataTheme:null,previewColor:"#B39DF3"},{id:"amber",name:"Gruvbox",dataTheme:"amber",previewColor:"#fabd2f"},{id:"grey",name:"Deus",dataTheme:"grey",previewColor:"#83a598"},{id:"black",name:"Gotham",dataTheme:"black",previewColor:"#33859d"},{id:"flora",name:"Sonokai",dataTheme:"flora",previewColor:"#9ed072"}],Je=[{id:"default",src:"/assets/bg.jpg",suggestedScheme:"default"},{id:"amber",src:"/assets/bg-amber.jpg",suggestedScheme:"amber"},{id:"grey",src:"/assets/bg-grey.jpg",suggestedScheme:"grey"},{id:"black",src:"/assets/bg-black.jpg",suggestedScheme:"black"},{id:"flora",src:"/assets/bg-flora.jpg",suggestedScheme:"flora"}],Ve=[{id:"default",name:"Shades of Purple",colorScheme:"default",backgroundImage:"/assets/bg.jpg"},{id:"amber",name:"Gruvbox",colorScheme:"amber",backgroundImage:"/assets/bg-amber.jpg"},{id:"grey",name:"Deus",colorScheme:"grey",backgroundImage:"/assets/bg-grey.jpg"},{id:"black",name:"Gotham",colorScheme:"black",backgroundImage:"/assets/bg-black.jpg"},{id:"flora",name:"Sonokai",colorScheme:"flora",backgroundImage:"/assets/bg-flora.jpg"}],Ke={colorScheme:"black",backgroundImage:"/assets/bg-black.jpg",brightness:66},Ge="pymc-color-scheme",Ye="pymc-background-image",Qe="pymc-bg-brightness",Xe="pymc-background";function Ze(e){(new Image).src=e}const et=s.createContext(null);function tt({children:e}){const[t,a]=s.useState(()=>function(){if("undefined"==typeof window)return Ke;try{let t=localStorage.getItem(Ge),a=localStorage.getItem(Ye);const n=localStorage.getItem(Qe);if(!t&&!a){const e=localStorage.getItem(Xe);if(e){const n=Ve.find(t=>t.id===e);n&&(t=n.colorScheme,a=n.backgroundImage,localStorage.setItem(Ge,t),localStorage.setItem(Ye,a),localStorage.removeItem(Xe))}}const s="string"==typeof(e=t)&&qe.some(t=>t.id===e)?t:Ke.colorScheme,r=a||Ke.backgroundImage;let o=Ke.brightness;if(n){const e=parseInt(n,10);!isNaN(e)&&e>=0&&e<=100&&(o=e)}return{colorScheme:s,backgroundImage:r,brightness:o}}catch{return Ke}var e}());s.useEffect(()=>{!function(e){const t=(a=e,qe.find(e=>e.id===a)??qe[0]);var a;t.dataTheme?document.documentElement.setAttribute("data-theme",t.dataTheme):document.documentElement.removeAttribute("data-theme")}(t.colorScheme)},[t.colorScheme]),s.useEffect(()=>{!function(e){if("undefined"!=typeof window)try{localStorage.setItem(Ge,e.colorScheme),localStorage.setItem(Ye,e.backgroundImage),localStorage.setItem(Qe,String(e.brightness))}catch{}}(t)},[t]),s.useEffect(()=>{Je.forEach(e=>{(new Image).src=e.src})},[]);const n=s.useCallback(e=>{a(t=>({...t,colorScheme:e}))},[]),r=s.useCallback(e=>{a(t=>({...t,backgroundImage:e}))},[]),o=s.useCallback(e=>{const t=Math.max(0,Math.min(100,Math.round(e)));a(e=>({...e,brightness:t}))},[]),i=s.useCallback(e=>{const t=Ve.find(t=>t.id===e);t&&a(e=>({...e,colorScheme:t.colorScheme,backgroundImage:t.backgroundImage}))},[]),l=s.useMemo(()=>({theme:t,setColorScheme:n,setBackgroundImage:r,setBrightness:o,setThemePreset:i}),[t,n,r,o,i]);return h.jsx(et.Provider,{value:l,children:e})}function at(){const e=s.useContext(et);if(!e)throw new Error("useTheme must be used within a ThemeProvider. Wrap your app with <ThemeProvider> in App.tsx.");return e}const nt={},st=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(null==a?void 0:a.nonce)||(null==a?void 0:a.getAttribute("nonce"));n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in nt)return;nt[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,s&&n.setAttribute("nonce",s),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},rt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ot=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),it=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var lt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ct=s.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:i,...l},c)=>s.createElement("svg",{ref:c,...lt,width:t,height:t,stroke:e,strokeWidth:n?24*Number(a)/Number(t):a,className:ot("lucide",r),...!o&&!it(l)&&{"aria-hidden":"true"},...l},[...i.map(([e,t])=>s.createElement(e,t)),...Array.isArray(o)?o:[o]])),ut=(e,t)=>{const a=s.forwardRef(({className:a,...n},r)=>{return s.createElement(ct,{ref:r,iconNode:t,className:ot(`lucide-${o=rt(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...n});var o});return a.displayName=rt(e),a},dt=ut("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ht=ut("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),pt=ut("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),mt=ut("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ft=ut("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),gt=ut("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),yt=ut("layout-list",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]),xt=ut("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),bt=ut("map-pin-plus",[["path",{d:"M19.914 11.105A7.298 7.298 0 0 0 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 32 32 0 0 0 .824-.738",key:"fcdtly"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M16 18h6",key:"987eiv"}],["path",{d:"M19 15v6",key:"10aioa"}]]),vt=ut("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),wt=ut("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),kt=ut("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),jt=ut("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),St=ut("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ct=ut("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Nt=ut("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),Et=ut("square-terminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),Lt=ut("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Mt="0.9.30",Tt="/assets/WCM_Waves-CI2kWZFp.gif",_t=e=>{let t;const a=new Set,n=(e,n)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,r={setState:n,getState:s,getInitialState:()=>o,subscribe:e=>(a.add(e),()=>a.delete(e))},o=t=e(n,s,r);return r},Rt=e=>e,Pt=e=>{const t=(e=>e?_t(e):_t)(e),a=e=>function(e,t=Rt){const a=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(a),a}(t,e);return Object.assign(a,t),a},At=e=>e?Pt(e):Pt,$t={0:"REQ",1:"RESPONSE",2:"TXT_MSG",3:"ACK",4:"ADVERT",5:"GRP_TXT",6:"GRP_DATA",7:"ANON_REQ",8:"PATH",9:"TRACE",10:"MULTIPART",15:"RAW_CUSTOM"},It={0:"T_FLOOD",1:"FLOOD",2:"DIRECT",3:"T_DIRECT"},Ot=125e3;function Dt(e,t={}){const a=t.spreadingFactor??7,n=t.bandwidthHz??Ot,s=t.codingRate??5,r=t.preambleLength??8??8,o=t.crcEnabled??true?1:0,i=t.explicitHeader??true?0:1,l=a>=11&&n<=125e3?1:0,c=n/1e3,u=Math.pow(2,a)/c,d=(r+4.25)*u,h=Math.max(8*e-4*a+28+16*o-20*i,0),p=4*(a-2*l);return d+(8+Math.ceil(h/p)*s)*u}function Ft(e,t){let a;try{a=e()}catch(ts){return}return{getItem:e=>{var t;const n=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=a.getItem(e))?t:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,t)=>a.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>a.removeItem(e)}}const zt=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then:e=>zt(e)(a),catch(e){return this}}}catch(ts){return{then(e){return this},catch:t=>zt(t)(ts)}}};function Wt(){const e=localStorage.getItem("pymc_client_id");if(e)return e;const t=`console_${Date.now()}_${Math.random().toString(36).substring(2,11)}`;return localStorage.setItem("pymc_client_id",t),t}const Bt=At()((Ut=(e,t)=>({token:null,username:null,expiresAt:null,isAuthenticated:!1,isLoading:!1,error:null,clientId:Wt(),login:async(a,n)=>{e({isLoading:!0,error:null});try{const s=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:n,client_id:t().clientId})}),r=await s.json();if(r.success){const t=Date.now()+1e3*r.expires_in;return e({token:r.token,username:r.username,expiresAt:t,isAuthenticated:!0,isLoading:!1,error:null}),!0}return e({isLoading:!1,error:r.error||"Login failed"}),!1}catch(s){return e({isLoading:!1,error:s instanceof Error?s.message:"Network error"}),!1}},logout:()=>{e({token:null,username:null,expiresAt:null,isAuthenticated:!1,error:null})},refreshToken:async()=>{const{token:a,clientId:n}=t();if(!a)return!1;try{const s=await fetch("/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({client_id:n})}),r=await s.json();if(r.success){const t=Date.now()+1e3*r.expires_in;return e({token:r.token,expiresAt:t,isAuthenticated:!0}),!0}return t().logout(),!1}catch{return t().logout(),!1}},clearError:()=>e({error:null}),checkAuth:()=>{const{token:a,expiresAt:n}=t();return a&&n?Date.now()>n-6e4?(e({isAuthenticated:!1}),!1):(e({isAuthenticated:!0}),!0):(e({isAuthenticated:!1}),!1)}}),Ht={name:"pymc-auth",partialize:e=>({token:e.token,username:e.username,expiresAt:e.expiresAt,clientId:e.clientId})},(e,t,a)=>{let n={storage:Ft(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...Ht},s=!1;const r=new Set,o=new Set;let i=n.storage;if(!i)return Ut((...t)=>{e(...t)},t,a);const l=()=>{const e=n.partialize({...t()});return i.setItem(n.name,{state:e,version:n.version})},c=a.setState;a.setState=(e,t)=>(c(e,t),l());const u=Ut((...t)=>(e(...t),l()),t,a);let d;a.getInitialState=()=>u;const h=()=>{var a,c;if(!i)return;s=!1,r.forEach(e=>{var a;return e(null!=(a=t())?a:u)});const h=(null==(c=n.onRehydrateStorage)?void 0:c.call(n,null!=(a=t())?a:u))||void 0;return zt(i.getItem.bind(i))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate){const t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}}return[!1,void 0]}).then(a=>{var s;const[r,o]=a;if(d=n.merge(o,null!=(s=t())?s:u),e(d,!0),r)return l()}).then(()=>{null==h||h(d,void 0),d=t(),s=!0,o.forEach(e=>e(d))}).catch(e=>{null==h||h(void 0,e)})};return a.persist={setOptions:e=>{n={...n,...e},e.storage&&(i=e.storage)},clearStorage:()=>{null==i||i.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>s,onHydrate:e=>(r.add(e),()=>{r.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},n.skipHydration||h(),d||u}));var Ut,Ht;function qt(){const{token:e}=Bt.getState();return e?{Authorization:`Bearer ${e}`}:{}}let Jt=null;const Vt=new Map,Kt=new Map,Gt={"/api/stats":2e3,"/api/logs":1e3,"/api/recent_packets":2e3,"/api/hardware_stats":3e3,"/api/packet_type_graph_data":3e4,"/api/metrics_graph_data":3e4,"/api/noise_floor_history":3e4,"/api/radio_presets":6e4,default:5e3};async function Yt(e,t){const a=`${e}`,n={...qt()};if(null==t?void 0:t.headers){const e=t.headers;e instanceof Headers?e.forEach((e,t)=>{n[t]=e}):Array.isArray(e)?e.forEach(([e,t])=>{n[e]=t}):Object.assign(n,e)}(null==t?void 0:t.body)&&(n["Content-Type"]="application/json");const s=await fetch(a,{...t,headers:n});if(401===s.status)throw Bt.getState().logout(),new Error("Session expired. Please log in again.");if(!s.ok)throw new Error(`API error: ${s.status} ${s.statusText}`);return s.json()}async function Qt(e,t){const a=function(e,t){return(null==t?void 0:t.method)&&"GET"!==t.method?"":e}(e,t),n=function(e){for(const[t,a]of Object.entries(Gt))if("default"!==t&&e.startsWith(t))return a;return Gt.default}(e);if(!a)return Yt(e,t);const s=function(e){if(!e)return null;const t=Vt.get(e);if(!t)return null;const a=Date.now()-t.timestamp>t.ttl;return{data:t.data,isStale:a}}(a);if(s&&!s.isStale)return s.data;const r=Kt.get(a);if(r)return s?s.data:r;const o=Yt(e,t).then(e=>(function(e,t,a){e&&(Vt.set(e,{data:t,timestamp:Date.now(),ttl:a}),function(){const e=Date.now();for(const[t,a]of Vt.entries())e-a.timestamp>3e5&&Vt.delete(t);if(Vt.size>50){const e=Array.from(Vt.entries());e.sort((e,t)=>e[1].timestamp-t[1].timestamp);const t=e.slice(0,e.length-50);for(const[a]of t)Vt.delete(a)}}())}(a,e,n),Kt.delete(a),e)).catch(e=>{throw Kt.delete(a),e});return Kt.set(a,o),s?(o.catch(()=>{}),s.data):o}function Xt(e){return e&&"chat node"===e.toLowerCase()?"Companion":e}async function Zt(){return function(e){if(e.neighbors)for(const t of Object.values(e.neighbors))t.contact_type=Xt(t.contact_type);return e}(await Qt("/api/stats"))}async function ea(){return Qt("/api/logs")}async function ta(e=100){return Qt(`/api/recent_packets?limit=${e}`)}async function aa(e){const t=Math.max(e.limit||1e3,5e3),a=await ta(t);if(!a.success||!a.data)return a;let n=a.data;return void 0!==e.type&&(n=n.filter(t=>(t.type??t.payload_type)===e.type)),void 0!==e.route&&(n=n.filter(t=>(t.route??t.route_type)===e.route)),e.start_timestamp&&(n=n.filter(t=>t.timestamp>=e.start_timestamp)),e.end_timestamp&&(n=n.filter(t=>t.timestamp<=e.end_timestamp)),e.limit&&n.length>e.limit&&(n=n.slice(0,e.limit)),{success:!0,data:n,count:n.length}}async function na(e=24){return Qt(`/api/packet_type_graph_data?hours=${e}`)}async function sa(e=24){return Qt(`/api/noise_floor_history?hours=${e}`)}async function ra(){return Qt("/api/hardware_stats")}async function oa(){return Qt("/api/send_advert",{method:"POST",body:"{}"})}async function ia(e){return Qt("/api/set_mode",{method:"POST",body:JSON.stringify({mode:e})})}async function la(e){return Qt("/api/set_duty_cycle",{method:"POST",body:JSON.stringify({enabled:e})})}async function ca(e=20,t=20){try{const a=Math.floor(Date.now()/1e3),n=a-60*e,s=60*e/t,r=Math.ceil(e/60*1e3),o=Math.max(5e3,Math.min(r,5e4)),[i,l]=await Promise.all([aa({start_timestamp:n,end_timestamp:a,limit:o}),Zt()]);if(!i.success||!i.data)return{success:!1,error:i.error||"Failed to fetch packets"};const c=i.data,u=function(e){var t;const a=null==(t=null==e?void 0:e.config)?void 0:t.radio;return{spreadingFactor:(null==a?void 0:a.spreading_factor)??7,bandwidthHz:(null==a?void 0:a.bandwidth)??Ot,codingRate:(null==a?void 0:a.coding_rate)??5,preambleLength:(null==a?void 0:a.preamble_length)??8,crcEnabled:!0,explicitHeader:!0}}(l),d=()=>{const e=[];for(let a=0;a<t;a++)e.push({bucket:a,start:n+a*s,end:n+(a+1)*s,count:0,airtime_ms:0,avg_snr:0,avg_rssi:0});return e},h=d(),p=d(),m=d(),f=d(),g=h.map(()=>({snr:0,rssi:0,count:0}));for(const e of c){const a=Math.floor((e.timestamp-n)/s);if(a<0||a>=t)continue;const r=Dt(e.length||e.payload_length||32,u),o=e.packet_origin;"tx_local"===o?(p[a].count++,p[a].airtime_ms+=r):"tx_forward"===o||e.transmitted?(m[a].count++,m[a].airtime_ms+=r):e.drop_reason&&(f[a].count++,f[a].airtime_ms+=r),"tx_local"!==o&&(h[a].count++,h[a].airtime_ms+=r,g[a].snr+=e.snr||0,g[a].rssi+=e.rssi||0,g[a].count++)}for(let e=0;e<t;e++)g[e].count>0&&(h[e].avg_snr=g[e].snr/g[e].count,h[e].avg_rssi=g[e].rssi/g[e].count);return{success:!0,data:{time_range_minutes:e,bucket_count:t,bucket_duration_seconds:s,start_time:n,end_time:a,received:h,transmitted:p,forwarded:m,dropped:f}}}catch(a){return{success:!1,error:String(a)}}}async function ua(e){return Qt("/api/update_radio_config",{method:"POST",body:JSON.stringify(e)})}async function da(e){return Qt("/api/set_log_level",{method:"POST",body:JSON.stringify({level:e})})}"undefined"!=typeof document&&document.addEventListener("visibilitychange",()=>{if("visible"===document.visibilityState)for(const e of Vt.values())e.timestamp=0});const ha="pymc-packet-cache",pa="pymc-packet-cache-meta",ma=36e5,fa=new class{constructor(){t(this,"packets",new Map),t(this,"sortedPackets",[]),t(this,"sortedDirty",!0),t(this,"meta",{oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,deepLoadComplete:!1}),t(this,"isLoading",!1),t(this,"isBackgroundLoading",!1),t(this,"isDeepLoading",!1),t(this,"listeners",new Set),t(this,"statusMessage",""),this.loadFromStorage()}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{isLoading:this.isLoading,isBackgroundLoading:this.isBackgroundLoading,isDeepLoading:this.isDeepLoading,backgroundLoadComplete:this.meta.backgroundLoadComplete,packetCount:this.packets.size,statusMessage:this.statusMessage}}getPackets(){return this.sortedDirty&&(this.sortedPackets=Array.from(this.packets.values()).sort((e,t)=>(e.timestamp??0)-(t.timestamp??0)),this.sortedDirty=!1),this.sortedPackets}isStale(){return 0===this.packets.size||Date.now()-this.meta.lastUpdated>ma}async quickLoad(){if(this.isStale()&&this.packets.size>0&&this.clear(),this.packets.size>0)return this.meta.backgroundLoadComplete||this.backgroundLoad(),this.getPackets();this.isLoading=!0,this.statusMessage="Fetching recent packets...",this.notifyListeners();try{const e=await this.fetchRecentPackets(1e3);e.success&&e.data&&(this.statusMessage=`Processing ${e.data.length} packets...`,this.notifyListeners(),this.mergePackets(e.data),this.saveToStorage())}catch(e){this.statusMessage="Load failed"}finally{this.isLoading=!1,this.statusMessage="",this.notifyListeners()}return this.backgroundLoad(),this.getPackets()}async backgroundLoad(){if(!this.meta.backgroundLoadComplete&&!this.isBackgroundLoading){this.isBackgroundLoading=!0,this.statusMessage="Loading database...",this.notifyListeners();try{const e=setInterval(()=>{this.isBackgroundLoading&&(this.statusMessage=`Loading ${3e4.toLocaleString()} packets...`,this.notifyListeners())},500),t=await this.fetchRecentPackets(3e4);clearInterval(e),t.success&&t.data&&(this.statusMessage=`Processing ${t.data.length.toLocaleString()} packets...`,this.notifyListeners(),this.mergePackets(t.data),this.meta.backgroundLoadComplete=!0,this.saveToStorage())}catch(e){this.statusMessage="Background load failed"}finally{this.isBackgroundLoading=!1,this.statusMessage="",this.notifyListeners()}}}async deepLoad(){if(!this.meta.deepLoadComplete&&!this.isDeepLoading)return this.doDeepLoad()}async forceDeepLoad(){if(!this.isDeepLoading)return this.meta.deepLoadComplete=!1,this.doDeepLoad()}async doDeepLoad(){this.isDeepLoading=!0,this.statusMessage="Fetching topology data...",this.notifyListeners();try{const e=setInterval(()=>{this.isDeepLoading&&(this.statusMessage=`Loading ${5e4.toLocaleString()} packets...`,this.notifyListeners())},500),t=await this.fetchRecentPackets(5e4);clearInterval(e),t.success&&t.data&&(this.statusMessage=`Processing ${t.data.length.toLocaleString()} packets...`,this.notifyListeners(),this.mergePackets(t.data),this.meta.deepLoadComplete=!0,this.saveToStorage())}catch(e){this.statusMessage="Deep load failed"}finally{this.isDeepLoading=!1,this.statusMessage="",this.notifyListeners()}}async poll(){try{const e=await this.fetchRecentPackets(500);if(e.success&&e.data){const t=this.packets.size;this.mergePackets(e.data),this.packets.size>t&&(this.saveToStorage(),this.notifyListeners())}}catch(e){}return this.getPackets()}clear(){this.packets.clear(),this.sortedPackets=[],this.sortedDirty=!0,this.meta={oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,deepLoadComplete:!1},this.clearStorage(),this.notifyListeners()}mergePackets(e){let t=!1;for(const a of e){const e=a.packet_hash;if(e&&!this.packets.has(e)){this.packets.set(e,a),t=!0;const n=a.timestamp??0;(0===this.meta.oldestTimestamp||n<this.meta.oldestTimestamp)&&(this.meta.oldestTimestamp=n),n>this.meta.newestTimestamp&&(this.meta.newestTimestamp=n)}}t&&(this.sortedDirty=!0),this.meta.lastUpdated=Date.now(),this.meta.packetCount=this.packets.size}notifyListeners(){const e=this.getState();for(const t of this.listeners)t(e)}loadFromStorage(){if("undefined"!=typeof window)try{const e=localStorage.getItem(pa);e&&(this.meta=JSON.parse(e));const t=localStorage.getItem(ha);if(t){const e=JSON.parse(t);for(const t of e)t.packet_hash&&this.packets.set(t.packet_hash,t)}if(this.meta.lastUpdated>0&&Date.now()-this.meta.lastUpdated>ma)return void this.clear();const a=15e3;this.meta.backgroundLoadComplete&&this.packets.size<a&&(this.meta.backgroundLoadComplete=!1);const n=25e3;this.meta.deepLoadComplete&&this.packets.size<n&&(this.meta.deepLoadComplete=!1)}catch(e){this.clear()}}saveToStorage(){if("undefined"!=typeof window)try{localStorage.setItem(pa,JSON.stringify(this.meta)),localStorage.setItem(ha,JSON.stringify(Array.from(this.packets.values())))}catch(e){}}clearStorage(){if("undefined"!=typeof window)try{localStorage.removeItem(ha),localStorage.removeItem(pa)}catch(e){}}async fetchRecentPackets(e=1e3){const t=`/api/recent_packets?limit=${e}`,a=await fetch(t);if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}};function ga(e){return{paths:e.paths,byEndpoints:new Map(e.byEndpointsEntries),canonicalPaths:new Map(e.canonicalPathsEntries),totalObservations:e.totalObservations,uniquePathCount:e.uniquePathCount}}function ya(){return{paths:[],byEndpoints:new Map,canonicalPaths:new Map,totalObservations:0,uniquePathCount:0}}const xa=new class{constructor(){t(this,"worker",null),t(this,"listeners",new Set),t(this,"currentTopology",{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],gatewayNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:ya(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0}}),t(this,"isComputing",!1),t(this,"pendingRequest",null),t(this,"debounceTimer",null),t(this,"debounceMs",100),this.initWorker()}initWorker(){if("undefined"!=typeof window)try{this.worker=new Worker(new URL("/assets/topology.worker-BMDSvSre.js",import.meta.url),{type:"module"}),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{}}catch(e){}}handleWorkerMessage(e){if(this.isComputing=!1,"error"!==e.type){var t;this.currentTopology={edges:(t=e.payload).edges??[],validatedEdges:t.validatedEdges??[],weakEdges:t.weakEdges??[],certainEdges:t.certainEdges??[],uncertainEdges:t.uncertainEdges??[],maxPacketCount:t.maxPacketCount??0,maxCertainCount:t.maxCertainCount??0,localPrefix:t.localPrefix??null,hubNodes:t.hubNodes??[],gatewayNodes:t.gatewayNodes??[],edgeMap:new Map(t.edgeMapEntries??[]),neighborAffinity:new Map(t.neighborAffinityEntries??[]),fullAffinity:new Map(t.fullAffinityEntries??[]),centrality:new Map(t.centralityEntries??[]),loops:t.loops??[],loopEdgeKeys:new Set(t.loopEdgeKeyEntries??[]),txDelayRecommendations:new Map(t.txDelayRecommendationEntries??[]),pathRegistry:t.pathRegistry?ga(t.pathRegistry):ya(),edgeBetweenness:new Map(t.edgeBetweennessEntries??[]),backboneEdges:t.backboneEdges??[],nodeMobility:new Map(t.nodeMobilityEntries??[]),mobileNodes:t.mobileNodes??[],pathHealth:t.pathHealth??[],lastHopNeighbors:t.lastHopNeighbors??[],disambiguationStats:t.disambiguationStats??{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0}};for(const t of this.listeners)try{t(this.currentTopology,e.computeTimeMs)}catch(a){}if(this.pendingRequest){const e=this.pendingRequest;this.pendingRequest=null,this.computeInternal(e)}}}computeInternal(e){if(!this.worker)return;this.isComputing=!0;const t={type:"compute",payload:e};this.worker.postMessage(t)}compute(e,t,a,n,s,r){const o={packets:e,neighbors:t,localHash:a,localLat:n,localLon:s,airtimeMs:r};this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest=o:this.computeInternal(o)},this.debounceMs)}subscribe(e){return this.listeners.add(e),this.currentTopology.edges.length>0&&e(this.currentTopology,0),()=>{this.listeners.delete(e)}}getTopology(){return this.currentTopology}isWorking(){return this.isComputing}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}},ba=new class{constructor(){t(this,"worker",null),t(this,"listeners",new Set),t(this,"sparklines",new Map),t(this,"isComputing",!1),t(this,"lastComputeTimeMs",0),t(this,"pendingRequest",null),t(this,"debounceTimer",null),t(this,"debounceMs",150),this.initWorker()}initWorker(){if("undefined"!=typeof window)try{this.worker=new Worker(new URL("/assets/sparkline.worker-CmKhBAy5.js",import.meta.url),{type:"module"}),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{this.isComputing=!1,this.notifyListeners()}}catch(e){}}handleWorkerMessage(e){if(this.isComputing=!1,"error"!==e.type){if(this.sparklines=new Map(e.payload.sparklineEntries),this.lastComputeTimeMs=e.computeTimeMs,this.notifyListeners(),this.pendingRequest){const e=this.pendingRequest;this.pendingRequest=null,this.computeInternal(e.packets,e.nodeHashes)}}else this.notifyListeners()}computeInternal(e,t){if(!this.worker)return;if(0===t.length)return this.isComputing=!1,void this.notifyListeners();this.isComputing=!0,this.notifyListeners();const a={type:"compute",payload:{packets:e,nodeHashes:t}};this.worker.postMessage(a)}notifyListeners(){for(const t of this.listeners)try{t(this.sparklines,this.isComputing)}catch(e){}}compute(e,t){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest={packets:e,nodeHashes:t}:this.computeInternal(e,t)},this.debounceMs)}getSparkline(e){return this.sparklines.get(e)??[]}getAllSparklines(){return this.sparklines}hasSparkline(e){return this.sparklines.has(e)}isWorking(){return this.isComputing}getLastComputeTime(){return this.lastComputeTimeMs}subscribe(e){return this.listeners.add(e),e(this.sparklines,this.isComputing),()=>{this.listeners.delete(e)}}clear(){this.sparklines.clear(),this.notifyListeners()}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}};function va(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2,4).toUpperCase():e.slice(0,2).toUpperCase()}function wa(e,t){const a=e.toUpperCase();return t.startsWith("0x")||t.startsWith("0X")?t.slice(2).toUpperCase().startsWith(a):t.toUpperCase().startsWith(a)}const ka=[{label:"20m",minutes:20,buckets:40},{label:"1h",minutes:60,buckets:60},{label:"3h",minutes:180,buckets:90},{label:"12h",minutes:720,buckets:72},{label:"24h",minutes:1440,buckets:96},{label:"3d",minutes:4320,buckets:72},{label:"7d",minutes:10080,buckets:84}],ja=[{label:"1h",hours:1},{label:"3h",hours:3},{label:"12h",hours:12},{label:"24h",hours:24},{label:"3d",hours:72},{label:"7d",hours:168}],Sa={stats:3e3,packets:3e3,charts:3e4,logs:2e3,system:3e3},Ca={DEBUG:"text-[var(--log-debug)] border-[var(--log-debug)]/30",INFO:"text-[var(--log-info)] border-[var(--log-info)]/30",WARNING:"text-[var(--log-warning)] border-[var(--log-warning)]/30",ERROR:"text-[var(--log-error)] border-[var(--log-error)]/30",CRITICAL:"text-[var(--log-critical)] border-[var(--log-critical)]/50 bg-[var(--log-critical)]/10"};function Na(e){return Ca[e]||"text-text-muted border-border-subtle"}const Ea="pymc-resource-history",La="pymc-resource-last-fetch",Ma="pymc-hidden-contacts",Ta="pymc-quick-neighbors";let _a=null,Ra=null;function Pa(e){return 4===(e.type??e.payload_type)&&!0!==e.transmitted&&function(e){const t=function(e){if(Array.isArray(e))return e;if("string"==typeof e&&e.startsWith("["))try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}(e.original_path),a=e.route??e.route_type;return 2===(n=a)||3===n?0===t.length:function(e){return 1===e||0===e}(a)?t.length<=1:0===t.length;var n}(e)}function Aa(e,t,a,n,s){if(!e)return null;let r=e;if(e.length<=4){const n=e.replace(/^0x/i,"").toUpperCase();if(n===t)return null;const s=a.get(n);if(!s)return null;r=s}return n.has(r)?r===s?null:r:null}function $a(e,t){e.count++,void 0!==t.rssi&&null!==t.rssi&&(e.rssiSum+=t.rssi,e.rssiCount++),void 0!==t.snr&&null!==t.snr&&(e.snrSum+=t.snr,e.snrCount++);const a=t.timestamp??0;a>e.lastSeen&&(e.lastSeen=a)}function Ia(e){return{hash:e,count:0,rssiSum:0,rssiCount:0,snrSum:0,snrCount:0,lastSeen:0}}function Oa(e,t){const a=function(e,t){const a=t-1e3*e;return a<=6048e5?"active":a<=12096e5?"stale":"expired"}(e.lastSeen,t);return"expired"===a?null:{hash:e.hash,prefix:va(e.hash),count:e.count,avgRssi:e.rssiCount>0?e.rssiSum/e.rssiCount:null,avgSnr:e.snrCount>0?e.snrSum/e.snrCount:null,lastSeen:e.lastSeen,status:a}}function Da(){if("undefined"==typeof window)return[];try{const e=localStorage.getItem(Ta);if(e)return JSON.parse(e)}catch{}return[]}function Fa(){if("undefined"==typeof window)return[];try{const e=localStorage.getItem(Ea);if(e)return JSON.parse(e)}catch{}return[]}function za(){if("undefined"==typeof window)return new Set;try{const e=localStorage.getItem(Ma);if(e)return new Set(JSON.parse(e))}catch{}return new Set}function Wa(){if("undefined"==typeof window)return 0;try{const e=localStorage.getItem(La);if(e)return parseInt(e,10)||0}catch{}return 0}const Ba=At((e,t)=>({stats:null,statsLoading:!1,statsError:null,packets:[],packetsLoading:!1,packetsError:null,lastPacketTimestamp:0,logs:[],logsLoading:!1,liveMode:!0,flashReceived:0,flashAdvert:0,resourceHistory:Fa(),lastResourceFetch:Wa(),hiddenContacts:za(),quickNeighbors:Da(),initialized:!1,packetCacheState:fa.getState(),initializeApp:async()=>{const{initialized:a}=t();if(a)return;e({initialized:!0,statsLoading:!0,packetsLoading:!0});let n=!1,s=!1;fa.subscribe(a=>{if(e({packetCacheState:a}),n&&!a.isBackgroundLoading){const a=fa.getPackets();a.length>0&&(e({packets:a}),t().triggerTopologyCompute(),t().updateQuickNeighbors(),t().triggerSparklineCompute())}if(n=a.isBackgroundLoading,s&&!a.isDeepLoading){const a=fa.getPackets();a.length>0&&(e({packets:a}),t().triggerTopologyCompute(),t().updateQuickNeighbors(),t().triggerSparklineCompute())}s=a.isDeepLoading});try{const[a,n]=await Promise.all([Zt(),fa.quickLoad()]);if(e({stats:a,statsLoading:!1}),n.length>0){const a=Math.max(...n.map(e=>e.timestamp??0));e({packets:n,packetsLoading:!1,lastPacketTimestamp:a}),t().triggerTopologyCompute(),t().updateQuickNeighbors(),t().triggerSparklineCompute()}else e({packetsLoading:!1})}catch(r){e({statsError:r instanceof Error?r.message:"Failed to initialize",statsLoading:!1,packetsLoading:!1})}setInterval(()=>{t().fetchStats()},Sa.stats),setInterval(()=>{t().liveMode&&t().fetchPackets()},Sa.packets),setTimeout(()=>{t().sendAdvert().catch(()=>{})},3e3)},prefetchForRoute:e=>{switch(e){case"/logs":ea().catch(()=>{});break;case"/system":ra().catch(()=>{});break;case"/statistics":na(3).catch(()=>{}),sa(3).catch(()=>{});break;case"/settings":(async function(){return Qt("/api/radio_presets")})().catch(()=>{})}},fetchStats:async()=>{const{stats:a}=t();a||e({statsLoading:!0}),e({statsError:null});try{const t=await Zt();e({stats:t,statsLoading:!1})}catch(n){e({statsError:n instanceof Error?n.message:"Failed to fetch stats",statsLoading:!1})}},fetchPackets:async a=>{const{packets:n}=t();0===n.length&&e({packetsLoading:!0}),e({packetsError:null});try{const a=await fa.poll(),{lastPacketTimestamp:n}=t(),s=a.length>0?Math.max(...a.map(e=>e.timestamp??0)):0;s>n&&n>0&&e({flashReceived:t().flashReceived+1}),e({packets:a,packetsLoading:!1,lastPacketTimestamp:s||n}),t().triggerTopologyCompute(),t().updateQuickNeighbors()}catch(s){e({packetsError:s instanceof Error?s.message:"Failed to fetch packets",packetsLoading:!1})}},fetchLogs:async()=>{const{logs:a}=t();0===a.length&&e({logsLoading:!0});try{const t=await ea();e({logs:t.logs,logsLoading:!1})}catch{e({logsLoading:!1})}},setLiveMode:t=>{e({liveMode:t})},setMode:async e=>{try{(await ia(e)).success&&await t().fetchStats()}catch(a){}},setDutyCycle:async e=>{try{(await la(e)).success&&t().fetchStats()}catch(a){}},sendAdvert:async()=>{try{const a=await oa();return a.success&&e({flashAdvert:t().flashAdvert+1}),a.success}catch(a){return!1}},triggerFlashReceived:()=>{e({flashReceived:t().flashReceived+1})},triggerFlashAdvert:()=>{e({flashAdvert:t().flashAdvert+1})},addResourceDataPoint:(a,n,s)=>{const r=Date.now(),{lastResourceFetch:o,resourceHistory:i}=t();if(r-o<1e3)return;const l=[...i,{timestamp:r,time:new Date(r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),cpu:a,memory:n}],c=l.length>s?l.slice(-s):l;var u,d;e({resourceHistory:c,lastResourceFetch:r}),u=c,d=r,"undefined"!=typeof window&&(_a&&clearTimeout(_a),_a=setTimeout(()=>{try{localStorage.setItem(Ea,JSON.stringify(u)),localStorage.setItem(La,d.toString())}catch{}_a=null},1e3))},hideContact:a=>{const{hiddenContacts:n}=t(),s=new Set(n);s.add(a),e({hiddenContacts:s}),function(e){if("undefined"!=typeof window)try{localStorage.setItem(Ma,JSON.stringify([...e]))}catch{}}(s)},clearPacketCache:()=>{fa.clear(),e({packets:[],lastPacketTimestamp:0}),fa.quickLoad().then(a=>{if(a.length>0){const n=Math.max(...a.map(e=>e.timestamp??0));e({packets:a,lastPacketTimestamp:n}),t().triggerTopologyCompute()}})},triggerTopologyCompute:()=>{var e,a,n,s;const{packets:r,stats:o,hiddenContacts:i}=t();if(0===r.length||!o)return;const l=o.neighbors??{},c=Object.fromEntries(Object.entries(l).filter(([e])=>!i.has(e))),u=o.local_hash,d=null==(a=null==(e=o.config)?void 0:e.repeater)?void 0:a.latitude,h=null==(s=null==(n=o.config)?void 0:n.repeater)?void 0:s.longitude;xa.compute(r,c,u,d,h)},triggerDeepAnalysis:async()=>{await fa.forceDeepLoad()},updateQuickNeighbors:()=>{const{packets:a,stats:n,hiddenContacts:s}=t();if(0===a.length||!n)return;const r=n.neighbors??{},o=function(e,t,a){if(!a||0===e.length||0===Object.keys(t).length)return[];const n=Date.now(),s=va(a),r=new Set(Object.keys(t)),o=function(e){var t,a;const n=new Map;for(const s of Object.keys(e)){const r=va(s),o=n.get(r);if(o){const i=null==(t=e[o])?void 0:t.zero_hop;(null==(a=e[s])?void 0:a.zero_hop)&&!i&&n.set(r,s)}else n.set(r,s)}return n}(t),i=new Map;for(const c of e){if(!Pa(c))continue;const e=Aa(c.src_hash,s,o,r,a);if(!e)continue;let t=i.get(e);t||(t=Ia(e),i.set(e,t)),$a(t,c)}for(const[c,u]of Object.entries(t))u.zero_hop&&!i.has(c)&&i.set(c,{hash:c,count:u.advert_count??0,rssiSum:u.rssi??0,rssiCount:void 0!==u.rssi?1:0,snrSum:u.snr??0,snrCount:void 0!==u.snr?1:0,lastSeen:u.last_seen??0});const l=[];for(const c of i.values()){const e=Oa(c,n);e&&l.push(e)}return l.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen),l}(a,Object.fromEntries(Object.entries(r).filter(([e])=>!s.has(e))),n.local_hash),i=t().quickNeighbors;(o.length!==i.length||o.some((e,t)=>{var a,n;return e.hash!==(null==(a=i[t])?void 0:a.hash)||e.count!==(null==(n=i[t])?void 0:n.count)}))&&(e({quickNeighbors:o}),function(e){"undefined"!=typeof window&&(Ra&&clearTimeout(Ra),Ra=setTimeout(()=>{try{localStorage.setItem(Ta,JSON.stringify(e))}catch{}Ra=null},1e3))}(o))},triggerSparklineCompute:()=>{const{packets:e,stats:a,hiddenContacts:n}=t();if(0===e.length||!a)return;const s=a.neighbors??{},r=Object.keys(s).filter(e=>!n.has(e));0!==r.length&&ba.compute(e,r)}})),Ua=Ba,Ha=()=>Ba(e=>e.stats),qa=()=>Ba(e=>e.statsError),Ja=()=>Ba(e=>e.packets),Va=()=>Ba(e=>e.packetsLoading),Ka=()=>Ba(e=>e.logs),Ga=()=>Ba(e=>e.logsLoading),Ya=()=>Ba(e=>e.liveMode),Qa=()=>Ba(e=>e.flashReceived),Xa=()=>Ba(e=>e.flashAdvert),Za=()=>Ba(e=>e.fetchLogs),en=()=>Ba(e=>e.setLiveMode),tn=()=>Ba(e=>e.resourceHistory),an=()=>Ba(e=>e.addResourceDataPoint),nn=()=>Ba(e=>e.hiddenContacts),sn=()=>Ba(e=>e.hideContact),rn=()=>Ba(e=>e.packetCacheState),on=()=>Ba(e=>e.triggerDeepAnalysis),ln=()=>Ba(e=>e.quickNeighbors),cn=At(e=>({sparklines:new Map,isComputing:!1,lastUpdated:0,nodeCount:0,setSparklines:t=>e({sparklines:t,lastUpdated:Date.now(),nodeCount:t.size,isComputing:!1}),setComputing:t=>e({isComputing:t})}));"undefined"!=typeof window&&setTimeout(()=>{ba.subscribe((e,t)=>{const a=cn.getState();t&&!a.isComputing?a.setComputing(!0):!t&&e.size>0?a.setSparklines(e):!t&&a.isComputing&&a.setComputing(!1)})},0);const un=()=>cn(e=>e.isComputing),dn=[],hn=new Map;function pn(e){return cn(t=>{const a=t.sparklines.get(e);if(!a||0===a.length)return dn;const n=hn.get(e);return n===a?n:(hn.set(e,a),a)})}const mn=At(e=>({topology:{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],gatewayNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:ya(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0}},isComputing:!1,lastComputeTimeMs:0,lastUpdated:0,setTopology:(t,a)=>e({topology:t,lastComputeTimeMs:a,lastUpdated:Date.now(),isComputing:!1}),setComputing:t=>e({isComputing:t})}));"undefined"!=typeof window&&xa.subscribe((e,t)=>{mn.getState().setTopology(e,t)});const fn=()=>mn(e=>e.topology),gn=()=>mn(e=>e.topology.hubNodes),yn=()=>mn(e=>e.topology.centrality),xn=()=>mn(e=>e.topology.fullAffinity);let bn=null,vn=null;const wn=()=>mn(e=>(e.topology.hubNodes!==vn&&(vn=e.topology.hubNodes,bn=new Set(e.topology.hubNodes)),bn)),kn=()=>mn(e=>e.topology.pathHealth),jn=()=>mn(e=>e.topology.disambiguationStats),Sn=()=>mn(e=>e.topology.disambiguationStats.totalPrefixes>0);function Cn(e){if(e<60)return`${Math.floor(e)}s`;const t=Math.floor(e/86400),a=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),s=[];return t>0&&s.push(`${t}d`),a>0&&s.push(`${a}h`),(n>0||0===s.length)&&s.push(`${n}m`),s.join(" ")}function Nn(e){const t=Date.now()/1e3-e;return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function En(e){const t=Date.now()/1e3-e;return t<60?`${Math.floor(t)}s`:t<3600?`${Math.floor(t/60)}m`:t<86400?`${Math.floor(t/3600)}h`:`${Math.floor(t/86400)}d`}function Ln(e){return new Date(1e3*e).toLocaleString()}function Mn(e){const t=new Date(1e3*e);return`${t.toLocaleString("en-US",{month:"short"})} ${t.getDate()}, ${t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}`}function Tn(e){return`${(e/1e6).toFixed(3)} MHz`}function _n(e){return`${(e/1e3).toFixed(1)} kHz`}const Rn=[{name:"Dashboard",to:"/",icon:gt},{name:"Contacts",to:"/contacts",icon:bt},{name:"Packets",to:"/packets",icon:yt},{name:"Statistics",to:"/statistics",icon:dt},{name:"System",to:"/system",icon:ft},{name:"Logs",to:"/logs",icon:mt},{name:"Terminal",to:"/terminal",icon:Et},{name:"Settings",to:"/settings",icon:Ct}],Pn="pymc-controls-expanded";function An(){var e,t,a,n;const{pathname:r}=ne(),i=oe(),{stats:l,setMode:c,setDutyCycle:u,sendAdvert:d}=Ua(),{logout:p,username:m}=Bt(),f=Ba(e=>e.prefetchForRoute),g=rn(),y=un(),x=mn(e=>e.isComputing),[b,v]=s.useState(!1),[w,k]=s.useState(!0),[j,S]=s.useState(!1),C=s.useRef(null),N=s.useCallback(e=>{e!==r&&(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{f(e)},100))},[r,f]),E=s.useCallback(()=>{C.current&&(clearTimeout(C.current),C.current=null)},[]);s.useEffect(()=>{const e=localStorage.getItem(Pn);null!==e&&queueMicrotask(()=>k("true"===e))},[]);const L=()=>{const e=!w;k(e),localStorage.setItem(Pn,String(e))};s.useEffect(()=>{queueMicrotask(()=>v(!1))},[r]),s.useEffect(()=>(document.body.style.overflow=b?"hidden":"",()=>{document.body.style.overflow=""}),[b]);const M=null==l?void 0:l.noise_floor_dbm,T=(null==(t=null==(e=null==l?void 0:l.config)?void 0:e.repeater)?void 0:t.mode)??"forward",_=(null==(n=null==(a=null==l?void 0:l.config)?void 0:a.duty_cycle)?void 0:n.enforcement_enabled)??!1,R=async()=>{S(!0),await d(),setTimeout(()=>S(!1),1e3)},P=()=>{c("forward"===T?"monitor":"forward")},A=()=>{u(!_)},$=()=>{p(),i("/login",{replace:!0})},I=g.isBackgroundLoading||g.isDeepLoading||y||x,O=()=>I?h.jsxs("div",{className:"px-3 pb-2",children:[h.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5",children:[h.jsxs("div",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-primary opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-primary"})]}),h.jsx("span",{className:"type-data-xs text-text-muted",children:"Analyzing database"})]}),h.jsx("div",{className:"mx-2 h-0.5 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-accent-primary/60 rounded-full animate-pulse",style:{width:"100%",animation:"shimmer 1.5s ease-in-out infinite"}})})]}):null,D=()=>h.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:Rn.map(e=>{const t=r===e.to;return h.jsxs(We,{to:e.to,onClick:()=>v(!1),onMouseEnter:()=>N(e.to),onMouseLeave:E,className:o("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-150 min-h-[44px]",t?"bg-accent-primary/15 text-accent-primary":"text-text-muted hover:text-text-primary hover:bg-white/5"),children:[h.jsx(e.icon,{className:o("w-5 h-5 flex-shrink-0",t&&"text-accent-primary")}),h.jsx("span",{className:"type-body-sm font-medium",children:e.name})]},e.name)})}),F=()=>h.jsxs("div",{className:"px-3 py-3",children:[h.jsxs("button",{onClick:L,className:"w-full flex items-center justify-between px-2 py-1.5 mb-2 rounded-lg hover:bg-white/5 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Nt,{className:"w-4 h-4 text-accent-primary"}),h.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Controls"})]}),h.jsx(ht,{className:o("w-4 h-4 text-text-muted transition-transform duration-200",w?"rotate-0":"-rotate-90")})]}),h.jsx("div",{className:o("overflow-hidden transition-all duration-300 ease-out",w?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:h.jsxs("div",{className:"control-panel-skeuo",children:[h.jsxs("button",{onClick:R,disabled:j,className:o("control-btn control-btn-primary w-full",j&&"opacity-70"),children:[h.jsx(St,{className:o("w-4 h-4",j&&"animate-pulse")}),h.jsx("span",{children:j?"Sending...":"Send Advert"})]}),h.jsxs("div",{className:"control-toggle-group",children:[h.jsxs("div",{className:"control-toggle-label",children:[h.jsx("span",{children:"Mode"}),h.jsx("span",{className:o("control-toggle-status","forward"===T?"text-accent-success":"text-accent-secondary"),children:"forward"===T?"FWD":"MON"})]}),h.jsx("button",{onClick:P,className:o("control-btn w-full","forward"===T?"control-btn-success":"control-btn-warning"),children:"forward"===T?h.jsxs(h.Fragment,{children:[h.jsx(kt,{className:"w-4 h-4"}),h.jsx("span",{children:"Forward"})]}):h.jsxs(h.Fragment,{children:[h.jsx(wt,{className:"w-4 h-4"}),h.jsx("span",{children:"Monitor"})]})})]}),h.jsxs("div",{className:"control-toggle-group",children:[h.jsxs("div",{className:"control-toggle-label",children:[h.jsx("span",{children:"Duty Cycle"}),h.jsx("span",{className:o("control-toggle-status",_?"text-accent-success":"text-text-muted"),children:_?"ON":"OFF"})]}),h.jsxs("button",{onClick:A,className:o("control-btn w-full",_?"control-btn-success":"control-btn-neutral"),children:[h.jsx(ft,{className:"w-4 h-4"}),h.jsx("span",{children:_?"Enabled":"Disabled"})]})]})]})})]}),z=()=>h.jsxs("div",{className:"mt-auto border-t border-white/5",children:[void 0!==(null==l?void 0:l.uptime_seconds)&&h.jsxs("div",{className:"px-4 py-3 flex items-center gap-2",children:[h.jsx(pt,{className:"w-3.5 h-3.5 text-text-muted"}),h.jsxs("span",{className:"type-data-xs text-text-secondary tabular-nums",children:[Cn(l.uptime_seconds)," uptime"]})]}),h.jsx("div",{className:"px-3 pb-3",children:h.jsx("div",{className:"bg-white/[0.03] rounded-xl p-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(jt,{className:"w-4 h-4 text-accent-primary"}),h.jsx("span",{className:"type-data-xs text-text-muted",children:"Noise Floor"})]}),h.jsx("span",{className:"type-data text-text-primary tabular-nums",children:null!=M?`${M.toFixed(0)} dBm`:"â€”"})]})})}),h.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-t border-white/5",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-success opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-success"})]}),h.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Live"})]}),(null==l?void 0:l.version)&&h.jsxs("span",{className:"type-data-xs text-text-muted",children:["v",l.version]})]}),h.jsx("div",{className:"px-3 pb-3",children:h.jsxs("button",{onClick:$,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-text-muted hover:text-accent-danger hover:bg-accent-danger/10 transition-all duration-150",children:[h.jsx(xt,{className:"w-4 h-4"}),h.jsx("span",{className:"type-body-sm",children:"Sign Out"}),m&&h.jsxs("span",{className:"ml-auto type-data-xs text-text-muted",children:["(",m,")"]})]})})]});return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:"lg:hidden fixed top-0 inset-x-0 z-[10001] h-14 bg-bg-body/70 backdrop-blur-xl border-b border-white/10",children:h.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-lg bg-accent-primary/20 flex items-center justify-center overflow-hidden",children:h.jsx("img",{src:Tt,alt:"",className:"w-5 h-5 object-contain"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-sm font-semibold text-text-primary",children:"pyMC Console"}),h.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",Mt]})]})]}),h.jsx("button",{onClick:()=>v(!b),className:"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-white/5 active:bg-white/10 transition-colors","aria-label":b?"Close menu":"Open menu",children:b?h.jsx(Lt,{className:"w-5 h-5 text-text-primary"}):h.jsx(vt,{className:"w-5 h-5 text-text-primary"})})]})}),h.jsx("div",{className:o("lg:hidden fixed inset-0 z-[10002] bg-black/60 backdrop-blur-sm transition-opacity duration-300",b?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>v(!1),"aria-hidden":"true"}),h.jsxs("aside",{className:o("lg:hidden fixed top-0 left-0 z-[10003] w-72 max-w-[85vw] h-full","bg-bg-surface/80 backdrop-blur-2xl border-r border-white/10","flex flex-col","transform transition-transform duration-300 ease-out",b?"translate-x-0":"-translate-x-full pointer-events-none"),children:[h.jsxs("div",{className:"flex items-center gap-3 px-4 py-5 border-b border-white/5",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-primary/20 flex items-center justify-center overflow-hidden",children:h.jsx("img",{src:Tt,alt:"",className:"w-6 h-6 object-contain"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-sm font-semibold text-text-primary",children:"pyMC Console"}),h.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",Mt]})]})]}),D(),O(),F(),z()]}),h.jsxs("aside",{className:"hidden lg:flex flex-col w-64 flex-shrink-0 h-screen sticky top-0 bg-bg-surface/70 backdrop-blur-2xl border-r border-white/10",children:[h.jsxs("div",{className:"flex items-center gap-3 px-5 py-6 border-b border-white/5",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-primary/15 flex items-center justify-center overflow-hidden",children:h.jsx("img",{src:Tt,alt:"",className:"w-6 h-6 object-contain"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-base font-semibold text-text-primary",children:"pyMC Console"}),h.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",Mt]})]})]}),D(),O(),F(),z()]})]})}const $n=s.memo(function(){const{theme:e}=at(),{backgroundImage:t,brightness:a}=e,[n,r]=s.useState(t),[o,i]=s.useState(!1);s.useEffect(()=>{if(t===n)return;const e=new Image;e.onload=()=>{i(!0),requestAnimationFrame(()=>{r(t),setTimeout(()=>i(!1),300)})},e.onerror=()=>{r(t)},e.src=t},[t,n]);const l=(100-a)/100;return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 -z-20",style:{contain:"paint",willChange:o?"opacity":"auto"},"aria-hidden":"true",children:h.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-300 ease-out",style:{backgroundImage:`url(${n})`,opacity:o?.7:1}})}),h.jsx("div",{className:"fixed inset-0 -z-10 bg-black pointer-events-none transition-opacity duration-200 ease-out",style:{opacity:l,contain:"paint"},"aria-hidden":"true"})]})});function In({className:e=""}){return h.jsx("div",{className:`bg-white/5 animate-pulse rounded-lg ${e}`,"aria-hidden":"true"})}function On(){return h.jsxs("div",{className:"section-gap","aria-label":"Loading dashboard",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(In,{className:"h-8 w-48"}),h.jsx(In,{className:"h-8 w-32"})]}),h.jsx(In,{className:"h-72"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:Array.from({length:8}).map((e,t)=>h.jsx(In,{className:"h-24"},t))}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>h.jsx(In,{className:"h-44"},t))}),h.jsx(In,{className:"h-96"})]})}function Dn(){return h.jsxs("div",{className:"section-gap","aria-label":"Loading list",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(In,{className:"h-8 w-40"}),h.jsx(In,{className:"h-8 w-24"})]}),h.jsx(In,{className:"h-20"}),h.jsxs("div",{className:"glass-card overflow-hidden",children:[h.jsx(In,{className:"h-10 rounded-none"}),h.jsx("div",{className:"divide-y divide-border-subtle/30",children:Array.from({length:10}).map((e,t)=>h.jsx("div",{className:"px-4 py-3",children:h.jsx(In,{className:"h-6"})},t))})]})]})}function Fn(){return h.jsxs("div",{className:"section-gap","aria-label":"Loading map",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(In,{className:"h-8 w-32"}),h.jsx(In,{className:"h-6 w-48"})]}),h.jsx(In,{className:"h-[500px]"}),h.jsx(In,{className:"h-64"})]})}function zn(){return h.jsxs("div",{className:"section-gap","aria-label":"Loading charts",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(In,{className:"h-8 w-36"}),h.jsx(In,{className:"h-8 w-40"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsx(In,{className:"h-80"}),h.jsx(In,{className:"h-80"})]}),h.jsx(In,{className:"h-64"})]})}function Wn(){return h.jsxs("div",{className:"section-gap","aria-label":"Loading settings",children:[h.jsx(In,{className:"h-8 w-32"}),h.jsxs("div",{className:"space-y-6",children:[h.jsx(In,{className:"h-48"}),h.jsx(In,{className:"h-64"}),h.jsx(In,{className:"h-32"})]})]})}function Bn(){return h.jsxs("div",{className:"section-gap","aria-label":"Loading system info",children:[h.jsx(In,{className:"h-8 w-28"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>h.jsx(In,{className:"h-28"},t))}),h.jsx(In,{className:"h-64"}),h.jsx(In,{className:"h-48"})]})}const Un=s.lazy(()=>st(()=>import("./Login-AvtQcXEW.js"),__vite__mapDeps([0,1,2]))),Hn=s.lazy(()=>st(()=>import("./Dashboard-ARH3OKlN.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16]))),qn=s.lazy(()=>st(()=>import("./Packets-0UiUORl3.js"),__vite__mapDeps([17,1,2,18,6,7,8,9,10,19,14,11,20]))),Jn=s.lazy(()=>st(()=>import("./Contacts-7fB_n0jn.js").then(e=>e.a),__vite__mapDeps([21,1,2,7,9,13,22,12,8,14,19]))),Vn=s.lazy(()=>st(()=>import("./Statistics-COP34pvH.js"),__vite__mapDeps([23,1,2,4,18,5,14,24,9,16,12]))),Kn=s.lazy(()=>st(()=>import("./System-CV0EjuAu.js"),__vite__mapDeps([25,1,2,14,5,20,16,22]))),Gn=s.lazy(()=>st(()=>import("./Logs-DjKBoOHI.js"),__vite__mapDeps([26,1,2,18,14,11,20,24,27]))),Yn=s.lazy(()=>st(()=>import("./Terminal-DiURQMW7.js"),__vite__mapDeps([28,1,2,14]))),Qn=s.lazy(()=>st(()=>import("./Settings-BEO6_GQ0.js"),__vite__mapDeps([29,1,2,8,14,16,27])));function Xn({children:e}){const{isAuthenticated:t,checkAuth:a}=Bt(),n=ne();return s.useEffect(()=>{a()},[a]),a()&&t?h.jsx(h.Fragment,{children:e}):h.jsx(ye,{to:"/login",state:{from:n},replace:!0})}class Zn extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var e;return this.state.hasError?h.jsxs("div",{className:"glass-card p-8 text-center",children:[h.jsx("p",{className:"type-subheading text-accent-red mb-2",children:"Page failed to render"}),h.jsx("p",{className:"type-body text-white/50 mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"Unknown error"}),h.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-accent-primary/20 text-accent-primary rounded-lg hover:bg-accent-primary/30 transition-colors",children:"Try Again"})]}):this.props.children}}function es(){const e=Ba(e=>e.initializeApp),{isAuthenticated:t,checkAuth:a}=Bt();return s.useEffect(()=>(a()&&t&&(e(),Jt||(Jt=setInterval(()=>{const{isAuthenticated:e,expiresAt:t,refreshToken:a}=Bt.getState();if(!e||!t)return;const n=t-Date.now();n<12e4&&n>0&&a()},3e4))),()=>{Jt&&(clearInterval(Jt),Jt=null)}),[e,t,a]),h.jsxs(h.Fragment,{children:[h.jsx($n,{}),h.jsxs(ve,{children:[h.jsx(xe,{path:"/login",element:h.jsx(s.Suspense,{fallback:h.jsx("div",{className:"min-h-screen bg-bg-body"}),children:h.jsx(Un,{})})}),h.jsx(xe,{path:"/*",element:h.jsx(Xn,{children:h.jsxs("div",{className:"flex min-h-screen",children:[h.jsx(An,{}),h.jsx("main",{className:"flex-1 min-w-0 pt-14 lg:pt-0",children:h.jsx("div",{className:"h-full overflow-y-auto",children:h.jsx("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:h.jsx(Zn,{children:h.jsxs(ve,{children:[h.jsx(xe,{path:"/",element:h.jsx(s.Suspense,{fallback:h.jsx(On,{}),children:h.jsx(Hn,{})})}),h.jsx(xe,{path:"/packets",element:h.jsx(s.Suspense,{fallback:h.jsx(Dn,{}),children:h.jsx(qn,{})})}),h.jsx(xe,{path:"/contacts",element:h.jsx(s.Suspense,{fallback:h.jsx(Fn,{}),children:h.jsx(Jn,{})})}),h.jsx(xe,{path:"/statistics",element:h.jsx(s.Suspense,{fallback:h.jsx(zn,{}),children:h.jsx(Vn,{})})}),h.jsx(xe,{path:"/system",element:h.jsx(s.Suspense,{fallback:h.jsx(Bn,{}),children:h.jsx(Kn,{})})}),h.jsx(xe,{path:"/logs",element:h.jsx(s.Suspense,{fallback:h.jsx(Dn,{}),children:h.jsx(Gn,{})})}),h.jsx(xe,{path:"/terminal",element:h.jsx(s.Suspense,{fallback:h.jsx(Dn,{}),children:h.jsx(Yn,{})})}),h.jsx(xe,{path:"/settings",element:h.jsx(s.Suspense,{fallback:h.jsx(Wn,{}),children:h.jsx(Qn,{})})})]})})})})})]})})})]})]})}m.createRoot(document.getElementById("root")).render(h.jsx(s.StrictMode,{children:h.jsx(tt,{children:h.jsx(Fe,{children:h.jsx(es,{})})})}));export{Za as $,kn as A,pn as B,pt as C,ka as D,un as E,Ua as F,sn as G,gn as H,yn as I,Nn as J,jn as K,We as L,Sn as M,na as N,sa as O,Sa as P,dt as Q,jt as R,ja as S,tn as T,an as U,ra as V,Tt as W,Lt as X,Ka as Y,Ga as Z,st as _,Bt as a,en as a0,mt as a1,da as a2,Na as a3,At as a4,Zt as a5,oa as a6,ia as a7,la as a8,ua as a9,Et as aa,at as ab,Ve as ac,Ze as ad,Ct as ae,Tn as af,_n as ag,ft as ah,fn as ai,on as aj,rn as ak,Ja as b,ut as c,Va as d,Ya as e,Xa as f,Ha as g,ln as h,nn as i,h as j,qa as k,Qa as l,ca as m,Cn as n,ta as o,$t as p,It as q,En as r,Mn as s,wa as t,oe as u,va as v,wn as w,xn as x,Ln as y,ht as z};
