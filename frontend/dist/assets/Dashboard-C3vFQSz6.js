import{j as e,r as t,p as s,y as a,g as n,A as l,T as r,z as i,D as o,E as c,x as d,H as u,I as m,J as h,K as x,O as p,Q as v,Z as f,U as g,V as j,W as b,Y as y,o as N}from"./vendor-react-2ZfjuUA7.js";import{u as k,a as w,b as M,c as _,d as S,g as L,e as C,f as B,h as F,T as R,j as T,k as H,D,m as P,n as $}from"./index-KnCOc2qS.js";import{u as A,a as E}from"./useThemeColors-DmA5YG8O.js";import{C as W,a as z,P as I,b as K,c as O}from"./PageLayout-ngVnQCYp.js";import{g as V,P as U,a as X,b as q}from"./PacketDetailModal-Bi-nmHAj.js";import{T as J}from"./TimeRangeSelector-DrK8e0eE.js";import{H as Q}from"./HashBadge-dI-tTEHS.js";import{R as G,L as Y,a as Z,A as ee,C as te,X as se,Y as ae,T as ne,b as le}from"./recharts-C3mWud9g.js";import{c as re}from"./link-scoring-Da0e82GZ.js";import{R as ie}from"./Grid-Bnjce2EG.js";import"./vendor-core-BY0i4DpV.js";import"./deckgl-DTsmDcfs.js";import"./SignalIndicator-BJ9kkhFQ.js";const oe={received:{value:"text-[var(--metric-received)]",barBase:"var(--metric-received)"},forwarded:{value:"text-[var(--metric-forwarded)]",barBase:"var(--metric-forwarded)"},transmitted:{value:"text-[var(--metric-transmitted)]",barBase:"var(--metric-transmitted)"},dropped:{value:"text-[var(--metric-dropped)]",barBase:"var(--metric-dropped)"},neutral:{value:"text-text-secondary",barBase:"var(--metric-neutral)"}};function ce({buckets:s,colorType:a,height:n=64}){const l=oe[a],{bars:r}=t.useMemo(()=>{var e,t;if(!s||0===s.length)return{bars:[]};const a=[],n=s.length/60;if(n<=1)a.push(...s);else for(let l=0;l<60;l++){const r=Math.floor(l*n),i=Math.floor((l+1)*n),o=s.slice(r,i),c=o.reduce((e,t)=>e+t.count,0),d=o.length>0?o.reduce((e,t)=>e+t.avg_snr,0)/o.length:0;a.push({bucket:l,start:(null==(e=o[0])?void 0:e.start)??0,end:(null==(t=o[o.length-1])?void 0:t.end)??0,count:c,airtime_ms:o.reduce((e,t)=>e+t.airtime_ms,0),avg_snr:d,avg_rssi:0})}const r=Math.max(...a.map(e=>e.count),1);return{bars:a.map(e=>({height:e.count>0?Math.max(e.count/r*100,8):0,color:e.count>0?l.barBase:"transparent",count:e.count,snr:e.avg_snr}))}},[s,l]);return s&&0!==s.length?e.jsx("div",{className:"w-full flex items-end gap-[1px]",style:{height:n},children:r.map((t,s)=>{var a;return e.jsx("div",{className:"flex-1 rounded-t-sm",style:{height:`${t.height}%`,backgroundColor:t.color,opacity:t.count>0?.8:.1,minHeight:t.count>0?"4px":"2px",maxWidth:"4px"},title:t.count>0?`${t.count} packets, SNR: ${null==(a=t.snr)?void 0:a.toFixed(1)}dB`:"No packets"},s)})}):e.jsx("div",{className:"w-full flex items-end justify-center gap-[2px] opacity-20",style:{height:n},children:e.jsx("span",{className:"type-data-xs text-text-muted",children:"No data"})})}const de={received:"text-text-secondary",forwarded:"text-text-secondary",transmitted:"text-text-secondary",dropped:"text-text-secondary",neutral:"text-text-secondary"},ue={sm:"card-sm",md:"card-md",lg:"card-lg",hero:"card-hero",auto:""};function me({title:t,value:s,color:a="neutral",subtitle:n,buckets:l,timeRangeLabel:r,icon:i,size:o="md",isLoaded:c=!0}){const d=oe[a],u="string"==typeof s?s:s.toLocaleString();return e.jsxs("div",{className:`data-card flex flex-col relative ${ue[o]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i&&e.jsx("span",{className:`icon-sm ${de[a]}`,children:i}),e.jsx("span",{className:"type-micro",children:t}),r&&e.jsx("span",{className:"pill-tag",children:r})]}),e.jsx("div",{className:"data-card-value",children:u}),e.jsx("div",{className:"flex-1 py-2 mt-2",children:l?e.jsx(ce,{buckets:l,colorType:a,height:64}):e.jsx("div",{className:"w-full h-16 flex items-center justify-center",children:e.jsx("div",{className:"w-full h-0.5 rounded-full",style:{backgroundColor:d.barBase,opacity:.15}})})}),e.jsx("div",{className:"type-label text-text-muted border-t border-border-subtle pt-3 mt-2",children:n||`Total ${t.toLowerCase()}`}),!c&&e.jsx(W,{})]})}function he(){const r=k(),i=w(),o=M(),c=_(),d=S(),u=t.useMemo(()=>[...r.length<=100?r:r.slice(-100)].sort((e,t)=>(t.timestamp??0)-(e.timestamp??0)),[r]),m=t.useMemo(()=>{const e=new Map;if(!(null==d?void 0:d.neighbors))return e;d.local_hash&&e.set(L(d.local_hash),d.local_hash);for(const t of Object.keys(d.neighbors)){const s=L(t);e.has(s)||e.set(s,t)}return e},[null==d?void 0:d.neighbors,null==d?void 0:d.local_hash]),[h,x]=t.useState(null),[p,v]=t.useState(null),f=t.useRef(0),g=t.useRef(0);t.useEffect(()=>{var e;if(0===u.length)return;const t=(null==(e=u[0])?void 0:e.timestamp)??0;if(t>g.current&&g.current>0){const e=u.find(e=>(e.payload_type_name||V(e.payload_type??e.type)).toLowerCase().includes("advert"));e&&(e.timestamp??0)>g.current&&(x(e.packet_hash),setTimeout(()=>x(null),600))}g.current=t},[u]),t.useEffect(()=>{if(c>0&&c!==f.current&&u.length>0){f.current=c;const e=u.find(e=>(e.payload_type_name||V(e.payload_type??e.type)).toLowerCase().includes("advert"));if(e){const t=requestAnimationFrame(()=>x(e.packet_hash)),s=setTimeout(()=>x(null),600);return()=>{cancelAnimationFrame(t),clearTimeout(s)}}}},[c,u]);const j=t.useMemo(()=>u.slice(0,15).map(e=>{if(e.src_hash&&e.src_hash.length<=4){const t=e.src_hash.toUpperCase(),s=m.get(t);if(s)return{...e,src_hash_full:s}}return e}),[u,m]);return e.jsxs("div",{className:"chart-container h-full flex flex-col",children:[e.jsxs("div",{className:"chart-header",children:[e.jsxs("div",{className:"chart-title",children:[e.jsx(s,{className:"chart-title-icon"}),"Recent Packets"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[o&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-2 h-2 fill-accent-success text-accent-success animate-pulse"}),e.jsx("span",{className:"type-data-xs text-text-muted",children:"LIVE"})]}),e.jsxs(n,{to:"/packets",className:"pill-subtle",children:["View all ",e.jsx(l,{className:"w-3 h-3"})]})]})]}),e.jsxs("div",{className:"sm:hidden flex items-center gap-1.5 px-3 py-1.5 border-b border-border-subtle/50 bg-bg-elevated/20",children:[e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wider w-14 flex-shrink-0",children:"Dir"}),e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wider w-7 flex-shrink-0",children:"Time"}),e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wider w-9 flex-shrink-0",children:"Src"}),e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wider flex-1 min-w-0",children:"Type"}),e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wider w-14 flex-shrink-0",children:"Route"}),e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wider w-12 flex-shrink-0",children:"Signal"})]}),e.jsx("div",{className:"hidden sm:block flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-bg-elevated/95 backdrop-blur-sm",children:e.jsxs("tr",{className:"border-b border-border-subtle/50",children:[e.jsx("th",{className:"text-left py-1.5 px-3 text-[9px] font-semibold text-text-muted uppercase tracking-wider w-16",children:"Dir"}),e.jsx("th",{className:"text-left py-1.5 px-3 text-[9px] font-semibold text-text-muted uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"text-left py-1.5 px-3 text-[9px] font-semibold text-text-muted uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"text-left py-1.5 px-3 text-[9px] font-semibold text-text-muted uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left py-1.5 px-3 text-[9px] font-semibold text-text-muted uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"text-right py-1.5 px-3 pr-4 text-[9px] font-semibold text-text-muted uppercase tracking-wider",children:"Signal"})]})}),e.jsx("tbody",{className:"divide-y divide-border-subtle/30",children:i&&0===u.length?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-text-muted",children:"Loading packets..."})}):0===j.length?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center py-8",children:[e.jsx(s,{className:"w-6 h-6 text-text-muted mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-text-primary",children:"No packets received"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Packets will appear here"})]})}):j.map((t,s)=>{const a=(t.payload_type_name||V(t.payload_type??t.type)).toLowerCase().includes("advert");return e.jsx(U,{packet:t,onClick:v,isFlashing:a&&h===t.packet_hash},`${t.packet_hash}_${t.timestamp}_${s}`)})})]})})}),e.jsx("div",{className:"sm:hidden flex-1 overflow-y-auto divide-y divide-border-subtle/30",children:i&&0===u.length?e.jsx("div",{className:"p-8 text-center text-text-muted",children:"Loading packets..."}):0===j.length?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(s,{className:"w-6 h-6 text-text-muted mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-text-primary",children:"No packets received"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Packets will appear here"})]}):j.map((t,s)=>{const a=(t.payload_type_name||V(t.payload_type??t.type)).toLowerCase().includes("advert");return e.jsx(X,{packet:t,onClick:v,isFlashing:a&&h===t.packet_hash},`${t.packet_hash}_${t.timestamp}_${s}`)})}),e.jsxs("div",{className:"px-3 py-1.5 border-t border-border-subtle/50 text-[10px] text-text-muted bg-bg-elevated/20 text-center",children:["Showing ",j.length," of ",u.length," packets"]}),p&&e.jsx(q,{packet:p,onClose:()=>v(null)})]})}t.memo(function({active:t,payload:s,label:a,formatValue:n,labelKey:l}){var r;if(!t||!s||0===s.length)return null;const i=l&&(null==(r=s[0])?void 0:r.payload)?s[0].payload[l]:a;return e.jsxs("div",{className:"bg-tooltip-bg border border-border-subtle rounded-lg px-4 py-3 shadow-xl",children:[i&&e.jsx("p",{className:"type-data-xs text-white/50 mb-2",children:i}),e.jsx("div",{className:"space-y-1.5",children:s.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),e.jsx("span",{className:"type-body-sm text-white/70 capitalize min-w-[60px]",children:t.name}),e.jsx("span",{className:"type-data-sm text-white tabular-nums",children:n?n(t.value,t.name):t.value.toLocaleString()})]},s))})]})});const xe=t.memo(function({active:t,payload:s,color:a,labelKey:n,unit:l=""}){var r,i;if(!t||!s||0===s.length)return null;const o=s[0],c=null==(r=null==o?void 0:o.payload)?void 0:r[n];return e.jsxs("div",{className:"bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 shadow-xl",children:[e.jsx("p",{className:"type-data-xs text-white/50 mb-1",children:c}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a}}),e.jsxs("span",{className:"type-data-sm text-white tabular-nums",children:[null==(i=null==o?void 0:o.value)?void 0:i.toLocaleString(),l]})]})]})});t.memo(function({payload:t}){return t&&0!==t.length?e.jsx("div",{className:"flex items-center justify-center gap-6 mt-4 pt-4 border-t border-white/5",children:t.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.color}}),e.jsx("span",{className:"type-body-sm text-white/60 capitalize",children:t.value})]},s))}):null});const pe=.2;function ve(e,t=1){return Math.floor(5*t*e)}function fe(e){const t=Math.round(e/pe)*pe;return Math.max(0,Math.min(5,t))}function ge({stats:s,receivedBuckets:a,droppedBuckets:n,forwardedBuckets:l,bucketDurationSeconds:d,timeRangeLabel:u,isLoaded:m=!0}){var h,x,p,v;const f=t.useMemo(()=>function(e,t,s,a,n){var l,r;const i=(null==t?void 0:t.reduce((e,t)=>e+t.count,0))??0,o=(null==s?void 0:s.reduce((e,t)=>e+t.count,0))??0,c=(null==a?void 0:a.reduce((e,t)=>e+t.count,0))??0,d=i>0?i:(null==e?void 0:e.rx_count)||1,u=o>0?o:(null==e?void 0:e.dropped_count)||0,m=d>0?u/(d+u)*100:0;let h=0;if(a&&a.length>0&&n)h=100*c/(a.length*n*1e3)*100;else if(e){const t=1e3*(e.uptime_seconds||1);h=(e.total_airtime_ms||e.airtime_used_ms||0)/t*100}const x=(null==e?void 0:e.neighbors)||{},p=Object.values(x).filter(e=>!0===e.zero_hop).length;let v=1;m<3?v-=pe:m>15?v+=.4:m>10&&(v+=pe),h>5&&(v+=pe),p>10&&(v+=pe);const f=fe(v),g=fe(.28*f),j=ve(f),b=ve(g),y=ve((null==(r=null==(l=null==e?void 0:e.config)?void 0:l.delays)?void 0:r.tx_delay_factor)??1);let N;return N=j>y?"increase":j<y?"decrease":"stable",{floodFactor:f,directFactor:g,floodSlots:j,directSlots:b,adjustment:N,duplicateRate:Math.round(100*m)/100,txUtilization:Math.round(1e3*h)/1e3,zeroHopCount:p,totalReceived:i,totalDropped:o}}(s,a,n,l,d),[s,a,n,l,d]),g=(null==(x=null==(h=null==s?void 0:s.config)?void 0:h.delays)?void 0:x.tx_delay_factor)??null,j=(null==(v=null==(p=null==s?void 0:s.config)?void 0:p.delays)?void 0:v.direct_tx_delay_factor)??null,b=null!==g?ve(g):null,y=null!==b&&f.floodSlots!==b,N="increase"===f.adjustment?r:"decrease"===f.adjustment?i:o;return e.jsxs("div",{className:"data-card flex flex-col relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx(c,{className:"w-4 h-4 text-[var(--metric-transmitted)] flex-shrink-0"}),e.jsx("span",{className:"type-micro",children:"TX DELAY"}),u&&e.jsx("span",{className:"pill-tag",children:u}),y&&e.jsxs("span",{className:"pill-tag flex items-center gap-1 "+("increase"===f.adjustment?"bg-accent-warning/20 text-accent-warning border-accent-warning/30":"bg-accent-success/20 text-accent-success border-accent-success/30"),children:[e.jsx(N,{className:"w-3 h-3"}),"increase"===f.adjustment?"+":"-",Math.abs(f.floodSlots-(b??0))]})]}),e.jsxs("div",{className:"data-card-value",children:["Ã—",f.floodFactor.toFixed(1)]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-x-3 gap-y-1 py-2 mt-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Flood"}),e.jsxs("span",{className:"tabular-nums text-accent-secondary font-medium",children:[f.floodSlots," slots"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Direct"}),e.jsxs("span",{className:"tabular-nums text-accent-secondary font-medium",children:[f.directSlots," slots"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Dup Rate"}),e.jsxs("span",{className:"tabular-nums "+(f.duplicateRate>10?"text-accent-warning":"text-text-secondary"),children:[f.duplicateRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"TX Util"}),e.jsxs("span",{className:"tabular-nums text-text-secondary",children:[f.txUtilization.toFixed(2),"%"]})]})]}),e.jsx("div",{className:"type-label text-text-muted border-t border-border-subtle pt-3 mt-2 truncate",children:null!==g?e.jsxs("span",{children:["Current: Ã—",g.toFixed(1)," / Ã—",(null==j?void 0:j.toFixed(1))??"â€”"]}):e.jsx("span",{children:"Slot-aligned factors"})}),!m&&e.jsx(W,{})]})}function je({trend:t}){return"stable"===t?e.jsx("span",{className:"mini-widget-trend stable",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"})})}):"up"===t?e.jsx("span",{className:"mini-widget-trend up",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}):e.jsx("span",{className:"mini-widget-trend down",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})}function be(){return e.jsx("div",{className:"mini-widget-loading",children:e.jsx("div",{className:"mini-widget-loading-spinner"})})}function ye({message:t}){return e.jsx("div",{className:"mini-widget-error",children:e.jsx("span",{title:t,children:"No data"})})}function Ne({title:t,icon:s,value:a,unit:n,valueSize:l="md",status:r,subtitle:i,trend:o,children:c,isLoading:d=!1,error:u,className:m="",onClick:h}){const x=["mini-widget-value","lg"===l&&"mini-widget-value-lg","sm"===l&&"mini-widget-value-sm",""].filter(Boolean).join(" "),p=["mini-widget",h&&"cursor-pointer",m].filter(Boolean).join(" ");return e.jsxs("div",{className:p,onClick:h,role:h?"button":void 0,children:[e.jsxs("div",{className:"mini-widget-header",children:[s,e.jsx("span",{className:"mini-widget-title",children:t}),r&&"unknown"!==r&&e.jsx("div",{className:`mini-widget-status-dot ${r}`}),o&&e.jsx(je,{trend:o})]}),d?e.jsx(be,{}):u?e.jsx(ye,{message:u}):e.jsxs(e.Fragment,{children:[void 0!==a&&e.jsxs("div",{className:x,children:[a,n&&e.jsx("span",{className:"mini-widget-unit",children:n})]}),i&&e.jsx("div",{className:"mini-widget-subtitle",children:i}),c]})]})}const ke=t.createContext({lbtStats:null,noiseFloor:null,hourlyNoiseFloor:[],linkQuality:null,channelHealth:null,trends:null,stats:null,recentPackets:[],quickNeighbors:[],isLoading:!0,error:null,refresh:async()=>{}});function we(e){if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t.map(Number).filter(e=>!isNaN(e))}catch{}return[]}function Me(e,t,s=2,a=!1){if(null===t)return"stable";const n=e-t;return(0!==t?100*Math.abs(n/t):Math.abs(n))<s?"stable":a?n>0?"up":"down":n>0?"down":"up"}function _e({children:s}){const a=S(),n=k(),l=C(),r=B(),i=null===a,o=t.useMemo(()=>function(e){const t=Math.floor(Date.now()/1e3),s=t-86400,a=e.filter(e=>e.timestamp>=s&&void 0!==e.lbt_attempts&&e.lbt_attempts>0),n=a.length,l=a.filter(e=>(e.lbt_attempts??0)>1).length,r=n>0?l/n*100:0,i=a.filter(e=>(e.lbt_attempts??0)>1),o=i.length>0?i.reduce((e,t)=>e+(t.lbt_attempts??0),0)/i.length:0,c=a.filter(e=>!0===e.lbt_channel_busy||1===e.lbt_channel_busy).length,d=n>0?c/n*100:0,u=[];for(const g of a){const e=we(g.lbt_backoff_delays_ms);u.push(...e)}const m=u.reduce((e,t)=>e+t,0),h=u.length>0?m/u.length:0,x=u.length>0?Math.max(...u):0,p=[],v=[],f=[];for(let g=0;g<24;g++){const e=t-3600*(24-g),s=e+3600,n=a.filter(t=>t.timestamp>=e&&t.timestamp<s),l=n.filter(e=>(e.lbt_attempts??0)>1).length,r=n.length>0?l/n.length*100:0;p.push(r);const i=[];for(const t of n){const e=we(t.lbt_backoff_delays_ms);i.push(...e)}const o=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:0;if(f.push(o),0===n.length)v.push(0);else{const e=n.filter(e=>!0===e.lbt_channel_busy||1===e.lbt_channel_busy).length,t=i.length>0?Math.max(...i):0,s=Math.min(n.length/5,1),a=.15,l=Math.log(1+r*a)/Math.log(1+100*a)*40,c=e/n.length*100,d=Math.min(.5*c,25);let u=0;o>100&&(u=Math.min(8*Math.log10(o/100),15));let m=0;t>500&&o>0&&t>2*o&&(m=Math.min((t-500)/200,5));const h=l+d+u+m;v.push(Math.min(h*s,85))}}return{totalPacketsWithLBT:n,packetsWithRetries:l,retryRate:r,avgRetries:o,channelBusyCount:c,channelBusyRate:d,avgBackoffMs:h,maxBackoffMs:x,totalBackoffMs:m,hourlyRetryRates:p,hourlyCollisionRisk:v,hourlyAvgBackoffMs:f,windowHours:24,packetCount:e.length}}(n),[n]),c=(null==a?void 0:a.noise_floor_dbm)??null,[d,u]=t.useState([]),m=t.useRef(0);t.useEffect(()=>{const e=async()=>{var e;const t=Date.now();if(!(t-m.current<6e4)){m.current=t;try{const t=await F(24);if(t.success&&(null==(e=t.data)?void 0:e.history)){const e=Math.floor(Date.now()/1e3),s=[];for(let a=0;a<24;a++){const n=e-3600*(24-a),l=n+3600,r=t.data.history.filter(e=>e.timestamp>=n&&e.timestamp<l);if(r.length>0){const e=r.reduce((e,t)=>e+t.noise_floor_dbm,0)/r.length;s.push(e)}else s.push(s.length>0?s[s.length-1]:-100)}u(s)}}catch{}}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]);const h=null==a?void 0:a.neighbors,x=t.useMemo(()=>{const e=h??{};return Object.fromEntries(Object.entries(e).filter(([e])=>!r.has(e)))},[h,r]),p=t.useMemo(()=>l.filter(e=>!r.has(e.hash)),[l,r]),v=t.useMemo(()=>function(e,t){if(0===e.length)return{neighbors:[],networkScore:0,neighborCount:0,bestLink:null,worstLink:null};const s=e.map(e=>{const s=function(e,t){let s=50;void 0!==e&&(s=e>=10?100:e>=5?80:e>=0?60:e>=-5?40:20);let a=50;return void 0!==t&&(a=t>=-70?100:t>=-80?80:t>=-90?60:t>=-100?40:20),Math.round(.6*s+.4*a)}(e.avgSnr??void 0,e.avgRssi??void 0),a=t[e.hash];return{name:(null==a?void 0:a.name)||(null==a?void 0:a.node_name)||e.prefix,hash:e.hash,rssi:e.avgRssi??-100,snr:e.avgSnr??-10,score:s,advertCount:e.count}});s.sort((e,t)=>t.score-e.score);const a=s.length>0?s.reduce((e,t)=>e+t.score,0)/s.length:0;return{neighbors:s,networkScore:Math.round(a),neighborCount:s.length,bestLink:s.length>0?{name:s[0].name,score:s[0].score}:null,worstLink:s.length>0?{name:s[s.length-1].name,score:s[s.length-1].score}:null}}(p,x),[p,x]),f=t.useMemo(()=>function(e,t,s){const a=e?Math.max(0,Math.min(100,100-5*e.retryRate)):50;let n=50;null!==t&&(n=Math.max(0,Math.min(100,(t+120)/30*100)));const l=(null==s?void 0:s.networkScore)??50,r=Math.round(.35*a+.25*n+.4*l);let i;return i=r>=85?"excellent":r>=70?"good":r>=50?"fair":r>=30?"congested":"critical",{score:r,status:i,components:{lbtHealth:Math.round(a),noiseHealth:Math.round(n),linkHealth:Math.round(l)}}}(o,c,v),[o,c,v]),[g,j]=t.useState({noiseFloor:null,networkScore:null,channelHealth:null}),b=t.useRef(0);t.useEffect(()=>{const e=()=>{const e=Date.now();e-b.current>3e4&&(b.current=e,j({noiseFloor:c,networkScore:(null==v?void 0:v.networkScore)??null,channelHealth:(null==f?void 0:f.score)??null}))};e();const t=setInterval(e,5e3);return()=>clearInterval(t)},[c,null==v?void 0:v.networkScore,null==f?void 0:f.score]);const y=t.useMemo(()=>({noiseFloor:{current:c,previous:g.noiseFloor,trend:null!==c?Me(c,g.noiseFloor,2,!0):"stable"},networkScore:{current:(null==v?void 0:v.networkScore)??0,previous:g.networkScore,trend:Me((null==v?void 0:v.networkScore)??0,g.networkScore,3,!1)},channelHealth:{current:(null==f?void 0:f.score)??0,previous:g.channelHealth,trend:Me((null==f?void 0:f.score)??0,g.channelHealth,3,!1)}}),[c,null==v?void 0:v.networkScore,null==f?void 0:f.score,g]),N={lbtStats:o,noiseFloor:c,hourlyNoiseFloor:d,linkQuality:v,channelHealth:f,trends:y,stats:a,recentPackets:n,quickNeighbors:l,isLoading:i,error:null,refresh:async()=>{}};return e.jsx(ke.Provider,{value:N,children:s})}function Se(){const e=t.useContext(ke);if(void 0===e)throw new Error("useLBTData must be used within an LBTDataProvider");return e}const Le={excellent:"var(--signal-excellent)",good:"var(--signal-good)",fair:"var(--signal-fair)",congested:"var(--signal-poor)",critical:"var(--signal-critical)",unknown:"var(--text-muted)"};function Ce(e,t){return 0===e?"No backoffs":`${t.toFixed(0)}% retry rate`}function Be(){const{lbtStats:s,isLoading:a,error:n}=Se(),l=d(),r=(null==s?void 0:s.avgBackoffMs)??0,i=(null==s?void 0:s.retryRate)??0,o=s?(u=r)<100?"excellent":u<250?"good":u<500?"fair":u<1e3?"congested":"critical":"unknown";var u;const m=null==s?void 0:s.hourlyAvgBackoffMs,h=t.useMemo(()=>!m||m.length<2?[]:m.map(e=>({value:e})),[m]),x=Le[o];return e.jsx(Ne,{title:"LBT Backoff",icon:e.jsx(c,{className:"mini-widget-icon"}),value:Math.round(r),unit:"ms",status:o,subtitle:s?Ce(r,i):void 0,isLoading:a,error:n,onClick:()=>l("/packets"),children:e.jsx("div",{className:"mini-widget-sparkline",children:h.length>0?e.jsx(G,{width:"100%",height:24,children:e.jsx(Y,{data:h,margin:{top:2,right:2,bottom:2,left:2},children:e.jsx(Z,{type:"monotone",dataKey:"value",stroke:x,strokeWidth:1,dot:!1,isAnimationActive:!1})})}):e.jsx("div",{className:"h-full"})})})}function Fe(){const{lbtStats:t,isLoading:s,error:a}=Se(),n=d(),l=(null==t?void 0:t.channelBusyCount)??0,r=(null==t?void 0:t.totalPacketsWithLBT)??0,i=(null==t?void 0:t.channelBusyRate)??0,o=t?(c=i)<.5?"excellent":c<1?"good":c<2?"fair":c<5?"congested":"critical":"unknown";var c;return e.jsx(Ne,{title:"Ch. Busy",icon:e.jsx(u,{className:"mini-widget-icon"}),value:l,status:o,subtitle:t?`${i.toFixed(2)}% of ${r} TX`:void 0,isLoading:s,error:a,onClick:()=>n("/packets")})}function Re(e){return null===e?"No reading":e<-115?"Very quiet":e<-105?"Quiet":e<-95?"Moderate":e<-85?"Elevated":"High interference"}const Te={excellent:"var(--signal-excellent)",good:"var(--signal-good)",fair:"var(--signal-fair)",congested:"var(--signal-poor)",critical:"var(--signal-critical)",unknown:"var(--text-muted)"};function He(){const{noiseFloor:s,hourlyNoiseFloor:a,trends:n,isLoading:l,error:r}=Se(),i=null===(o=s)||o<-110?"excellent":o<-100?"good":o<-90?"fair":o<-80?"congested":"critical";var o;const c=null==n?void 0:n.noiseFloor.trend,d=t.useMemo(()=>!a||a.length<2?[]:a.map(e=>({value:e})),[a]),u=Te[i];return e.jsx(Ne,{title:"Noise Floor",icon:e.jsx(m,{className:"mini-widget-icon"}),value:null!==s?Math.round(s):"â€”",unit:null!==s?"dBm":void 0,status:i,trend:c,subtitle:Re(s),isLoading:l,error:r,children:e.jsx("div",{className:"mini-widget-sparkline",children:d.length>0?e.jsx(G,{width:"100%",height:24,children:e.jsx(Y,{data:d,margin:{top:2,right:2,bottom:2,left:2},children:e.jsx(Z,{type:"monotone",dataKey:"value",stroke:u,strokeWidth:1,dot:!1,isAnimationActive:!1})})}):e.jsx("div",{className:"h-full"})})})}function De(){const s=d(),a=C(),n=k(),l=S(),r=null===l,i=(null==l?void 0:l.local_hash)?L(l.local_hash):"",o=(null==l?void 0:l.neighbors)??{},{neighborHashes:c,neighborNames:u}=t.useMemo(()=>{const e=new Set,t=new Map;for(const s of a){e.add(s.hash);const a=o[s.hash],n=(null==a?void 0:a.name)||(null==a?void 0:a.node_name)||s.prefix;t.set(s.hash,n)}return{neighborHashes:e,neighborNames:t}},[a,o]),m=t.useMemo(()=>{if(0===c.size||0===n.length||!i)return{champion:null,listener:null,loudest:null};const{scores:e}=re(n,c,i),t=[];for(const[n,r]of e)0!==r.blendedScore&&t.push({...r,name:u.get(n)??L(n)});let s=null,a=null,l=null;for(const n of t)(!s||n.blendedScore>s.blendedScore)&&(s=n),(!a||n.listenerScore>a.listenerScore)&&(a=n),(!l||n.loudScore>l.loudScore)&&(l=n);return{champion:s,listener:a,loudest:l}},[n,c,i,u]),{champion:f,listener:g,loudest:j}=m,b=f||g||j?e.jsxs("div",{className:"flex flex-col gap-0.5 mt-auto",children:[f&&e.jsx(R,{content:(y=f,e.jsxs("div",{className:"max-w-[220px]",children:[e.jsxs("div",{className:"font-semibold mb-1",children:["ðŸ† Champion: ",y.name]}),e.jsxs("div",{className:"text-text-muted mb-1",children:["Blended Score: ",y.blendedScore,e.jsx("span",{className:"text-text-muted/60 ml-1",children:"(Listener + Loud)"})]}),e.jsxs("div",{className:"border-t border-border-subtle pt-1 mt-1 space-y-0.5",children:[e.jsxs("div",{children:["Listener: ",y.listenerScore,"/100 (",y.listenerCount," shared paths)"]}),e.jsxs("div",{children:["Loud: ",y.loudScore,"/100 (",y.loudCount," packets relayed)"]})]})]})),children:e.jsxs("div",{className:"flex items-center gap-1 text-sm rounded px-1 -mx-1 hover:bg-white/5 transition-colors cursor-default",children:[e.jsx(h,{className:"w-3 h-3 text-map-neighbor-color flex-shrink-0"}),e.jsx("span",{className:"font-semibold text-map-neighbor-color font-mono truncate flex-1 min-w-0",children:f.name}),e.jsx("span",{className:"text-map-neighbor-color pl-2 tabular-nums flex-shrink-0 w-9 text-right",children:f.blendedScore})]})}),g&&g.hash!==(null==f?void 0:f.hash)&&e.jsx(R,{content:(t=>e.jsxs("div",{className:"max-w-[220px]",children:[e.jsxs("div",{className:"font-semibold mb-1",children:["ðŸ‘‚ Best Listener: ",t.name]}),e.jsxs("div",{className:"text-text-muted mb-1",children:["Score: ",t.listenerScore,"/100"]}),e.jsx("div",{className:"border-t border-border-subtle pt-1 mt-1",children:e.jsxs("div",{children:[t.listenerCount," packets where they heard your transmissions"]})})]}))(g),children:e.jsxs("div",{className:"flex items-center gap-1 text-sm rounded px-1 -mx-1 hover:bg-white/5 transition-colors cursor-default",children:[e.jsx(x,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),e.jsx("span",{className:"text-text-muted font-mono truncate flex-1 min-w-0",children:g.name}),e.jsx("span",{className:"text-text-muted pl-2 tabular-nums flex-shrink-0 w-9 text-right",children:g.blendedScore})]})}),j&&j.hash!==(null==f?void 0:f.hash)&&j.hash!==(null==g?void 0:g.hash)&&e.jsx(R,{content:(t=>e.jsxs("div",{className:"max-w-[220px]",children:[e.jsxs("div",{className:"font-semibold mb-1",children:["ðŸ“¢ Loudest: ",t.name]}),e.jsxs("div",{className:"text-text-muted mb-1",children:["Score: ",t.loudScore,"/100"]}),e.jsx("div",{className:"border-t border-border-subtle pt-1 mt-1",children:e.jsxs("div",{children:[t.loudCount," packets they relayed directly to you"]})})]}))(j),children:e.jsxs("div",{className:"flex items-center gap-1 text-sm rounded px-1 -mx-1 hover:bg-white/5 transition-colors cursor-default",children:[e.jsx(p,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),e.jsx("span",{className:"text-text-muted font-mono truncate flex-1 min-w-0",children:j.name}),e.jsx("span",{className:"text-text-muted pl-2 tabular-nums flex-shrink-0 w-9 text-right",children:j.blendedScore})]})})]}):0===a.length?e.jsx("div",{className:"flex items-center justify-center text-sm text-text-muted mt-auto",children:"No direct neighbors"}):e.jsx("div",{className:"flex items-center justify-center text-sm text-text-muted mt-auto",children:"No routing data yet"});var y;return e.jsx(Ne,{title:"Link Leaders",icon:e.jsx(v,{className:"mini-widget-icon"}),isLoading:r,onClick:()=>s("/contacts"),children:b})}const Pe={excellent:"var(--signal-excellent)",good:"var(--signal-good)",fair:"var(--signal-fair)",congested:"var(--signal-poor)",critical:"var(--signal-critical)",unknown:"var(--text-muted)"};function $e(){const{lbtStats:s,isLoading:a,error:n}=Se(),l=s?function(e){const{retryRate:t,channelBusyCount:s,totalPacketsWithLBT:a,avgBackoffMs:n,maxBackoffMs:l}=e;if(0===a)return 0;const r=Math.min(a/10,1),i=Math.log(1+.15*t)/Math.log(16)*40,o=s/a*100,c=Math.min(.5*o,25);let d=0;n>100&&(d=Math.min(8*Math.log10(n/100),15));let u=0;l>500&&n>0&&l>2*n&&(u=Math.min((l-500)/200,5));const m=(i+c+d+u)*r;return Math.min(m,85)}(s):0,r=s?(i=l)<15?"excellent":i<30?"good":i<45?"fair":i<60?"congested":"critical":"unknown";var i;const o=(null==s?void 0:s.maxBackoffMs)??0,c=s?o>200?`Max backoff: ${Math.round(o)}ms`:function(e){return e<15?"Clear channel":e<30?"Light traffic":e<45?"Moderate traffic":e<60?"Heavy traffic":e<75?"Congested":"Severe congestion"}(l):void 0,d=null==s?void 0:s.hourlyCollisionRisk,u=t.useMemo(()=>!d||d.length<2?[]:d.map(e=>({value:e})),[d]),m=Pe[r];return e.jsx(Ne,{title:"Collision Risk",icon:e.jsx(f,{className:"mini-widget-icon"}),value:l.toFixed(1),unit:"%",status:r,subtitle:c,isLoading:a,error:n,children:e.jsx("div",{className:"mini-widget-sparkline",children:u.length>0?e.jsx(G,{width:"100%",height:24,children:e.jsx(Y,{data:u,margin:{top:2,right:2,bottom:2,left:2},children:e.jsx(Z,{type:"monotone",dataKey:"value",stroke:m,strokeWidth:1,dot:!1,isAnimationActive:!1})})}):e.jsx("div",{className:"h-full"})})})}function Ae(){const[a,n]=t.useState(!1),[l]=t.useState(0),{stats:r,lbtStats:i,isLoading:o}=Se(),c=t.useMemo(()=>{if(!r)return null;const e=r.airtime_used_ms??0,t=r.max_airtime_ms??1;return{usedMs:e,maxMs:t,remainingMs:r.airtime_remaining_ms??0,utilizationPercent:r.utilization_percent??(t>0?e/t*100:0)}},[r]),d=t.useMemo(()=>{if(!i||0===i.totalPacketsWithLBT)return 100;const e=i.channelBusyCount,t=i.totalPacketsWithLBT;return(t-e)/t*100},[i]),u=(null==c?void 0:c.utilizationPercent)??0,m=(h=u)<30?"excellent":h<50?"good":h<70?"fair":h<90?"congested":"critical";var h;const x=(null==c?void 0:c.remainingMs)??0,p=d<99?`${d.toFixed(0)}% TX success`:((v=x)<1e3?`${Math.round(v)}ms`:v<6e4?`${(v/1e3).toFixed(1)}s`:`${(v/6e4).toFixed(1)}m`)+" remaining";var v;const f=c?e.jsx("div",{className:"mini-widget-progress mt-auto",children:e.jsx("div",{className:`mini-widget-progress-bar ${m}`,style:{width:`${Math.min(u,100)}%`}})}):null;return e.jsx(Ne,{title:"Duty Cycle",icon:e.jsx(s,{className:"mini-widget-icon"}),value:u.toFixed(1),unit:"%",status:m,subtitle:p,isLoading:o,children:f})}function Ee({className:t=""}){return e.jsx(_e,{children:e.jsxs("div",{className:`mesh-health-container ${t}`,children:[e.jsxs("div",{className:"mesh-health-header",children:[e.jsx(g,{className:"w-4 h-4 text-accent-primary"}),e.jsx("span",{className:"type-label text-text-muted",children:"MESH HEALTH"})]}),e.jsxs("div",{className:"widget-row",children:[e.jsx(Be,{}),e.jsx($e,{}),e.jsx(He,{}),e.jsx(Ae,{}),e.jsx(Fe,{}),e.jsx(De,{})]})]})})}function We(){var a,n,l,i,o,c,d,u,m;const h=S(),x=T(),p=k(),v=H(),f=A(),g=E(),[w,M]=t.useState(4),_=D[w],L=t.useMemo(()=>{var e;if(!(null==(e=null==h?void 0:h.config)?void 0:e.radio))return null;const t=h.config.radio;return{sf:t.spreading_factor??10,bw:t.bandwidth??25e4,cr:t.coding_rate??5,preamble:t.preamble_length??8}},[null==(n=null==(a=null==h?void 0:h.config)?void 0:a.radio)?void 0:n.spreading_factor,null==(i=null==(l=null==h?void 0:h.config)?void 0:l.radio)?void 0:i.bandwidth,null==(c=null==(o=null==h?void 0:h.config)?void 0:o.radio)?void 0:c.coding_rate,null==(u=null==(d=null==h?void 0:h.config)?void 0:d.radio)?void 0:u.preamble_length]),C=p.length,B=_.buckets,F=t.useMemo(()=>0===C?null:P(_.minutes,B,p,h),[C,_.minutes,B,L]),R=t.useMemo(()=>function(e,t){if(!e||0===e.length)return[];const s=t>1440;return e.map(e=>{const t=new Date(1e3*e.start);return{time:s?t.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit",hour12:!1}):t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),received:e.count}})}(null==F?void 0:F.received,_.minutes),[null==F?void 0:F.received,_.minutes]),W=t.useMemo(()=>{const e=R.length;return e<=12?0:e<=24?2:e<=48?5:e<=72?8:Math.floor(e/7)},[R.length]),V=t.useMemo(()=>{if(0===R.length)return[0,"auto"];const e=R.map(e=>e.received),t=Math.min(...e),s=Math.max(...e);if(t===s)return[Math.max(0,t-1),s+1];const a=.1*(s-t);return[Math.max(0,Math.floor(t-a)),Math.ceil(s+a)]},[R]),U=(null==h?void 0:h.uptime_seconds)?$(h.uptime_seconds):"0m",X=(null==h?void 0:h.node_name)||(null==(m=null==h?void 0:h.config)?void 0:m.node_name)||"Unknown Node",q=t.useMemo(()=>{var e,t,s,a;const n=(null==(e=null==F?void 0:F.received)?void 0:e.reduce((e,t)=>e+t.count,0))??0,l=(null==(t=null==F?void 0:F.forwarded)?void 0:t.reduce((e,t)=>e+t.count,0))??0,r=(null==(s=null==F?void 0:F.dropped)?void 0:s.reduce((e,t)=>e+t.count,0))??0,i=(null==(a=null==F?void 0:F.transmitted)?void 0:a.reduce((e,t)=>e+t.count,0))??0,o=((null==F?void 0:F.time_range_minutes)??_.minutes)/60;return{received:n,forwarded:l,dropped:r,transmitted:i,rxPerHour:o>0?Math.round(n/o):0,fwdPerHour:o>0?Math.round(l/o):0}},[F,_.minutes]);return x?e.jsxs(z,{className:"p-8 text-center",children:[e.jsx("p",{className:"type-subheading text-accent-red mb-2",children:"Failed to connect to backend"}),e.jsx("p",{className:"type-body text-white/50",children:x}),e.jsx("p",{className:"type-data-sm text-white/40 mt-4",children:"Make sure the Python backend is running on port 8000"})]}):e.jsxs(I,{children:[e.jsx(K,{title:X,icon:e.jsx(j,{}),controls:e.jsx(J,{ranges:D,selectedIndex:w,onSelect:M})}),e.jsx(ie,{template:"hero",children:e.jsxs(z,{isLoaded:v,skeletonType:"chart",children:[e.jsx(O,{icon:e.jsx(r,{}),title:"RECEIVED",badge:_.label,iconColor:"text-accent-success"}),e.jsx("div",{className:"type-hero font-semibold min-h-[3rem]",style:{color:f.received},children:q.received.toLocaleString()}),e.jsxs("div",{className:"type-body-sm text-text-secondary mt-1",children:[q.rxPerHour,"/hr rate"]}),e.jsx("div",{className:"mt-4",children:R.length>0?e.jsx(G,{width:"100%",height:180,children:e.jsxs(ee,{data:R,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient-received",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:f.received,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:f.received,stopOpacity:0})]})}),e.jsx(te,{strokeDasharray:"3 3",stroke:g.grid,vertical:!1}),e.jsx(se,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fill:g.axisTick,fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dy:8,interval:W,minTickGap:20}),e.jsx(ae,{domain:V,axisLine:!1,tickLine:!1,tick:{fill:g.axisTick,fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dx:-8,width:40}),e.jsx(ne,{content:e.jsx(xe,{color:f.received,labelKey:"time",unit:" packets"}),cursor:{stroke:g.cursor,strokeWidth:1}}),e.jsx(le,{type:"stepAfter",dataKey:"received",stroke:f.received,fill:"url(#gradient-received)",strokeWidth:1,dot:!1,activeDot:{r:4,strokeWidth:0,fill:f.received},isAnimationActive:!1})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No data available for this time range"})})]})}),e.jsxs(ie,{template:"compact",children:[e.jsx(me,{title:"FORWARDED",value:q.forwarded,subtitle:`${q.fwdPerHour}/hr rate`,color:"forwarded",buckets:null==F?void 0:F.forwarded,timeRangeLabel:_.label,icon:e.jsx(b,{className:"w-4 h-4"}),isLoaded:v}),e.jsx(me,{title:"DROPPED",value:q.dropped,subtitle:"Filtered or duplicate",color:"dropped",buckets:null==F?void 0:F.dropped,timeRangeLabel:_.label,icon:e.jsx(y,{className:"w-4 h-4"}),isLoaded:v}),e.jsx(ge,{stats:h,receivedBuckets:null==F?void 0:F.received,droppedBuckets:null==F?void 0:F.dropped,forwardedBuckets:null==F?void 0:F.forwarded,bucketDurationSeconds:null==F?void 0:F.bucket_duration_seconds,timeRangeLabel:_.label,isLoaded:v}),e.jsx(me,{title:"UPTIME",value:U,subtitle:"Since last restart",color:"neutral",icon:e.jsx(N,{className:"w-4 h-4"}),isLoaded:v})]}),e.jsx(Ee,{}),e.jsx(he,{}),h&&e.jsx(ie,{template:"auto",children:e.jsxs(z,{children:[e.jsx(O,{icon:e.jsx(s,{}),title:"Node Information",largeTitle:!0}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"type-label text-text-muted",children:"Node Name"}),e.jsx("p",{className:"type-body text-text-primary mt-1",children:X})]}),e.jsxs("div",{children:[e.jsx("span",{className:"type-label text-text-muted",children:"Version"}),e.jsxs("p",{className:"type-data text-text-primary mt-1",children:["v",h.version]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"type-label text-text-muted",children:"Core Version"}),e.jsxs("p",{className:"type-data text-text-primary mt-1",children:["v",h.core_version]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"type-label text-text-muted",children:"Local Hash"}),e.jsx("div",{className:"mt-1",children:h.local_hash?e.jsx(Q,{hash:h.local_hash,size:"sm"}):e.jsx("span",{className:"type-data-sm text-text-muted",children:"N/A"})})]})]}),h.public_key&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border-subtle",children:[e.jsx("span",{className:"type-label text-text-muted",children:"Public Key"}),e.jsx("div",{className:"mt-1",children:e.jsx(Q,{hash:h.public_key,prefixLength:12,suffixLength:8})})]})]})})]})}export{We as default};
