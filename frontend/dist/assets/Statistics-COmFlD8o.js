var e,t,s=Object.defineProperty,a=(e,t,a)=>((e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a)(e,"symbol"!=typeof t?t+"":t,a);import{j as n,r,aB as i,H as l,aC as o,aD as c,aE as C,aF as d,aG as A,aH as m,aI as u,aJ as D,aK as F,o as B,aL as E,aM as h,aN as x,aO as p,aP as g,aQ as f,a7 as b,aR as y,aj as v,h as j,ad as N,aS as w,ab as k,p as M,C as S,as as T}from"./vendor-react-O8XH9yVn.js";import{O as $,Q as P,S as R,U as L,V as _,W as z,X as H,Y as O,q as W,Z as I,_ as V,$ as q,B as G,a0 as X,d as K,h as Y,f as Q,u as U,m as J,a1 as Z,j as ee,a2 as te}from"./index-fGHoTdQN.js";import{u as se}from"./usePolling-UdPi_fKb.js";import{a as ae,b as ne,c as re,d as ie,e as le,s as oe}from"./useThemeColors-DMhPrXrK.js";import{c as ce,R as Ce,d as de,L as Ae,C as me,X as ue,Y as De,T as Fe,a as Be}from"./recharts-BU7auunF.js";import{T as Ee}from"./TimeRangeSelector-9pGCd7oa.js";import{a as he,c as xe,P as pe,b as ge}from"./PageLayout-BSuhSEjC.js";import{C as fe}from"./CollisionExplorerModal-Dv2EMg25.js";import{R as be,C as ye}from"./Grid-CIZAny_R.js";import"./vendor-core-WoOfkQwm.js";import"./deckgl-DTsmDcfs.js";import"./leaflet-D_ckmI2R.js";function ve({children:e,centered:t,className:s}){return n.jsx("div",{className:ce("flex-1 min-h-0",t&&"flex items-center justify-center",s),children:e})}const je={useAbsoluteThresholds:!0,baselinePercentile:6,spikePercentile:50,baselineDbm:-107,spikeDbm:-100,mergeGapSeconds:45,minSequenceLength:16,similarityToleranceDbm:5};function Ne(e,t){if(0===e.length)return 0;const s=t/100*(e.length-1),a=Math.floor(s),n=Math.ceil(s);return a===n?e[a]:e[a]+(e[n]-e[a])*(s-a)}function we(e){if(0===e.length)return{median:0,p90:0,p95:0,p99:0,max:0,min:0};const t=[...e].sort((e,t)=>e-t);return{median:Ne(t,50),p90:Ne(t,90),p95:Ne(t,95),p99:Ne(t,99),max:t[t.length-1],min:t[0]}}function ke(e,t,s){const a=s-t;if(0===a)return"moderate";const n=(e-t)/a;return n>.66?"critical":n>.33?"severe":"moderate"}r.memo(function({options:e,data:t,className:s="",onCreate:a}){const i=r.useRef(null),l=r.useRef(null);return r.useEffect(()=>{const s=i.current;if(!s)return;const n=s.getBoundingClientRect(),r=Math.floor(n.width)||400,o=Math.floor(n.height)||200,c=new R({...e,width:r,height:o},t,s);return l.current=c,null==a||a(c),()=>{c.destroy(),l.current=null}},[e]),r.useEffect(()=>{l.current&&t&&l.current.setData(t)},[t]),r.useEffect(()=>{const e=i.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!l.current)return;const{width:s,height:a}=t.contentRect;s>0&&a>0&&l.current.setSize({width:Math.floor(s),height:Math.floor(a)})});return t.observe(e),()=>{t.disconnect()}},[]),n.jsx("div",{ref:i,className:`w-full h-full ${s}`,style:{minHeight:100}})});const Me=new Map;function Se(e){var t;if(!e.startsWith("var("))return e;const s=Me.get(e);if(s)return s;const a=e.match(/var\(([^,)]+)(?:,\s*([^)]+))?\)/);if(!a)return e;const n=a[1].trim(),r=(null==(t=a[2])?void 0:t.trim())||"#888888",i=getComputedStyle(document.documentElement).getPropertyValue(n).trim()||r;return Me.set(e,i),i}function Te(e,t,s=!1){if(t.length<2)return;if(e.beginPath(),e.moveTo(t[0].x,t[0].y),2===t.length)return void e.lineTo(t[1].x,t[1].y);const a=.5;for(let n=0;n<t.length-1;n++){const s=t[Math.max(0,n-1)],r=t[n],i=t[n+1],l=t[Math.min(t.length-1,n+2)],o=r.x+(i.x-s.x)/6*a,c=r.y+(i.y-s.y)/6*a,C=i.x-(l.x-r.x)/6*a,d=i.y-(l.y-r.y)/6*a;e.bezierCurveTo(o,c,C,d,i.x,i.y)}s&&e.closePath()}r.memo(function({data:e,maxValue:t,onHover:s,highlightedItem:a=null,bandColor:i="#E12672",innerBandColor:l="#FF2D7A",meanColor:o="#FF6B9D",medianColor:c="#FF85AD",averageColor:C="#FFE135",cursorColor:d="rgba(255,255,255,0.5)"}){const A=r.useRef(null),m=r.useRef(null),u=r.useRef(e),D=r.useRef(t),F=r.useRef(a),B=r.useRef(s),E=r.useRef(e.length);r.useLayoutEffect(()=>{u.current=e,D.current=t,F.current=a,B.current=s});const h=r.useRef({band:i,innerBand:l,mean:o,median:c,average:C,cursor:d});r.useLayoutEffect(()=>{h.current={band:i,innerBand:l,mean:o,median:c,average:C,cursor:d}});const x=r.useMemo(()=>[e.map(e=>e.timestamp),e.map(e=>e.max)],[e]),p=r.useMemo(()=>{const e=function(e,t,s,a){return{hooks:{draw:n=>{const r=e.current,i=t.current,l=s.current,o=a.current;if(0===r.length)return;const c=n.ctx,C=n.bbox,d=C.left,A=C.top,m=C.width,u=C.height;if(m<=0||u<=0)return;const D=n.data[0],F=D.length;if(0===F)return;const B=D[0],E=D[F-1]-B||1,h=e=>d+(e-B)/E*m,x=e=>A+u*(1-e/i),p={min:r.map(e=>({x:h(e.timestamp),y:x(e.min)})),max:r.map(e=>({x:h(e.timestamp),y:x(e.max)})),p5:r.map(e=>({x:h(e.timestamp),y:x(e.p5)})),p95:r.map(e=>({x:h(e.timestamp),y:x(e.p95)})),p25:r.map(e=>({x:h(e.timestamp),y:x(e.p25)})),p75:r.map(e=>({x:h(e.timestamp),y:x(e.p75)})),mean:r.map(e=>({x:h(e.timestamp),y:x(e.mean)})),median:r.map(e=>({x:h(e.timestamp),y:x(e.median)})),average:r.map(e=>({x:h(e.timestamp),y:x(e.average)}))},g=(e,t)=>l?l===e?Math.min(1,1.5*t):"minMax"===l||"p5p95"===l||"p25p75"===l?.3*t:t:t,f=e=>l?l===e?1:"mean"===l||"median"===l||"average"===l?.3:1:1,b={band:Se(o.band),innerBand:Se(o.innerBand),mean:Se(o.mean),median:Se(o.median),average:Se(o.average)};c.save(),c.strokeStyle=b.average,c.lineWidth=4,c.globalAlpha=f("average"),Te(c,p.average),c.stroke(),c.globalAlpha=g("minMax",.15),c.fillStyle=b.band,c.beginPath(),Te(c,p.max);const y=[...p.min].reverse();for(const e of y)c.lineTo(e.x,e.y);c.closePath(),c.fill(),c.globalAlpha=g("p5p95",.3),c.fillStyle=b.band,c.beginPath(),Te(c,p.p95);const v=[...p.p5].reverse();for(const e of v)c.lineTo(e.x,e.y);c.closePath(),c.fill(),c.globalAlpha=g("p25p75",.55),c.fillStyle=b.innerBand,c.beginPath(),Te(c,p.p75);const j=[...p.p25].reverse();for(const e of j)c.lineTo(e.x,e.y);c.closePath(),c.fill(),c.strokeStyle=b.median,c.lineWidth=1.5,c.globalAlpha=f("median"),c.setLineDash([4,4]),Te(c,p.median),c.stroke(),c.strokeStyle=b.mean,c.lineWidth=1.5,c.globalAlpha=f("mean"),c.setLineDash([]),Te(c,p.mean),c.stroke(),c.restore()}}}}(u,D,F,h);return{width:400,height:200,padding:[4,4,4,4],cursor:{show:!0,x:!0,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!0},y:{range:[0,t]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1}],hooks:{setCursor:[e=>{var t,s;const a=e.cursor.idx;null!=a&&a>=0?null==(t=B.current)||t.call(B,a):null==(s=B.current)||s.call(B,null)}]},plugins:[e]}},[t]);r.useEffect(()=>{const t=A.current;if(!t||0===e.length)return;const s=E.current,a=e.length,n=Math.abs(a-s);if(!(!m.current||n>100||s>0&&n/s>.1)&&m.current)return m.current.setData(x),void(E.current=a);m.current&&m.current.destroy();const r=t.getBoundingClientRect(),i=Math.floor(r.width)||400,l=Math.floor(r.height)||200,o=new R({...p,width:i,height:l},x,t);return m.current=o,E.current=a,()=>{o.destroy(),m.current=null}},[p,x,e.length]),r.useEffect(()=>{const e=A.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!m.current)return;const{width:s,height:a}=t.contentRect;s>0&&a>0&&m.current.setSize({width:Math.floor(s),height:Math.floor(a)})});return t.observe(e),()=>{t.disconnect()}},[]),r.useEffect(()=>{m.current&&m.current.redraw()},[a,e]);const g=r.useCallback(()=>{null==s||s(null)},[s]);return 0===e.length?n.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No data available"}):n.jsx("div",{ref:A,className:"w-full h-full rounded-2xl overflow-hidden",onMouseLeave:g})});const $e=["#65024B","#701057","#7B1B61","#88276E","#923078","#9B3881","#A4418A","#AC4993","#B5549C","#BC5CA3","#C266AB","#C970B2","#CF7AB9","#D587C1","#DA93C8","#DF9ECE","#E3AAD4","#E7B5DA","#EBC2E0","#EECCE5","#F1D5E9","#F3DDED","#F5E4F0","#F6EBF1","#F6EFF1","#F5F2F0","#F3F3ED","#EFF3E6","#EBF1DF","#E5EFD5","#DDEBCA","#D4E6BD","#C8DEAB","#BCD79B","#B0CE8C","#A3C67D","#97BC6F","#88B161","#7CA856","#72A04D","#679845","#5E903D","#538735","#4B7F2E","#427827","#397021","#306819","#245D10","#195507","#0D4C00"],Pe=["#4F3043","#56304B","#603354","#6D3961","#793F6B","#834675","#8D4E7E","#965587","#A05E91","#A86698","#B06EA0","#B877A7","#BF81AF","#C78DB8","#CD98BE","#D2A3C4","#D6ADC8","#D9B5CB","#DABECC","#DAC3CC","#D9C7CA","#D8CAC8","#D6CBC6","#D4CDC2","#D1CDBE","#CCCDB9","#C6CBB1","#BCC5A4","#B2BE97","#A7B58A","#9CAB7E","#92A174","#889669","#808D62","#79855C","#737D56","#6D7552","#666C4C","#616548","#5C5D45","#575642","#54503F","#50493D","#4D453C","#4B403B","#4A3C3A","#49393A","#49343B","#4A313E","#4E3042"],Re=["#9EB0FF","#93AFFA","#87ADF4","#79ABED","#6CA9E6","#60A5DF","#54A0D5","#489ACA","#3E90BC","#3787AF","#327EA3","#2D7597","#296B8B","#25607C","#225771","#1E4E65","#1B465A","#183D4F","#153342","#122C38","#11242E","#101D25","#11181C","#121214","#160E0D","#1B0B07","#210B03","#270D01","#2D0E00","#340F00","#3B1100","#421301","#4B1602","#541905","#5D1E09","#68240F","#732B16","#803620","#8A3F2A","#944834","#9E513F","#A85A4A","#B46658","#BE6F63","#C8796F","#D2837A","#DD8D86","#EA9995","#F4A3A1","#FFADAD"],Le=["#2C1A4C","#2B2154","#2B295B","#2A3164","#29396C","#284174","#29497C","#2A5183","#305C8C","#376593","#416D9A","#4B76A0","#567FA6","#6489AD","#6F92B3","#7B9BBA","#86A3C0","#92ACC6","#A0B7CD","#ACC0D3","#B8C9DA","#C4D2E0","#D0DBE6","#DEE5EC","#E7ECED","#EDEFE9","#EDEEE1","#E9E9D4","#E4E4C8","#DEDEBD","#D8D8B1","#D2D2A5","#C9C996","#C1C18A","#B8B87E","#AEAE73","#A3A369","#97975E","#8D8D56","#83834D","#797945","#70703D","#646434","#5B5B2C","#525224","#49491D","#404016","#36360F","#2E2E08","#262600"],_e=["#372F38","#36303D","#363144","#36354E","#363957","#373F60","#39456A","#3C4D75","#415780","#47608A","#4D6992","#55729A","#5D7BA2","#6886AA","#728FB1","#7C97B7","#86A0BD","#91A8C2","#9DB2C8","#A7BACC","#B1C1CE","#BAC8D0","#C2CDD0","#CAD1CD","#CED3C8","#CFD3C2","#CFD1B9","#CBCCAD","#C6C6A2","#BFBF96","#B8B78B","#AFAF7F","#A4A472","#9B9A68","#91915E","#888755","#7E7E4C","#737243","#6B693D","#626137","#5B5932","#54512E","#4C482B","#474229","#423D29","#3F3829","#3C352B","#39322E","#383032","#372F37"],ze=["#1A3333","#1B373D","#1C3C47","#1E4255","#1F4762","#214E71","#235582","#255E92","#2969A1","#2C73AD","#2F7CB8","#3485C2","#3B8EC7","#4799C8","#50A1C9","#59AAC9","#62B2CA","#6BBACB","#76C3CB","#81CCCD","#92D5D1","#A4DED5","#B6E7DA","#CCF2DF","#DDFBE3","#034224","#08491F","#115119","#1C5914","#2B6212","#3D6915","#4E6E1B","#617224","#6F742B","#7B7631","#867836","#917B3C","#9E7E45","#AA844F","#B48D5D","#BC976C","#C3A27C","#CAB08F","#CFBBA0","#D5C6B0","#DACFC1","#DFD7D0","#E4DFE0","#E9E6ED","#EDEDFC"],He=["#2C194C","#2B2254","#2B295C","#2A3265","#293A6D","#284275","#284A7C","#2A5284","#2F5C8D","#366493","#3F6C99","#49749F","#527CA4","#5E85AA","#688DB0","#7395B6","#7E9DBB","#8AA6C2","#99B1C9","#A5BBD0","#B2C5D7","#C0CFDE","#CDD9E5","#DCE5EB","#E5ECED","#E6EEEA","#E0EAE1","#D4E2D4","#C8DBC8","#BCD3BC","#B0CAB0","#A4C2A3","#95B895","#89B088","#7DA87D","#71A071","#669966","#599059","#4F894E","#458244","#3B7B3A","#317430","#266A25","#1F611D","#1A5816","#174E12","#14450E","#123A0A","#103107","#0F2903"],Oe=["#3F3E3A","#3E3D3F","#3E3D44","#3E3D4B","#3E3F52","#3E425A","#3F4762","#414C6C","#445578","#485D82","#4E658B","#546E94","#5C779C","#6581A5","#6E8AAC","#7792B2","#809BB8","#89A3BD","#94ACC2","#9CB3C5","#A3BAC7","#A9C0C8","#AEC5C7","#B0C9C4","#B0CABF","#ADCAB9","#A9C9B2","#A2C5A8","#9BC19F","#93BC95","#8BB68B","#82B081","#78A775","#709F6A","#689760","#608E56","#5A864C","#537B42","#4F733B","#4B6B35","#486431","#465D2E","#44562C","#43512C","#424D2D","#42492E","#414630","#404333","#404036","#3F3E3A"],We=["#0D0D0D","#181818","#212121","#2B2B2B","#343434","#3C3C3C","#454545","#4D4D4D","#565656","#5E5E5E","#656565","#6D6D6D","#747474","#7C7C7C","#848484","#8B8B8B","#939393","#9C9C9C","#A7A7A7","#B1B1B1","#BBBBBB","#C5C5C5","#D1D1D1","#DFDFDF","#ECECEC","#094225","#184822","#2B4F20","#3A5420","#485822","#555B24","#615E26","#6F6229","#7A652B","#86682E","#926B30","#9F7035","#AD7940","#B6834D","#BD8E5C","#C2996C","#C6A47C","#CCB18F","#D1BCA0","#D5C6B0","#DACFC1","#DFD7CF","#E4DFE0","#E8E6ED","#EDEDFC"],Ie=["#E6E5FF","#D8DCF7","#CBD2EF","#BBC6E5","#ADBCDE","#A0B3D6","#93A9CE","#86A0C6","#7794BD","#6A8BB5","#5E81AC","#5177A4","#456E9B","#38628F","#2F5984","#274F78","#20476D","#1B3F61","#173653","#142E48","#12283E","#112233","#111D2A","#121921","#15181B","#181A18","#1E1D17","#252419","#2D2B1C","#353220","#3E3A25","#46422A","#514C31","#5A5536","#645E3C","#6D6741","#777047","#837B4F","#8D8556","#988F5E","#A29A67","#ADA470","#B9B17D","#C3BC89","#CDC795","#D7D2A2","#E0DCAF","#ECE9BE","#F5F4CB","#FFFFD9"],Ve=["#FFCF67","#F9C564","#F3BB60","#EBB05D","#E5A659","#DF9D56","#D99554","#D38C51","#CC824D","#C67B4B","#C07348","#B96C46","#B36444","#AB5C41","#A4553F","#9D4F3D","#95483C","#8E423A","#843B39","#7C3639","#743139","#6D2D3A","#662A3D","#5F2941","#5A2846","#552A4C","#522C53","#4F315D","#4D3566","#4C3B6F","#4C4179","#4C4883","#4D518E","#4F5897","#51609F","#5367A7","#556FAE","#5878B6","#5B80BC","#5E88C2","#6190C8","#6498CE","#68A3D5","#6BACDB","#6FB5E1","#72BEE6","#76C7EC","#7AD3F3","#7DDDF9","#81E7FF"],qe=["#1A2659","#212E61","#293568","#323F72","#3A477A","#424F82","#4A578A","#535F92","#5D699C","#6572A5","#6E7BAE","#7784B7","#808DC0","#8B97CA","#94A1D3","#9DAADC","#A6B3E5","#AFBCEC","#B9C6F2","#C0CDF5","#C7D4F7","#CEDAF9","#D4E1FB","#DCE9FD","#E3F0FE","#1F4E00","#2C5100","#3A5600","#445900","#4F5C02","#5A6005","#65660C","#736D18","#7E7423","#8A7B2E","#94823A","#9F8945","#AC9253","#B79A5E","#C3A36A","#CEAC75","#D9B581","#E5C090","#EDC99D","#F2D2A9","#F6DAB5","#F8E2C0","#FAECCE","#FBF4DA","#FDFDE6"],Ge=["#7E1700","#832504","#883008","#8F3C0C","#934610","#984E14","#9C5717","#A05F1B","#A5681F","#A97023","#AD7826","#B0802B","#B58930","#BA9437","#BE9D3E","#C2A647","#C7B051","#CBBA5D","#CFC66D","#D1CF7B","#D2D78A","#D2DE98","#D0E4A6","#CBE8B4","#C4EABE","#BDEAC6","#B3E9CD","#A6E6D2","#9BE2D5","#8EDDD7","#81D7D7","#74CFD6","#64C6D5","#59BDD2","#4FB5D0","#46ACCC","#3EA4C9","#379AC5","#3292C2","#2E8ABF","#2B82BB","#287AB8","#2471B4","#2269B0","#1F60AD","#1C58A9","#194FA5","#1344A0","#0C3B9C","#033198"],Xe=["#733957","#773850","#7A3849","#7E3942","#823C3D","#863F38","#8A4334","#8E4831","#94502E","#98572C","#9D5F2B","#A3672C","#A8712E","#AF7D32","#B58837","#BB933F","#C19F47","#C6AA52","#CDB761","#D1C26E","#D4CB7B","#D6D388","#D5D995","#D3DEA3","#CEE0AD","#C8E1B6","#C1E1BE","#B6DEC5","#ABDBC9","#A0D6CC","#94D0CE","#88C9CF","#7BC0CE","#70B8CD","#67AFCA","#5FA6C7","#589CC4","#5291BE","#4F88B9","#4E7EB3","#4F75AC","#516BA4","#55609A","#595891","#5D5087","#62497D","#664474","#6B3F69","#6F3B60","#723959"],Ke=["#DED9FF","#D0CFF9","#C3C6F3","#B3BBEC","#A6B1E6","#98A8E1","#8B9FDB","#7E95D4","#6E89CB","#617FC3","#5575B8","#4A6BAC","#4262A0","#395790","#334F83","#2E4776","#293F6A","#24385D","#1F304F","#1B2943","#172338","#141D2E","#111824","#0F151B","#0D1516","#0D1712","#0F1B12","#112113","#142716","#162F19","#1A361C","#1D3E20","#224825","#26512A","#2A5A2E","#2E6233","#336C38","#39773E","#3F8144","#488B4A","#529551","#5FA059","#70AB63","#7FB46B","#8EBD73","#9DC57B","#ACCD83","#BDD68C","#CCDE94","#DBE69B"],Ye=["#FFCDFD","#F7BEF2","#F0B0E8","#E6A0DC","#DE93D2","#D786C8","#CF7ABF","#C76FB5","#BD63AA","#B45AA1","#AB5198","#A1498E","#964184","#883977","#7C326B","#6E2C60","#612654","#542148","#451C3B","#391931","#2F1728","#281521","#22141C","#1D1417","#1A1414","#191612","#191811","#1B1D11","#1D2212","#212913","#253014","#2B3916","#324419","#384D1B","#3F561E","#456021","#4C6924","#547427","#5A7C2A","#60852E","#678E32","#6E9737","#77A33F","#7FAE47","#88BA51","#92C65D","#9CD26B","#A9E27F","#B3EF92","#BEFDA5"],Qe=["#001261","#011A66","#02226B","#022B71","#023376","#023A7B","#034280","#034A85","#06548B","#0B5D91","#136697","#1E6F9D","#2B79A4","#3C85AC","#4B90B3","#5A9ABA","#6AA4C1","#7AAEC8","#8DBAD0","#9DC4D6","#ADCDDD","#BDD6E3","#CCDFE8","#DEE6E9","#E8E7E5","#EEE3DC","#EEDBD0","#EBD0C0","#E7C6B2","#E3BCA5","#DFB298","#DBA88B","#D69D7C","#D29470","#CE8B64","#CA8258","#C6794C","#C26E3F","#BE6533","#B85C28","#B2511D","#A94512","#9C3709","#912D06","#872406","#7E1D06","#741506","#6A0D07","#620607","#590008"],Ue=["#4F1A3D","#4B1D43","#48214A","#432653","#3F2C5B","#3C3263","#38396C","#354174","#334B7F","#345487","#365E8F","#3B6797","#42719E","#4D7DA6","#5787AD","#6391B4","#709ABA","#7DA4BF","#8EAEC4","#9BB5C7","#A9BBC8","#B5C0C8","#C0C2C5","#CBC2BF","#D2C0B8","#D6BDAF","#D9B7A6","#D9AF99","#D8A88D","#D6A082","#D39776","#CF8D6B","#C8825D","#C27752","#BB6D47","#B3623D","#AA5633","#9F492A","#953E25","#8C3521","#822C1F","#7A251E","#721F1F","#6B1A21","#661824","#611627","#5C152B","#571631","#531736","#50193C"],Je={acton:{discrete:["#260D40","#2B1345","#2F194B","#342152","#382657","#3C2C5C","#403261","#443766","#483E6C","#4C4371","#504876","#544D7B","#57527F","#5D5884","#625C88","#685F8A","#6E618C","#74628D","#7B638D","#81638E","#88648E","#8E648E","#95658F","#9D658F","#A4668F","#AB6690","#B26790","#BB6992","#C26B94","#C86F97","#CD749B","#D07AA0","#D382A7","#D688AC","#D88FB2","#D995B8","#DB9CBD","#DEA4C4","#DFABC9","#E1B1CE","#E3B7D3","#E5BED8","#E6C5DE","#E8CBE2","#E9D0E6","#EBD6EA","#ECDBEE","#EDE1F3","#EFE6F6","#F0EAFA"],categorical:["#260D40","#F0EAFA","#A76690","#DDA1C2","#585380","#7D638E","#E8CAE1","#CF789E","#403261","#4C4371","#ECDBEE","#69608B","#E3B6D2","#D78CB0","#91648F","#BE6A92","#342152","#EAD3E8","#524B79","#73628D","#463A69","#605B86","#E5C0DA","#D382A7","#C86F97","#86648E","#EEE3F4","#DA97B9","#9B658F","#B26790","#2D1749","#E0ACCA","#3A2959","#8B648E","#311C4D","#EBD7EB","#EDDFF1","#AC6790","#A1668F","#6E618C","#E6C5DE","#78628D","#433665","#DEA7C6","#81638E","#554F7C","#B86891","#3D2D5D","#4F4775","#EFE7F7","#E9CEE4","#D27DA3","#2A1244","#655D89","#C36C94","#E1B1CE","#493F6D","#5C5783","#CC739A","#DB9CBD","#D892B4","#D587AB","#96658F","#E4BBD6","#362455","#4E4573","#7F638E","#D37FA5","#E1AECC","#382657","#EBD9ED","#DFA9C8","#A4668F","#8E648E","#99658F","#675F8A","#B56891","#BB6992","#E5BED8","#E2B4D0","#D07AA0","#71618C","#E6C2DC","#AA6690","#625C88","#EDE1F3","#E8CCE3","#AF6790","#CA7199","#C16B93","#453867","#57517E","#84638E","#4B416F","#E7C7DF","#423463","#514977","#3E2F5F","#544D7B","#93658F"]},bam:{discrete:$e,categorical:$e},bamako:{discrete:["#003B47","#023C46","#053E45","#083F43","#0A4141","#0D4340","#0F443E","#12463C","#16483A","#194A38","#1C4D36","#204F34","#235132","#28542F","#2C572C","#305A2A","#355C27","#395F24","#3F6321","#44661E","#49691A","#4E6D17","#537014","#5A7410","#5F780D","#657C09","#6A7F05","#718302","#788501","#7F8700","#858800","#8C8A00","#948C01","#9B8E04","#A1920B","#A89713","#AE9C1B","#B7A225","#BEA82E","#C5AD37","#CBB341","#D2B84D","#D9BF5B","#DEC567","#E4CA73","#E9D07E","#EFD58A","#F5DB97","#FAE0A3","#FFE5AD"],categorical:["#003B47","#FFE5AD","#61790B","#B4A022","#245231","#406420","#898900","#DDC464","#0F443E","#EFD58A","#CAB23F","#194A38","#748401","#506E16","#9E9108","#315A29","#083F43","#A99815","#948C01","#6A7F05","#BFA930","#7F8700","#14473B","#1E4E35","#F7DD9C","#2A562D","#043D45","#597411","#E6CC77","#385F25","#48691B","#D4BB51","#0B4241","#8F8A00","#44661E","#1B4C37","#547113","#6F8203","#12463D","#998E03","#27542F","#4C6B18","#A4940E","#2E582B","#355C27","#B9A529","#215033","#EAD181","#FBE1A5","#C5AD37","#3C6122","#848800","#063E44","#E2C86E","#D9BF5B","#CFB648","#16493A","#798600","#023C46","#667C08","#5D770E","#0D433F","#AE9C1B","#F3D993","#094042","#A69611","#8C8A00","#053E45","#0C4240","#365E26","#6D8004","#9C8F05","#4A6A1A","#D6BD56","#B19E1F","#F9DFA0","#647B0A","#2F592A","#10453D","#818800","#C7AF3B","#46681C","#0E443F","#265330","#174A39","#335B28","#5B750F","#778501","#5F780D","#E8CF7C","#718302","#F1D78E","#978D02","#F5DB97","#204F34","#AC9A18","#29552E","#A1920B","#B7A225","#033C46"]},bamo:{discrete:Pe,categorical:Pe},batlow:{discrete:["#011959","#06215B","#0A285C","#0D315D","#0E375E","#103D5F","#114260","#124761","#144D62","#165162","#195662","#1C5A62","#205E61","#26635F","#2C665D","#33695A","#3A6C57","#416F53","#4A724E","#52744A","#5A7745","#627941","#6A7B3D","#747E38","#7D8134","#868330","#8F862D","#9B892B","#A58B2C","#AF8D2E","#B98F32","#C29037","#CD923F","#D69446","#DE964F","#E69858","#ED9A62","#F39E70","#F8A17B","#FAA587","#FCA993","#FDAC9E","#FDB1AB","#FDB4B6","#FDB8C0","#FDBCCB","#FCBFD6","#FCC4E3","#FBC8EF","#FACCFA"],categorical:["#011959","#FACCFA","#828231","#226061","#F29D6D","#4D734D","#114360","#C09036","#FDB4B4","#DD954D","#356A59","#FCBFD6","#175262","#677B3E","#A18A2B","#0D315D","#FCA890","#FBC6E8","#2B655E","#B18D2F","#5A7745","#FDAEA2","#CF9340","#0F3B5F","#E9995C","#FDBAC4","#416F53","#91862D","#1B5962","#08255B","#747E38","#134B61","#F9A380","#8A842F","#0E365E","#124761","#154F62","#E39754","#7B8034","#1E5D62","#99882C","#195662","#0B2B5C","#FDB7BC","#C8913B","#FCC3DF","#EE9B64","#A98C2C","#FDB1AB","#FDBCCD","#FBC9F1","#051F5A","#F6A077","#607942","#FDAB9A","#477150","#3B6D56","#B98F32","#26635F","#537549","#D69446","#6D7C3B","#30685C","#103F60","#FBA689","#BD8F34","#CB923E","#EB9A60","#FDB8C0","#FBC7EC","#F09C69","#8E852E","#FDBBC9","#7F8133","#031C5A","#114160","#FDAC9E","#5D7844","#FCA995","#185462","#787F36","#A58B2C","#0A285C","#9D892B","#33695A","#0D335E","#637A40","#165062","#124561","#205E61","#144D62","#1D5B62","#0C2E5D","#D9954A","#3E6E55","#AD8C2D","#F49F72","#868330","#B58E30","#577647"]},batlowk:{discrete:["#04050A","#0A0D15","#0F141E","#121B29","#152233","#18293D","#1C3146","#21384F","#274156","#2C485B","#314E5E","#36535F","#3B575F","#405C5E","#445F5D","#49625B","#4D6558","#526756","#586B52","#5E6E4F","#63724B","#6A7548","#717845","#797D41","#81813E","#8A853B","#938839","#9F8D38","#A99139","#B3943B","#BE973E","#C89A43","#D39D4C","#DB9F54","#E2A15D","#E8A366","#EEA570","#F3A77C","#F6A986","#F8AC91","#FAAE9A","#FCB1A4","#FDB4B0","#FDB7B9","#FDBAC3","#FDBDCD","#FDC1D8","#FCC5E4","#FBC8EF","#FACCFA"],categorical:["#04050A","#FDC0D6","#787C41","#38555F","#E5A160","#536855","#AF933A","#FAAE9A","#1A2E43","#FDB6B7","#294458","#455F5C","#63724B","#CD9B47","#91883A","#F3A77E","#111A27","#F7AB8D","#FDBBC5","#FCB2AA","#D99E52","#A18E38","#4C6459","#21384F","#3F5B5E","#152335","#0C1019","#EEA570","#5B6D50","#6C7647","#314E5E","#85823D","#BE973E","#7E7F3F","#FBB0A2","#49625B","#576A53","#0F151F","#2D495B","#DFA059","#727944","#FDBDCD","#253E54","#EAA368","#C69942","#3C585F","#998B38","#677449","#F1A678","#F9AC92","#141F2F","#1D3248","#506657","#090C13","#A99139","#5F6F4E","#35525F","#435D5D","#FDB8BD","#F5A984","#B5953B","#FDB5B2","#17273B","#D39D4C","#8C853B","#9D8C38","#415C5E","#1F354B","#33505E","#FCB1A6","#101723","#3E595F","#121C2B","#757B43","#06080F","#FCB3AE","#3A565F","#274156","#61704D","#88843C","#2B475A","#FDBED1","#6A7548","#596C51","#192B3F","#6F7845","#233B51","#C99A45","#F0A574","#DC9F55","#2F4B5D","#47615C","#F6AA88","#FDB9C1","#C29840","#4A635A","#FAAD96","#81813E","#7B7E40","#E7A264"]},batloww:{discrete:["#011959","#06215B","#0A285C","#0D315D","#0E375E","#103D5F","#114260","#124761","#144C62","#165062","#185562","#1B5962","#1F5D62","#246261","#2A665F","#30695D","#366C5A","#3D7056","#467352","#4E764E","#56794A","#5E7C46","#667F42","#70823D","#798539","#828936","#8C8C33","#989032","#A29433","#AD9738","#B79B3F","#C19E48","#CBA154","#D3A45E","#D9A669","#DFA872","#E4AA7C","#E9AC88","#EEAF91","#F2B39C","#F6B9A8","#F9C0B5","#FCCAC4","#FED3CF","#FFDBDA","#FFE3E2","#FFEAEA","#FFF2F2","#FFF8F8","#FFFEFE"],categorical:["#FFFEFE","#011959","#7E8737","#205F61","#E7AB84","#497451","#114360","#FED1CD","#BF9D46","#637E44","#9E9233","#FFEAEA","#0D315D","#326B5C","#F5B7A6","#165162","#D7A564","#0F3B5F","#1A5862","#3D7056","#FFF5F5","#FFDFDD","#FAC3BA","#134A61","#08255B","#70823D","#EEB094","#56794A","#E0A874","#8E8D33","#28655F","#AF9839","#CBA154","#EBAD8B","#1D5C62","#051F5A","#124761","#FFE5E4","#B79B3F","#A79535","#386D59","#5C7B47","#185562","#DBA76D","#F8BDAF","#FFF0F0","#246261","#F2B39C","#868A35","#4F774D","#E4AA7C","#2D685E","#77853A","#FED8D6","#103F60","#FFFAF9","#968F32","#D1A35C","#144E62","#FCCAC4","#437254","#698040","#0E365E","#0B2B5C","#C59F4C","#30695D","#1C5A62","#A29433","#407155","#FFDBDA","#0C2E5D","#F7BAAA","#E5AB80","#175362","#828936","#1F5D62","#BB9C42","#E9AC88","#FFF7F7","#3A6E58","#9A9132","#8A8B34","#4C754F","#FFEDED","#D9A669","#144C62","#266460","#FDCDC9","#FCC6BF","#FFE2E1","#FFFCFC","#7B8639","#2B675E","#155062","#5F7C45","#F9C0B5","#356C5A","#F3B5A1","#EDAF8F","#FED5D2"]},berlin:{discrete:Re,categorical:Re},bilbao:{discrete:["#4C0001","#54070B","#5B0E13","#64161A","#6B1D20","#712227","#77282D","#7D2E34","#84343B","#8A3A41","#8F4047","#94464B","#984C4F","#9B5253","#9D5754","#9E5C56","#A06057","#A16458","#A26959","#A36D5A","#A4715B","#A5745B","#A6785C","#A77C5D","#A8805E","#A9845F","#AA875F","#AC8C60","#AD9061","#AE9463","#AF9864","#B19D68","#B3A36E","#B6A975","#B8AD7E","#BBB287","#BDB590","#C0B99A","#C2BCA3","#C4BFAA","#C6C2B2","#C8C5B9","#CBCAC1","#CFCEC9","#D5D4D1","#DBDBDA","#E3E3E2","#EDEDED","#F6F6F6","#FFFFFF"],categorical:["#4C0001","#F8F8F8","#A9815E","#984D50","#BEB794","#AF9965","#CCCAC3","#78292F","#A26A59","#9F5D56","#64161A","#B6AA77","#C4C0AC","#A6765C","#8A3A41","#AC8C60","#DDDDDB","#A16358","#C7C5B7","#B3A16B","#A4705A","#6E2024","#EAEAE9","#92434A","#BAB185","#9C5554","#AD9262","#580B10","#813137","#C1BCA1","#AA865F","#D2D2CE","#A77C5D","#D7D7D4","#BCB48D","#B4A571","#C0B99A","#9E5955","#AB8960","#A6795C","#A36D5A","#8E3F46","#85353C","#A16758","#732529","#CAC7BD","#F1F1F0","#520509","#AC8F61","#5E1115","#C6C2B2","#E3E3E2","#691B1F","#B8AD7E","#95484D","#AE9663","#B19D68","#A5735B","#A06057","#9A5152","#A87E5D","#7D2E34","#A9835E","#C3BEA6","#CFCEC9","#A46E5A","#F4F4F4","#DADAD8","#B29F69","#EDEDED","#BBB289","#9D5754","#AF9764","#904148","#994F51","#B3A36E","#A87F5E","#A26859","#AC8D61","#BDB590","#AA875F","#A77A5D","#AB8A60","#A4715B","#611418","#BFB897","#E6E6E6","#9B5353","#D5D4D1","#974A4F","#C8C6BA","#A16558","#9F5E56","#76272C","#67191D","#8C3C43","#B9AF82","#C3BFA9","#B5A874","#4F0205"]},broc:{discrete:Le,categorical:Le},broco:{discrete:_e,categorical:_e},buda:{discrete:["#B301B3","#B30BAE","#B314AA","#B31CA6","#B323A2","#B3289F","#B32E9D","#B4339A","#B53998","#B63E96","#B84394","#B94892","#BB4C91","#BD528F","#BE568D","#C05B8C","#C15F8A","#C36389","#C46987","#C66D86","#C77184","#C97583","#CA7982","#CB7E80","#CD837F","#CE877E","#CF8B7D","#D0917B","#D1957A","#D29979","#D49E78","#D5A277","#D6A776","#D7AC75","#D8B073","#D9B572","#DAB971","#DCBF70","#DDC36F","#DEC86E","#DFCC6C","#E0D16B","#E2D76A","#E4DC69","#E6E168","#E9E667","#EDEC67","#F3F366","#F9F966","#FFFF66"],categorical:["#B301B3","#FFFF66","#CD857E","#BC4E90","#DBBD70","#C56A87","#B32F9C","#E3DB69","#D4A177","#EDEC67","#D1937B","#B73F95","#C05C8B","#DFCB6D","#C97882","#B31CA6","#D8AE74","#E7E368","#DAB572","#B311AC","#D39A79","#C36389","#C77184","#B53798","#E1D36B","#BE558E","#B94793","#CB7E80","#CF8C7C","#DDC46E","#B326A0","#F6F566","#D6A875","#DAB971","#C66E86","#E2D76A","#B32B9E","#B317A9","#B4339A","#BA4B91","#C46788","#C2608A","#B309AF","#D49E78","#B63B97","#BD528F","#DCC06F","#EAE767","#FAFA66","#D2977A","#F1F066","#D0907C","#CE897D","#C87483","#CC827F","#D5A576","#B321A3","#E5DF68","#B84394","#D9B273","#E0CF6C","#CA7B81","#DEC86E","#BF598C","#D7AB75","#E6E168","#D1957A","#CC8080","#D39C78","#E0CD6C","#CD847F","#B63D96","#C87384","#C66C86","#F8F866","#D49F78","#D9B473","#DAB772","#BF578D","#CB7D81","#CF8A7D","#B32D9D","#D08E7C","#DBBB71","#C2628A","#E2D56A","#DCBF70","#BC508F","#C46987","#C05B8C","#DFCA6D","#DDC26F","#C15E8B","#D7AD74","#F3F366","#DEC66E","#D5A377","#B31AA7","#BA4992","#CE877E"]},bukavu:{discrete:ze,categorical:ze},cork:{discrete:He,categorical:He},corko:{discrete:Oe,categorical:Oe},davos:{discrete:["#00054A","#010E51","#041459","#081C61","#0C2368","#102A6F","#133075","#17377C","#1C3F83","#204588","#244C8D","#295291","#2D5895","#335F98","#38649A","#3C699C","#416E9D","#46729D","#4C779D","#517B9C","#567F9B","#5A829A","#5F8598","#658996","#698C94","#6E8F92","#739290","#78968D","#7D998C","#829D8A","#88A089","#8DA488","#95AA87","#9BAF88","#A3B489","#ABBB8C","#B4C190","#BFCA96","#C9D29E","#D2D9A6","#DBE0AF","#E3E7B8","#EBEDC4","#F0F1CD","#F4F4D6","#F7F7DE","#FAF9E6","#FCFCF0","#FDFDF7","#FEFEFE"],categorical:["#00054A","#FDFDF4","#688B94","#2D5895","#B2C08F","#E8EBC0","#87A089","#133075","#4B769D","#5A829A","#204588","#76958E","#D0D8A4","#99AD88","#F6F6DB","#3C699C","#081C61","#031256","#1A3B7F","#537C9C","#A4B68A","#C1CC98","#7E9A8B","#FAFAE8","#356199","#0E266B","#DEE3B3","#274F90","#6F9091","#618697","#8FA588","#F0F1CD","#43709D","#1D4084","#47739D","#F3F4D4","#658996","#567F9B","#17367A","#FCFBEE","#4F799D","#C9D29E","#93A987","#39659B","#D8DEAB","#ABBB8C","#739290","#B9C693","#F8F8E1","#234A8C","#112B70","#7A978D","#9EB188","#315C97","#829D8A","#05175B","#010C50","#3F6C9D","#0B2065","#5D8499","#2A5392","#8BA388","#6B8D93","#EDEFC7","#E3E7B8","#22488A","#638897","#122E73","#00094D","#AEBD8D","#4D789D","#CDD5A1","#5F8598","#58819A","#071A5E","#0C2368","#18387D","#91A787","#37639A","#EBEDC4","#F2F2D0","#FBFBEB","#74938F","#2F5A96","#335F98","#809B8B","#BDC995","#49759D","#719191","#9BAF88","#F7F7DE","#1B3E82","#A8B88B","#849E89","#557E9B","#E6E9BC","#45719D","#1E4386","#96AB87","#89A188"]},devon:{discrete:["#2C1A4C","#2B1E51","#2B2356","#2A295B","#2A2D60","#293265","#29376A","#283B6E","#274174","#27467A","#274C7F","#275186","#28568C","#2A5C95","#2D609C","#3064A3","#3468AA","#396BB1","#3F70B9","#4774C0","#4F79C6","#597DCC","#6382D1","#6F88D7","#798CDB","#8290DF","#8C95E2","#969AE6","#9E9EE9","#A6A3EB","#ACA7ED","#B1ACEF","#B7B1F0","#BBB5F1","#BFB9F2","#C3BEF3","#C7C2F4","#CCC7F4","#D0CCF5","#D4D0F6","#D8D4F7","#DCD9F8","#E1DEF9","#E5E3FA","#E9E7FB","#EDECFB","#F2F0FC","#F7F6FD","#FBFAFE","#FFFFFF"],categorical:["#2C1A4C","#F8F8FE","#758AD9","#C6C0F3","#28568C","#29376A","#AAA5ED","#DEDCF8","#3D6EB7","#EBE9FB","#9197E4","#3063A2","#274579","#577CCB","#D2CEF6","#2A285A","#BAB3F1","#B2ADEF","#F2F0FC","#274E82","#2A2F62","#CCC7F4","#9E9EE9","#4875C1","#C0BAF2","#2B5D98","#3669AD","#2B2154","#E4E2FA","#8290DF","#D8D4F7","#6784D3","#283E71","#C9C4F4","#BDB7F1","#DBD8F8","#283A6D","#4F79C6","#A4A2EB","#EEEDFC","#CFCBF5","#E8E5FA","#5F80CF","#4272BC","#B6B0F0","#2B1D50","#AEA9EE","#275287","#2A2B5E","#989BE7","#293366","#27497D","#8A94E1","#295A92","#3266A7","#F5F4FD","#7B8DDC","#274174","#2D609C","#2B2558","#6F88D7","#E1DEF9","#3A6CB2","#D5D1F6","#C3BEF3","#2E629F","#3165A4","#8D95E3","#3468AA","#DAD6F7","#D1CDF5","#9B9CE8","#275084","#B8B2F0","#27477B","#6382D1","#4573BF","#A2A0EA","#F7F6FD","#C7C2F4","#F3F2FD","#274376","#8692E0","#2B1F52","#CAC6F4","#ACA7ED","#E3E0F9","#F0EEFC","#E6E4FA","#386AB0","#2C1C4E","#6B86D5","#28396B","#283C6F","#2A5C95","#2A2D60","#BEB9F2","#C2BCF2","#7E8FDD","#3F70B9"]},fes:{discrete:We,categorical:We},glasgow:{discrete:["#361338","#3B1434","#401530","#45172C","#491828","#4D1924","#511B21","#561C1D","#5B1E18","#602014","#662210","#6B260B","#6F2B07","#723203","#743802","#743E01","#754300","#744900","#744F01","#745402","#735905","#725F0B","#716413","#70691E","#6E6E27","#6C7231","#6B763A","#697B46","#677F4F","#658359","#648763","#628B6C","#618F78","#609381","#60978A","#619B94","#659F9D","#6CA5A8","#74A9B0","#7DADB8","#86B1BF","#8EB4C6","#99B9CE","#A1BCD5","#AABFDB","#B2C3E1","#BBC6E7","#C6CBF0","#D0CFF7","#DBD3FF"],categorical:["#361338","#DBD3FF","#6D702B","#69A3A5","#702D06","#A0BBD3","#638968","#521B20","#745101","#84B0BE","#754001","#5F9587","#BBC6E7","#612013","#45172C","#687D4A","#726210","#618F78","#4B1926","#3E1532","#629C96","#658359","#CACCF3","#76AAB2","#6B763A","#744900","#6A250C","#ADC1DD","#735905","#92B6C9","#591D1A","#743702","#70681C","#4F1A23","#754400","#6D2909","#60998E","#41162F","#744D00","#745503","#B4C3E2","#697A42","#7DADB8","#628C70","#8BB3C3","#561C1D","#D2D0F9","#99B9CE","#3A1435","#6F6C23","#743B01","#60927F","#662210","#648661","#659F9D","#678051","#725E0A","#481829","#6FA6AB","#6C7332","#5D1E17","#A6BED8","#C2C9ED","#723203","#716617","#68240E","#6F6A20","#C6CBF0","#79ABB5","#72600D","#754200","#43162D","#67A1A1","#6B7536","#5F1F15","#735B07","#571C1B","#72A8AF","#744F01","#BEC8EA","#381337","#8EB4C6","#628B6C","#677E4D","#60917B","#639E9A","#4A1827","#A3BDD6","#3C1433","#743901","#632112","#B7C5E5","#4D1924","#65845D","#618E74","#609483","#9CBAD1","#46172A","#87B1C1","#6D712F"]},grayc:{discrete:["#000000","#090909","#111111","#171717","#1C1C1C","#212121","#252525","#2A2A2A","#303030","#343434","#393939","#3D3D3D","#424242","#474747","#4B4B4B","#505050","#545454","#585858","#5D5D5D","#616161","#656565","#696969","#6D6D6D","#717171","#757575","#797979","#7D7D7D","#818181","#858585","#898989","#8E8E8E","#929292","#979797","#9C9C9C","#A1A1A1","#A6A6A6","#ABABAB","#B1B1B1","#B6B6B6","#BCBCBC","#C1C1C1","#C7C7C7","#CECECE","#D5D5D5","#DBDBDB","#E2E2E2","#E8E8E8","#F1F1F1","#F8F8F8","#FFFFFF"],categorical:["#070707","#F9F9F9","#777777","#454545","#AEAEAE","#909090","#292929","#5F5F5F","#D1D1D1","#9E9E9E","#525252","#E4E4E4","#6C6C6C","#BFBFBF","#1A1A1A","#373737","#848484","#595959","#222222","#B6B6B6","#A6A6A6","#3E3E3E","#7D7D7D","#666666","#969696","#8A8A8A","#4B4B4B","#DADADA","#C8C8C8","#313131","#717171","#131313","#EFEFEF","#C4C4C4","#A2A2A2","#424242","#878787","#252525","#2D2D2D","#4F4F4F","#3B3B3B","#808080","#1E1E1E","#BBBBBB","#AAAAAA","#EAEAEA","#696969","#7A7A7A","#DFDFDF","#636363","#565656","#B2B2B2","#0E0E0E","#9A9A9A","#5C5C5C","#747474","#F3F3F3","#333333","#6E6E6E","#D5D5D5","#8D8D8D","#939393","#494949","#CCCCCC","#171717","#BDBDBD","#575757","#C1C1C1","#404040","#828282","#E2E2E2","#151515","#1C1C1C","#0B0B0B","#9C9C9C","#858585","#2F2F2F","#B4B4B4","#888888","#242424","#272727","#3C3C3C","#B0B0B0","#353535","#545454","#5B5B5B","#393939","#D7D7D7","#A4A4A4","#A8A8A8","#959595","#767676","#646464","#989898","#444444","#474747","#111111","#F6F6F6","#ECECEC","#4D4D4D"]},hawaii:{discrete:["#8C0273","#8E0D6E","#8F1569","#901D63","#91235F","#91285A","#922D56","#933252","#94384D","#943D4A","#954246","#964742","#964C3F","#97523B","#985638","#985C34","#996131","#9A662E","#9B6C2A","#9B7226","#9C7823","#9C7E20","#9D841E","#9D8C1C","#9C921C","#9B991D","#9AA021","#97A828","#94AE30","#91B439","#8CB942","#88BE4C","#82C359","#7EC663","#79CA6E","#74CE79","#70D183","#6AD591","#66D89C","#62DCA7","#60DFB2","#5FE2BD","#61E6CA","#67E9D5","#6FEBDE","#7AEEE7","#87EFEE","#98F1F5","#A6F1F9","#B3F2FD"],categorical:["#8C0273","#B3F2FD","#9C951C","#6CD48C","#964D3E","#8ABC48","#9B6D29","#66E8D3","#922E55","#9C801F","#87EFEE","#995D34","#7BC969","#901D63","#60DEB0","#96AA2B","#943D4A","#975439","#82C359","#5FE4C2","#9AA021","#73CE7B","#65D99E","#954544","#9D8A1C","#8E126B","#91B439","#9DF1F7","#73ECE2","#91265C","#9C7724","#9A652E","#93364F","#922A59","#996131","#9D851D","#9D901C","#9A692C","#68D695","#902160","#9B9A1E","#985836","#9B7226","#933252","#77CC72","#9C7B21","#954147","#8D0A6F","#93AF32","#62DCA7","#92F0F3","#8F1867","#7DEEE8","#97513C","#6CEBDB","#61E6CA","#A8F2FA","#964941","#7FC661","#86BF50","#98A526","#70D183","#5FE1B9","#8DB840","#94394D","#9C7923","#8F1569","#985A35","#60E0B4","#9A6B2A","#91245E","#97A828","#9B7425","#6AD591","#95AD2E","#5FE2BD","#60E5C6","#953F48","#933054","#63E7CF","#84C154","#8D0671","#82EFEB","#9B9D1F","#99A323","#88BE4C","#6ED288","#6FEBDE","#9A672D","#91285A","#75CD76","#995F32","#68E9D7","#9B7028","#61DDAB","#943B4B","#933450","#8DF0F0","#8F1A65","#81C45D"]},imola:{discrete:["#1A33B3","#1C37B1","#1E3AAF","#203EAD","#2242AB","#2345AA","#2548A8","#274CA6","#2950A4","#2A53A3","#2C56A1","#2E599F","#2F5D9E","#32609B","#346499","#366797","#386A95","#3B6C92","#3E708F","#41738C","#44768A","#467987","#4A7C85","#4E8082","#518480","#56887E","#5A8C7D","#5F927B","#64967A","#689B79","#6DA078","#72A576","#78AB75","#7DB074","#82B572","#87BA71","#8CBF70","#93C66E","#98CB6D","#9ED06C","#A4D66A","#ACDB69","#B5E268","#BFE767","#C8EB67","#D3F066","#DDF466","#EAF866","#F5FB66","#FFFF66"],categorical:["#1A33B3","#FFFF66","#54867F","#305E9D","#91C36F","#3F718E","#2549A8","#BDE667","#70A377","#2B53A2","#376896","#80B373","#A3D56B","#DDF466","#203EAD","#487B86","#62947A","#2D59A0","#88BB71","#5B8D7D","#CDED66","#4E8082","#EEF966","#33639A","#284EA5","#44768A","#2344AA","#AFDE69","#3B6C92","#78AB75","#1D39B0","#99CC6D","#699C79","#3D6F90","#2C56A1","#2F5B9E","#5E917B","#4B7D84","#9ED06C","#1F3CAE","#C4EA67","#84B772","#274CA6","#D5F066","#2951A4","#74A776","#578A7E","#2446A9","#1C36B1","#A9D96A","#95C86E","#467888","#2141AC","#7CAF74","#356598","#B5E268","#66987A","#396A94","#F7FC66","#8CBF70","#E6F666","#32609B","#518380","#41738C","#6DA078","#6B9E78","#B9E468","#7AAD74","#528580","#32629B","#86B971","#3C6E91","#5C8F7C","#C8EB67","#ACDB69","#D1EF66","#E2F566","#97CA6D","#1B35B2","#1C37B0","#2345AA","#2F5D9E","#1F3DAE","#457789","#3A6B93","#598B7D","#D9F266","#346499","#386995","#A6D76A","#366797","#274DA6","#56887E","#A1D36B","#42748B","#7EB173","#72A576","#477987","#4C7F83","#F2FB66"]},lajolla:{discrete:["#191900","#1E1B02","#221C05","#271E08","#2C200B","#31220E","#362411","#3C2614","#442817","#4B2B1B","#532D1F","#5B3023","#633328","#6E362D","#783932","#813C37","#8B3F3B","#96423F","#A24543","#AD4746","#B74A48","#C04D49","#C9514B","#D1564C","#D75C4D","#DB634E","#DD694F","#E0714F","#E17750","#E37D50","#E48351","#E58951","#E79052","#E89652","#E99C52","#EAA253","#EBA853","#EDAF54","#EEB555","#F0BC57","#F1C25A","#F3CA5F","#F5D369","#F7DA74","#F9E282","#FBE890","#FCEF9F","#FDF5B0","#FEFABE","#FFFECB"],categorical:["#191900","#FFFECB","#D85F4D","#ECAC54","#653329","#F7D971","#A44544","#E58751","#362411","#E1744F","#C44E4A","#E99A52","#4B2B1B","#833D38","#F1C159","#FCEF9F","#271E08","#FEF7B6","#402716","#D0554C","#FAE587","#E79052","#EFB655","#B54947","#201C04","#E37D50","#743830","#DD694F","#EBA353","#94413E","#572F21","#F4CD61","#2E210C","#FDF3AB","#32220F","#241D06","#F5D369","#7B3B34","#1D1B02","#F0BC57","#5E3125","#F8DF7C","#512D1E","#CA514B","#E48251","#E68C51","#EA9E53","#E89552","#BC4C49","#6C362C","#EDB154","#9C4341","#E27950","#FBEA93","#3B2513","#FEFBC0","#452918","#EBA853","#F2C75C","#8B3F3B","#DB644E","#AD4746","#DF6E4F","#D55A4D","#2B200A","#783932","#E79352","#D75C4D","#FEF9BB","#EDAF54","#E0714F","#7F3C36","#613227","#F7DC77","#C7504B","#F1C45A","#30210D","#F4D065","#1E1B03","#FAE78D","#F9E282","#DA614E","#392412","#4E2C1D","#E99C52","#EFB956","#221C05","#EBA553","#FDF5B0","#984240","#E38050","#8F403D","#542E20","#ECAA54","#E68E51","#70372E","#DE6C4F","#B94A48","#291F09","#1B1A01"]},lapaz:{discrete:["#1A0C64","#1C1368","#1E196D","#202071","#212675","#222B79","#23317D","#253681","#263C85","#274189","#29478C","#2A4C8F","#2C5192","#2E5795","#305C98","#32609A","#35659C","#386A9E","#3C70A0","#3F74A1","#4379A2","#487DA3","#4D81A3","#5386A4","#588AA3","#5E8EA3","#6591A2","#6C95A1","#7398A0","#7A9A9E","#809D9D","#879F9B","#90A199","#97A397","#9EA596","#A5A795","#ADAA95","#B7AD96","#BFB199","#C8B69C","#D2BBA2","#DAC1A8","#E4C9B2","#EBCFBB","#F1D5C4","#F5DBCD","#F9E1D6","#FBE8E1","#FDEDEA","#FEF2F3"],categorical:["#1A0C64","#FEF2F3","#5B8BA3","#B3AC96","#2C5292","#3C70A0","#EACEB9","#859E9C","#24327E","#6F96A1","#33619A","#202071","#D0BAA0","#9BA496","#F9E1D6","#4A7FA3","#284289","#90A199","#FCEAE5","#1D176B","#37699D","#F3D8C8","#A7A895","#5285A4","#7A9A9E","#2F5A97","#4278A2","#263A84","#6591A2","#C1B299","#DEC3AB","#222978","#2A4B8E","#5688A4","#D7BEA6","#FDEEEC","#608EA3","#EFD3C0","#A1A696","#6A94A1","#FBE6DD","#ADAA95","#F6DDCF","#4E82A3","#2E5695","#3A6D9F","#C8B69C","#1C1268","#232D7B","#3F74A1","#467BA3","#1E1C6E","#7F9C9D","#BAAF97","#253681","#315E99","#29478C","#E4C9B2","#74989F","#273E87","#212575","#95A398","#8AA09A","#35659C","#2B4F91","#23307C","#E7CBB5","#F1D5C4","#2B4D90","#202373","#588AA3","#D3BCA3","#5487A4","#447AA2","#6792A2","#24347F","#253882","#ECD0BD","#879F9B","#305C98","#E1C6AF","#1E196D","#5D8DA3","#AAA995","#386B9E","#487DA3","#77999F","#F7DFD3","#BEB098","#1F1E70","#325F99","#4176A2","#F4DACB","#4C80A3","#2D5494","#8DA099","#6C95A1","#FAE3DA","#FDECE8","#B7AD96"]},lipari:{discrete:["#031326","#05192F","#062038","#092844","#0C2E4D","#103557","#163C5F","#1E4368","#294B70","#345075","#3E5578","#47587A","#4F5B7B","#575C7A","#5D5D79","#635E78","#695E76","#6E5F75","#765F73","#7C6071","#826070","#89606E","#90616C","#98616A","#A06268","#A86266","#B06364","#BA6462","#C36660","#CB685F","#D46B5E","#DB705F","#E27760","#E77E63","#E98567","#EA8D6B","#EA946F","#E89C75","#E7A279","#E6A87E","#E5AF84","#E5B58A","#E6BD92","#E7C49A","#EACCA3","#EDD3AD","#F0DBB7","#F5E5C4","#F9EDCF","#FDF5DA"],categorical:["#031326","#FDF5DA","#A56267","#525B7A","#E99B74","#785F72","#DA6F5E","#183E61","#E7C398","#8D616D","#365176","#092844","#655E77","#E98466","#BF6561","#F0DBB7","#E5AD82","#B26364","#EBCFA7","#5C5D79","#061D35","#25486D","#0E3353","#EA906D","#98616A","#E37861","#E5B88C","#826070","#CD685F","#6E5F75","#45587A","#F6E8C9","#E7A37A","#615E78","#E77E63","#D46B5E","#9F6268","#E99570","#93616B","#87606E","#7D6071","#F3E1C0","#575C7A","#0B2D4B","#2D4D72","#E6A87E","#E9C99F","#FAEED1","#1E4368","#EA8A69","#B86462","#6A5E76","#AB6365","#735F74","#DF735F","#E5B287","#13385A","#05182D","#E6BD92","#3E5578","#EDD5AF","#07223C","#C6665F","#4C5A7A","#E8A077","#B56363","#FBF1D6","#A26267","#E6C095","#0A2A48","#F8EBCD","#EACCA3","#AE6364","#7A5F72","#635E78","#E98768","#041629","#715F74","#ECD2AB","#A86266","#8A606E","#96616B","#545C7A","#EFD8B3","#F5E5C4","#9B6169","#F2DEBB","#765F73","#6C5F75","#294B70","#22466B","#E89D76","#E88165","#BC6461","#E6A67C","#85606F","#C36660","#1B4064","#D06A5E","#103557"]},lisbon:{discrete:Ie,categorical:Ie},managua:{discrete:Ve,categorical:Ve},navia:{discrete:["#031327","#041930","#051E3A","#052546","#062B50","#06315A","#073764","#083E6D","#0B4578","#0E4C80","#115286","#15588B","#195E8E","#1E6491","#216991","#246D91","#27718F","#2A748E","#2D788C","#307A8A","#337D89","#368087","#398385","#3C8683","#3F8981","#428C7F","#468F7D","#4A937A","#4E9678","#529A76","#579E73","#5BA271","#62A86E","#67AD6B","#6EB269","#76B768","#7FBD68","#8CC56A","#98CB6F","#A4D176","#B1D67F","#BCDB89","#C9E096","#D3E3A1","#DCE7AC","#E3EAB6","#EAEDBF","#F1F0CA","#F7F2D2","#FCF4D9"],categorical:["#031327","#FCF4D9","#408A80","#87C269","#1B608F","#59A072","#073966","#D1E39F","#2F798B","#EAEDBF","#052546","#266F90","#6BB06A","#0E4D81","#AED57D","#4C947A","#378186","#DFE8B0","#337D89","#2A748E","#14578A","#051C36","#9ACC70","#0A4374","#468F7D","#529A76","#F4F1CD","#062F56","#C1DC8D","#206891","#78B968","#62A86E","#3C8583","#569D74","#236C91","#F8F3D3","#D8E5A8","#0C487B","#04182E","#71B469","#B8D985","#07345E","#05213E","#4F9778","#5DA470","#3E8882","#062A4E","#7FBD68","#EFEFC6","#C9E096","#115286","#2C768D","#1E6491","#49917B","#66AC6C","#28718F","#A4D176","#90C76C","#438C7F","#175C8D","#083E6D","#E5EAB8","#317B8A","#357F87","#398385","#B3D781","#0D4A7E","#1C6290","#052342","#579F73","#9FCE73","#448D7E","#051A32","#FAF3D6","#428B7F","#29738F","#104F84","#5FA66F","#509877","#8CC56A","#094071","#2D788C","#083B6A","#D5E4A3","#2B758D","#226A91","#04162B","#BCDB89","#47907C","#4D9579","#E2E9B4","#7BBB68","#6EB269","#135488","#4A937A","#F1F0CA","#5BA271","#C5DE92","#F6F2D0","#CDE19B"]},naviaw:{discrete:["#041427","#051A31","#05203B","#062747","#072D52","#08345C","#0A3A66","#0C416F","#0F4979","#135080","#175686","#1B5D8A","#1F628D","#23698F","#276D8F","#2A728F","#2D758E","#30798D","#347D8B","#378089","#3A8388","#3D8686","#408984","#448C82","#489080","#4B937E","#50977C","#559C79","#5AA077","#5FA575","#65AA73","#6CAF71","#76B671","#7FBD71","#89C474","#95CB78","#A2D27F","#B1D98A","#BEDF95","#C9E5A1","#D3E9AD","#DBEDB9","#E4F1C6","#E9F4D0","#EEF6D9","#F2F8E1","#F6FAE9","#F9FCF1","#FCFDF7","#FEFEFD"],categorical:["#041427","#FBFDF6","#478F80","#9FD07D","#1F628D","#64A973","#E3F0C4","#0A3A66","#337C8B","#C7E49E","#7DBC71","#549B7A","#2A718F","#135080","#F2F8E1","#3C8586","#062747","#D7EBB2","#418A83","#B4DB8C","#2E778D","#6FB271","#EBF5D4","#0E4574","#051D37","#4D957D","#256B8F","#195A88","#388189","#F7FAEC","#5CA276","#8CC574","#073056","#31798C","#367E8A","#69AD72","#E7F3CC","#104A7A","#95CB78","#EFF6DB","#0B406D","#2C748E","#4A927F","#DDEEBB","#50987C","#165584","#589E78","#76B671","#3F8785","#05192F","#BEDF95","#448C82","#22678E","#06223F","#A9D684","#08355E","#CFE8A8","#F9FCF1","#286E8F","#85C172","#072C50","#F5F9E7","#1C5F8B","#3A8387","#60A675","#F3F9E4","#0C4271","#266D8F","#81BE72","#0A3D6A","#4B937E","#9ACD7B","#EDF5D7","#90C876","#A4D381","#378089","#1B5D8A","#489080","#145282","#DAECB6","#67AB73","#CBE6A3","#B9DD90","#3D8686","#23698F","#6CAF71","#FAFCF3","#79B971","#D3E9AD","#5AA077","#458E81","#72B471","#327B8C","#E5F1C8","#051B33","#F8FBEE","#062443","#398288","#2B728F","#06294C"]},nuuk:{discrete:["#05598C","#0E5B8B","#155C89","#1C5E87","#226085","#276184","#2C6383","#326682","#386982","#3E6C82","#446F82","#4A7283","#517584","#587A86","#5F7D88","#66818A","#6C858C","#73898E","#7B8E91","#819192","#879594","#8D9996","#939C97","#99A097","#9EA498","#A2A798","#A6AA97","#ABAD96","#AEAF95","#B1B194","#B3B492","#B6B690","#B8B88E","#BABA8C","#BDBC8A","#BFBE88","#C1C187","#C4C385","#C7C684","#CAC983","#CDCD83","#D2D184","#D7D787","#DDDD8B","#E3E290","#E8E895","#EEEE9C","#F4F4A4","#F9F9AB","#FEFEB2"],categorical:["#05598C","#FEFEB2","#A1A698","#537785","#C3C385","#B5B591","#7D8F91","#2D6483","#DDDD8B","#919B96","#BCBC8B","#3F6C82","#CDCD83","#1C5E87","#ADAE95","#68838B","#EEEE9C","#A7AA97","#879594","#C8C783","#F6F6A7","#135C89","#B9B98E","#497183","#73898E","#366882","#C0BF88","#D4D486","#99A097","#B1B293","#5E7D88","#256185","#E6E693","#829293","#788C90","#9DA398","#AAAC96","#E1E18F","#3B6A82","#638089","#B3B492","#A4A897","#446F82","#BABA8C","#D8D888","#185D88","#8C9895","#215F86","#BEBD89","#B7B78F","#CACA83","#4E7484","#C1C186","#959E97","#F2F2A1","#AFB094","#326682","#587A86","#296284","#FAFAAD","#6E868C","#C5C584","#D1D084","#0D5B8B","#E9E997","#DFDF8D","#66818A","#B0B194","#5B7B87","#2B6383","#859493","#CCCB83","#F8F8AA","#D2D285","#1F5F86","#70878D","#4B7383","#768B8F","#FCFCAF","#A9AB97","#BFBE88","#C9C983","#346782","#DBDA89","#236085","#BDBD8A","#BAB98D","#B8B88E","#2F6583","#939C97","#9FA498","#A2A798","#CFCF84","#B4B591","#C4C485","#979F97","#F0F09E","#155C89","#9BA298","#517584"]},oleron:{discrete:qe,categorical:qe},oslo:{discrete:["#010101","#04070B","#060C13","#0A121B","#0C1620","#0D1927","#0E1D2D","#0F2133","#10263C","#112A43","#122E4A","#133251","#153758","#173C61","#194169","#1B4670","#1E4A78","#214F80","#255589","#295A91","#2E5F99","#3364A1","#3A6AA9","#4371B2","#4B77B9","#537DBE","#5B83C3","#6489C6","#6B8EC8","#7292C9","#7896C9","#7E9ACA","#859ECA","#8BA2C9","#91A6C9","#97A9C9","#9DADC9","#A4B2CA","#AAB6CA","#B1BBCB","#B8BFCD","#BFC5CF","#C7CCD3","#CFD2D8","#D7D9DD","#DEE0E2","#E6E7E9","#EFF0F1","#F7F7F8","#FFFFFF"],categorical:["#030609","#F9F9F9","#507BBC","#163B5E","#A0AFC9","#7B98CA","#27588E","#0E2032","#CACED5","#122D48","#3767A6","#1D4875","#8DA3C9","#E2E3E5","#678BC7","#B4BDCC","#0C151F","#BFC5CF","#97A9C9","#4371B2","#10263D","#080E16","#7292C9","#215081","#2E5F99","#AAB6CA","#ECEDEE","#0D1A28","#143454","#D5D8DC","#5B83C3","#19426A","#859ECA","#13314E","#0E1D2D","#3D6CAC","#6C8FC8","#7795C9","#F3F3F4","#4976B8","#245488","#DBDDE0","#112A43","#92A6C9","#C5C9D2","#809BCA","#0F2337","#3263A0","#050A10","#B9C1CD","#1F4C7B","#183E64","#A5B3CA","#0A121B","#9CACC9","#6187C5","#0D1824","#8AA1CA","#2A5B93","#547EBF","#D1D3D9","#E6E7E9","#1B456F","#B0BACB","#153758","#7494C9","#D8DADE","#6A8DC8","#90A5C9","#99ABC9","#235285","#133251","#060C13","#406EAF","#7E9ACA","#173C61","#4C78BA","#122F4B","#1C4772","#87A0CA","#CED1D7","#C2C7D1","#0F253A","#2C5D96","#C7CCD3","#112B45","#EFF0F1","#6F90C9","#0E1E2F","#ADB8CB","#7997CA","#4673B5","#15395B","#091018","#194067","#30619C","#94A8C9","#F6F6F6","#0F2135","#A3B1CA"]},roma:{discrete:Ge,categorical:Ge},romao:{discrete:Xe,categorical:Xe},tofino:{discrete:Ke,categorical:Ke},tokyo:{discrete:["#1C0E34","#241036","#2D1339","#37163D","#3F1A40","#481E43","#4F2345","#562948","#5D304A","#62354C","#663B4D","#69404E","#6B454F","#6D4B50","#6E4F50","#6F5251","#6F5651","#705951","#715C52","#715F52","#716252","#726452","#726753","#736B53","#736E53","#747153","#757554","#757A54","#767E55","#778355","#788856","#798E57","#7B9558","#7C9B5A","#7EA25C","#81A95E","#84B062","#88B968","#8DC16E","#93CA76","#9BD27F","#A4DA8A","#AFE398","#BAEAA4","#C5EFB0","#CFF4BB","#D8F7C5","#E2F9CF","#E9FBD7","#EFFCDD"],categorical:["#1C0E34","#EFFCDD","#747053","#6C4750","#87B666","#B8E8A1","#512446","#715D52","#798B56","#7D9F5B","#37163D","#726653","#99D07D","#63374C","#6F5451","#D8F7C5","#767C54","#705951","#5B2D49","#7B9558","#441D41","#291238","#E5FAD2","#C9F1B4","#716252","#81AA5F","#683F4E","#736B53","#6E4E50","#757654","#8EC370","#A7DD8E","#778455","#747354","#84B062","#231036","#93CA76","#DFF9CC","#30143A","#A0D785","#7FA45D","#EAFBD8","#6A434F","#C1EDAB","#736D53","#562948","#6D4B50","#7A9057","#7C9A59","#4B2044","#715F52","#663B4D","#D1F4BD","#705651","#8ABD6A","#6E5151","#AFE398","#5F324B","#757954","#3E193F","#726853","#726452","#778055","#705B52","#788756","#61344C","#746E53","#ABE093","#532747","#85B364","#7EA25C","#261137","#736C53","#E8FBD5","#4E2245","#88B968","#798E57","#767E55","#726753","#757754","#715E52","#3A183E","#6E4F51","#778255","#7B9759","#DCF8C9","#EDFCDA","#411B40","#7D9C5A","#767B54","#726352","#6F5551","#726552","#82AD60","#D5F6C1","#34153C","#9CD481","#747454","#C5EFB0","#481E43"]},turku:{discrete:["#000000","#090908","#111110","#181816","#1D1D1A","#22221F","#272723","#2C2C27","#33322B","#38382F","#3D3D32","#424235","#474738","#4E4D3C","#53523E","#585841","#5D5D43","#626246","#686848","#6E6D4B","#73724D","#797750","#7F7D52","#878356","#8E8859","#968E5C","#9D9360","#A79864","#AF9C68","#B69F6C","#BEA270","#C4A474","#CCA579","#D1A67D","#D7A781","#DBA886","#E0A98B","#E6AB92","#EAAD98","#EFB09F","#F2B4A7","#F6B9AE","#F9BFB7","#FBC4BF","#FDC9C6","#FECFCC","#FED4D3","#FFDBDA","#FFE0E0","#FFE6E6"],categorical:["#070707","#FFE6E6","#948D5B","#E5AA90","#4D4C3B","#2C2C27","#C3A374","#6D6C4A","#FBC4BF","#D6A780","#F2B4A7","#1C1C19","#3D3D32","#AC9A67","#7E7C52","#FED6D4","#5D5D43","#35342D","#DDA888","#141312","#55543F","#242420","#FDCDCA","#F7BCB3","#898456","#B8A06D","#ECAE9B","#CDA57A","#FFDEDD","#646447","#454537","#9F9461","#76744E","#71704C","#30302A","#414135","#181816","#FCC8C4","#EFB1A1","#838054","#F5B8AD","#E1A98C","#C8A477","#686848","#595941","#20201D","#8E8859","#D1A67D","#B29D6A","#E9AC95","#BEA270","#FED1CF","#0E0E0D","#A59764","#DAA784","#282823","#F9C0B9","#51503D","#393930","#FFDAD9","#49493A","#606045","#FFE2E1","#9A915E","#797750","#F4B6AA","#F6BAB0","#CBA578","#FFD8D6","#FECFCC","#262622","#C0A272","#868255","#1A1A18","#FAC2BC","#8B8658","#E3AA8E","#161614","#4F4E3C","#C6A475","#2E2E28","#BBA16F","#6B6A49","#E7AB93","#CFA67C","#626246","#53523E","#5B5B42","#FED3D1","#7C7A51","#817E53","#73724D","#FFDCDB","#37372E","#F8BEB6","#0B0B0A","#575740","#DFA98A","#474738","#B59F6C"]},vanimo:{discrete:Ye,categorical:Ye},vik:{discrete:Qe,categorical:Qe},viko:{discrete:Ue,categorical:Ue}};function Ze(e){const t=e.replace("#","");return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16)}}const et={waves:"batlow",blksand:"tokyo",breeze:"imola",magma:"batlow",ribbon:"hawaii",stars:"batlow",folds:"imola"},tt={[H.ADVERT]:1,[H.TXT_MSG]:4,[H.GRP_TXT]:2,[H.RESPONSE]:8,[H.REQ]:13,[H.ANON_REQ]:7,[H.ACK]:11,[H.PATH]:24,[H.TRACE]:16,[H.GRP_DATA]:34,[H.MULTIPART]:52,[H.RAW_CUSTOM]:14};function st(){let e="waves",t=!0;if("undefined"!=typeof window){e=localStorage.getItem("pymc-color-scheme")||"waves";const s=z(e);t=(null==s?void 0:s.meta.isDark)??!0}const s=et[e]??"batlow",a=Je[s],n=a.discrete.length,r=Math.floor(n/2);return{colormap:a,colormapName:s,isDark:t,baseIndex:t?r:0,halfSize:r}}let at=null;function nt(e){const{colormap:t,isDark:s}=st();if("number"!=typeof e)return s?"#A5A5A5":"#666666";const a=tt[e];if(void 0===a)return s?"#A5A5A5":"#666666";const n=t.categorical;return n[Math.min(a,n.length-1)]}function rt(e){return Ze(nt(e))}const it="undefined"!=typeof window&&(null==(t=null==(e=window.matchMedia)?void 0:e.call(window,"(color-gamut: p3)"))?void 0:t.matches);function lt(){const e=getComputedStyle(document.documentElement);return{fontFamily:e.getPropertyValue("--font-data").trim()||'"JetBrains Mono", ui-monospace, monospace',axisColor:e.getPropertyValue("--chart-axis-tick").trim()||"rgba(255, 255, 255, 0.4)",gridColor:e.getPropertyValue("--chart-grid").trim()||"rgba(255, 255, 255, 0.06)",textMuted:e.getPropertyValue("--text-muted").trim()||"#727272",textPrimary:e.getPropertyValue("--text-primary").trim()||"#FFFFFF"}}const ot=["min","max","p75","p95","p99","mean","median","average","midpoint"];function ct(e){const t=Ze(function(e){const{colormap:t,baseIndex:s,halfSize:a}=st(),n=Math.max(0,Math.min(1,e)),r=Math.min(s+Math.floor(n*(a-1)),t.discrete.length-1);return t.discrete[r]}(e)),s=`color(display-p3 ${(t.r/255).toFixed(3)} ${(t.g/255).toFixed(3)} ${(t.b/255).toFixed(3)})`;return{...t,p3:s}}function Ct(e,t,s,a,n,r,i,l,o,c=null,C=null,d=1,A=null,m="airtime",u=.5){if(0===t.length)return;const D=e.ctx,{left:F,top:B,width:E,height:h}=e.bbox,x=window.devicePixelRatio||1;if(E<=0||h<=0)return;const p=e.data[0],g=p.length;if(0===g)return;const f=p[0],b=p[g-1],y=s,v="share"===m,j=v?function(e){const t=[10,20,25,50,100,200,250,500,1e3],s=e/4.5;for(const a of t)if(a>=s)return a;return e>5e3?1e3*Math.ceil(s/1e3):100*Math.ceil(s/100)}(y):5,N=getComputedStyle(document.documentElement),w=N.getPropertyValue("--signal-critical").trim()||"#EF4444",k=N.getPropertyValue("--bg-body").trim()||"#171717";D.save(),D.fillStyle="#000000";const M=8*x;D.beginPath(),D.roundRect(F,B,E,h,M),D.fill(),D.restore();const S=parseInt(k.slice(1,3),16)||23,T=parseInt(k.slice(3,5),16)||23,$=parseInt(k.slice(5,7),16)||23;if(!v&&y>=20){D.save();const e=B+h*(1-20/y);D.fillStyle=`rgba(${S}, ${T}, ${$}, 0.5)`,D.fillRect(F,B,E,e-B),D.restore()}D.save(),D.lineWidth=1*x,D.setLineDash([4*x,4*x]);for(let R=j;R<y;R+=j){const e=R/y,t=Math.round(B+h*(1-e))+.5;v||20!==R?(D.strokeStyle=r.textPrimary,D.globalAlpha=.25):(D.strokeStyle=w,D.globalAlpha=1),D.beginPath(),D.moveTo(Math.round(F),t),D.lineTo(Math.round(F+E),t),D.stroke()}D.restore(),D.save(),D.font=`bold ${10*x}px ${r.fontFamily}`,D.fillStyle=r.textPrimary,D.textBaseline="middle",D.textAlign="left";const P=8*x;for(let R=0;R<=y;R+=j){const e=B+h*(1-R/y),t=Math.max(B+P,Math.min(B+h-P,e)),s=v?`${R}B`:`${R}%`;D.fillText(s,0,t)}if(D.restore(),function(e,t,s,a,n,r,i){if(null===t)return;if(t<s||t>s+n)return;const l=getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim()||"#FFFFFF";e.save(),e.strokeStyle=l,e.globalAlpha=.5,e.lineWidth=1*i,e.setLineDash([4*i,4*i]),e.beginPath(),e.moveTo(Math.round(t)+.5,a),e.lineTo(Math.round(t)+.5,a+r),e.stroke(),e.restore()}(D,A,F,B,E,h,x),i){!function(e,t,s,a,n,r,i=null,l=null,o=1,c=25){const{points:C,rawValues:d,count:A,packetTypes:m,timestamps:u}=t,D=1*o*(window.devicePixelRatio||1);e.globalCompositeOperation="source-over";const F=i?parseInt(i.replace("TYPE_",""),10):null;for(let B=0;B<A;B++){const t=C[2*B],i=d[B],o=s+t*n,A=a+(1-Math.min(1,Math.max(0,i/c)))*r,E=m[B],h=rt(E);let x=!0;if(l&&u){const e=u[B];x=e>=l.start&&e<l.end}const p=!x||null!==F&&E!==F?.03:.5;e.fillStyle=`rgba(${h.r}, ${h.g}, ${h.b}, ${p})`,e.beginPath(),e.arc(o,A,D,0,2*Math.PI),e.fill()}e.globalCompositeOperation="source-over"}(D,i,F,B,E,h,c,C,d,y),D.save(),D.font=`bold ${9*x}px ${r.fontFamily}`,D.textBaseline="middle",D.textAlign="left";const e=i.maxValue,t=[{pct:0,label:`${e.toFixed(0)}%`},{pct:.25,label:`${(.75*e).toFixed(0)}%`},{pct:.5,label:`${(.5*e).toFixed(0)}%`},{pct:.75,label:`${(.25*e).toFixed(0)}%`},{pct:1,label:"0%"}];for(const{pct:s,label:a}of t){const e=B+h*s,t=ct(1-s);D.fillStyle=`rgb(${t.r}, ${t.g}, ${t.b})`,D.fillText(a,F+E+8*x,e)}D.restore()}o&&l&&l.length>0&&function(e,t,s,a,n,r,i,l,o,c,C=.5){if(0===t.length)return;const d=o-l||1,A=function(e,t=1.3,s=.15){const a=function(e){const t=e.match(/color\(display-p3\s+([\d.]+)\s+([\d.]+)\s+([\d.]+)/);if(t){const e=parseFloat(t[1]),s=parseFloat(t[2]),a=parseFloat(t[3]);return{r:Math.round(255*e),g:Math.round(255*s),b:Math.round(255*a),p3r:e,p3g:s,p3b:a}}if(e.startsWith("#")){const t=e.replace("#",""),s=parseInt(t.slice(0,2),16),a=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16);return{r:s,g:a,b:n,p3r:s/255,p3g:a/255,p3b:n/255}}const s=e.match(/rgba?\(([\d.]+),?\s*([\d.]+),?\s*([\d.]+)/);if(s){const e=Math.round(parseFloat(s[1])),t=Math.round(parseFloat(s[2])),a=Math.round(parseFloat(s[3]));return{r:e,g:t,b:a,p3r:e/255,p3g:t/255,p3b:a/255}}return{r:255,g:255,b:255,p3r:1,p3g:1,p3b:1}}(e),n=function(e,t,s,a=1.25,n=.15){const r=(Math.max(e,t,s)+Math.min(e,t,s))/2;return{p3r:Math.min(1,r+(e-r)*a+n),p3g:Math.min(1,r+(t-r)*a+n),p3b:Math.min(1,r+(s-r)*a+n)}}(a.p3r,a.p3g,a.p3b,t,s);return{r:Math.round(255*Math.min(1,n.p3r)),g:Math.round(255*Math.min(1,n.p3g)),b:Math.round(255*Math.min(1,n.p3b)),p3r:Math.min(1,n.p3r),p3g:Math.min(1,n.p3g),p3b:Math.min(1,n.p3b)}}(getComputedStyle(document.documentElement).getPropertyValue("--signal-critical").trim()||"#EF4444");e.save(),e.globalAlpha=C,e.fillStyle=it?`color(display-p3 ${A.p3r} ${A.p3g} ${A.p3b})`:`rgb(${A.r}, ${A.g}, ${A.b})`;for(const m of t){if(m.endTs<l||m.startTs>o)continue;const t=a+(Math.max(m.startTs,l)-l)/d*r,s=a+(Math.min(m.endTs,o)-l)/d*r,C=Math.max(s-t,2*c);e.fillRect(t,n,C,i)}e.restore()}(D,l,0,F,B,E,h,f,b,x,C?Math.max(.03,.03*u):u)}const dt=r.memo(function({data:e,maxValue:t,visibleLines:s=ot,highlightedLine:a=null,onHover:i,scatterData:l=null,noiseFloorAnomalies:o=null,showNoiseFloorOverlay:c=!1,overlayOpacity:C=.5,highlightedType:d=null,hoveredTimeRange:A=null,timeRangeHours:m=24,yAxisMode:u="airtime"}){const D=r.useRef(null),F=r.useRef(null),B=r.useRef(e),E=r.useRef(t),h=r.useRef(s),x=r.useRef(a),p=r.useRef(i),g=r.useRef(l),f=r.useRef(o),b=r.useRef(c),y=r.useRef(d),v=r.useRef(A),j=r.useRef(null),N=r.useRef(null),w=r.useRef(u),k=r.useRef(C),M=m<=12?1.2:1,S=r.useRef(M),T=r.useRef(e.length);r.useLayoutEffect(()=>{B.current=e,E.current=t,h.current=s,x.current=a,p.current=i,g.current=l,f.current=o,b.current=c,y.current=d,v.current=A,S.current=M,w.current=u,k.current=C}),r.useEffect(()=>{j.current=lt()},[]);const $=r.useMemo(()=>[e.map(e=>e.timestamp),new Array(e.length).fill(1)],[e]),P=r.useMemo(()=>({hooks:{draw:e=>{const t=j.current||lt();Ct(e,B.current,E.current,h.current,x.current,t,g.current,f.current,b.current,y.current,v.current,S.current,N.current,w.current,k.current)}}}),[]),L=r.useMemo(()=>({width:400,height:200,padding:[8,0,8,28],cursor:{show:!1,x:!1,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!0},y:{range:[0,1]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1}],plugins:[P]}),[P]);r.useEffect(()=>{const t=D.current;if(!t||0===e.length)return;const s=T.current,a=e.length,n=Math.abs(a-s);if(!(!F.current||n>100||s>0&&n/s>.1)&&F.current)return F.current.setData($),void(T.current=a);F.current&&F.current.destroy();const r=t.getBoundingClientRect(),i=Math.floor(r.width)||400,l=Math.floor(r.height)||200,o=new R({...L,width:i,height:l},$,t);return F.current=o,T.current=a,()=>{o.destroy(),F.current=null}},[L,$,e.length]),r.useEffect(()=>{const e=D.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!F.current)return;const{width:s,height:a}=t.contentRect;s>0&&a>0&&F.current.setSize({width:Math.floor(s),height:Math.floor(a)})});return t.observe(e),()=>{t.disconnect()}},[]),r.useEffect(()=>{F.current&&F.current.redraw()},[a,s,e,l,o,c,C,d,A,M]);const _=r.useCallback(t=>{var s,a;const n=D.current,r=F.current;if(!n||!r||0===e.length)return;const i=n.getBoundingClientRect(),l=t.clientX-i.left,o=window.devicePixelRatio||1,c=r.bbox,C=c.left/o,d=c.width/o;if(l<C||l>C+d)return N.current=null,r.redraw(),void(null==(s=p.current)||s.call(p,null));N.current=l*o;const A=(l-C)/d,m=e.length,u=Math.floor(A*m),B=Math.max(0,Math.min(m-1,u));r.redraw(),null==(a=p.current)||a.call(p,B)},[e.length]),z=r.useCallback(()=>{var e;N.current=null,F.current&&F.current.redraw(),null==(e=p.current)||e.call(p,null)},[]);return 0===e.length?n.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No data available"}):n.jsx("div",{ref:D,className:"w-full h-full rounded-lg overflow-hidden",onMouseMove:_,onMouseLeave:z})}),At=function(e){const t=nt(e);return null===at&&(at=_()),at?L(t):t},mt=new class{constructor(){a(this,"buckets",new Map),a(this,"lastProcessedTimestamp",0),a(this,"processedPacketCount",0),a(this,"cacheKey",null),a(this,"bucketDuration",60),a(this,"bucketDurationMs",6e4)}getBuckets(e,t,s,a){const n={startTs:t,endTs:s,radioConfigHash:this.hashRadioConfig(a)};return this.isCacheValid(n)?this.processPackets(e,t,s,a,!1):(this.invalidate(n),this.processPackets(e,t,s,a,!0)),this.toBucketDataArray(t,s)}processPackets(e,t,s,a,n){const r=Math.ceil((s-t)/this.bucketDuration);let i=0;for(const l of e){const e=l.timestamp;if(e<t||e>=s)continue;if(!n&&e<=this.lastProcessedTimestamp)continue;const o=Math.min(Math.floor((e-t)/this.bucketDuration),r-1),c=this.buckets.get(o)??{total:0,totalAirtime:0};c.total+=1;const C=$(l);c.totalAirtime+=P(C,{spreadingFactor:a.sf,bandwidthHz:a.bw,codingRate:a.cr,preambleLength:a.preamble}),this.buckets.set(o,c),e>this.lastProcessedTimestamp&&(this.lastProcessedTimestamp=e),i++}this.processedPacketCount+=i}toBucketDataArray(e,t){const s=t-e,a=Math.ceil(s/this.bucketDuration),n=s/3600,r=[];for(let i=0;i<a;i++){const t=e+i*this.bucketDuration,s=new Date(1e3*t),a=n>24?s.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit",hour12:!1}):s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),l=this.buckets.get(i)??{total:0,totalAirtime:0};r.push({timestamp:t,time:a,total:l.total,totalAirtime:l.totalAirtime,bucketDurationMs:this.bucketDurationMs})}return r}isCacheValid(e){return!!this.cacheKey&&this.cacheKey.startTs===e.startTs&&this.cacheKey.endTs===e.endTs&&this.cacheKey.radioConfigHash===e.radioConfigHash}invalidate(e){this.buckets.clear(),this.lastProcessedTimestamp=0,this.processedPacketCount=0,this.cacheKey=e}hashRadioConfig(e){return`${e.sf}-${e.bw}-${e.cr}-${e.preamble}`}clear(){this.buckets.clear(),this.lastProcessedTimestamp=0,this.processedPacketCount=0,this.cacheKey=null}getStats(){return{bucketCount:this.buckets.size,processedPackets:this.processedPacketCount,lastTimestamp:this.lastProcessedTimestamp,cacheKey:this.cacheKey}}};function ut(e){return W[e]??`TYPE_${e.toString(16).toUpperCase()}`}const Dt={sf:10,bw:25e4,cr:5,preamble:8};function Ft(e,t){if(0===e.length)return[];const s=Math.floor((t-1)/2),a=[];for(let n=0;n<e.length;n++){const t=n>=s?e[n-s]:e[0];a.push(e[n]+(e[n]-t))}return function(e,t){if(0===e.length)return[];const s=2/(t+1),a=[e[0]];for(let n=1;n<e.length;n++)a.push(s*e[n]+(1-s)*a[n-1]);return a}(a,t)}function Bt({sortedTypes:e,highlightedType:t,onTypeHover:s,aggregateShares:a,hoverData:i}){const l=r.useMemo(()=>{if(!i)return null;const e=new Map;for(const t of i.items)e.set(t.key,t.value);return e},[i]),o=null!==l;return n.jsx("div",{className:"flex-shrink-0 pt-3 mt-2",children:n.jsx("div",{className:"grid ml-9 gap-y-0.5",style:{gridTemplateColumns:"repeat(auto-fill, minmax(105px, 1fr))"},onMouseLeave:()=>s(null),children:e.map(e=>{const r=At(e.typeNum),i=(null==l?void 0:l.get(e.key))??0,c=a.get(e.key)??0,C=o?i:c,d=C>1e-4,A=t===e.key,m=t&&t!==e.key;let u="legend-item";return A?u+=" legend-item-active":m?u+=" legend-item-dimmed":o&&i>1e-4?u+=" legend-item-chart-active":o&&i<=1e-4&&(u+=" legend-item-dimmed"),n.jsxs("div",{className:u,onMouseEnter:()=>s(e.key),children:[n.jsx("div",{className:"flex-shrink-0",style:{backgroundColor:r,width:9,height:16,borderRadius:1}}),n.jsx("span",{className:"legend-label",children:e.label}),d&&n.jsxs("span",{className:"legend-value "+(o?"legend-value-live":""),children:[(100*C).toFixed(1),"%"]})]},e.key)})})})}function Et({x:e,y:t,width:s,height:a,name:r,size:i,index:l,depth:o,hoveredIndex:c,onHover:C,total:d,typeNum:A}){if(1!==o)return null;const m=null!==c&&!(c===l),u=At(A),D=d>0?i/d*100:0,F=s>36&&a>20,B=s>36&&a>32;return n.jsxs("g",{onMouseEnter:e=>C(l,e),onMouseLeave:()=>C(null),style:{cursor:"default"},children:[n.jsx("rect",{x:e,y:t,width:s,height:a,fill:u,opacity:m?.4:1,stroke:"rgba(0,0,0,0.2)",strokeWidth:1,rx:3,style:{transition:"opacity 150ms ease"}}),F&&n.jsxs(n.Fragment,{children:[B&&n.jsxs("text",{x:e+4,y:t+a-4-11,textAnchor:"start",dominantBaseline:"auto",fill:"rgba(0,0,0,0.6)",fontSize:8,fontFamily:"'JetBrains Mono', monospace",fontWeight:500,style:{pointerEvents:"none"},children:[D.toFixed(1),"%"]}),n.jsx("text",{x:e+4,y:t+a-4,textAnchor:"start",dominantBaseline:"auto",fill:"rgba(0,0,0,0.85)",fontSize:9,fontFamily:"'JetBrains Mono', monospace",fontWeight:600,style:{pointerEvents:"none"},children:r})]})]})}function ht({data:e,total:t,color:s,position:a,containerWidth:r}){if(!e||!a)return null;const i=(e.value/t*100).toFixed(1),l=r-a.x<184?Math.max(8,a.x-160-8):a.x+16;return n.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:l,top:Math.max(8,a.y-60)},children:n.jsxs("div",{className:"bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 shadow-xl min-w-[140px]",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"w-2.5 h-2.5 rounded-sm flex-shrink-0",style:{backgroundColor:s}}),n.jsx("span",{className:"type-data-sm font-semibold text-text-primary",children:e.name})]}),n.jsxs("div",{className:"space-y-0.5 type-data-xs text-text-muted",children:[n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{children:"Count"}),n.jsx("span",{className:"text-text-primary tabular-nums font-medium",children:e.value.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{children:"Share"}),n.jsxs("span",{className:"text-text-primary tabular-nums font-medium",children:[i,"%"]})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{children:"Total"}),n.jsx("span",{className:"text-text-primary tabular-nums font-medium",children:t.toLocaleString()})]})]})]})})}function xt({sortedTypes:e,aggregateShares:t}){var s,a,i;const[l,o]=r.useState(null),[c,C]=r.useState(null),[d,A]=r.useState(0),[m,u]=r.useState(null),D=r.useRef(null),B=r.useMemo(()=>e.reduce((e,t)=>e+t.totalCount,0),[e]),E=r.useMemo(()=>e.map((e,t)=>({name:e.label,size:e.totalCount,index:t,typeNum:e.typeNum,key:e.key})),[e]),h=r.useCallback((e,t)=>{if(o(e),t&&null!==e){const e=D.current;if(e){const s=e.getBoundingClientRect();A(s.width),C({x:t.clientX-s.left,y:t.clientY-s.top})}}else C(null)},[]),x=r.useCallback(e=>{if(u(e),e){const t=E.findIndex(t=>t.key===e);o(t>=0?t:null)}else o(null)},[E]),p=null!==l?{name:(null==(s=E[l])?void 0:s.name)??"",value:(null==(a=E[l])?void 0:a.size)??0}:null,g=null!==l?At(null==(i=E[l])?void 0:i.typeNum):"";return 0===e.length||0===B?n.jsxs("div",{className:"h-full flex items-center justify-center text-text-muted",children:[n.jsx(F,{className:"w-6 h-6 mr-2 opacity-50"}),n.jsx("span",{children:"No packet type data available"})]}):n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"analyzer-chart-height relative flex-shrink-0",ref:D,children:[n.jsx(Ce,{width:"100%",height:"100%",children:n.jsx(de,{data:E,dataKey:"size",aspectRatio:4/3,stroke:"none",isAnimationActive:!1,content:n.jsx(Et,{x:0,y:0,width:0,height:0,name:"",size:0,index:0,depth:0,hoveredIndex:l,onHover:h,total:B,typeNum:0})})}),n.jsx(ht,{data:p,total:B,color:g,position:c,containerWidth:d})]}),n.jsx(Bt,{sortedTypes:e,highlightedType:m,onTypeHover:x,aggregateShares:t})]})}function pt(e){const{values:t,sum:s}=e;if(0===t.length)return{min:0,mean:0,median:0,p75:0,p95:0,p99:0,max:0};const a=[...t].sort((e,t)=>e-t),n=a.length,r=s/n,i=a[0],l=a[n-1],o=e=>{const t=Math.min(Math.ceil(e*n)-1,n-1);return a[Math.max(0,t)]};return{min:i,mean:r,median:n%2==0?(a[n/2-1]+a[n/2])/2:a[Math.floor(n/2)],p75:o(.75),p95:o(.95),p99:o(.99),max:l}}function gt({statsBuckets:e,mode:t,packets:s,startTs:a,endTs:i,radioConfig:l,sortedTypes:o,aggregateShares:c,noiseFloorAnomalies:C,showNoiseFloorOverlay:d,overlayOpacity:A=.5}){const[m,u]=r.useState(null),[D,B]=r.useState(null),E=r.useMemo(()=>(i-a)/3600,[a,i]),h=r.useCallback(e=>{B(e)},[]),x=function(e,t,s,a,n){return r.useMemo(()=>{if(0===e.length||!n)return null;const r=e.filter(e=>e.timestamp>=t&&e.timestamp<=s);if(0===r.length)return null;const i=[],l=new Map;for(const e of r){const s=e.type??e.payload_type??-1,r=$(e);let o;if(o="airtime"===a?P(r,{spreadingFactor:n.sf,bandwidthHz:n.bw,codingRate:n.cr,preambleLength:n.preamble}):1,r<=0)continue;const c=Math.floor((e.timestamp-t)/300),C={timestamp:e.timestamp,airtimeMs:o,byteSize:r,packetType:s,bucketIndex:c};i.push(C),l.has(c)||l.set(c,[]),l.get(c).push(C)}if(0===i.length)return null;const o=[],c=[],C=[],d=new Map;if("share"===a)for(const[,e]of l)for(const t of e)d.set(t,t.byteSize);else for(const[,e]of l){const t=e.reduce((e,t)=>e+t.airtimeMs,0)/3e5*100,s=Math.max(...e.map(e=>e.airtimeMs));for(const a of e){const e=a.airtimeMs/s*t;d.set(a,e)}}for(const e of i){const t=d.get(e);void 0!==t&&(o.push(t),c.push(e.timestamp),C.push(e.packetType))}const A=Math.min(...c),m=Math.max(...c),u=m-A||1,D=[...o].sort((e,t)=>e-t),F=D[0],B=D[D.length-1],E=Math.floor(.05*D.length),h=Math.floor(.5*D.length),x=Math.min(Math.ceil(.95*D.length),D.length-1),p=D[E],g=D[h],f=D[x],b=new Map;for(const e of o){const t=Math.round(100*e)/100;b.set(t,(b.get(t)??0)+1)}const y=b.size,v=[...b.entries()].sort((e,t)=>t[1]-e[1]).slice(0,5).map(([e,t])=>({value:e,count:t,percent:t/o.length*100}));let j;if("share"===a)j=200;else{const e=5,t=Math.ceil(B/e)*e;j=t<=10?10:t+e}const N=new Float32Array(2*o.length),w=new Float32Array(o.length),k=new Uint8Array(o.length),M=new Float32Array(o.length);for(let e=0;e<o.length;e++){const t=(c[e]-A)/u,s=1-Math.max(0,Math.min(j,o[e]))/j;N[2*e]=t,N[2*e+1]=s,w[e]=o[e],k[e]=C[e]>=0?C[e]:255,M[e]=c[e]}return{points:N,rawValues:w,packetTypes:k,timestamps:M,count:o.length,minTime:A,maxTime:m,minValue:0,maxValue:j,rawMinValue:F,rawMaxValue:B,unit:"%",stats:{p5:p,p50:g,p95:f,uniqueValues:y,topValues:v}}},[e,t,s,a,n])}(s,a,i,"share"===t?"share":"airtime",l),{data:p}=r.useMemo(()=>function(e,t){var s;const a=e.length;if(0===a)return{data:[],windowSize:0,windowDurationMs:0};const n=(null==(s=e[0])?void 0:s.bucketDurationMs)??1e3,r=Math.min(Math.max(5,Math.round(3e5/n)),a),i=Math.floor(r/2),l=[];let o=0,c=0;for(let C=0;C<a;C++){const s=e[C],n=Math.max(0,C-i),r=Math.min(a,C+i+1),d=[];let A,m=0;for(let a=n;a<r;a++){const s=e[a];let n;n="share"===t?s.total/Math.max(1,s.bucketDurationMs/1e3):s.totalAirtime/s.bucketDurationMs*100,d.push(n),m+=n}A="share"===t?s.total/Math.max(1,s.bucketDurationMs/1e3):s.totalAirtime/s.bucketDurationMs*100,o+=A,c++;const u=pt({values:d,sum:m}),D=(u.min+u.max)/2;l.push({timestamp:s.timestamp,time:s.time,min:u.min,max:u.max,p75:u.p75,p95:u.p95,p99:u.p99,mean:u.mean,median:u.median,average:o/c,midpoint:D})}return{data:l,windowSize:r,windowDurationMs:r*n}}(e,t),[e,t]),g=r.useMemo(()=>p.map(e=>({timestamp:e.timestamp,min:e.min,max:e.max,p75:e.p75,p95:e.p95,p99:e.p99,mean:e.mean,median:e.median,average:e.average,midpoint:e.midpoint})),[p]),f=r.useMemo(()=>(null==x?void 0:x.maxValue)?x.maxValue:"share"===t?200:10,[x,t]),b=r.useCallback(e=>{u(e)},[]),y=r.useMemo(()=>{if(null===m||!p[m])return null;const e=p[m];let t;t=E>=168?75:E>=72?35:E>=24?15:E>=3?10:5;const s=60*t/2,a=e.timestamp;return{start:a-s,end:a+s}},[m,p,E]),v=r.useMemo(()=>{if(null===m||!p[m]||!y)return null;const e=p[m].time,{start:a,end:n}=y,r=s.filter(e=>e.timestamp>=a&&e.timestamp<n);if(0===r.length)return{timestamp:p[m].timestamp,timeLabel:e,items:o.map(e=>({key:e.key,label:e.label,value:0,color:At(e.typeNum)}))};const i=new Map,c=new Map;let C=0,d=0;for(const t of r){const e=`TYPE_${t.type??t.payload_type??-1}`;if(i.set(e,(i.get(e)??0)+1),C++,l){const s=$(t),a=P(s,{spreadingFactor:l.sf,bandwidthHz:l.bw,codingRate:l.cr,preambleLength:l.preamble});c.set(e,(c.get(e)??0)+a),d+=a}}const A=o.map(e=>{let s;return s="airtime"===t?d>0?(c.get(e.key)??0)/d:0:C>0?(i.get(e.key)??0)/C:0,{key:e.key,label:e.label,value:s,color:At(e.typeNum)}});return{timestamp:p[m].timestamp,timeLabel:e,items:A}},[m,p,y,s,o,t,l]);if(0===p.length)return n.jsxs("div",{className:"h-full flex items-center justify-center text-text-muted",children:[n.jsx(F,{className:"w-6 h-6 mr-2 opacity-50"}),n.jsx("span",{children:"No packet data available"})]});const j=(null==v?void 0:v.timeLabel)??null;return n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"analyzer-chart-height relative flex-shrink-0",children:[n.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden",children:n.jsx(dt,{data:g,maxValue:f,onHover:b,scatterData:x,noiseFloorAnomalies:C,showNoiseFloorOverlay:d,overlayOpacity:A,highlightedType:D,hoveredTimeRange:y,timeRangeHours:E,yAxisMode:"share"===t?"share":"airtime"})}),j&&n.jsx("div",{className:"absolute top-1 right-1 px-2 py-0.5 bg-bg-elevated/90 rounded text-xs text-accent-secondary font-mono pointer-events-none",children:j})]}),n.jsx(Bt,{sortedTypes:o,highlightedType:D,onTypeHover:h,aggregateShares:c,hoverData:v})]})}function ft({active:e,payload:t,label:s,mode:a}){if(!e||!t||0===t.length)return null;const r=t.filter(e=>null!==e.value&&void 0!==e.value);if(0===r.length)return null;const i=s?new Date(1e3*s).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return n.jsxs("div",{className:"bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 text-sm shadow-xl",children:[n.jsx("div",{className:"font-medium text-text-primary mb-1 font-mono",children:i}),r.map((e,t)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-0.5",style:{backgroundColor:e.color}}),n.jsxs("span",{className:"text-text-muted",children:[e.name,":"]}),n.jsx("span",{className:"text-text-primary tabular-nums font-mono",children:"share"===a?`${Number(e.value).toLocaleString()} B`:`${Number(e.value).toFixed(2)}%`})]},t))]})}function bt(e){return e>=1e9?`${(e/1e9).toFixed(1)}G`:e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toFixed(0)}function yt({packets:e,mode:t,startTs:s,endTs:a,radioConfig:i,bucketCount:l}){const o=ne(),c=re(),C=o.primary,d=o.tertiary,[A,m]=r.useState(null),{trendData:u,totals:D}=r.useMemo(()=>{if(0===e.length)return{trendData:[],totals:{rxBytes:0,txBytes:0,rxAirtime:0,txAirtime:0},actualBucketCount:0};const n=a-s,r=Math.min(Math.ceil(n/300),l),o=n/r,c=1e3*o,C=[];for(let e=0;e<r;e++)C.push({timestamp:s+e*o,rxBytes:0,txBytes:0,rxAirtime:0,txAirtime:0});let d=0,A=0,m=0,u=0;for(const t of e){const e=t.timestamp;if(e<s||e>=a)continue;const n=Math.min(Math.floor((e-s)/o),r-1),l=$(t),c=P(l,{spreadingFactor:i.sf,bandwidthHz:i.bw,codingRate:i.cr,preambleLength:i.preamble});t.transmitted?(C[n].txBytes+=l,C[n].txAirtime+=c,A+=l,u+=c):(C[n].rxBytes+=l,C[n].rxAirtime+=c,d+=l,m+=c)}return{trendData:C.map(e=>{if("share"===t)return{timestamp:e.timestamp,rx:e.rxBytes>0?e.rxBytes:null,tx:e.txBytes>0?e.txBytes:null};{const t=c>0?e.rxAirtime/c*100:0,s=c>0?e.txAirtime/c*100:0;return{timestamp:e.timestamp,rx:t>0?t:null,tx:s>0?s:null}}}),totals:{rxBytes:d,txBytes:A,rxAirtime:m,txAirtime:u}}},[e,s,a,l,t,i,300]),E=r.useMemo(()=>{if(0===u.length)return"share"===t?100:10;let e=0;for(const t of u){const s=t.rx??0,a=t.tx??0;s>e&&(e=s),a>e&&(e=a)}const s=1.1*e;return"share"===t?s<=100?100:s<=500?100*Math.ceil(s/100):s<=1e3?200*Math.ceil(s/200):s<=5e3?500*Math.ceil(s/500):s<=1e4?1e3*Math.ceil(s/1e3):5e3*Math.ceil(s/5e3):Math.max(1,Math.ceil(s))},[u,t]),h=r.useMemo(()=>{if(null!==A&&u[A]){const e=u[A],s=e.rx??0,a=e.tx??0;return"share"===t?{rx:bt(s),tx:bt(a),total:bt(s+a),isHovered:!0}:{rx:`${s.toFixed(2)}%`,tx:`${a.toFixed(2)}%`,total:`${(s+a).toFixed(2)}%`,isHovered:!0}}if("share"===t)return{rx:bt(D.rxBytes),tx:bt(D.txBytes),total:bt(D.rxBytes+D.txBytes),isHovered:!1};{let e=0,t=0,s=0;for(const r of u)null===r.rx&&null===r.tx||(e+=r.rx??0,t+=r.tx??0,s++);const a=s>0?e/s:0,n=s>0?t/s:0;return{rx:`${a.toFixed(2)}%`,tx:`${n.toFixed(2)}%`,total:`${(a+n).toFixed(2)}%`,isHovered:!1}}},[A,u,D,t]),x=r.useMemo(()=>{const e=a-s,t=e/3600;return[0,.25,.5,.75,1].map(a=>{const n=new Date(1e3*(s+e*a)),r=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),i=n.toLocaleDateString([],{weekday:"short"});return{pct:a,label:t>24?`${i} ${r}`:r}})},[s,a]),p=r.useCallback(e=>{const t=null==e?void 0:e.activeTooltipIndex;m("number"==typeof t?t:null)},[]),g=r.useCallback(e=>"share"===t?e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(0)}K`:e.toFixed(0):`${e.toFixed(0)}%`,[t]);return 0===u.length?n.jsxs("div",{className:"h-full flex items-center justify-center text-text-muted",children:[n.jsx(F,{className:"w-6 h-6 mr-2 opacity-50"}),n.jsx("span",{children:"No packet data available"})]}):n.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[n.jsx("div",{className:"flex items-center flex-shrink-0 text-text-secondary",style:{height:20,paddingLeft:44,paddingRight:8},children:n.jsx("div",{className:"relative w-full h-full flex items-center",children:x.map((e,t)=>n.jsxs("div",{className:"absolute flex items-center gap-1 type-data-xs",style:{left:100*e.pct+"%",transform:0===e.pct?"translateX(0)":1===e.pct?"translateX(-100%)":"translateX(-50%)"},children:[n.jsx(B,{className:"w-2.5 h-2.5 opacity-60"}),n.jsx("span",{className:"tabular-nums",children:e.label})]},t))})}),n.jsx("div",{className:"flex-1 min-h-0 relative",children:n.jsx(Ce,{width:"100%",height:"100%",minWidth:1,minHeight:1,children:n.jsxs(Ae,{data:u,margin:{top:4,right:8,bottom:4,left:0},onMouseMove:p,onMouseLeave:()=>m(null),children:[n.jsx(me,{strokeDasharray:"3 3",stroke:c.secondary,strokeOpacity:.3,vertical:!1}),n.jsx(ue,{dataKey:"timestamp",type:"number",domain:[s,a],axisLine:!1,tickLine:!1,tick:!1,height:0}),n.jsx(De,{axisLine:!1,tickLine:!1,tick:{fill:c.secondary,fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dx:-8,width:44,tickFormatter:g,domain:[0,E]}),n.jsx(Fe,{content:n.jsx(ft,{mode:t})}),n.jsx(Be,{type:"linear",dataKey:"rx",name:"RX",stroke:C,strokeWidth:2.5,strokeOpacity:.9,dot:!1,connectNulls:!1,isAnimationActive:!1}),n.jsx(Be,{type:"linear",dataKey:"tx",name:"TX",stroke:d,strokeWidth:2.5,strokeOpacity:.9,dot:!1,connectNulls:!1,isAnimationActive:!1})]})})}),n.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between mt-2",children:[n.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono pl-11",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:C}}),n.jsx("span",{className:"text-text-secondary",children:"RX"})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:d}}),n.jsx("span",{className:"text-text-secondary",children:"TX"})]}),n.jsx("span",{className:"text-text-secondary",children:"share"===t?"Bytes":"Utilization"})]}),n.jsxs("div",{className:"text-right pr-2",children:[n.jsx("span",{className:"font-mono font-bold text-xl text-text-primary",children:h.total}),n.jsx("span",{className:"text-xs text-text-secondary ml-2",children:h.isHovered?"bucket":"mean"})]})]})]})}function vt({mode:e,onChange:t}){return n.jsxs("div",{className:"toggle-group toggle-group-sm",children:[n.jsx("button",{onClick:()=>t("share"),className:"toggle-group-item "+("share"===e?"active":""),children:"Total"}),n.jsx("button",{onClick:()=>t("airtime"),className:"toggle-group-item "+("airtime"===e?"active":""),children:"Airtime"})]})}function jt({enabled:e,onChange:t,anomalyCount:s=0,showTuning:a=!1,onTuningChange:r}){return n.jsxs("div",{className:"relative inline-flex items-center gap-1",children:[e&&r&&n.jsx("button",{onClick:()=>r(!a),className:"toggle-group toggle-group-sm "+(a?"active":""),title:a?"Hide tuning panel":"Show tuning panel",children:n.jsx("span",{className:"toggle-group-item "+(a?"active":""),children:n.jsx(i,{className:"w-3.5 h-3.5"})})}),n.jsx("button",{onClick:()=>t(!e),className:"toggle-group toggle-group-sm "+(e?"active":""),title:e?"Hide noise floor anomalies":"Show noise floor anomalies",children:n.jsx("span",{className:"toggle-group-item "+(e?"active":""),children:n.jsx(l,{className:"w-3.5 h-3.5"})})}),s>0&&n.jsx("span",{className:"absolute -top-2 -right-2 min-w-[18px] h-[18px] px-1 rounded-full bg-accent-danger text-white text-[10px] font-bold flex items-center justify-center pointer-events-none z-10",children:s>99?"99+":s})]})}function Nt({smoothing:e,onChange:t}){return n.jsxs("div",{className:"toggle-group toggle-group-sm",children:[n.jsx("button",{onClick:()=>t("stats"),className:"toggle-group-item "+("stats"===e?"active":""),title:"Statistics view (scatter plot)",children:n.jsx(o,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("trend"),className:"toggle-group-item "+("trend"===e?"active":""),title:"Trend line chart",children:n.jsx(c,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("raw"),className:"toggle-group-item "+("raw"===e?"active":""),title:"No smoothing (raw values)",children:n.jsx(C,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("zlema"),className:"toggle-group-item "+("zlema"===e?"active":""),title:"6-period Zero-Lag EMA (light smoothing)",children:n.jsx(d,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("ema"),className:"toggle-group-item "+("ema"===e?"active":""),title:"12-period Zero-Lag EMA (moderate smoothing)",children:n.jsx(A,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("smooth"),className:"toggle-group-item "+("smooth"===e?"active":""),title:"24-period Zero-Lag EMA (heavy smoothing)",children:n.jsx(m,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("ultra"),className:"toggle-group-item "+("ultra"===e?"active":""),title:"96-period Zero-Lag EMA (ultra smoothing)",children:n.jsx(u,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>t("mosaic"),className:"toggle-group-item "+("mosaic"===e?"active":""),title:"Mosaic view (treemap chart)",children:n.jsx(D,{className:"w-3.5 h-3.5"})})]})}const wt=r.memo(function({packets:e,startTs:t,endTs:s,bucketCount:a,radioConfig:i=Dt,mode:l="share",smoothing:o="raw",noiseFloorAnomalies:c=null,showNoiseFloorOverlay:C=!1,overlayOpacity:d=.5}){const A=ae(),[m,u]=r.useState(null),[D,B]=r.useState([]),E=r.useRef(null),h=r.useRef(0);r.useEffect(()=>{const t=Math.abs(e.length-h.current);if(0===t&&D.length>0)return;E.current&&clearTimeout(E.current);const s=t>100?50:500;return E.current=setTimeout(()=>{h.current=e.length,B(e)},s),()=>{E.current&&clearTimeout(E.current)}},[e,D.length]);const x=r.useMemo(()=>function(e){const t=new Map;for(const a of e){const e=a.type??a.payload_type??-1;t.set(e,(t.get(e)??0)+1)}const s=[];for(const[a,n]of t)s.push({typeNum:a,key:`TYPE_${a}`,label:ut(a),totalCount:n});return s.sort((e,t)=>t.totalCount-e.totalCount)}(D),[D]),p=r.useMemo(()=>function(e,t,s,a,n,r){const i=s-t,l=i/a,o=1e3*l,c=[];for(let C=0;C<a;C++){const e=t+C*l,s=new Date(1e3*e),a=i/3600>24?s.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit",hour12:!1}):s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});c.push({timestamp:e,time:a,counts:{},shares:{},airtimes:{},total:0,totalAirtime:0,bucketDurationMs:o});for(const t of r)c[C].counts[t.key]=0,c[C].airtimes[t.key]=0}for(const C of e){const e=C.timestamp;if(e<t||e>=s)continue;const r=Math.min(Math.floor((e-t)/l),a-1),i=`TYPE_${C.type??C.payload_type??-1}`;c[r].counts[i]=(c[r].counts[i]??0)+1,c[r].total++;const o=$(C),d=P(o,{spreadingFactor:n.sf,bandwidthHz:n.bw,codingRate:n.cr,preambleLength:n.preamble});c[r].airtimes[i]=(c[r].airtimes[i]??0)+d,c[r].totalAirtime+=d}for(const C of c)for(const e of r)C.total>0?C.shares[e.key]=C.counts[e.key]/C.total*100:C.shares[e.key]=0;return c}(D,t,s,a,i,x),[D,t,s,a,i,x]),g=r.useMemo(()=>mt.getBuckets(D,t,s,i),[D,t,s,i]),f=r.useMemo(()=>x.reduce((e,t)=>e+t.totalCount,0),[x]),{sortedTypes:b,aggregateShares:y}=r.useMemo(()=>{const e=new Map;if("share"===l){if(f>0)for(const t of x)e.set(t.key,t.totalCount/f)}else{let t=0;const s=new Map;for(const e of p){t+=e.totalAirtime;for(const t of x){const a=s.get(t.key)??0;s.set(t.key,a+(e.airtimes[t.key]??0))}}if(t>0)for(const a of x)e.set(a.key,(s.get(a.key)??0)/t)}return{sortedTypes:[...x].sort((t,s)=>{const a=e.get(t.key)??0;return(e.get(s.key)??0)-a}),aggregateShares:e}},[x,f,l,p]),v=r.useMemo(()=>function(e,t,s,a="raw"){const n=function(e,t,s){if(e.length<=360)return e;const a=Math.ceil(e.length/360),n=[];for(let r=0;r<e.length;r+=a){const t=e.slice(r,Math.min(r+a,e.length));if(0===t.length)continue;const i={timestamp:t[0].timestamp,time:t[0].time,counts:{},shares:{},airtimes:{},total:0,totalAirtime:0,bucketDurationMs:t[0].bucketDurationMs*t.length};for(const e of t){i.total+=e.total,i.totalAirtime+=e.totalAirtime;for(const t of s)i.counts[t.key]=(i.counts[t.key]??0)+(e.counts[t.key]??0),i.airtimes[t.key]=(i.airtimes[t.key]??0)+(e.airtimes[t.key]??0)}for(const e of s)i.shares[e.key]=i.total>0?i.counts[e.key]/i.total*100:0;n.push(i)}return n}(e,0,s),r=n.length,i=s.length,l=Array.from({length:i},()=>new Array(r).fill(0));for(let A=0;A<r;A++){const e=n[A];if("share"===t)for(let t=0;t<i;t++){const a=s[t].key;l[t][A]=e.total>0?(e.counts[a]??0)/e.total:0}else{let t=0;for(let a=0;a<i;a++)t+=e.airtimes[s[a].key]??0;for(let a=0;a<i;a++){const n=s[a].key,r=e.airtimes[n]??0;l[a][A]=t>0?r/t:0}}}const o=Array.from({length:i},()=>new Array(r).fill(0));for(let A=0;A<i;A++)for(let e=0;e<r;e++){let t=0;for(let s=0;s<=A;s++)t+=l[s][e];o[A][e]=t}const c=o.map(e=>function(e,t){switch(t){case"zlema":return Ft(e,6);case"ema":return Ft(e,12);case"smooth":return Ft(e,24);case"ultra":return Ft(e,96);default:return e}}(e,a)),C=Array.from({length:i},()=>new Array(r).fill(0));for(let A=0;A<i;A++)for(let e=0;e<r;e++){const t=A>0?c[A-1][e]:0;let s=c[A][e]-t;s<0&&(s=0),s>1&&(s=1),C[A][e]=s}for(let A=0;A<r;A++){let e=0;for(let t=0;t<i;t++)e+=C[t][A];if(e>0&&Math.abs(e-1)>1e-6){const t=1/e;for(let e=0;e<i;e++)C[e][A]*=t}}const d=[];for(let A=0;A<r;A++){const e={timestamp:n[A].timestamp,time:n[A].time};for(let t=0;t<i;t++)e[s[t].key]=C[t][A];d.push(e)}return d}(p,l,b,o),[p,l,b,o]),j=r.useCallback(e=>{u(e)},[]),[N,w]=r.useState(null),k=r.useCallback(e=>{w(e)},[]),M=r.useMemo(()=>{if(null===N||!v[N])return null;const e=v[N];return{timestamp:e.timestamp,timeLabel:e.time,items:b.map(t=>({key:t.key,label:t.label,value:e[t.key]??0,color:At(t.typeNum)}))}},[N,v,b]),S=r.useMemo(()=>({timestamps:v.map(e=>e.timestamp),series:b.map(e=>({key:e.key,label:e.label,color:At(e.typeNum),values:v.map(t=>t[e.key]??0)}))}),[v,b]);return 0===D.length?0===e.length?n.jsxs("div",{className:"h-full flex items-center justify-center text-text-muted",children:[n.jsx(F,{className:"w-6 h-6 mr-2 opacity-50"}),n.jsx("span",{children:"No packet data available"})]}):null:"mosaic"===o?n.jsx(xt,{sortedTypes:b,aggregateShares:y}):"stats"===o?n.jsx(gt,{statsBuckets:g,mode:l,packets:D,startTs:t,endTs:s,radioConfig:i,sortedTypes:b,aggregateShares:y,noiseFloorAnomalies:c,showNoiseFloorOverlay:C,overlayOpacity:d}):"trend"===o?n.jsx(yt,{packets:D,mode:l,startTs:t,endTs:s,radioConfig:i,bucketCount:a}):n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"analyzer-chart-height relative flex-shrink-0",children:n.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden",children:n.jsx(O,{timestamps:S.timestamps,series:S.series,highlightedKey:m,cursorColor:A.cursor,onHover:k})})}),n.jsx(Bt,{sortedTypes:b,highlightedType:m,onTypeHover:j,aggregateShares:y,hoverData:M})]})}),kt={"1x":1,"2x":2,"4x":4,"8x":8,"16x":16,"36x":36},Mt=[1,5,10,25,50,100,150];function St(e,t,s,a){const n=Math.PI/180,r=(a-t)*n,i=e*n,l=s*n,o=Math.sin(r)*Math.cos(l),c=Math.cos(i)*Math.sin(l)-Math.sin(i)*Math.cos(l)*Math.cos(r);return(180*Math.atan2(o,c)/Math.PI+360)%360}function Tt(e,t,s,a){const n=Math.PI/180,r=(s-e)*n,i=(a-t)*n,l=Math.sin(r/2)**2+Math.cos(e*n)*Math.cos(s*n)*Math.sin(i/2)**2;return 12742*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}const $t=[{min:10,label:"Excellent"},{min:7,label:"Very Good"},{min:4,label:"Good"},{min:1,label:"Fair+"},{min:-2,label:"Fair"},{min:-5,label:"Fair-"},{min:-8,label:"Poor"},{min:-11,label:"Bad"},{min:-1/0,label:"Critical"}];function Pt(e,t){return t[oe(e)]||"#808080"}const Rt=r.memo(function({neighbors:e,quickNeighbors:t,localLat:s,localLon:a,onStatsChange:i}){const[l,o]=r.useState(null),[c,C]=r.useState(new Set),[d,A]=r.useState({width:0,height:0}),[m,u]=r.useState("1x"),[D,F]=r.useState(1),B=r.useRef(null),h=r.useRef({}),x=r.useRef(null),p=r.useRef(null),g=r.useRef(D);g.current=D;const f=ie(),b=ne(),y=le(),v=re();r.useEffect(()=>{const e=p.current;if(!e)return;const t=new ResizeObserver(e=>{for(const t of e){const{width:e,height:s}=t.contentRect;e>0&&s>0&&A({width:e,height:s})}});t.observe(e);const s=e.getBoundingClientRect();return s.width>0&&s.height>0&&A({width:s.width,height:s.height}),()=>t.disconnect()},[]);const j=r.useMemo(()=>{const e=new Set;if(t)for(const s of t)e.add(s.hash);return e},[t]),N=r.useMemo(()=>{const e=new Map;if(t)for(const s of t)e.set(s.hash,{snr:s.avgSnr,rssi:s.avgRssi});return e},[t]),{processedNeighbors:w,maxDistance:k,totalNeighbors:M,zeroHopCount:S}=r.useMemo(()=>{const t=[];for(const[r,i]of Object.entries(e)){if(!i.latitude||!i.longitude||0===i.latitude||0===i.longitude)continue;if(!j.has(r))continue;const e=St(s,a,i.latitude,i.longitude),n=Tt(s,a,i.latitude,i.longitude),l=N.get(r);t.push({hash:r.slice(0,8),name:i.node_name||i.name||"Unknown",snr:(null==l?void 0:l.snr)??i.snr??null,rssi:(null==l?void 0:l.rssi)??i.rssi??null,bearing:e,distance:n,normalizedDistance:0,lastSeen:i.last_seen,isZeroHop:!0})}const n=1.08*(t.length>0?Math.max(...t.map(e=>e.distance)):0);return t.sort((e,t)=>(e.snr??-1/0)-(t.snr??-1/0)),{processedNeighbors:t,maxDistance:n,totalNeighbors:t.length,zeroHopCount:t.length}},[e,s,a,j,N]);r.useEffect(()=>{null==i||i({zeroHopCount:S,totalCount:M,maxDistanceKm:k})},[S,M,k]),r.useEffect(()=>{const e=kt[m],t=g.current;B.current&&cancelAnimationFrame(B.current);const s=performance.now(),a=n=>{const r=n-s,i=Math.min(r/400,1),l=(o=i)<.5?8*o*o*o*o:1-Math.pow(-2*o+2,4)/2;var o;F(t+(e-t)*l),B.current=i<1?requestAnimationFrame(a):null};return B.current=requestAnimationFrame(a),()=>{B.current&&cancelAnimationFrame(B.current)}},[m]);const T=k/D,$=r.useMemo(()=>Mt.filter(e=>e<=1.1*T),[T]);r.useEffect(()=>{const e=[];for(const s of w){const t=h.current[s.hash];void 0!==t&&t!==s.lastSeen&&e.push(s.hash),h.current[s.hash]=s.lastSeen}if(0===e.length)return;queueMicrotask(()=>{C(t=>new Set([...t,...e]))});const t=setTimeout(()=>{C(t=>{const s=new Set(t);return e.forEach(e=>s.delete(e)),s})},600);return()=>clearTimeout(t)},[w]);const P=0!==s&&0!==a,R=r.useMemo(()=>{const{width:e,height:t}=d,s=e/2,a=t/2,n=Math.max(10,e/2-12),r=Math.max(10,t/2-12),i=Math.max(10,n-16),l=Math.max(10,r-16);return{width:e,height:t,centerX:s,centerY:a,maxRadiusX:i,maxRadiusY:l,labelRadiusX:n,labelRadiusY:r,cornerRadius:.2*Math.min(i,l)}},[d]),{width:L,height:_,centerX:z,centerY:H,maxRadiusX:O,maxRadiusY:W,labelRadiusX:I,labelRadiusY:V,cornerRadius:q}=R,G=r.useCallback((e,t=1)=>{const s=O*t,a=W*t,n=Math.min(q*t,s,a),r=(e%360+360)%360,i=r*Math.PI/180,l=180*Math.atan2(a-n,s-n)/Math.PI;let o,c;if(r<=45-l||r>315+l){const e=Math.tan(i);o=Math.max(z-s+n,Math.min(z+s-n,z+a*e*(s/a))),c=H-a}else if(r>45-l&&r<=45+l)o=z+s-n+n*Math.sin(i),c=H-a+n-n*Math.cos(i);else if(r>45+l&&r<=135-l){const e=1/Math.tan(i);c=Math.max(H-a+n,Math.min(H+a-n,H-s*e*(a/s))),o=z+s}else if(r>135-l&&r<=135+l)o=z+s-n+n*Math.sin(i),c=H+a-n-n*Math.cos(i);else if(r>135+l&&r<=225-l){const e=Math.tan(i);o=Math.max(z-s+n,Math.min(z+s-n,z-a*e*(s/a))),c=H+a}else if(r>225-l&&r<=225+l)o=z-s+n+n*Math.sin(i),c=H+a-n-n*Math.cos(i);else if(r>225+l&&r<=315-l){const e=1/Math.tan(i);c=Math.max(H-a+n,Math.min(H+a-n,H-s*e*(a/s))),o=z-s}else o=z-s+n+n*Math.sin(i),c=H-a+n-n*Math.cos(i);return{x:o,y:c}},[z,H,O,W,q]),X=r.useCallback((e,t)=>{const s=G(e,1);return{x:z+(s.x-z)*t,y:H+(s.y-H)*t}},[G,z,H]),K=r.useCallback(e=>({N:{x:z,y:H-V},S:{x:z,y:H+V},E:{x:z+I,y:H},W:{x:z-I,y:H},NE:{x:z+I,y:H-V},SE:{x:z+I,y:H+V},SW:{x:z-I,y:H+V},NW:{x:z-I,y:H-V}}[e]),[z,H,I,V]),Y=r.useCallback(e=>{const t=O*e,s=W*e,a=Math.min(q*e,t,s),n=z-t,r=z+t,i=H-s,l=H+s;return[`M ${n+a} ${i}`,`L ${r-a} ${i}`,`Q ${r} ${i} ${r} ${i+a}`,`L ${r} ${l-a}`,`Q ${r} ${l} ${r-a} ${l}`,`L ${n+a} ${l}`,`Q ${n} ${l} ${n} ${l-a}`,`L ${n} ${i+a}`,`Q ${n} ${i} ${n+a} ${i}`,"Z"].join(" ")},[z,H,O,W,q]),Q=r.useCallback(e=>{o(e)},[]),U=r.useCallback(e=>{u(e)},[]),J=r.useCallback(e=>k<=0?0:e/k*D,[k,D]),Z=e=>`${e}km`,ee=r.useMemo(()=>{const e=$.map(e=>{const t=e/k*D;return{km:e,scale:t,labelY:H-W*t*.71}}).filter(e=>e.scale<=1.05&&e.scale>=.02).sort((e,t)=>t.km-e.km),t=[];for(const s of e)t.some(e=>Math.abs(e.labelY-s.labelY)<28)||t.push(s);return t},[$,k,D,H,W]),te=d.width>0&&d.height>0;return P?0===M?n.jsxs("div",{ref:x,className:"flex flex-col items-center justify-center h-full text-text-secondary",children:[n.jsx(E,{className:"w-8 h-8 mb-2 opacity-50"}),n.jsx("p",{children:"No nodes with location data"})]}):n.jsxs("div",{ref:x,className:"relative h-full w-full flex overflow-hidden",children:[n.jsx("div",{ref:p,className:"relative flex-1 min-w-0 h-full",children:te&&n.jsxs("svg",{width:L,height:_,className:"absolute inset-0 z-0",children:[n.jsxs("defs",{children:[n.jsx("style",{children:"\n                @keyframes neighbor-blink-scale {\n                  0%, 100% {\n                    transform: scale(1);\n                    opacity: 0;\n                  }\n                  50% {\n                    transform: scale(1.3);\n                    opacity: 0.8;\n                  }\n                }\n                .neighbor-blink-ring {\n                  transform-origin: center;\n                  animation: neighbor-blink-scale 600ms ease-out forwards;\n                }\n              "}),n.jsx("clipPath",{id:"radar-clip",children:n.jsx("path",{d:Y(1)})})]}),$.map(e=>{const t=J(e);if(t>1.05||t<.02)return null;const s=ee.some(t=>t.km===e),a=z+O*t*.71,r=H-W*t*.71;return n.jsxs("g",{children:[n.jsx("path",{d:Y(t),fill:"none",stroke:v.primary,strokeOpacity:.15,strokeWidth:1}),s&&n.jsx("text",{x:a+4,y:r-2,textAnchor:"start",dominantBaseline:"auto",className:"fill-text-secondary",fontSize:10,fontFamily:"'JetBrains Mono', monospace",children:Z(e)})]},`ring-${e}`)}),["N","E","S","W"].map(e=>{const t="N"===e||"S"===e,s=t?z:"E"===e?z+O:z-O,a=t?"N"===e?H-W:H+W:H;return n.jsx("line",{x1:z,y1:H,x2:s,y2:a,stroke:v.primary,strokeOpacity:.15,strokeWidth:1,strokeDasharray:"4 4"},e)}),["NE","SE","SW","NW"].map(e=>{const t=K(e);return n.jsx("line",{x1:z,y1:H,x2:t.x,y2:t.y,stroke:v.primary,strokeOpacity:.08,strokeWidth:1,strokeDasharray:"4 4"},`diag-${e}`)}),["N","E","S","W"].map(e=>{const t=K(e),s="E"===e?"end":"W"===e?"start":"middle",a="N"===e?"hanging":"S"===e?"auto":"middle";return n.jsx("text",{x:t.x,y:t.y,textAnchor:s,dominantBaseline:a,fill:b.primary,fontSize:16,fontWeight:600,fontFamily:"'JetBrains Mono', monospace","aria-hidden":"true",children:e},e)}),["NE","SE","SW","NW"].map(e=>{const t=K(e),s="NE"===e||"SE"===e?"end":"start",a="NE"===e||"NW"===e?"hanging":"auto";return n.jsx("text",{x:t.x,y:t.y,textAnchor:s,dominantBaseline:a,fill:b.primary,fontSize:16,fontWeight:600,fontFamily:"'JetBrains Mono', monospace","aria-hidden":"true",children:e},e)}),n.jsx("circle",{cx:z,cy:H,r:5,fill:y.chart6,stroke:"rgba(255,255,255,0.3)",strokeWidth:1,role:"img","aria-label":"Local node"}),n.jsx("g",{clipPath:"url(#radar-clip)",children:w.map(e=>{const t=k>0?e.distance/k*D:0;if(t>1)return null;const{x:s,y:a}=X(e.bearing,t),r=null!==e.snr?Pt(e.snr,f):"#808080",i=(null==l?void 0:l.hash)===e.hash,o=c.has(e.hash);return n.jsxs("g",{role:"img","aria-label":`${e.name}: ${e.distance.toFixed(1)}km ${e.bearing.toFixed(0)}`,children:[o&&n.jsx("circle",{cx:s,cy:a,r:10.5,fill:"none",stroke:"rgba(255,255,255,0.9)",strokeWidth:2,className:"neighbor-blink-ring"}),i&&n.jsx("circle",{cx:s,cy:a,r:10.5,fill:r,opacity:.3}),n.jsx("circle",{cx:s,cy:a,r:i?7:5,fill:r,stroke:"rgba(0,0,0,0.5)",strokeWidth:1,style:{cursor:"pointer",transition:"r 0.15s"},onMouseEnter:()=>Q(e),onMouseLeave:()=>Q(null)})]},e.hash)})})]})}),n.jsx("div",{className:"flex flex-col h-full items-stretch gap-1 py-2 pl-2 flex-shrink-0",role:"group","aria-label":"Zoom level",children:["1x","2x","4x","8x","16x","36x"].map(e=>n.jsx("button",{onClick:()=>U(e),"aria-pressed":m===e,className:"flex flex-1 items-center justify-center px-1.5 text-xs font-medium rounded transition-colors "+(m===e?"bg-accent-primary/20 text-accent-primary":"bg-white/5 text-text-secondary hover:bg-white/10 hover:text-text-primary"),children:e},e))}),l&&n.jsxs("div",{className:"absolute bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 text-sm pointer-events-none z-10 shadow-xl",style:{left:"50%",bottom:8,transform:"translateX(-50%)"},children:[n.jsx("div",{className:"font-medium text-text-primary",children:l.name}),n.jsx("div",{className:"text-text-secondary text-xs font-mono",children:l.hash}),null!==l.snr?n.jsx("div",{className:"flex gap-3 mt-1 text-xs",children:n.jsxs("span",{children:[n.jsx("span",{className:"text-text-secondary",children:"SNR:"})," ",n.jsxs("span",{className:"tabular-nums",style:{color:Pt(l.snr,f)},children:[l.snr.toFixed(1)," dB"]}),n.jsxs("span",{className:"text-text-secondary ml-1",children:["(",(se=l.snr,(null==(ae=$t.find(e=>se>=e.min))?void 0:ae.label)??"Critical"),")"]})]})}):n.jsx("div",{className:"text-xs text-text-secondary mt-1",children:"No SNR data"}),n.jsxs("div",{className:"flex gap-3 text-xs",children:[n.jsxs("span",{children:[n.jsx("span",{className:"text-text-secondary",children:"Distance:"})," ",n.jsxs("span",{className:"tabular-nums text-text-primary",children:[l.distance.toFixed(2)," km"]})]}),n.jsxs("span",{children:[n.jsx("span",{className:"text-text-secondary",children:"Bearing:"})," ",n.jsxs("span",{className:"tabular-nums text-text-primary",children:[l.bearing.toFixed(0),""]})]})]})]})]}):n.jsxs("div",{ref:x,className:"flex flex-col items-center justify-center h-full text-text-secondary",children:[n.jsx(E,{className:"w-8 h-8 mb-2 opacity-50"}),n.jsx("p",{children:"Local node coordinates not configured"}),n.jsx("p",{className:"text-xs mt-1",children:"Set latitude/longitude in config to enable"})]});var se,ae});function Lt(e,t){if(0===e.length)return 0;const s=t/100*(e.length-1),a=Math.floor(s),n=Math.ceil(s);return a===n?e[a]:e[a]+(e[n]-e[a])*(s-a)}const _t=r.memo(function({timestamps:e,values:t,onStatsChange:s}){var a,i;const{theme:l}=I(),[o,c]=r.useState(!0),C=r.useMemo(()=>{if(0===t.length)return null;const e=Math.min(...t),s=Math.max(...t),a=t.reduce((e,t)=>e+t,0)/t.length,n=[...t].sort((e,t)=>e-t);return{min:e,max:s,avg:a,p5:Lt(n,5),p95:Lt(n,95)}},[t]);r.useEffect(()=>{null==s||s(C)},[C]);const d=r.useCallback(()=>{c(e=>!e)},[]),{heatmapData:A,xLabels:m,yLabels:u}=r.useMemo(()=>{if(0===e.length||0===t.length||!C)return{heatmapData:null,xLabels:[],yLabels:[]};let s,a;if(o){const e=.1*(C.p95-C.p5||1);s=C.p5-e,a=C.p95+e}else{const e=.1*(C.max-C.min||1);s=C.min-e,a=C.max+e}const n=a-s,r=e[0],i=e[e.length-1]-r||1,l=new Float32Array(2*e.length);for(let o=0;o<e.length;o++){const c=(e[o]-r)/i,C=1-(Math.max(s,Math.min(a,t[o]))-s)/n;l[2*o]=c,l[2*o+1]=C}const c=[];for(let e=0;e<=5;e++){const t=r+i*e/5;c.push({pos:e/5*100,label:new Date(1e3*t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}const d=[];for(let e=0;e<=4;e++){const t=s+n*e/4;d.push({pos:100*(1-e/4),label:`${Math.round(t)}`})}return{heatmapData:{points:l,count:e.length},xLabels:c,yLabels:d}},[e,t,C,o]),D=r.useRef(null),F=r.useRef(null),[B,E]=r.useState({width:0,height:0});return r.useEffect(()=>{const e=F.current;if(!e)return;const t=new ResizeObserver(e=>{for(const t of e){const{width:e,height:s}=t.contentRect;e>0&&s>0&&E({width:e,height:s})}});t.observe(e);const s=e.getBoundingClientRect();return s.width>0&&s.height>0&&E({width:s.width,height:s.height}),()=>t.disconnect()},[]),r.useEffect(()=>{const e=D.current;if(!e||!A||0===B.width)return;const t=e.getContext("2d");if(!t)return;const{width:s,height:a}=B,n=window.devicePixelRatio||1;e.width=s*n,e.height=a*n,e.style.width=`${s}px`,e.style.height=`${a}px`,t.scale(n,n),t.clearRect(0,0,s,a);const r=getComputedStyle(document.documentElement).getPropertyValue("--accent-primary").trim(),{r:i,g:l,b:o}=(e=>{const t=e.match(/color\(display-p3\s+([\d.]+)\s+([\d.]+)\s+([\d.]+)\)/);if(t)return{r:Math.round(255*parseFloat(t[1])),g:Math.round(255*parseFloat(t[2])),b:Math.round(255*parseFloat(t[3]))};const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:{r:250,g:189,b:47}})(r),{points:c,count:C}=A,d=Math.max(3,Math.min(8,s/C*4));t.globalCompositeOperation="source-over";for(let A=0;A<C;A++){const e=c[2*A]*s,n=c[2*A+1]*a,r=t.createRadialGradient(e,n,0,e,n,d);r.addColorStop(0,`rgba(${i}, ${l}, ${o}, 0.85)`),r.addColorStop(.25,`rgba(${i}, ${l}, ${o}, 0.85)`),r.addColorStop(.35,`rgba(${i}, ${l}, ${o}, 0.15)`),r.addColorStop(1,`rgba(${i}, ${l}, ${o}, 0)`),t.fillStyle=r,t.beginPath(),t.arc(e,n,d,0,2*Math.PI),t.fill()}},[A,B,l.colorScheme]),A?n.jsxs("div",{className:"relative w-full h-full",role:"img","aria-label":`RF noise floor heatmap showing values from ${(null==(a=null==C?void 0:C.min)?void 0:a.toFixed(0))??"N/A"} to ${(null==(i=null==C?void 0:C.max)?void 0:i.toFixed(0))??"N/A"} dBm`,children:[n.jsx("div",{className:"absolute top-0 left-0 flex flex-col justify-between",style:{width:32,bottom:20},"aria-hidden":"true",children:u.map((e,t)=>n.jsx("span",{className:"type-data-xs text-text-secondary tabular-nums text-right pr-1.5",style:{position:"absolute",top:`${e.pos}%`,transform:"translateY(-50%)",right:0},children:e.label},t))}),n.jsxs("div",{ref:F,className:"absolute overflow-hidden",style:{left:32,right:0,top:0,bottom:20},children:[n.jsx("svg",{className:"absolute inset-0 w-full h-full",preserveAspectRatio:"none","aria-hidden":"true",children:[0,25,50,75,100].map(e=>n.jsx("line",{x1:"0",y1:`${e}%`,x2:"100%",y2:`${e}%`,stroke:"rgba(255,255,255,0.06)",strokeDasharray:"3 3"},e))}),n.jsx("canvas",{ref:D,className:"absolute inset-0 w-full h-full","aria-hidden":"true"}),n.jsx("button",{type:"button",onClick:d,className:"absolute bottom-1 right-1 p-1.5 rounded bg-tooltip-bg/80 hover:bg-tooltip-bg active:bg-tooltip-bg transition-colors touch-manipulation",title:o?"Show full range (min/max)":"Show trimmed range (P5-P95)","aria-label":o?"Expand to show full data range":"Shrink to show trimmed percentile range","aria-pressed":!o,children:o?n.jsx(h,{className:"w-3.5 h-3.5 text-text-muted","aria-hidden":"true"}):n.jsx(x,{className:"w-3.5 h-3.5 text-text-muted","aria-hidden":"true"})})]}),n.jsx("div",{className:"absolute left-0 right-0 bottom-0",style:{left:32,height:20},"aria-hidden":"true",children:m.map((e,t)=>n.jsx("span",{className:"type-data-xs text-text-secondary tabular-nums absolute top-1",style:{left:`${e.pos}%`,transform:"translateX(-50%)"},children:e.label},t))})]}):n.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No noise floor data available"})}),zt={repeater:"var(--accent-primary)",companion:"var(--accent-tertiary)",room_server:"var(--accent-secondary)"};function Ht(e){if(e.contact_type){const t=e.contact_type.toLowerCase();if("repeater"===t||"rep"===t)return"repeater";if("room server"===t||"room_server"===t||"room"===t||"server"===t)return"room_server";if("companion"===t||"client"===t||"cli"===t)return"companion"}return e.is_repeater?"repeater":"companion"}const Ot=r.memo(function({neighbors:e}){const t=r.useMemo(()=>{const t={repeater:0,companion:0,room_server:0};for(const a of Object.values(e)){const e=Ht(a);t[e]=(t[e]||0)+1}const s=Object.values(t).reduce((e,t)=>e+t,0);return{items:[{label:"Repeaters",count:t.repeater,percent:0,color:zt.repeater},{label:"Companions",count:t.companion,percent:0,color:zt.companion},{label:"Room Servers",count:t.room_server,percent:0,color:zt.room_server}].map(e=>({...e,percent:s>0?e.count/s*100:0})).filter(e=>e.count>0).sort((e,t)=>t.count-e.count),total:s}},[e]);return 0===t.total?n.jsx("div",{className:"h-full flex items-center justify-center text-text-muted type-body-sm",children:"No neighbors discovered yet"}):n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex-1 flex flex-col justify-evenly",children:t.items.map(e=>n.jsxs("div",{className:"flex flex-col gap-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"type-data-sm text-text-secondary",children:e.label}),n.jsxs("span",{className:"type-data-sm text-text-secondary tabular-nums",children:[e.count," ",n.jsxs("span",{className:"text-text-secondary/60",children:["(",e.percent.toFixed(0),"%)"]})]})]}),n.jsx("div",{className:"h-2.5 bg-bg-elevated rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${e.percent}%`,backgroundColor:e.color,minWidth:e.count>0?"4px":"0"}})})]},e.label))}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border-subtle",children:[n.jsx("span",{className:"type-data-xs text-text-secondary",children:"Total Nodes"}),n.jsx("span",{className:"type-data-sm text-text-primary font-medium tabular-nums",children:t.total})]})]})});function Wt({children:e,minHeight:t="100%",rootMargin:s="200px 0px",keepMounted:a=!0,className:i=""}){const l=r.useRef(null),[o,c]=r.useState(!1),[C,d]=r.useState(!1);r.useEffect(()=>{const e=l.current;if(!e)return;const t=new IntersectionObserver(([e])=>{const t=e.isIntersecting;d(t),t&&c(!0)},{rootMargin:s,threshold:0});return t.observe(e),()=>{t.disconnect()}},[s]);const A=C||a&&o;return n.jsx("div",{ref:l,className:`h-full w-full ${i}`,style:{minHeight:t},children:A?e:n.jsx("div",{className:"h-full w-full flex items-center justify-center text-text-muted/50",children:n.jsx("div",{className:"animate-pulse text-xs",children:"Loading chart..."})})})}const It={excellent:"text-signal-excellent",good:"text-signal-good",fair:"text-signal-fair",poor:"text-accent-primary"},Vt={excellent:"bg-signal-excellent/10",good:"bg-signal-good/10",fair:"bg-signal-fair/10",poor:"bg-accent-primary/10"},qt={excellent:"bg-signal-excellent",good:"bg-signal-good",fair:"bg-signal-fair",poor:"bg-accent-primary"};function Gt({value:e,status:t}){return n.jsx("div",{className:"w-full h-2 bg-surface-elevated rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${qt[t]} transition-all duration-300`,style:{width:`${Math.min(100,Math.max(0,e))}%`}})})}function Xt(){const e=V(),t=q(),[s,a]=r.useState(null),i=r.useCallback((e,t)=>{a({prefix:e,candidateHashes:t})},[]),l=r.useCallback(()=>{a(null)},[]);if(!t)return n.jsxs(he,{children:[n.jsx(xe,{icon:n.jsx(p,{}),title:"Prefix Conflicts",largeTitle:!0}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-text-secondary",children:[n.jsx(g,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"type-data-xs",children:"No topology data available"}),n.jsx("p",{className:"type-data-xs opacity-70",children:"Run deep analysis to see stats"})]})})]});const o=(c=e.avgConfidence)>=.9?"excellent":c>=.7?"good":c>=.5?"fair":"poor";var c;const C=(d=e.collisionRate)<=10?"excellent":d<=25?"good":"poor";var d;const A="poor"===o||"poor"===C?"poor":"fair"===o||"fair"===C?"fair":"good"===o||"good"===C?"good":"excellent",m="excellent"===A||"good"===A?f:b;return n.jsxs(he,{className:"flex flex-col overflow-hidden",children:[n.jsx(xe,{icon:n.jsx(p,{}),title:"Prefix Conflicts",largeTitle:!0,actions:n.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full ${Vt[A]}`,children:[n.jsx(m,{className:`w-3.5 h-3.5 ${It[A]}`}),n.jsx("span",{className:`type-data-xs font-medium ${It[A]}`,children:"excellent"===A?"Excellent":"good"===A?"Good":"fair"===A?"Fair":"Needs Attention"})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[n.jsxs("div",{className:"cursor-help",title:"Average confidence score across all disambiguated prefixes. Higher = more certain node identification. Based on geographic proximity, co-occurrence patterns, and observation recency.",children:[n.jsxs("div",{className:"flex items-baseline justify-between mb-1",children:[n.jsx("span",{className:"type-data-xs text-text-secondary",children:"Avg Confidence"}),n.jsxs("span",{className:`type-data-lg font-semibold ${It[o]}`,children:[(100*e.avgConfidence).toFixed(1),"%"]})]}),n.jsx(Gt,{value:100*e.avgConfidence,status:o})]}),n.jsxs("div",{className:"cursor-help",title:"Percentage of 2-character prefixes that match multiple known nodes. Lower is better. Collisions require disambiguation to determine the correct node.",children:[n.jsxs("div",{className:"flex items-baseline justify-between mb-1",children:[n.jsx("span",{className:"type-data-xs text-text-secondary",children:"Collision Rate"}),n.jsxs("span",{className:`type-data-lg font-semibold ${It[C]}`,children:[e.collisionRate.toFixed(1),"%"]})]}),n.jsx(Gt,{value:e.collisionRate,status:C})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[n.jsxs("div",{className:"text-center cursor-help px-2 py-1.5 rounded",style:{backgroundColor:"var(--hover-tint)"},title:"Total unique 2-character prefixes observed in packet paths. Each prefix represents the first 2 hex digits of a node's full hash.",children:[n.jsx("div",{className:"type-data-lg font-semibold text-text-primary",children:e.totalPrefixes}),n.jsx("div",{className:"type-data-xs text-text-secondary",children:"Prefixes"})]}),n.jsxs("div",{className:"text-center cursor-help px-2 py-1.5 rounded",style:{backgroundColor:"var(--hover-tint)"},title:"Prefixes that map to exactly one known node. No disambiguation neededthese are definitive identifications.",children:[n.jsx("div",{className:"type-data-lg font-semibold text-signal-good",children:e.unambiguousPrefixes}),n.jsx("div",{className:"type-data-xs text-text-secondary",children:"Unique"})]}),n.jsxs("div",{className:"text-center cursor-help px-2 py-1.5 rounded",style:{backgroundColor:"var(--hover-tint)"},title:"Prefixes matching multiple known nodes. Click a prefix below to explore candidates and see how disambiguation scores them.",children:[n.jsx("div",{className:"type-data-lg font-semibold "+(e.collisionPrefixes>0?"text-accent-primary":"text-text-primary"),children:e.collisionPrefixes}),n.jsx("div",{className:"type-data-xs "+(e.collisionPrefixes>0?"text-accent-primary":"text-text-secondary"),children:"Collisions"})]})]}),e.highCollisionPrefixes.length>0&&n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"type-data-xs text-text-secondary mb-1.5",children:"Highest Collisions"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.highCollisionPrefixes.map(({prefix:e,candidateCount:t,candidateHashes:s})=>n.jsxs("button",{type:"button",onClick:()=>i(e,s),className:"inline-flex items-center gap-1 px-1.5 py-0.5 min-h-[24px] rounded bg-surface-elevated text-text-secondary type-data-xs font-mono hover:bg-accent-primary/20 hover:text-accent-primary focus:outline-none focus:ring-2 focus:ring-accent-primary/50 transition-colors cursor-pointer touch-manipulation",title:`Click to explore ${t} candidates matching this prefix`,"aria-label":`Explore prefix ${e} with ${t} colliding candidates`,children:[e,n.jsxs("span",{className:"text-accent-primary",children:["",t]})]},e))})]}),e.lowConfidencePrefixes.length>0&&n.jsx("div",{className:"mt-auto pt-2",children:n.jsxs("div",{className:"flex items-start gap-1.5",children:[n.jsx(b,{className:"w-3.5 h-3.5 text-accent-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"type-data-xs text-accent-primary font-medium",children:[n.jsx("span",{className:"text-accent-primary",children:e.lowConfidencePrefixes.length})," prefix",1!==e.lowConfidencePrefixes.length?"es":""," with low confidence"]}),n.jsxs("div",{className:"type-data-xs text-text-secondary font-mono truncate",children:[e.lowConfidencePrefixes.slice(0,5).join(", "),e.lowConfidencePrefixes.length>5&&n.jsxs("span",{className:"text-accent-primary",children:[" +",e.lowConfidencePrefixes.length-5," more"]})]})]})]})}),0===e.lowConfidencePrefixes.length&&0===e.collisionPrefixes&&n.jsx("div",{className:"mt-auto pt-2",children:n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(f,{className:"w-3.5 h-3.5 text-signal-excellent"}),n.jsx("span",{className:"type-data-xs text-signal-excellent",children:"All prefixes uniquely identified"})]})})]}),n.jsx(fe,{isOpen:!!s,prefix:(null==s?void 0:s.prefix)||"",candidateHashes:(null==s?void 0:s.candidateHashes)||[],onClose:l})]})}function Kt({icon:e,label:t,value:s,sublabel:a,highlight:r,tooltip:i}){return n.jsxs("div",{className:"flex items-center justify-between py-2 "+(i?"cursor-help":""),title:i,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"icon-xs text-icon-widget",children:e}),n.jsx("span",{className:"type-label text-text-secondary",children:t})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"type-data-sm "+(r?"text-accent-primary":"text-text-primary"),children:s}),a&&n.jsx("span",{className:"type-data-xs text-text-secondary ml-1",children:a})]})]})}function Yt(){const e=G(),t=X().length;if(!e||0===e.totalPaths)return null;const{totalPaths:s,pathsWithGhosts:a,observationOverrideCount:r,tracePacketsProcessed:i,pathPacketsProcessed:l,distantEdgesDiscovered:o,duplicateGroupsFound:c,duplicatePathsUnique:C,echolocationEdgesInferred:d}=e,A=s>0?((s-a)/s*100).toFixed(1):"0",m=s>0?(a/s*100).toFixed(1):"0",D=s>0?(r/s*100).toFixed(1):"0",F=i+l,B=F>0||o>0,E=c>0||d>0;return n.jsxs(he,{children:[n.jsx(xe,{title:"Path Decoder",icon:n.jsx(y,{}),largeTitle:!0,badge:t>0?`${t} hidden`:void 0}),n.jsxs(ve,{children:[n.jsx("p",{className:"type-data-xs text-text-secondary mb-3",children:"Decodes packet routes to map your mesh topology and discover hidden repeaters."}),n.jsxs("div",{className:"divide-y divide-white/5",children:[n.jsx(Kt,{icon:n.jsx(v,{className:"w-3.5 h-3.5"}),label:"Traceable",value:`${A}%`,sublabel:`of ${s.toLocaleString()} paths`,highlight:parseFloat(A)>=90,tooltip:"Percentage of packet journeys where every hop was identified. Higher = better visibility into how traffic flows through your mesh."}),n.jsx(Kt,{icon:n.jsx(j,{className:"w-3.5 h-3.5"}),label:"Hidden Nodes",value:a.toLocaleString(),sublabel:`paths (${m}%)`,highlight:a>0,tooltip:"Paths containing unidentified repeaters. These 'ghost' nodes forward traffic but haven't announced themselves via ADVERT  possibly distant or newly added nodes."}),n.jsx(Kt,{icon:n.jsx(N,{className:"w-3.5 h-3.5"}),label:"Learning Rate",value:`${D}%`,sublabel:"adapted",tooltip:"How often real traffic patterns improved our predictions over geography alone. Higher values mean the decoder is learning your mesh's actual behavior  which routes are preferred, which nodes are most active."})]}),B&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-border-subtle",children:[n.jsx("p",{className:"type-micro mb-2",children:"Beyond Line-of-Sight"}),n.jsxs("div",{className:"divide-y divide-white/5",children:[n.jsx(Kt,{icon:n.jsx(w,{className:"w-3.5 h-3.5"}),label:"Route Reports",value:F.toLocaleString(),sublabel:i>0?`(${i} TRACE)`:void 0,tooltip:"TRACE/PATH packets from distant nodes share their routing tables. This reveals connections we can't directly observe  mapping parts of the mesh we don't touch."}),n.jsx(Kt,{icon:n.jsx(k,{className:"w-3.5 h-3.5"}),label:"Remote Links",value:o.toLocaleString(),highlight:o>0,tooltip:"Node-to-node connections discovered from route reports. These links exist outside our RF range but help complete the topology picture."})]})]}),E&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-border-subtle",children:[n.jsx("p",{className:"type-micro mb-2",children:"Echo Analysis"}),n.jsxs("div",{className:"divide-y divide-white/5",children:[n.jsx(Kt,{icon:n.jsx(M,{className:"w-3.5 h-3.5"}),label:"Multi-Path Packets",value:c.toLocaleString(),sublabel:C>0?`(${C} routes)`:void 0,tooltip:"Packets received via multiple paths simultaneously. Like sonar, these 'echoes' reveal redundant routes  important for understanding mesh resilience."}),n.jsx(Kt,{icon:n.jsx(u,{className:"w-3.5 h-3.5"}),label:"Inferred Links",value:d.toLocaleString(),highlight:d>0,tooltip:"Connections discovered from echo patterns. When the same packet arrives via different forwarders nearly simultaneously, those forwarders likely hear each other."})]})]}),t>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-border-subtle cursor-help",title:"High-confidence hidden repeaters: appear in 10+ paths, have 2+ known neighbors, 30% confidence, and plausible location. View them on the Contacts map.",children:n.jsxs("p",{className:"type-label text-text-secondary",children:[n.jsx("span",{className:"text-accent-primary type-data-sm",children:t})," ","likely repeater",1!==t?"s":""," discovered from traffic patterns"]})})]})]})}function Qt(){var e,t,s,a,i,l,o,c,C,d,A,m,u,D,B,h,x;const p=K(),g=Y(),f=Q(),b=U(),y=J(),[v,j]=r.useState([]),[N,w]=r.useState(null),[k,$]=r.useState(null),[P,R]=r.useState(!0),[L,_]=r.useState(null),[z,H]=r.useState(5),[O,W]=r.useState("share"),[I,V]=r.useState("stats"),[q,G]=r.useState(!1),[X,ae]=r.useState(!1),[ne,re]=r.useState(je),[ie,le]=r.useState(.5),oe=Z[z].hours,ce=60*oe,Ce=Z[z],de=te(oe),Ae=r.useCallback(e=>{r.startTransition(()=>H(e))},[]),me=r.useMemo(()=>{var e;if(!(null==(e=null==p?void 0:p.config)?void 0:e.radio))return null;const t=p.config.radio;return{sf:t.spreading_factor??10,bw:t.bandwidth??25e4,cr:t.coding_rate??5,preamble:t.preamble_length??8}},[null==(t=null==(e=null==p?void 0:p.config)?void 0:e.radio)?void 0:t.spreading_factor,null==(a=null==(s=null==p?void 0:p.config)?void 0:s.radio)?void 0:a.bandwidth,null==(l=null==(i=null==p?void 0:p.config)?void 0:i.radio)?void 0:l.coding_rate,null==(c=null==(o=null==p?void 0:p.config)?void 0:o.radio)?void 0:c.preamble_length]);r.useEffect(()=>{!async function(){var e;_(null);try{const t=await ee(oe);t.success&&(null==(e=t.data)?void 0:e.history)&&j(t.data.history)}catch(t){_(t instanceof Error?t.message:"Failed to load chart data")}finally{R(!1)}}()},[oe]);const ue=r.useMemo(()=>72===oe?6e5:168===oe?18e5:336===oe?36e5:3e5,[oe]),De=r.useCallback(async()=>{var e;try{const t=await ee(oe);t.success&&(null==(e=t.data)?void 0:e.history)&&j(t.data.history)}catch{}},[oe]);se(De,ue,!0,!0);const Fe=r.useMemo(()=>0===v.length?{timestamps:[],values:[]}:{timestamps:v.map(e=>e.timestamp),values:v.map(e=>e.noise_floor_dbm)},[v]),Be=r.useMemo(()=>{if(v.length<10)return{anomalies:[],debug:void 0};const e=function(e,t={}){const s={...je,...t};if(e.length<10)return{anomalies:[],thresholds:we([]),totalSamples:e.length,anomalySamples:0};const a=e.map(e=>e.noise_floor_dbm),n=we(a),r=[...a].sort((e,t)=>e-t);let i,l;s.useAbsoluteThresholds?(i=s.baselineDbm,l=s.spikeDbm):(i=Ne(r,s.baselinePercentile),l=Ne(r,s.spikePercentile));const o=[...e].sort((e,t)=>e.timestamp-t.timestamp),c=[];let C=null,d=0;for(const A of o)if(A.noise_floor_dbm>i&&A.noise_floor_dbm<l)if(d++,C){const e=Math.abs(A.noise_floor_dbm-C.rollingAvg)<=s.similarityToleranceDbm,t=A.timestamp-C.endTs<=s.mergeGapSeconds;e&&t?(C.endTs=A.timestamp,C.values.push(A.noise_floor_dbm),C.timestamps.push(A.timestamp),C.rollingAvg=C.values.reduce((e,t)=>e+t,0)/C.values.length):(C.values.length>=s.minSequenceLength&&c.push(C),C={startTs:A.timestamp,endTs:A.timestamp,values:[A.noise_floor_dbm],timestamps:[A.timestamp],rollingAvg:A.noise_floor_dbm})}else C={startTs:A.timestamp,endTs:A.timestamp,values:[A.noise_floor_dbm],timestamps:[A.timestamp],rollingAvg:A.noise_floor_dbm};else C&&C.values.length>=s.minSequenceLength&&c.push(C),C=null;return C&&C.values.length>=s.minSequenceLength&&c.push(C),0===c.length?{anomalies:[],thresholds:n,totalSamples:e.length,anomalySamples:d,debug:{baselineCutoff:i,spikeCutoff:l,midBandSamples:d}}:{anomalies:c.map(e=>{const t=Math.max(...e.values),s=e.values.reduce((e,t)=>e+t,0)/e.values.length;return{startTs:e.startTs,endTs:e.endTs,peakValue:t,avgValue:s,severity:ke(s,i,l),sampleCount:e.values.length}}),thresholds:n,totalSamples:e.length,anomalySamples:d,debug:{baselineCutoff:i,spikeCutoff:l,midBandSamples:d}}}(v,ne);return{anomalies:e.anomalies,debug:e.debug}},[v,ne]),fe=Be.anomalies,ve=r.useMemo(()=>{const e=(null==p?void 0:p.neighbors)??{};return Object.fromEntries(Object.entries(e).filter(([e])=>!g.has(e)))},[null==p?void 0:p.neighbors,g]),Me=r.useMemo(()=>{const e=Date.now()/1e3-3600*oe;return Object.fromEntries(Object.entries(ve).filter(([,t])=>t.last_seen>=e))},[ve,oe]),Se=r.useMemo(()=>{const e=60*ce/de,t=Math.floor(Date.now()/1e3),s=Math.floor(t/e)*e;return{start:s-60*ce,end:s}},[ce,de]);return n.jsxs(pe,{children:[n.jsx(ge,{title:"Statistics",icon:n.jsx(S,{}),controls:n.jsx(Ee,{ranges:Z,selectedIndex:z,onSelect:Ae})}),L&&n.jsx(he,{className:"border border-accent-red/50 bg-accent-red/10",children:n.jsx("p",{className:"text-accent-red",children:L})}),q&&X&&n.jsxs(he,{className:"border border-accent-purple/30 bg-glass-surface/50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"type-label",children:"Anomaly Detection Tuning"}),n.jsxs("span",{className:"type-data-xs text-text-muted",children:["(",Ce.label,")"]})]}),n.jsx("button",{onClick:()=>re(e=>({...e,useAbsoluteThresholds:!e.useAbsoluteThresholds})),className:"type-data-xs px-2 py-1 rounded transition-colors "+(ne.useAbsoluteThresholds?"bg-accent-purple/30 text-accent-purple":"bg-glass-elevated text-text-muted hover:text-text-secondary"),children:ne.useAbsoluteThresholds?"Absolute dBm":"Percentile"})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"type-micro",children:"Baseline"}),n.jsxs("span",{className:"ml-2 type-data-sm text-status-warning",children:[(null==(d=null==(C=Be.debug)?void 0:C.baselineCutoff)?void 0:d.toFixed(1))??""," dBm"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"type-micro",children:"Spike"}),n.jsxs("span",{className:"ml-2 type-data-sm text-status-warning",children:[(null==(m=null==(A=Be.debug)?void 0:A.spikeCutoff)?void 0:m.toFixed(1))??""," dBm"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"type-micro",children:"Mid-band"}),n.jsx("span",{className:"ml-2 type-data-sm text-accent-purple",children:(null==(u=Be.debug)?void 0:u.midBandSamples)??0})]}),n.jsxs("div",{children:[n.jsx("span",{className:"type-micro",children:"Anomalies"}),n.jsx("span",{className:"ml-2 type-data-sm text-status-danger",children:fe.length})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-border-subtle space-y-4",children:[ne.useAbsoluteThresholds?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Baseline (",ne.baselineDbm," dBm)"]}),n.jsx("input",{type:"range",min:"-120",max:"-60",value:ne.baselineDbm,onChange:e=>re(t=>({...t,baselineDbm:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Spike (",ne.spikeDbm," dBm)"]}),n.jsx("input",{type:"range",min:"-100",max:"-20",value:ne.spikeDbm,onChange:e=>re(t=>({...t,spikeDbm:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Merge Gap (",ne.mergeGapSeconds,"s)"]}),n.jsx("input",{type:"range",min:"5",max:"120",step:"5",value:ne.mergeGapSeconds,onChange:e=>re(t=>({...t,mergeGapSeconds:Number(e.target.value)})),className:"w-full accent-accent-purple"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Min Sequence (",ne.minSequenceLength,")"]}),n.jsx("input",{type:"range",min:"2",max:"20",value:ne.minSequenceLength,onChange:e=>re(t=>({...t,minSequenceLength:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Similarity (",ne.similarityToleranceDbm," dBm)"]}),n.jsx("input",{type:"range",min:"1",max:"15",value:ne.similarityToleranceDbm,onChange:e=>re(t=>({...t,similarityToleranceDbm:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Opacity (",Math.round(100*ie),"%)"]}),n.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:ie,onChange:e=>le(Number(e.target.value)),className:"w-full accent-accent-purple"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Baseline (P",ne.baselinePercentile,")"]}),n.jsx("input",{type:"range",min:"1",max:"50",value:ne.baselinePercentile,onChange:e=>re(t=>({...t,baselinePercentile:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Spike (P",ne.spikePercentile,")"]}),n.jsx("input",{type:"range",min:"50",max:"99",value:ne.spikePercentile,onChange:e=>re(t=>({...t,spikePercentile:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Merge Gap (",ne.mergeGapSeconds,"s)"]}),n.jsx("input",{type:"range",min:"5",max:"120",step:"5",value:ne.mergeGapSeconds,onChange:e=>re(t=>({...t,mergeGapSeconds:Number(e.target.value)})),className:"w-full accent-accent-purple"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Min Sequence (",ne.minSequenceLength,")"]}),n.jsx("input",{type:"range",min:"2",max:"20",value:ne.minSequenceLength,onChange:e=>re(t=>({...t,minSequenceLength:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Similarity (",ne.similarityToleranceDbm," dBm)"]}),n.jsx("input",{type:"range",min:"1",max:"15",value:ne.similarityToleranceDbm,onChange:e=>re(t=>({...t,similarityToleranceDbm:Number(e.target.value)})),className:"w-full accent-accent-purple"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"type-micro block mb-1",children:["Opacity (",Math.round(100*ie),"%)"]}),n.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:ie,onChange:e=>le(Number(e.target.value)),className:"w-full accent-accent-purple"})]})]})]}),n.jsxs("div",{className:"mt-4 p-3 bg-glass-elevated rounded-lg",children:[n.jsx("div",{className:"type-micro mb-1",children:"Config output"}),n.jsxs("div",{className:"type-data-sm text-status-success",children:[ne.useAbsoluteThresholds?`useAbsoluteThresholds: true, baselineDbm: ${ne.baselineDbm}, spikeDbm: ${ne.spikeDbm}`:`useAbsoluteThresholds: false, baselinePercentile: ${ne.baselinePercentile}, spikePercentile: ${ne.spikePercentile}`,", mergeGapSeconds: ",ne.mergeGapSeconds,", minSequenceLength: ",ne.minSequenceLength,", similarityToleranceDbm: ",ne.similarityToleranceDbm]})]})]})]}),P?n.jsx(be,{template:"auto",children:n.jsx(he,{className:"text-center py-12",children:n.jsx("div",{className:"animate-pulse text-text-muted",children:"Loading statistics..."})})}):n.jsxs(n.Fragment,{children:[n.jsx(be,{template:"hero-auto",children:n.jsx(he,{isLoaded:y,skeletonType:"chart",children:y&&n.jsxs(n.Fragment,{children:[n.jsx(xe,{icon:n.jsx(F,{}),title:"Packet Analyzer",badge:Ce.label,largeTitle:!0,actions:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-end",children:["stats"===I&&n.jsx(jt,{enabled:q,onChange:G,anomalyCount:fe.length,showTuning:X,onTuningChange:ae}),n.jsx(Nt,{smoothing:I,onChange:V}),n.jsx(vt,{mode:O,onChange:W})]})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(wt,{packets:b,startTs:Se.start,endTs:Se.end,bucketCount:de,radioConfig:me??void 0,mode:O,smoothing:I,noiseFloorAnomalies:fe,showNoiseFloorOverlay:q,overlayOpacity:ie})})]})})}),n.jsxs(be,{template:"panel",children:[n.jsx(ye,{span:12,md:6,children:n.jsx(he,{isLoaded:y,skeletonType:"chart",children:y&&n.jsxs(n.Fragment,{children:[n.jsx(xe,{icon:n.jsx(E,{}),title:"Link Quality",badge:Ce.label,largeTitle:!0,actions:k?n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 type-data-xs text-text-muted",children:[n.jsxs("span",{children:[n.jsx("span",{className:"text-text-secondary tabular-nums font-medium",children:k.zeroHopCount})," nbr"]}),n.jsxs("span",{children:[n.jsx("span",{className:"text-text-secondary tabular-nums font-medium",children:k.totalCount})," obs"]}),n.jsxs("span",{children:[n.jsx("span",{className:"text-text-secondary tabular-nums font-medium",children:k.maxDistanceKm.toFixed(0)})," km"]})]}):null}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(Wt,{children:n.jsx(Rt,{neighbors:Me,quickNeighbors:f,localLat:(null==(B=null==(D=null==p?void 0:p.config)?void 0:D.repeater)?void 0:B.latitude)??0,localLon:(null==(x=null==(h=null==p?void 0:p.config)?void 0:h.repeater)?void 0:x.longitude)??0,onStatsChange:$})})})]})})}),n.jsx(ye,{span:12,md:6,children:n.jsx(he,{isLoaded:y,skeletonType:"chart",children:y&&n.jsxs(n.Fragment,{children:[n.jsx(xe,{icon:n.jsx(T,{}),title:"Network Composition",badge:Ce.label,largeTitle:!0}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(Wt,{children:n.jsx(Ot,{neighbors:Me})})})]})})})]}),n.jsxs(be,{template:"panel",children:[n.jsx(ye,{span:12,md:6,children:n.jsx(Xt,{})}),n.jsx(ye,{span:12,md:6,children:n.jsx(Yt,{})})]}),n.jsx(be,{template:"panel",children:n.jsx(ye,{span:12,children:n.jsx(he,{isLoaded:y,skeletonType:"chart",children:y&&n.jsxs(n.Fragment,{children:[n.jsx(xe,{icon:n.jsx(M,{}),title:"RF Noise Floor",largeTitle:!0,actions:N?n.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3",children:[n.jsxs("span",{className:"type-data-xs text-text-muted whitespace-nowrap",children:["min ",n.jsx("span",{className:"text-text-secondary tabular-nums",children:N.min.toFixed(0)})]}),n.jsxs("span",{className:"type-data-xs text-text-muted whitespace-nowrap",children:["avg ",n.jsx("span",{className:"text-text-secondary tabular-nums",children:N.avg.toFixed(0)})]}),n.jsxs("span",{className:"type-data-xs text-text-muted whitespace-nowrap",children:["max ",n.jsx("span",{className:"text-text-secondary tabular-nums",children:N.max.toFixed(0)})]}),n.jsx("span",{className:"type-data-xs text-text-muted",children:"dBm"})]}):n.jsx("span",{className:"type-data-xs text-text-muted",children:"dBm"})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(Wt,{children:n.jsx(_t,{timestamps:Fe.timestamps,values:Fe.values,onStatsChange:w})})})]})})})})]})]})}export{Qt as default};
