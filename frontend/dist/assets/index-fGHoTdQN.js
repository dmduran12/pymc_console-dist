const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-B_hSHZvk.js","assets/vendor-react-O8XH9yVn.js","assets/vendor-core-WoOfkQwm.js","assets/Dashboard-C5ywx-N8.js","assets/useThemeColors-DMhPrXrK.js","assets/PageLayout-BSuhSEjC.js","assets/PacketDetailModal-CubWzkW0.js","assets/SignalIndicator-BVAbF7xm.js","assets/HashBadge-aS_UIcg2.js","assets/TimeRangeSelector-9pGCd7oa.js","assets/link-scoring-CDsou435.js","assets/Grid-CIZAny_R.js","assets/Packets-u7_-mFOp.js","assets/Contacts-D1V4pxhs.js","assets/CollisionExplorerModal-Dv2EMg25.js","assets/ConfirmModal-DYznouaT.js","assets/leaflet-CIGW-MKW.css","assets/Statistics-COmFlD8o.js","assets/usePolling-UdPi_fKb.js","assets/System-NW7yJ3Pu.js","assets/Logs-aLpRKwIj.js","assets/Terminal-utPzH-5H.js","assets/Configuration-CPt5XIgJ.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{r as s,j as n,c as o,u as a,X as r,M as i,L as l,d as c,e as u,C as d,G as h,F as f,S as p,f as m,g,h as b,i as y,k as x,l as w,m as k,n as v,o as S,p as C,q as _,b as M,t as T,v as j,N as E,w as N,B as L}from"./vendor-react-O8XH9yVn.js";import{_ as P}from"./deckgl-DTsmDcfs.js";import{c as F}from"./recharts-BU7auunF.js";import"./vendor-core-WoOfkQwm.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const A={surfaces:{glass:{tint:"#252525",light:"#ffffff",dark:"#000000",reflexLight:.15,reflexDark:.8,blur:6,blurElevated:8,brightness:1,opacity:8,opacityElevated:12},card:{radius:"1.125rem",padding:"1.25rem",paddingCompact:"0.75rem"},sidebar:{tint:"rgba(113, 156, 223, 0.06)",width:"16rem",drawerWidth:"85vw"},modal:{radius:"1.125rem",backdropBlur:"8px",backdropColor:"rgba(0, 0, 0, 0.6)"}},colors:{bg:{body:"#171717",surface:"#252525",elevated:"#333233",subtle:"#3F3F3F"},border:{subtle:"#4B4B4B",strong:"#616161"},text:{primary:"#E1E1E1",secondary:"#BFBFBF",muted:"#727272",inverse:"#171717"},accent:{primary:"#719CDF",secondary:"#DFBC72",tertiary:"#6FBCBD",success:"#719872",danger:"#E12672"},signal:{excellent:"#00FF00",good:"#8CE619",fair:"#FFD900",poor:"#FF8C26",critical:"#FF3333",unknown:"#616161"},status:{success:"#719872",warning:"#DFBC72",danger:"#E12672",info:"#6FBCBD",muted:"#616161"},chart:{c1:"#719CDF",c2:"#0074BE",c3:"#6FBCBD",c4:"#DFBC72",c5:"#719872",c6:"#E12672",c7:"#E17899",c8:"#999ABD",grid:"rgba(255, 255, 255, 0.06)",axis:"rgba(255, 255, 255, 0.4)",cursor:"rgba(255, 255, 255, 0.2)"},metric:{received:"#719872",forwarded:"#0074BE",transmitted:"#DFBC72",dropped:"#E12672"},map:{nodeFill:"#F5F5F0",nodeStroke:"#4A5568",hub:"#8B7BAD",local:"#FBBF24",neighbor:"#FBBF24",mobile:"#F97316",room:"#E17899",edge:"#4B4B4B",edgeHover:"#6FBCBD"}},typography:{font:{display:"'Poppins', system-ui, sans-serif",mono:"'JetBrains Mono', 'SF Mono', Monaco, monospace"},size:{xs:"0.64rem",sm:"0.8rem",base:"1rem",md:"1.125rem",lg:"1.25rem",xl:"1.563rem",xxl:"1.953rem",hero:"3.052rem"},weight:{normal:400,medium:500,semibold:600,bold:700},leading:{tight:1.1,snug:1.25,normal:1.5}},spacing:{space:{gap:"1.5rem",gapMobile:"0.75rem",page:"1.5rem",pageMobile:"1rem",section:"2rem"},radius:{sm:"0.5rem",md:"0.875rem",lg:"1.125rem",xl:"1.5rem",pill:"9999px"}},motion:{fast:"0.1s",normal:"0.15s",slow:"0.4s",easing:"ease-out"}};function D(e){const t=e.replace("#","");if(6!==t.length&&3!==t.length)return e;let s,n,o;return 3===t.length?(s=parseInt(t[0]+t[0],16)/255,n=parseInt(t[1]+t[1],16)/255,o=parseInt(t[2]+t[2],16)/255):(s=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255,o=parseInt(t.slice(4,6),16)/255),`color(display-p3 ${s.toFixed(3)} ${n.toFixed(3)} ${o.toFixed(3)})`}function I(){return"undefined"!=typeof window&&CSS.supports("color","color(display-p3 1 1 1)")}function R(e){return I()?D(e):e}function z(e,t){const s={...e};for(const n of Object.keys(t)){const o=t[n],a=e[n];void 0!==o&&("object"!=typeof o||null===o||Array.isArray(o)||"object"!=typeof a||null===a||Array.isArray(a)?s[n]=o:s[n]=z(a,o))}return s}function O(e){return{meta:e.meta,display:e.display,surfaces:e.surfaces?z(A.surfaces,e.surfaces):A.surfaces,colors:e.colors?z(A.colors,e.colors):A.colors,typography:e.typography?z(A.typography,e.typography):A.typography,spacing:e.spacing?z(A.spacing,e.spacing):A.spacing,motion:e.motion?z(A.motion,e.motion):A.motion}}function B(e){const t=e.replace("#","");return 6===t.length?`${parseInt(t.slice(0,2),16)}, ${parseInt(t.slice(2,4),16)}, ${parseInt(t.slice(4,6),16)}`:"255, 255, 255"}function $(e){return{id:e.meta.id,colorScheme:{name:e.meta.name,dataTheme:e.meta.dataTheme,previewColor:e.meta.previewColor},background:{src:e.meta.backgroundImage,suggestedBrightness:e.meta.backgroundBrightness},display:{font:e.display.font,color:e.display.color,size:e.display.size,paletteColors:e.display.palette}}}const H=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#B39DF3",backgroundImage:"/assets/sand.jpg",backgroundBrightness:80,isDark:!0},display:{font:"'Rubik Mono One', monospace",color:"#4A4A52",size:.8,palette:[["#B49DFF","#F9D26F","#71F8E5","#39D98A","#FF5C7A"],["#4CFFB5","#FF8A5C","#A78BFA","#60A5FA","#F472B6"]]},surfaces:{glass:{tint:"#252525",blur:6,blurElevated:8},sidebar:{tint:"rgba(113, 156, 223, 0.06)"}}}),W=H;$(H);const U=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#fabd2f",backgroundImage:"/assets/magma.webp",backgroundBrightness:50,isDark:!0},display:{font:"'Jacquard 12', serif",color:"#fe8019",size:1.75,palette:[["#fabd2f","#fb4934","#8ec07c","#b8bb26","#d3869b"],["#fe8019","#83a598","#d65d0e","#928374","#ebdbb2"]]},surfaces:{glass:{tint:"#282828"},sidebar:{tint:"rgba(250, 189, 47, 0.06)"}},colors:{accent:{primary:"#fabd2f",secondary:"#fb4934",tertiary:"#8ec07c",success:"#b8bb26",danger:"#fb4934"},signal:{excellent:"#b8bb26",good:"#8ec07c",fair:"#fabd2f",poor:"#fe8019",critical:"#fb4934",unknown:"#928374"},status:{success:"#b8bb26",warning:"#fabd2f",danger:"#fb4934",info:"#83a598",muted:"#928374"},chart:{c1:"#fabd2f",c2:"#fe8019",c3:"#fb4934",c4:"#d3869b",c5:"#b8bb26",c6:"#8ec07c",c7:"#83a598",c8:"#d65d0e",grid:"rgba(251, 241, 199, 0.06)",axis:"rgba(251, 241, 199, 0.4)",cursor:"rgba(251, 241, 199, 0.2)"},metric:{received:"#b8bb26",forwarded:"#83a598",transmitted:"#fabd2f",dropped:"#fb4934"},map:{nodeFill:"#fbf1c7",nodeStroke:"#504945",hub:"#b16286",local:"#fabd2f",neighbor:"#fabd2f",mobile:"#fe8019",room:"#d3869b",edge:"#665c54",edgeHover:"#8ec07c"}}}),q=U;$(U);const G=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#83a598",backgroundImage:"/assets/water.webp",backgroundBrightness:40,isDark:!0},display:{font:"'Cantora One', sans-serif",color:"#83a598",size:1.25,palette:[["#83a598","#a89984","#8ec07c","#d79921","#b16286"],["#fe8019","#cc241d","#7c6f64","#bdae93","#ebdbb2"]]},surfaces:{glass:{tint:"#1e1e1e"},sidebar:{tint:"rgba(131, 165, 152, 0.06)"}},colors:{accent:{primary:"#83a598",secondary:"#a89984",tertiary:"#8ec07c",success:"#8ec07c",danger:"#cc241d"},signal:{excellent:"#8ec07c",good:"#b8bb26",fair:"#d79921",poor:"#fe8019",critical:"#cc241d",unknown:"#7c6f64"},status:{success:"#8ec07c",warning:"#d79921",danger:"#cc241d",info:"#83a598",muted:"#7c6f64"},chart:{c1:"#83a598",c2:"#8ec07c",c3:"#d79921",c4:"#b16286",c5:"#fe8019",c6:"#cc241d",c7:"#a89984",c8:"#7c6f64",grid:"rgba(213, 196, 161, 0.06)",axis:"rgba(213, 196, 161, 0.4)",cursor:"rgba(213, 196, 161, 0.2)"},metric:{received:"#8ec07c",forwarded:"#83a598",transmitted:"#d79921",dropped:"#cc241d"},map:{nodeFill:"#ebdbb2",nodeStroke:"#504945",hub:"#b16286",local:"#d79921",neighbor:"#d79921",mobile:"#fe8019",room:"#b16286",edge:"#504945",edgeHover:"#83a598"}}}),J=G;$(G);const Y=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#33859d",backgroundImage:"/assets/stars.jpg",backgroundBrightness:100,isDark:!0},display:{font:"'IBM Plex Mono', monospace",color:"#c23127",size:1.25,palette:[["#33859d","#edb54b","#26a98b","#c23127","#888ca6"],["#195465","#d26939","#99d1ce","#4e5165","#0c1014"]]},surfaces:{glass:{tint:"#0a0e14",blur:1,blurElevated:2},sidebar:{tint:"rgba(51, 133, 157, 0.06)"}},colors:{accent:{primary:"#33859d",secondary:"#edb54b",tertiary:"#26a98b",success:"#26a98b",danger:"#c33027"},signal:{excellent:"#26a98b",good:"#7ec07c",fair:"#edb54b",poor:"#d26939",critical:"#c33027",unknown:"#195465"},status:{success:"#26a98b",warning:"#edb54b",danger:"#c33027",info:"#599caa",muted:"#195465"},chart:{c1:"#33859d",c2:"#edb54b",c3:"#26a98b",c4:"#599caa",c5:"#d26939",c6:"#c33027",c7:"#888ba5",c8:"#195465",grid:"rgba(153, 209, 206, 0.06)",axis:"rgba(153, 209, 206, 0.4)",cursor:"rgba(153, 209, 206, 0.2)"},metric:{received:"#26a98b",forwarded:"#33859d",transmitted:"#edb54b",dropped:"#c33027"},map:{nodeFill:"#edf5f4",nodeStroke:"#195465",hub:"#888ba5",local:"#edb54b",neighbor:"#edb54b",mobile:"#d26939",room:"#888ba5",edge:"#245361",edgeHover:"#26a98b"}}}),V=Y;$(Y);const X=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#9ed072",backgroundImage:"/assets/ribbons.webp",backgroundBrightness:75,isDark:!0},display:{font:"'Instrument Serif', serif",color:"#E2E2E3",size:1.4,palette:[["#9ed072","#fc5d7c","#76cce0","#e7c664","#b39df3"],["#f39660","#7f8490","#e2e2e3","#55575e","#2c2e34"]]},surfaces:{glass:{tint:"#23212d"},sidebar:{tint:"rgba(158, 208, 114, 0.06)"}},colors:{accent:{primary:"#9ed072",secondary:"#e7c664",tertiary:"#76cce0",success:"#9ed072",danger:"#fc5d7c"},signal:{excellent:"#9ed072",good:"#c5d93d",fair:"#e7c664",poor:"#f39660",critical:"#fc5d7c",unknown:"#7f8490"},status:{success:"#9ed072",warning:"#e7c664",danger:"#fc5d7c",info:"#76cce0",muted:"#7f8490"},chart:{c1:"#9ed072",c2:"#fc5d7c",c3:"#e7c664",c4:"#76cce0",c5:"#b39df3",c6:"#f39660",c7:"#7f8490",c8:"#e2e2e3",grid:"rgba(226, 226, 227, 0.06)",axis:"rgba(226, 226, 227, 0.4)",cursor:"rgba(226, 226, 227, 0.2)"},metric:{received:"#9ed072",forwarded:"#76cce0",transmitted:"#e7c664",dropped:"#fc5d7c"},map:{nodeFill:"#e2e2e3",nodeStroke:"#33353f",hub:"#b39df3",local:"#e7c664",neighbor:"#e7c664",mobile:"#f39660",room:"#fc5d7c",edge:"#444751",edgeHover:"#76cce0"}}}),K=X;$(X);const Q=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#7E9CD8",backgroundImage:"/assets/folds.webp",backgroundBrightness:50,isDark:!0},display:{font:"'Inter', sans-serif",color:"#7E9CD8",size:1.25,palette:[["#7E9CD8","#E46876","#7AA89F","#DCA561","#957FB8"],["#7FB4CA","#D27E99","#98BB6C","#727169","#1F1F28"]]},surfaces:{glass:{tint:"#1F1F28"},sidebar:{tint:"rgba(126, 156, 216, 0.06)"}},colors:{accent:{primary:"#7E9CD8",secondary:"#E6C384",tertiary:"#7FB4CA",success:"#98BB6C",danger:"#E46876"},signal:{excellent:"#98BB6C",good:"#B8CC5C",fair:"#E6C384",poor:"#FFA066",critical:"#E46876",unknown:"#54546D"},status:{success:"#98BB6C",warning:"#E6C384",danger:"#E46876",info:"#7FB4CA",muted:"#727169"},chart:{c1:"#7E9CD8",c2:"#E6C384",c3:"#98BB6C",c4:"#957FB8",c5:"#7FB4CA",c6:"#E46876",c7:"#FFA066",c8:"#D27E99",grid:"rgba(220, 215, 186, 0.06)",axis:"rgba(220, 215, 186, 0.4)",cursor:"rgba(220, 215, 186, 0.2)"},metric:{received:"#98BB6C",forwarded:"#7E9CD8",transmitted:"#E6C384",dropped:"#E46876"},map:{nodeFill:"#DCD7BA",nodeStroke:"#363646",hub:"#957FB8",local:"#E6C384",neighbor:"#E6C384",mobile:"#FFA066",room:"#D27E99",edge:"#54546D",edgeHover:"#7AA89F"}}}),Z=Q;$(Q);const ee=O({meta:{id:"",name:"",dataTheme:"",previewColor:"#58b99d",backgroundImage:"",backgroundBrightness:100,isDark:!0},display:{font:"'Source Code Pro', monospace",color:"#58b99d",size:1,palette:[["#58b99d","#4997ec","#60ce41","#e67b2f","#da3529"],["#242627","#818c8d","#925cb1","#5face4","#fcfcfc"]]},typography:{font:{display:"'Noto Sans', system-ui, sans-serif",mono:"'Source Code Pro', 'SF Mono', monospace"},weight:{normal:400,medium:500,semibold:600,bold:700}},surfaces:{glass:{tint:"#242627",light:"#4997ec",dark:"#000000",reflexLight:0,reflexDark:0,blur:0,blurElevated:0,brightness:1,opacity:95,opacityElevated:98},sidebar:{tint:"rgba(88, 185, 157, 0.04)"},card:{radius:"4px"},modal:{radius:"6px"}},colors:{bg:{body:"#1a1c1d",surface:"#242627",elevated:"#2e3133",subtle:"#383b3d"},border:{subtle:"#383b3d",strong:"#4a4e50"},text:{primary:"#fcfcfc",secondary:"#c8c8c8",muted:"#818c8d",inverse:"#242627"},accent:{primary:"#58b99d",secondary:"#e67b2f",tertiary:"#4997ec",success:"#60ce41",danger:"#da3529"},signal:{excellent:"#60ce41",good:"#67d99f",fair:"#e67b2f",poor:"#b14434",critical:"#da3529",unknown:"#818c8d"},status:{success:"#60ce41",warning:"#e67b2f",danger:"#da3529",info:"#58b99d",muted:"#818c8d"},chart:{c1:"#58b99d",c2:"#4997ec",c3:"#60ce41",c4:"#e67b2f",c5:"#da3529",c6:"#925cb1",c7:"#67d99f",c8:"#818c8d",grid:"rgba(252, 252, 252, 0.06)",axis:"rgba(252, 252, 252, 0.3)",cursor:"rgba(88, 185, 157, 0.2)"},metric:{received:"#58b99d",forwarded:"#4997ec",transmitted:"#e67b2f",dropped:"#da3529"},map:{nodeFill:"#fcfcfc",nodeStroke:"#4a4e50",hub:"#925cb1",local:"#58b99d",neighbor:"#58b99d",mobile:"#e67b2f",room:"#58b99d",edge:"#4a4e50",edgeHover:"#58b99d"}}}),te=ee;$(ee);const se={BLKSAND:W,Magma:q,Waves:J,Stars:V,Ribbon:K,Folds:Z,Breeze:te};function ne(e,t){const s=e.toLowerCase();return{...t,meta:{...t.meta,id:s,name:e,dataTheme:s}}}const oe=Object.fromEntries(Object.entries(se).map(([e,t])=>[e,ne(e,t)])),ae=Object.fromEntries(Object.entries(oe).map(([e,t])=>[e,$(t)])),re=Object.values(oe);function ie(e){return re.find(t=>t.meta.id===e)}new Map(Object.entries(oe));const le=Object.values(ae);new Map(Object.entries(ae));const ce=Object.entries(ae).map(([e,t])=>function(e,t){return{id:e.id,name:e.colorScheme.name,displayName:t,colorScheme:e.id,backgroundImage:e.background.src,paletteColors:e.display.paletteColors,displayFont:e.display.font,displayColor:e.display.color,displaySize:e.display.size}}(t,e)),ue=le.map(function(e){return{id:e.id,name:e.colorScheme.name,dataTheme:e.colorScheme.dataTheme,previewColor:e.colorScheme.previewColor}}),de=le.map(function(e){return{id:e.id,src:e.background.src,suggestedScheme:e.id,suggestedBrightness:e.background.suggestedBrightness}}),he=oe.Waves;ae.Waves;const fe=he.meta.id,pe=he.meta.backgroundImage,me=he.meta.backgroundBrightness,ge=ue,be=de,ye=ce,xe={colorScheme:fe,backgroundImage:pe,brightness:me},we="pymc-color-scheme",ke="pymc-background-image",ve="pymc-bg-brightness",Se="pymc-background";function Ce(e){(new Image).src=e}const _e={50:.97,100:.92,200:.84,300:.73,400:.62,500:.5,600:.4,700:.32,800:.24,900:.16},Me=[50,100,200,300,400,500,600,700,800,900],Te=["red","orange","yellow","green","aqua","blue","purple"];function je(e,t,s){const n=e=>Math.round(Math.max(0,Math.min(255,e))).toString(16).padStart(2,"0");return`#${n(e)}${n(t)}${n(s)}`}function Ee(e){const t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ne(e){const t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.round(255*t)}function Le(e,t,s){const n=s*(Math.PI/180),o=t*Math.cos(n),a=t*Math.sin(n),r=e+.3963377774*o+.2158037573*a,i=e-.1055613458*o-.0638541728*a,l=e-.0894841775*o-1.291485548*a,c=r*r*r,u=i*i*i,d=l*l*l,h=-1.2684380046*c+2.6097574011*u-.3413193965*d,f=-.0041960863*c-.7034186147*u+1.707614701*d;return[Ne(4.0767416621*c-3.3077115913*u+.2309699292*d),Ne(h),Ne(f)]}function Pe(e){const[t,s,n]=function(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e),[,o,a]=function(e,t,s){const n=Ee(e),o=Ee(t),a=Ee(s),r=.4122214708*n+.5363325363*o+.0514459929*a,i=.2119034982*n+.6806995451*o+.1073969566*a,l=.0883024619*n+.2817188376*o+.6299787005*a,c=Math.cbrt(r),u=Math.cbrt(i),d=Math.cbrt(l),h=.2104542553*c+.793617785*u-.0040720468*d,f=1.9779984951*c-2.428592205*u+.4505937099*d,p=.0259040371*c+.7827717662*u-.808675766*d,m=Math.sqrt(f*f+p*p);let g=Math.atan2(p,f)*(180/Math.PI);return g<0&&(g+=360),[h,m,g]}(t,s,n),r={};for(const i of Me){const e=_e[i],t=o*(1-.3*Math.abs(e-.5)),[s,n,l]=Le(e,t,a);r[i]=je(s,n,l)}return r}function Fe(e){return"undefined"==typeof window?"":getComputedStyle(document.documentElement).getPropertyValue(e).trim()}function Ae(e,t){"undefined"!=typeof document&&document.documentElement.style.setProperty(e,t)}const De="u-off",Ie="u-label",Re="width",ze="height",Oe="top",Be="bottom",$e="left",He="right",We="#000",Ue=We+"0",qe="mousemove",Ge="mousedown",Je="mouseup",Ye="mouseenter",Ve="mouseleave",Xe="dblclick",Ke="change",Qe="dppxchange",Ze="--",et="undefined"!=typeof window,tt=et?document:null,st=et?window:null,nt=et?navigator:null;let ot,at;function rt(e,t){if(null!=t){let s=e.classList;!s.contains(t)&&s.add(t)}}function it(e,t){let s=e.classList;s.contains(t)&&s.remove(t)}function lt(e,t,s){e.style[t]=s+"px"}function ct(e,t,s,n){let o=tt.createElement(e);return null!=t&&rt(o,t),null!=s&&s.insertBefore(o,n),o}function ut(e,t){return ct("div",e,t)}const dt=new WeakMap;function ht(e,t,s,n,o){let a="translate("+t+"px,"+s+"px)";a!=dt.get(e)&&(e.style.transform=a,dt.set(e,a),t<0||s<0||t>n||s>o?rt(e,De):it(e,De))}const ft=new WeakMap;function pt(e,t,s){let n=t+s;n!=ft.get(e)&&(ft.set(e,n),e.style.background=t,e.style.borderColor=s)}const mt=new WeakMap;function gt(e,t,s,n){let o=t+""+s;o!=mt.get(e)&&(mt.set(e,o),e.style.height=s+"px",e.style.width=t+"px",e.style.marginLeft=n?-t/2+"px":0,e.style.marginTop=n?-s/2+"px":0)}const bt={passive:!0},yt={...bt,capture:!0};function xt(e,t,s,n){t.addEventListener(e,s,n?yt:bt)}function wt(e,t,s,n){t.removeEventListener(e,s,bt)}function kt(e,t,s,n){let o;s=s||0;let a=(n=n||t.length-1)<=2147483647;for(;n-s>1;)o=a?s+n>>1:Bt((s+n)/2),t[o]<e?s=o:n=o;return e-t[s]<=t[n]-e?s:n}function vt(e){return(t,s,n)=>{let o=-1,a=-1;for(let r=s;r<=n;r++)if(e(t[r])){o=r;break}for(let r=n;r>=s;r--)if(e(t[r])){a=r;break}return[o,a]}}et&&function e(){let t=devicePixelRatio;ot!=t&&(ot=t,at&&wt(Ke,at,e),at=matchMedia(`(min-resolution: ${ot-.001}dppx) and (max-resolution: ${ot+.001}dppx)`),xt(Ke,at,e),st.dispatchEvent(new CustomEvent(Qe)))}();const St=e=>null!=e,Ct=e=>null!=e&&e>0,_t=vt(St),Mt=vt(Ct);function Tt(e,t,s,n){let o=Gt(e),a=Gt(t);e==t&&(-1==o?(e*=s,t/=s):(e/=s,t*=s));let r=10==s?Jt:Yt,i=1==a?Ht:Bt,l=(1==o?Bt:Ht)(r(Ot(e))),c=i(r(Ot(t))),u=qt(s,l),d=qt(s,c);return 10==s&&(l<0&&(u=ds(u,-l)),c<0&&(d=ds(d,-c))),n||2==s?(e=u*o,t=d*a):(e=us(e,u),t=cs(t,d)),[e,t]}function jt(e,t,s,n){let o=Tt(e,t,s,n);return 0==e&&(o[0]=0),0==t&&(o[1]=0),o}const Et={mode:3,pad:.1},Nt={pad:0,soft:null,mode:0},Lt={min:Nt,max:Nt};function Pt(e,t,s,n){return ks(s)?At(e,t,s):(Nt.pad=s,Nt.soft=n?0:null,Nt.mode=n?3:0,At(e,t,Lt))}function Ft(e,t){return null==e?t:e}function At(e,t,s){let n=s.min,o=s.max,a=Ft(n.pad,0),r=Ft(o.pad,0),i=Ft(n.hard,-Xt),l=Ft(o.hard,Xt),c=Ft(n.soft,Xt),u=Ft(o.soft,-Xt),d=Ft(n.mode,0),h=Ft(o.mode,0),f=t-e,p=Jt(f),m=Ut(Ot(e),Ot(t)),g=Jt(m),b=Ot(g-p);(f<1e-24||b>10)&&(f=0,0!=e&&0!=t||(f=1e-24,2==d&&c!=Xt&&(a=0),2==h&&u!=-Xt&&(r=0)));let y=f||m||1e3,x=Jt(y),w=qt(10,Bt(x)),k=ds(us(e-y*(0==f?0==e?.1:1:a),w/10),24),v=e>=c&&(1==d||3==d&&k<=c||2==d&&k>=c)?c:Xt,S=Ut(i,k<v&&e>=v?v:Wt(v,k)),C=ds(cs(t+y*(0==f?0==t?.1:1:r),w/10),24),_=t<=u&&(1==h||3==h&&C>=u||2==h&&C<=u)?u:-Xt,M=Wt(l,C>_&&t<=_?_:Ut(_,C));return S==M&&0==S&&(M=100),[S,M]}const Dt=new Intl.NumberFormat(et?nt.language:"en-US"),It=e=>Dt.format(e),Rt=Math,zt=Rt.PI,Ot=Rt.abs,Bt=Rt.floor,$t=Rt.round,Ht=Rt.ceil,Wt=Rt.min,Ut=Rt.max,qt=Rt.pow,Gt=Rt.sign,Jt=Rt.log10,Yt=Rt.log2,Vt=(e,t=1)=>Rt.asinh(e/t),Xt=1/0;function Kt(e){return 1+(0|Jt((e^e>>31)-(e>>31)))}function Qt(e,t,s){return Wt(Ut(e,t),s)}function Zt(e){return"function"==typeof e}function es(e){return Zt(e)?e:()=>e}const ts=e=>e,ss=(e,t)=>t,ns=e=>null,os=e=>!0,as=(e,t)=>e==t,rs=/\.\d*?(?=9{6,}|0{6,})/gm,is=e=>{if(xs(e)||hs.has(e))return e;const t=`${e}`,s=t.match(rs);if(null==s)return e;let n=s[0].length-1;if(-1!=t.indexOf("e-")){let[e,s]=t.split("e");return+`${is(e)}e${s}`}return ds(e,n)};function ls(e,t){return is(ds(is(e/t))*t)}function cs(e,t){return is(Ht(is(e/t))*t)}function us(e,t){return is(Bt(is(e/t))*t)}function ds(e,t=0){if(xs(e))return e;let s=10**t,n=e*s*(1+Number.EPSILON);return $t(n)/s}const hs=new Map;function fs(e){return((""+e).split(".")[1]||"").length}function ps(e,t,s,n){let o=[],a=n.map(fs);for(let r=t;r<s;r++){let t=Ot(r),s=ds(qt(e,r),t);for(let i=0;i<n.length;i++){let l=10==e?+`${n[i]}e${r}`:n[i]*s,c=(r>=0?0:t)+(r>=a[i]?0:a[i]),u=10==e?l:ds(l,c);o.push(u),hs.set(u,c)}}return o}const ms={},gs=[],bs=[null,null],ys=Array.isArray,xs=Number.isInteger;function ws(e){return"string"==typeof e}function ks(e){let t=!1;if(null!=e){let s=e.constructor;t=null==s||s==Object}return t}function vs(e){return null!=e&&"object"==typeof e}const Ss=Object.getPrototypeOf(Uint8Array),Cs="__proto__";function _s(e,t=ks){let s;if(ys(e)){let n=e.find(e=>null!=e);if(ys(n)||t(n)){s=Array(e.length);for(let n=0;n<e.length;n++)s[n]=_s(e[n],t)}else s=e.slice()}else if(e instanceof Ss)s=e.slice();else if(t(e)){s={};for(let n in e)n!=Cs&&(s[n]=_s(e[n],t))}else s=e;return s}function Ms(e){let t=arguments;for(let s=1;s<t.length;s++){let n=t[s];for(let t in n)t!=Cs&&(ks(e[t])?Ms(e[t],_s(n[t])):e[t]=_s(n[t]))}return e}function Ts(e,t,s){for(let n,o=0,a=-1;o<t.length;o++){let r=t[o];if(r>a){for(n=r-1;n>=0&&null==e[n];)e[n--]=null;for(n=r+1;n<s&&null==e[n];)e[a=n++]=null}}}const js="undefined"==typeof queueMicrotask?e=>Promise.resolve().then(e):queueMicrotask,Es=["January","February","March","April","May","June","July","August","September","October","November","December"],Ns=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ls(e){return e.slice(0,3)}const Ps=Ns.map(Ls),Fs=Es.map(Ls),As={MMMM:Es,MMM:Fs,WWWW:Ns,WWW:Ps};function Ds(e){return(e<10?"0":"")+e}const Is={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>Ds(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Ds(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>Ds(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return 0==t?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Ds(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Ds(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>{return((t=e.getMilliseconds())<10?"00":t<100?"0":"")+t;var t}};function Rs(e,t){t=t||As;let s,n=[],o=/\{([a-z]+)\}|[^{]+/gi;for(;s=o.exec(e);)n.push("{"==s[0][0]?Is[s[1]]:s[0]);return e=>{let s="";for(let o=0;o<n.length;o++)s+="string"==typeof n[o]?n[o]:n[o](e,t);return s}}const zs=(new Intl.DateTimeFormat).resolvedOptions().timeZone,Os=e=>e%1==0,Bs=[1,2,2.5,5],$s=ps(10,-32,0,Bs),Hs=ps(10,0,32,Bs),Ws=Hs.filter(Os),Us=$s.concat(Hs),qs="{YYYY}",Gs="\n"+qs,Js="{M}/{D}",Ys="\n"+Js,Vs=Ys+"/{YY}",Xs="{aa}",Ks="{h}:{mm}"+Xs,Qs="\n"+Ks,Zs=":{ss}",en=null;function tn(e){let t=1e3*e,s=60*t,n=60*s,o=24*n,a=30*o,r=365*o;return[(1==e?ps(10,0,3,Bs).filter(Os):ps(10,-3,0,Bs)).concat([t,5*t,10*t,15*t,30*t,s,5*s,10*s,15*s,30*s,n,2*n,3*n,4*n,6*n,8*n,12*n,o,2*o,3*o,4*o,5*o,6*o,7*o,8*o,9*o,10*o,15*o,a,2*a,3*a,4*a,6*a,r,2*r,5*r,10*r,25*r,50*r,100*r]),[[r,qs,en,en,en,en,en,en,1],[28*o,"{MMM}",Gs,en,en,en,en,en,1],[o,Js,Gs,en,en,en,en,en,1],[n,"{h}"+Xs,Vs,en,Ys,en,en,en,1],[s,Ks,Vs,en,Ys,en,en,en,1],[t,Zs,Vs+" "+Ks,en,Ys+" "+Ks,en,Qs,en,1],[e,Zs+".{fff}",Vs+" "+Ks,en,Ys+" "+Ks,en,Qs,en,1]],function(t){return(i,l,c,u,d,h)=>{let f=[],p=d>=r,m=d>=a&&d<r,g=t(c),b=ds(g*e,3),y=dn(g.getFullYear(),p?0:g.getMonth(),m||p?1:g.getDate()),x=ds(y*e,3);if(m||p){let s=m?d/a:0,n=p?d/r:0,o=b==x?b:ds(dn(y.getFullYear()+n,y.getMonth()+s,1)*e,3),i=new Date($t(o/e)),l=i.getFullYear(),c=i.getMonth();for(let a=0;o<=u;a++){let r=dn(l+n*a,c+s*a,1),i=r-t(ds(r*e,3));o=ds((+r+i)*e,3),o<=u&&f.push(o)}}else{let a=d>=o?o:d,r=x+(Bt(c)-Bt(b))+cs(b-x,a);f.push(r);let p=t(r),m=p.getHours()+p.getMinutes()/s+p.getSeconds()/n,g=d/n,y=h/i.axes[l]._space;for(;r=ds(r+d,1==e?0:3),!(r>u);)if(g>1){let e=Bt(ds(m+g,6))%24,s=t(r).getHours()-e;s>1&&(s=-1),r-=s*n,m=(m+g)%24,ds((r-f[f.length-1])/d,3)*y>=.7&&f.push(r)}else f.push(r)}return f}}]}const[sn,nn,on]=tn(1),[an,rn,ln]=tn(.001);function cn(e,t){return e.map(e=>e.map((s,n)=>0==n||8==n||null==s?s:t(1==n||0==e[8]?s:e[1]+s)))}function un(e,t){return(s,n,o,a,r)=>{let i,l,c,u,d,h,f=t.find(e=>r>=e[0])||t[t.length-1];return n.map(t=>{let s=e(t),n=s.getFullYear(),o=s.getMonth(),a=s.getDate(),r=s.getHours(),p=s.getMinutes(),m=s.getSeconds(),g=n!=i&&f[2]||o!=l&&f[3]||a!=c&&f[4]||r!=u&&f[5]||p!=d&&f[6]||m!=h&&f[7]||f[1];return i=n,l=o,c=a,u=r,d=p,h=m,g(s)})}}function dn(e,t,s){return new Date(e,t,s)}function hn(e,t){return t(e)}function fn(e,t){return(s,n,o,a)=>null==a?Ze:t(e(n))}ps(2,-53,53,[1]);const pn={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(e,t){let s=e.series[t];return s.width?s.stroke(e,t):s.points.width?s.points.stroke(e,t):null},fill:function(e,t){return e.series[t].fill(e,t)},dash:"solid"},idx:null,idxs:null,values:[]},mn=[0,0];function gn(e,t,s,n=!0){return e=>{0==e.button&&(!n||e.target==t)&&s(e)}}function bn(e,t,s,n=!0){return e=>{(!n||e.target==t)&&s(e)}}const yn={show:!0,x:!0,y:!0,lock:!1,move:function(e,t,s){return mn[0]=t,mn[1]=s,mn},points:{one:!1,show:function(e,t){let s=e.cursor.points,n=ut(),o=s.size(e,t);lt(n,Re,o),lt(n,ze,o);let a=o/-2;lt(n,"marginLeft",a),lt(n,"marginTop",a);let r=s.width(e,t,o);return r&&lt(n,"borderWidth",r),n},size:function(e,t){return e.series[t].points.size},width:0,stroke:function(e,t){let s=e.series[t].points;return s._stroke||s._fill},fill:function(e,t){let s=e.series[t].points;return s._fill||s._stroke}},bind:{mousedown:gn,mouseup:gn,click:gn,dblclick:gn,mousemove:bn,mouseleave:bn,mouseenter:bn},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,t,s,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},xn={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},wn=Ms({},xn,{filter:ss}),kn=Ms({},wn,{size:10}),vn=Ms({},xn,{show:!1}),Sn='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Cn="bold "+Sn,_n={show:!0,scale:"x",stroke:We,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Cn,side:2,grid:wn,ticks:kn,border:vn,font:Sn,lineGap:1.5,rotate:0},Mn={show:!0,scale:"x",auto:!1,sorted:1,min:Xt,max:-Xt,idxs:[]};function Tn(e,t,s,n,o){return t.map(e=>null==e?"":It(e))}function jn(e,t,s,n,o,a,r){let i=[],l=hs.get(o)||0;for(let c=s=r?s:ds(cs(s,o),l);c<=n;c=ds(c+o,l))i.push(Object.is(c,-0)?0:c);return i}function En(e,t,s,n,o,a,r){const i=[],l=e.scales[e.axes[t].scale].log,c=Bt((10==l?Jt:Yt)(s));o=qt(l,c),10==l&&(o=Us[kt(o,Us)]);let u=s,d=o*l;10==l&&(d=Us[kt(d,Us)]);do{i.push(u),u+=o,10!=l||hs.has(u)||(u=ds(u,hs.get(o))),u>=d&&(d=(o=u)*l,10==l&&(d=Us[kt(d,Us)]))}while(u<=n);return i}function Nn(e,t,s,n,o,a,r){let i=e.scales[e.axes[t].scale].asinh,l=n>i?En(e,t,Ut(i,s),n,o):[i],c=n>=0&&s<=0?[0]:[];return(s<-i?En(e,t,Ut(i,-n),-s,o):[i]).reverse().map(e=>-e).concat(c,l)}const Ln=/./,Pn=/[12357]/,Fn=/[125]/,An=/1/,Dn=(e,t,s,n)=>e.map((e,o)=>4==t&&0==e||o%n==0&&s.test(e.toExponential()[e<0?1:0])?e:null);function In(e,t,s,n,o){let a=e.axes[s],r=a.scale,i=e.scales[r],l=e.valToPos,c=a._space,u=l(10,r),d=l(9,r)-u>=c?Ln:l(7,r)-u>=c?Pn:l(5,r)-u>=c?Fn:An;if(d==An){let e=Ot(l(1,r)-u);if(e<c)return Dn(t.slice().reverse(),i.distr,d,Ht(c/e)).reverse()}return Dn(t,i.distr,d,1)}function Rn(e,t,s,n,o){let a=e.axes[s],r=a.scale,i=a._space,l=e.valToPos,c=Ot(l(1,r)-l(2,r));return c<i?Dn(t.slice().reverse(),3,Ln,Ht(i/c)).reverse():t}function zn(e,t,s,n){return null==n?Ze:null==t?"":It(t)}const On={show:!0,scale:"y",stroke:We,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Cn,side:3,grid:wn,ticks:kn,border:vn,font:Sn,lineGap:1.5,rotate:0},Bn={scale:null,auto:!0,sorted:0,min:Xt,max:-Xt},$n=(e,t,s,n,o)=>o,Hn={show:!0,auto:!0,sorted:0,gaps:$n,alpha:1,facets:[Ms({},Bn,{scale:"x"}),Ms({},Bn,{scale:"y"})]},Wn={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:$n,alpha:1,points:{show:function(e,t){let{scale:s,idxs:n}=e.series[0],o=e._data[0],a=e.valToPos(o[n[0]],s,!0),r=e.valToPos(o[n[1]],s,!0),i=Ot(r-a)/(e.series[t].points.space*ot);return n[1]-n[0]<=i},filter:null},values:null,min:Xt,max:-Xt,idxs:[],path:null,clip:null};function Un(e,t,s,n,o){return s/10}const qn={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Gn=Ms({},qn,{time:!1,ori:1}),Jn={};function Yn(e,t){let s=Jn[e];return s||(s={key:e,plots:[],sub(e){s.plots.push(e)},unsub(e){s.plots=s.plots.filter(t=>t!=e)},pub(e,t,n,o,a,r,i){for(let l=0;l<s.plots.length;l++)s.plots[l]!=t&&s.plots[l].pub(e,t,n,o,a,r,i)}},null!=e&&(Jn[e]=s)),s}function Vn(e,t,s){const n=e.mode,o=e.series[t],a=2==n?e._data[t]:e._data,r=e.scales,i=e.bbox;let l=a[0],c=2==n?a[1]:a[t],u=2==n?r[o.facets[0].scale]:r[e.series[0].scale],d=2==n?r[o.facets[1].scale]:r[o.scale],h=i.left,f=i.top,p=i.width,m=i.height,g=e.valToPosH,b=e.valToPosV;return 0==u.ori?s(o,l,c,u,d,g,b,h,f,p,m,no,ao,io,co,ho):s(o,l,c,u,d,b,g,f,h,m,p,oo,ro,lo,uo,fo)}function Xn(e,t){let s=0,n=0,o=Ft(e.bands,gs);for(let a=0;a<o.length;a++){let e=o[a];e.series[0]==t?s=e.dir:e.series[1]==t&&(1==e.dir?n|=1:n|=2)}return[s,1==n?-1:2==n?1:3==n?2:0]}function Kn(e,t,s,n,o){let a=e.mode,r=e.series[t],i=2==a?r.facets[1].scale:r.scale,l=e.scales[i];return-1==o?l.min:1==o?l.max:3==l.distr?1==l.dir?l.min:l.max:0}function Qn(e,t,s,n,o,a){return Vn(e,t,(e,t,r,i,l,c,u,d,h,f,p)=>{let m=e.pxRound;const g=i.dir*(0==i.ori?1:-1),b=0==i.ori?ao:ro;let y,x;1==g?(y=s,x=n):(y=n,x=s);let w=m(c(t[y],i,f,d)),k=m(u(r[y],l,p,h)),v=m(c(t[x],i,f,d)),S=m(u(1==a?l.max:l.min,l,p,h)),C=new Path2D(o);return b(C,v,S),b(C,w,S),b(C,w,k),C})}function Zn(e,t,s,n,o,a){let r=null;if(e.length>0){r=new Path2D;const i=0==t?io:lo;let l=s;for(let t=0;t<e.length;t++){let s=e[t];if(s[1]>s[0]){let e=s[0]-l;e>0&&i(r,l,n,e,n+a),l=s[1]}}let c=s+o-l,u=10;c>0&&i(r,l,n-u/2,c,n+a+u)}return r}function eo(e,t,s,n,o,a,r){let i=[],l=e.length;for(let c=1==o?s:n;c>=s&&c<=n;c+=o)if(null===t[c]){let u=c,d=c;if(1==o)for(;++c<=n&&null===t[c];)d=c;else for(;--c>=s&&null===t[c];)d=c;let h=a(e[u]),f=d==u?h:a(e[d]),p=u-o;h=r<=0&&p>=0&&p<l?a(e[p]):h;let m=d+o;f=r>=0&&m>=0&&m<l?a(e[m]):f,f>=h&&i.push([h,f])}return i}function to(e){return 0==e?ts:1==e?$t:t=>ls(t,e)}function so(e){let t=0==e?no:oo,s=0==e?(e,t,s,n,o,a)=>{e.arcTo(t,s,n,o,a)}:(e,t,s,n,o,a)=>{e.arcTo(s,t,o,n,a)},n=0==e?(e,t,s,n,o)=>{e.rect(t,s,n,o)}:(e,t,s,n,o)=>{e.rect(s,t,o,n)};return(e,o,a,r,i,l=0,c=0)=>{0==l&&0==c?n(e,o,a,r,i):(l=Wt(l,r/2,i/2),c=Wt(c,r/2,i/2),t(e,o+l,a),s(e,o+r,a,o+r,a+i,l),s(e,o+r,a+i,o,a+i,c),s(e,o,a+i,o,a,c),s(e,o,a,o+r,a,l),e.closePath())}}const no=(e,t,s)=>{e.moveTo(t,s)},oo=(e,t,s)=>{e.moveTo(s,t)},ao=(e,t,s)=>{e.lineTo(t,s)},ro=(e,t,s)=>{e.lineTo(s,t)},io=so(0),lo=so(1),co=(e,t,s,n,o,a)=>{e.arc(t,s,n,o,a)},uo=(e,t,s,n,o,a)=>{e.arc(s,t,n,o,a)},ho=(e,t,s,n,o,a,r)=>{e.bezierCurveTo(t,s,n,o,a,r)},fo=(e,t,s,n,o,a,r)=>{e.bezierCurveTo(s,t,o,n,r,a)};function po(e){return(e,t,s,n,o)=>Vn(e,t,(t,a,r,i,l,c,u,d,h,f,p)=>{let m,g,{pxRound:b,points:y}=t;0==i.ori?(m=no,g=co):(m=oo,g=uo);const x=ds(y.width*ot,3);let w=(y.size-y.width)/2*ot,k=ds(2*w,3),v=new Path2D,S=new Path2D,{left:C,top:_,width:M,height:T}=e.bbox;io(S,C-k,_-k,M+2*k,T+2*k);const j=e=>{if(null!=r[e]){let t=b(c(a[e],i,f,d)),s=b(u(r[e],l,p,h));m(v,t+w,s),g(v,t,s,w,0,2*zt)}};if(o)o.forEach(j);else for(let e=s;e<=n;e++)j(e);return{stroke:x>0?v:null,fill:v,clip:S,flags:3}})}function mo(e){return(t,s,n,o,a,r)=>{n!=o&&(a!=n&&r!=n&&e(t,s,n),a!=o&&r!=o&&e(t,s,o),e(t,s,r))}}const go=mo(ao),bo=mo(ro);function yo(e){const t=Ft(null==e?void 0:e.alignGaps,0);return(e,s,n,o)=>Vn(e,s,(a,r,i,l,c,u,d,h,f,p,m)=>{[n,o]=_t(i,n,o);let g,b,y=a.pxRound,x=e=>y(u(e,l,p,h)),w=e=>y(d(e,c,m,f));0==l.ori?(g=ao,b=go):(g=ro,b=bo);const k=l.dir*(0==l.ori?1:-1),v={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},S=v.stroke;let C=!1;if(o-n>=4*p){let t,s,a,c=t=>e.posToVal(t,l.key,!0),u=null,d=null,h=x(r[1==k?n:o]),f=x(r[n]),p=x(r[o]),m=c(1==k?f+1:p-1);for(let e=1==k?n:o;e>=n&&e<=o;e+=k){let n=r[e],o=(1==k?n<m:n>m)?h:x(n),a=i[e];o==h?null!=a?(s=a,null==u?(g(S,o,w(s)),t=u=d=s):s<u?u=s:s>d&&(d=s)):null===a&&(C=!0):(null!=u&&b(S,h,w(u),w(d),w(t),w(s)),null!=a?(s=a,g(S,o,w(s)),u=d=t=s):(u=d=null,null===a&&(C=!0)),h=o,m=c(h+k))}null!=u&&u!=d&&a!=h&&b(S,h,w(u),w(d),w(t),w(s))}else for(let e=1==k?n:o;e>=n&&e<=o;e+=k){let t=i[e];null===t?C=!0:null!=t&&g(S,x(r[e]),w(t))}let[_,M]=Xn(e,s);if(null!=a.fill||0!=_){let t=v.fill=new Path2D(S),i=w(a.fillTo(e,s,a.min,a.max,_)),l=x(r[n]),c=x(r[o]);-1==k&&([c,l]=[l,c]),g(t,c,i),g(t,l,i)}if(!a.spanGaps){let c=[];C&&c.push(...eo(r,i,n,o,k,x,t)),v.gaps=c=a.gaps(e,s,n,o,c),v.clip=Zn(c,l.ori,h,f,p,m)}return 0!=M&&(v.band=2==M?[Qn(e,s,n,o,S,-1),Qn(e,s,n,o,S,1)]:Qn(e,s,n,o,S,M)),v})}function xo(e,t,s,n,o,a,r=Xt){if(e.length>1){let i=null;for(let l=0,c=1/0;l<e.length;l++)if(void 0!==t[l]){if(null!=i){let t=Ot(e[l]-e[i]);t<c&&(c=t,r=Ot(s(e[l],n,o,a)-s(e[i],n,o,a)))}i=l}}return r}function wo(e,t,s,n,o,a){const r=e.length;if(r<2)return null;const i=new Path2D;if(s(i,e[0],t[0]),2==r)n(i,e[1],t[1]);else{let s=Array(r),n=Array(r-1),a=Array(r-1),l=Array(r-1);for(let o=0;o<r-1;o++)a[o]=t[o+1]-t[o],l[o]=e[o+1]-e[o],n[o]=a[o]/l[o];s[0]=n[0];for(let e=1;e<r-1;e++)0===n[e]||0===n[e-1]||n[e-1]>0!=n[e]>0?s[e]=0:(s[e]=3*(l[e-1]+l[e])/((2*l[e]+l[e-1])/n[e-1]+(l[e]+2*l[e-1])/n[e]),isFinite(s[e])||(s[e]=0));s[r-1]=n[r-2];for(let c=0;c<r-1;c++)o(i,e[c]+l[c]/3,t[c]+s[c]*l[c]/3,e[c+1]-l[c]/3,t[c+1]-s[c+1]*l[c]/3,e[c+1],t[c+1])}return i}const ko=new Set;function vo(){for(let e of ko)e.syncRect(!0)}et&&(xt("resize",st,vo),xt("scroll",st,vo,!0),xt(Qe,st,()=>{Io.pxRatio=ot}));const So=yo(),Co=po();function _o(e,t,s,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((e,n)=>Mo(e,n,t,s))}function Mo(e,t,s,n){return Ms({},0==t?s:n,e)}function To(e,t,s){return null==t?bs:[t,s]}const jo=To;function Eo(e,t,s){return null==t?bs:Pt(t,s,.1,!0)}function No(e,t,s,n){return null==t?bs:Tt(t,s,e.scales[n].log,!1)}const Lo=No;function Po(e,t,s,n){return null==t?bs:jt(t,s,e.scales[n].log,!1)}const Fo=Po;function Ao(e){let t,s;return[e=e.replace(/(\d+)px/,(e,n)=>(t=$t((s=+n)*ot))+"px"),t,s]}function Do(e){e.show&&[e.font,e.labelFont].forEach(e=>{let t=ds(e[2]*ot,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t})}function Io(e,t,s){const n={mode:Ft(e.mode,1)},o=n.mode;function a(e,t,s,n){let o=t.valToPct(e);return n+s*(-1==t.dir?1-o:o)}function r(e,t,s,n){let o=t.valToPct(e);return n+s*(-1==t.dir?o:1-o)}function i(e,t,s,n){return 0==t.ori?a(e,t,s,n):r(e,t,s,n)}n.valToPosH=a,n.valToPosV=r;let l=!1;n.status=0;const c=n.root=ut("uplot");null!=e.id&&(c.id=e.id),rt(c,e.class),e.title&&(ut("u-title",c).textContent=e.title);const u=ct("canvas"),d=n.ctx=u.getContext("2d"),h=ut("u-wrap",c);xt("click",h,e=>{e.target===p&&(Qs!=Ys||Zs!=Vs)&&kn.click(n,e)},!0);const f=n.under=ut("u-under",h);h.appendChild(u);const p=n.over=ut("u-over",h),m=+Ft((e=_s(e)).pxAlign,1),g=to(m);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const b=e.ms||.001,y=n.series=1==o?_o(e.series||[],Mn,Wn,!1):(x=e.series||[null],w=Hn,x.map((e,t)=>0==t?{}:Ms({},w,e)));var x,w;const k=n.axes=_o(e.axes||[],_n,On,!0),v=n.scales={},S=n.bands=e.bands||[];S.forEach(e=>{e.fill=es(e.fill||null),e.dir=Ft(e.dir,-1)});const C=2==o?y[1].facets[0].scale:y[0].scale,_={axes:function(){for(let e=0;e<k.length;e++){let t=k[e];if(!t.show||!t._show)continue;let s,o,a=t.side,r=a%2,l=t.stroke(n,e),c=0==a||3==a?-1:1,[u,h]=t._found;if(null!=t.label){let i=t.labelGap*c,f=$t((t._lpos+i)*ot);Ss(t.labelFont[0],l,"center",2==a?Oe:Be),d.save(),1==r?(s=o=0,d.translate(f,$t(ge+ye/2)),d.rotate((3==a?-zt:zt)/2)):(s=$t(me+be/2),o=f);let p=Zt(t.label)?t.label(n,e,u,h):t.label;d.fillText(p,s,o),d.restore()}if(0==h)continue;let f=v[t.scale],p=0==r?be:ye,m=0==r?me:ge,b=t._splits,y=2==f.distr?b.map(e=>is[e]):b,x=2==f.distr?is[b[1]]-is[b[0]]:u,w=t.ticks,S=t.border,C=w.show?w.size:0,_=$t(C*ot),M=$t((2==t.alignTo?t._size-C-t.gap:t.gap)*ot),T=t._rotate*-zt/180,j=g(t._pos*ot),E=j+(_+M)*c;o=0==r?E:0,s=1==r?E:0,Ss(t.font[0],l,1==t.align?$e:2==t.align?He:T>0?$e:T<0?He:0==r?"center":3==a?He:$e,T||1==r?"middle":2==a?Oe:Be);let N=t.font[1]*t.lineGap,L=b.map(e=>g(i(e,f,p,m))),P=t._values;for(let e=0;e<P.length;e++){let t=P[e];if(null!=t){0==r?s=L[e]:o=L[e],t=""+t;let n=-1==t.indexOf("\n")?[t]:t.split(/\n/gm);for(let e=0;e<n.length;e++){let t=n[e];T?(d.save(),d.translate(s,o+e*N),d.rotate(T),d.fillText(t,0,0),d.restore()):d.fillText(t,s,o+e*N)}}}w.show&&Ds(L,w.filter(n,y,e,h,x),r,a,j,_,ds(w.width*ot,3),w.stroke(n,e),w.dash,w.cap);let F=t.grid;F.show&&Ds(L,F.filter(n,y,e,h,x),r,0==r?2:1,0==r?ge:me,0==r?ye:be,ds(F.width*ot,3),F.stroke(n,e),F.dash,F.cap),S.show&&Ds([j],[1],0==r?1:0,0==r?1:2,1==r?ge:me,1==r?ye:be,ds(S.width*ot,3),S.stroke(n,e),S.dash,S.cap)}Io("drawAxes")},series:function(){if(mt>0){let e=y.some(e=>e._focus)&&rs!=Ne.alpha;e&&(d.globalAlpha=rs=Ne.alpha),y.forEach((e,s)=>{if(s>0&&e.show&&(Es(s,!1),Es(s,!0),null==e._paths)){let a=rs;rs!=e.alpha&&(d.globalAlpha=rs=e.alpha);let r=2==o?[0,t[s][0].length-1]:function(e){let t=Qt(bt-1,0,mt-1),s=Qt(yt+1,0,mt-1);for(;null==e[t]&&t>0;)t--;for(;null==e[s]&&s<mt-1;)s++;return[t,s]}(t[s]);e._paths=e.paths(n,s,r[0],r[1]),rs!=a&&(d.globalAlpha=rs=a)}}),y.forEach((e,t)=>{if(t>0&&e.show){let s=rs;rs!=e.alpha&&(d.globalAlpha=rs=e.alpha),null!=e._paths&&Ns(t,!1);{let s=null!=e._paths?e._paths.gaps:null,o=e.points.show(n,t,bt,yt,s),a=e.points.filter(n,t,o,s);(o||a)&&(e.points._paths=e.points.paths(n,t,bt,yt,a),Ns(t,!0))}rs!=s&&(d.globalAlpha=rs=s),Io("drawSeries",t)}}),e&&(d.globalAlpha=rs=1)}}},M=(e.drawOrder||["axes","series"]).map(e=>_[e]);function T(e){const t=3==e.distr?t=>Jt(t>0?t:e.clamp(n,t,e.min,e.max,e.key)):4==e.distr?t=>Vt(t,e.asinh):100==e.distr?t=>e.fwd(t):e=>e;return s=>{let n=t(s),{_min:o,_max:a}=e;return(n-o)/(a-o)}}function j(t){let s=v[t];if(null==s){let n=(e.scales||ms)[t]||ms;if(null!=n.from){j(n.from);let e=Ms({},v[n.from],n,{key:t});e.valToPct=T(e),v[t]=e}else{s=v[t]=Ms({},t==C?qn:Gn,n),s.key=t;let e=s.time,a=s.range,r=ys(a);if((t!=C||2==o&&!e)&&(!r||null!=a[0]&&null!=a[1]||(a={min:null==a[0]?Et:{mode:1,hard:a[0],soft:a[0]},max:null==a[1]?Et:{mode:1,hard:a[1],soft:a[1]}},r=!1),!r&&ks(a))){let e=a;a=(t,s,n)=>null==s?bs:Pt(s,n,e)}s.range=es(a||(e?jo:t==C?3==s.distr?Lo:4==s.distr?Fo:To:3==s.distr?No:4==s.distr?Po:Eo)),s.auto=es(!r&&s.auto),s.clamp=es(s.clamp||Un),s._min=s._max=null,s.valToPct=T(s)}}}j("x"),j("y"),1==o&&y.forEach(e=>{j(e.scale)}),k.forEach(e=>{j(e.scale)});for(let De in e.scales)j(De);const E=v[C],N=E.distr;let L,P;0==E.ori?(rt(c,"u-hz"),L=a,P=r):(rt(c,"u-vt"),L=r,P=a);const F={};for(let De in v){let e=v[De];null==e.min&&null==e.max||(F[De]={min:e.min,max:e.max},e.min=e.max=null)}const A=e.tzDate||(e=>new Date($t(e/b))),D=e.fmtDate||Rs,I=1==b?on(A):ln(A),R=un(A,cn(1==b?nn:rn,D)),z=fn(A,hn("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",D)),O=[],B=n.legend=Ms({},pn,e.legend),$=n.cursor=Ms({},yn,{drag:{y:2==o}},e.cursor),H=B.show,W=$.show,U=B.markers;let q,G,J;B.idxs=O,U.width=es(U.width),U.dash=es(U.dash),U.stroke=es(U.stroke),U.fill=es(U.fill);let Y,V=[],X=[],K=!1,Q={};if(B.live){const e=y[1]?y[1].values:null;K=null!=e,Y=K?e(n,1,0):{_:0};for(let t in Y)Q[t]=Ze}if(H)if(q=ct("table","u-legend",c),J=ct("tbody",null,q),B.mount(n,q),K){G=ct("thead",null,q,J);let e=ct("tr",null,G);for(var Z in ct("th",null,e),Y)ct("th",Ie,e).textContent=Z}else rt(q,"u-inline"),B.live&&rt(q,"u-live");const ee={show:!0},te={show:!1},se=new Map;function ne(e,t,s,o=!0){const a=se.get(t)||{},r=$.bind[e](n,t,s,o);r&&(xt(e,t,a[e]=r),se.set(t,a))}function oe(e,t,s){const n=se.get(t)||{};for(let o in n)null!=e&&o!=e||(wt(o,t,n[o]),delete n[o]);null==e&&se.delete(t)}let ae=0,re=0,ie=0,le=0,ce=0,ue=0,de=ce,he=ue,fe=ie,pe=le,me=0,ge=0,be=0,ye=0;n.bbox={};let xe=!1,we=!1,ke=!1,ve=!1,Se=!1,Ce=!1;function _e(e,t,s){(s||e!=n.width||t!=n.height)&&Me(e,t),Os(!1),ke=!0,we=!0,gn()}function Me(e,t){n.width=ae=ie=e,n.height=re=le=t,ce=ue=0,function(){let e=!1,t=!1,s=!1,n=!1;k.forEach((o,a)=>{if(o.show&&o._show){let{side:a,_size:r}=o,i=a%2,l=r+(null!=o.label?o.labelSize:0);l>0&&(i?(ie-=l,3==a?(ce+=l,n=!0):s=!0):(le-=l,0==a?(ue+=l,e=!0):t=!0))}}),nt[0]=e,nt[1]=s,nt[2]=t,nt[3]=n,ie-=ft[1]+ft[3],ce+=ft[3],le-=ft[2]+ft[0],ue+=ft[0]}(),function(){let e=ce+ie,t=ue+le,s=ce,n=ue;function o(o,a){switch(o){case 1:return e+=a,e-a;case 2:return t+=a,t-a;case 3:return s-=a,s+a;case 0:return n-=a,n+a}}k.forEach((e,t)=>{if(e.show&&e._show){let t=e.side;e._pos=o(t,e._size),null!=e.label&&(e._lpos=o(t,e.labelSize))}})}();let s=n.bbox;me=s.left=ls(ce*ot,.5),ge=s.top=ls(ue*ot,.5),be=s.width=ls(ie*ot,.5),ye=s.height=ls(le*ot,.5)}const Te=3;if(n.setSize=function({width:e,height:t}){_e(e,t)},null==$.dataIdx){let e=$.hover,s=e.skip=new Set(e.skip??[]);s.add(void 0);let n=e.prox=es(e.prox),o=e.bias??(e.bias=0);$.dataIdx=(e,a,r,i)=>{if(0==a)return r;let l=r,c=n(e,a,r,i)??Xt,u=c>=0&&c<Xt,d=0==E.ori?ie:le,h=$.left,f=t[0],p=t[a];if(s.has(p[r])){l=null;let e,t=null,n=null;if(0==o||-1==o)for(e=r;null==t&&e-- >0;)s.has(p[e])||(t=e);if(0==o||1==o)for(e=r;null==n&&e++<p.length;)s.has(p[e])||(n=e);if(null!=t||null!=n)if(u){let e=h-(null==t?-1/0:L(f[t],E,d,0)),s=(null==n?1/0:L(f[n],E,d,0))-h;e<=s?e<=c&&(l=t):s<=c&&(l=n)}else l=null==n?t:null==t?n:r-t<=n-r?t:n}else u&&Ot(h-L(f[r],E,d,0))>c&&(l=null);return l}}const je=e=>{$.event=e};$.idxs=O,$._lock=!1;let Ee=$.points;Ee.show=es(Ee.show),Ee.size=es(Ee.size),Ee.stroke=es(Ee.stroke),Ee.width=es(Ee.width),Ee.fill=es(Ee.fill);const Ne=n.focus=Ms({},e.focus||{alpha:.3},$.focus),Le=Ne.prox>=0,Pe=Le&&Ee.one;let Fe=[],Ae=[],We=[];function Ke(e,t){let s=Ee.show(n,t);if(s instanceof HTMLElement)return rt(s,"u-cursor-pt"),rt(s,e.class),ht(s,-10,-10,ie,le),p.insertBefore(s,Fe[t]),s}function et(e,t){if(1==o||t>0){let t=1==o&&v[e.scale].time,s=e.value;e.value=t?ws(s)?fn(A,hn(s,D)):s||z:s||zn,e.label=e.label||(t?"Time":"Value")}if(Pe||t>0){e.width=null==e.width?1:e.width,e.paths=e.paths||So||ns,e.fillTo=es(e.fillTo||Kn),e.pxAlign=+Ft(e.pxAlign,m),e.pxRound=to(e.pxAlign),e.stroke=es(e.stroke||null),e.fill=es(e.fill||null),e._stroke=e._fill=e._paths=e._focus=null;let t=ds(1*(3+2*(Ut(1,e.width)||1)),3),s=e.points=Ms({},{size:t,width:Ut(1,.2*t),stroke:e.stroke,space:2*t,paths:Co,_stroke:null,_fill:null},e.points);s.show=es(s.show),s.filter=es(s.filter),s.fill=es(s.fill),s.stroke=es(s.stroke),s.paths=es(s.paths),s.pxAlign=e.pxAlign}if(H){let s=function(e,t){if(0==t&&(K||!B.live||2==o))return bs;let s=[],a=ct("tr","u-series",J,J.childNodes[t]);rt(a,e.class),e.show||rt(a,De);let r=ct("th",null,a);if(U.show){let e=ut("u-marker",r);if(t>0){let s=U.width(n,t);s&&(e.style.border=s+"px "+U.dash(n,t)+" "+U.stroke(n,t)),e.style.background=U.fill(n,t)}}let i=ut(Ie,r);for(var l in e.label instanceof HTMLElement?i.appendChild(e.label):i.textContent=e.label,t>0&&(U.show||(i.style.color=e.width>0?U.stroke(n,t):U.fill(n,t)),ne("click",r,t=>{if($._lock)return;je(t);let s=y.indexOf(e);if((t.ctrlKey||t.metaKey)!=B.isolate){let e=y.some((e,t)=>t>0&&t!=s&&e.show);y.forEach((t,n)=>{n>0&&An(n,e?n==s?ee:te:ee,!0,zo.setSeries)})}else An(s,{show:!e.show},!0,zo.setSeries)},!1),Le&&ne(Ye,r,t=>{$._lock||(je(t),An(y.indexOf(e),Jn,!0,zo.setSeries))},!1)),Y){let e=ct("td","u-value",a);e.textContent="--",s.push(e)}return[a,s]}(e,t);V.splice(t,0,s[0]),X.splice(t,0,s[1]),B.values.push(null)}if(W){O.splice(t,0,null);let s=null;Pe?0==t&&(s=Ke(e,t)):t>0&&(s=Ke(e,t)),Fe.splice(t,0,s),Ae.splice(t,0,0),We.splice(t,0,0)}Io("addSeries",t)}n.addSeries=function(e,t){t=null==t?y.length:t,e=1==o?Mo(e,t,Mn,Wn):Mo(e,t,{},Hn),y.splice(t,0,e),et(y[t],t)},n.delSeries=function(e){if(y.splice(e,1),H){B.values.splice(e,1),X.splice(e,1);let t=V.splice(e,1)[0];oe(null,t.firstChild),t.remove()}W&&(O.splice(e,1),Fe.splice(e,1)[0].remove(),Ae.splice(e,1),We.splice(e,1)),Io("delSeries",e)};const nt=[!1,!1,!1,!1];function at(e,t,s,n){let[o,a,r,i]=s,l=t%2,c=0;return 0==l&&(i||a)&&(c=0==t&&!o||2==t&&!r?$t(_n.size/3):0),1==l&&(o||r)&&(c=1==t&&!a||3==t&&!i?$t(On.size/2):0),c}const dt=n.padding=(e.padding||[at,at,at,at]).map(e=>es(Ft(e,at))),ft=n._padding=dt.map((e,t)=>e(n,t,nt,0));let mt,bt=null,yt=null;const vt=1==o?y[0].idxs:null;let Nt,Lt,At,Dt,It,Bt,Gt,Yt,ts,rs,is=null,cs=!1;function us(e,s){if(t=null==e?[]:e,n.data=n._data=t,2==o){mt=0;for(let e=1;e<y.length;e++)mt+=t[e][0].length}else{0==t.length&&(n.data=n._data=t=[[]]),is=t[0],mt=is.length;let e=t;if(2==N){e=t.slice();let s=e[0]=Array(mt);for(let e=0;e<mt;e++)s[e]=e}n._data=t=e}if(Os(!0),Io("setData"),2==N&&(ke=!0),!1!==s){let e=E;e.auto(n,cs)?ps():Fn(C,e.min,e.max),ve=ve||$.left>=0,Ce=!0,gn()}}function ps(){let e,s;cs=!0,1==o&&(mt>0?(bt=vt[0]=0,yt=vt[1]=mt-1,e=t[0][bt],s=t[0][yt],2==N?(e=bt,s=yt):e==s&&(3==N?[e,s]=Tt(e,e,E.log,!1):4==N?[e,s]=jt(e,e,E.log,!1):E.time?s=e+$t(86400/b):[e,s]=Pt(e,s,.1,!0))):(bt=vt[0]=e=null,yt=vt[1]=s=null)),Fn(C,e,s)}function xs(e,t,s,n,o,a){e??(e=Ue),s??(s=gs),n??(n="butt"),o??(o=Ue),a??(a="round"),e!=Nt&&(d.strokeStyle=Nt=e),o!=Lt&&(d.fillStyle=Lt=o),t!=At&&(d.lineWidth=At=t),a!=It&&(d.lineJoin=It=a),n!=Bt&&(d.lineCap=Bt=n),s!=Dt&&d.setLineDash(Dt=s)}function Ss(e,t,s,n){t!=Lt&&(d.fillStyle=Lt=t),e!=Gt&&(d.font=Gt=e),s!=Yt&&(d.textAlign=Yt=s),n!=ts&&(d.textBaseline=ts=n)}function Cs(e,t,s,o,a=0){if(o.length>0&&e.auto(n,cs)&&(null==t||null==t.min)){let t=Ft(bt,0),n=Ft(yt,o.length-1),r=null==s.min?function(e,t,s,n=0,o=!1){let a=o?Mt:_t,r=o?Ct:St;[t,s]=a(e,t,s);let i=e[t],l=e[t];if(t>-1)if(1==n)i=e[t],l=e[s];else if(-1==n)i=e[s],l=e[t];else for(let c=t;c<=s;c++){let t=e[c];r(t)&&(t<i?i=t:t>l&&(l=t))}return[i??Xt,l??-Xt]}(o,t,n,a,3==e.distr):[s.min,s.max];e.min=Wt(e.min,s.min=r[0]),e.max=Ut(e.max,s.max=r[1])}}n.setData=us;const Ts={min:null,max:null};function Es(e,t){let s=t?y[e].points:y[e];s._stroke=s.stroke(n,e),s._fill=s.fill(n,e)}function Ns(e,s){let o=s?y[e].points:y[e],{stroke:a,fill:r,clip:i,flags:l,_stroke:c=o._stroke,_fill:u=o._fill,_width:h=o.width}=o._paths;h=ds(h*ot,3);let f=null,p=h%2/2;s&&null==u&&(u=h>0?"#fff":c);let m=1==o.pxAlign&&p>0;if(m&&d.translate(p,p),!s){let e=me-h/2,t=ge-h/2,s=be+h,n=ye+h;f=new Path2D,f.rect(e,t,s,n)}s?Ps(c,h,o.dash,o.cap,u,a,r,l,i):function(e,s,o,a,r,i,l,c,u,d,h){let f=!1;0!=u&&S.forEach((p,m)=>{if(p.series[0]==e){let e,g=y[p.series[1]],b=t[p.series[1]],x=(g._paths||ms).band;ys(x)&&(x=1==p.dir?x[0]:x[1]);let w=null;g.show&&x&&function(e,t,s){for(t=Ft(t,0),s=Ft(s,e.length-1);t<=s;){if(null!=e[t])return!0;t++}return!1}(b,bt,yt)?(w=p.fill(n,m)||i,e=g._paths.clip):x=null,Ps(s,o,a,r,w,l,c,u,d,h,e,x),f=!0}}),f||Ps(s,o,a,r,i,l,c,u,d,h)}(e,c,h,o.dash,o.cap,u,a,r,l,f,i),m&&d.translate(-p,-p)}const Ls=3;function Ps(e,t,s,n,o,a,r,i,l,c,u,h){xs(e,t,s,n,o),(l||c||h)&&(d.save(),l&&d.clip(l),c&&d.clip(c)),h?(i&Ls)==Ls?(d.clip(h),u&&d.clip(u),As(o,r),Fs(e,a,t)):2&i?(As(o,r),d.clip(h),Fs(e,a,t)):1&i&&(d.save(),d.clip(h),u&&d.clip(u),As(o,r),d.restore(),Fs(e,a,t)):(As(o,r),Fs(e,a,t)),(l||c||h)&&d.restore()}function Fs(e,t,s){s>0&&(t instanceof Map?t.forEach((e,t)=>{d.strokeStyle=Nt=t,d.stroke(e)}):null!=t&&e&&d.stroke(t))}function As(e,t){t instanceof Map?t.forEach((e,t)=>{d.fillStyle=Lt=t,d.fill(e)}):null!=t&&e&&d.fill(t)}function Ds(e,t,s,n,o,a,r,i,l,c){let u=r%2/2;1==m&&d.translate(u,u),xs(i,r,l,c,i),d.beginPath();let h,f,p,g,b=o+(0==n||3==n?-a:a);0==s?(f=o,g=b):(h=o,p=b);for(let m=0;m<e.length;m++)null!=t[m]&&(0==s?h=p=e[m]:f=g=e[m],d.moveTo(h,f),d.lineTo(p,g));d.stroke(),1==m&&d.translate(-u,-u)}function Is(e){let t=!0;return k.forEach((s,o)=>{if(!s.show)return;let a=v[s.scale];if(null==a.min)return void(s._show&&(t=!1,s._show=!1,Os(!1)));s._show||(t=!1,s._show=!0,Os(!1));let r=s.side,i=r%2,{min:l,max:c}=a,[u,d]=function(e,t,s,o){let a,r=k[e];if(o<=0)a=[0,0];else{let i=r._space=r.space(n,e,t,s,o);a=function(e,t,s,n,o){let a=Ut(Kt(e),Kt(t)),r=t-e,i=kt(o/n*r,s);do{let e=s[i],t=n*e/r;if(t>=o&&a+(e<5?hs.get(e):0)<=17)return[e,t]}while(++i<s.length);return[0,0]}(t,s,r._incrs=r.incrs(n,e,t,s,o,i),o,i)}return r._found=a}(o,l,c,0==i?ie:le);if(0==d)return;let h=2==a.distr,f=s._splits=s.splits(n,o,l,c,u,d,h),p=2==a.distr?f.map(e=>is[e]):f,m=2==a.distr?is[f[1]]-is[f[0]]:u,g=s._values=s.values(n,s.filter(n,p,o,d,m),o,d,m);s._rotate=2==r?s.rotate(n,g,o,d):0;let b=s._size;s._size=Ht(s.size(n,g,o,e)),null!=b&&s._size!=b&&(t=!1)}),t}function zs(e){let t=!0;return dt.forEach((s,o)=>{let a=s(n,o,nt,e);a!=ft[o]&&(t=!1),ft[o]=a}),t}function Os(e){y.forEach((t,s)=>{s>0&&(t._paths=null,e&&(1==o?(t.min=null,t.max=null):t.facets.forEach(e=>{e.min=null,e.max=null})))})}let Bs,$s,Hs,qs,Gs,Js,Ys,Vs,Xs,Ks,Qs,Zs,en=!1,tn=!1,dn=[];function mn(){tn=!1;for(let e=0;e<dn.length;e++)Io(...dn[e]);dn.length=0}function gn(){en||(js(bn),en=!0)}function bn(){if(xe&&(function(){for(let t in v){let e=v[t];null==F[t]&&(null==e.min||null!=F[C]&&e.auto(n,cs))&&(F[t]=Ts)}for(let t in v){let e=v[t];null==F[t]&&null!=e.from&&null!=F[e.from]&&(F[t]=Ts)}null!=F[C]&&Os(!0);let e={};for(let t in F){let s=F[t];if(null!=s){let a=e[t]=_s(v[t],vs);if(null!=s.min)Ms(a,s);else if(t!=C||2==o)if(0==mt&&null==a.from){let e=a.range(n,null,null,t);a.min=e[0],a.max=e[1]}else a.min=Xt,a.max=-Xt}}if(mt>0){y.forEach((s,a)=>{if(1==o){let o=s.scale,r=F[o];if(null==r)return;let i=e[o];if(0==a){let e=i.range(n,i.min,i.max,o);i.min=e[0],i.max=e[1],bt=kt(i.min,t[0]),yt=kt(i.max,t[0]),yt-bt>1&&(t[0][bt]<i.min&&bt++,t[0][yt]>i.max&&yt--),s.min=is[bt],s.max=is[yt]}else s.show&&s.auto&&Cs(i,r,s,t[a],s.sorted);s.idxs[0]=bt,s.idxs[1]=yt}else if(a>0&&s.show&&s.auto){let[n,o]=s.facets,r=n.scale,i=o.scale,[l,c]=t[a],u=e[r],d=e[i];null!=u&&Cs(u,F[r],n,l,n.sorted),null!=d&&Cs(d,F[i],o,c,o.sorted),s.min=o.min,s.max=o.max}});for(let t in e){let s=e[t],o=F[t];if(null==s.from&&(null==o||null==o.min)){let e=s.range(n,s.min==Xt?null:s.min,s.max==-Xt?null:s.max,t);s.min=e[0],s.max=e[1]}}}for(let t in e){let s=e[t];if(null!=s.from){let o=e[s.from];if(null==o.min)s.min=s.max=null;else{let e=s.range(n,o.min,o.max,t);s.min=e[0],s.max=e[1]}}}let s={},a=!1;for(let t in e){let n=e[t],o=v[t];if(o.min!=n.min||o.max!=n.max){o.min=n.min,o.max=n.max;let e=o.distr;o._min=3==e?Jt(o.min):4==e?Vt(o.min,o.asinh):100==e?o.fwd(o.min):o.min,o._max=3==e?Jt(o.max):4==e?Vt(o.max,o.asinh):100==e?o.fwd(o.max):o.max,s[t]=a=!0}}if(a){y.forEach((e,t)=>{2==o?t>0&&s.y&&(e._paths=null):s[e.scale]&&(e._paths=null)});for(let e in s)ke=!0,Io("setScale",e);W&&$.left>=0&&(ve=Ce=!0)}for(let t in F)F[t]=null}(),xe=!1),ke&&(function(){let e=!1,t=0;for(;!e;){t++;let s=Is(t),o=zs(t);e=t==Te||s&&o,e||(Me(n.width,n.height),we=!0)}}(),ke=!1),we){if(lt(f,$e,ce),lt(f,Oe,ue),lt(f,Re,ie),lt(f,ze,le),lt(p,$e,ce),lt(p,Oe,ue),lt(p,Re,ie),lt(p,ze,le),lt(h,Re,ae),lt(h,ze,re),u.width=$t(ae*ot),u.height=$t(re*ot),k.forEach(({_el:e,_show:t,_size:s,_pos:n,side:o})=>{if(null!=e)if(t){let t=o%2==1;lt(e,t?"left":"top",n-(3===o||0===o?s:0)),lt(e,t?"width":"height",s),lt(e,t?"top":"left",t?ue:ce),lt(e,t?"height":"width",t?le:ie),it(e,De)}else rt(e,De)}),Nt=Lt=At=It=Bt=Gt=Yt=ts=Dt=null,rs=1,ro(!0),ce!=de||ue!=he||ie!=fe||le!=pe){Os(!1);let e=ie/fe,t=le/pe;if(W&&!ve&&$.left>=0){$.left*=e,$.top*=t,Hs&&ht(Hs,$t($.left),0,ie,le),qs&&ht(qs,0,$t($.top),ie,le);for(let s=0;s<Fe.length;s++){let n=Fe[s];null!=n&&(Ae[s]*=e,We[s]*=t,ht(n,Ht(Ae[s]),Ht(We[s]),ie,le))}}if(Cn.show&&!Se&&Cn.left>=0&&Cn.width>0){Cn.left*=e,Cn.width*=e,Cn.top*=t,Cn.height*=t;for(let e in co)lt(Ln,e,Cn[e])}de=ce,he=ue,fe=ie,pe=le}Io("setSize"),we=!1}ae>0&&re>0&&(d.clearRect(0,0,u.width,u.height),Io("drawClear"),M.forEach(e=>e()),Io("draw")),Cn.show&&Se&&(Pn(Cn),Se=!1),W&&ve&&(oo(null,!0,!1),ve=!1),B.show&&B.live&&Ce&&(so(),Ce=!1),l||(l=!0,n.status=1,Io("ready")),cs=!1,en=!1}function xn(e,s){let o=v[e];if(null==o.from){if(0==mt){let t=o.range(n,s.min,s.max,e);s.min=t[0],s.max=t[1]}if(s.min>s.max){let e=s.min;s.min=s.max,s.max=e}if(mt>1&&null!=s.min&&null!=s.max&&s.max-s.min<1e-16)return;e==C&&2==o.distr&&mt>0&&(s.min=kt(s.min,t[0]),s.max=kt(s.max,t[0]),s.min==s.max&&s.max++),F[e]=s,xe=!0,gn()}}n.batch=function(e,t=!1){en=!0,tn=t,e(n),bn(),t&&dn.length>0&&queueMicrotask(mn)},n.redraw=(e,t)=>{ke=t||!1,!1!==e?Fn(C,E.min,E.max):gn()},n.setScale=xn;let wn=!1;const kn=$.drag;let vn=kn.x,Sn=kn.y;W&&($.x&&(Bs=ut("u-cursor-x",p)),$.y&&($s=ut("u-cursor-y",p)),0==E.ori?(Hs=Bs,qs=$s):(Hs=$s,qs=Bs),Qs=$.left,Zs=$.top);const Cn=n.select=Ms({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Ln=Cn.show?ut("u-select",Cn.over?p:f):null;function Pn(e,t){if(Cn.show){for(let t in e)Cn[t]=e[t],t in co&&lt(Ln,t,e[t]);!1!==t&&Io("setSelect")}}function Fn(e,t,s){xn(e,{min:t,max:s})}function An(e,t,s,a){null!=t.focus&&function(e){if(e!=$n){let t=null==e,s=1!=Ne.alpha;y.forEach((n,a)=>{if(1==o||a>0){let o=t||0==a||a==e;n._focus=t?null:o,s&&function(e,t){y[e].alpha=t,W&&null!=Fe[e]&&(Fe[e].style.opacity=t),H&&V[e]&&(V[e].style.opacity=t)}(a,o?1:Ne.alpha)}}),$n=e,s&&gn()}}(e),null!=t.show&&y.forEach((s,n)=>{n>0&&(e==n||null==e)&&(s.show=t.show,function(e){if(y[e].show)H&&it(V[e],De);else if(H&&rt(V[e],De),W){let t=Pe?Fe[0]:Fe[e];null!=t&&ht(t,-10,-10,ie,le)}}(n),2==o?(Fn(s.facets[0].scale,null,null),Fn(s.facets[1].scale,null,null)):Fn(s.scale,null,null),gn())}),!1!==s&&Io("setSeries",e,t),a&&$o("setSeries",n,e,t)}let Dn,Bn,$n;n.setSelect=Pn,n.setSeries=An,n.addBand=function(e,t){e.fill=es(e.fill||null),e.dir=Ft(e.dir,-1),t=null==t?S.length:t,S.splice(t,0,e)},n.setBand=function(e,t){Ms(S[e],t)},n.delBand=function(e){null==e?S.length=0:S.splice(e,1)};const Jn={focus:!0};function Vn(e,t,s){let n=v[t];s&&(e=e/ot-(1==n.ori?ue:ce));let o=ie;1==n.ori&&(o=le,e=o-e),-1==n.dir&&(e=o-e);let a=n._min,r=a+(n._max-a)*(e/o),i=n.distr;return 3==i?qt(10,r):4==i?((e,t=1)=>Rt.sinh(e)*t)(r,n.asinh):100==i?n.bwd(r):r}function Xn(e,t){lt(Ln,$e,Cn.left=e),lt(Ln,Re,Cn.width=t)}function Qn(e,t){lt(Ln,Oe,Cn.top=e),lt(Ln,ze,Cn.height=t)}H&&Le&&ne(Ve,q,e=>{$._lock||(je(e),null!=$n&&An(null,Jn,!0,zo.setSeries))}),n.valToIdx=e=>kt(e,t[0]),n.posToIdx=function(e,s){return kt(Vn(e,C,s),t[0],bt,yt)},n.posToVal=Vn,n.valToPos=(e,t,s)=>0==v[t].ori?a(e,v[t],s?be:ie,s?me:0):r(e,v[t],s?ye:le,s?ge:0),n.setCursor=(e,t,s)=>{Qs=e.left,Zs=e.top,oo(null,t,s)};let Zn=0==E.ori?Xn:Qn,eo=1==E.ori?Xn:Qn;function so(e,t){if(null!=e&&(e.idxs?e.idxs.forEach((e,t)=>{O[t]=e}):void 0!==e.idx&&O.fill(e.idx),B.idx=O[0]),H&&B.live){for(let e=0;e<y.length;e++)(e>0||1==o&&!K)&&no(e,O[e]);!function(){if(H&&B.live)for(let e=2==o?1:0;e<y.length;e++){if(0==e&&K)continue;let t=B.values[e],s=0;for(let n in t)X[e][s++].firstChild.nodeValue=t[n]}}()}Ce=!1,!1!==t&&Io("setLegend")}function no(e,s){let o,a=y[e],r=0==e&&2==N?is:t[e];K?o=a.values(n,e,s)??Q:(o=a.value(n,null==s?null:r[s],e,s),o=null==o?Q:{_:o}),B.values[e]=o}function oo(e,s,a){let r;Xs=Qs,Ks=Zs,[Qs,Zs]=$.move(n,Qs,Zs),$.left=Qs,$.top=Zs,W&&(Hs&&ht(Hs,$t(Qs),0,ie,le),qs&&ht(qs,0,$t(Zs),ie,le));let i=bt>yt;Dn=Xt,Bn=null;let l=0==E.ori?ie:le,c=1==E.ori?ie:le;if(Qs<0||0==mt||i){r=$.idx=null;for(let e=0;e<y.length;e++){let t=Fe[e];null!=t&&ht(t,-10,-10,ie,le)}Le&&An(null,Jn,!0,null==e&&zo.setSeries),B.live&&(O.fill(r),Ce=!0)}else{let e,s,a;1==o&&(e=0==E.ori?Qs:Zs,s=Vn(e,C),r=$.idx=kt(s,t[0],bt,yt),a=L(t[0][r],E,l,0));let i=-10,u=-10,d=0,h=0,f=!0,p="",m="";for(let g=2==o?1:0;g<y.length;g++){let e=y[g],b=O[g],x=null==b?null:1==o?t[g][b]:t[g][1][b],w=$.dataIdx(n,g,r,s),k=null==w?null:1==o?t[g][w]:t[g][1][w];if(Ce=Ce||k!=x||w!=b,O[g]=w,g>0&&e.show){let s=null==w?-10:w==r?a:L(1==o?t[0][w]:t[g][0][w],E,l,0),b=null==k?-10:P(k,1==o?v[e.scale]:v[e.facets[1].scale],c,0);if(Le&&null!=k){let t=1==E.ori?Qs:Zs,s=Ot(Ne.dist(n,g,w,b,t));if(s<Dn){let n=Ne.bias;if(0!=n){let o=Vn(t,e.scale),a=o>=0?1:-1;a==(k>=0?1:-1)&&(1==a?1==n?k>=o:k<=o:1==n?k<=o:k>=o)&&(Dn=s,Bn=g)}else Dn=s,Bn=g}}if(Ce||Pe){let e,t;0==E.ori?(e=s,t=b):(e=b,t=s);let o,a,r,l,c,y,x=!0,w=Ee.bbox;if(null!=w){x=!1;let e=w(n,g);r=e.left,l=e.top,o=e.width,a=e.height}else r=e,l=t,o=a=Ee.size(n,g);if(y=Ee.fill(n,g),c=Ee.stroke(n,g),Pe)g==Bn&&Dn<=Ne.prox&&(i=r,u=l,d=o,h=a,f=x,p=y,m=c);else{let e=Fe[g];null!=e&&(Ae[g]=r,We[g]=l,gt(e,o,a,x),pt(e,y,c),ht(e,Ht(r),Ht(l),ie,le))}}}}if(Pe){let e=Ne.prox;if(Ce||(null==$n?Dn<=e:Dn>e||Bn!=$n)){let e=Fe[0];null!=e&&(Ae[0]=i,We[0]=u,gt(e,d,h,f),pt(e,p,m),ht(e,Ht(i),Ht(u),ie,le))}}}if(Cn.show&&wn)if(null!=e){let[t,s]=zo.scales,[n,o]=zo.match,[a,r]=e.cursor.sync.scales,i=e.cursor.drag;if(vn=i._x,Sn=i._y,vn||Sn){let i,u,d,h,f,{left:p,top:m,width:g,height:b}=e.select,y=e.scales[a].ori,x=e.posToVal,w=null!=t&&n(t,a),k=null!=s&&o(s,r);w&&vn?(0==y?(i=p,u=g):(i=m,u=b),d=v[t],h=L(x(i,a),d,l,0),f=L(x(i+u,a),d,l,0),Zn(Wt(h,f),Ot(f-h))):Zn(0,l),k&&Sn?(1==y?(i=p,u=g):(i=m,u=b),d=v[s],h=P(x(i,r),d,c,0),f=P(x(i+u,r),d,c,0),eo(Wt(h,f),Ot(f-h))):eo(0,c)}else uo()}else{let e=Ot(Xs-Gs),t=Ot(Ks-Js);if(1==E.ori){let s=e;e=t,t=s}vn=kn.x&&e>=kn.dist,Sn=kn.y&&t>=kn.dist;let s,n,o=kn.uni;null!=o?vn&&Sn&&(vn=e>=o,Sn=t>=o,vn||Sn||(t>e?Sn=!0:vn=!0)):kn.x&&kn.y&&(vn||Sn)&&(vn=Sn=!0),vn&&(0==E.ori?(s=Ys,n=Qs):(s=Vs,n=Zs),Zn(Wt(s,n),Ot(n-s)),Sn||eo(0,c)),Sn&&(1==E.ori?(s=Ys,n=Qs):(s=Vs,n=Zs),eo(Wt(s,n),Ot(n-s)),vn||Zn(0,l)),vn||Sn||(Zn(0,0),eo(0,0))}if(kn._x=vn,kn._y=Sn,null==e){if(a){if(null!=Oo){let[e,t]=zo.scales;zo.values[0]=null!=e?Vn(0==E.ori?Qs:Zs,e):null,zo.values[1]=null!=t?Vn(1==E.ori?Qs:Zs,t):null}$o(qe,n,Qs,Zs,ie,le,r)}if(Le){let e=a&&zo.setSeries,t=Ne.prox;null==$n?Dn<=t&&An(Bn,Jn,!0,e):Dn>t?An(null,Jn,!0,e):Bn!=$n&&An(Bn,Jn,!0,e)}}Ce&&(B.idx=r,so()),!1!==s&&Io("setCursor")}n.setLegend=so;let ao=null;function ro(e=!1){e?ao=null:(ao=p.getBoundingClientRect(),Io("syncRect",ao))}function io(e,t,s,n,o,a,r){$._lock||wn&&null!=e&&0==e.movementX&&0==e.movementY||(lo(e,t,s,n,o,a,0,!1,null!=e),null!=e?oo(null,!0,!0):oo(t,!0,!1))}function lo(e,t,s,o,a,r,l,c,u){if(null==ao&&ro(!1),je(e),null!=e)s=e.clientX-ao.left,o=e.clientY-ao.top;else{if(s<0||o<0)return Qs=-10,void(Zs=-10);let[e,n]=zo.scales,l=t.cursor.sync,[c,u]=l.values,[d,h]=l.scales,[f,p]=zo.match,m=t.axes[0].side%2==1,g=0==E.ori?ie:le,b=1==E.ori?ie:le,y=m?r:a,x=m?a:r,w=m?o:s,k=m?s:o;if(s=null!=d?f(e,d)?i(c,v[e],g,0):-10:g*(w/y),o=null!=h?p(n,h)?i(u,v[n],b,0):-10:b*(k/x),1==E.ori){let e=s;s=o,o=e}}!u||null!=t&&t.cursor.event.type!=qe||((s<=1||s>=ie-1)&&(s=ls(s,ie)),(o<=1||o>=le-1)&&(o=ls(o,le))),c?(Gs=s,Js=o,[Ys,Vs]=$.move(n,s,o)):(Qs=s,Zs=o)}Object.defineProperty(n,"rect",{get:()=>(null==ao&&ro(!1),ao)});const co={width:0,height:0,left:0,top:0};function uo(){Pn(co,!1)}let ho,fo,po,mo;function go(e,t,s,o,a,r,i){wn=!0,vn=Sn=kn._x=kn._y=!1,lo(e,t,s,o,a,r,0,!0,!1),null!=e&&(ne(Je,tt,bo,!1),$o(Ge,n,Ys,Vs,ie,le,null));let{left:l,top:c,width:u,height:d}=Cn;ho=l,fo=c,po=u,mo=d}function bo(e,t,s,o,a,r,i){wn=kn._x=kn._y=!1,lo(e,t,s,o,a,r,0,!1,!0);let{left:l,top:c,width:u,height:d}=Cn,h=u>0||d>0,f=ho!=l||fo!=c||po!=u||mo!=d;if(h&&f&&Pn(Cn),kn.setScale&&h&&f){let e=l,t=u,s=c,n=d;if(1==E.ori&&(e=c,t=d,s=l,n=u),vn&&Fn(C,Vn(e,C),Vn(e+t,C)),Sn)for(let o in v){let e=v[o];o!=C&&null==e.from&&e.min!=Xt&&Fn(o,Vn(s+n,o),Vn(s,o))}uo()}else $.lock&&($._lock=!$._lock,oo(t,!0,null!=e));null!=e&&(oe(Je,tt),$o(Je,n,Qs,Zs,ie,le,null))}function yo(e,t,s,o,a,r,i){$._lock||(je(e),ps(),uo(),null!=e&&$o(Xe,n,Qs,Zs,ie,le,null))}function xo(){k.forEach(Do),_e(n.width,n.height,!0)}xt(Qe,st,xo);const wo={};wo.mousedown=go,wo.mousemove=io,wo.mouseup=bo,wo.dblclick=yo,wo.setSeries=(e,t,s,o)=>{-1!=(s=(0,zo.match[2])(n,t,s))&&An(s,o,!0,!1)},W&&(ne(Ge,p,go),ne(qe,p,io),ne(Ye,p,e=>{je(e),ro(!1)}),ne(Ve,p,function(e,t,s,n,o,a,r){if($._lock)return;je(e);let i=wn;if(wn){let e,t,s=!0,n=!0,o=10;0==E.ori?(e=vn,t=Sn):(e=Sn,t=vn),e&&t&&(s=Qs<=o||Qs>=ie-o,n=Zs<=o||Zs>=le-o),e&&s&&(Qs=Qs<Ys?0:ie),t&&n&&(Zs=Zs<Vs?0:le),oo(null,!0,!0),wn=!1}Qs=-10,Zs=-10,O.fill(null),oo(null,!0,!0),i&&(wn=i)}),ne(Xe,p,yo),ko.add(n),n.syncRect=ro);const vo=n.hooks=e.hooks||{};function Io(e,t,s){tn?dn.push([e,t,s]):e in vo&&vo[e].forEach(e=>{e.call(null,n,t,s)})}(e.plugins||[]).forEach(e=>{for(let t in e.hooks)vo[t]=(vo[t]||[]).concat(e.hooks[t])});const Ro=(e,t,s)=>s,zo=Ms({key:null,setSeries:!1,filters:{pub:os,sub:os},scales:[C,y[1]?y[1].scale:null],match:[as,as,Ro],values:[null,null]},$.sync);2==zo.match.length&&zo.match.push(Ro),$.sync=zo;const Oo=zo.key,Bo=Yn(Oo);function $o(e,t,s,n,o,a,r){zo.filters.pub(e,t,s,n,o,a,r)&&Bo.pub(e,t,s,n,o,a,r)}function Ho(){Io("init",e,t),us(t||e.data,!1),F[C]?xn(C,F[C]):ps(),Se=Cn.show&&(Cn.width>0||Cn.height>0),ve=Ce=!0,_e(e.width,e.height)}return Bo.sub(n),n.pub=function(e,t,s,n,o,a,r){zo.filters.sub(e,t,s,n,o,a,r)&&wo[e](null,t,s,n,o,a,r)},n.destroy=function(){Bo.unsub(n),ko.delete(n),se.clear(),wt(Qe,st,xo),c.remove(),null==q||q.remove(),Io("destroy")},y.forEach(et),k.forEach(function(e,t){if(e._show=e.show,e.show){let s=e.side%2,o=v[e.scale];null==o&&(e.scale=s?y[1].scale:C,o=v[e.scale]);let a=o.time;e.size=es(e.size),e.space=es(e.space),e.rotate=es(e.rotate),ys(e.incrs)&&e.incrs.forEach(e=>{!hs.has(e)&&hs.set(e,fs(e))}),e.incrs=es(e.incrs||(2==o.distr?Ws:a?1==b?sn:an:Us)),e.splits=es(e.splits||(a&&1==o.distr?I:3==o.distr?En:4==o.distr?Nn:jn)),e.stroke=es(e.stroke),e.grid.stroke=es(e.grid.stroke),e.ticks.stroke=es(e.ticks.stroke),e.border.stroke=es(e.border.stroke);let r=e.values;e.values=ys(r)&&!ys(r[0])?es(r):a?ys(r)?un(A,cn(r,D)):ws(r)?function(e,t){let s=Rs(t);return(t,n,o,a,r)=>n.map(t=>s(e(t)))}(A,r):r||R:r||Tn,e.filter=es(e.filter||(o.distr>=3&&10==o.log?In:3==o.distr&&2==o.log?Rn:ss)),e.font=Ao(e.font),e.labelFont=Ao(e.labelFont),e._size=e.size(n,null,t,0),e._space=e._rotate=e._incrs=e._found=e._splits=e._values=null,e._size>0&&(nt[t]=!0,e._el=ut("u-axis",h))}}),s?s instanceof HTMLElement?(s.appendChild(c),Ho()):s(n,Ho):Ho(),n}Io.assign=Ms,Io.fmtNum=It,Io.rangeNum=Pt,Io.rangeLog=Tt,Io.rangeAsinh=jt,Io.orient=Vn,Io.pxRatio=ot,Io.join=function(e,t){if(function(e){let t=e[0][0],s=t.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=s)return!1;if(o!=t)for(let e=0;e<s;e++)if(o[e]!=t[e])return!1}return!0}(e)){let t=e[0].slice();for(let s=1;s<e.length;s++)t.push(...e[s].slice(1));return function(e,t=100){const s=e.length;if(s<=1)return!0;let n=0,o=s-1;for(;n<=o&&null==e[n];)n++;for(;o>=n&&null==e[o];)o--;if(o<=n)return!0;const a=Ut(1,Bt((o-n+1)/t));for(let r=e[n],i=n+a;i<=o;i+=a){const t=e[i];if(null!=t){if(t<=r)return!1;r=t}}return!0}(t[0])||(t=function(e){let t=e[0],s=t.length,n=Array(s);for(let a=0;a<n.length;a++)n[a]=a;n.sort((e,s)=>t[e]-t[s]);let o=[];for(let a=0;a<e.length;a++){let t=e[a],r=Array(s);for(let e=0;e<s;e++)r[e]=t[n[e]];o.push(r)}return o}(t)),t}let s=new Set;for(let r=0;r<e.length;r++){let t=e[r][0],n=t.length;for(let e=0;e<n;e++)s.add(t[e])}let n=[Array.from(s).sort((e,t)=>e-t)],o=n[0].length,a=new Map;for(let r=0;r<o;r++)a.set(n[0][r],r);for(let r=0;r<e.length;r++){let s=e[r],i=s[0];for(let e=1;e<s.length;e++){let l=s[e],c=Array(o).fill(void 0),u=t?t[r][e]:1,d=[];for(let e=0;e<l.length;e++){let t=l[e],s=a.get(i[e]);null===t?0!=u&&(c[s]=t,2==u&&d.push(s)):c[s]=t}Ts(c,d,o),n.push(c)}}return n},Io.fmtDate=Rs,Io.tzDate=function(e,t){let s;return"UTC"==t||"Etc/UTC"==t?s=new Date(+e+6e4*e.getTimezoneOffset()):t==zs?s=e:(s=new Date(e.toLocaleString("en-US",{timeZone:t})),s.setMilliseconds(e.getMilliseconds())),s},Io.sync=Yn;{Io.addGap=function(e,t,s){let n=e[e.length-1];n&&n[0]==t?n[1]=s:e.push([t,s])},Io.clipGaps=Zn;let e=Io.paths={points:po};e.linear=yo,e.stepped=function(e){const t=Ft(e.align,1),s=Ft(e.ascDesc,!1),n=Ft(e.alignGaps,0),o=Ft(e.extend,!1);return(e,a,r,i)=>Vn(e,a,(l,c,u,d,h,f,p,m,g,b,y)=>{[r,i]=_t(u,r,i);let x=l.pxRound,{left:w,width:k}=e.bbox,v=e=>x(f(e,d,b,m)),S=e=>x(p(e,h,y,g)),C=0==d.ori?ao:ro;const _={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},M=_.stroke,T=d.dir*(0==d.ori?1:-1);let j=S(u[1==T?r:i]),E=v(c[1==T?r:i]),N=E,L=E;o&&-1==t&&(L=w,C(M,L,j)),C(M,E,j);for(let e=1==T?r:i;e>=r&&e<=i;e+=T){let s=u[e];if(null==s)continue;let n=v(c[e]),o=S(s);1==t?C(M,n,j):C(M,N,o),C(M,n,o),j=o,N=n}let P=N;o&&1==t&&(P=w+k,C(M,P,j));let[F,A]=Xn(e,a);if(null!=l.fill||0!=F){let t=_.fill=new Path2D(M),s=S(l.fillTo(e,a,l.min,l.max,F));C(t,P,s),C(t,L,s)}if(!l.spanGaps){let o=[];o.push(...eo(c,u,r,i,T,v,n));let h=l.width*ot/2,f=s||1==t?h:-h,p=s||-1==t?-h:h;o.forEach(e=>{e[0]+=f,e[1]+=p}),_.gaps=o=l.gaps(e,a,r,i,o),_.clip=Zn(o,d.ori,m,g,b,y)}return 0!=A&&(_.band=2==A?[Qn(e,a,r,i,M,-1),Qn(e,a,r,i,M,1)]:Qn(e,a,r,i,M,A)),_})},e.bars=function(e){const t=Ft((e=e||ms).size,[.6,Xt,1]),s=e.align||0,n=e.gap||0;let o=e.radius;o=null==o?[0,0]:"number"==typeof o?[o,0]:o;const a=es(o),r=1-t[0],i=Ft(t[1],Xt),l=Ft(t[2],1),c=Ft(e.disp,ms),u=Ft(e.each,e=>{}),{fill:d,stroke:h}=c;return(e,t,o,f)=>Vn(e,t,(p,m,g,b,y,x,w,k,v,S,C)=>{let _,M,T=p.pxRound,j=s,E=n*ot,N=i*ot,L=l*ot;0==b.ori?[_,M]=a(e,t):[M,_]=a(e,t);const P=b.dir*(0==b.ori?1:-1);let F,A,D,I=0==b.ori?io:lo,R=0==b.ori?u:(e,t,s,n,o,a,r)=>{u(e,t,s,o,n,r,a)},z=Ft(e.bands,gs).find(e=>e.series[0]==t),O=null!=z?z.dir:0,B=p.fillTo(e,t,p.min,p.max,O),$=T(w(B,y,C,v)),H=S,W=T(p.width*ot),U=!1,q=null,G=null,J=null,Y=null;null==d||0!=W&&null==h||(U=!0,q=d.values(e,t,o,f),G=new Map,new Set(q).forEach(e=>{null!=e&&G.set(e,new Path2D)}),W>0&&(J=h.values(e,t,o,f),Y=new Map,new Set(J).forEach(e=>{null!=e&&Y.set(e,new Path2D)})));let{x0:V,size:X}=c;if(null!=V&&null!=X){j=1,m=V.values(e,t,o,f),2==V.unit&&(m=m.map(t=>e.posToVal(k+t*S,b.key,!0)));let s=X.values(e,t,o,f);A=2==X.unit?s[0]*S:x(s[0],b,S,k)-x(0,b,S,k),H=xo(m,g,x,b,S,k,H),D=H-A+E}else H=xo(m,g,x,b,S,k,H),D=H*r+E,A=H-D;D<1&&(D=0),W>=A/2&&(W=0),D<5&&(T=ts);let K=D>0;A=T(Qt(H-D-(K?W:0),L,N)),F=(0==j?A/2:j==P?0:A)-j*P*((0==j?E/2:0)+(K?W/2:0));const Q={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Z=U?null:new Path2D;let ee=null;if(null!=z)ee=e.data[z.series[1]];else{let{y0:s,y1:n}=c;null!=s&&null!=n&&(g=n.values(e,t,o,f),ee=s.values(e,t,o,f))}let te=_*A,se=M*A;for(let s=1==P?o:f;s>=o&&s<=f;s+=P){let n=g[s];if(null==n)continue;if(null!=ee){let e=ee[s]??0;if(n-e==0)continue;$=w(e,y,C,v)}let o=x(2!=b.distr||null!=c?m[s]:s,b,S,k),a=w(Ft(n,B),y,C,v),r=T(o-F),i=T(Ut(a,$)),l=T(Wt(a,$)),u=i-l;if(null!=n){let o=n<0?se:te,a=n<0?te:se;U?(W>0&&null!=J[s]&&I(Y.get(J[s]),r,l+Bt(W/2),A,Ut(0,u-W),o,a),null!=q[s]&&I(G.get(q[s]),r,l+Bt(W/2),A,Ut(0,u-W),o,a)):I(Z,r,l+Bt(W/2),A,Ut(0,u-W),o,a),R(e,t,s,r-W/2,l,A+W,u)}}return W>0?Q.stroke=U?Y:Z:U||(Q._fill=0==p.width?p._fill:p._stroke??p._fill,Q.width=0),Q.fill=U?G:Z,Q})},e.spline=function(e){return function(e,t){const s=Ft(null==t?void 0:t.alignGaps,0);return(t,n,o,a)=>Vn(t,n,(r,i,l,c,u,d,h,f,p,m,g)=>{[o,a]=_t(l,o,a);let b,y,x,w=r.pxRound,k=e=>w(d(e,c,m,f)),v=e=>w(h(e,u,g,p));0==c.ori?(b=no,x=ao,y=ho):(b=oo,x=ro,y=fo);const S=c.dir*(0==c.ori?1:-1);let C=k(i[1==S?o:a]),_=C,M=[],T=[];for(let e=1==S?o:a;e>=o&&e<=a;e+=S)if(null!=l[e]){let t=k(i[e]);M.push(_=t),T.push(v(l[e]))}const j={stroke:e(M,T,b,x,y,w),fill:null,clip:null,band:null,gaps:null,flags:1},E=j.stroke;let[N,L]=Xn(t,n);if(null!=r.fill||0!=N){let e=j.fill=new Path2D(E),s=v(r.fillTo(t,n,r.min,r.max,N));x(e,_,s),x(e,C,s)}if(!r.spanGaps){let e=[];e.push(...eo(i,l,o,a,S,k,s)),j.gaps=e=r.gaps(t,n,o,a,e),j.clip=Zn(e,c.ori,f,p,m,g)}return 0!=L&&(j.band=2==L?[Qn(t,n,o,a,E,-1),Qn(t,n,o,a,E,1)]:Qn(t,n,o,a,E,L)),j})}(wo,e)}}const Ro=new Map;function zo(e){var t;if(!e.startsWith("var("))return e;const s=Ro.get(e);if(s)return s;const n=e.match(/var\(([^,)]+)(?:,\s*([^)]+))?\)/);if(!n)return e;const o=n[1].trim(),a=(null==(t=n[2])?void 0:t.trim())||"#888888",r=getComputedStyle(document.documentElement).getPropertyValue(o).trim()||a;return Ro.set(e,r),r}const Oo=s.memo(function({timestamps:e,series:t,onHover:o,highlightedKey:a=null,cursorColor:r="rgba(255,255,255,0.5)"}){const i=s.useRef(null),l=s.useRef(null),c=s.useRef(t),u=s.useRef(a),d=s.useRef(o),h=s.useRef(e.length);s.useLayoutEffect(()=>{c.current=t,u.current=a,d.current=o});const f=s.useMemo(()=>{const t=new Array(e.length).fill(1);return[e,t]},[e]),p=s.useMemo(()=>({hooks:{draw:e=>{!function(e,t,s){if(0===t.length)return;const n=e.ctx,o=e.bbox,a=o.left,r=o.top,i=o.width,l=o.height;if(i<=0||l<=0)return;const c=e.data[0],u=c.length;if(0===u)return;const d=c[0],h=c[u-1]-d||1,f=e=>{const t=c[e];return a+(t-d)/h*i},p=e=>r+l*(1-e);for(let m=0;m<t.length;m++){const e=t[m],o=new Array(u).fill(0),a=new Array(u).fill(0);for(let s=0;s<m;s++){const e=t[s].values;for(let t=0;t<u;t++)a[t]+=e[t]??0}for(let t=0;t<u;t++)o[t]=a[t]+(e.values[t]??0);const r=s&&s!==e.key?.3:1,i=zo(e.color);n.save(),n.globalAlpha=r,n.fillStyle=i,n.beginPath();let l=f(0);const c=p(a[0]);let d=p(o[0]);n.moveTo(l,c),n.lineTo(l,d);for(let t=1;t<u;t++){l=f(t);const e=d;d=p(o[t]),n.lineTo(l,e),n.lineTo(l,d)}for(let t=u-1;t>=0;t--){const e=f(t),s=p(a[t]);if(t===u-1)n.lineTo(e,s);else{const o=f(t+1);n.lineTo(o,s),n.lineTo(e,s)}}n.closePath(),n.fill(),n.restore()}}(e,c.current,u.current),function(e){const t=e.ctx,{left:s,top:n,width:o,height:a}=e.bbox,r=window.devicePixelRatio||1,i=function(){const e=getComputedStyle(document.documentElement);return{fontFamily:e.getPropertyValue("--font-data").trim()||'"JetBrains Mono", ui-monospace, monospace',textPrimary:e.getPropertyValue("--text-primary").trim()||"#FFFFFF"}}();t.save(),t.strokeStyle=i.textPrimary,t.globalAlpha=.15,t.lineWidth=1*r,t.setLineDash([4*r,4*r]);for(const c of[.2,.4,.6,.8]){const e=Math.round(n+a*(1-c))+.5;t.beginPath(),t.moveTo(Math.round(s),e),t.lineTo(Math.round(s+o),e),t.stroke()}t.restore(),t.save(),t.font=`bold ${10*r}px ${i.fontFamily}`,t.fillStyle=i.textPrimary,t.textBaseline="middle",t.textAlign="left";const l=8*r;for(const c of[0,20,40,60,80,100]){const e=n+a*(1-c/100),s=Math.max(n+l,Math.min(n+a-l,e));t.fillText(`${c}%`,0,s)}t.restore()}(e)}}}),[]),m=s.useMemo(()=>({width:400,height:200,padding:[8,0,0,32],cursor:{show:!0,x:!0,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!0},y:{range:[0,1]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1}],hooks:{setCursor:[e=>{var t,s;const n=e.cursor.idx;if(null!=n&&n>=0){const s=e.data[0][n];null==(t=d.current)||t.call(d,n,s)}else null==(s=d.current)||s.call(d,null,null)}]},plugins:[p]}),[p]);s.useEffect(()=>{const t=i.current;if(!t||0===e.length)return;const s=h.current,n=e.length,o=Math.abs(n-s);if(!(!l.current||o>100||s>0&&o/s>.1)&&l.current)return l.current.setData(f),void(h.current=n);l.current&&l.current.destroy();const a=t.getBoundingClientRect(),r=Math.floor(a.width)||400,c=Math.floor(a.height)||200,u=new Io({...m,width:r,height:c},f,t);return l.current=u,h.current=n,()=>{u.destroy(),l.current=null}},[m,f,e.length]),s.useEffect(()=>{const e=i.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];if(!t||!l.current)return;const{width:s,height:n}=t.contentRect;s>0&&n>0&&l.current.setSize({width:Math.floor(s),height:Math.floor(n)})});return t.observe(e),()=>{t.disconnect()}},[]),s.useEffect(()=>{l.current&&l.current.redraw()},[a,t]);const g=s.useCallback(()=>{null==o||o(null,null)},[o]);return 0===e.length?n.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No data available"}):n.jsx("div",{ref:i,className:"w-full h-full rounded-2xl overflow-hidden",onMouseLeave:g})}),Bo=s.createContext(null);function $o(e){const t=ie(e);t&&function(e){if("undefined"==typeof document)return;const t=function(e){const t={},s=e.surfaces.glass;t["--glass-tint"]=s.tint,t["--glass-light"]=s.light,t["--glass-dark"]=s.dark,t["--glass-reflex-light"]=String(s.reflexLight),t["--glass-reflex-dark"]=String(s.reflexDark),t["--glass-blur"]=`${s.blur}px`,t["--glass-blur-elevated"]=`${s.blurElevated}px`,t["--glass-brightness"]=String(s.brightness),t["--glass-bg-opacity"]=`${s.opacity}%`,t["--glass-bg-opacity-elevated"]=`${s.opacityElevated}%`,t["--sidebar-tint"]=e.surfaces.sidebar.tint,t["--tooltip-bg"]=e.colors.bg.surface,t["--hover-tint"]=`rgba(${B(e.colors.accent.primary)}, 0.08)`,t["--shadow-tint"]=`rgba(${B(e.colors.accent.primary)}, 0.35)`,t["--bg-body"]=e.colors.bg.body,t["--bg-surface"]=e.colors.bg.surface,t["--bg-elevated"]=e.colors.bg.elevated,t["--bg-subtle"]=e.colors.bg.subtle,t["--border-subtle"]=e.colors.border.subtle,t["--border-strong"]=e.colors.border.strong,t["--text-primary"]=e.colors.text.primary,t["--text-secondary"]=e.colors.text.secondary,t["--text-muted"]=e.colors.text.muted,t["--text-invert"]=e.colors.text.inverse,t["--accent-primary"]=e.colors.accent.primary,t["--accent-secondary"]=e.colors.accent.secondary,t["--accent-tertiary"]=e.colors.accent.tertiary,t["--accent-success"]=e.colors.accent.success,t["--accent-danger"]=e.colors.accent.danger,t["--signal-excellent"]=e.colors.signal.excellent,t["--signal-good"]=e.colors.signal.good,t["--signal-fair"]=e.colors.signal.fair,t["--signal-poor"]=e.colors.signal.poor,t["--signal-critical"]=e.colors.signal.critical,t["--signal-unknown"]=e.colors.signal.unknown,t["--sparkline-excellent"]=e.colors.signal.excellent,t["--sparkline-good"]=e.colors.signal.good,t["--sparkline-fair"]=e.colors.signal.fair,t["--sparkline-poor"]=e.colors.signal.poor,t["--sparkline-critical"]=e.colors.signal.critical,t["--status-success"]=e.colors.status.success,t["--status-warning"]=e.colors.status.warning,t["--status-danger"]=e.colors.status.danger,t["--status-info"]=e.colors.status.info,t["--status-muted"]=e.colors.status.muted;const n=e.colors.chart;t["--pkt-advert"]=e.colors.accent.secondary,t["--pkt-flood"]=e.colors.accent.tertiary,t["--pkt-txt-msg"]=e.colors.accent.success,t["--pkt-ack"]=n.c8,t["--pkt-trace"]=n.c3,t["--pkt-req"]=n.c2,t["--pkt-response"]=n.c5,t["--pkt-grp-txt"]=e.colors.map.room,t["--pkt-grp-data"]=e.colors.accent.danger,t["--pkt-path"]=n.c3,t["--pkt-anon"]=e.colors.accent.secondary,t["--pkt-unknown"]=e.colors.status.muted,t["--route-flood"]=e.colors.accent.tertiary,t["--route-direct"]=e.colors.accent.secondary,t["--route-transport"]=n.c8,t["--chart-1"]=n.c1,t["--chart-2"]=n.c2,t["--chart-3"]=n.c3,t["--chart-4"]=n.c4,t["--chart-5"]=n.c5,t["--chart-6"]=n.c6,t["--chart-7"]=n.c7,t["--chart-8"]=n.c8,t["--chart-grid"]=n.grid,t["--chart-axis-tick"]=n.axis,t["--chart-cursor"]=n.cursor,t["--metric-received"]=e.colors.metric.received,t["--metric-forwarded"]=e.colors.metric.forwarded,t["--metric-transmitted"]=e.colors.metric.transmitted,t["--metric-dropped"]=e.colors.metric.dropped,t["--metric-neutral"]=e.colors.text.secondary,t["--log-debug"]=e.colors.status.muted,t["--log-info"]=e.colors.status.info,t["--log-warning"]=e.colors.status.warning,t["--log-error"]=e.colors.accent.danger,t["--log-critical"]=e.colors.accent.danger;const o=e.colors.map;return t["--map-node-fill"]=o.nodeFill,t["--map-node-stroke"]=o.nodeStroke,t["--map-hub-color"]=o.hub,t["--map-local-color"]=o.local,t["--map-neighbor-color"]=o.neighbor,t["--map-mobile-color"]=o.mobile,t["--map-room-color"]=o.room,t["--map-edge-rest"]=o.edge,t["--map-edge-rest-bright"]=e.colors.border.strong,t["--map-edge-rest-dim"]=e.colors.bg.subtle,t["--map-edge-hover-direct"]=o.edgeHover,t["--map-edge-hover-loop"]=o.hub,t["--map-edge-hover-standard"]=e.colors.text.muted,t["--map-edge-hover-neighbor"]=o.local,t["--link-strong"]=e.colors.accent.success,t["--link-medium"]=e.colors.accent.secondary,t["--link-weak"]=e.colors.accent.danger,t["--hop-0"]=e.colors.accent.tertiary,t["--hop-1"]=e.colors.accent.success,t["--hop-2"]=n.c3,t["--hop-3"]=e.colors.accent.secondary,t["--hop-distant"]=e.colors.text.muted,t["--hop-hub"]=o.local,t["--icon-page-title"]=e.colors.accent.primary,t["--icon-card-title"]=e.colors.accent.primary,t["--icon-widget"]=e.colors.text.muted,t["--icon-action"]=e.colors.text.secondary,t["--icon-nav"]=e.colors.text.muted,t["--icon-nav-active"]=e.colors.accent.primary,t["--toggle-on"]=e.colors.accent.success,t["--toggle-off"]=e.colors.bg.elevated,t["--font-display"]=e.typography.font.display,t["--font-data"]=e.typography.font.mono,t["--font-normal"]=String(e.typography.weight.normal),t["--font-medium"]=String(e.typography.weight.medium),t["--font-semibold"]=String(e.typography.weight.semibold),t["--font-bold"]=String(e.typography.weight.bold),t["--theme-transition"]=`${e.motion.slow} ${e.motion.easing}`,function(e){if(!I())return e;const t={},s=/^#[0-9A-Fa-f]{3,6}$/;for(const[n,o]of Object.entries(e))t[n]=s.test(o)?D(o):o;return t}(t)}(e),s=document.documentElement;for(const[n,o]of Object.entries(t))s.style.setProperty(n,o)}(t),document.documentElement.dataset.colorScheme=e}function Ho({children:e}){const[t,o]=s.useState(()=>function(){if("undefined"==typeof window)return xe;try{let t=localStorage.getItem(we),s=localStorage.getItem(ke);const n=localStorage.getItem(ve);if(!t&&!s){const e=localStorage.getItem(Se);if(e){const n=ye.find(t=>t.id===e);n&&(t=n.colorScheme,s=n.backgroundImage,localStorage.setItem(we,t),localStorage.setItem(ke,s),localStorage.removeItem(Se))}}const o=t&&"string"==typeof(e=t)&&ge.some(t=>t.id===e)?t:xe.colorScheme,a=null!=s?s:xe.backgroundImage;let r=xe.brightness;if(n){const e=parseInt(n,10);!isNaN(e)&&e>=0&&e<=100&&(r=e)}return{colorScheme:o,backgroundImage:a,brightness:r}}catch{return xe}var e}());s.useEffect(()=>{$o(t.colorScheme),Ro.clear(),requestAnimationFrame(()=>{!function(){if("undefined"==typeof window)return;for(const t of Te){const e=Fe(`--palette-${t}-bright`),s=Fe(`--palette-${t}`),n=e||s;if(!n)continue;const o=Pe(n);for(const a of Me)Ae(`--palette-${t}-${a}`,o[a])}const e=Fe("--palette-bg-4");if(e){const t=Pe(e);for(const e of Me)Ae(`--palette-neutral-${e}`,t[e])}}()})},[t.colorScheme]),s.useEffect(()=>{!function(e){if("undefined"!=typeof window)try{localStorage.setItem(we,e.colorScheme),localStorage.setItem(ke,e.backgroundImage),localStorage.setItem(ve,String(e.brightness))}catch{}}(t)},[t]),s.useEffect(()=>{be.forEach(e=>{(new Image).src=e.src})},[]);const a=s.useCallback(e=>{o(t=>({...t,colorScheme:e}))},[]),r=s.useCallback(e=>{const t=be.find(t=>t.src===e);o(s=>({...s,backgroundImage:e,brightness:(null==t?void 0:t.suggestedBrightness)??s.brightness}))},[]),i=s.useCallback(e=>{const t=Math.max(0,Math.min(100,Math.round(e)));o(e=>({...e,brightness:t}))},[]),l=s.useCallback(e=>{const t=ye.find(t=>t.id===e);t&&o(e=>({...e,colorScheme:t.colorScheme,backgroundImage:t.backgroundImage}))},[]),c=s.useMemo(()=>({theme:t,setColorScheme:a,setBackgroundImage:r,setBrightness:i,setThemePreset:l}),[t,a,r,i,l]);return n.jsx(Bo.Provider,{value:c,children:e})}function Wo(){const e=s.useContext(Bo);if(!e)throw new Error("useTheme must be used within a ThemeProvider. Wrap your app with <ThemeProvider> in App.tsx.");return e}const Uo="0.9.146",qo="'JetBrains Mono', monospace",Go=s.memo(function({height:e=16,responsive:t=!1,className:s=""}){const o="var(--accent-primary)",a="#FFFFFF";if(t){const e=145,t=24;return n.jsxs("svg",{className:s,viewBox:`0 0 ${e} ${t}`,preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"pyMC:Console",style:{display:"block",width:"80%",height:"auto"},children:[n.jsx("style",{children:`\n          .logo-text {\n            font-family: ${qo};\n          }\n          .logo-accent {\n            fill: var(--accent-primary, #719CDF);\n          }\n        `}),n.jsxs("text",{x:"0",y:"18",className:"logo-text",fontSize:"20",fontWeight:"400",letterSpacing:"-0.02em",children:[n.jsx("tspan",{className:"logo-accent",children:"py"}),n.jsx("tspan",{fill:a,children:"MC"}),n.jsx("tspan",{className:"logo-accent",children:":"}),n.jsx("tspan",{fill:a,children:"Console"})]})]})}const r="string"==typeof e?parseFloat(e):e,i={fontFamily:qo,fontSize:.8*r+"px",fontWeight:400,lineHeight:1,letterSpacing:"-0.02em",whiteSpace:"nowrap"};return n.jsxs("span",{className:s,style:i,role:"img","aria-label":"pyMC:Console",children:[n.jsx("span",{style:{color:o},children:"py"}),n.jsx("span",{style:{color:a},children:"MC"}),n.jsx("span",{style:{color:o},children:":"}),n.jsx("span",{style:{color:a},children:"Console"})]})}),Jo={0:"REQ",1:"RESPONSE",2:"TXT_MSG",3:"ACK",4:"ADVERT",5:"GRP_TXT",6:"GRP_DATA",7:"ANON_REQ",8:"PATH",9:"TRACE",10:"MULTIPART",15:"RAW_CUSTOM"},Yo={0:"T_FLOOD",1:"FLOOD",2:"DIRECT",3:"T_DIRECT"},Vo={REQ:0,RESPONSE:1,TXT_MSG:2,ACK:3,ADVERT:4,GRP_TXT:5,GRP_DATA:6,ANON_REQ:7,PATH:8,TRACE:9,MULTIPART:10,RAW_CUSTOM:15};function Xo(e){return 1===e||0===e}const Ko={spreadingFactor:7,bandwidthHz:125e3,codingRate:5,preambleLength:8,crcEnabled:!0,explicitHeader:!0};function Qo(e){if(e.raw_packet){const t=e.raw_packet;if(/^[0-9a-fA-F]+$/.test(t)&&t.length%2==0)return t.length/2;if(/^[A-Za-z0-9+/=]+$/.test(t)){const e=(t.match(/=+$/)||[""])[0].length;return Math.floor(3*t.length/4)-e}return t.length}if(e.length&&e.length>0)return e.length;if(e.payload_length&&e.payload_length>0)return e.payload_length;if(e.payload){const t=e.payload;return/^[0-9a-fA-F]+$/.test(t)&&t.length%2==0?t.length/2:t.length}return 32}function Zo(e,t={}){const s=t.spreadingFactor??Ko.spreadingFactor,n=t.bandwidthHz??Ko.bandwidthHz,o=t.codingRate??Ko.codingRate,a=t.preambleLength??Ko.preambleLength??8,r=t.crcEnabled??Ko.crcEnabled?1:0,i=t.explicitHeader??Ko.explicitHeader?0:1,l=s>=11&&n<=125e3?1:0,c=n/1e3,u=Math.pow(2,s)/c,d=(a+4.25)*u,h=Math.max(8*e-4*s+28+16*r-20*i,0),f=4*(s-2*l);return d+(8+Math.ceil(h/f)*o)*u}const ea="pymc_jwt_token",ta="pymc_client_id",sa="pymc_remember_me",na=new Set;function oa(e){return na.add(e),()=>na.delete(e)}function aa(e){for(const s of na)try{s(e)}catch(t){}}function ra(){let e=localStorage.getItem(ta);return e||(e=`${Date.now()}-${Math.random().toString(36).substring(2,15)}`,localStorage.setItem(ta,e)),e}function ia(){return"true"===localStorage.getItem(sa)}function la(e){e?localStorage.setItem(sa,"true"):localStorage.removeItem(sa)}function ca(){return ia()?localStorage:sessionStorage}function ua(){return ca().getItem(ea)||localStorage.getItem(ea)||sessionStorage.getItem(ea)}function da(e){ca().setItem(ea,e),ia()?sessionStorage.removeItem(ea):localStorage.removeItem(ea),aa(e)}function ha(){localStorage.removeItem(ea),sessionStorage.removeItem(ea),aa(null)}function fa(){return!(!ua()||ma()&&(ha(),1))}function pa(e){try{const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch{return null}}function ma(){const e=ua();if(!e)return!0;const t=pa(e);return!t||!t.exp||Date.now()>=1e3*t.exp-6e4}function ga(){const e=ua();if(!e)return 0;const t=pa(e);return t&&t.exp?Math.max(0,Math.floor((1e3*t.exp-Date.now())/1e3)):0}function ba(){const e=ua();if(!e)return!1;const t=pa(e);if(!t||!t.exp)return!1;const s=1e3*t.exp-Date.now();return s>0&&s<3e5}function ya(){const e=ua();if(!e)return null;const t=pa(e);return t&&t.sub?t.sub:null}async function xa(e,t,s=!1){la(s);try{const s=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,client_id:ra()})}),n=s.headers.get("content-type");if(!n||!n.includes("application/json"))return{success:!1,error:`Server error: ${s.status}`};const o=await s.json();return o.success&&o.token?(da(o.token),{success:!0}):{success:!1,error:o.error||"Login failed"}}catch(n){return{success:!1,error:"Connection error. Please try again."}}}async function wa(){const e=ua();if(!e)return!1;const t=pa(e);(null==t?void 0:t.exp)&&Math.floor((1e3*t.exp-Date.now())/1e3);try{const t=await fetch("/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({client_id:ra()})});if(!t.ok){let e="";try{const s=await t.json();e=s.error||JSON.stringify(s)}catch{e=t.statusText}return!1}const s=await t.json();if(s.success&&s.token){da(s.token);const e=pa(s.token);return(null==e?void 0:e.exp)&&Math.floor((1e3*e.exp-Date.now())/1e3),!0}return!1}catch(s){return!1}}let ka=null;async function va(){const e=ua();if(!e)return!1;const t=pa(e);return(null==t?void 0:t.exp)&&Math.floor((1e3*t.exp-Date.now())/1e3),!ba()||ka||(ka=wa().finally(()=>{ka=null}),ka)}function Sa(){ha()}let Ca=!1;function _a(){if(Ca)return;if("undefined"==typeof document)return;const e=async()=>{if("visible"!==document.visibilityState)return;if(!ua())return;if(ma())return ha(),void("undefined"==typeof window||window.location.pathname.includes("/login")||(window.location.href="/login"));const e=ga();e>0&&e<300&&await wa()};document.addEventListener("visibilitychange",e),Ca=!0,"visible"===document.visibilityState&&e()}const Ma=Object.freeze(Object.defineProperty({__proto__:null,clearToken:ha,getClientId:ra,getRememberMe:ia,getToken:ua,getTokenTimeRemaining:ga,getUsername:ya,isAuthenticated:fa,isTokenExpired:ma,login:xa,logout:Sa,onTokenChange:oa,parseJWT:pa,refreshToken:wa,refreshTokenIfNeeded:va,setRememberMe:la,setToken:da,shouldRefreshToken:ba,startVisibilityBasedRefresh:_a},Symbol.toStringTag,{value:"Module"})),Ta=new Map;let ja=!1;async function Ea(e,t,s=!1){const n=function(e,t){return(null==t?void 0:t.method)&&"GET"!==t.method?"":e}(e,t);if(n){const e=Ta.get(n);if(e)return e}const o=`${e}`;!s&&ba()&&await wa();const a=ua();if(!a&&!e.includes("/auth/"))throw window.location.href="/login",new Error("Not authenticated");const r=a?{Authorization:`Bearer ${a}`}:{};if(null==t?void 0:t.headers){const e=t.headers;e instanceof Headers?e.forEach((e,t)=>{r[t]=e}):Array.isArray(e)?e.forEach(([e,t])=>{r[e]=t}):Object.assign(r,e)}(null==t?void 0:t.body)&&(r["Content-Type"]="application/json");const i=(async()=>{const n=await fetch(o,{...t,headers:r});if(401===n.status){if(!s&&!ja&&await wa())return Ea(e,t,!0);throw ja||(ja=!0,ha(),window.location.replace("/login")),new Error("Session expired. Please log in again.")}if(!n.ok)throw new Error(`API error: ${n.status} ${n.statusText}`);return n.json()})();return n&&(Ta.set(n,i),i.finally(()=>{Ta.delete(n)})),i}function Na(e){return e&&"chat node"===e.toLowerCase()?"Companion":e}async function La(){return function(e){if(e.neighbors)for(const t of Object.values(e.neighbors))t.contact_type=Na(t.contact_type);return e}(await Ea("/api/stats"))}async function Pa(){return Ea("/api/logs")}async function Fa(e=24){return Ea(`/api/noise_floor_history?hours=${e}`)}async function Aa(){return Ea("/api/hardware_stats")}async function Da(){return Ea("/api/send_advert",{method:"POST",body:"{}"})}async function Ia(e){return Ea("/api/set_mode",{method:"POST",body:JSON.stringify({mode:e})})}async function Ra(e){return Ea("/api/set_duty_cycle",{method:"POST",body:JSON.stringify({enabled:e})})}const za=new Map;function Oa(e=!1){if(e)za.clear();else for(const[t]of za)parseInt(t.split("-")[0],10)<=60&&za.delete(t)}function Ba(e,t,s,n){const o=60*e/t,a=Math.floor(Date.now()/1e3),r=Math.floor(a/o)*o,i=r-60*e,l=s.filter(e=>e.timestamp>=i&&e.timestamp<=r),c=n?function(e){var t;const s=null==(t=null==e?void 0:e.config)?void 0:t.radio;return{spreadingFactor:(null==s?void 0:s.spreading_factor)??Ko.spreadingFactor,bandwidthHz:(null==s?void 0:s.bandwidth)??Ko.bandwidthHz,codingRate:(null==s?void 0:s.coding_rate)??Ko.codingRate,preambleLength:(null==s?void 0:s.preamble_length)??Ko.preambleLength,crcEnabled:!0,explicitHeader:!0}}(n):Ko,u=function(e,t,s,n,o){const a=new Array(t),r=new Array(t),i=new Array(t),l=new Array(t),c=new Array(t);for(let d=0;d<t;d++){const e=s+d*n,t={bucket:d,start:e,end:e+n,count:0,airtime_ms:0,avg_snr:0,avg_rssi:0};a[d]={...t},r[d]={...t},i[d]={...t},l[d]={...t},c[d]={snr:0,rssi:0,count:0}}const u=e.length;for(let d=0;d<u;d++){const u=e[d],h=Math.floor((u.timestamp-s)/n);if(h<0||h>=t)continue;const f=Zo(Qo(u),o),p=u.packet_origin;"tx_local"===p?(r[h].count++,r[h].airtime_ms+=f):"tx_forward"===p||u.transmitted?(i[h].count++,i[h].airtime_ms+=f):u.drop_reason&&(l[h].count++,l[h].airtime_ms+=f),"tx_local"!==p&&(a[h].count++,a[h].airtime_ms+=f,c[h].snr+=u.snr||0,c[h].rssi+=u.rssi||0,c[h].count++)}for(let d=0;d<t;d++)c[d].count>0&&(a[d].avg_snr=c[d].snr/c[d].count,a[d].avg_rssi=c[d].rssi/c[d].count);return{received:a,transmitted:r,forwarded:i,dropped:l}}(l,t,i,o,c);return{time_range_minutes:e,bucket_count:t,bucket_duration_seconds:o,start_time:i,end_time:r,...u}}async function $a(e){return Ea("/api/update_radio_config",{method:"POST",body:JSON.stringify(e)})}async function Ha(e){return Ea("/api/set_log_level",{method:"POST",body:JSON.stringify({level:e})})}async function Wa(){return Ea("/api/transport_keys")}async function Ua(e){return Ea("/api/transport_keys",{method:"POST",body:JSON.stringify(e)})}async function qa(e,t){return Ea(`/api/transport_key/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function Ga(e){return Ea(`/api/transport_key/${e}`,{method:"DELETE"})}async function Ja(e){return Ea("/api/global_flood_policy",{method:"POST",body:JSON.stringify({global_flood_allow:e})})}async function Ya(e,t=10){return Ea("/api/ping_neighbor",{method:"POST",body:JSON.stringify({target_id:e,timeout:t})})}async function Va(e){return Ea("/api/update_web_config",{method:"POST",body:JSON.stringify(e)})}async function Xa(){return Ea("/api/check_pymc_console")}async function Ka(){return Ea("/api/restart_service",{method:"POST",body:"{}"})}async function Qa(){return Ea("/auth/tokens")}async function Za(e){return Ea("/auth/tokens",{method:"POST",body:JSON.stringify({name:e})})}async function er(e){return Ea(`/auth/tokens/${e}`,{method:"DELETE"})}const tr="pymc-packet-cache",sr="pymc-packet-cache-meta",nr=36e5,or=12096e5,ar=5e3,rr=5e5,ir=new class{constructor(){t(this,"packets",new Map),t(this,"sortedPackets",[]),t(this,"sortedDirty",!0),t(this,"meta",{oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,topologyLoadComplete:!1}),t(this,"isLoading",!1),t(this,"isBackgroundLoading",!1),t(this,"isTopologyLoading",!1),t(this,"listeners",new Set),t(this,"loadProgress",null),t(this,"statusMessage",""),this.loadFromStorage()}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{isLoading:this.isLoading,isBackgroundLoading:this.isBackgroundLoading,isTopologyLoading:this.isTopologyLoading,backgroundLoadComplete:this.meta.backgroundLoadComplete,topologyLoadComplete:this.meta.topologyLoadComplete,packetCount:this.packets.size,statusMessage:this.statusMessage,loadProgress:this.loadProgress}}getPackets(){return this.sortedDirty&&(this.sortedPackets=Array.from(this.packets.values()).sort((e,t)=>(e.timestamp??0)-(t.timestamp??0)),this.sortedDirty=!1),this.sortedPackets}isStale(){return 0===this.packets.size||Date.now()-this.meta.lastUpdated>nr}isHeavyLoadInProgress(){return this.isBackgroundLoading||this.isTopologyLoading}async initialLoad(e){if(this.isStale()&&this.packets.size>0&&this.clear(),this.meta.backgroundLoadComplete&&this.packets.size>0)return this.getPackets();this.isLoading=!0;const t=Date.now(),s=Math.floor((t-or)/1e3),n=42e4;this.loadProgress={loaded:0,target:n,percent:0},this.statusMessage="Loading 14-day history...",this.notifyListeners();try{let t;this.packets.size>0&&(this.packets.clear(),this.sortedPackets=[],this.sortedDirty=!0,this.meta.oldestTimestamp=0,this.meta.newestTimestamp=0);let o=0,a=0,r=0;const i=Math.ceil(100);for(let l=0;l<i;l++){const c=Math.min(99,Math.round(this.packets.size/n*100));this.statusMessage="Loading 14-day history...",this.loadProgress={loaded:this.packets.size,target:n,percent:c},this.notifyListeners();const u=await this.fetchChunkWithRetry(t,ar,l,i,s);if(null!==u){if(r=0,!(u.success&&u.data&&u.data.length>0))break;{const n=this.packets.size;this.mergePackets(u.data);const r=this.packets.size-n;o+=r;const i=Math.min(...u.data.map(e=>e.timestamp??1/0));if(i!==1/0&&(void 0===t||i<t)&&(t=i),e&&e(),i!==1/0&&i<=s)break;if(0===r){if(a++,a>=2)break}else a=0;if(u.data.length<ar)break;if(this.packets.size>=rr)break}l<i-1&&await this.delay(300)}else{if(r++,r>=5){this.statusMessage="Connection issues, loaded partial data",this.notifyListeners();break}await this.delay(2e3)}}this.enforceMemoryCap(),this.meta.backgroundLoadComplete=!0,this.loadProgress={loaded:this.packets.size,target:this.packets.size,percent:100},this.notifyListeners(),this.saveToStorage()}catch(o){this.statusMessage="Load failed"}finally{this.isLoading=!1,this.statusMessage="",this.loadProgress=null,this.notifyListeners()}return this.getPackets()}async quickLoad(){return this.initialLoad()}async backgroundLoad(){await this.initialLoad()}async topologyLoad(){if(!this.meta.topologyLoadComplete&&!this.isTopologyLoading)return this.doTopologyLoad()}async forceTopologyLoad(){if(!this.isTopologyLoading)return this.meta.topologyLoadComplete=!1,this.doTopologyLoad()}async forceDeepLoad(){return this.forceTopologyLoad()}async doTopologyLoad(){this.isTopologyLoading=!0;const e=Date.now(),t=Math.floor((e-or)/1e3),s=42e4;this.statusMessage="Loading 14-day topology...",this.loadProgress={loaded:0,target:s,percent:0},this.notifyListeners();try{let e,n=0,o=0,a=0;const r=Math.ceil(100);for(let i=0;i<r;i++){const l=Math.min(99,Math.round(this.packets.size/s*100));this.statusMessage="Loading 14-day topology...",this.loadProgress={loaded:this.packets.size,target:s,percent:l},this.notifyListeners();const c=await this.fetchChunkWithRetry(e,ar,i,r,t);if(null!==c){if(a=0,!(c.success&&c.data&&c.data.length>0))break;{const s=this.packets.size;this.mergePackets(c.data);const a=this.packets.size-s;n+=a;const r=Math.min(...c.data.map(e=>e.timestamp??1/0));if(r!==1/0&&(void 0===e||r<e)&&(e=r),r!==1/0&&r<=t)break;if(0===a){if(o++,o>=2)break}else o=0;if(c.data.length<ar)break;if(this.packets.size>=rr)break}i<r-1&&await this.delay(300)}else{if(a++,a>=5){this.statusMessage="Connection issues, loaded partial data",this.notifyListeners();break}await this.delay(2e3)}}this.statusMessage=`Processing ${this.packets.size.toLocaleString()} packets...`,this.loadProgress={loaded:this.packets.size,target:this.packets.size,percent:100},this.notifyListeners(),this.enforceMemoryCap(),this.meta.topologyLoadComplete=!0,this.saveToStorage()}catch(n){this.statusMessage="Topology load failed"}finally{this.isTopologyLoading=!1,this.statusMessage="",this.loadProgress=null,this.notifyListeners()}}async poll(){try{const e=await this.fetchRecentPackets(100);if(e.success&&e.data){const t=this.packets.size;this.mergePackets(e.data),this.packets.size>t&&(this.saveToStorage(),this.notifyListeners())}}catch(e){}return this.getPackets()}clear(){this.packets.clear(),this.sortedPackets=[],this.sortedDirty=!0,this.meta={oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,topologyLoadComplete:!1},this.clearStorage(),this.notifyListeners()}mergePacketsDirectly(e){const t=this.packets.size;this.mergePackets(e);const s=this.packets.size-t;return s>0&&(this.enforceMemoryCap(),this.saveToStorage(),this.notifyListeners()),s}mergePackets(e){let t=!1;for(const s of e){const e=s.packet_hash;if(e&&!this.packets.has(e)){this.packets.set(e,s),t=!0;const n=s.timestamp??0;(0===this.meta.oldestTimestamp||n<this.meta.oldestTimestamp)&&(this.meta.oldestTimestamp=n),n>this.meta.newestTimestamp&&(this.meta.newestTimestamp=n)}}t&&(this.sortedDirty=!0),this.meta.lastUpdated=Date.now(),this.meta.packetCount=this.packets.size}notifyListeners(){const e=this.getState();for(const t of this.listeners)t(e)}delay(e){return new Promise(t=>setTimeout(t,e))}async fetchChunkWithRetry(e,t,s,n,o){for(let r=0;r<3;r++)try{return await this.fetchFilteredPackets(e,t,!1,o)}catch(a){const e=2===r,t=1e3*Math.pow(2,r);a instanceof Error&&a.name,e||(this.statusMessage=`Retry in ${Math.round(t/1e3)}s...`,this.notifyListeners(),await this.delay(t))}return null}enforceMemoryCap(){if(this.packets.size<=rr)return;const e=this.getPackets(),t=e.length-rr;for(let s=0;s<t;s++){const t=e[s];t.packet_hash&&this.packets.delete(t.packet_hash)}this.sortedDirty=!0,this.meta.packetCount=this.packets.size,e.length>t&&(this.meta.oldestTimestamp=e[t].timestamp??0)}loadFromStorage(){if("undefined"!=typeof window)try{const e=localStorage.getItem(sr);e&&(this.meta=JSON.parse(e));const t=localStorage.getItem(tr);if(t){const e=JSON.parse(t);for(const t of e)t.packet_hash&&this.packets.set(t.packet_hash,t)}if(this.meta.lastUpdated>0&&Date.now()-this.meta.lastUpdated>nr)return void this.clear();this.meta.backgroundLoadComplete=!1;const s=37500;this.meta.topologyLoadComplete&&this.packets.size<s&&(this.meta.topologyLoadComplete=!1),"deepLoadComplete"in this.meta&&delete this.meta.deepLoadComplete}catch(e){this.clear()}}saveToStorage(){if("undefined"!=typeof window)try{localStorage.setItem(sr,JSON.stringify(this.meta));const e=this.getPackets(),t=e.length>3e3?e.slice(-3e3):e;localStorage.setItem(tr,JSON.stringify(t))}catch(e){if(e instanceof DOMException&&"QuotaExceededError"===e.name)try{localStorage.removeItem(tr),localStorage.setItem(sr,JSON.stringify(this.meta))}catch{}}}clearStorage(){if("undefined"!=typeof window)try{localStorage.removeItem(tr),localStorage.removeItem(sr)}catch(e){}}async fetchRecentPackets(e=1e3,t=!1){const s=`/api/recent_packets?limit=${e}`,{getToken:n}=await P(async()=>{const{getToken:e}=await Promise.resolve().then(()=>Ma);return{getToken:e}},void 0),o=n(),a={};o&&(a.Authorization=`Bearer ${o}`);const r=await fetch(s,{headers:a});if(401===r.status&&!t){const{refreshToken:t}=await P(async()=>{const{refreshToken:e}=await Promise.resolve().then(()=>Ma);return{refreshToken:e}},void 0);if(await t())return this.fetchRecentPackets(e,!0)}if(!r.ok)throw new Error(`API error: ${r.status}`);return r.json()}async fetchFilteredPackets(e,t=5e3,s=!1,n){const o=new URLSearchParams;o.set("limit",String(t)),void 0!==e&&o.set("end_timestamp",String(e-.001)),void 0!==n&&o.set("start_timestamp",String(n));const a=`/api/filtered_packets?${o}`,{getToken:r}=await P(async()=>{const{getToken:e}=await Promise.resolve().then(()=>Ma);return{getToken:e}},void 0),i=r(),l={};i&&(l.Authorization=`Bearer ${i}`);const c=new AbortController,u=setTimeout(()=>c.abort(),3e4);try{const n=await fetch(a,{headers:l,signal:c.signal});if(401===n.status&&!s){const{refreshToken:s}=await P(async()=>{const{refreshToken:e}=await Promise.resolve().then(()=>Ma);return{refreshToken:e}},void 0);if(await s())return this.fetchFilteredPackets(e,t,!0)}if(!n.ok)throw new Error(`API error: ${n.status}`);return n.json()}finally{clearTimeout(u)}}};function lr(e){return{paths:e.paths,byEndpoints:new Map(e.byEndpointsEntries),canonicalPaths:new Map(e.canonicalPathsEntries),totalObservations:e.totalObservations,uniquePathCount:e.uniquePathCount}}function cr(){return{paths:[],byEndpoints:new Map,canonicalPaths:new Map,totalObservations:0,uniquePathCount:0}}const ur=new class{constructor(){t(this,"worker",null),t(this,"listeners",new Set),t(this,"currentTopology",{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],gatewayNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:cr(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0},discoveredNodes:[],viterbiStats:{totalPaths:0,pathsWithGhosts:0,avgPathCost:0,avgPathConfidence:0,observationOverrideCount:0,tracePacketsProcessed:0,pathPacketsProcessed:0,distantEdgesDiscovered:0,duplicateGroupsFound:0,duplicatePathsUnique:0,echolocationEdgesInferred:0}}),t(this,"isComputing",!1),t(this,"pendingRequest",null),t(this,"debounceTimer",null),t(this,"debounceMs",100),this.initWorker()}initWorker(){if("undefined"!=typeof window)try{this.worker=new Worker(new URL("/assets/topology.worker-BHEhB0-W.js",import.meta.url),{type:"module"}),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{}}catch(e){}}handleWorkerMessage(e){if(this.isComputing=!1,"error"!==e.type){var t;this.currentTopology={edges:(t=e.payload).edges??[],validatedEdges:t.validatedEdges??[],weakEdges:t.weakEdges??[],certainEdges:t.certainEdges??[],uncertainEdges:t.uncertainEdges??[],maxPacketCount:t.maxPacketCount??0,maxCertainCount:t.maxCertainCount??0,localPrefix:t.localPrefix??null,hubNodes:t.hubNodes??[],gatewayNodes:t.gatewayNodes??[],edgeMap:new Map(t.edgeMapEntries??[]),neighborAffinity:new Map(t.neighborAffinityEntries??[]),fullAffinity:new Map(t.fullAffinityEntries??[]),centrality:new Map(t.centralityEntries??[]),loops:t.loops??[],loopEdgeKeys:new Set(t.loopEdgeKeyEntries??[]),txDelayRecommendations:new Map(t.txDelayRecommendationEntries??[]),pathRegistry:t.pathRegistry?lr(t.pathRegistry):cr(),edgeBetweenness:new Map(t.edgeBetweennessEntries??[]),backboneEdges:t.backboneEdges??[],nodeMobility:new Map(t.nodeMobilityEntries??[]),mobileNodes:t.mobileNodes??[],pathHealth:t.pathHealth??[],lastHopNeighbors:t.lastHopNeighbors??[],disambiguationStats:t.disambiguationStats??{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0},discoveredNodes:t.discoveredNodes??[],viterbiStats:t.viterbiStats??{totalPaths:0,pathsWithGhosts:0,avgPathCost:0,avgPathConfidence:0,observationOverrideCount:0,tracePacketsProcessed:0,pathPacketsProcessed:0,distantEdgesDiscovered:0,duplicateGroupsFound:0,duplicatePathsUnique:0,echolocationEdgesInferred:0}};for(const t of this.listeners)try{t(this.currentTopology,e.computeTimeMs)}catch(s){}if(this.pendingRequest){const e=this.pendingRequest;this.pendingRequest=null,this.computeInternal(e)}}}computeInternal(e){if(!this.worker)return;this.isComputing=!0;const t={type:"compute",payload:e};this.worker.postMessage(t)}compute(e,t,s,n,o,a,r,i){const l={packets:e,neighbors:t,localHash:s,localLat:n,localLon:o,airtimeMs:a,zeroHopNeighbors:r,terrainGrid:i,enableTerrainAware:void 0!==i};this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest=l:this.computeInternal(l)},this.debounceMs)}subscribe(e){return this.listeners.add(e),this.currentTopology.edges.length>0&&e(this.currentTopology,0),()=>{this.listeners.delete(e)}}getTopology(){return this.currentTopology}isWorking(){return this.isComputing}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}},dr=new class{constructor(){t(this,"worker",null),t(this,"listeners",new Set),t(this,"sparklines",new Map),t(this,"isComputing",!1),t(this,"lastComputeTimeMs",0),t(this,"pendingRequest",null),t(this,"debounceTimer",null),t(this,"debounceMs",150),this.initWorker()}initWorker(){if("undefined"!=typeof window)try{this.worker=new Worker(new URL("/assets/sparkline.worker-CmKhBAy5.js",import.meta.url),{type:"module"}),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{this.isComputing=!1,this.notifyListeners()}}catch(e){}}handleWorkerMessage(e){if(this.isComputing=!1,"error"!==e.type){if(this.sparklines=new Map(e.payload.sparklineEntries),this.lastComputeTimeMs=e.computeTimeMs,this.notifyListeners(),this.pendingRequest){const e=this.pendingRequest;this.pendingRequest=null,this.computeInternal(e.packets,e.nodeHashes)}}else this.notifyListeners()}computeInternal(e,t){if(!this.worker)return;if(0===t.length)return this.isComputing=!1,void this.notifyListeners();this.isComputing=!0,this.notifyListeners();const s={type:"compute",payload:{packets:e,nodeHashes:t}};this.worker.postMessage(s)}notifyListeners(){for(const t of this.listeners)try{t(this.sparklines,this.isComputing)}catch(e){}}compute(e,t){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest={packets:e,nodeHashes:t}:this.computeInternal(e,t)},this.debounceMs)}getSparkline(e){return this.sparklines.get(e)??[]}getAllSparklines(){return this.sparklines}hasSparkline(e){return this.sparklines.has(e)}isWorking(){return this.isComputing}getLastComputeTime(){return this.lastComputeTimeMs}subscribe(e){return this.listeners.add(e),e(this.sparklines,this.isComputing),()=>{this.listeners.delete(e)}}clear(){this.sparklines.clear(),this.notifyListeners()}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}},hr=new class{constructor(){t(this,"worker",null),t(this,"isInitialized",!1),t(this,"statsListeners",new Set),t(this,"packetsListeners",new Set),t(this,"errorListeners",new Set),t(this,"readyResolve",null),t(this,"readyPromise",null),t(this,"unsubscribeTokenChange",null)}async init(e){if(!this.isInitialized&&"undefined"!=typeof window){this.readyPromise=new Promise(e=>{this.readyResolve=e});try{this.worker=new Worker(new URL("/assets/polling.worker-DFp1Qyu0.js",import.meta.url),{type:"module"}),this.worker.onmessage=this.handleMessage.bind(this),this.worker.onerror=e=>{};const t={type:"init",config:{apiBaseUrl:e.apiBaseUrl,authToken:e.authToken,statsIntervalMs:e.statsIntervalMs??3e3,packetsIntervalMs:e.packetsIntervalMs??3e3}};this.worker.postMessage(t),this.isInitialized=!0,this.unsubscribeTokenChange=oa(e=>{this.setAuthToken(e)}),await this.readyPromise}catch(t){throw t}}}handleMessage(e){var t;const s=e.data;switch(s.type){case"ready":null==(t=this.readyResolve)||t.call(this);break;case"stats":for(const e of this.statsListeners)try{e(s.data,s.timestamp)}catch(n){}break;case"packets":for(const e of this.packetsListeners)try{e(s.newPackets,s.totalCount,s.newestTimestamp)}catch(n){}break;case"packetsReset":for(const e of this.packetsListeners)try{e([],0,s.newestTimestamp)}catch(n){}break;case"error":for(const e of this.errorListeners)try{e(s.source,s.error)}catch(n){}}}onStats(e){return this.statsListeners.add(e),()=>this.statsListeners.delete(e)}onPackets(e){return this.packetsListeners.add(e),()=>this.packetsListeners.delete(e)}onError(e){return this.errorListeners.add(e),()=>this.errorListeners.delete(e)}setAuthToken(e){if(!this.worker)return;const t={type:"setAuth",token:e};this.worker.postMessage(t)}setLiveMode(e){if(!this.worker)return;const t={type:"setLiveMode",enabled:e};this.worker.postMessage(t)}forceRefresh(){this.worker&&this.worker.postMessage({type:"forceRefresh"})}clearCache(){this.worker&&this.worker.postMessage({type:"clearCache"})}terminate(){if(this.unsubscribeTokenChange&&(this.unsubscribeTokenChange(),this.unsubscribeTokenChange=null),this.worker){const e={type:"stop"};this.worker.postMessage(e),this.worker.terminate(),this.worker=null}this.isInitialized=!1,this.statsListeners.clear(),this.packetsListeners.clear(),this.errorListeners.clear()}isReady(){return this.isInitialized}},fr=.05,pr=1e3,mr="terrarium";function gr(e,t,s){try{return e.queryTerrainElevation({lng:t,lat:s})??0}catch{return 0}}const br=o((e,t)=>({terrainGrid:null,isLoading:!1,error:null,lastLoadedAt:null,cachedBounds:null,terrainDisambiguationEnabled:!0,loadTerrain:async(s,n)=>{const o=t();if(!(o.isLoading||(a=o.cachedBounds,r=s,a&&a.minLat<=r.minLat&&a.maxLat>=r.maxLat&&a.minLng<=r.minLng&&a.maxLng>=r.maxLng))){var a,r;e({isLoading:!0,error:null});try{n.getTerrain()||(n.getSource(mr)||(n.addSource(mr,{type:"raster-dem",tiles:["https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png"],encoding:"terrarium",tileSize:256}),await new Promise((e,t)=>{const s=setTimeout(()=>t(new Error("Terrain source load timeout")),1e4),o=t=>{t.sourceId===mr&&t.isSourceLoaded&&(clearTimeout(s),n.off("sourcedata",o),e())};n.on("sourcedata",o)})),n.setTerrain({source:mr}),await new Promise(e=>setTimeout(e,500)));const t=await async function(e,t){const{minLat:s,maxLat:n,minLng:o,maxLng:a}=t;let r=Math.ceil((a-o)/.001),i=Math.ceil((n-s)/.001);r>pr&&(r=pr),i>pr&&(i=pr);const l=(a-o)/r,c=(n-s)/i,u=Math.max(l,c),d=new Float32Array(r*i);let h=0;for(let f=0;f<i;f++){const t=s+(f+.5)*c;for(let s=0;s<r;s++){const n=o+(s+.5)*l;d[h]=gr(e,n,t),h++,h%100==0&&await new Promise(e=>setTimeout(e,0))}}return{origin:[s,o],cellSize:u,width:r,height:i,elevations:d}}(n,s);e({terrainGrid:t,isLoading:!1,lastLoadedAt:Date.now(),cachedBounds:s})}catch(i){const t=i instanceof Error?i.message:"Unknown error loading terrain";e({isLoading:!1,error:t})}}},preloadFromNodes:async(e,s)=>{const n=function(e){const t=e.filter(e=>void 0!==e.latitude&&void 0!==e.longitude&&(0!==e.latitude||0!==e.longitude));if(0===t.length)return null;let s=1/0,n=-1/0,o=1/0,a=-1/0;for(const r of t)s=Math.min(s,r.latitude),n=Math.max(n,r.latitude),o=Math.min(o,r.longitude),a=Math.max(a,r.longitude);return{minLat:s-fr,maxLat:n+fr,minLng:o-fr,maxLng:a+fr}}(e);n&&await t().loadTerrain(n,s)},clearTerrain:()=>{e({terrainGrid:null,cachedBounds:null,lastLoadedAt:null,error:null})},setTerrainDisambiguationEnabled:t=>{e({terrainDisambiguationEnabled:t})},getTerrainGridForDisambiguation:()=>{const e=t();return e.terrainDisambiguationEnabled?e.terrainGrid:null}}));function yr(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2,4).toUpperCase():e.slice(0,2).toUpperCase()}function xr(e,t){let s=e.forwarded_path??e.original_path;if("string"==typeof s)try{s=JSON.parse(s)}catch{return null}if(!s||!Array.isArray(s)||0===s.length)return null;const n=s.map(e=>String(e).toUpperCase()),o=t?yr(t):null,a=n[n.length-1],r=null!==o&&a===o,i=r?n.slice(0,-1):[...n];return{effective:i,original:n,hadLocal:r,effectiveLength:i.length}}function wr(e,t){const s=e.toUpperCase();return t.startsWith("0x")||t.startsWith("0X")?t.slice(2).toUpperCase().startsWith(s):t.toUpperCase().startsWith(s)}const kr=[{label:"20m",minutes:20,buckets:40},{label:"1h",minutes:60,buckets:60},{label:"3h",minutes:180,buckets:90},{label:"12h",minutes:720,buckets:72},{label:"24h",minutes:1440,buckets:96},{label:"3d",minutes:4320,buckets:72},{label:"7d",minutes:10080,buckets:84}],vr=[{label:"1h",hours:1},{label:"3h",hours:3},{label:"12h",hours:12},{label:"24h",hours:24},{label:"3d",hours:72},{label:"7d",hours:168},{label:"14d",hours:336}];function Sr(e){switch(e){case 1:return 3600;case 3:case 12:return 5400;case 24:return 8640;case 72:case 168:case 336:return 720;default:{const t=3600*e,s=Math.round(t/10);return Math.min(Math.max(360,s),720)}}}const Cr={stats:3e3,packets:3e3,charts:3e4,logs:2e3,system:3e3},_r={DEBUG:"text-[var(--log-debug)]",INFO:"text-[var(--log-info)]",WARNING:"text-[var(--log-warning)]",ERROR:"text-[var(--log-error)]",CRITICAL:"text-[var(--log-critical)]"};function Mr(e){return _r[e]??"text-text-muted border-border-subtle"}const Tr="pymc-resource-history",jr="pymc-resource-last-fetch",Er="pymc-hidden-contacts",Nr="pymc-quick-neighbors",Lr="pymc-local-hash";let Pr=null,Fr=null;function Ar(e,t){const s=t-1e3*e;return s<=6048e5?"active":s<=12096e5?"stale":"expired"}function Dr(e){return 4===(e.type??e.payload_type)&&!0!==e.transmitted&&function(e){const t=function(e){if(Array.isArray(e))return e;if("string"==typeof e&&e.startsWith("["))try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}(e.original_path),s=e.route??e.route_type;return 2===(n=s)||3===n?0===t.length:Xo(s)?t.length<=1:0===t.length;var n}(e)}function Ir(e,t,s,n,o){if(!e)return null;let a=e;if(e.length<=4){const n=e.replace(/^0x/i,"").toUpperCase();if(n===t)return null;const o=s.get(n);if(!o)return null;a=o}return n.has(a)?a===o?null:a:null}function Rr(e,t){e.count++,void 0!==t.rssi&&null!==t.rssi&&(e.rssiSum+=t.rssi,e.rssiCount++),void 0!==t.snr&&null!==t.snr&&(e.snrSum+=t.snr,e.snrCount++);const s=t.timestamp??0;s>e.lastSeen&&(e.lastSeen=s)}function zr(e){return{hash:e,count:0,rssiSum:0,rssiCount:0,snrSum:0,snrCount:0,lastSeen:0}}function Or(e,t){const s=Ar(e.lastSeen,t);return"expired"===s?null:{hash:e.hash,prefix:yr(e.hash),count:e.count,avgRssi:e.rssiCount>0?e.rssiSum/e.rssiCount:null,avgSnr:e.snrCount>0?e.snrSum/e.snrCount:null,lastSeen:e.lastSeen,status:s}}function Br(){if("undefined"==typeof window)return[];try{const e=localStorage.getItem(Nr);if(e)return JSON.parse(e)}catch{}return[]}function $r(e){"undefined"!=typeof window&&(Fr&&clearTimeout(Fr),Fr=setTimeout(()=>{try{localStorage.setItem(Nr,JSON.stringify(e))}catch{}Fr=null},1e3))}function Hr(){if("undefined"!=typeof window)try{const e=localStorage.getItem(Lr);if(e)return e}catch{}}function Wr(e){if("undefined"!=typeof window)try{localStorage.setItem(Lr,e)}catch{}}function Ur(){if("undefined"==typeof window)return[];try{const e=localStorage.getItem(Tr);if(e)return JSON.parse(e)}catch{}return[]}function qr(){if("undefined"==typeof window)return new Set;try{const e=localStorage.getItem(Er);if(e)return new Set(JSON.parse(e))}catch{}return new Set}function Gr(){if("undefined"==typeof window)return 0;try{const e=localStorage.getItem(jr);if(e)return parseInt(e,10)||0}catch{}return 0}const Jr=o((e,t)=>({stats:null,statsLoading:!1,statsError:null,packets:[],packetsLoading:!1,packetsError:null,lastPacketTimestamp:0,logs:[],logsLoading:!1,liveMode:!0,flashReceived:0,flashAdvert:0,resourceHistory:Ur(),lastResourceFetch:Gr(),hiddenContacts:qr(),quickNeighbors:Br(),cachedLocalHash:Hr(),initialized:!1,packetCacheState:ir.getState(),mutationsInFlight:new Set,initializeApp:async()=>{const{initialized:s}=t();if(!s){e({initialized:!0,statsLoading:!0,packetsLoading:!0}),ir.subscribe(t=>{e({packetCacheState:t})});try{const{hiddenContacts:s}=t(),n=await La(),o=n.neighbors??{},a=Date.now(),r=[];for(const[e,t]of Object.entries(o)){if(s.has(e))continue;if(!t.zero_hop)continue;const n=Ar(t.last_seen??0,a);"expired"!==n&&r.push({hash:e,prefix:yr(e),count:t.advert_count??0,avgRssi:t.rssi??null,avgSnr:t.snr??null,lastSeen:t.last_seen??0,status:n})}r.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const i=n.local_hash;e({stats:n,statsLoading:!1,quickNeighbors:r,cachedLocalHash:i}),$r(r),i&&Wr(i);const l=()=>{const s=ir.getPackets();if(s.length>0){const n=s.reduce((e,t)=>{const s=t.timestamp??0;return s>e?s:e},0);e({packets:[...s],lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},c=await ir.initialLoad(l);if(c.length>0){const s=c.reduce((e,t)=>{const s=t.timestamp??0;return s>e?s:e},0);e({packets:[...c],packetsLoading:!1,lastPacketTimestamp:s}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}else e({packetsLoading:!1})}catch(n){e({statsError:n instanceof Error?n.message:"Failed to initialize",statsLoading:!1,packetsLoading:!1})}try{await hr.init({apiBaseUrl:"",authToken:ua()??void 0,statsIntervalMs:Cr.stats,packetsIntervalMs:Cr.packets}),hr.onStats((s,n)=>{const{mutationsInFlight:o,hiddenContacts:a}=t();if(o.size>0)return;const r=s.neighbors??{},i=Date.now(),l=[];for(const[e,t]of Object.entries(r)){if(a.has(e))continue;if(!t.zero_hop)continue;const s=Ar(t.last_seen??0,i);"expired"!==s&&l.push({hash:e,prefix:yr(e),count:t.advert_count??0,avgRssi:t.rssi??null,avgSnr:t.snr??null,lastSeen:t.last_seen??0,status:s})}l.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const c=s.local_hash;e({stats:s,statsLoading:!1,quickNeighbors:l,cachedLocalHash:c}),$r(l),c&&Wr(c)}),hr.onPackets((s,n,o)=>{if(0===s.length)return;const{lastPacketTimestamp:a}=t();for(const e of s)if(e.packet_hash){ir.mergePacketsDirectly(s);break}const r=o>a;r&&(e({flashReceived:t().flashReceived+1}),Oa());const i=ir.getPackets();e({packets:i,packetsLoading:!1,lastPacketTimestamp:o}),r&&t().triggerTopologyCompute()}),hr.onError((t,s)=>{e("stats"===t?{statsError:s}:{packetsError:s})}),"undefined"!=typeof document&&document.addEventListener("visibilitychange",()=>{document.hidden||hr.forceRefresh()})}catch(n){!function(e){setInterval(()=>{e().fetchStats()},Cr.stats),setInterval(()=>{e().liveMode&&!ir.isHeavyLoadInProgress()&&e().fetchPackets()},Cr.packets)}(t)}}},prefetchForRoute:e=>{switch(e){case"/logs":Pa().catch(()=>{});break;case"/system":Aa().catch(()=>{});break;case"/statistics":(async function(e=24){return Ea(`/api/packet_type_graph_data?hours=${e}`)})(3).catch(()=>{}),Fa(3).catch(()=>{});break;case"/settings":(async function(){return Ea("/api/radio_presets")})().catch(()=>{})}},fetchStats:async s=>{const{stats:n,mutationsInFlight:o,hiddenContacts:a}=t();if(!(o.size>0)||(null==s?void 0:s.force)){n||e({statsLoading:!0}),e({statsError:null});try{const t=await La(),s=t.neighbors??{},n=Date.now(),o=[];for(const[e,i]of Object.entries(s)){if(a.has(e))continue;if(!i.zero_hop)continue;const t=Ar(i.last_seen??0,n);"expired"!==t&&o.push({hash:e,prefix:yr(e),count:i.advert_count??0,avgRssi:i.rssi??null,avgSnr:i.snr??null,lastSeen:i.last_seen??0,status:t})}o.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen);const r=t.local_hash;e({stats:t,statsLoading:!1,quickNeighbors:o,cachedLocalHash:r}),$r(o),r&&Wr(r)}catch(r){e({statsError:r instanceof Error?r.message:"Failed to fetch stats",statsLoading:!1})}}},fetchPackets:async s=>{const{packets:n,lastPacketTimestamp:o}=t();0===n.length&&e({packetsLoading:!0}),e({packetsError:null});try{const s=await ir.poll(),a=s.length>0?s.reduce((e,t)=>Math.max(e,t.timestamp??0),0):0,r=a>o&&o>0,i=s.length!==n.length||r;r&&(e({flashReceived:t().flashReceived+1}),Oa()),e(i?{packets:s,packetsLoading:!1,lastPacketTimestamp:a||o}:{packetsLoading:!1}),r&&t().triggerTopologyCompute()}catch(a){e({packetsError:a instanceof Error?a.message:"Failed to fetch packets",packetsLoading:!1})}},fetchLogs:async()=>{const{logs:s}=t();0===s.length&&e({logsLoading:!0});try{const t=await Pa();e({logs:t.logs,logsLoading:!1})}catch{e({logsLoading:!1})}},setLiveMode:t=>{e({liveMode:t}),hr.isReady()&&hr.setLiveMode(t)},setMode:async s=>{const n="setMode",{mutationsInFlight:o}=t(),a=new Set(o);a.add(n),e({mutationsInFlight:a});try{if(!(await Ia(s)).success)throw new Error("Backend returned unsuccessful response");await t().fetchStats({force:!0})}catch(r){const{mutationsInFlight:s}=t(),o=new Set(s);throw o.delete(n),e({mutationsInFlight:o}),r}},clearModeMutation:()=>{const{mutationsInFlight:s}=t(),n=new Set(s);n.delete("setMode"),e({mutationsInFlight:n})},setDutyCycle:async s=>{const n="setDutyCycle",{mutationsInFlight:o}=t(),a=new Set(o);a.add(n),e({mutationsInFlight:a});try{if(!(await Ra(s)).success)throw new Error("Backend returned unsuccessful response");await t().fetchStats({force:!0})}finally{const{mutationsInFlight:s}=t(),o=new Set(s);o.delete(n),e({mutationsInFlight:o})}},setDutyCycleConfig:async s=>{var n;const o="setDutyCycleConfig",{mutationsInFlight:a}=t(),r=new Set(a);r.add(o),e({mutationsInFlight:r});try{const e=await async function(e){return Ea("/api/update_duty_cycle_config",{method:"POST",body:JSON.stringify(e)})}(s);if(!e.success&&!(null==(n=e.data)?void 0:n.persisted))throw new Error("Backend returned unsuccessful response");await t().fetchStats({force:!0})}catch(i){const{mutationsInFlight:s}=t(),n=new Set(s);throw n.delete(o),e({mutationsInFlight:n}),i}},clearDutyCycleMutation:()=>{const{mutationsInFlight:s}=t(),n=new Set(s);n.delete("setDutyCycleConfig"),e({mutationsInFlight:n})},startMutation:s=>{const{mutationsInFlight:n}=t(),o=new Set(n);o.add(s),e({mutationsInFlight:o})},clearMutation:s=>{const{mutationsInFlight:n}=t(),o=new Set(n);o.delete(s),e({mutationsInFlight:o})},sendAdvert:async()=>{try{const s=await Da();return s.success&&e({flashAdvert:t().flashAdvert+1}),s.success}catch(s){return!1}},triggerFlashReceived:()=>{e({flashReceived:t().flashReceived+1})},triggerFlashAdvert:()=>{e({flashAdvert:t().flashAdvert+1})},addResourceDataPoint:(s,n,o)=>{const a=Date.now(),{lastResourceFetch:r,resourceHistory:i}=t();if(a-r<1e3)return;const l=[...i,{timestamp:a,time:new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),cpu:s,memory:n}],c=l.length>o?l.slice(-o):l;var u,d;e({resourceHistory:c,lastResourceFetch:a}),u=c,d=a,"undefined"!=typeof window&&(Pr&&clearTimeout(Pr),Pr=setTimeout(()=>{try{localStorage.setItem(Tr,JSON.stringify(u)),localStorage.setItem(jr,d.toString())}catch{}Pr=null},1e3))},hideContact:s=>{const{hiddenContacts:n}=t(),o=new Set(n);o.add(s),e({hiddenContacts:o}),function(e){if("undefined"!=typeof window)try{localStorage.setItem(Er,JSON.stringify([...e]))}catch{}}(o)},clearPacketCache:()=>{ir.clear(),e({packets:[],lastPacketTimestamp:0}),ir.quickLoad().then(s=>{if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:s,lastPacketTimestamp:n}),t().triggerTopologyCompute()}})},triggerTopologyCompute:()=>{var e,s,n,o;const{packets:a,stats:r,hiddenContacts:i}=t();if(0===a.length||!r)return;const l=r.neighbors??{},c=Object.fromEntries(Object.entries(l).filter(([e])=>!i.has(e))),u=r.local_hash,d=null==(s=null==(e=r.config)?void 0:e.repeater)?void 0:s.latitude,h=null==(o=null==(n=r.config)?void 0:n.repeater)?void 0:o.longitude,f=[];for(const[t,m]of Object.entries(c))m.zero_hop&&f.push({hash:t,advertCount:m.advert_count??1,avgRssi:m.rssi??null,avgSnr:m.snr??null,lastSeen:m.last_seen??0,latitude:m.latitude,longitude:m.longitude});const p=br.getState().getTerrainGridForDisambiguation();ur.compute(a,c,u,d,h,void 0,f,p??void 0)},triggerDeepAnalysis:async()=>{await ir.forceDeepLoad();const s=ir.getPackets();if(s.length>0){const n=s.reduce((e,t)=>Math.max(e,t.timestamp??0),0);e({packets:s,lastPacketTimestamp:n}),t().triggerTopologyCompute(),t().triggerSparklineCompute()}},updateQuickNeighbors:()=>{const{packets:s,stats:n,hiddenContacts:o}=t();if(0===s.length||!n)return;const a=n.neighbors??{},r=function(e,t,s){if(!s||0===e.length||0===Object.keys(t).length)return[];const n=Date.now(),o=yr(s),a=new Set(Object.keys(t)),r=function(e){var t,s;const n=new Map;for(const o of Object.keys(e)){const a=yr(o),r=n.get(a);if(r){const i=null==(t=e[r])?void 0:t.zero_hop;(null==(s=e[o])?void 0:s.zero_hop)&&!i&&n.set(a,o)}else n.set(a,o)}return n}(t),i=new Map;for(const c of e){if(!Dr(c))continue;const e=Ir(c.src_hash,o,r,a,s);if(!e)continue;let t=i.get(e);t||(t=zr(e),i.set(e,t)),Rr(t,c)}for(const[c,u]of Object.entries(t))u.zero_hop&&!i.has(c)&&i.set(c,{hash:c,count:u.advert_count??0,rssiSum:u.rssi??0,rssiCount:void 0!==u.rssi?1:0,snrSum:u.snr??0,snrCount:void 0!==u.snr?1:0,lastSeen:u.last_seen??0});const l=[];for(const c of i.values()){const e=Or(c,n);e&&l.push(e)}return l.sort((e,t)=>t.count!==e.count?t.count-e.count:t.lastSeen-e.lastSeen),l}(s,Object.fromEntries(Object.entries(a).filter(([e])=>!o.has(e))),n.local_hash),i=t().quickNeighbors;(r.length!==i.length||r.some((e,t)=>{var s,n;return e.hash!==(null==(s=i[t])?void 0:s.hash)||e.count!==(null==(n=i[t])?void 0:n.count)}))&&(e({quickNeighbors:r}),$r(r))},triggerSparklineCompute:()=>{const{packets:e,stats:s,hiddenContacts:n}=t();if(0===e.length||!s)return;const o=s.neighbors??{},a=Object.keys(o).filter(e=>!n.has(e));0!==a.length&&dr.compute(e,a)}})),Yr=Jr,Vr=()=>Jr(e=>e.stats),Xr=()=>Jr(e=>e.statsError),Kr=()=>Jr(e=>e.packets),Qr=()=>Jr(e=>e.packetsLoading),Zr=()=>Jr(e=>e.logs),ei=()=>Jr(e=>e.logsLoading),ti=()=>Jr(e=>e.liveMode),si=()=>Jr(e=>e.flashAdvert),ni=()=>Jr(e=>e.fetchLogs),oi=()=>Jr(e=>e.setLiveMode),ai=()=>Jr(e=>e.resourceHistory),ri=()=>Jr(e=>e.addResourceDataPoint),ii=()=>Jr(e=>e.hiddenContacts),li=()=>Jr(e=>e.hideContact),ci=()=>Jr(e=>e.packetCacheState),ui=()=>Jr(e=>e.triggerDeepAnalysis),di=()=>Jr(e=>e.quickNeighbors),hi=()=>Jr(e=>e.cachedLocalHash),fi=()=>Jr(e=>e.lastPacketTimestamp),pi=()=>Jr(e=>null!==e.stats&&e.packetCacheState.backgroundLoadComplete);function mi({showLabel:e=!1,className:t}){const o=Jr(e=>e.flashReceived),a=si(),[r,i]=s.useState("idle");return s.useEffect(()=>{if(o<=0)return;const e=requestAnimationFrame(()=>i("received")),t=setTimeout(()=>i("idle"),300);return()=>{cancelAnimationFrame(e),clearTimeout(t)}},[o]),s.useEffect(()=>{if(a<=0)return;const e=requestAnimationFrame(()=>i("transmitted")),t=setTimeout(()=>i("idle"),300);return()=>{cancelAnimationFrame(e),clearTimeout(t)}},[a]),n.jsxs("span",{className:F("inline-flex items-center gap-2",t),children:[n.jsx("span",{className:F("inline-flex rounded-full h-2 w-2 transition-all duration-150","received"===r&&"bg-accent-danger scale-150","transmitted"===r&&"bg-white scale-150","idle"===r&&"bg-accent-success")}),e&&n.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Live"})]})}const gi=o(e=>({sparklines:new Map,isComputing:!1,lastUpdated:0,nodeCount:0,setSparklines:t=>e({sparklines:t,lastUpdated:Date.now(),nodeCount:t.size,isComputing:!1}),setComputing:t=>e({isComputing:t})}));"undefined"!=typeof window&&setTimeout(()=>{dr.subscribe((e,t)=>{const s=gi.getState();t&&!s.isComputing?s.setComputing(!0):!t&&e.size>0?s.setSparklines(e):!t&&s.isComputing&&s.setComputing(!1)})},0);const bi=()=>gi(e=>e.isComputing),yi=[],xi=new Map;function wi(e){return gi(t=>{const s=t.sparklines.get(e);if(!s||0===s.length)return yi;const n=xi.get(e);return n===s?n:(xi.set(e,s),s)})}const ki=o(e=>({topology:{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],gatewayNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:cr(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0},discoveredNodes:[],viterbiStats:{totalPaths:0,pathsWithGhosts:0,avgPathCost:0,avgPathConfidence:0,observationOverrideCount:0,tracePacketsProcessed:0,pathPacketsProcessed:0,distantEdgesDiscovered:0,duplicateGroupsFound:0,duplicatePathsUnique:0,echolocationEdgesInferred:0}},isComputing:!1,lastComputeTimeMs:0,lastUpdated:0,setTopology:(t,s)=>e({topology:t,lastComputeTimeMs:s,lastUpdated:Date.now(),isComputing:!1}),setComputing:t=>e({isComputing:t})}));"undefined"!=typeof window&&ur.subscribe((e,t)=>{ki.getState().setTopology(e,t)});const vi=()=>ki(e=>e.topology),Si=()=>ki(e=>e.topology.hubNodes),Ci=()=>ki(e=>e.topology.centrality),_i=()=>ki(e=>e.topology.fullAffinity);let Mi=null,Ti=null,ji=null,Ei=null;const Ni=()=>ki(e=>(e.topology.hubNodes!==Ti&&(Ti=e.topology.hubNodes,Mi=new Set(e.topology.hubNodes)),Mi)),Li=()=>ki(e=>e.topology.pathHealth),Pi=()=>ki(e=>e.topology.disambiguationStats),Fi=()=>ki(e=>e.topology.disambiguationStats.highCollisionPrefixes),Ai=()=>ki(e=>e.topology.disambiguationStats.totalPrefixes>0),Di=()=>ki(e=>e.topology.discoveredNodes),Ii=()=>ki(e=>e.topology.viterbiStats),Ri=()=>ki(e=>(e.topology.discoveredNodes!==Ei&&(Ei=e.topology.discoveredNodes,ji=e.topology.discoveredNodes.filter(e=>e.isLikelyReal)),ji));function zi(e){if(e<60)return`${Math.floor(e)}s`;const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),(n>0||0===o.length)&&o.push(`${n}m`),o.join(" ")}function Oi(e){const t=Date.now()/1e3-e;return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function Bi(e){const t=Date.now()/1e3-e;return t<60?`${Math.floor(t)}s`:t<3600?`${Math.floor(t/60)}m`:t<86400?`${Math.floor(t/3600)}h`:`${Math.floor(t/86400)}d`}function $i(e){return new Date(1e3*e).toLocaleString()}function Hi(e){const t=new Date(1e3*e);return`${t.toLocaleString("en-US",{month:"short"})} ${t.getDate()}, ${t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}`}function Wi(e){return`${(e/1e6).toFixed(3)} MHz`}function Ui(e){return`${(e/1e3).toFixed(1)} kHz`}function qi(e){const t=e>1e12?e:1e3*e,s=Date.now(),n=Math.abs(s-t),o=Math.floor(n/1e3),a=Math.floor(o/60),r=Math.floor(a/60),i=Math.floor(r/24);return i>0?`${i} day${1!==i?"s":""}`:r>0?`${r} hour${1!==r?"s":""}`:a>0?`${a} minute${1!==a?"s":""}`:`${o} second${1!==o?"s":""}`}const Gi=[{name:"Dashboard",to:"/",icon:l},{name:"Contacts",to:"/contacts",icon:c},{name:"Packets",to:"/packets",icon:u},{name:"Statistics",to:"/statistics",icon:d},{name:"System",to:"/system",icon:h},{name:"Logs",to:"/logs",icon:f},{name:"Terminal",to:"/terminal",icon:p},{name:"Configuration",to:"/configuration",icon:m}],Ji="pymc-controls-expanded";function Yi(){var e,t,o,l;const{pathname:c}=a(),{stats:u,setMode:d,setDutyCycle:f,sendAdvert:p}=Yr(),m=ya(),M=Jr(e=>e.prefetchForRoute),T=ci(),j=bi(),E=ki(e=>e.isComputing),N=Ri(),[L,P]=s.useState(!1),[A,D]=s.useState(!0),[I,R]=s.useState(!1),z=s.useRef(null),O=s.useCallback(e=>{e!==c&&(z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{M(e)},100))},[c,M]),B=s.useCallback(()=>{z.current&&(clearTimeout(z.current),z.current=null)},[]);s.useEffect(()=>{const e=localStorage.getItem(Ji);null!==e&&queueMicrotask(()=>D("true"===e))},[]);const $=()=>{const e=!A;D(e),localStorage.setItem(Ji,String(e))};s.useEffect(()=>{queueMicrotask(()=>P(!1))},[c]),s.useEffect(()=>(document.body.style.overflow=L?"hidden":"",()=>{document.body.style.overflow=""}),[L]);const H=null==u?void 0:u.noise_floor_dbm,W=(null==(t=null==(e=null==u?void 0:u.config)?void 0:e.repeater)?void 0:t.mode)??"forward",U=(null==(l=null==(o=null==u?void 0:u.config)?void 0:o.duty_cycle)?void 0:l.enforcement_enabled)??!1,q=async()=>{R(!0),await p(),setTimeout(()=>R(!1),1e3)},G=()=>{d("forward"===W?"monitor":"forward")},J=()=>{f(!U)},Y=()=>{Sa(),window.location.href="/login"},V=T.isLoading||T.isTopologyLoading,X=V||j||E,K=T.loadProgress,Q=()=>{if(!X)return null;let e="Analyzing database";V&&K?e=`Loading ${K.loaded.toLocaleString()} packets`:j?e="Computing sparklines":E&&(e="Building topology");const t=(null==K?void 0:K.percent)??null,s=null!==t&&V;return n.jsxs("div",{className:"px-3 pb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5",children:[n.jsxs("div",{className:"relative flex h-2 w-2",children:[n.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-primary opacity-75"}),n.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-primary"})]}),n.jsx("span",{className:"type-data-xs text-text-muted",children:e}),s&&n.jsxs("span",{className:"type-data-xs text-text-muted ml-auto",children:[t,"%"]})]}),n.jsx("div",{className:"mx-2 h-0.5 bg-white/5 rounded-full overflow-hidden",children:s?n.jsx("div",{className:"h-full bg-accent-primary/60 rounded-full transition-all duration-300 ease-out",style:{width:`${t}%`}}):n.jsx("div",{className:"h-full bg-accent-primary/60 rounded-full animate-pulse",style:{width:"100%",animation:"shimmer 1.5s ease-in-out infinite"}})})]})},Z=()=>n.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:Gi.map(e=>{const t=c===e.to;return n.jsxs(g,{to:e.to,onClick:()=>P(!1),onMouseEnter:()=>O(e.to),onMouseLeave:B,className:F("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-150 min-h-[44px]",t?"bg-accent-primary/15 text-accent-primary":"text-text-muted hover:text-text-primary hover:bg-white/5"),children:[n.jsx(e.icon,{className:F("w-5 h-5 flex-shrink-0",t&&"text-accent-primary")}),n.jsx("span",{className:"type-body-sm font-medium",children:e.name}),"/contacts"===e.to&&N.length>0&&n.jsxs("span",{className:"ml-auto flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-accent-tertiary/20 text-accent-tertiary",children:[n.jsx(b,{className:"w-3 h-3"}),n.jsx("span",{className:"type-data-xs font-medium",children:N.length})]})]},e.name)})}),ee=()=>n.jsxs("div",{className:"px-3 py-3",children:[n.jsxs("button",{onClick:$,className:"w-full flex items-center justify-between px-3 py-1.5 mb-2 rounded-lg hover:bg-white/5 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(y,{className:"w-5 h-5 text-accent-primary"}),n.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Controls"})]}),n.jsx(x,{className:F("w-4 h-4 text-text-muted transition-transform duration-200",A?"rotate-0":"-rotate-90")})]}),n.jsx("div",{className:F("overflow-hidden transition-all duration-300 ease-out",A?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:n.jsxs("div",{className:"control-panel-skeuo",children:[n.jsxs("button",{onClick:q,disabled:I,className:F("control-btn control-btn-primary w-full",I&&"opacity-70"),children:[n.jsx(w,{className:F("w-4 h-4",I&&"animate-pulse")}),n.jsx("span",{children:I?"Sending...":"Send Advert"})]}),n.jsxs("div",{className:"control-toggle-group",children:[n.jsxs("div",{className:"control-toggle-label",children:[n.jsx("span",{children:"Mode"}),n.jsx("span",{className:F("control-toggle-status","forward"===W?"text-accent-success":"text-accent-secondary"),children:"forward"===W?"FWD":"MON"})]}),n.jsx("button",{onClick:G,className:F("control-btn w-full","forward"===W?"control-btn-success":"control-btn-warning"),children:"forward"===W?n.jsxs(n.Fragment,{children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{children:"Forward"})]}):n.jsxs(n.Fragment,{children:[n.jsx(v,{className:"w-4 h-4"}),n.jsx("span",{children:"Monitor"})]})})]}),n.jsxs("div",{className:"control-toggle-group",children:[n.jsxs("div",{className:"control-toggle-label",children:[n.jsx("span",{children:"Duty Cycle"}),n.jsx("span",{className:F("control-toggle-status",U?"text-accent-success":"text-text-muted"),children:U?"ON":"OFF"})]}),n.jsxs("button",{onClick:J,className:F("control-btn w-full",U?"control-btn-success":"control-btn-neutral"),children:[n.jsx(h,{className:"w-4 h-4"}),n.jsx("span",{children:U?"Enabled":"Disabled"})]})]})]})})]}),te=()=>n.jsxs("div",{className:"mt-auto border-t border-white/5",children:[void 0!==(null==u?void 0:u.uptime_seconds)&&n.jsxs("div",{className:"px-6 py-3 flex items-center gap-3",children:[n.jsx(S,{className:"w-5 h-5 text-text-muted flex-shrink-0"}),n.jsxs("span",{className:"type-data-xs text-text-secondary tabular-nums",children:[zi(u.uptime_seconds)," uptime"]})]}),n.jsx("div",{className:"px-3 pb-3",children:n.jsx("div",{className:"bg-white/[0.03] rounded-xl p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(C,{className:"w-4 h-4 text-accent-primary"}),n.jsx("span",{className:"type-data-xs text-text-muted",children:"Noise Floor"})]}),n.jsx("span",{className:"type-data text-text-primary tabular-nums",children:null!=H?`${H.toFixed(0)} dBm`:""})]})})}),n.jsxs("div",{className:"px-6 py-3 flex items-center gap-3 border-t border-white/5",children:[n.jsx(mi,{showLabel:!0}),(null==u?void 0:u.version)&&n.jsxs("span",{className:"type-data-xs text-text-muted truncate max-w-[140px]",title:`v${u.version}`,children:["v",u.version]})]}),n.jsx("div",{className:"px-3 pb-3",children:n.jsxs("button",{onClick:Y,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-text-muted hover:text-accent-danger hover:bg-accent-danger/10 transition-all duration-150",children:[n.jsx(_,{className:"w-4 h-4"}),n.jsx("span",{className:"type-body-sm",children:"Sign Out"}),m&&n.jsxs("span",{className:"ml-auto type-data-xs text-text-muted",children:["(",m,")"]})]})})]});return n.jsxs(n.Fragment,{children:[n.jsx("header",{className:"lg:hidden fixed top-0 inset-x-0 z-[10001] h-14 bg-bg-body/70 backdrop-blur-xl border-b border-white/10",children:n.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("h1",{className:"sr-only",children:"pyMC Console"}),n.jsx(Go,{height:26,className:"block"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",Uo]}),n.jsx(mi,{}),n.jsx("button",{onClick:()=>P(!L),className:"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-white/5 active:bg-white/10 transition-colors","aria-label":L?"Close menu":"Open menu",children:L?n.jsx(r,{className:"w-5 h-5 text-text-primary"}):n.jsx(i,{className:"w-5 h-5 text-text-primary"})})]})]})}),n.jsx("div",{className:F("lg:hidden fixed inset-0 z-[10002] bg-black/60 backdrop-blur-sm transition-opacity duration-300",L?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>P(!1),"aria-hidden":"true"}),n.jsxs("aside",{className:F("lg:hidden fixed top-0 left-0 z-[10003] w-72 max-w-[85vw] h-full","glass-sidebar","flex flex-col","transform transition-transform duration-300 ease-out",L?"translate-x-0":"-translate-x-full pointer-events-none"),children:[n.jsxs("div",{className:"px-4 py-5 border-b border-white/5",children:[n.jsx("h1",{className:"sr-only",children:"pyMC Console"}),n.jsx(Go,{responsive:!0,className:"block"}),n.jsxs("p",{className:"type-data-xs text-text-muted mt-1.5",children:["v",Uo]})]}),Z(),Q(),ee(),te()]}),n.jsxs("aside",{className:"hidden lg:flex flex-col w-64 flex-shrink-0 h-full relative glass-sidebar",children:[n.jsxs("div",{className:"px-5 py-6 border-b border-white/5",children:[n.jsx("h1",{className:"sr-only",children:"pyMC Console"}),n.jsx(Go,{responsive:!0,className:"block"}),n.jsxs("p",{className:"type-data-xs text-text-muted mt-1.5",children:["v",Uo]})]}),Z(),Q(),ee(),te()]})]})}const Vi=s.memo(function(){const{theme:e}=Wo(),{backgroundImage:t,brightness:o}=e,[a,r]=s.useState(t),[i,l]=s.useState(!1);s.useEffect(()=>{if(t===a)return;const e=new Image;e.onload=()=>{l(!0),requestAnimationFrame(()=>{r(t),setTimeout(()=>l(!1),300)})},e.onerror=()=>{r(t)},e.src=t},[t,a]);const c=(100-o)/100;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 -z-20",style:{contain:"paint",willChange:i?"opacity":"auto"},"aria-hidden":"true",children:n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-300 ease-out",style:{backgroundImage:`url(${a})`,opacity:i?.7:1}})}),n.jsx("div",{className:"fixed inset-0 -z-10 bg-black pointer-events-none transition-opacity duration-200 ease-out",style:{opacity:c,contain:"paint"},"aria-hidden":"true"})]})}),Xi=20,Ki=12,Qi=s.createContext(null);function Zi({children:e}){const[t,o]=s.useState({content:null,mouseX:0,mouseY:0,visible:!1}),a=s.useRef(null),[r,i]=s.useState({x:0,y:0}),l=s.useCallback((e,t,s)=>{o({content:e,mouseX:t,mouseY:s,visible:!0})},[]),c=s.useCallback(()=>{o(e=>({...e,visible:!1}))},[]),u=s.useCallback((e,t)=>{o(s=>s.visible?{...s,mouseX:e,mouseY:t}:s)},[]);s.useEffect(()=>{if(!t.visible||!a.current)return;const e=a.current.getBoundingClientRect(),{mouseX:s,mouseY:n}=t,o=window.innerWidth,r=window.innerHeight;let l,c;l=s+Xi+e.width+Ki>o?s-Xi-e.width:s+Xi,l=Math.max(Ki,Math.min(l,o-e.width-Ki)),c=n-Xi-e.height<Ki?n+Xi:n-Xi-e.height,c=Math.max(Ki,Math.min(c,r-e.height-Ki)),i({x:l,y:c})},[t.visible,t.mouseX,t.mouseY]);const d={show:l,hide:c,updatePosition:u};return n.jsxs(Qi.Provider,{value:d,children:[e,M.createPortal(n.jsx("div",{ref:a,role:"tooltip",className:`\n            fixed z-[9999] pointer-events-none\n            px-3 py-2 rounded-lg\n            bg-bg-elevated border border-border-subtle shadow-lg\n            text-xs text-text-primary leading-relaxed\n            transition-opacity duration-150\n            ${t.visible?"opacity-100":"opacity-0"}\n          `,style:{left:r.x,top:r.y,visibility:t.visible?"visible":"hidden"},children:t.content}),document.body)]})}function el({content:e,children:t,delay:o=150}){const{show:a,hide:r,updatePosition:i}=function(){const e=s.useContext(Qi);if(!e)throw new Error("useTooltipContext must be used within TooltipProvider");return e}(),l=s.useRef(null),c=s.useRef(null),u=s.useRef(!1),d=()=>{c.current&&(clearTimeout(c.current),c.current=null)},h=s.useCallback(t=>{d(),c.current=setTimeout(()=>{u.current=!0,a(e,t.clientX,t.clientY)},o)},[a,e,o]),f=s.useCallback(e=>{u.current&&i(e.clientX,e.clientY)},[i]),p=s.useCallback(()=>{d(),u.current=!1,r()},[r]),m=s.useCallback(()=>{if(d(),!l.current)return;const t=l.current.getBoundingClientRect();c.current=setTimeout(()=>{u.current=!0,a(e,t.left+t.width/2,t.top)},o)},[a,e,o]),g=s.useCallback(()=>{d(),u.current=!1,r()},[r]);return s.useEffect(()=>()=>{d(),u.current&&(u.current=!1,r())},[r]),s.useEffect(()=>{const e=()=>{u.current&&(d(),u.current=!1,r())};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[r]),n.jsx("span",{ref:l,onMouseEnter:h,onMouseMove:f,onMouseLeave:p,onFocus:m,onBlur:g,className:"contents",children:t})}function tl({className:e=""}){return n.jsx("div",{className:`bg-white/5 animate-pulse rounded-lg ${e}`,"aria-hidden":"true"})}function sl(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading dashboard",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(tl,{className:"h-8 w-48"}),n.jsx(tl,{className:"h-8 w-32"})]}),n.jsx(tl,{className:"h-72"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:Array.from({length:8}).map((e,t)=>n.jsx(tl,{className:"h-24"},t))}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>n.jsx(tl,{className:"h-44"},t))}),n.jsx(tl,{className:"h-96"})]})}function nl(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading list",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(tl,{className:"h-8 w-40"}),n.jsx(tl,{className:"h-8 w-24"})]}),n.jsx(tl,{className:"h-20"}),n.jsxs("div",{className:"glass-card overflow-hidden",children:[n.jsx(tl,{className:"h-10 rounded-none"}),n.jsx("div",{className:"divide-y divide-border-subtle/30",children:Array.from({length:10}).map((e,t)=>n.jsx("div",{className:"px-4 py-3",children:n.jsx(tl,{className:"h-6"})},t))})]})]})}function ol(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading map",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(tl,{className:"h-8 w-32"}),n.jsx(tl,{className:"h-6 w-48"})]}),n.jsx(tl,{className:"h-[500px]"}),n.jsx(tl,{className:"h-64"})]})}function al(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading charts",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(tl,{className:"h-8 w-36"}),n.jsx(tl,{className:"h-8 w-40"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx(tl,{className:"h-80"}),n.jsx(tl,{className:"h-80"})]}),n.jsx(tl,{className:"h-64"})]})}function rl(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading settings",children:[n.jsx(tl,{className:"h-8 w-32"}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(tl,{className:"h-48"}),n.jsx(tl,{className:"h-64"}),n.jsx(tl,{className:"h-32"})]})]})}function il(){return n.jsxs("div",{className:"section-gap","aria-label":"Loading system info",children:[n.jsx(tl,{className:"h-8 w-28"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>n.jsx(tl,{className:"h-28"},t))}),n.jsx(tl,{className:"h-64"}),n.jsx(tl,{className:"h-48"})]})}const ll=s.lazy(()=>P(()=>import("./Login-B_hSHZvk.js"),__vite__mapDeps([0,1,2]))),cl=s.lazy(()=>P(()=>import("./Dashboard-C5ywx-N8.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11]))),ul=s.lazy(()=>P(()=>import("./Packets-u7_-mFOp.js"),__vite__mapDeps([12,1,2,6,7,8,5]))),dl=s.lazy(()=>P(()=>import("./Contacts-D1V4pxhs.js").then(e=>e.C),__vite__mapDeps([13,1,2,5,8,7,14,15,16]))),hl=s.lazy(()=>P(()=>import("./Statistics-COmFlD8o.js"),__vite__mapDeps([17,1,2,18,4,9,5,14,11,16]))),fl=s.lazy(()=>P(()=>import("./System-NW7yJ3Pu.js"),__vite__mapDeps([19,1,2,4,5,11]))),pl=s.lazy(()=>P(()=>import("./Logs-aLpRKwIj.js"),__vite__mapDeps([20,1,2,18,5]))),ml=s.lazy(()=>P(()=>import("./Terminal-utPzH-5H.js"),__vite__mapDeps([21,1,2,5]))),gl=s.lazy(()=>P(()=>import("./Configuration-CPt5XIgJ.js"),__vite__mapDeps([22,1,2,8,15,5,11])));function bl({children:e}){const t=a();return fa()?n.jsx(n.Fragment,{children:e}):n.jsx(E,{to:"/login",state:{from:t},replace:!0})}class yl extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var e;return this.state.hasError?n.jsxs("div",{className:"glass-card p-8 text-center",children:[n.jsx("p",{className:"type-subheading text-accent-red mb-2",children:"Page failed to render"}),n.jsx("p",{className:"type-body text-white/50 mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"Unknown error"}),n.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-accent-primary/20 text-accent-primary rounded-lg hover:bg-accent-primary/30 transition-colors",children:"Try Again"})]}):this.props.children}}function xl(){const e=Jr(e=>e.initializeApp),t=fa();return s.useEffect(()=>{if(!t)return;e();const s=setInterval(()=>{va()},3e4);return va(),_a(),()=>clearInterval(s)},[e,t]),n.jsxs(Zi,{children:[n.jsx(Vi,{}),n.jsxs(T,{children:[n.jsx(j,{path:"/login",element:n.jsx(s.Suspense,{fallback:n.jsx("div",{className:"min-h-screen bg-bg-body"}),children:n.jsx(ll,{})})}),n.jsx(j,{path:"/*",element:n.jsx(bl,{children:n.jsxs("div",{className:"flex h-screen overflow-hidden",children:[n.jsx(Yi,{}),n.jsx("main",{className:"flex-1 w-full min-w-0 pt-14 lg:pt-0 overflow-y-auto",children:n.jsx("div",{className:"px-4 sm:px-6 lg:px-8 pt-5 pb-4 sm:pb-6 lg:pb-8 max-w-7xl mx-auto",children:n.jsx(yl,{children:n.jsxs(T,{children:[n.jsx(j,{path:"/",element:n.jsx(s.Suspense,{fallback:n.jsx(sl,{}),children:n.jsx(cl,{})})}),n.jsx(j,{path:"/packets",element:n.jsx(s.Suspense,{fallback:n.jsx(nl,{}),children:n.jsx(ul,{})})}),n.jsx(j,{path:"/contacts",element:n.jsx(s.Suspense,{fallback:n.jsx(ol,{}),children:n.jsx(dl,{})})}),n.jsx(j,{path:"/statistics",element:n.jsx(s.Suspense,{fallback:n.jsx(al,{}),children:n.jsx(hl,{})})}),n.jsx(j,{path:"/system",element:n.jsx(s.Suspense,{fallback:n.jsx(il,{}),children:n.jsx(fl,{})})}),n.jsx(j,{path:"/logs",element:n.jsx(s.Suspense,{fallback:n.jsx(nl,{}),children:n.jsx(pl,{})})}),n.jsx(j,{path:"/terminal",element:n.jsx(s.Suspense,{fallback:n.jsx(nl,{}),children:n.jsx(ml,{})})}),n.jsx(j,{path:"/configuration",element:n.jsx(s.Suspense,{fallback:n.jsx(rl,{}),children:n.jsx(gl,{})})})]})})})})]})})})]})]})}const wl=console.warn;console.warn=(...e)=>{const t=e[0];"string"==typeof t&&t.includes("width")&&t.includes("height")&&t.includes("chart should be greater than 0")||wl.apply(console,e)},N.createRoot(document.getElementById("root")).render(n.jsx(s.StrictMode,{children:n.jsx(Ho,{children:n.jsx(L,{children:n.jsx(xl,{})})})}));export{Ai as $,Li as A,Ii as B,qi as C,kr as D,wi as E,bi as F,ci as G,Fi as H,Yr as I,li as J,Si as K,Ci as L,Ya as M,Oi as N,Qo as O,Go as P,Zo as Q,Yo as R,Io as S,el as T,R as U,I as V,ie as W,Vo as X,Oo as Y,Wo as Z,Pi as _,Qr as a,Ri as a0,vr as a1,Sr as a2,ai as a3,ri as a4,Aa as a5,Cr as a6,Zr as a7,ei as a8,ni as a9,vi as aA,ui as aB,hi as aC,br as aD,Ha as aa,Mr as ab,La as ac,Da as ad,Ia as ae,Ra as af,$a as ag,ye as ah,Ce as ai,Qa as aj,Wa as ak,Wi as al,Ui as am,Va as an,Xa as ao,Ka as ap,Za as aq,er as ar,Ja as as,Ua as at,qa as au,Ga as av,fi as aw,ir as ax,xr as ay,Xo as az,ti as b,si as c,Vr as d,yr as e,di as f,ia as g,ii as h,fa as i,Fa as j,Xr as k,xa as l,pi as m,Ba as n,zi as o,oi as p,Jo as q,Bi as r,la as s,Hi as t,Kr as u,wr as v,Ni as w,_i as x,Di as y,$i as z};
