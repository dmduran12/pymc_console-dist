import{$ as L,bX as R,cR as x}from"./index-CdwYueSG.js";function w(n){if(Array.isArray(n))return n;if(typeof n=="string"&&n.startsWith("["))try{const a=JSON.parse(n);return Array.isArray(a)?a:[]}catch{return[]}return[]}function A(n,a,S){const i=new Map;for(const t of a){const r=L(t);i.has(r)||i.set(r,t)}const f=new Map,u=new Map;for(const t of n){const r=t.route??t.route_type;if(!R(r))continue;const c=w(t.original_path);if(c.length===0)continue;const o=c.map(e=>e.toUpperCase());if(!t.transmitted&&o.length>=2){const e=o[o.length-2];if(e){const s=i.get(e);s&&u.set(s,(u.get(s)??0)+1)}}if(o.includes(S))for(const e of o){if(e===S)continue;const s=i.get(e);s&&f.set(s,(f.get(s)??0)+1)}}let h=0,p=0;for(const t of a)h=Math.max(h,f.get(t)??0),p=Math.max(p,u.get(t)??0);const M=new Map;let d=0,g=0,m=0;for(const t of a){const r=f.get(t)??0,c=u.get(t)??0,o=h>0?Math.round(r/h*100):0,l=p>0?Math.round(c/p*100):0,e=o+l;M.set(t,{hash:t,listenerCount:r,loudCount:c,listenerScore:o,loudScore:l,blendedScore:e}),d=Math.max(d,o),g=Math.max(g,l),m=Math.max(m,e)}return{scores:M,maxListenerScore:d,maxLoudScore:g,maxBlendedScore:m}}const C={YELLOW:x.amber,GREEN:x.green,RED:x.red,GRAY:"#505050"};export{C as L,A as c};
