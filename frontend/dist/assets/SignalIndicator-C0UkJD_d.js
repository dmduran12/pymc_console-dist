import{c as e}from"./index-DUGAIAKU.js";import{r as a,c as n,j as r}from"./vendor-react-BKIq8k5U.js";const t=e("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),s=e("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),i=e("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),o=e("signal-high",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}]]),l=e("signal-low",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}]]),c=e("signal-medium",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}]]),u=e("signal-zero",[["path",{d:"M2 20h.01",key:"4haj6o"}]]),d=e("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),p=e("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),x={ADVERT:"purple",ACK:"emerald",REQ:"sky",RESPONSE:"sky",TXT_MSG:"teal",GRP_TXT:"teal",FLOOD:"sky",GRP_DATA:"indigo",PATH:"amber",MULTIPART:"violet",TRACE:"orange",ANON_REQ:"pink",RAW_CUSTOM:"fuchsia"},h={FLOOD:"sky",T_FLOOD:"sky",DIRECT:"cyan",T_DIRECT:"cyan"},f={rx:"sky",forward:"teal",duplicate:"zinc",tx:"amber",dropped:"rose"},g={neighbor:"amber",hub:"purple",gateway:"indigo",backbone:"purple",repeater:"teal",room:"pink",companion:"blue",client:"indigo",mobile:"orange"},m={hub:"amber",backbone:"purple",relay:"cyan",edge:"brown"},y={high:"green",medium:"amber",low:"orange",insufficient:"brown"},k={direct:"amber",multihop:"brown"},M={5:-2.5,6:-5,7:-7.5,8:-10,9:-12.5,10:-15,11:-17.5,12:-20},b={62500:{5:-123,6:-125,7:-127,8:-130,9:-133,10:-136,11:-138,12:-140},125e3:{5:-120,6:-122,7:-124,8:-127,9:-130,10:-133,11:-135,12:-137},25e4:{5:-117,6:-119,7:-121,8:-124,9:-127,10:-130,11:-132,12:-134},5e5:{5:-114,6:-116,7:-118,8:-121,9:-124,10:-127,11:-129,12:-131}};function w(e,a,n){if(null==e||!Number.isFinite(e))return null;if(null==a||!Number.isFinite(a))return null;const{sf:r,bwHz:t}=n,s=function(e){const a=Math.max(5,Math.min(12,Math.round(e)));return M[a]??M[7]}(r),i=function(e,a){let n=62500;n=e>=375e3?5e5:e>=187500?25e4:e>=93750?125e3:62500;const r=b[n];return r[Math.max(5,Math.min(12,Math.round(a)))]??r[7]}(t,r),o=e-s,l=a-i;return{snrMargin:o,rssiMargin:l,worstMargin:Math.min(o,l)}}const j={EXCELLENT:6,GOOD:3,FAIR:0},N={EXCELLENT:10,GOOD:6,FAIR:2},v=["excellent","good","fair","poor","critical"];function A(e,a){return e>=a.EXCELLENT?"excellent":e>=a.GOOD?"good":e>=a.FAIR?"fair":e>=a.FAIR-3?"poor":"critical"}function E(e,a){if(0===a)return e;const n=v.indexOf(e),r=Math.min(n+a,v.length-1);return v[r]}function O(e,a,n,r){const t=(s=A(e.snrMargin,j),i=A(e.rssiMargin,N),v.indexOf(s)>=v.indexOf(i)?s:i);var s,i;const o=E(t,a);return{baseGrade:t,finalGrade:o,snrMargin:e.snrMargin,rssiMargin:e.rssiMargin,worstMargin:e.worstMargin,nfPenalty:a,wasDowngraded:a>0&&o!==t,confidence:n,isMarginBased:r}}function T(e,a,n,r=0){return n&&null!=e?function(e,a,n,r=0){const t=w(e,a,n);return t?O(t,r,"high",!0):null}(e,a,n,r):null!=e&&null!=a?function(e,a,n=0){const r=function(e,a){return w(e,a,{sf:7,bwHz:62500})}(e,a);return r?O(r,n,"low",!0):null}(e,a,r):function(e,a=0){if(null==e||!Number.isFinite(e))return null;const n=function(e){return e>=-90?"excellent":e>=-100?"good":e>=-110?"fair":e>=-120?"poor":"critical"}(e),r=E(n,a);return{baseGrade:n,finalGrade:r,snrMargin:null,rssiMargin:null,worstMargin:null,nfPenalty:a,wasDowngraded:a>0&&r!==n,confidence:"low",isMarginBased:!1}}(a,r)}const C={excellent:"color(display-p3 0.00 1.00 0.00)",good:"color(display-p3 0.55 0.90 0.15)",fair:"color(display-p3 1.00 0.85 0.00)",weak:"color(display-p3 1.00 0.55 0.15)",poor:"color(display-p3 1.00 0.20 0.20)"},R={excellent:"#4ADE80",good:"#A3E635",fair:"#FACC15",weak:"#FB923C",poor:"#EF4444"};function D(e){return e>=-90?"excellent":e>=-100?"good":e>=-110?"fair":e>=-120?"weak":"poor"}function F(e,a){return a?{backgroundColor:R[e],"--p3-color":C[e]}:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}function G(e){return e?"signal-bar-active":""}function L({rssi:e,className:a="w-4 h-4"}){const t=D(e),s=function(e){switch(e){case"excellent":return"text-signal-excellent";case"good":return"text-signal-good";case"fair":return"text-signal-fair";case"weak":return"text-signal-poor";case"poor":return"text-signal-critical";default:return"text-text-muted"}}(t),i=n(s,a);switch(t){case"excellent":return r.jsx(d,{className:i});case"good":return r.jsx(o,{className:i});case"fair":return r.jsx(c,{className:i});case"weak":return r.jsx(l,{className:i});default:return r.jsx(u,{className:i})}}const z=a.memo(function({rssi:e,snr:a,compact:t=!1,showValues:s=!0,radioConfig:i,nfPenalty:o=0}){const l=void 0!==a?function(e,a,n,r=0){const t=T(a,e,n,r);return t?function(e){switch(e){case"excellent":return"excellent";case"good":return"good";case"fair":return"fair";case"poor":return"weak";case"critical":return"poor"}}(t.finalGrade):D(e)}(e,a,i,o):D(e),c={excellent:4,good:3,fair:2,weak:1,poor:0}[l];return t?r.jsxs("div",{className:"flex items-center gap-1.5",children:[s&&r.jsx("span",{className:"text-[10px] font-mono text-text-secondary tabular-nums w-[32px] text-left",children:e}),r.jsx("div",{className:"flex items-end gap-[2px] h-3 w-[14px]",children:Array.from({length:4}).map((e,a)=>r.jsx("div",{className:n("w-[3px] rounded-[1px] transition-colors",G(a<c)),style:{height:(a+1)/4*100+"%",...F(l,a<c)}},a))})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[s&&r.jsxs("div",{className:"flex flex-col items-start w-[52px]",children:[r.jsxs("span",{className:"text-xs font-mono text-text-secondary leading-tight tabular-nums",children:[e," dBm"]}),void 0!==a&&r.jsxs("span",{className:"text-[10px] font-mono text-text-muted leading-tight tabular-nums",children:[a.toFixed(1)," dB"]})]}),r.jsx("div",{className:"flex items-end gap-[2px] h-3.5 w-[14px]",children:Array.from({length:4}).map((e,a)=>r.jsx("div",{className:n("w-[3px] rounded-[1px] transition-colors",G(a<c)),style:{height:(a+1)/4*100+"%",...F(l,a<c)}},a))})]})});function P(e){const a=D(e);return a.charAt(0).toUpperCase()+a.slice(1)}export{i as C,f as D,k as H,m as N,x as P,h as R,z as S,p as Z,s as a,d as b,t as c,g as d,L as e,y as f,P as g,T as s};
