import{j as e,a2 as s,F as t,r as a,aP as l,a5 as c,aW as n}from"./vendor-react-Bl0YzmTc.js";import{c as i}from"./recharts-DPreDcg6.js";import{ac as o,ad as r,b as x,ae as d,r as m,L as u,ab as h,af as p,ag as j}from"./index-DeUEdruM.js";import{u as g}from"./usePolling-DYBjYeiV.js";import{P as f,b as N,a as v,c as y,L as b}from"./PageLayout-DFwEcgCH.js";import"./vendor-core-WoOfkQwm.js";import"./deckgl-DTsmDcfs.js";const w=a.memo(function({log:s}){return e.jsx("div",{className:"p-3 rounded-2xl bg-white/[0.02] hover:bg-white/[0.04] transition-colors",children:e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("span",{className:i("type-data-sm w-14 shrink-0",j(s.level)),children:s.level}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"type-data-sm text-text-primary break-words whitespace-pre-wrap",children:s.message}),e.jsx("p",{className:"type-data-xs text-text-muted mt-1",children:new Date(s.timestamp).toLocaleString()})]})]})})});function F(){const s=o(),[t,r]=a.useState("INFO"),[x,d]=a.useState(!1),[m,u]=a.useState(null);a.useEffect(()=>{if(s.length>0){const e=s.some(e=>"DEBUG"===e.level);r(e?"DEBUG":"INFO")}},[s]);const h=a.useCallback(async e=>{if(e!==t&&!x){d(!0),u(null);try{const s=await p(e);s.success&&s.data?(r(e),u(s.data.message),setTimeout(()=>u(null),5e3)):(u(s.error??"Failed to change log level"),setTimeout(()=>u(null),3e3))}catch{u("Failed to change log level"),setTimeout(()=>u(null),3e3)}finally{d(!1)}}},[t,x]),j="h-[32px] px-4 rounded-full type-data flex items-center gap-2 transition-colors",g=x&&"opacity-50 cursor-not-allowed";return e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsx("span",{className:"text-xs text-text-muted animate-pulse",children:m}),e.jsxs("div",{className:"flex bg-white/[0.02] rounded-full p-1",children:[e.jsxs("button",{onClick:()=>h("INFO"),disabled:x,className:i(j,"INFO"===t?"bg-accent-primary/20 text-accent-primary":"text-text-muted hover:text-text-secondary",g),children:[e.jsx(l,{className:"w-4 h-4"}),"Info"]}),e.jsxs("button",{onClick:()=>h("DEBUG"),disabled:x,className:i(j,"DEBUG"===t?"bg-accent-secondary/20 text-accent-secondary":"text-text-muted hover:text-text-secondary",g),children:[x?e.jsx(c,{className:"w-4 h-4 animate-spin"}):e.jsx(n,{className:"w-4 h-4"}),"Debug"]})]})]})}function L(){const a=o(),l=r(),c=x(),n=d(),p=m();return g(n,h.logs,c),e.jsxs(f,{children:[e.jsx(N,{title:"System Logs",icon:e.jsx(t,{}),controls:e.jsxs(e.Fragment,{children:[e.jsx(F,{}),c&&e.jsx(u,{showLabel:!0}),e.jsxs("button",{onClick:()=>p(!c),className:i("h-[32px] px-4 rounded-full type-data transition-colors","flex items-center gap-2",c?"bg-accent-success/20 text-accent-success":"bg-white/[0.02] text-text-muted hover:text-text-secondary"),children:[e.jsx(s,{className:i("w-4 h-4",c&&"animate-spin")}),e.jsx("span",{className:"hidden xs:inline",children:c?"Live":"Paused"})]})]})}),e.jsxs(v,{noPadding:!0,children:[e.jsx(y,{listHeader:!0,icon:e.jsx(t,{className:"icon-sm"}),title:"Log Entries"}),e.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] sm:max-h-[calc(100vh-250px)] overflow-y-auto p-4",children:l&&0===a.length?e.jsx(b,{count:10}):0===a.length?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"No logs available"}):a.map((s,t)=>e.jsx(w,{log:s},`${s.timestamp}-${t}`))})]})]})}export{L as default};
