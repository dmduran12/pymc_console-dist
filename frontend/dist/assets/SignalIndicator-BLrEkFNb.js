import{j as e,a_ as n,a$ as r,b0 as a,b1 as t,aB as s,r as o}from"./vendor-react-C341c8YC.js";import{n as i}from"./recharts-6XUQYgRA.js";const l={ADVERT:"purple",ACK:"emerald",REQ:"sky",RESPONSE:"sky",TXT_MSG:"teal",GRP_TXT:"teal",FLOOD:"sky",GRP_DATA:"indigo",PATH:"amber",MULTIPART:"violet",TRACE:"orange",ANON_REQ:"pink",RAW_CUSTOM:"fuchsia"},c={FLOOD:"sky",T_FLOOD:"sky",DIRECT:"cyan",T_DIRECT:"cyan"},u={rx:"sky",forward:"teal",duplicate:"zinc",tx:"amber",dropped:"rose"},d={neighbor:"amber",hub:"purple",gateway:"indigo",backbone:"purple",repeater:"teal",room:"pink",companion:"blue",client:"indigo",mobile:"orange"},x={hub:"amber",backbone:"purple",relay:"cyan",edge:"brown"},f={high:"green",medium:"amber",low:"orange",insufficient:"brown"},g={direct:"amber",multihop:"brown"},p={5:-2.5,6:-5,7:-7.5,8:-10,9:-12.5,10:-15,11:-17.5,12:-20},m={62500:{5:-123,6:-125,7:-127,8:-130,9:-133,10:-136,11:-138,12:-140},125e3:{5:-120,6:-122,7:-124,8:-127,9:-130,10:-133,11:-135,12:-137},25e4:{5:-117,6:-119,7:-121,8:-124,9:-127,10:-130,11:-132,12:-134},5e5:{5:-114,6:-116,7:-118,8:-121,9:-124,10:-127,11:-129,12:-131}};function h(e,n,r){if(null==e||!Number.isFinite(e))return null;if(null==n||!Number.isFinite(n))return null;const{sf:a,bwHz:t}=r,s=function(e){const n=Math.max(5,Math.min(12,Math.round(e)));return p[n]??p[7]}(a),o=function(e,n){let r=62500;r=e>=375e3?5e5:e>=187500?25e4:e>=93750?125e3:62500;const a=m[r];return a[Math.max(5,Math.min(12,Math.round(n)))]??a[7]}(t,a),i=e-s,l=n-o;return{snrMargin:i,rssiMargin:l,worstMargin:Math.min(i,l)}}const w={EXCELLENT:6,GOOD:3,FAIR:0},b={EXCELLENT:10,GOOD:6,FAIR:2},M=["excellent","good","fair","poor","critical"];function N(e,n){return e>=n.EXCELLENT?"excellent":e>=n.GOOD?"good":e>=n.FAIR?"fair":e>=n.FAIR-3?"poor":"critical"}function y(e,n){if(0===n)return e;const r=M.indexOf(e),a=Math.min(r+n,M.length-1);return M[a]}function E(e,n,r,a){const t=(s=N(e.snrMargin,w),o=N(e.rssiMargin,b),M.indexOf(s)>=M.indexOf(o)?s:o);var s,o;const i=y(t,n);return{baseGrade:t,finalGrade:i,snrMargin:e.snrMargin,rssiMargin:e.rssiMargin,worstMargin:e.worstMargin,nfPenalty:n,wasDowngraded:n>0&&i!==t,confidence:r,isMarginBased:a}}function k(e,n,r,a=0){return r&&null!=e?function(e,n,r,a=0){const t=h(e,n,r);return t?E(t,a,"high",!0):null}(e,n,r,a):null!=e&&null!=n?function(e,n,r=0){const a=function(e,n){return h(e,n,{sf:7,bwHz:62500})}(e,n);return a?E(a,r,"low",!0):null}(e,n,a):function(e,n=0){if(null==e||!Number.isFinite(e))return null;const r=function(e){return e>=-90?"excellent":e>=-100?"good":e>=-110?"fair":e>=-120?"poor":"critical"}(e),a=y(r,n);return{baseGrade:r,finalGrade:a,snrMargin:null,rssiMargin:null,worstMargin:null,nfPenalty:n,wasDowngraded:n>0&&a!==r,confidence:"low",isMarginBased:!1}}(n,a)}const A={excellent:"color(display-p3 0.00 1.00 0.00)",good:"color(display-p3 0.55 0.90 0.15)",fair:"color(display-p3 1.00 0.85 0.00)",weak:"color(display-p3 1.00 0.55 0.15)",poor:"color(display-p3 1.00 0.20 0.20)"},j={excellent:"#4ADE80",good:"#A3E635",fair:"#FACC15",weak:"#FB923C",poor:"#EF4444"};function O(e){return e>=-90?"excellent":e>=-100?"good":e>=-110?"fair":e>=-120?"weak":"poor"}function T(e,n){return n?{backgroundColor:j[e],"--p3-color":A[e]}:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}function C(e){return e?"signal-bar-active":""}function R({rssi:o,className:l="w-4 h-4"}){const c=O(o),u=function(e){switch(e){case"excellent":return"text-signal-excellent";case"good":return"text-signal-good";case"fair":return"text-signal-fair";case"weak":return"text-signal-poor";case"poor":return"text-signal-critical";default:return"text-text-muted"}}(c),d=i(u,l);switch(c){case"excellent":return e.jsx(s,{className:d});case"good":return e.jsx(t,{className:d});case"fair":return e.jsx(a,{className:d});case"weak":return e.jsx(r,{className:d});default:return e.jsx(n,{className:d})}}const D=o.memo(function({rssi:n,snr:r,compact:a=!1,showValues:t=!0,radioConfig:s,nfPenalty:o=0}){const l=void 0!==r?function(e,n,r,a=0){const t=k(n,e,r,a);return t?function(e){switch(e){case"excellent":return"excellent";case"good":return"good";case"fair":return"fair";case"poor":return"weak";case"critical":return"poor"}}(t.finalGrade):O(e)}(n,r,s,o):O(n),c={excellent:4,good:3,fair:2,weak:1,poor:0}[l];return a?e.jsxs("div",{className:"flex items-center gap-1.5",children:[t&&e.jsx("span",{className:"text-[10px] font-mono text-text-secondary tabular-nums w-[32px] text-left",children:n}),e.jsx("div",{className:"flex items-end gap-[2px] h-3 w-[14px]",children:Array.from({length:4}).map((n,r)=>e.jsx("div",{className:i("w-[3px] rounded-[1px] transition-colors",C(r<c)),style:{height:(r+1)/4*100+"%",...T(l,r<c)}},r))})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsxs("div",{className:"flex flex-col items-start w-[52px]",children:[e.jsxs("span",{className:"text-xs font-mono text-text-secondary leading-tight tabular-nums",children:[n," dBm"]}),void 0!==r&&e.jsxs("span",{className:"text-[10px] font-mono text-text-muted leading-tight tabular-nums",children:[r.toFixed(1)," dB"]})]}),e.jsx("div",{className:"flex items-end gap-[2px] h-3.5 w-[14px]",children:Array.from({length:4}).map((n,r)=>e.jsx("div",{className:i("w-[3px] rounded-[1px] transition-colors",C(r<c)),style:{height:(r+1)/4*100+"%",...T(l,r<c)}},r))})]})});function F(e){const n=O(e);return n.charAt(0).toUpperCase()+n.slice(1)}export{d as C,u as D,g as H,x as N,l as P,c as R,D as S,R as a,f as b,F as g,k as s};
