import{j as e,y as s,$ as t,F as a,r as l,ay as c,al as n,aH as r}from"./vendor-react-nG6Am_s0.js";import{X as i,Y as o,b as m,Z as x,m as d,V as u,_ as h,$ as p}from"./index-BIZ3jtzu.js";import{u as j}from"./usePolling-CkFZwcUi.js";import{c as g}from"./recharts-BJXKa0n8.js";import{P as N,a as f,C as v,b}from"./PageLayout-D3aCCXDi.js";import"./vendor-core-XI_xDZ-M.js";import"./deckgl-MTXp-Y3t.js";function y({className:s,style:t}){return e.jsx("div",{className:g("animate-pulse bg-white/[0.06] rounded",s),style:t})}function w(){return e.jsx("div",{className:"p-3 rounded-lg border border-border-subtle bg-bg-subtle",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"w-14 h-6 rounded shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsx(y,{className:"h-4 w-full"}),e.jsx(y,{className:"h-4 w-3/4"}),e.jsx(y,{className:"h-3 w-32 mt-1"})]})]})})}function k({count:s=8}){return e.jsx("div",{className:"space-y-2",children:Array.from({length:s}).map((s,t)=>e.jsx(w,{},t))})}const F=l.memo(function({log:s}){const t=p(s.level);return e.jsx("div",{className:"p-3 rounded-2xl bg-white/[0.02] hover:bg-white/[0.04] transition-colors",children:e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("span",{className:g("type-data-sm w-14 shrink-0",t),children:s.level}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"type-data-sm text-text-primary break-words whitespace-pre-wrap",children:s.message}),e.jsx("p",{className:"type-data-xs text-text-muted mt-1",children:new Date(s.timestamp).toLocaleString()})]})]})})});function D(){const s=i(),[t,a]=l.useState("INFO"),[o,m]=l.useState(!1),[x,d]=l.useState(null);l.useEffect(()=>{if(s.length>0){const e=s.some(e=>"DEBUG"===e.level);a(e?"DEBUG":"INFO")}},[s]);const u=l.useCallback(async e=>{if(e!==t&&!o){m(!0),d(null);try{const s=await h(e);s.success&&s.data?(a(e),d(s.data.message),setTimeout(()=>d(null),5e3)):(d(s.error||"Failed to change log level"),setTimeout(()=>d(null),3e3))}catch{d("Failed to change log level"),setTimeout(()=>d(null),3e3)}finally{m(!1)}}},[t,o]);return e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsx("span",{className:"text-xs text-text-muted animate-pulse",children:x}),e.jsxs("div",{className:"flex bg-white/[0.02] rounded-full p-1",children:[e.jsxs("button",{onClick:()=>u("INFO"),disabled:o,className:g("h-[32px] px-4 rounded-full type-data flex items-center gap-2 transition-colors","INFO"===t?"bg-accent-primary/20 text-accent-primary":"text-text-muted hover:text-text-secondary",o&&"opacity-50 cursor-not-allowed"),children:[e.jsx(c,{className:"w-4 h-4"}),"Info"]}),e.jsxs("button",{onClick:()=>u("DEBUG"),disabled:o,className:g("h-[32px] px-4 rounded-full type-data flex items-center gap-2 transition-colors","DEBUG"===t?"bg-amber-500/20 text-amber-400":"text-text-muted hover:text-text-secondary",o&&"opacity-50 cursor-not-allowed"),children:[o?e.jsx(n,{className:"w-4 h-4 animate-spin"}):e.jsx(r,{className:"w-4 h-4"}),"Debug"]})]})]})}function E(){const l=i(),c=o(),n=m(),r=x(),h=d();return j(r,u.logs,n),e.jsxs(N,{children:[e.jsx(f,{title:"System Logs",icon:e.jsx(a,{}),controls:e.jsxs(e.Fragment,{children:[e.jsx(D,{}),n&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(s,{className:"w-2 h-2 fill-accent-success text-accent-success animate-pulse"}),e.jsx("span",{className:"text-text-muted",children:"Live"})]}),e.jsxs("button",{onClick:()=>h(!n),className:g("h-[32px] px-4 rounded-full type-data transition-colors","flex items-center gap-2",n?"bg-accent-success/20 text-accent-success":"bg-white/[0.02] text-text-muted hover:text-text-secondary"),children:[e.jsx(t,{className:g("w-4 h-4",n&&"animate-spin")}),e.jsx("span",{className:"hidden xs:inline",children:n?"Live":"Paused"})]})]})}),e.jsxs(v,{noPadding:!0,children:[e.jsx(b,{listHeader:!0,icon:e.jsx(a,{className:"icon-sm"}),title:"Log Entries"}),e.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] sm:max-h-[calc(100vh-250px)] overflow-y-auto p-4",children:c&&0===l.length?e.jsx(k,{count:10}):0===l.length?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"No logs available"}):l.map((s,t)=>e.jsx(F,{log:s},`${s.timestamp}-${t}`))})]})]})}export{E as default};
