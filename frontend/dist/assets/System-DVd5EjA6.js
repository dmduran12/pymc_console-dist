import{r as l,j as e}from"./vendor-react-CHg3w57L.js";import{c as H}from"./vendor-core-CgllfypI.js";import{bf as F,bb as A,d as z,q as B,bg as ee,bh as te,bi as se,bj as re,bk as ne,aH as ae,B as oe,bl as le,bm as G}from"./index-B4woLUMa.js";import{C as E,P as ce,a as ie,B as me}from"./PageLayout-vzO_WRlt.js";import{u as J}from"./vendor-charts-DuSK2RSZ.js";import{a3 as de,$ as ue,ak as xe,V as fe,aV as pe,a7 as O,aW as he,aX as ge,aY as ye}from"./vendor-icons-rRVc_l7g.js";import{R as $,C as L}from"./Grid-C8oPbJfP.js";import"./cosmograph-RBQGoH9-.js";import"./vendor-motion-CXybMqb1.js";import"./vendor-fonts-CgDm-k6O.js";const P=[{pos:0,color:F(A.purple)},{pos:.25,color:F(A.indigo)},{pos:.5,color:F(A.cyan)},{pos:.75,color:F(A.amber)},{pos:1,color:F(A.red)}];function je(t,s,o){const n=.45454545454545453,r=Math.pow(t.r/255,2.2),i=Math.pow(t.g/255,2.2),x=Math.pow(t.b/255,2.2),m=Math.pow(s.r/255,2.2),d=Math.pow(s.g/255,2.2),c=Math.pow(s.b/255,2.2);return{r:Math.round(Math.pow(r+o*(m-r),n)*255),g:Math.round(Math.pow(i+o*(d-i),n)*255),b:Math.round(Math.pow(x+o*(c-x),n)*255)}}function Z(t){const s=Math.max(0,Math.min(1,t));let o=P[0],a=P[P.length-1];for(let i=0;i<P.length-1;i++)if(s>=P[i].pos&&s<=P[i+1].pos){o=P[i],a=P[i+1];break}const n=a.pos-o.pos,r=n>0?(s-o.pos)/n:0;return je(o.color,a.color,r)}const W=z.hero,be=36;function V(){const t=getComputedStyle(document.documentElement);return{fontFamily:t.getPropertyValue("--font-data").trim()||'"JetBrains Mono", ui-monospace, monospace',textPrimary:t.getPropertyValue("--text-primary").trim()||"#FFFFFF",textMuted:t.getPropertyValue("--text-muted").trim()||"#727272",gridColor:t.getPropertyValue("--chart-grid").trim()||"rgba(255, 255, 255, 0.06)"}}function we(t){const s=[],o=Math.max(0,W-t.length);for(let n=0;n<o;n++)s.push({timestamp:n,time:"",cpu:null,memory:null});const a=t.slice(-W);for(let n=0;n<a.length;n++){const r=a[n];s.push({timestamp:o+n,time:r.time.slice(0,5),cpu:r.cpu,memory:r.memory})}return s}function Ne(t,s,o,a,n){if(s.length===0)return;const r=t.ctx,{left:i,top:x,width:m,height:d}=t.bbox,c=window.devicePixelRatio||1;if(m<=0||d<=0)return;const g=s.length;if(g===0)return;const R=m/g,j=u=>i+(u+.5)*R,p=u=>{const y=Math.min(Math.max(u/100,0),1);return x+d*(1-y)};r.save(),r.strokeStyle=n.textPrimary,r.globalAlpha=.1,r.lineWidth=1*c,r.setLineDash([4*c,4*c]);for(const u of[25,50,75]){const y=Math.round(p(u))+.5;r.beginPath(),r.moveTo(Math.round(i),y),r.lineTo(Math.round(i+m),y),r.stroke()}r.restore(),r.save(),r.font=`bold ${10*c}px ${n.fontFamily}`,r.fillStyle=n.textMuted,r.textBaseline="middle",r.textAlign="left";const f=8*c;for(const u of[0,25,50,75,100]){const y=p(u),v=Math.max(x+f,Math.min(x+d-f,y));r.fillText(`${u}%`,4*c,v)}r.restore(),r.save();for(let u=0;u<g;u++){const y=s[u];if(!y||y.cpu===null)continue;const w=j(u)-R/2,M=p(y.cpu),_=x+d-M,T=Math.pow(y.cpu/100,.7),k=Z(T);r.fillStyle=`rgba(${k.r}, ${k.g}, ${k.b}, 0.85)`,r.fillRect(w,M,R,_)}r.restore(),r.save(),r.lineWidth=2.5*c,r.lineCap="round",r.lineJoin="round",r.strokeStyle=a;let h=!1,b=0;for(let u=0;u<g;u++){const y=s[u];if(!y||y.memory===null){h&&(r.stroke(),r.beginPath(),h=!1);continue}const v=j(u),w=p(y.memory);h?(r.lineTo(v,b),r.lineTo(v,w)):(r.beginPath(),r.moveTo(v,w),h=!0),b=w}h&&r.stroke(),r.restore(),r.save(),r.font=`${10*c}px ${n.fontFamily}`,r.fillStyle=n.textMuted,r.textBaseline="top",r.textAlign="center";const N=x+d+6*c,C=Math.max(1,Math.floor(g/4));for(let u=0;u<g;u+=C){const y=s[u];!y||!y.time||r.fillText(y.time,j(u),N)}if(g>0){const u=s[g-1];u!=null&&u.time&&(r.textAlign="right",r.fillText(u.time,j(g-1),N))}r.restore()}function ve({data:t,cpuColor:s,memoryColor:o}){const a=l.useRef(null),n=l.useRef(null),r=l.useRef([]),i=l.useRef(s),x=l.useRef(o),m=l.useRef(null),d=l.useRef(t.length);l.useLayoutEffect(()=>{i.current=s,x.current=o}),l.useEffect(()=>{m.current=V()},[]);const c=l.useMemo(()=>we(t),[t]);l.useLayoutEffect(()=>{r.current=c},[c]);const g=l.useMemo(()=>{const p=c.map(h=>h.timestamp),f=new Array(c.length).fill(1);return[p,f]},[c]),R=l.useMemo(()=>({hooks:{draw:p=>{const f=m.current||V();Ne(p,r.current,i.current,x.current,f)}}}),[]),j=l.useMemo(()=>({width:400,height:240,padding:[4,8,4,be],cursor:{show:!1,x:!1,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!1},y:{range:[0,100]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1}],plugins:[R]}),[R]);return l.useEffect(()=>{const p=a.current;if(!p||c.length===0)return;const f=d.current,h=t.length,b=Math.abs(h-f);if(!(!n.current||b>50||f>0&&b/f>.2)&&n.current){n.current.setData(g),d.current=h;return}n.current&&n.current.destroy();const C=p.getBoundingClientRect(),u=Math.floor(C.width)||400,y=Math.floor(C.height)||240,v=new J({...j,width:u,height:y},g,p);return n.current=v,d.current=h,()=>{v.destroy(),n.current=null}},[j,g,c.length,t.length]),l.useEffect(()=>{const p=a.current;if(!p)return;const f=new ResizeObserver(h=>{const b=h[0];if(!b||!n.current)return;const{width:N,height:C}=b.contentRect;N>0&&C>0&&n.current.setSize({width:Math.floor(N),height:Math.floor(C)})});return f.observe(p),()=>{f.disconnect()}},[]),l.useEffect(()=>{n.current&&n.current.redraw()},[s,o,c]),t.length===0?e.jsx("div",{className:"flex-1 min-h-[180px] flex items-center justify-center text-fg-muted",children:"Collecting data..."}):e.jsx("div",{className:"relative flex-1 min-h-[180px]",children:e.jsx("div",{ref:a,className:"absolute inset-0 radius-inner overflow-hidden"})})}const Me=l.memo(ve),Re=1024*1024;function Ce(t,s,o,a,n){const r=t.ctx,{left:i,top:x,width:m,height:d}=t.bbox;if(m<=0||d<=0)return;const c=[...Array(Math.max(0,n-s.length)).fill(0),...s.slice(-n)],g=Math.max(...c,1),R=c.length,j=m/R,p=d*.03;r.save();for(let f=0;f<R;f++){const h=c[f],b=i+f*j;if(h<=0)continue;const N=Math.min(h/g,1),C=Math.max(N*d,p),u=Math.min(h/Re,1),y=Math.pow(u,.7),v=Z(y);r.fillStyle=`rgb(${v.r}, ${v.g}, ${v.b})`,a?r.fillRect(b,x,j,C):r.fillRect(b,x+d-C,j,C)}r.restore()}function Se({data:t,color:s,flipped:o=!1,fixedSlots:a}){const n=l.useRef(null),r=l.useRef(null),i=l.useRef(t),x=l.useRef(s),m=l.useRef(o),d=l.useRef(a);l.useLayoutEffect(()=>{i.current=t,x.current=s,m.current=o,d.current=a});const c=l.useMemo(()=>{const j=Array.from({length:a},(f,h)=>h),p=new Array(a).fill(1);return[j,p]},[a]),g=l.useMemo(()=>({hooks:{draw:j=>{Ce(j,i.current,x.current,m.current,d.current)}}}),[]),R=l.useMemo(()=>({width:400,height:40,padding:[0,0,0,0],legend:{show:!1},cursor:{show:!1,x:!1,y:!1,drag:{x:!1,y:!1},points:{show:!1}},scales:{x:{time:!1},y:{range:[0,1]}},axes:[{show:!1},{show:!1}],series:[{},{show:!1,label:""}],plugins:[g]}),[g]);return l.useEffect(()=>{const j=n.current;if(!j)return;r.current&&r.current.destroy();const p=j.getBoundingClientRect(),f=Math.floor(p.width)||400,h=Math.floor(p.height)||40,b=new J({...R,width:f,height:h},c,j);return r.current=b,()=>{b.destroy(),r.current=null}},[R,c]),l.useEffect(()=>{const j=n.current;if(!j)return;const p=new ResizeObserver(f=>{const h=f[0];if(!h||!r.current)return;const{width:b,height:N}=h.contentRect;b>0&&N>0&&r.current.setSize({width:Math.floor(b),height:Math.floor(N)})});return p.observe(j),()=>{p.disconnect()}},[]),l.useEffect(()=>{r.current&&r.current.redraw()},[t,s,o]),e.jsx("div",{ref:n,className:"w-full h-full"})}const X=l.memo(Se),S={cold:30,normal:50,warm:65,hot:80},I={cpu:{warning:80,danger:95},memory:{warning:85,danger:95},temp:{warning:70,danger:85}},_e=[{threshold:S.cold,color:"var(--sys-cyan)"},{threshold:S.normal,color:"var(--sys-blue)"},{threshold:S.warm,color:"var(--sys-indigo)"},{threshold:S.hot,color:"var(--signal-poor)"}];function Te(t){return t<S.cold?{text:"Cool",color:"text-sys-cyan"}:t<S.normal?{text:"Normal",color:"text-sys-blue"}:t<S.warm?{text:"Warm",color:"text-sys-indigo"}:t<S.hot?{text:"Hot",color:"text-signal-poor"}:{text:"Danger",color:"text-sys-red"}}function ke(t,s,o){const a=o-s,n={cold:(S.cold-s)/a*100,normal:(S.normal-s)/a*100,warm:(S.warm-s)/a*100,hot:(S.hot-s)/a*100};return`linear-gradient(to right, ${[{pos:0,color:"var(--sys-cyan)"},{pos:n.cold,color:"var(--sys-cyan)"},{pos:n.cold,color:"var(--sys-blue)"},{pos:n.normal,color:"var(--sys-blue)"},{pos:n.normal,color:"var(--sys-indigo)"},{pos:n.warm,color:"var(--sys-indigo)"},{pos:n.warm,color:"var(--signal-poor)"},{pos:n.hot,color:"var(--signal-poor)"},{pos:n.hot,color:"var(--sys-red)"},{pos:100,color:"var(--sys-red)"}].map(x=>{const m=t>0?x.pos/t*100:0;return`${x.color} ${Math.min(m,100)}%`}).join(", ")})`}function U(t,s){return t>=s.danger?"danger":t>=s.warning?"warning":"none"}function Pe(t){let s="none";for(const o of Object.values(t)){const a=U(o,I.temp);if(a==="danger")return"danger";a==="warning"&&(s="warning")}return s}function K(t){let s,o;t>=1024*1024*1024?(s=t/(1024*1024*1024),o="GB/s"):t>=1024*1024?(s=t/(1024*1024),o="MB/s"):t>=1024?(s=t/1024,o="KB/s"):(s=t,o="B/s");let a;return s>=100?a=s.toFixed(0):(s>=10,a=s.toFixed(1)),`${a} ${o}`}function D(t){return t>=1024*1024*1024?{value:(t/(1024*1024*1024)).toFixed(1),unit:"GiB"}:t>=1024*1024?{value:(t/(1024*1024)).toFixed(1),unit:"MiB"}:t>=1024?{value:(t/1024).toFixed(1),unit:"KiB"}:{value:String(t),unit:"B"}}const Y=l.memo(function({level:s}){return s==="none"?null:e.jsxs("span",{className:H("inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium",s==="danger"&&"bg-sys-red/20 text-sys-red",s==="warning"&&"bg-sys-indigo/20 text-sys-indigo"),children:[e.jsx(de,{className:"w-3 h-3"}),s==="danger"?"High":"Warn"]})}),Q=l.memo(function({value:s,max:o=100,width:a=10,color:n="primary"}){const r=Math.min(s/o,1),i=Math.round(r*a),x=a-i,m="■".repeat(i),d="·".repeat(x),c={primary:"text-sys-blue",secondary:"text-sys-indigo",success:"text-sys-green",danger:"text-sys-red"}[n];return e.jsxs("span",{className:"font-mono text-[10px] tracking-tight",children:[e.jsx("span",{className:c,children:m}),e.jsx("span",{className:"text-fg-muted/40",children:d})]})}),Ee=l.memo(function({index:s,usage:o}){const a=o>90?"danger":o>70?"secondary":"primary";return e.jsxs("div",{className:"flex items-center gap-1 type-data-xs",children:[e.jsxs("span",{className:"text-fg-muted w-5",children:["C",s]}),e.jsx(Q,{value:o,width:8,color:a}),e.jsxs("span",{className:H("w-7 text-right tabular-nums",o>90?"text-sys-red":o>70?"text-sys-indigo":"text-sys-green"),children:[o.toFixed(0),"%"]})]})}),Be=l.memo(function({pid:s,name:o,cpu:a,mem:n,isTopCpu:r=!1,isTopMem:i=!1}){return e.jsxs("div",{className:"flex items-center gap-2 py-1 type-data-sm hover:bg-subtle-fill -mx-1 px-1 rounded",children:[e.jsx("span",{className:"text-fg-muted w-10 sm:w-14 tabular-nums",children:s}),e.jsx("span",{className:"flex-1 truncate text-fg-primary",children:o}),e.jsx("span",{className:"hidden sm:inline-flex",children:e.jsx(Q,{value:a,max:100,width:6,color:a>50?"danger":a>20?"secondary":"success"})}),e.jsx("span",{className:H("w-10 sm:w-12 text-right tabular-nums",r?"text-fg-primary":a>50?"text-sys-red":a>20?"text-sys-indigo":"text-fg-muted"),children:a.toFixed(1)}),e.jsx("span",{className:H("w-10 sm:w-12 text-right tabular-nums",i?"text-fg-primary":n>50?"text-sys-red":n>20?"text-sys-indigo":"text-fg-muted"),children:n.toFixed(1)})]})}),q=l.memo(function({value:s,label:o,min:a=20,max:n=100}){const r=Math.min(Math.max((s-a)/(n-a)*100,0),100),i=Te(s),x=n-a;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"type-data-sm text-fg-muted",children:o}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"type-data-sm text-fg-muted",children:i.text}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded type-data-sm",children:[e.jsx("span",{className:i.color,children:s.toFixed(1)}),e.jsx("span",{className:"text-fg-primary",children:"°C"})]})]})]}),e.jsxs("div",{className:"relative h-3 rounded-full bg-subtle-fill/80 depth-stroke-inset overflow-hidden",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full transition-all duration-300 ease-out",style:{background:ke(r,a,n),width:`${r}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center pointer-events-none",children:_e.map(({threshold:m,color:d})=>{const c=(m-a)/x*100;return c<0||c>100?null:e.jsx("div",{className:"absolute w-px h-full",style:{left:`${c}%`,backgroundColor:d}},m)})})]})]})});l.memo(function({data:s,color:o,flipped:a=!1,fixedSlots:n}){const r=[...Array(Math.max(0,n-s.length)).fill(0),...s.slice(-n)],i=Math.max(...r,1),x=r.map(m=>m===0?0:Math.max(m/i*100,3));return e.jsx("div",{className:"w-full h-full flex items-end",style:{transform:a?"scaleY(-1)":void 0},children:x.map((m,d)=>e.jsx("div",{className:"flex-1 min-w-0",style:{height:m>0?`${m}%`:"0%",backgroundColor:m>0?o:"transparent"}},d))})});function Fe({networkHistory:t,txRate:s,rxRate:o,totalBytesSent:a,totalBytesRecv:n,cpuColor:r,memoryColor:i,networkSlots:x}){return e.jsxs(E,{neomorphic:!0,className:"flex flex-col",children:[e.jsx(B,{icon:e.jsx(xe,{}),title:"Network",actions:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ue,{className:"w-3.5 h-3.5",style:{color:i}}),e.jsx("span",{className:"type-data-xs",style:{color:i},children:"TX"}),e.jsx("span",{className:"px-2 py-1 bg-subtle-fill-strong rounded type-data-sm text-fg-primary",children:K(s)})]})}),e.jsxs("div",{className:"flex flex-col h-[120px]",children:[e.jsx("div",{className:"h-[60px]",children:e.jsx(X,{data:t.map((m,d,c)=>{if(d===0)return 0;const g=(m.timestamp-c[d-1].timestamp)/1e3;return g>0?(m.bytesSent-c[d-1].bytesSent)/g:0}),color:i,fixedSlots:x})}),e.jsx("div",{className:"h-[60px]",children:e.jsx(X,{data:t.map((m,d,c)=>{if(d===0)return 0;const g=(m.timestamp-c[d-1].timestamp)/1e3;return g>0?(m.bytesRecv-c[d-1].bytesRecv)/g:0}),color:r,flipped:!0,fixedSlots:x})})]}),e.jsxs("div",{className:"pt-2 flex flex-wrap justify-between items-center gap-2 type-data-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("span",{className:"text-fg-muted",children:"Total"}),e.jsxs("span",{className:"px-1.5 sm:px-2 py-1 bg-subtle-fill-strong rounded tabular-nums",children:[e.jsx("span",{style:{color:i},children:D(a).value})," ",e.jsx("span",{className:"text-fg-muted",children:D(a).unit})]}),e.jsxs("span",{className:"px-1.5 sm:px-2 py-1 bg-subtle-fill-strong rounded tabular-nums",children:[e.jsx("span",{style:{color:r},children:D(n).value})," ",e.jsx("span",{className:"text-fg-muted",children:D(n).unit})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(fe,{className:"w-3.5 h-3.5",style:{color:r}}),e.jsx("span",{className:"type-data-xs",style:{color:r},children:"RX"}),e.jsx("span",{className:"px-1.5 sm:px-2 py-1 bg-subtle-fill-strong rounded tabular-nums text-fg-primary",children:K(o)})]})]})]})}const Ae=l.memo(Fe);function He({temperatures:t}){return e.jsxs(E,{neomorphic:!0,className:"flex flex-col",children:[e.jsx(B,{icon:e.jsx(pe,{}),title:"Temperature",actions:t&&e.jsx(Y,{level:Pe(t)})}),e.jsx("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:t&&Object.keys(t).length>0?e.jsxs("div",{className:"space-y-3",children:[t.cpu_thermal!==void 0&&e.jsx(q,{value:t.cpu_thermal,label:"CPU",min:20,max:100}),Object.entries(t).filter(([s])=>s!=="cpu_thermal").slice(0,2).map(([s,o])=>e.jsx(q,{value:o,label:s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),min:20,max:100},s))]}):e.jsxs("div",{className:"flex items-center justify-center text-fg-muted text-sm",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"No sensors"]})})]})}const $e=l.memo(He);function Le({usagePercent:t,used:s,available:o,memoryColor:a}){return e.jsxs(E,{neomorphic:!0,className:"flex flex-col",children:[e.jsx(B,{icon:e.jsx(O,{}),title:"Memory",actions:e.jsxs("span",{className:"px-2 py-0.5 bg-subtle-fill-strong rounded type-data",style:{color:a},children:[t.toFixed(0),"%"]})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:[e.jsxs("div",{className:"flex gap-1 h-12 radius-inner bg-subtle-fill/80 depth-stroke-inset overflow-hidden",children:[e.jsx("div",{className:"h-full transition-all duration-300 bg-sys-blue",style:{width:`${t}%`}}),e.jsx("div",{className:"h-full transition-all duration-300 bg-subtle-fill/80",style:{width:`${100-t}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between type-data-xs pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-sys-blue"}),e.jsx("span",{className:"text-fg-muted",children:"Used"}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-fg-primary",children:[(s/(1024*1024)).toFixed(0)," MB"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-subtle-fill-strong depth-stroke-raised"}),e.jsx("span",{className:"text-fg-muted",children:"Avail"}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-fg-muted",children:[(o/(1024*1024)).toFixed(0)," MB"]})]})]})]})]})}const De=l.memo(Le);function Oe({usagePercent:t,used:s,free:o,cpuColor:a}){return e.jsxs(E,{neomorphic:!0,className:"flex flex-col",children:[e.jsx(B,{icon:e.jsx(he,{}),title:"Disk",actions:e.jsxs("span",{className:"px-2 py-0.5 bg-subtle-fill-strong rounded type-data",style:{color:a},children:[t.toFixed(0),"%"]})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:[e.jsxs("div",{className:"flex gap-1 h-12 radius-inner bg-subtle-fill/80 depth-stroke-inset overflow-hidden",children:[e.jsx("div",{className:"h-full transition-all duration-300 bg-sys-blue",style:{width:`${t}%`}}),e.jsx("div",{className:"h-full transition-all duration-300 bg-subtle-fill/80",style:{width:`${100-t}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between type-data-xs pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-sys-blue"}),e.jsx("span",{className:"text-fg-muted",children:"Used"}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-fg-primary",children:[(s/(1024*1024*1024)).toFixed(1)," GB"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-subtle-fill-strong depth-stroke-raised"}),e.jsx("span",{className:"text-fg-muted",children:"Free"}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-subtle-fill-strong rounded tabular-nums text-fg-muted",children:[(o/(1024*1024*1024)).toFixed(1)," GB"]})]})]})]})]})}const Ie=l.memo(Oe);function Ue({processes:t}){if(t.length===0)return null;const s=t.slice(0,10),o=Math.max(...s.map(n=>n.cpu_percent)),a=Math.max(...s.map(n=>n.memory_percent));return e.jsx(E,{neomorphic:!0,noPadding:!0,children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsx(B,{icon:e.jsx(O,{}),title:"Processes"}),e.jsxs("div",{className:"flex items-center gap-2 py-1.5 type-data-sm text-fg-muted",children:[e.jsx("span",{className:"w-10 sm:w-14",children:"PID"}),e.jsx("span",{className:"flex-1",children:"Program"}),e.jsx("span",{className:"hidden sm:block w-[52px]"}),e.jsx("span",{className:"w-10 sm:w-12 text-right",children:"CPU%"}),e.jsx("span",{className:"w-10 sm:w-12 text-right",children:"MEM%"})]}),s.map(n=>e.jsx(Be,{pid:n.pid,name:n.name,cpu:n.cpu_percent,mem:n.memory_percent,isTopCpu:n.cpu_percent===o&&o>0,isTopMem:n.memory_percent===a&&a>0},n.pid))]})})}const Ye=l.memo(Ue),ze=z.hero;function Ge(){const[t,s]=l.useState(typeof window<"u"?window.matchMedia("(max-width: 767px)").matches:!1);return l.useEffect(()=>{const o=window.matchMedia("(max-width: 767px)");s(o.matches);const a=n=>s(n.matches);return o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[]),t?z.hero:40}function st(){var v;const t=ee(),s=te(),o=se(),a=re(),n=ne(),[r,i]=l.useState([]),[x,m]=l.useState(!1),[d,c]=l.useState([]),[g,R]=l.useState(0),[j,p]=l.useState(0),f=l.useRef(null),h=ae(),b=h.blue,N=h.amber,C=Ge();l.useEffect(()=>{if(!t)return;const w=Date.now(),M={timestamp:w,bytesRecv:t.network.bytes_recv,bytesSent:t.network.bytes_sent};if(f.current){const _=(w-f.current.timestamp)/1e3;if(_>0){const T=(M.bytesRecv-f.current.bytesRecv)/_,k=(M.bytesSent-f.current.bytesSent)/_;T>=0&&k>=0&&(R(T),p(k))}}f.current=M,c(_=>[..._,M].slice(-ze))},[t]);const u=5e3;l.useEffect(()=>{let w=!0;const M=async()=>{var k;const T=await G();w&&T.success&&((k=T.data)!=null&&k.processes)&&i(T.data.processes)};M();const _=setInterval(M,u);return()=>{w=!1,clearInterval(_)}},[]);const y=async()=>{var M;m(!0),await a();const w=await G();w.success&&((M=w.data)!=null&&M.processes)&&i(w.data.processes),m(!1)};return e.jsxs(ce,{children:[e.jsx(ie,{title:"System Stats",icon:e.jsx(ye,{}),controls:e.jsxs(oe,{color:"muted",onClick:y,disabled:x,children:[e.jsx(ge,{"data-slot":"icon",className:H(x&&"animate-spin")}),"Refresh"]})}),e.jsxs(me,{children:[o&&e.jsx(E,{className:"border border-sys-red/50 bg-sys-red/10",children:e.jsx("p",{className:"text-sys-red",children:o})}),s?e.jsx(E,{neomorphic:!0,className:"p-12 text-center",children:e.jsx("div",{className:"animate-pulse text-fg-muted",children:"Loading system stats..."})}):t?e.jsxs(e.Fragment,{children:[e.jsx($,{template:"hero",children:e.jsxs(E,{neomorphic:!0,className:"pb-2 sm:pb-3",children:[e.jsx(B,{icon:e.jsx(O,{}),title:"System Resources",stackActionsOnMobile:!0,actions:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[((v=t.system)==null?void 0:v.uptime)&&e.jsx("span",{className:"px-2 py-0.5 bg-subtle-fill rounded type-data-sm text-fg-primary",children:le(t.system.uptime)}),e.jsx(Y,{level:U(t.cpu.usage_percent,I.cpu)}),e.jsx(Y,{level:U(t.memory.usage_percent,I.memory)}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("span",{className:"type-data-sm text-fg-muted",children:"CPU"}),e.jsxs("span",{className:"text-sm sm:text-base font-mono font-semibold tabular-nums",style:{color:b},children:[t.cpu.usage_percent.toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("span",{className:"type-data-sm text-fg-muted",children:"MEM"}),e.jsxs("span",{className:"text-sm sm:text-base font-mono font-semibold tabular-nums",style:{color:N},children:[t.memory.usage_percent.toFixed(0),"%"]})]})]})}),e.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:e.jsx(Me,{data:n,cpuColor:b,memoryColor:N})}),t.cpu.per_core_percent&&t.cpu.per_core_percent.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-edge-subtle",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-x-3 gap-y-0.5",children:t.cpu.per_core_percent.map((w,M)=>e.jsx(Ee,{index:M,usage:w},M))})})]})}),e.jsxs($,{template:"compact",children:[e.jsx(L,{span:12,md:6,children:e.jsx(Ae,{networkHistory:d,txRate:j,rxRate:g,totalBytesSent:t.network.bytes_sent,totalBytesRecv:t.network.bytes_recv,cpuColor:b,memoryColor:N,networkSlots:C})}),e.jsx(L,{span:12,md:6,children:e.jsx($e,{temperatures:t.temperatures})})]}),e.jsxs($,{template:"compact",children:[e.jsx(L,{span:12,sm:6,children:e.jsx(De,{usagePercent:t.memory.usage_percent,used:t.memory.used,available:t.memory.available,memoryColor:N})}),e.jsx(L,{span:12,sm:6,children:e.jsx(Ie,{usagePercent:t.disk.usage_percent,used:t.disk.used,free:t.disk.free,cpuColor:b})})]}),e.jsx($,{template:"auto",children:e.jsx(Ye,{processes:r})})]}):null]})]})}export{st as default};
