import{c as e,j as t,U as a,V as s,b as l,W as r,Y as c,Z as n,P as i,$ as o,a0 as d}from"./index-B6-Tf7Us.js";import{c as m,b as p}from"./recharts-CGff6_7g.js";import{u}from"./usePolling-9BR4yMYM.js";import{P as b,a as h,C as x,b as g}from"./PageLayout-7JDu0Wyr.js";import{C as f}from"./circle-BAl9KCsq.js";import{R as y}from"./refresh-cw-CVIyJuD4.js";import{I as N}from"./info-C0zIl40Z.js";import{L as v}from"./loader-circle-C2kvqjon.js";import"./maplibre-gl-DsiI67my.js";const w=e("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function k({className:e,style:a}){return t.jsx("div",{className:m("animate-pulse bg-white/[0.06] rounded",e),style:a})}function j(){return t.jsx("div",{className:"p-3 rounded-lg border border-border-subtle bg-bg-subtle",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(k,{className:"w-14 h-6 rounded shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[t.jsx(k,{className:"h-4 w-full"}),t.jsx(k,{className:"h-4 w-3/4"}),t.jsx(k,{className:"h-3 w-32 mt-1"})]})]})})}function M({count:e=8}){return t.jsx("div",{className:"space-y-2",children:Array.from({length:e}).map((e,a)=>t.jsx(j,{},a))})}const F=p.memo(function({log:e}){const a=d(e.level);return t.jsx("div",{className:m("p-3 rounded-lg border bg-bg-subtle",a),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:m("type-badge w-16 text-center px-2 py-1 rounded border shrink-0",a),children:e.level}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"type-data-sm text-text-primary break-words whitespace-pre-wrap",children:e.message}),t.jsx("p",{className:"type-data-xs text-text-muted mt-1",children:new Date(e.timestamp).toLocaleString()})]})]})})});function D(){const e=a(),[s,l]=p.useState("INFO"),[r,c]=p.useState(!1),[n,i]=p.useState(null);p.useEffect(()=>{if(e.length>0){const t=e.some(e=>"DEBUG"===e.level);l(t?"DEBUG":"INFO")}},[e]);const d=p.useCallback(async e=>{if(e!==s&&!r){c(!0),i(null);try{const t=await o(e);t.success&&t.data?(l(e),i(t.data.message),setTimeout(()=>i(null),5e3)):(i(t.error||"Failed to change log level"),setTimeout(()=>i(null),3e3))}catch{i("Failed to change log level"),setTimeout(()=>i(null),3e3)}finally{c(!1)}}},[s,r]);return t.jsxs("div",{className:"flex items-center gap-2",children:[n&&t.jsx("span",{className:"text-xs text-text-muted animate-pulse",children:n}),t.jsxs("div",{className:"flex rounded-lg border border-border-subtle overflow-hidden",children:[t.jsxs("button",{onClick:()=>d("INFO"),disabled:r,className:m("px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium flex items-center gap-2 transition-colors","INFO"===s?"bg-accent-primary/20 text-accent-primary border-accent-primary/30":"bg-bg-subtle text-text-muted hover:bg-bg-elevated",r&&"opacity-50 cursor-not-allowed"),children:[t.jsx(N,{className:"w-4 h-4"}),"INFO"]}),t.jsxs("button",{onClick:()=>d("DEBUG"),disabled:r,className:m("px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium flex items-center gap-2 transition-colors border-l border-border-subtle","DEBUG"===s?"bg-amber-500/20 text-amber-400 border-amber-500/30":"bg-bg-subtle text-text-muted hover:bg-bg-elevated",r&&"opacity-50 cursor-not-allowed"),children:[r?t.jsx(v,{className:"w-4 h-4 animate-spin"}):t.jsx(w,{className:"w-4 h-4"}),"DEBUG"]})]})]})}function E(){const e=a(),o=s(),d=l(),p=r(),N=c();return u(p,i.logs,d),t.jsxs(b,{children:[t.jsx(h,{title:"System Logs",icon:t.jsx(n,{}),controls:t.jsxs(t.Fragment,{children:[t.jsx(D,{}),d&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(f,{className:"w-2 h-2 fill-accent-success text-accent-success animate-pulse"}),t.jsx("span",{className:"text-text-muted",children:"Live"})]}),t.jsxs("button",{onClick:()=>N(!d),className:m("px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-sm font-medium transition-colors","flex items-center gap-2 border",d?"bg-accent-success/20 text-accent-success border-accent-success/30":"bg-bg-subtle text-text-muted border-border-subtle hover:bg-bg-elevated"),children:[t.jsx(y,{className:m("w-4 h-4",d&&"animate-spin")}),t.jsx("span",{className:"hidden xs:inline",children:d?"Live":"Paused"})]})]})}),t.jsxs(x,{noPadding:!0,children:[t.jsx(g,{listHeader:!0,icon:t.jsx(n,{className:"icon-sm"}),title:"Log Entries"}),t.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] sm:max-h-[calc(100vh-250px)] overflow-y-auto p-4",children:o&&0===e.length?t.jsx(M,{count:10}):0===e.length?t.jsx("div",{className:"text-center py-12 text-text-muted",children:"No logs available"}):e.map((e,a)=>t.jsx(F,{log:e},`${e.timestamp}-${a}`))})]})]})}export{E as default};
